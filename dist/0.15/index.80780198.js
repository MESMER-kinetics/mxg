let e,t,s,i,n,a,d,o,l,r,g,h,c,m;function u(e){return e&&e.__esModule?e.default:e}var p={};function f(e,t){if(!e.has(t))throw Error(`Key ${t} not found in map`);return e.get(t)}function N(...e){let t=e.map(e=>e.toString()).join("-").replace(/[^a-zA-Z-_0-9]/g,"_");return/^[0-9]|^--|-^[0-9]/.test(t)&&(t="_"+t),t}function x(e,t){return null==e?"":(void 0==t&&(t=", "),Array.from(e.entries()).map(([e,t])=>`${null==e?"null":e.toString()}(${null==t?"null":t.toString()})`).join(t))}function v(e,t){return void 0==t&&(t=", "),e.map(e=>null==e?"null":e.toString()).join(t)}function E(e){let t=[];for(let s=0;s<e.length;s++)t.push(new(u(p))(e[s]));return t}function y(e){try{return new(u(p))(e),!0}catch(e){return!1}}function w(e,t){return void 0==t&&(t=" "),e.map(e=>e.toString()).join(t)}function R(e,t){return null==e||e.lt(t)?t:e}function b(e,t){return null==e||e.gt(t)?t:e}!function(e){var t,s="[big.js] ",i=s+"Invalid ",n=i+"decimal places",a=i+"rounding mode",d=s+"Division by zero",o={},l=void 0,r=/^-?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i;function g(e,t,s,i){var n=e.c;if(s===l&&(s=e.constructor.RM),0!==s&&1!==s&&2!==s&&3!==s)throw Error(a);if(t<1)i=3===s&&(i||!!n[0])||0===t&&(1===s&&n[0]>=5||2===s&&(n[0]>5||5===n[0]&&(i||n[1]!==l))),n.length=1,i?(e.e=e.e-t+1,n[0]=1):n[0]=e.e=0;else if(t<n.length){if(i=1===s&&n[t]>=5||2===s&&(n[t]>5||5===n[t]&&(i||n[t+1]!==l||1&n[t-1]))||3===s&&(i||!!n[0]),n.length=t,i){for(;++n[--t]>9;)if(n[t]=0,0===t){++e.e,n.unshift(1);break}}for(t=n.length;!n[--t];)n.pop()}return e}function h(e,t,s){var i=e.e,n=e.c.join(""),a=n.length;if(t)n=n.charAt(0)+(a>1?"."+n.slice(1):"")+(i<0?"e":"e+")+i;else if(i<0){for(;++i;)n="0"+n;n="0."+n}else if(i>0){if(++i>a)for(i-=a;i--;)n+="0";else i<a&&(n=n.slice(0,i)+"."+n.slice(i))}else a>1&&(n=n.charAt(0)+"."+n.slice(1));return e.s<0&&s?"-"+n:n}o.abs=function(){var e=new this.constructor(this);return e.s=1,e},o.cmp=function(e){var t,s=this.c,i=(e=new this.constructor(e)).c,n=this.s,a=e.s,d=this.e,o=e.e;if(!s[0]||!i[0])return s[0]?n:i[0]?-a:0;if(n!=a)return n;if(t=n<0,d!=o)return d>o^t?1:-1;for(n=-1,a=(d=s.length)<(o=i.length)?d:o;++n<a;)if(s[n]!=i[n])return s[n]>i[n]^t?1:-1;return d==o?0:d>o^t?1:-1},o.div=function(e){var t=this.constructor,s=this.c,i=(e=new t(e)).c,a=this.s==e.s?1:-1,o=t.DP;if(o!==~~o||o<0||o>1e6)throw Error(n);if(!i[0])throw Error(d);if(!s[0])return e.s=a,e.c=[e.e=0],e;var r,h,c,m,u,p=i.slice(),f=r=i.length,N=s.length,x=s.slice(0,r),v=x.length,E=e,y=E.c=[],w=0,R=o+(E.e=this.e-e.e)+1;for(E.s=a,a=R<0?0:R,p.unshift(0);v++<r;)x.push(0);do{for(c=0;c<10;c++){if(r!=(v=x.length))m=r>v?1:-1;else for(u=-1,m=0;++u<r;)if(i[u]!=x[u]){m=i[u]>x[u]?1:-1;break}if(m<0){for(h=v==r?i:p;v;){if(x[--v]<h[v]){for(u=v;u&&!x[--u];)x[u]=9;--x[u],x[v]+=10}x[v]-=h[v]}for(;!x[0];)x.shift()}else break}y[w++]=m?c:++c,x[0]&&m?x[v]=s[f]||0:x=[s[f]]}while((f++<N||x[0]!==l)&&a--)return!y[0]&&1!=w&&(y.shift(),E.e--,R--),w>R&&g(E,R,t.RM,x[0]!==l),E},o.eq=function(e){return 0===this.cmp(e)},o.gt=function(e){return this.cmp(e)>0},o.gte=function(e){return this.cmp(e)>-1},o.lt=function(e){return 0>this.cmp(e)},o.lte=function(e){return 1>this.cmp(e)},o.minus=o.sub=function(e){var t,s,i,n,a=this.constructor,d=this.s,o=(e=new a(e)).s;if(d!=o)return e.s=-o,this.plus(e);var l=this.c.slice(),r=this.e,g=e.c,h=e.e;if(!l[0]||!g[0])return g[0]?e.s=-o:l[0]?e=new a(this):e.s=1,e;if(d=r-h){for((n=d<0)?(d=-d,i=l):(h=r,i=g),i.reverse(),o=d;o--;)i.push(0);i.reverse()}else for(s=((n=l.length<g.length)?l:g).length,d=o=0;o<s;o++)if(l[o]!=g[o]){n=l[o]<g[o];break}if(n&&(i=l,l=g,g=i,e.s=-e.s),(o=(s=g.length)-(t=l.length))>0)for(;o--;)l[t++]=0;for(o=t;s>d;){if(l[--s]<g[s]){for(t=s;t&&!l[--t];)l[t]=9;--l[t],l[s]+=10}l[s]-=g[s]}for(;0===l[--o];)l.pop();for(;0===l[0];)l.shift(),--h;return l[0]||(e.s=1,l=[h=0]),e.c=l,e.e=h,e},o.mod=function(e){var t,s=this,i=s.constructor,n=s.s,a=(e=new i(e)).s;if(!e.c[0])throw Error(d);return(s.s=e.s=1,t=1==e.cmp(s),s.s=n,e.s=a,t)?new i(s):(n=i.DP,a=i.RM,i.DP=i.RM=0,s=s.div(e),i.DP=n,i.RM=a,this.minus(s.times(e)))},o.neg=function(){var e=new this.constructor(this);return e.s=-e.s,e},o.plus=o.add=function(e){var t,s,i,n=this.constructor;if(e=new n(e),this.s!=e.s)return e.s=-e.s,this.minus(e);var a=this.e,d=this.c,o=e.e,l=e.c;if(!d[0]||!l[0])return l[0]||(d[0]?e=new n(this):e.s=this.s),e;if(d=d.slice(),t=a-o){for(t>0?(o=a,i=l):(t=-t,i=d),i.reverse();t--;)i.push(0);i.reverse()}for(d.length-l.length<0&&(i=l,l=d,d=i),t=l.length,s=0;t;d[t]%=10)s=(d[--t]=d[t]+l[t]+s)/10|0;for(s&&(d.unshift(s),++o),t=d.length;0===d[--t];)d.pop();return e.c=d,e.e=o,e},o.pow=function(e){var t=this,s=new t.constructor("1"),n=s,a=e<0;if(e!==~~e||e<-1e6||e>1e6)throw Error(i+"exponent");for(a&&(e=-e);1&e&&(n=n.times(t)),e>>=1;)t=t.times(t);return a?s.div(n):n},o.prec=function(e,t){if(e!==~~e||e<1||e>1e6)throw Error(i+"precision");return g(new this.constructor(this),e,t)},o.round=function(e,t){if(e===l)e=0;else if(e!==~~e||e<-1e6||e>1e6)throw Error(n);return g(new this.constructor(this),e+this.e+1,t)},o.sqrt=function(){var e,t,i,n=this.constructor,a=this.s,d=this.e,o=new n("0.5");if(!this.c[0])return new n(this);if(a<0)throw Error(s+"No square root");0===(a=Math.sqrt(this+""))||a===1/0?((t=this.c.join("")).length+d&1||(t+="0"),d=((d+1)/2|0)-(d<0||1&d),e=new n(((a=Math.sqrt(t))==1/0?"5e":(a=a.toExponential()).slice(0,a.indexOf("e")+1))+d)):e=new n(a+""),d=e.e+(n.DP+=4);do i=e,e=o.times(i.plus(this.div(i)));while(i.c.slice(0,d).join("")!==e.c.slice(0,d).join(""))return g(e,(n.DP-=4)+e.e+1,n.RM)},o.times=o.mul=function(e){var t,s=this.constructor,i=this.c,n=(e=new s(e)).c,a=i.length,d=n.length,o=this.e,l=e.e;if(e.s=this.s==e.s?1:-1,!i[0]||!n[0])return e.c=[e.e=0],e;for(e.e=o+l,a<d&&(t=i,i=n,n=t,l=a,a=d,d=l),t=Array(l=a+d);l--;)t[l]=0;for(o=d;o--;){for(d=0,l=a+o;l>o;)d=t[l]+n[o]*i[l-o-1]+d,t[l--]=d%10,d=d/10|0;t[l]=d}for(d?++e.e:t.shift(),o=t.length;!t[--o];)t.pop();return e.c=t,e},o.toExponential=function(e,t){var s=this,i=s.c[0];if(e!==l){if(e!==~~e||e<0||e>1e6)throw Error(n);for(s=g(new s.constructor(s),++e,t);s.c.length<e;)s.c.push(0)}return h(s,!0,!!i)},o.toFixed=function(e,t){var s=this,i=s.c[0];if(e!==l){if(e!==~~e||e<0||e>1e6)throw Error(n);for(s=g(new s.constructor(s),e+s.e+1,t),e=e+s.e+1;s.c.length<e;)s.c.push(0)}return h(s,!1,!!i)},o.toJSON=o.toString=function(){var e=this.constructor;return h(this,this.e<=e.NE||this.e>=e.PE,!!this.c[0])},o.toNumber=function(){var e=Number(h(this,!0,!0));if(!0===this.constructor.strict&&!this.eq(e.toString()))throw Error(s+"Imprecise conversion");return e},o.toPrecision=function(e,t){var s=this,n=s.constructor,a=s.c[0];if(e!==l){if(e!==~~e||e<1||e>1e6)throw Error(i+"precision");for(s=g(new n(s),e,t);s.c.length<e;)s.c.push(0)}return h(s,e<=s.e||s.e<=n.NE||s.e>=n.PE,!!a)},o.valueOf=function(){var e=this.constructor;if(!0===e.strict)throw Error(s+"valueOf disallowed");return h(this,this.e<=e.NE||this.e>=e.PE,!0)},(t=function e(){function t(s){if(!(this instanceof t))return s===l?e():new t(s);if(s instanceof t)this.s=s.s,this.e=s.e,this.c=s.c.slice();else{if("string"!=typeof s){if(!0===t.strict&&"bigint"!=typeof s)throw TypeError(i+"value");s=0===s&&1/s<0?"-0":String(s)}(function(e,t){var s,n,a;if(!r.test(t))throw Error(i+"number");for(e.s="-"==t.charAt(0)?(t=t.slice(1),-1):1,(s=t.indexOf("."))>-1&&(t=t.replace(".","")),(n=t.search(/e/i))>0?(s<0&&(s=n),s+=+t.slice(n+1),t=t.substring(0,n)):s<0&&(s=t.length),a=t.length,n=0;n<a&&"0"==t.charAt(n);)++n;if(n==a)e.c=[e.e=0];else{for(;a>0&&"0"==t.charAt(--a););for(e.e=s-n-1,e.c=[],s=0;n<=a;)e.c[s++]=+t.charAt(n++)}})(this,s)}this.constructor=t}return t.prototype=o,t.DP=20,t.RM=1,t.NE=-7,t.PE=21,t.strict=!1,t.roundDown=0,t.roundHalfUp=1,t.roundHalfEven=2,t.roundUp=3,t}()).default=t.Big=t,"function"==typeof define&&define.amd?define(function(){return t}):p?p=t:e.Big=t}(p);const C="button",S="select";function M(e,t,s,i,n,a,d){let o=G(e,d),l=O(n+" ▼",N(e,C),a);return l.className="collapsible",l.addEventListener("click",function(){let e=l.textContent.split(" ");e[e.length-1]="▼"===e[e.length-1]?"▲":"▼",l.textContent=e.join(" ")}),o.appendChild(l),o.appendChild(i),null!=s?t.insertBefore(o,s):t.appendChild(o),l.removeEventListener("click",T),l.addEventListener("click",T),o}function T(){this.classList.toggle("active");let e=this.nextElementSibling;null!=e?e instanceof HTMLDivElement?"block"===e.style.display?e.style.display="none":e.style.display="block":console.log("toggleCollapsible: nextElementSibling is not an HTMLDivElement"):console.log("toggleCollapsible: nextElementSibling is null")}function I(e,t,s,i,n,a,d){let o;let l=U(void 0,i),r=((o=z(e,t,s)).onchange=n,o.value=a,P(o),o),g=q(d,s);return g.htmlFor=t,l.appendChild(g),l.appendChild(r),l}function z(e,t,s){let i=document.createElement("input");return i.type=e,i.id=t,Object.assign(i.style,s),i.style.fontSize="1em",i.classList.add("auto-width"),i}function _(e,t){let s=document.createElement("textarea");return s.id=e,Object.assign(s.style,t),s.style.fontSize="1em",s.classList.add("auto-width"),s}function D(e,t){let s="<"+t;if(e)for(let[t,i]of e)s+=" "+t+'="'+i+'"';return s+" />"}function P(e,t){void 0==t&&(t=4),e.style.width=e.value.length+t+"ch"}function L(e,t){void 0==t&&(t=6),e.style.width=e.value.length+t+"ch"}function B(e,t){void 0==t&&(t=6),e.style.width=e.value.length+t+"ch"}function A(e,t,s,i,n){let a=document.createElement("select");return e.forEach(e=>{a.name=t,a.id=i;let s=document.createElement("option");s.value=e,s.text=e,a.appendChild(s)}),a.value=s,a.style.fontSize="1em",a.classList.add("auto-width"),L(a),Object.assign(a.style,n),a}function k(e,t,s,i,n,a,d){let o=U(n,d),l=q(e,a);return o.appendChild(l),o.appendChild(A(t,s,i,N(n,S),a)),o}function O(e,t,s){let i=document.createElement("button");return i.textContent=e,void 0!=t&&(i.id=t),void 0!=s&&Object.assign(i.style,s),i.style.fontSize="1em",i}function G(e,t){let s=document.createElement("div");return void 0!=e&&(s.id=e),void 0!=t&&Object.assign(s.style,t),s}function U(e,t){let s=G(e,t);return s.style.display="flex",s.style.flexWrap="wrap",s}function q(e,t){let s=document.createElement("label");return Object.assign(s.style,t),s.textContent=e,s.style.fontSize="1em",s}function V(e,t){let s=document.createElement("table");return s.id=e,Object.assign(s.style,t),s}function F(e,t){let s=e.createTHead().insertRow();return t.forEach(e=>{let t=document.createElement("th");t.textContent=e,s.appendChild(t)}),s}function H(e,t){let s=e.insertRow();return t.forEach(e=>{s.insertCell().textContent=e}),s}function j(e,t){let s=e.getElementsByTagName(t)[0];if(null==s)throw Error(t+" element not found");return s}function X(e){let t=e.childNodes;if(null==t)throw Error("Element has no childNodes");return t[0]}function Y(e){let t=e.nodeValue;if(null==t)throw Error("nodeValue is null");return t}function $(e){let t=X(e);return t?Y(t).trim():""}class K{constructor(e){this.tagName=e}toXML(e){let t=D(void 0,this.tagName);return e?"\n"+e+t:t}}class W extends K{constructor(e,t){super(t),this.attributes=e}toString(){let e=this.tagName+"(";return this.attributes&&this.attributes.forEach((t,s)=>{e+=`${s}(${t}), `}),e}toXML(e){let t="";for(let[s,i]of(void 0!=e&&(t+="\n"+e),t+="<"+this.tagName,this.attributes))t+=" "+s+'="'+i.toString()+'"';return t+" />"}}class Z extends W{constructor(e,t,s){super(e,t),this.value=s}toString(){return super.toString()+`, ${this.value.toString()})`}toXML(e){return et(this.value.trim(),this.tagName,this.attributes,e,!1)}}class J extends W{constructor(e,t,s){super(e,t),this.value=s}toString(){return super.toString()+`, ${this.value.toString()})`}toXML(e){return et(this.value.toString(),this.tagName,this.attributes,e,!1)}}class Q extends W{constructor(e,t,s,i){super(e,t),this.delimiter=" ",this.values=s,void 0!=i&&(this.delimiter=i)}getValues(){return this.values}setValues(e){this.values=e}toString(){return super.toString()+`, ${this.values.toString()})`}setDelimiter(e){this.delimiter=e}toXML(e){return et(w(this.values,this.delimiter),this.tagName,this.attributes,e,!1)}}class ee extends W{constructor(e,t){super(e,t),this.nodes=new Map}addNode(e){this.nodes.set(this.nodes.size,e)}toString(){let e=super.toString();return this.nodes.forEach((t,s)=>{e+=`, ${t.toString()}`}),e+")"}toXML(e,t){let s;void 0!=e&&void 0!=t&&(s=t+e);let i="";if(this.nodes.size>0){let n=0;return this.nodes.forEach(t=>{void 0==t?console.warn("Node "+n.toString()+" is undefined this.nodes.size = "+this.nodes.size):t instanceof ee?i+=t.toXML(e,s):i+=t.toXML(s),n++}),et(i,this.tagName,this.attributes,t,!0)}{let e=D(this.attributes,this.tagName);return void 0!=t?"\n"+t+e:e}}}function et(e,t,s,i,n){let a;return function(e,t,s){let i="";if(void 0!=s&&(i+="\n"+s),i+="<"+e,t)for(let[e,s]of t)i+=" "+e+'="'+s.toString()+'"';return i+">"}(t,s,i)+e+(a="",n&&void 0!=i&&(a+="\n"+i),a+"</"+t+">")}function es(e){let t=e.getAttributeNames(),s=new Map;return t.forEach(function(t){let i=e.getAttribute(t);null!=i&&s.set(t.trim(),i.trim())}),s}function ei(e,t){let s=e.getElementsByTagName(t);if(1!=s.length)throw Error("Expecting 1 "+t+" but finding "+s.length);return s[0]}class en extends J{static{this.tagName="me:eigenvalue"}constructor(e,t){super(e,en.tagName,t)}}class ea extends ee{static{this.tagName="me:eigenvalueList"}constructor(e,t){super(e,ea.tagName),t&&t.forEach(e=>{this.addNode(e)})}addEigenvalue(e){this.addNode(e)}}class ed extends J{static{this.tagName="me:pop"}constructor(e,t){super(e,ed.tagName,t)}}class eo extends ee{static{this.tagName="me:population"}constructor(e,t){super(e,eo.tagName)}addPop(e){this.addNode(e)}}class el extends ee{static{this.tagName="me:populationList"}constructor(e,t){super(e,el.tagName),t&&t.forEach(e=>{this.addNode(e)})}addPopulation(e){this.addNode(e)}}class er extends J{static{this.tagName="me:firstOrderLoss"}constructor(e,t){super(e,er.tagName,t)}}class eg extends J{static{this.tagName="me:firstOrderRate"}constructor(e,t){super(e,eg.tagName,t)}}class eh extends J{static{this.tagName="me:secondOrderRate"}constructor(e,t){super(e,eh.tagName,t)}}class ec extends ee{static{this.tagName="me:rateList"}constructor(e,t,s,i){if(super(e,ec.tagName),this.index=new Map,this.folIndex=new Map,t){let e=0;t.forEach(t=>{this.index.set(er.tagName+e.toString(),this.nodes.size),this.folIndex.set(this.folIndex.size,this.nodes.size),this.addNode(t),e++}),this.fols=t}else this.fols=[];if(this.forIndex=new Map,s){let e=0;s.forEach(t=>{this.index.set(eg.tagName+e.toString(),this.nodes.size),this.forIndex.set(this.forIndex.size,this.nodes.size),this.addNode(t),e++}),this.fors=s}else this.fors=[];if(this.sorIndex=new Map,i){let e=0;i.forEach(t=>{this.index.set(eh.tagName+e.toString(),this.nodes.size),this.sorIndex.set(this.sorIndex.size,this.nodes.size),this.addNode(t),e++}),this.sors=i}else this.sors=[]}setTemperature(e){this.attributes.set("T",e.toString())}setConcentration(e){this.attributes.set("conc",e.toString())}setBathGas(e){this.attributes.set("bathGas",e)}setUnits(e){this.attributes.set("units",e)}addFirstOrderLoss(e){this.folIndex.set(this.folIndex.size,this.nodes.size),this.index.set(er.tagName+this.folIndex.size.toString(),this.nodes.size),this.fols.push(e),this.addNode(e)}addFirstOrderRate(e){this.forIndex.set(this.forIndex.size,this.nodes.size),this.index.set(eg.tagName+this.forIndex.size.toString(),this.nodes.size),this.fors.push(e),this.addNode(e)}addSecondOrderRate(e){this.sorIndex.set(this.sorIndex.size,this.nodes.size),this.index.set(eh.tagName+this.sorIndex.size.toString(),this.nodes.size),this.sors.push(e),this.addNode(e)}}class em extends ee{static{this.tagName="me:analysis"}constructor(e,t,s,i,n){super(e,ec.tagName),this.index=new Map,t&&(this.index.set(tA.tagName,this.nodes.size),this.addNode(t)),this.elIndex=new Map,s?(s.forEach(e=>{this.index.set(ea.tagName,this.nodes.size),this.elIndex.set(this.elIndex.size,this.nodes.size),this.addNode(e)}),this.els=s):this.els=[],this.plIndex=new Map,i?(i.forEach(e=>{this.index.set(el.tagName,this.nodes.size),this.plIndex.set(this.plIndex.size,this.nodes.size),this.addNode(e)}),this.pls=i):this.pls=[],this.rlIndex=new Map,n?(n.forEach(e=>{this.index.set(ec.tagName,this.nodes.size),this.rlIndex.set(this.rlIndex.size,this.nodes.size),this.addNode(e)}),this.rls=n):this.rls=[]}getDescription(){if(this.index.has(tA.tagName)){let e=this.index.get(tA.tagName);return this.nodes.get(e)}}setDescription(e){if(this.index.has(tA.tagName)){let t=this.index.get(tA.tagName);this.nodes.set(t,e)}else this.index.set(tA.tagName,this.nodes.size),this.addNode(e)}addEigenvalueList(e){this.elIndex.set(this.elIndex.size,this.nodes.size),this.addNode(e),this.els.push(e)}addPopulationList(e){this.plIndex.set(this.plIndex.size,this.nodes.size),this.addNode(e),this.pls.push(e)}addRateList(e){this.rlIndex.set(this.rlIndex.size,this.nodes.size),this.addNode(e),this.rls.push(e)}}class eu extends Z{static{this.tagName="me:bathGas"}constructor(e,t){super(e,eu.tagName,t)}}class ep extends J{static{this.tagName="me:experimentalRate"}static{this.s_ref1="ref1"}static{this.s_ref2="ref2"}static{this.s_refReaction="refReaction"}static{this.s_error="error"}constructor(e,t){super(e,ep.tagName,t)}getRef1(){return this.attributes.get(ep.s_ref1)}setRef1(e){this.attributes.set(ep.s_ref1,e)}getRef2(){return this.attributes.get(ep.s_ref2)}setRef2(e){this.attributes.set(ep.s_ref2,e)}getRefReaction(){return this.attributes.get(ep.s_refReaction)}setRefReaction(e){this.attributes.set(ep.s_refReaction,e)}getError(){return new(u(p))(this.attributes.get(ep.s_error))}setError(e){this.attributes.set(ep.s_error,e.toString())}}class ef extends J{static{this.tagName="me:experimentalYield"}static{this.s_ref="ref"}static{this.s_error="error"}static{this.s_yieldTime="yieldTime"}constructor(e,t){super(e,ef.tagName,t)}getRef(){return this.attributes.get(ef.s_ref)}setRef(e){this.attributes.set(ef.s_ref,e)}getError(){return new(u(p))(this.attributes.get(ef.s_error))}setError(e){this.attributes.set(ef.s_error,e.toString())}getYieldTime(){return new(u(p))(this.attributes.get(ef.s_yieldTime))}setYieldTime(e){this.attributes.set(ef.s_yieldTime,e.toString())}}class eN extends J{static{this.tagName="me:experimentalEigenvalue"}static{this.s_EigenvalueID="EigenvalueID"}static{this.s_error="error"}constructor(e,t){super(e,eN.tagName,t)}getEigenvalueID(){return this.attributes.get(eN.s_EigenvalueID)}setEigenvalueID(e){this.attributes.set(eN.s_EigenvalueID,e)}getError(){return new(u(p))(this.attributes.get(eN.s_error))}setError(e){this.attributes.set(eN.s_error,e.toString())}}class ex extends J{static{this.tagName="me:excessReactantConc"}static{this.s_percent="percent"}constructor(e,t){super(e,ex.tagName,t)}getPercent(){return this.attributes.get(ex.s_percent)}setPercent(e){this.attributes.set(ex.s_percent,e)}}class ev extends ee{static{this.tagName="me:PTpair"}static{this.s_P="P"}static{this.s_T="T"}static{this.s_precision="precision"}static{this.s_excessReactantConc="excessReactantConc"}static{this.s_percentExcessReactantConc="percentExcessReactantConc"}constructor(e,t,s,i,n){super(e,ev.tagName),this.index=new Map,void 0!=t&&(this.index.set(eu.tagName,this.nodes.size),this.addNode(t)),void 0!=s&&(this.index.set(ep.tagName,this.nodes.size),this.addNode(s)),void 0!=i&&(this.index.set(ef.tagName,this.nodes.size),this.addNode(i)),void 0!=n&&(this.index.set(eN.tagName,this.nodes.size),this.addNode(n))}getP(){let e=this.attributes.get(ev.s_P);if(void 0!==e)return new(u(p))(e)}setP(e){this.attributes.set(ev.s_P,e.toString())}getT(){let e=this.attributes.get(ev.s_T);if(void 0!==e)return new(u(p))(e)}setT(e){this.attributes.set(ev.s_T,e.toString())}getPrecision(){return this.attributes.get(ev.s_precision)}setPrecision(e){this.attributes.set(ev.s_precision,e)}getBathGas(){let e=this.index.get(eu.tagName);return void 0!=e?this.nodes.get(e):void 0}setBathGas(e){let t=this.index.get(eu.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eu.tagName,this.nodes.size),this.addNode(e))}removeBathGas(){let e=this.index.get(eu.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(eu.tagName))}getExperimentalRate(){let e=this.index.get(ep.tagName);return void 0!=e?this.nodes.get(e):void 0}setExperimentalRate(e){let t=this.index.get(ep.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(ep.tagName,this.nodes.size),this.addNode(e))}removeExperimentalRate(){let e=this.index.get(ep.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(ep.tagName))}getExperimentalYield(){let e=this.index.get(ef.tagName);return void 0!=e?this.nodes.get(e):void 0}setExperimentalYield(e){let t=this.index.get(ef.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(ef.tagName,this.nodes.size),this.addNode(e))}removeExperimentalYield(){let e=this.index.get(ef.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(ef.tagName))}getExperimentalEigenvalue(){let e=this.index.get(eN.tagName);return void 0!=e?this.nodes.get(e):void 0}setExperimentalEigenvalue(e){let t=this.index.get(eN.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eN.tagName,this.nodes.size),this.addNode(e))}removeExperimentalEigenvalue(){let e=this.index.get(eN.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(eN.tagName))}getExcessReactantConc(){return this.attributes.get(ev.s_excessReactantConc)}setExcessReactantConc(e){this.attributes.set(ev.s_excessReactantConc,e)}getPercentExcessReactantConc(){return this.attributes.get(ev.s_percentExcessReactantConc)}setPercentExcessReactantConc(e){this.attributes.set(ev.s_percentExcessReactantConc,e)}}class eE extends ee{static{this.tagName="me:PTs"}constructor(e,t){super(e,eE.tagName),void 0!=t?(t.forEach(e=>{this.addNode(e)}),this.ptps=t):this.ptps=[]}get(e){return this.ptps[e]}set(e,t){this.nodes.set(e,t),this.ptps[e]=t}add(e){return this.addNode(e),this.ptps.push(e),this.nodes.size-1}remove(e){this.nodes.delete(e),this.ptps.splice(e,1)}init(e){this.clear(),e.forEach(e=>{this.addNode(e),this.ptps.push(e)})}clear(){this.nodes.clear(),this.ptps=[]}}class ey extends ee{static{this.tagName="me:conditions"}constructor(e,t,s,i){super(e,ey.tagName),this.id=t,this.index=new Map,this.bathGasesIndex=new Map,this.bathGases=new Map,void 0!=s&&(this.index.set(eu.tagName,this.nodes.size),s.forEach(e=>{this.bathGasesIndex.set(e.value,this.nodes.size),this.addNode(e),this.bathGases.set(e,s.size)})),void 0!=i&&(this.index.set(eE.tagName,this.nodes.size),this.addNode(i))}getBathGases(){return this.bathGases}addBathGas(e){if(this.bathGases.has(e))return this.bathGases.get(e);{let t=this.bathGases.size;return this.bathGases.set(e,t),this.bathGasesIndex.set(e.value,this.nodes.size),this.addNode(e),t}}removeBathGas(e){this.bathGases.has(e)?(this.bathGases.delete(e),this.nodes.delete(this.bathGasesIndex.get(e.value))):console.warn("Conditions.removeBathGas: bathGas not found to remove.")}getPTs(){let e=this.index.get(eE.tagName);if(void 0!=e)return this.nodes.get(e)}setPTs(e){let t=this.index.get(eE.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eE.tagName,this.nodes.size),this.addNode(e))}}class ew extends K{static{this.tagName="me:calculateRateCoefficientsOnly"}constructor(){super(ew.tagName)}}class eR extends K{static{this.tagName="me:printCellDOS"}constructor(){super(eR.tagName)}}class eb extends K{static{this.tagName="me:printCellTransitionStateFlux"}constructor(){super(eb.tagName)}}class eC extends K{static{this.tagName="me:printReactionOperatorColumnSums"}constructor(){super(eC.tagName)}}class eS extends K{static{this.tagName="me:printGrainBoltzmann"}constructor(){super(eS.tagName)}}class eM extends K{static{this.tagName="me:printGrainDOS"}constructor(){super(eM.tagName)}}class eT extends K{static{this.tagName="me:printGrainkbE"}constructor(){super(eT.tagName)}}class eI extends K{static{this.tagName="me:printGrainkfE"}constructor(){super(eI.tagName)}}class ez extends K{static{this.tagName="me:printTSsos"}constructor(){super(ez.tagName)}}class e_ extends K{static{this.tagName="me:printGrainedSpeciesProfile"}constructor(){super(e_.tagName)}}class eD extends K{static{this.tagName="me:printGrainTransitionStateFlux"}constructor(){super(eD.tagName)}}class eP extends K{static{this.tagName="me:printReactionOperatorSize"}constructor(){super(eP.tagName)}}class eL extends K{static{this.tagName="me:printSpeciesProfile"}constructor(){super(eL.tagName)}}class eB extends K{static{this.tagName="me:printPhenomenologicalEvolution"}constructor(){super(eB.tagName)}}class eA extends K{static{this.tagName="me:printTunnelingCoefficients"}constructor(){super(eA.tagName)}}class ek extends K{static{this.tagName="me:printCrossingCoefficients"}constructor(){super(ek.tagName)}}class eO extends K{static{this.tagName="me:testDOS"}constructor(){super(eO.tagName)}}class eG extends K{static{this.tagName="me:testRateConstant"}constructor(){super(eG.tagName)}}class eU extends K{static{this.tagName="me:useTheSameCellNumberForAllConditions"}constructor(){super(eU.tagName)}}class eq extends K{static{this.tagName="me:ForceMacroDetailedBalance"}constructor(){super(eq.tagName)}}class eV extends K{static{this.tagName="me:hideInactive"}constructor(){super(eV.tagName)}}class eF extends ee{static{this.tagName="me:calcMethod"}static{this.options=["simpleCalc","gridSearch","fitting","marquardt","analyticalRepresentation","ThermodynamicTable","sensitivityAnalysis","me:simpleCalc","me:gridSearch","me:fitting","me:marquardt","me:analyticalRepresentation","me:ThermodynamicTable","me:sensitivityAnalysis"]}constructor(e){super(e,eF.tagName)}}class eH extends eF{static{this.xsi_type="me:simpleCalc"}static{this.xsi_type2="simpleCalc"}constructor(e){super(e)}}class ej extends eF{static{this.xsi_type="me:gridSearch"}static{this.xsi_type2="gridSearch"}constructor(e){super(e)}}class eX extends J{static{this.tagName="me:fittingIterations"}constructor(e,t){super(e,eX.tagName,t)}}class eY extends eF{static{this.xsi_type="me:fitting"}static{this.xsi_type2="fitting"}constructor(e,t){super(e),void 0!=t&&this.addNode(t)}getFittingIterations(){return this.nodes.get(0)}setFittingIterations(e){this.nodes.set(0,e)}removeFittingIterations(){this.nodes.delete(0)}}class e$ extends J{static{this.tagName="me:MarquardtIterations"}constructor(e,t){super(e,e$.tagName,t)}}class eK extends J{static{this.tagName="me:MarquardtTolerance"}constructor(e,t){super(e,eK.tagName,t)}}class eW extends J{static{this.tagName="me:MarquardtDerivDelta"}constructor(e,t){super(e,eW.tagName,t)}}class eZ extends eF{static{this.xsi_type="me:marquardt"}static{this.xsi_type2="marquardt"}static{this.MarquardtDerivDeltaDefault="1.e-03"}static{this.MarquardtTolerance="1.e-03"}static{this.MarquardtLambda="1.0"}static{this.MarquardtLambdaScale="10.0"}constructor(e,t,s,i){super(e),this.index=new Map,void 0!=t&&(this.index.set(e$.tagName,this.nodes.size),this.addNode(t)),void 0!=s&&(this.index.set(eK.tagName,this.nodes.size),this.addNode(s)),void 0!=i&&(this.index.set(eW.tagName,this.nodes.size),this.addNode(i))}getMarquardtIterations(){let e=this.index.get(e$.tagName);if(void 0!=e)return this.nodes.get(e)}setMarquardtIterations(e){let t=this.index.get(e$.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(e$.tagName,this.nodes.size),this.addNode(e))}removeMarquardtIterations(){let e=this.index.get(e$.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(e$.tagName))}getMarquardtTolerance(){let e=this.index.get(eK.tagName);if(void 0!=e)return this.nodes.get(e)}setMarquardtTolerance(e){let t=this.index.get(eK.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eK.tagName,this.nodes.size),this.addNode(e))}removeMarquardtTolerance(){let e=this.index.get(eK.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(eK.tagName))}getMarquardtDerivDelta(){let e=this.index.get(eW.tagName);if(void 0!=e)return this.nodes.get(e)}setMarquardtDerivDelta(e){let t=this.index.get(eW.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eW.tagName,this.nodes.size),this.addNode(e))}removeMarquardtDerivDelta(){let e=this.index.get(eW.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(eW.tagName))}}class eJ extends K{static{this.tagName="me:useTraceWeighting"}constructor(){super(eJ.tagName)}}class eQ extends Z{static{this.tagName="me:format"}static{this.options=["cantera","chemkin"]}static{this.rateUnits="rateUnits"}static{this.rateUnitsOptions=["cm3mole-1s-1","cm3molecule-1s-1"]}constructor(e,t){super(e,eQ.tagName,t)}getRateUnits(){return this.attributes.get(eQ.rateUnits)}setRateUnits(e){this.attributes.set(eQ.rateUnits,e)}removeRateUnits(){this.attributes.delete(eQ.rateUnits)}}class e0 extends Z{static{this.tagName="me:precision"}constructor(e,t){super(e,e0.tagName,t)}}class e1 extends J{static{this.tagName="me:chebNumTemp"}constructor(e,t){super(e,e1.tagName,t)}}class e2 extends J{static{this.tagName="me:chebNumConc"}constructor(e,t){super(e,e2.tagName,t)}}class e3 extends J{static{this.tagName="me:chebMaxTemp"}constructor(e,t){super(e,e3.tagName,t)}}class e5 extends J{static{this.tagName="me:chebMinTemp"}constructor(e,t){super(e,e5.tagName,t)}}class e4 extends J{static{this.tagName="me:chebMaxConc"}constructor(e,t){super(e,e4.tagName,t)}getUnits(){return this.attributes.get("units")}setUnits(e){this.attributes.set("units",e)}}class e6 extends J{static{this.tagName="me:chebMinConc"}constructor(e,t){super(e,e6.tagName,t)}}class e8 extends J{static{this.tagName="me:chebTExSize"}constructor(e,t){super(e,e8.tagName,t)}}class e9 extends J{static{this.tagName="me:chebPExSize"}constructor(e,t){super(e,e9.tagName,t)}}class e7 extends eF{static{this.xsi_type="me:analyticalRepresentation"}static{this.xsi_type2="analyticalRepresentation"}constructor(e,t,s,i,n,a,d,o,l,r,g){super(e),this.index=new Map,void 0!=t&&(this.index.set(eQ.tagName,this.nodes.size),this.addNode(t)),void 0!=s&&(this.index.set(e0.tagName,this.nodes.size),this.addNode(s)),void 0!=i&&(this.index.set(e1.tagName,this.nodes.size),this.addNode(i)),void 0!=n&&(this.index.set(e2.tagName,this.nodes.size),this.addNode(n)),void 0!=a&&(this.index.set(e3.tagName,this.nodes.size),this.addNode(a)),void 0!=d&&(this.index.set(e5.tagName,this.nodes.size),this.addNode(d)),void 0!=o&&(this.index.set(e4.tagName,this.nodes.size),this.addNode(o)),void 0!=l&&(this.index.set(e6.tagName,this.nodes.size),this.addNode(l)),void 0!=r&&(this.index.set(e8.tagName,this.nodes.size),this.addNode(r)),void 0!=g&&(this.index.set(e9.tagName,this.nodes.size),this.addNode(g))}getFormat(){let e=this.index.get(eQ.tagName);if(void 0!=e)return this.nodes.get(e)}setFormat(e){let t=this.index.get(eQ.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eQ.tagName,this.nodes.size),this.addNode(e))}removeFormat(){let e=this.index.get(eQ.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(eQ.tagName))}getPrecision(){let e=this.index.get(e0.tagName);if(void 0!=e)return this.nodes.get(e)}setPrecision(e){let t=this.index.get(e0.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(e0.tagName,this.nodes.size),this.addNode(e))}removePrecision(){let e=this.index.get(e0.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(e0.tagName))}getChebNumTemp(){let e=this.index.get(e1.tagName);if(void 0!=e)return this.nodes.get(e)}setChebNumTemp(e){let t=this.index.get(e1.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(e1.tagName,this.nodes.size),this.addNode(e))}removeChebNumTemp(){let e=this.index.get(e1.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(e1.tagName))}getChebNumConc(){let e=this.index.get(e2.tagName);if(void 0!=e)return this.nodes.get(e)}setChebNumConc(e){let t=this.index.get(e2.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(e2.tagName,this.nodes.size),this.addNode(e))}removeChebNumConc(){let e=this.index.get(e2.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(e2.tagName))}getChebMaxTemp(){let e=this.index.get(e3.tagName);if(void 0!=e)return this.nodes.get(e)}setChebMaxTemp(e){let t=this.index.get(e3.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(e3.tagName,this.nodes.size),this.addNode(e))}removeChebMaxTemp(){let e=this.index.get(e3.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(e3.tagName))}getChebMinTemp(){let e=this.index.get(e5.tagName);if(void 0!=e)return this.nodes.get(e)}setChebMinTemp(e){let t=this.index.get(e5.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(e5.tagName,this.nodes.size),this.addNode(e))}removeChebMinTemp(){let e=this.index.get(e5.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(e5.tagName))}getChebMaxConc(){let e=this.index.get(e4.tagName);if(void 0!=e)return this.nodes.get(e)}setChebMaxConc(e){let t=this.index.get(e4.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(e4.tagName,this.nodes.size),this.addNode(e))}removeChebMaxConc(){let e=this.index.get(e4.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(e4.tagName))}getChebMinConc(){let e=this.index.get(e6.tagName);if(void 0!=e)return this.nodes.get(e)}setChebMinConc(e){let t=this.index.get(e6.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(e6.tagName,this.nodes.size),this.addNode(e))}removeChebMinConc(){let e=this.index.get(e6.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(e6.tagName))}getChebTExSize(){let e=this.index.get(e8.tagName);if(void 0!=e)return this.nodes.get(e)}setChebTExSize(e){let t=this.index.get(e8.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(e8.tagName,this.nodes.size),this.addNode(e))}removeChebTExSize(){let e=this.index.get(e8.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(e8.tagName))}getChebPExSize(){let e=this.index.get(e9.tagName);if(void 0!=e)return this.nodes.get(e)}setChebPExSize(e){let t=this.index.get(e9.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(e9.tagName,this.nodes.size),this.addNode(e))}removeChebPExSize(){let e=this.index.get(e9.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(e9.tagName))}}class te extends J{static{this.tagName="me:Tmin"}constructor(e,t){super(e,te.tagName,t)}}class tt extends J{static{this.tagName="me:Tmid"}constructor(e,t){super(e,tt.tagName,t)}}class ts extends J{static{this.tagName="me:Tmax"}constructor(e,t){super(e,ts.tagName,t)}}class ti extends J{static{this.tagName="me:Tstep"}constructor(e,t){super(e,ti.tagName,t)}}class tn extends eF{static{this.xsi_type="me:ThermodynamicTable"}static{this.xsi_type2="ThermodynamicTable"}constructor(e,t,s,i,n){super(e),this.index=new Map,void 0!=t&&(this.index.set(te.tagName,this.nodes.size),this.addNode(t)),void 0!=s&&(this.index.set(tt.tagName,this.nodes.size),this.addNode(s)),void 0!=i&&(this.index.set(ts.tagName,this.nodes.size),this.addNode(i)),void 0!=n&&(this.index.set(ti.tagName,this.nodes.size),this.addNode(n))}getTmin(){let e=this.index.get(te.tagName);if(void 0!=e)return this.nodes.get(e)}setTmin(e){let t=this.index.get(te.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(te.tagName,this.nodes.size),this.addNode(e))}removeTmin(){let e=this.index.get(te.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(te.tagName))}getTmid(){let e=this.index.get(tt.tagName);if(void 0!=e)return this.nodes.get(e)}setTmid(e){let t=this.index.get(tt.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(tt.tagName,this.nodes.size),this.addNode(e))}removeTmid(){let e=this.index.get(tt.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(tt.tagName))}getTmax(){let e=this.index.get(ts.tagName);if(void 0!=e)return this.nodes.get(e)}setTmax(e){let t=this.index.get(ts.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(ts.tagName,this.nodes.size),this.addNode(e))}removeTmax(){let e=this.index.get(ts.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(ts.tagName))}getTstep(){let e=this.index.get(ti.tagName);if(void 0!=e)return this.nodes.get(e)}setTstep(e){let t=this.index.get(ti.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(ti.tagName,this.nodes.size),this.addNode(e))}removeTstep(){let e=this.index.get(ti.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(ti.tagName))}}class ta extends J{static{this.tagName="me:sensitivityAnalysisSamples"}constructor(e,t){super(e,ta.tagName,t)}}class td extends J{static{this.tagName="me:sensitivityAnalysisOrder"}constructor(e,t){super(e,td.tagName,t)}}class to extends J{static{this.tagName="me:sensitivityNumVarRedIters"}constructor(e,t){super(e,to.tagName,t)}}class tl extends Z{static{this.tagName="me:sensitivityVarRedMethod"}static{this.options=["AdditiveControl","RatioControl"]}constructor(e,t){super(e,tl.tagName,t)}}class tr extends eF{static{this.xsi_type="me:sensitivityAnalysis"}static{this.xsi_type2="sensitivityAnalysis"}constructor(e,t,s,i,n){super(e),this.index=new Map,void 0!=t&&(this.index.set(ta.tagName,this.nodes.size),this.addNode(t)),void 0!=s&&(this.index.set(td.tagName,this.nodes.size),this.addNode(s)),void 0!=i&&(this.index.set(to.tagName,this.nodes.size),this.addNode(i)),void 0!=n&&(this.index.set(tl.tagName,this.nodes.size),this.addNode(n))}getSensitivityAnalysisSamples(){let e=this.index.get(ta.tagName);if(void 0!=e)return this.nodes.get(e)}setSensitivityAnalysisSamples(e){let t=this.index.get(ta.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(ta.tagName,this.nodes.size),this.addNode(e))}removeSensitivityAnalysisSamples(){let e=this.index.get(ta.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(ta.tagName))}getSensitivityAnalysisOrder(){let e=this.index.get(td.tagName);if(void 0!=e)return this.nodes.get(e)}setSensitivityAnalysisOrder(e){let t=this.index.get(td.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(td.tagName,this.nodes.size),this.addNode(e))}removeSensitivityAnalysisOrder(){let e=this.index.get(td.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(td.tagName))}getSensitivityNumVarRedIters(){let e=this.index.get(to.tagName);if(void 0!=e)return this.nodes.get(e)}setSensitivityNumVarRedIters(e){let t=this.index.get(to.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(to.tagName,this.nodes.size),this.addNode(e))}removeSensitivityNumVarRedIters(){let e=this.index.get(to.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(to.tagName))}getSensitivityVarRedMethod(){let e=this.index.get(tl.tagName);if(void 0!=e)return this.nodes.get(e)}setSensitivityVarRedMethod(e){let t=this.index.get(tl.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(tl.tagName,this.nodes.size),this.addNode(e))}removeSensitivityVarRedMethod(){let e=this.index.get(tl.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(tl.tagName))}}class tg extends J{static{this.tagName="me:eigenvalues"}constructor(e,t){super(e,tg.tagName,t)}}class th extends J{static{this.tagName="me:shortestTimeOfInterest"}constructor(e,t){super(e,th.tagName,t)}}class tc extends J{static{this.tagName="me:MaximumEvolutionTime"}constructor(e,t){super(e,tc.tagName,t)}}class tm extends J{static{this.tagName="me:automaticallySetMaxEne"}constructor(e,t){super(e,tm.tagName,t)}}class tu extends J{static{this.tagName="me:diagramEnergyOffset"}constructor(e,t){super(e,tu.tagName,t)}}class tp extends W{static{this.tagName="me:testMicroRates"}static{this.s_Tmin="Tmin"}static{this.s_Tmax="Tmax"}static{this.s_Tstep="Tstep"}constructor(e){super(e,tp.tagName),this.tMin=new(u(p))(e.get(tp.s_Tmin)),this.tMax=new(u(p))(e.get(tp.s_Tmax)),this.tStep=new(u(p))(e.get(tp.s_Tstep))}getTmin(){return this.tMin}setTmin(e){this.tMin=e,this.attributes?.set("Tmin",e.toString())}getTmax(){return this.tMax}setTmax(e){this.tMax=e,this.attributes?.set("Tmax",e.toString())}getTstep(){return this.tStep}setTstep(e){this.tStep=e,this.attributes?.set("Tstep",e.toString())}}class tf extends ee{static{this.tagName="me:control"}constructor(e,t){super(e,tf.tagName),this.id=t,this.index=new Map}getCalculateRateCoefficientsOnly(){let e=this.index.get(ew.tagName);if(void 0!=e)return this.nodes.get(e)}setCalculateRateCoefficientsOnly(e){let t=this.index.get(ew.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(ew.tagName,this.nodes.size),this.addNode(e))}removeCalculateRateCoefficientsOnly(){let e=this.index.get(ew.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(ew.tagName))}getPrintCellDOS(){let e=this.index.get(eR.tagName);if(void 0!=e)return this.nodes.get(e)}setPrintCellDOS(e){let t=this.index.get(eR.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eR.tagName,this.nodes.size),this.addNode(e))}removePrintCellDOS(){let e=this.index.get(eR.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(eR.tagName))}getPrintCellTransitionStateFlux(){let e=this.index.get(eb.tagName);if(void 0!=e)return this.nodes.get(e)}setPrintCellTransitionStateFlux(e){let t=this.index.get(eb.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eb.tagName,this.nodes.size),this.addNode(e))}removePrintCellTransitionStateFlux(){let e=this.index.get(eb.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(eb.tagName))}getPrintReactionOperatorColumnSums(){let e=this.index.get(eC.tagName);if(void 0!=e)return this.nodes.get(e)}setPrintReactionOperatorColumnSums(e){let t=this.index.get(eC.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eC.tagName,this.nodes.size),this.addNode(e))}removePrintReactionOperatorColumnSums(){let e=this.index.get(eC.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(eC.tagName))}getPrintGrainBoltzmann(){let e=this.index.get(eS.tagName);if(void 0!=e)return this.nodes.get(e)}setPrintGrainBoltzmann(e){let t=this.index.get(eS.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eS.tagName,this.nodes.size),this.addNode(e))}removePrintGrainBoltzmann(){let e=this.index.get(eS.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(eS.tagName))}getPrintGrainDOS(){let e=this.index.get(eM.tagName);if(void 0!=e)return this.nodes.get(e)}setPrintGrainDOS(e){let t=this.index.get(eM.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eM.tagName,this.nodes.size),this.addNode(e))}removePrintGrainDOS(){let e=this.index.get(eM.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(eM.tagName))}getPrintGrainkbE(){let e=this.index.get(eT.tagName);if(void 0!=e)return this.nodes.get(e)}setPrintGrainkbE(e){let t=this.index.get(eT.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eT.tagName,this.nodes.size),this.addNode(e))}removePrintGrainkbE(){let e=this.index.get(eT.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(eT.tagName))}getPrintGrainkfE(){let e=this.index.get(eI.tagName);if(void 0!=e)return this.nodes.get(e)}setPrintGrainkfE(e){let t=this.index.get(eI.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eI.tagName,this.nodes.size),this.addNode(e))}removePrintGrainkfE(){let e=this.index.get(eI.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(eI.tagName))}getPrintTSsos(){let e=this.index.get(ez.tagName);if(void 0!=e)return this.nodes.get(e)}setPrintTSsos(e){let t=this.index.get(ez.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(ez.tagName,this.nodes.size),this.addNode(e))}removePrintTSsos(){let e=this.index.get(ez.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(ez.tagName))}getPrintGrainedSpeciesProfile(){let e=this.index.get(e_.tagName);if(void 0!=e)return this.nodes.get(e)}setPrintGrainedSpeciesProfile(e){let t=this.index.get(e_.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(e_.tagName,this.nodes.size),this.addNode(e))}removePrintGrainedSpeciesProfile(){let e=this.index.get(e_.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(e_.tagName))}getPrintGrainTransitionStateFlux(){let e=this.index.get(eD.tagName);if(void 0!=e)return this.nodes.get(e)}setPrintGrainTransitionStateFlux(e){let t=this.index.get(eD.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eD.tagName,this.nodes.size),this.addNode(e))}removePrintGrainTransitionStateFlux(){let e=this.index.get(eD.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(eD.tagName))}getPrintReactionOperatorSize(){let e=this.index.get(eP.tagName);if(void 0!=e)return this.nodes.get(e)}setPrintReactionOperatorSize(e){let t=this.index.get(eP.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eP.tagName,this.nodes.size),this.addNode(e))}removePrintReactionOperatorSize(){let e=this.index.get(eP.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(eP.tagName))}getPrintSpeciesProfile(){let e=this.index.get(eL.tagName);if(void 0!=e)return this.nodes.get(e)}setPrintSpeciesProfile(e){let t=this.index.get(eL.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eL.tagName,this.nodes.size),this.addNode(e))}removePrintSpeciesProfile(){let e=this.index.get(eL.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(eL.tagName))}getPrintPhenomenologicalEvolution(){let e=this.index.get(eB.tagName);if(void 0!=e)return this.nodes.get(e)}setPrintPhenomenologicalEvolution(e){let t=this.index.get(eB.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eB.tagName,this.nodes.size),this.addNode(e))}removePrintPhenomenologicalEvolution(){let e=this.index.get(eB.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(eB.tagName))}getPrintTunnelingCoefficients(){let e=this.index.get(eA.tagName);if(void 0!=e)return this.nodes.get(e)}setPrintTunnelingCoefficients(e){let t=this.index.get(eA.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eA.tagName,this.nodes.size),this.addNode(e))}removePrintTunnelingCoefficients(){let e=this.index.get(eA.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(eA.tagName))}getPrintCrossingCoefficients(){let e=this.index.get(ek.tagName);if(void 0!=e)return this.nodes.get(e)}setPrintCrossingCoefficients(e){let t=this.index.get(ek.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(ek.tagName,this.nodes.size),this.addNode(e))}removePrintCrossingCoefficients(){let e=this.index.get(ek.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(ek.tagName))}getTestDOS(){let e=this.index.get(eO.tagName);if(void 0!=e)return this.nodes.get(e)}setTestDOS(e){let t=this.index.get(eO.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eO.tagName,this.nodes.size),this.addNode(e))}removeTestDOS(){let e=this.index.get(eO.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(eO.tagName))}getTestRateConstants(){let e=this.index.get(eG.tagName);if(void 0!=e)return this.nodes.get(e)}setTestRateConstants(e){let t=this.index.get(eG.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eG.tagName,this.nodes.size),this.addNode(e))}removeTestRateConstants(){let e=this.index.get(eG.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(eG.tagName))}getUseTheSameCellNumberForAllConditions(){let e=this.index.get(eU.tagName);if(void 0!=e)return this.nodes.get(e)}setUseTheSameCellNumberForAllConditions(e){let t=this.index.get(eU.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eU.tagName,this.nodes.size),this.addNode(e))}removeUseTheSameCellNumberForAllConditions(){let e=this.index.get(eU.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(eU.tagName))}getHideInactive(){let e=this.index.get(eV.tagName);if(void 0!=e)return this.nodes.get(e)}setHideInactive(e){let t=this.index.get(eV.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eV.tagName,this.nodes.size),this.addNode(e))}removeHideInactive(){let e=this.index.get(eV.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(eV.tagName))}getForceMacroDetailedBalance(){let e=this.index.get(eq.tagName);if(void 0!=e)return this.nodes.get(e)}setForceMacroDetailedBalance(e){let t=this.index.get(eq.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eq.tagName,this.nodes.size),this.addNode(e))}removeForceMacroDetailedBalance(){let e=this.index.get(eq.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(eq.tagName))}getCalcMethod(){let e=this.index.get(eF.tagName);if(void 0!=e)return this.nodes.get(e)}setCalcMethod(e){let t=this.index.get(eF.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eF.tagName,this.nodes.size),this.addNode(e))}removeCalcMethod(){let e=this.index.get(eF.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(eF.tagName))}getEigenvalues(){let e=this.index.get(tg.tagName);if(void 0!=e)return this.nodes.get(e)}setEigenvalues(e){let t=this.index.get(tg.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(tg.tagName,this.nodes.size),this.addNode(e))}removeEigenvalues(){let e=this.index.get(tg.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(tg.tagName))}getShortestTimeOfInterest(){let e=this.index.get(th.tagName);if(void 0!=e)return this.nodes.get(e)}setShortestTimeOfInterest(e){let t=this.index.get(th.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(th.tagName,this.nodes.size),this.addNode(e))}removeShortestTimeOfInterest(){let e=this.index.get(th.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(th.tagName))}getMaximumEvolutionTime(){let e=this.index.get(tc.tagName);if(void 0!=e)return this.nodes.get(e)}setMaximumEvolutionTime(e){let t=this.index.get(tc.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(tc.tagName,this.nodes.size),this.addNode(e))}removeMaximumEvolutionTime(){let e=this.index.get(tc.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(tc.tagName))}getAutomaticallySetMaxEne(){let e=this.index.get(tm.tagName);if(void 0!=e)return this.nodes.get(e)}setAutomaticallySetMaxEne(e){let t=this.index.get(tm.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(tm.tagName,this.nodes.size),this.addNode(e))}removeAutomaticallySetMaxEne(){let e=this.index.get(tm.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(tm.tagName))}getDiagramEnergyOffset(){let e=this.index.get(tu.tagName);if(void 0!=e)return this.nodes.get(e)}setDiagramEnergyOffset(e){let t=this.index.get(tu.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(tu.tagName,this.nodes.size),this.addNode(e))}removeDiagramEnergyOffset(){let e=this.index.get(tu.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(tu.tagName))}getTestMicroRates(){let e=this.index.get(tp.tagName);if(void 0!=e)return this.nodes.get(e)}setTestMicroRates(e){let t=this.index.get(tp.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(tp.tagName,this.nodes.size),this.addNode(e))}removeTestMicroRates(){let e=this.index.get(tp.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(tp.tagName))}}class tN extends ee{static{this.tagName="metadata"}constructor(e){super(e,tN.tagName)}getLabelText(){let e="";return this.attributes.forEach((t,s)=>{e+=s+": "+t+" "}),e}}class tx extends Z{static{this.tagName="dc:title"}constructor(e,t){super(e,tx.tagName,t)}}class tv extends Z{static{this.tagName="dc:source"}constructor(e,t){super(e,tv.tagName,t)}}class tE extends Z{static{this.tagName="dc:creator"}constructor(e,t){super(e,tE.tagName,t)}}class ty extends Z{static{this.tagName="dc:date"}constructor(e,t){super(e,ty.tagName,t)}}class tw extends Z{static{this.tagName="dc:contributor"}constructor(e,t){super(e,tw.tagName,t)}}class tR extends ee{static{this.tagName="metadataList"}constructor(e,t,s,i,n,a){super(e,tR.tagName),this.index=new Map,this.metadataIndex=new Map,t&&(this.index.set(tx.tagName,this.nodes.size),this.addNode(t)),s&&(this.index.set(tv.tagName,this.nodes.size),this.addNode(s)),i&&(this.index.set(tE.tagName,this.nodes.size),this.addNode(i)),n&&(this.index.set(ty.tagName,this.nodes.size),this.addNode(n)),a&&(this.index.set(tw.tagName,this.nodes.size),this.addNode(a))}getTitle(){if(this.index.has(tx.tagName)){let e=this.index.get(tx.tagName);return this.nodes.get(e)}}setTitle(e){if(this.index.has(tx.tagName)){let t=this.index.get(tx.tagName);this.nodes.set(t,e)}else this.index.set(tx.tagName,this.nodes.size),this.addNode(e)}getSource(){if(this.index.has(tv.tagName)){let e=this.index.get(tv.tagName);return this.nodes.get(e)}}setSource(e){if(this.index.has(tv.tagName)){let t=this.index.get(tv.tagName);this.nodes.set(t,e)}else this.index.set(tv.tagName,this.nodes.size),this.addNode(e)}getCreator(){if(this.index.has(tE.tagName)){let e=this.index.get(tE.tagName);return this.nodes.get(e)}}setCreator(e){if(this.index.has(tE.tagName)){let t=this.index.get(tE.tagName);this.nodes.set(t,e)}else this.index.set(tE.tagName,this.nodes.size),this.addNode(e)}getDate(){if(this.index.has(ty.tagName)){let e=this.index.get(ty.tagName);return this.nodes.get(e)}}setDate(e){if(this.index.has(ty.tagName)){let t=this.index.get(ty.tagName);this.nodes.set(t,e)}else this.index.set(ty.tagName,this.nodes.size),this.addNode(e)}getContributor(){if(this.index.has(tw.tagName)){let e=this.index.get(tw.tagName);return this.nodes.get(e)}}setContributor(e){if(this.index.has(tw.tagName)){let t=this.index.get(tw.tagName);this.nodes.set(t,e)}else this.index.set(tw.tagName,this.nodes.size),this.addNode(e)}addMetadata(e){this.metadataIndex.set(this.metadataIndex.size,this.nodes.size),this.addNode(e)}getMetadata(){let e=[];for(let t=0;t<this.metadataIndex.size;t++){let s=this.metadataIndex.get(t);e.push(this.nodes.get(s))}return e}}class tb extends J{static{this.tagName="me:grainSize"}constructor(e,t){super(e,tb.tagName,t)}}class tC extends J{static{this.tagName="me:automaticallySetMaxEne"}constructor(e,t){super(e,tC.tagName,t)}}class tS extends J{static{this.tagName="me:energyAboveTheTopHill"}constructor(e,t){super(e,tS.tagName,t)}}class tM extends J{static{this.tagName="me:maxTemperature"}constructor(e,t){super(e,tM.tagName,t)}}class tT extends ee{static{this.tagName="me:modelParameters"}constructor(e,t,s,i,n,a){super(e,tT.tagName),this.id=t,this.index=new Map,void 0!=s&&(this.index.set(tb.tagName,this.nodes.size),this.addNode(s)),void 0!=i&&(this.index.set(tC.tagName,this.nodes.size),this.addNode(i)),void 0!=n&&(this.index.set(tS.tagName,this.nodes.size),this.addNode(n)),void 0!=a&&(this.index.set(tM.tagName,this.nodes.size),this.addNode(a))}getGrainSize(){console.log("getGrainSize");let e=this.index.get(tb.tagName);if(void 0!=e)return this.nodes.get(e);console.log("XgetGrainSize")}setGrainSize(e){console.log("setGrainSize");let t=this.index.get(tb.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(tb.tagName,this.nodes.size),this.addNode(e))}removeGrainSize(){let e=this.index.get(tb.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(tb.tagName))}getAutomaticallySetMaxEne(){let e=this.index.get(tC.tagName);if(e)return this.nodes.get(e)}setAutomaticallySetMaxEne(e){let t=this.index.get(tC.tagName);t?this.nodes.set(t,e):(this.index.set(tC.tagName,this.nodes.size),this.addNode(e))}removeAutomaticallySetMaxEne(){let e=this.index.get(tC.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(tC.tagName))}getEnergyAboveTheTopHill(){let e=this.index.get(tS.tagName);if(e)return this.nodes.get(e)}setEnergyAboveTheTopHill(e){let t=this.index.get(tS.tagName);t?this.nodes.set(t,e):(this.index.set(tS.tagName,this.nodes.size),this.addNode(e))}removeEnergyAboveTheTopHill(){let e=this.index.get(tS.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(tS.tagName))}getMaxTemperature(){let e=this.index.get(tM.tagName);if(e)return this.nodes.get(e)}setMaxTemperature(e){let t=this.index.get(tM.tagName);t?this.nodes.set(t,e):(this.index.set(tM.tagName,this.nodes.size),this.addNode(e))}removeMaxTemperature(){let e=this.index.get(tM.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(tM.tagName))}}class tI extends Z{static{this.tagName="me:title"}constructor(e,t){super(e,tI.tagName,t)}}class tz extends ee{static{this.tagName="moleculeList"}constructor(e,t){super(e,tz.tagName),this.index=new Map,void 0!=t&&t.forEach(e=>{this.nodes.set(this.nodes.size,e),this.index.set(e.getID(),this.nodes.size-1)})}getMolecule(e){let t=this.index.get(e);if(void 0!=t)return this.nodes.get(t)}removeMolecule(e){let t=this.index.get(e);void 0!=t&&(this.nodes.delete(t),this.index.delete(e))}addMolecule(e){let t=e.getID(),s=this.index.get(t);void 0!==s?(this.nodes.set(s,e),console.log("Replaced molecule with id "+t)):(this.nodes.set(this.nodes.size,e),this.index.set(t,this.nodes.size-1))}}class t_ extends ee{static{this.tagName="reactionList"}constructor(e,t){super(e,t_.tagName),this.index=new Map,void 0!=t&&t.forEach(e=>{this.nodes.set(this.nodes.size,e),this.index.set(e.id,this.nodes.size-1)})}getReaction(e){let t=this.index.get(e);if(void 0!=t)return this.nodes.get(t)}removeReaction(e){let t=this.index.get(e);void 0!=t&&(this.nodes.delete(t),this.index.delete(e))}addReaction(e){let t=this.index.get(e.id);void 0!==t?(this.nodes.set(t,e),console.log("Replaced reaction with id "+e.id)):(this.nodes.set(this.nodes.size,e),this.index.set(e.id,this.nodes.size-1))}getNextReactionID(){let e=1;return Array.from(this.index.keys()).sort((e,t)=>{let s=e.match(/\d+/),i=t.match(/\d+/);return(s?parseInt(s[0]):0)-(i?parseInt(i[0]):0)}).forEach(t=>{if(parseInt(t.match(/\d+/)[0])>e)return e;e++}),e}}class tD extends ee{static{this.tagName="conditionsList"}constructor(e,t){super(e,tL.tagName),this.index=new Map,void 0!=t&&t.forEach(e=>{this.nodes.set(this.nodes.size,e),this.index.set(e.id,this.nodes.size-1)})}getConditions(e){let t=this.index.get(e);if(void 0!=t)return this.nodes.get(t)}removeConditions(e){let t=this.index.get(e);void 0!=t&&(this.nodes.delete(t),this.index.delete(e))}addConditions(e){let t=this.index.get(e.id);void 0!=t?(this.nodes.set(t,e),console.log("Replaced conditions with id "+e.id)):(this.nodes.set(this.nodes.size,e),this.index.set(e.id,this.nodes.size-1))}}class tP extends ee{static{this.tagName="modelParametersList"}constructor(e,t){super(e,tP.tagName),this.index=new Map,void 0!=t&&t.forEach(e=>{this.nodes.set(this.nodes.size,e),this.index.set(e.id,this.nodes.size-1)})}getModelParameters(e){let t=this.index.get(e);if(void 0!=t)return this.nodes.get(t)}removeModelParameters(e){let t=this.index.get(e);void 0!=t&&(this.nodes.delete(t),this.index.delete(e))}addModelParameters(e){let t=this.index.get(e.id);void 0!=t?(this.nodes.set(t,e),console.log("Replaced modelParameters with id "+e.id)):(this.nodes.set(this.nodes.size,e),this.index.set(e.id,this.nodes.size-1))}}class tL extends ee{static{this.tagName="controlList"}constructor(e,t){super(e,tL.tagName),this.index=new Map,void 0!=t&&t.forEach(e=>{this.nodes.set(this.nodes.size,e),this.index.set(e.id,this.nodes.size-1)})}getControl(e){let t=this.index.get(e);if(void 0!=t)return this.nodes.get(t)}removeControl(e){let t=this.index.get(e);void 0!=t&&(this.nodes.delete(t),this.index.delete(e))}addControl(e){let t=this.index.get(e.id);void 0!==t?(this.nodes.set(t,e),console.log("Replaced control with id "+e.id)):(this.nodes.set(this.nodes.size,e),this.index.set(e.id,this.nodes.size-1))}}class tB extends ee{static{this.tagName="me:mesmer"}static{this.precisionOptions=["d","dd","qd","double","double-double","quad-double"]}static{this.pressureUnits=["Torr","PPCC","atm","mbar","psi","mols/cc"]}static{this.energyUnits=["kJ/mol","kJ per mol","cm-1","wavenumber","kcal/mol","kcal per mol","Hartree","au"]}static{this.frequencyUnits=["cm-1","GHz","amuA^2"]}static{this.massUnits=["amu","g/mol","kg/mol"]}static{this.temperatureUnits=["K"]}static{this.timeUnits=["fs","ps","ns","s"]}static{this.lengthUnits=["Å","nm","um","mm","cm","m"]}static{this.hessianUnits=["kJ/mol/Å2","kcal/mol/Å2","Hartree/Å2"]}static{this.EinsteinAUnits=["s-1"]}static{this.EinsteinBUnits=["m3/J/s2"]}static{this.elementTypes=["H","He","Li","Be","B","C","N","O","F","Ne","Na","Mg","Al","Si","P","S","Cl","Ar","K","Ca","Sc","Ti","V","Cr","Mn","Fe","Co","Ni","Cu","Zn","Ga","Ge","As","Se","Br","Kr","Rb","Sr","Y","Zr","Nb","Mo","Tc","Ru","Rh","Pd","Ag","Cd","In","Sn","Sb","Te","I","Xe","Cs","Ba","La","Ce","Pr","Nd","Pm","Sm","Eu","Gd","Tb","Dy","Ho","Er","Tm","Yb","Lu","Hf","Ta","W","Re","Os","Ir","Pt","Au","Hg","Tl","Pb","Bi","Po","At","Rn","Fr","Ra","Ac","Th","Pa","U","Np","Pu","Am","Cm","Bk","Cf","Es","Fm","Md","No","Lr","Rf","Db","Sg","Bh","Hs","Mt","Ds","Rg","Cn","Nh","Fl","Mc","Lv","Ts","Og"]}static{this.atomMasses=new Map}static{this.atomRadii=new Map}static{this.atomColors=new Map}static{this.bondColors=new Map}static{this.header=`<?xml version="1.0" encoding="utf-8" ?>
<?xml-stylesheet type='text/xsl' href='../../mesmer2.xsl' media='other'?>
<?xml-stylesheet type='text/xsl' href='../../mesmer1.xsl' media='screen'?>`}constructor(e,t,s,i,n,a,d,o,l){super(e,tB.tagName);let r=["H","O","C","N","Cl","S","Ph","Fe"],g=["White","Red","DarkGrey","Blue","Green","Yellow","Orange","Brown"];for(let e=0;e<r.length;e++)tB.atomColors.set(r[e],g[e]);let h=[1.00784,15.999,12.011,14.007,35.453,32.06,77.845,55.845];for(let e=0;e<r.length;e++)tB.atomMasses.set(r[e],h[e]);let c=[37,66,67,56,99,102,110,124];for(let e=0;e<r.length;e++)tB.atomRadii.set(r[e],c[e]);let m=[1,1.5,2,2.5,3,3.5,4,4.5,5,5.5,6];g=["Black","Red","DarkRed","Blue","DarkBlue","Green","DarkGreen","Yellow","DarkYellow","Orange","DarkOrange"];for(let e=0;e<m.length;e++)tB.bondColors.set(m[e],g[e]);this.index=new Map,void 0!=t&&(this.index.set(tI.tagName,this.nodes.size),this.addNode(t)),void 0!=s&&(this.index.set(tz.tagName,this.nodes.size),this.addNode(s)),void 0!=i&&(this.index.set(t_.tagName,this.nodes.size),this.addNode(i)),this.conditionsIndex=new Map,void 0!=n&&n.forEach(e=>{this.index.set(ey.tagName+e.id,this.nodes.size),this.conditionsIndex.set(e.id,this.nodes.size),this.addNode(e)}),this.modelParametersIndex=new Map,void 0!=a&&a.forEach(e=>{this.index.set(tT.tagName+e.id,this.nodes.size),this.modelParametersIndex.set(e.id,this.nodes.size),this.addNode(e)}),this.controlIndex=new Map,void 0!=d&&d.forEach(e=>{this.index.set(tf.tagName+e.id,this.nodes.size),this.controlIndex.set(e.id,this.nodes.size),this.addNode(e)}),void 0!=o&&(this.index.set(tR.tagName,this.nodes.size),this.addNode(o)),void 0!=l&&(this.index.set(em.tagName,this.nodes.size),this.addNode(l))}getTitle(){let e=this.index.get(tI.tagName);if(void 0!=e)return this.nodes.get(e)}setTitle(e){let t=this.index.get(tI.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(tI.tagName,this.nodes.size),this.addNode(e))}getMoleculeList(){let e=this.index.get(tz.tagName);if(void 0!=e)return this.nodes.get(e);{let e=new tz(new Map);return this.index.set(tz.tagName,this.nodes.size),this.addNode(e),e}}setMoleculeList(e){let t=this.index.get(tz.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(tz.tagName,this.nodes.size),this.addNode(e))}getReactionList(){let e=this.index.get(t_.tagName);if(void 0!=e)return this.nodes.get(e);{let e=new t_(new Map);return this.index.set(t_.tagName,this.nodes.size),this.addNode(e),e}}setReactionList(e){let t=this.index.get(t_.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(t_.tagName,this.nodes.size),this.addNode(e))}addConditions(e){let t=ey.tagName+e.id,s=this.index.get(t);void 0!=s?this.nodes.set(s,e):(this.index.set(t,this.nodes.size),this.conditionsIndex.set(e.id,this.nodes.size),this.addNode(e))}getConditions(e){let t=this.conditionsIndex.get(e);if(void 0!=t)return this.nodes.get(t)}getConditionss(){let e=[];return this.conditionsIndex.forEach((t,s)=>{e.push(this.nodes.get(t))}),e}setConditionss(e){e.forEach(e=>{this.addConditions(e)})}getNextConditionsID(){let e=0;return Array.from(this.conditionsIndex.keys()).sort((e,t)=>e-t).forEach(t=>{if(t>e)return e;e++}),e}removeConditions(e){let t=this.conditionsIndex.get(e);void 0!=t&&(this.nodes.delete(t),this.index.delete(ey.tagName+e),this.conditionsIndex.delete(e))}addModelParameters(e){let t=tT.tagName+e.id,s=this.index.get(t);void 0!=s?this.nodes.set(s,e):(this.index.set(t,this.nodes.size),this.modelParametersIndex.set(e.id,this.nodes.size),this.addNode(e))}getModelParameters(e){let t=this.modelParametersIndex.get(e);if(void 0!=t)return this.nodes.get(t)}getModelParameterss(){let e=[];return this.modelParametersIndex.forEach((t,s)=>{e.push(this.nodes.get(t))}),e}setModelParameterss(e){e.forEach(e=>{this.addModelParameters(e)})}getNextModelParametersID(){let e=0;return Array.from(this.modelParametersIndex.keys()).sort((e,t)=>e-t).forEach(t=>{if(t>e)return e;e++}),e}removeModelParameters(e){let t=this.modelParametersIndex.get(e);void 0!=t&&(this.nodes.delete(t),this.index.delete(tT.tagName+e),this.modelParametersIndex.delete(e))}addControl(e){let t=tf.tagName+e.id,s=this.index.get(t);void 0!=s?this.nodes.set(s,e):(this.index.set(t,this.nodes.size),this.controlIndex.set(e.id,this.nodes.size),this.addNode(e))}getControl(e){let t=this.controlIndex.get(e);if(void 0!=t)return this.nodes.get(t)}getControls(){let e=[];return this.controlIndex.forEach((t,s)=>{e.push(this.nodes.get(t))}),e}setControls(e){e.forEach(e=>{this.addControl(e)})}getNextControlID(){let e=0;return Array.from(this.controlIndex.keys()).sort((e,t)=>e-t).forEach(t=>{if(t>e)return e;e++}),e}removeControl(e){let t=this.controlIndex.get(e);void 0!=t&&(this.nodes.delete(t),this.index.delete(tf.tagName+e),this.controlIndex.delete(e))}getMetadataList(){let e=this.index.get(tR.tagName);if(void 0!=e)return this.nodes.get(e)}setMetadataList(e){let t=this.index.get(tR.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(tR.tagName,this.nodes.size),this.addNode(e))}getAnalysis(){let e=this.index.get(em.tagName);if(void 0!=e)return this.nodes.get(e)}setAnalysis(e){let t=this.index.get(em.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(em.tagName,this.nodes.size),this.addNode(e))}}class tA extends Z{static{this.tagName="me:description"}constructor(e,t){super(e,tA.tagName,t)}}class tk extends J{static{this.tagName="me:T"}constructor(e,t){super(e,tk.tagName,t)}}class tO extends J{static{this.s_units="units"}static{this.s_lower="lower"}static{this.s_upper="upper"}static{this.s_stepsize="stepsize"}constructor(e,t,s){super(e,t,s)}setValue(e){this.value=e}getUnits(){return this.attributes.get(tO.s_units)}setUnits(e){this.attributes.set(tO.s_units,e)}removeUnits(){this.attributes.delete(tO.s_units)}getLower(){let e=this.attributes.get(tO.s_lower);if(void 0!=e)return new p.Big(e)}setLower(e){this.attributes.set(tO.s_lower,e.toString())}removeLower(){this.attributes.delete(tO.s_lower)}getUpper(){let e=this.attributes.get(tO.s_upper);if(void 0!=e)return new p.Big(e)}setUpper(e){this.attributes.set(tO.s_upper,e.toString())}removeUpper(){this.attributes.delete(tO.s_upper)}getStepsize(){let e=this.attributes.get(tO.s_stepsize);if(void 0!=e)return new p.Big(e)}setStepsize(e){this.attributes.set(tO.s_stepsize,e.toString())}removeStepsize(){this.attributes.delete(tO.s_stepsize)}}class tG extends W{static{this.tagName="atom"}static{this.s_id="id"}static{this.s_elementType="elementType"}static{this.s_x3="x3"}static{this.s_y3="y3"}static{this.s_z3="z3"}constructor(e,t){super(e,tG.tagName),this.molecule=t}hasCoordinates(){return void 0!=this.attributes.get(tG.s_x3)&&void 0!=this.attributes.get(tG.s_y3)&&void 0!=this.attributes.get(tG.s_z3)}getID(){return this.attributes.get(tG.s_id)}setID(e){this.attributes.set(tG.s_id,e)}getElementType(){return this.attributes.get(tG.s_elementType)}setElementType(e){this.attributes.set(tG.s_elementType,e)}getX3(){let e=this.attributes.get(tG.s_x3);if(void 0!=e)return new p.Big(e)}setX3(e){this.attributes.set(tG.s_x3,e.toString())}removeX3(){this.attributes.delete(tG.s_x3)}getY3(){let e=this.attributes.get(tG.s_y3);if(void 0!=e)return new p.Big(e)}setY3(e){this.attributes.set(tG.s_y3,e.toString())}removeY3(){this.attributes.delete(tG.s_y3)}getZ3(){let e=this.attributes.get(tG.s_z3);if(void 0!=e)return new p.Big(e)}setZ3(e){this.attributes.set("z3",e.toString())}removeZ3(){this.attributes.delete("z3")}}class tU extends ee{static{this.tagName="atomArray"}constructor(e,t){super(e,tU.tagName),this.index=new Map,this.reverseIndex=new Map,void 0==t?this.atoms=new Map:(this.atoms=t,t.forEach((e,t)=>{this.index.set(t,this.nodes.size),this.reverseIndex.set(this.nodes.size,t),this.nodes.set(this.nodes.size,e)}))}getAtom(e){return this.atoms.get(e)}addAtom(e,t){if(void 0==t){let s=e.getID();if(void 0==s)s=this.getNextAtomID(),e.setID(s);else if(this.atoms.has(s)){let t=this.getNextAtomID();console.warn("Atom with id "+s+" already exists, adding with id "+t),e.setID(t),s=t}t=s}else if(this.atoms.has(t)){console.warn("Atom with id "+t+" will be replaced");let s=this.index.get(t);return this.nodes.set(s,e),this.atoms.set(t,e),t}return this.index.set(t,this.nodes.size),this.reverseIndex.set(this.nodes.size,t),this.nodes.set(this.nodes.size,e),this.atoms.set(t,e),t}getNextAtomID(){let e=1,t="a1";if(this.atoms.has(t))for(;this.atoms.has(t);)e++,t="a"+e.toString();return t}removeAtom(e){let t=this.index.get(e);if(void 0==t)throw Error("Atom with id "+e+" does not exist!");console.log("Removing atom with id "+e),this.atoms.delete(e),this.deleteNodeAndReindex(t,e)}deleteNodeAndReindex(e,t){this.nodes.delete(e),this.index.delete(t),this.reverseIndex.delete(e);let s=new Map,i=new Map,n=new Map;this.index.forEach((t,a)=>{t>e?(s.set(t-1,this.nodes.get(t)),i.set(a,t-1),n.set(t-1,a)):(s.set(t,this.nodes.get(t)),i.set(a,t),n.set(t,a))}),this.nodes=s,this.index=i,this.reverseIndex=n}}class tq extends W{static{this.tagName="bond"}static{this.s_atomRefs2="atomRefs2"}static{this.s_id="id"}static{this.s_order="order"}static{this.orderOptions=["1","1.5","2","2.5","3","3.5","4","4.5","5","5.5","6"]}constructor(e,t){super(e,tq.tagName),this.molecule=t}getAtomRefs2(){let e=this.attributes.get(tq.s_atomRefs2);return(e?.split(" "),void 0==e)?"a1 a1":e}setAtomRefs2(e){this.attributes.set(tq.s_atomRefs2,e)}getID(){return this.attributes.get(tq.s_id)}setID(e){this.attributes.set(tq.s_id,e)}getOrder(){let e=this.attributes.get(tq.s_order);if(void 0!=e)return parseFloat(e)}setOrder(e){this.attributes.set(tq.s_order,e.toString())}}class tV extends ee{static{this.tagName="bondArray"}constructor(e,t){super(e,tV.tagName),this.index=new Map,this.reverseIndex=new Map,void 0==t?this.bonds=new Map:(this.bonds=t,t.forEach((e,t)=>{this.index.set(t,this.nodes.size),this.reverseIndex.set(this.nodes.size,t),this.nodes.set(this.nodes.size,e)}))}getBondIds(){return Array.from(this.bonds.keys())}getBond(e){return this.bonds.get(e)}addBond(e,t){if(void 0==t){let s=e.getID();if(void 0==s)s=this.getNextBondID(),e.setID(s);else if(this.bonds.has(s)){let t=this.getNextBondID();console.log("Bond with id "+s+" already exists, adding with id "+t),e.setID(t),s=t}t=s}else if(this.bonds.has(t)){console.log("Bond with id "+t+" will be replaced");let s=this.index.get(t);return this.nodes.set(s,e),this.bonds.set(t,e),t}return this.index.set(t,this.nodes.size),this.reverseIndex.set(this.nodes.size,t),this.nodes.set(this.nodes.size,e),this.bonds.set(t,e),t}getNextBondID(){let e=1,t="b1";for(;this.bonds.has(t);)e++,t="b"+e.toString();return t}removeBond(e){let t=this.index.get(e);if(void 0==t)throw Error("Bond with id "+e+" does not exist!");console.log("Removing bond with id "+e),this.bonds.delete(e),this.deleteNodeAndReindex(t,e)}deleteNodeAndReindex(e,t){this.nodes.delete(e),this.index.delete(t),this.reverseIndex.delete(e);let s=new Map,i=new Map,n=new Map;this.index.forEach((t,a)=>{t>e?(s.set(t-1,this.nodes.get(t)),i.set(a,t-1),n.set(t-1,a)):(s.set(t,this.nodes.get(t)),i.set(a,t),n.set(t,a))}),this.nodes=s,this.index=i,this.reverseIndex=n}}class tF extends Z{static{this.tagName="scalar"}constructor(e,t){super(e,tF.tagName,t)}getValue(){return this.value}setValue(e){this.value=e}}class tH extends J{static{this.tagName="scalar"}static{this.s_units="units"}static{this.propertyDictRefs=new Set(["me:ZPE","me:Hf0","me:HfAT0","me:Hf298","me:symmetryNumber","me:TSOpticalSymmetryNumber","me:frequenciesScaleFactor","me:MW","me:spinMultiplicity","me:epsilon","me:sigma"])}constructor(e,t){super(e,tH.tagName,t)}updateUnits(e){if(e){let t=this.attributes.get(tH.s_units);void 0!=t&&t!=e&&this.attributes.set(tH.s_units,e)}}getValue(){return this.value}setValue(e){this.value=e}}class tj extends Q{static{this.tagName="array"}static{this.s_units="units"}static{this.propertyDictRefs=new Set(["me:rotConsts","me:vibFreqs","me:EinsteinAij","me:EinsteinBij"])}constructor(e,t,s){super(e,tj.tagName,t,s)}updateUnits(e){if(e){let t=this.attributes.get(tj.s_units);void 0!=t&&t!=e&&(this.attributes.set(tj.s_units,e),console.log("Units changed from "+t+" to "+e))}}setSize(e){let t=[];for(let s=0;s<e;s++)t.push(new p.Big(0));this.setValues(t)}}class tX extends Q{static{this.tagName="matrix"}static{this.s_rows="rows"}static{this.s_matrixType="matrixType"}static{this.s_units="units"}static{this.propertyDictRefs=new Set(["me:hessian"])}constructor(e,t,s){super(e,tj.tagName,t,s)}updateUnits(e){if(e){let t=this.attributes.get(tj.s_units);void 0!=t&&t!=e&&(this.attributes.set(tj.s_units,e),console.log("Units changed from "+t+" to "+e))}}setSize(e,t){let s=[];for(let i=0;i<e;i++)for(let e=0;e<t;e++)s.push(new p.Big(0));this.setValues(s)}}class tY extends ee{static{this.tagName="property"}static{this.s_dictRef="dictRef"}constructor(e,t){super(e,tY.tagName);let s=e.get(tY.s_dictRef);if(void 0==s){let t=e.get("title");if(void 0==t)throw Error(tY.s_dictRef+" and title are undefined!");if("MW"==t)s="me:MW";else if("Hf298"==t)s="me:Hf298";else if("Hf0"==t)s="me:Hf0";else if("program"==t)s="program";else if("basis"==t)s="basis";else if("method"==t)s="method";else if("File Format"==t)s="File Format";else throw Error("Title "+t+"not recognised!")}this.dictRef=s,t&&this.nodes.set(0,t)}getProperty(){return this.nodes.get(0)}setProperty(e){this.nodes.set(0,e)}}class t$ extends tY{static{this.dictRef="me:ZPE"}constructor(e,t){super(e,t)}setUnits(e){this.getProperty().updateUnits(e)}}class tK extends tY{static{this.dictRef="me:Hf0"}constructor(e,t){super(e,t)}setUnits(e){this.getProperty().updateUnits(e)}}class tW extends tY{static{this.dictRef="me:HfAT0"}constructor(e,t){super(e,t)}setUnits(e){this.getProperty().updateUnits(e)}}class tZ extends tY{static{this.dictRef="me:Hf298"}constructor(e,t){super(e,t)}setUnits(e){this.getProperty().updateUnits(e)}}class tJ extends tY{static{this.dictRef="me:rotConsts"}static{this.unitOptions=["cm-1","GHz","amuA^2"]}constructor(e,t){super(e,t)}}class tQ extends tY{static{this.dictRef="me:symmetryNumber"}constructor(e,t){super(e,t)}}class t0 extends tY{static{this.dictRef="me:TSOpticalSymmetryNumber"}constructor(e,t){super(e,t)}}class t1 extends tY{static{this.dictRef="me:frequenciesScaleFactor"}constructor(e,t){super(e,t)}}class t2 extends tY{static{this.dictRef="me:vibFreqs"}constructor(e,t){super(e,t)}}class t3 extends tY{static{this.dictRef="me:MW"}constructor(e,t){super(e,t)}}class t5 extends tY{static{this.dictRef="me:spinMultiplicity"}constructor(e,t){super(e,t)}}class t4 extends tY{static{this.dictRef="me:epsilon"}constructor(e,t){super(e,t)}}class t6 extends tY{static{this.dictRef="me:sigma"}constructor(e,t){super(e,t)}}class t8 extends tY{static{this.dictRef="me:hessian"}static{this.unitOptions=["kJ/mol/Å2","kcal/mol/Å2","Hartree/Å2"]}constructor(e,t){super(e,t)}}class t9 extends tY{static{this.dictRef="me:EinsteinAij"}constructor(e,t){super(e,t)}}class t7 extends tY{static{this.dictRef="me:EinsteinBij"}constructor(e,t){super(e,t)}}class se extends tY{static{this.dictRef="me:electronicExcitation"}constructor(e,t){super(e,t)}}class st extends tY{static{this.dictRef="me:imFreqs"}constructor(e,t){super(e,t)}}class ss extends ee{static{this.tagName="propertyList"}constructor(e,t){super(e,ss.tagName),this.index=new Map,void 0!=t&&t.forEach(e=>{this.nodes.set(this.nodes.size,e),this.index.set(e.dictRef,this.nodes.size-1)})}getProperties(){let e=new Map;return this.nodes.forEach(t=>{e.set(t.dictRef,t)}),e}getProperty(e){let t=this.index.get(e);return void 0!=t?this.nodes.get(t):void 0}setProperty(e){let t=this.index.get(e.dictRef);void 0==t?(console.log("Property "+e.dictRef+" does not exist, adding..."),this.nodes.set(this.nodes.size,e),this.index.set(e.dictRef,this.nodes.size-1)):(console.log("Property "+e.dictRef+" already exists, updating..."),this.nodes.set(t,e))}removeProperty(e){let t=this.index.get(e);if(void 0!=t){this.nodes.delete(t),this.index.delete(e);let s=new Map;this.index.forEach((e,i)=>{e>t?s.set(i,e-1):s.set(i,e)}),this.index=s}}}class si extends tO{static{this.tagName="me:deltaEDown"}static{this.s_bathGas="bathGas"}constructor(e,t){super(e,si.tagName,t)}getBathGas(){return this.attributes.get(si.s_bathGas)}setBathGas(e){this.attributes.set(si.s_bathGas,e)}}class sn extends si{static{this.tagName="me:deltaEDown2"}constructor(e,t){super(e,t)}}class sa extends tO{static{this.tagName="me:deltaEDownTExponent"}static{this.s_referenceTemperature="referenceTemperature"}constructor(e,t){super(e,sa.tagName,t)}getReferenceTemperature(){return parseFloat(f(this.attributes,sa.s_referenceTemperature))}setReferenceTemperature(e){this.attributes.set(sa.s_referenceTemperature,e.toString())}}class sd extends tO{static{this.tagName="me:deltaEDownLinEne"}constructor(e,t){super(e,sd.tagName,t)}}class so extends ee{static{this.tagName="me:energyTransferModel"}constructor(e,t){super(e,so.tagName),void 0!=t&&t.forEach(e=>{this.nodes.set(this.nodes.size,e)})}getDeltaEDowns(){let e=[];return this.nodes.forEach(t=>{t instanceof si&&e.push(t)}),e}setDeltaEDowns(e){this.nodes.clear(),e.forEach(e=>{this.nodes.set(this.nodes.size,e)})}getDeltaEDown(e){if(e<0||e>=this.nodes.size)throw Error("index out of range");return this.nodes.get(e)}setDeltaEDown(e,t){this.nodes.set(e,t)}addDeltaEDown(e){return this.nodes.set(this.nodes.size,e),this.nodes.size-1}removeDeltaEDown(e){this.nodes.delete(e)}}class sl extends W{static{this.tagName="me:DOSCMethod"}static{this.xsi_typeOptions=["ClassicalRotors","QMRotors","DefinedStatesRotors","me:ClassicalRotors","me:QMRotors","me:DefinedStatesRotors"]}static{this.s_xsi_type="xsi:type"}constructor(e){if(super(e,sl.tagName),void 0==e.get(sl.s_xsi_type)){let t=e.get("name");if(void 0==t)throw Error("Neither xsi:type or name are defined.");e.set(sl.s_xsi_type,t)}}getXsiType(){return this.attributes.get(sl.s_xsi_type)}setXsiType(e){this.attributes.set(sl.s_xsi_type,e)}}class sr extends Z{static{this.tagName="me:bondRef"}constructor(e,t){super(e,sr.tagName,t)}}class sg extends W{static{this.tagName="me:PotentialPoint"}static{this.s_angle="angle"}static{this.s_potential="potential"}constructor(e){super(e,sg.tagName)}getAngle(){return this.attributes.get(sg.s_angle)}setAngle(e){this.attributes.set(sg.s_angle,e.toString())}getPotential(){return this.attributes.get(sg.s_potential)}setPotential(e){this.attributes.set(sg.s_potential,e.toString())}}class sh extends W{static{this.tagName="me:DistributionCalcMethod"}static{this.s_default="default"}static{this.s_name="name"}constructor(e){super(e,sh.tagName)}getDefault(){return this.attributes.get(sh.s_default)}getName(){return this.attributes.get(sh.s_name)}}class sc extends W{static{this.tagName="me:thermoValue"}static{this.s_T="T"}static{this.s_H="H"}static{this.s_S="S"}static{this.s_G="G"}static{this.s_Cp="Cp"}constructor(e){super(e,tG.tagName)}getT(){return new p.Big(this.attributes.get(sc.s_T))}getH(){return new p.Big(this.attributes.get(sc.s_H))}getS(){return new p.Big(this.attributes.get(sc.s_S))}getG(){return new p.Big(this.attributes.get(sc.s_G))}getCp(){return new p.Big(this.attributes.get(sc.s_Cp))}toStringArray(){return[this.getT().toString(),this.getH().toString(),this.getS().toString(),this.getG().toString(),this.getCp().toString()]}toCSV(){return this.toStringArray().join(",")}}class sm extends ee{static{this.tagName="me:thermoTable"}static{this.s_unitsT="unitsT"}static{this.s_unitsH="unitsH"}static{this.s_unitsS="unitsS"}static{this.s_unitsG="unitsG"}static{this.s_unitsCp="unitsCp"}constructor(e,t){super(e,sm.tagName),void 0!=t?(t.forEach(e=>{this.addNode(e)}),this.tvs=t):this.tvs=[]}get(e){return this.tvs[e]}set(e,t){this.nodes.set(e,t),this.tvs[e]=t}add(e){return this.addNode(e),this.tvs.push(e),this.nodes.size-1}remove(e){this.nodes.delete(e),this.tvs.splice(e,1)}init(e){this.clear(),e.forEach(e=>{this.addNode(e),this.tvs.push(e)})}clear(){this.nodes.clear(),this.tvs=[]}getHeader(){return["T ("+this.attributes.get(sm.s_unitsT)+")","H(T)-H(0) ("+this.attributes.get(sm.s_unitsH)+")","S(T) ("+this.attributes.get(sm.s_unitsS)+")","G(T) ("+this.attributes.get(sm.s_unitsG)+")","Cp(T) ("+this.attributes.get(sm.s_unitsCp)+")"]}toCSV(){let e=this.getHeader().join(",")+"\n";return this.tvs.forEach(t=>{e+=t.toCSV()+"\n"}),e}}class su extends ee{static{this.tagName="me:HinderedRotorPotential"}static{this.formats=new Set(["numerical","analytical"])}static{this.s_format="format"}static{this.s_units="units"}static{this.s_expansionSize="expansionSize"}static{this.s_useSineTerms="useSineTerms"}constructor(e,t){super(e,su.tagName);let s=e.get(su.s_format);if(void 0==s)throw Error(su.s_format+" is undefined!");this.format=s;let i=e.get(su.s_units);if(void 0==i)throw Error(su.s_units+" is undefined!");this.units=i,void 0!=t&&t.forEach(e=>{this.nodes.set(this.nodes.size,e)}),void 0==e.get(su.s_useSineTerms)?this.useSineTerms=!1:this.useSineTerms=!0}getFormat(){return this.format}setFormat(e){this.format=e,this.attributes.set(su.s_format,e)}getUnits(){return this.units}setUnits(e){this.units=e,this.attributes.set(su.s_units,e)}getExpansionSize(){return this.attributes.get(su.s_expansionSize)}setExpansionSize(e){console.log(e.toString()),this.attributes.set(su.s_expansionSize,e.toString())}getUseSineTerms(){return this.useSineTerms}setUseSineTerms(e){this.useSineTerms=e,this.attributes.set(su.s_useSineTerms,e?"yes":"no")}getPotentialPoint(e){return this.nodes.get(e)}setPotentialPoint(e,t){this.nodes.set(e,t)}setPotentialPoints(e){this.nodes.clear(),e.forEach(e=>{this.nodes.set(this.nodes.size,e)})}addPotentialPoint(e){return this.nodes.set(this.nodes.size,e),this.nodes.size-1}removePotentialPoint(e){this.nodes.delete(e)}}class sp extends J{static{this.tagName="me:periodicity"}constructor(e,t){super(e,sp.tagName,t)}}class sf extends ee{static{this.tagName="me:ExtraDOSCMethod"}constructor(e,t,s,i){super(e,sf.tagName),this.index=new Map,t&&(this.nodes.set(this.nodes.size,t),this.index.set(sr.tagName,this.nodes.size-1)),s&&(this.nodes.set(this.nodes.size,s),this.index.set(su.tagName,this.nodes.size-1)),i&&(this.nodes.set(this.nodes.size,i),this.index.set(sp.tagName,this.nodes.size-1))}getBondRef(){let e=this.index.get(sr.tagName);if(void 0!=e)return this.nodes.get(e)}setBondRef(e){let t=this.index.get(sr.tagName);void 0!=t?this.nodes.set(t,e):(this.nodes.set(this.nodes.size,e),this.index.set(sr.tagName,this.nodes.size-1))}getHinderedRotorPotential(){let e=this.index.get(su.tagName);if(void 0!=e)return this.nodes.get(e)}setHinderedRotorPotential(e){let t=this.index.get(su.tagName);void 0!=t?this.nodes.set(t,e):(this.nodes.set(this.nodes.size,e),this.index.set(su.tagName,this.nodes.size-1))}getPeriodicity(){let e=this.index.get(sp.tagName);if(void 0!=e)return this.nodes.get(e)}setPeriodicity(e){let t=this.index.get(sp.tagName);void 0!=t?this.nodes.set(t,e):(this.nodes.set(this.nodes.size,e),this.index.set(sp.tagName,this.nodes.size-1))}}class sN extends J{static{this.tagName="me:reservoirSize"}constructor(e,t){super(e,sN.tagName,t)}}class sx extends J{static{this.tagName="me:qtot"}constructor(e,t){super(e,sx.tagName,t)}}class sv extends J{static{this.tagName="me:sumc"}constructor(e,t){super(e,sv.tagName,t)}}class sE extends J{static{this.tagName="me:sumg"}constructor(e,t){super(e,sE.tagName,t)}}class sy extends ee{static{this.tagName="me:densityOfStates"}static{this.header=[tk.tagName,sx.tagName,sv.tagName,sE.tagName]}constructor(e){super(e,sy.tagName),this.index=new Map}getT(){let e=this.index.get(tk.tagName);if(void 0!=e)return this.nodes.get(e)}setT(e){let t=this.index.get(e.tagName);void 0!=t?this.nodes.set(t,e):(this.nodes.set(this.nodes.size,e),this.index.set(e.tagName,this.nodes.size-1))}getQtot(){let e=this.index.get(sx.tagName);if(void 0!=e)return this.nodes.get(e)}setQtot(e){let t=this.index.get(e.tagName);void 0!=t?this.nodes.set(t,e):(this.nodes.set(this.nodes.size,e),this.index.set(e.tagName,this.nodes.size-1))}getSumc(){let e=this.index.get(sv.tagName);if(void 0!=e)return this.nodes.get(e)}setSumc(e){let t=this.index.get(e.tagName);void 0!=t?this.nodes.set(t,e):(this.nodes.set(this.nodes.size,e),this.index.set(e.tagName,this.nodes.size-1))}getSumg(){let e=this.index.get(sE.tagName);if(void 0!=e)return this.nodes.get(e)}setSumg(e){let t=this.index.get(e.tagName);void 0!=t?this.nodes.set(t,e):(this.nodes.set(this.nodes.size,e),this.index.set(e.tagName,this.nodes.size-1))}toStringArray(){return[this.getT().value.toString(),this.getQtot().value.toString(),this.getSumc().value.toString(),this.getSumg().value.toString()]}}class sw extends ee{static{this.tagName="me:densityOfStatesList"}constructor(e,t,s){if(super(e,sw.tagName),this.index=new Map,this.dosIndex=new Map,t&&(this.nodes.set(this.nodes.size,t),this.index.set(tA.tagName,this.nodes.size-1)),s){let e=0;s.forEach(t=>{this.dosIndex.set(e,this.nodes.size),this.nodes.set(this.nodes.size,t),e++})}}getDescription(){let e=this.index.get(tA.tagName);if(void 0!=e)return this.nodes.get(e)}setDescription(e){let t=this.index.get(tA.tagName);void 0!=t?this.nodes.set(t,e):(this.nodes.set(this.nodes.size,e),this.index.set(tA.tagName,this.nodes.size-1))}getDensityOfStates(e){let t=this.dosIndex.get(e);if(void 0!=t)return this.nodes.get(t)}setDensityOfStates(e,t){let s=this.dosIndex.get(e);void 0!=s?this.nodes.set(s,t):(this.nodes.set(this.nodes.size,t),this.dosIndex.set(e,this.nodes.size-1))}addDensityOfStates(e){this.nodes.set(this.nodes.size,e);let t=this.nodes.size-1;return this.dosIndex.set(t,this.nodes.size-1),t}removeDensityOfStates(e){let t=this.dosIndex.get(e);void 0!=t&&this.nodes.delete(t)}toCSV(){let e="",t=sy.header;return e+=t.join(",")+"\n",this.nodes.forEach(t=>{e+=t.toStringArray().join(",")+"\n"}),e}}class sR extends ee{static{this.tagName="me:States"}constructor(e,t){if(super(e,sR.tagName),this.index=new Map,t){let e=0;t.forEach(t=>{this.nodes.set(this.nodes.size,t),this.index.set(t.id,e),e++})}}getNextId(){let e=0;for(;this.index.has(e);)e++;return e}getStates(){let e=[];return this.nodes.forEach(t=>{e.push(t)}),e}getState(e){return this.nodes.get(this.index.get(e))}setState(e,t){this.nodes.set(this.index.get(t.id),t)}addState(e){let t;return this.index.has(e.id)?t=this.index.get(e.id):(t=this.nodes.size,this.index.set(e.id,t)),this.nodes.set(t,e),this.nodes.size-1}removeState(e){console.log("Removing state with id "+e);let t=this.index.get(e);console.log("Removing state at index "+t),this.nodes.delete(t)}}class sb extends W{static{this.tagName="me:State"}static{this.s_energy="energy"}static{this.s_degeneracy="degeneracy"}constructor(e,t){super(e,sb.tagName),this.id=t}getEnergy(){return new p.Big(this.attributes.get(sb.s_energy))}setEnergy(e){this.attributes.set(sb.s_energy,e.toString())}removeEnergy(){this.attributes.delete(sb.s_energy)}getDegeneracy(){return new p.Big(this.attributes.get(sb.s_degeneracy))}setDegeneracy(e){this.attributes.set(sb.s_degeneracy,e.toString())}removeDegeneracy(){this.attributes.delete(sb.s_degeneracy)}}class sC extends ee{static{this.tagName="molecule"}static{this.s_id="id"}static{this.s_description="description"}static{this.s_active="active"}constructor(e,t,s,i,n,a,d,o,l,r,g,h,c){super(e,sC.tagName),this.index=new Map,this.edmindex=new Map,this.id=t;let m=0;s&&(this.nodes.set(m,s),this.index.set(tR.tagName,m),m++),i&&(this.nodes.set(m,i),this.index.set(tU.tagName,m),m++),n&&(this.nodes.set(m,n),this.index.set(tV.tagName,m),m++),a&&(this.nodes.set(m,a),this.index.set(ss.tagName,m),m++),d&&(this.nodes.set(m,d),this.index.set(so.tagName,m),m++),o&&(this.nodes.set(m,o),this.index.set(sl.tagName,m),m++),l&&(this.nodes.set(m,l),this.index.set(sh.tagName,m),m++),r&&r.forEach(e=>{this.nodes.set(m,e),this.edmindex.set(m,m),m++}),g&&(this.nodes.set(m,g),this.index.set(sN.tagName,m),m++),h&&(this.nodes.set(m,h),this.index.set(sm.tagName,m)),c&&(this.nodes.set(m,c),this.index.set(sR.tagName,m))}getLabel(){return this.getID()}getID(){return this.attributes.get(sC.s_id)}setID(e){this.attributes.set(sC.s_id,e)}getDescription(){let e=this.attributes.get(sC.s_description);return void 0!=e?e:this.getID()}setDescription(e){this.attributes.set(sC.s_description,e)}getActive(){let e=this.attributes.get(sC.s_active);if(void 0!=e)return"true"==e}setActive(e){this.attributes.set(sC.s_active,e.toString())}getMetadataList(){let e=this.index.get(tR.tagName);if(void 0!=e)return this.nodes.get(e)}setMetadataList(e){let t=this.index.get(tR.tagName);void 0==t?(this.index.set(tR.tagName,this.nodes.size),this.addNode(e)):this.nodes.set(t,e)}getPropertyList(){let e=this.index.get(ss.tagName);if(void 0!=e)return this.nodes.get(e)}setPropertyList(e){let t=this.index.get(ss.tagName);void 0==t?(this.index.set(ss.tagName,this.nodes.size),this.addNode(e)):this.nodes.set(t,e)}getProperty(e){let t=this.getPropertyList();if(void 0!=t)return t.getProperty(e)}getAtom(e){return this.getAtoms().getAtom(e)}getAtoms(){let e=this.index.get(tU.tagName);return this.nodes.get(e)}setAtoms(e){this.index.set(tU.tagName,this.nodes.size),this.nodes.set(this.nodes.size,e)}getBond(e){return this.getBonds().getBond(e)}getBonds(){let e=this.index.get(tV.tagName);return this.nodes.get(e)}setBonds(e){this.index.set(tV.tagName,this.nodes.size),this.nodes.set(this.nodes.size,e)}getEnergyTransferModel(){let e=this.index.get(so.tagName);if(void 0!=e)return this.nodes.get(e)}setEnergyTransferModel(e){let t=this.index.get(so.tagName);void 0==t?(this.index.set(so.tagName,this.nodes.size),this.addNode(e)):this.nodes.set(t,e)}getDOSCMethod(){let e=this.index.get(sl.tagName);if(void 0!=e)return this.nodes.get(e)}setDOSCMethod(e){let t=this.index.get(sl.tagName);void 0==t?(this.index.set(sl.tagName,this.nodes.size),this.addNode(e)):this.nodes.set(t,e)}getDistributionCalcMethod(){let e=this.index.get(sh.tagName);if(void 0!=e)return this.nodes.get(e)}setDistributionCalcMethod(e){let t=this.index.get(sh.tagName);void 0==t?(this.index.set(sh.tagName,this.nodes.size),this.addNode(e)):this.nodes.set(t,e)}getExtraDOSCMethod(e){let t=this.edmindex.get(e);if(void 0!=t)return this.nodes.get(t)}setExtraDOSCMethod(e,t){let s=this.edmindex.get(e);void 0==s?(this.edmindex.set(e,this.nodes.size),this.nodes.set(this.nodes.size,t)):this.nodes.set(s,t)}getReservoirSize(){let e=this.index.get(sN.tagName);if(void 0!=e)return this.nodes.get(e)}setReservoirSize(e){let t=this.index.get(sN.tagName);void 0==t?(this.index.set(sN.tagName,this.nodes.size),this.addNode(e)):this.nodes.set(t,e)}getDensityOfStatesList(){let e=this.index.get(sw.tagName);if(void 0!=e)return this.nodes.get(e)}setDensityOfStatesList(e){let t=this.index.get(sw.tagName);void 0==t?(this.index.set(sw.tagName,this.nodes.size),this.addNode(e)):this.nodes.set(t,e)}getThermoTable(){let e=this.index.get(sm.tagName);if(void 0!=e)return this.nodes.get(e)}setThermoTable(e){let t=this.index.get(sm.tagName);void 0==t?(this.index.set(sm.tagName,this.nodes.size),this.addNode(e)):this.nodes.set(t,e)}getStates(){let e=this.index.get(sR.tagName);if(void 0!=e)return this.nodes.get(e)}setStates(e){let t=this.index.get(sR.tagName);void 0==t?(this.index.set(sR.tagName,this.nodes.size),this.addNode(e)):this.nodes.set(t,e)}getEnergy(){let e;return void 0==(e=this.getProperty(t$.dictRef))&&void 0==(e=this.getProperty(tK.dictRef))&&void 0==(e=this.getProperty(tW.dictRef))&&void 0==(e=this.getProperty(tZ.dictRef))?(0,p.Big)(0):e.getProperty().value}}function sS(e,t,s){let i=O(np,void 0,ng);return e.appendChild(i),i.addEventListener("click",()=>{var n,a;let d,o=sL(!0,void 0,void 0,s);if(void 0==o)return;console.log("mid="+o);let l=new sC(new Map,o);l.setID(o),s.set(o,l),l.setAtoms(new tU(new Map)),l.setBonds(new tV(new Map));let r=t.addID(sC.tagName,o),g=G(r),h=M(t.addID(r,nx),e,i,g,o,nh,ng);ae(eu.tagName,o),sB(l,s,h.querySelector(C),t,g,ng),g.appendChild(sA(t.addID(r,nv),t,l.getDescription.bind(l),l.setDescription.bind(l),nh,ng));let c=t.addID(r,tU.tagName),m=G(c);M(t.addID(c,nx),g,null,m,tU.tagName,nh,ng),m.appendChild(sO(t,l,m,tG.tagName,nh,ng));let f=t.addID(r,tV.tagName),x=G(f);M(t.addID(f,nx),g,null,x,tV.tagName,nh,ng),x.appendChild(sq(t,l,x,tq.tagName,nh,ng)),sY(t,l,g,nh,ng);let v=t.addID(r,ss.tagName),E=G(v);M(t.addID(v,nx),g,null,E,ss.tagName,nh,ng);let w=l.getPropertyList();void 0==w&&(console.log("PropertyList is undefined for molecule "+l.getLabel()),w=new ss(new Map),l.setPropertyList(w)),console.log("pl.index.size"+w.index.size),sM(!0,l,t,E,n=w,t$.dictRef,tB.energyUnits),sM(!0,l,t,E,n,tK.dictRef,tB.energyUnits),sM(!0,l,t,E,n,tW.dictRef,tB.energyUnits),sM(!0,l,t,E,n,tZ.dictRef,tB.energyUnits),sI(!0,!1,l,t,E,n,tJ.dictRef,tB.frequencyUnits),sM(!0,l,t,E,n,tQ.dictRef,void 0),sM(!0,l,t,E,n,t0.dictRef,void 0),sM(!0,l,t,E,n,t1.dictRef,void 0),sI(!0,!1,l,t,E,n,t2.dictRef,tB.frequencyUnits),sM(!0,l,t,E,n,t3.dictRef,tB.massUnits),sM(!0,l,t,E,n,t5.dictRef,void 0),sM(!0,l,t,E,n,t4.dictRef,tB.temperatureUnits),sM(!0,l,t,E,n,t6.dictRef,tB.lengthUnits),sD(!0,!1,l,t,E,n,t8.dictRef,tB.hessianUnits),sI(!0,!1,l,t,E,n,t9.dictRef,tB.EinsteinAUnits),sI(!0,!1,l,t,E,n,t7.dictRef,tB.EinsteinBUnits),sM(!0,l,t,E,n,se.dictRef,tB.frequencyUnits);let R=t.addID(r,so.tagName),b=G(R);M(t.addID(R,nx),g,null,b,so.tagName,nh,ng);let S=l.getEnergyTransferModel();void 0==S&&(S=new so(new Map),l.setEnergyTransferModel(S)),console.log("etm.index.size"+S.nodes.size);let T=O(np,N(R,si.tagName,np,C),ng);b.appendChild(T),T.addEventListener("click",()=>{let e=nK,s=new si(new Map,e),i=S.addDeltaEDown(s),n=t.addID(R,si.tagName,S.nodes.size),a=U(n);b.insertBefore(a,T);let d=I(si.tagName,n,nh,ng,t=>{let i=t.target;y(i.value)?(e=new(u(p))(i.value),s.setValue(e)):(alert("Input is not a number, resetting..."),i.value=s.value.toString()??nz),P(i)},s.value.toString(),si.tagName);a.appendChild(d),an(a,nh,()=>{S.removeDeltaEDown(i),b.removeChild(a)})});let z=t.addID(r,sR.tagName),_=G(z);M(t.addID(z,nx),g,null,_,sR.tagName,nh,ng);let D=l.getStates();void 0==D&&(D=new sR(new Map),l.setStates(D)),console.log("states.index.size"+D.nodes.size),a=D,d=O(np,N(z,sb.tagName,np,C),ng),_.appendChild(d),d.addEventListener("click",()=>{let e=new Map;e.set(sb.s_energy,"0"),e.set(sb.s_degeneracy,"0");let s=a.getNextId(),i=new sb(e,s);console.log("stateId="+s);let n=a.addState(i),o=t.addID(z,sb.tagName,i.id),l=U(o);_.insertBefore(l,d);let r=t.addID(o,sb.s_energy),g=U(r);l.appendChild(g);let h=i.getEnergy(),c=I(sb.s_energy,r,nh,ng,e=>{let t=e.target;y(t.value)?(h=new(u(p))(t.value),i.setEnergy(h)):(alert("Input is not a number, resetting..."),t.value=h.toString()??nz),P(t)},h.toString(),sb.s_energy);g.appendChild(c);let m=t.addID(o,sb.s_degeneracy),f=U(m);l.appendChild(f);let N=i.getDegeneracy(),x=I(sb.s_degeneracy,m,nh,nh,e=>{let t=e.target;y(t.value)?(N=new(u(p))(t.value),i.setDegeneracy(N)):(alert("Input is not a number, resetting..."),t.value=N.toString()??nz),P(t)},N.toString(),sb.s_degeneracy);f.appendChild(x),an(l,nh,()=>{a.removeState(n),_.removeChild(l)})}),an(g,ng,()=>{sH(e,h,t,s,r,l)})}),i}function sM(e,t,s,i,n,a,d){let o,l,r,g,h;return(o=new Map).set(tY.s_dictRef,a),l=new Map,void 0!=d&&l.set(tH.s_units,d[0]),g=new tY(o,r=new tH(l,nK)),t.getPropertyList().setProperty(g),console.log("pl.index.size"+n.index.size),ad(d,l,h=as(i.id,s,a,r.getValue.bind(r),e=>sT(a,n,r,e),()=>n.removeProperty(g.dictRef),nh,ng),h.querySelector(nE),nA(i.id,a,tH.s_units),a,nh,nh),i.appendChild(h),e&&(h.querySelector(C).click(),n.removeProperty(a)),h}function sT(e,t,s,i){if(void 0==t.getProperty(e)){let i,n;(i=new Map).set(tY.s_dictRef,e),n=new tY(i,s),t.setProperty(n),console.log("Set property "+e)}else console.log("Property "+e+" already exists.");s.setValue.bind(s)(i),(e==t$.dictRef||e==tK.dictRef||e==tW.dictRef||e==tZ.dictRef)&&n9()}function sI(e,t,s,i,n,a,d,o){let l,r,g,h,c;(l=new Map).set(tY.s_dictRef,d),r=new Map,void 0!=o&&r.set(tH.s_units,o[0]);let m=[];t&&sz(d,m),h=new tY(l,g=new tj(r,m)),s.getPropertyList().setProperty(h),console.log("pl.index.size"+a.index.size),ad(o,r,c=s$(n,i,d,g,g.getValues.bind(g),e=>s_(d,a,g,e),()=>a.removeProperty(h.dictRef),nh,ng),c.querySelector(nE),nA(n.id,d,tH.s_units),d,nh,nh),n.appendChild(c),e&&(c.querySelector(C).click(),a.removeProperty(d))}function sz(e,t){let s=function(e){let t=0,s=!1;for(;!s;){let i=prompt(e,"0");null!=i&&y(i)&&(t=parseInt(i))>0&&(s=!0)}return t}("Please enter the number of elements in the "+e+" array");for(let e=0;e<s;e++)t.push(nK)}function s_(e,t,s,i){if(void 0==t.getProperty(e)){let i,n;(i=new Map).set(tY.s_dictRef,e),n=new tY(i,s),t.setProperty(n),console.log("Set property "+e)}else console.log("Property "+e+" already exists.");console.log("Value "+s.getValues()),s.setValues.bind(s)(i),console.log("Value "+s.getValues())}function sD(e,t,s,i,n,a,d,o){let l,r,g,h,c;(l=new Map).set(tY.s_dictRef,d),r=new Map,void 0!=o&&r.set(tH.s_units,o[0]);let m=[];t&&sz(d,m),h=new tY(l,g=new tX(r,m)),s.getPropertyList().setProperty(h),console.log("pl.index.size"+a.index.size),ad(o,r,c=s$(n,i,d,g,g.getValues.bind(g),e=>s_(d,a,g,e),()=>a.removeProperty(h.dictRef),nh,ng),c.querySelector(nE),nA(n.id,d,tH.s_units),d,nh,nh),n.appendChild(c),e&&(c.querySelector(C).click(),a.removeProperty(d))}function sP(e,t,s,i){let n=O(nf,void 0,nh);return e.appendChild(n),n.addEventListener("click",()=>{let n=s.addID(sC.tagName,"div");nk(n);let a=G(n,ng);if(void 0==r){alert("There are no additional molecules to add, please load data...");return}let d=Array.from(nJ(r));if(0==d.length){alert("There are no additional molecules to add, please load data...");return}console.log("options.length="+d.length),at(d,!0);let o=s.addID(n,S);nk(o);let l=A(d,"Select molecule",nS,o,nh);l.classList.add(sC.tagName),a.appendChild(l),e.insertBefore(a,t),ao(d,l),l.addEventListener("change",n=>{let d,o=n.target,l=o.options[o.selectedIndex].value,g=r.get(l),h=g.getID();for(;void 0==(h=sL(!0,h,g,i)););i.set(h,g);let c=s.addID(sC.tagName,i.size),m=G(c),f=M(s.addID(c,nx),e,t,m,g.getLabel(),nh,ng);ae(eu.tagName,g.getID()),sB(g,i,f.querySelector(C),s,m,ng),m.appendChild(sA(s.addID(c,nv),s,g.getDescription.bind(g),g.setDescription.bind(g),nh,ng));let x=s.addID(c,tR.tagName),v=G(x,ng);M(N(x,nx),m,null,v,tR.tagName,nh,ng);let E=g.getMetadataList();void 0!=E&&E.getMetadata().forEach(e=>{let t=G();v.appendChild(t),t.appendChild(q(e.getLabelText(),nh))});let w=s.addID(c,tU.tagName),R=G(w);M(s.addID(w,nx),m,null,R,tU.tagName,nh,ng);let b=g.getAtoms();void 0!=b&&b.atoms.forEach(e=>{R.appendChild(sG(!1,s,g,w,b,e,nh,ng))}),R.appendChild(sO(s,g,R,tG.tagName,nh,ng));let S=s.addID(c,tV.tagName),T=G(S);M(s.addID(S,nx),m,null,T,tV.tagName,nh,ng);let z=g.getBonds();void 0!=z&&z.bonds.forEach(e=>{if(void 0==b)throw Error("Atoms are not defined for molecule "+g.getLabel());T.appendChild(sV(!1,s,g,S,b.atoms,z,e,nh,ng))}),T.appendChild(sq(s,g,T,tq.tagName,nh,ng)),sY(s,g,m,nh,ng);let _=s.addID(c,ss.tagName),D=G(_);M(s.addID(_,nx),m,null,D,ss.tagName,nh,ng);let L=g.getPropertyList(),B=new Set(L.getProperties().keys());if(B.has(t$.dictRef)){d=N(D.id,t$.dictRef);let e=L.getProperty(t$.dictRef),t=e.getProperty(),i=as(d,s,e.dictRef,t.getValue.bind(t),s=>sT(e.dictRef,L,t,s),()=>L.removeProperty(e.dictRef),nh,ng);ad(tB.energyUnits,t.attributes,i,i.querySelector(nE),N(d,tH.s_units),e.dictRef,nh,nh),D.appendChild(i)}else sM(!0,g,s,D,L,t$.dictRef,tB.energyUnits);if(B.has(tK.dictRef)){d=N(D.id,tK.dictRef);let e=L.getProperty(tK.dictRef),t=e.getProperty(),i=as(d,s,e.dictRef,t.getValue.bind(t),s=>sT(e.dictRef,L,t,s),()=>L.removeProperty(e.dictRef),nh,ng);ad(tB.energyUnits,t.attributes,i,i.querySelector(nE),N(d,tH.s_units),e.dictRef,nh,nh),D.appendChild(i)}else sM(!0,g,s,D,L,tK.dictRef,tB.energyUnits);if(B.has(tW.dictRef)){d=N(D.id,tW.dictRef);let e=L.getProperty(tW.dictRef),t=e.getProperty(),i=as(d,s,e.dictRef,t.getValue.bind(t),s=>sT(e.dictRef,L,t,s),()=>L.removeProperty(e.dictRef),nh,ng);ad(tB.energyUnits,t.attributes,i,i.querySelector(nE),N(d,tH.s_units),e.dictRef,nh,nh),D.appendChild(i)}else sM(!0,g,s,D,L,tW.dictRef,tB.energyUnits);if(B.has(tZ.dictRef)){d=N(D.id,tZ.dictRef);let e=L.getProperty(tZ.dictRef),t=e.getProperty(),i=as(d,s,e.dictRef,t.getValue.bind(t),s=>sT(e.dictRef,L,t,s),()=>L.removeProperty(e.dictRef),nh,ng);ad(tB.energyUnits,t.attributes,i,i.querySelector(nE),N(d,tH.s_units),e.dictRef,nh,nh),D.appendChild(i)}else sM(!0,g,s,D,L,tZ.dictRef,tB.energyUnits);if(B.has(tJ.dictRef)){d=N(D.id,tJ.dictRef);let e=L.getProperty(tJ.dictRef),t=e.getProperty(),i=s$(D,s,e.dictRef,t,t.getValues.bind(t),s=>s_(e.dictRef,L,t,s),()=>L.removeProperty(e.dictRef),nh,ng);ad(tB.frequencyUnits,t.attributes,i,i.querySelector(nE),N(d,tH.s_units),e.dictRef,nh,nh),D.appendChild(i)}else sI(!0,!1,g,s,D,L,tJ.dictRef,tB.frequencyUnits);if(B.has(tQ.dictRef)){d=N(D.id,tQ.dictRef);let e=L.getProperty(tQ.dictRef),t=e.getProperty(),i=as(d,s,e.dictRef,t.getValue.bind(t),s=>sT(e.dictRef,L,t,s),()=>L.removeProperty(e.dictRef),nh,ng);D.appendChild(i)}else sM(!0,g,s,D,L,tQ.dictRef,void 0);if(B.has(t0.dictRef)){d=N(D.id,t0.dictRef);let e=L.getProperty(t0.dictRef),t=e.getProperty(),i=as(d,s,e.dictRef,t.getValue.bind(t),s=>sT(e.dictRef,L,t,s),()=>L.removeProperty(e.dictRef),nh,ng);D.appendChild(i)}else sM(!0,g,s,D,L,t0.dictRef,void 0);if(B.has(t1.dictRef)){d=N(D.id,t1.dictRef);let e=L.getProperty(t1.dictRef),t=e.getProperty(),i=as(d,s,e.dictRef,t.getValue.bind(t),s=>sT(e.dictRef,L,t,s),()=>L.removeProperty(e.dictRef),nh,ng);D.appendChild(i)}else sM(!0,g,s,D,L,t1.dictRef,void 0);if(B.has(t2.dictRef)){d=N(D.id,t2.dictRef);let e=L.getProperty(t2.dictRef),t=e.getProperty(),i=s$(D,s,e.dictRef,t,t.getValues.bind(t),s=>s_(e.dictRef,L,t,s),()=>L.removeProperty(e.dictRef),nh,ng);ad(tB.frequencyUnits,t.attributes,i,i.querySelector(nE),N(d,tH.s_units),e.dictRef,nh,nh),D.appendChild(i)}else sI(!0,!1,g,s,D,L,t2.dictRef,tB.frequencyUnits);if(B.has(t3.dictRef)){d=N(D.id,t3.dictRef);let e=L.getProperty(t3.dictRef),t=e.getProperty(),i=as(d,s,e.dictRef,t.getValue.bind(t),s=>sT(e.dictRef,L,t,s),()=>L.removeProperty(e.dictRef),nh,ng);ad(tB.massUnits,t.attributes,i,i.querySelector(nE),N(d,tH.s_units),e.dictRef,nh,nh),D.appendChild(i)}else sM(!0,g,s,D,L,t3.dictRef,tB.massUnits);if(B.has(t5.dictRef)){d=N(D.id,t5.dictRef);let e=L.getProperty(t5.dictRef),t=e.getProperty(),i=as(d,s,e.dictRef,t.getValue.bind(t),s=>sT(e.dictRef,L,t,s),()=>L.removeProperty(e.dictRef),nh,ng);D.appendChild(i)}else sM(!0,g,s,D,L,t5.dictRef,void 0);if(B.has(t4.dictRef)){d=N(D.id,t4.dictRef);let e=L.getProperty(t4.dictRef),t=e.getProperty(),i=as(d,s,e.dictRef,t.getValue.bind(t),s=>sT(e.dictRef,L,t,s),()=>L.removeProperty(e.dictRef),nh,ng);D.appendChild(i)}else sM(!0,g,s,D,L,t4.dictRef,tB.temperatureUnits);if(B.has(t6.dictRef)){d=N(D.id,t6.dictRef);let e=L.getProperty(t6.dictRef),t=e.getProperty(),i=as(d,s,e.dictRef,t.getValue.bind(t),s=>sT(e.dictRef,L,t,s),()=>L.removeProperty(e.dictRef),nh,ng);D.appendChild(i)}else sM(!0,g,s,D,L,t6.dictRef,tB.lengthUnits);if(B.has(t8.dictRef)){d=N(D.id,t8.dictRef);let e=L.getProperty(t8.dictRef),t=e.getProperty(),i=s$(D,s,e.dictRef,t,t.getValues.bind(t),s=>s_(e.dictRef,L,t,s),()=>L.removeProperty(e.dictRef),nh,ng);ad(tB.hessianUnits,t.attributes,i,i.querySelector(nE),N(d,tH.s_units),e.dictRef,nh,nh),D.appendChild(i)}else sD(!0,!1,g,s,D,L,t8.dictRef,tB.hessianUnits);if(B.has(t9.dictRef)){d=N(D.id,t9.dictRef);let e=L.getProperty(t9.dictRef),t=e.getProperty(),i=s$(D,s,e.dictRef,t,t.getValues.bind(t),s=>s_(e.dictRef,L,t,s),()=>L.removeProperty(e.dictRef),nh,ng);ad(tB.EinsteinAUnits,t.attributes,i,i.querySelector(nE),N(d,tH.s_units),e.dictRef,nh,nh),D.appendChild(i)}else sI(!0,!1,g,s,D,L,t9.dictRef,tB.EinsteinAUnits);if(B.has(t7.dictRef)){d=N(D.id,t7.dictRef);let e=L.getProperty(t7.dictRef),t=e.getProperty(),i=s$(D,s,e.dictRef,t,t.getValues.bind(t),s=>s_(e.dictRef,L,t,s),()=>L.removeProperty(e.dictRef),nh,ng);ad(tB.EinsteinBUnits,t.attributes,i,i.querySelector(nE),N(d,tH.s_units),e.dictRef,nh,nh),D.appendChild(i)}else sI(!0,!1,g,s,D,L,t7.dictRef,tB.EinsteinBUnits);if(B.has(se.dictRef)){d=N(D.id,se.dictRef);let e=L.getProperty(se.dictRef),t=e.getProperty(),i=as(d,s,e.dictRef,t.getValue.bind(t),s=>sT(e.dictRef,L,t,s),()=>L.removeProperty(e.dictRef),nh,ng);ad(tB.frequencyUnits,t.attributes,i,i.querySelector(nE),N(d,tH.s_units),e.dictRef,nh,nh),D.appendChild(i)}else sM(!0,g,s,D,L,se.dictRef,tB.frequencyUnits);let A=s.addID(c,sb.tagName),k=G(A);M(s.addID(A,nx),m,null,k,sR.tagName,nh,ng);let O=g.getStates();void 0!=O&&O.getStates().forEach(e=>{console.log(e.toString());let t=N(A,sb.tagName,e.id),i=U(t);k.appendChild(i);let n=s.addID(t,sb.s_energy),a=e.getEnergy(),d=I(sb.s_energy,n,nh,ng,t=>{let s=t.target;y(s.value)?(a=new(u(p))(s.value),e.setEnergy(a)):(alert("Input is not a number, resetting..."),s.value=a.toString()??nz),P(s)},a.toString(),sb.s_energy);i.appendChild(d);let o=s.addID(t,sb.s_degeneracy),l=e.getDegeneracy(),r=I(sb.s_degeneracy,o,nh,nh,t=>{let s=t.target;y(s.value)?(l=new(u(p))(s.value),e.setDegeneracy(l)):(alert("Input is not a number, resetting..."),s.value=l.toString()??nz),P(s)},l.toString(),sb.s_degeneracy);i.appendChild(r),an(i,nh,()=>{O.removeState(e.id),i.remove()})}),a.remove(),an(m,ng,()=>{sH(e,f,s,i,c,g)})})}),n}function sL(e,t,s,i){let n;for(;;){if(null==(n=e?prompt("Please enter a name for the molecule",t):t))return;if(""==n)alert("The molecule ID cannot be empty.");else{if(!i.has(n))return t=n,void 0!=s&&(s.setID(t),i.set(t,s)),t;alert("The molecule ID "+n+" is already in use."),e=!0}}}function sB(e,t,s,i,n,a){let d=nc+" Edit id",o=i.addID(n.id,d,C),l=O(d,o,a);n.appendChild(l),l.addEventListener("click",()=>{let i=e.getID();for(n7(eu.tagName,e.getID()),t.delete(i);void 0==(i=sL(!0,i,e,t)););ae(eu.tagName,i),s.textContent=e.getLabel()+" ▲"})}function sA(e,t,s,i,n,a){let d=U(void 0,a),o=nv+nu,l=nv+nm,r=O(l,t.addID(e,C),n);d.appendChild(r),r.classList.add(ny),r.classList.add(nw);let g=t.addID(e,nv,nE),h=s();return void 0==h?(r.textContent=l,r.classList.toggle(ny)):(sk(d,g,h,i,n),r.textContent=o,r.classList.toggle(nw)),r.addEventListener("click",e=>{null==document.getElementById(g)?(sk(d,g,h,i,n),r.textContent=o):(document.getElementById(g)?.remove(),console.log("Removed "+g),r.textContent=l),r.classList.toggle(ny),r.classList.toggle(nw)}),d}function sk(e,t,s,i,n){let a;a=void 0==s?"":s;let d=z("text",t,n);d.addEventListener("change",e=>{let n=e.target;i(n.value),console.log(t+" changed from "+s+" to "+n.value),P(n)}),d.value=a,P(d),e.appendChild(d)}function sO(e,t,s,i,n,a){let d=O(np,e.addID(s.id,"Add"+i+"Button"),a);return d.addEventListener("click",()=>{let i=new tG(new Map,t);s.insertBefore(sG(!0,e,t,s.id,t.getAtoms(),i,n,a),d)}),d}function sG(e,t,s,i,n,a,d,o){let l,r,g,h,c,m,u;let p=U(N(i,l=e?n.addAtom(a,a.getID()):a.getID()),o);return p.appendChild(q(l,d)),r=a.getElementType(),g=tB.elementTypes,void 0==r&&(r=nS,at(g,!0)),h=N(p.id,tG.s_elementType),(m=(c=k(tG.s_elementType,g,tG.s_elementType,r,h,d,d)).querySelector("select")).addEventListener("change",e=>{let t=e.target;a.setElementType(t.value),L(t)}),m.value=r,L(m),ao(g,m),p.appendChild(c),u=N(p.id,tG.s_x3),p.appendChild(as(u,t,tG.s_x3,a.getX3.bind(a),a.setX3.bind(a),a.removeX3,d,d)),u=N(p.id,tG.s_y3),p.appendChild(as(u,t,tG.s_y3,a.getY3.bind(a),a.setY3.bind(a),a.removeY3,d,d)),u=N(p.id,tG.s_z3),p.appendChild(as(u,t,tG.s_z3,a.getZ3.bind(a),a.setZ3.bind(a),a.removeZ3,d,d)),an(p,d,sU,s,l,t),ae(tq.s_atomRefs2,l),p}function sU(e,t,s){e.getAtoms().removeAtom(t),s.forEach(e=>{console.log("Removing "+e),nk(e)}),n7(tq.s_atomRefs2,t),e.getBonds().bonds.forEach(t=>{let s=t.getAtomRefs2().split(" ");if(s[0]==s[1]){let s=t.getID();e.getBonds().removeBond(s),n7(tq.tagName,s);let i=N(sC.tagName,e.id,tV.tagName,s),n=document.getElementById(i);if(null==n)throw Error("Bond div with id "+i+" not found.");n.remove()}})}function sq(e,t,s,i,n,a){let d=O(np,e.addID(s.id,i,C),a);return d.addEventListener("click",()=>{let i=t.getAtoms().atoms;if(i.size<2){alert("There must be at least 2 atoms to create a bond.");return}let o=new Map,l=Array.from(i.keys()).slice(0,2).join(" ");o.set(tq.s_atomRefs2,l);let r=new tq(o,t);s.insertBefore(sV(!0,e,t,s.id,i,t.getBonds(),r,n,a),d)}),s.appendChild(d),d}function sV(e,t,s,i,n,a,d,o,l){let r,g,h,c,m,u,p,f,x,v;let E=U(N(i,r=e?a.addBond(d,d.getID()):d.getID()),l);return E.appendChild(q(r,o)),g=N(E.id,tq.s_atomRefs2),h=d.getAtomRefs2().split(" "),c=Array.from(s.getAtoms().atoms.keys()),m=N(g,0),(p=(u=k(tq.s_atomRefs2+"[0]",c,tG.tagName,h[0],m,o,o)).querySelector("select")).classList.add(tq.s_atomRefs2),p.addEventListener("change",e=>{let t=e.target,s=t.value+" "+h[1];console.log(tq.s_atomRefs2+" changed to "+s),d.setAtomRefs2(s),L(t)}),p.value=h[0],L(p),E.appendChild(u),f=N(g,1),(v=(x=k(tq.s_atomRefs2+"[1]",c,tG.tagName,h[1],f,o,o)).querySelector("select")).classList.add(tq.s_atomRefs2),v.addEventListener("change",e=>{let t=e.target,s=h[0]+" "+t.value;console.log(tq.s_atomRefs2+" changed to "+s),d.setAtomRefs2(s),L(t)}),v.value=h[1],L(v),E.appendChild(x),function(e,t,s,i){let n=N(t.id,tq.s_order),a=U(void 0,i);t.appendChild(a);let d=tq.s_order+nu,o=tq.s_order+nm,l=O(o,void 0,i);a.appendChild(l),l.classList.add(ny),l.classList.add(nw);let r=s.getOrder();void 0==r?(l.textContent=o,l.classList.toggle(ny)):(sF(a,s,n,r,i),l.textContent=d,l.classList.toggle(nw)),l.addEventListener("click",e=>{null==document.getElementById(n)?(void 0==r&&(r=1),sF(a,s,n,r,i),l.textContent=d):(document.getElementById(n)?.remove(),console.log("Removed "+n),l.textContent=o),l.classList.toggle(ny),l.classList.toggle(nw)})}(0,E,d,o),Array.from(n.keys()).forEach(e=>{E.classList.add(e)}),an(E,o,e=>s.getBonds().removeBond(e),r),ae(tq.tagName,r),E}function sF(e,t,s,i,n){let a=i.toString(),d=A(tq.orderOptions,tq.s_order,a,s,n);d.addEventListener("change",e=>{let s=e.target;t.setOrder(parseFloat(s.value)),console.log(tq.s_order+" changed from "+a+" to "+s.value),L(s)}),d.value=a,L(d),d.id=s,e.appendChild(d)}function sH(e,t,s,i,n,a){e.removeChild(t),s.removeIDs(n),s.removeIDs(N(n,nv)),s.removeIDs(N(n,tU.tagName)),s.removeIDs(N(n,tV.tagName)),s.removeIDs(N(n,nD)),s.removeIDs(N(n,ss.tagName)),i.delete(a.getID())}function sj(e,t,s,i,n,a,d){let o=new tY(es(t));return o.dictRef==t$.dictRef?sX(e,o,tB.energyUnits,i,n,t,s,a,d):o.dictRef==tK.dictRef?sX(e,o,tB.energyUnits,i,n,t,s,a,d):o.dictRef==tW.dictRef?sX(e,o,tB.energyUnits,i,n,t,s,a,d):o.dictRef==tZ.dictRef?sX(e,o,tB.energyUnits,i,n,t,s,a,d):o.dictRef==tJ.dictRef?sX(e,o,tB.frequencyUnits,i,n,t,s,a,d):o.dictRef==tQ.dictRef?sX(e,o,void 0,i,n,t,s,a,d):o.dictRef==t0.dictRef?sX(e,o,void 0,i,n,t,s,a,d):o.dictRef==t1.dictRef?sX(e,o,void 0,i,n,t,s,a,d):o.dictRef==t2.dictRef?sX(e,o,tB.frequencyUnits,i,n,t,s,a,d):o.dictRef==t3.dictRef?sX(e,o,void 0,i,n,t,s,a,d):o.dictRef==t5.dictRef?sX(e,o,void 0,i,n,t,s,a,d):o.dictRef==t4.dictRef?sX(e,o,void 0,i,n,t,s,a,d):o.dictRef==t6.dictRef?sX(e,o,void 0,i,n,t,s,a,d):o.dictRef==t8.dictRef?sX(e,o,void 0,i,n,t,s,a,d):o.dictRef==t9.dictRef?sX(e,o,void 0,i,n,t,s,a,d):o.dictRef==t7.dictRef?sX(e,o,void 0,i,n,t,s,a,d):function(e,t,s,i,n,a,d){let o=new Set,l=i.getElementsByTagName(tF.tagName);if(l.length>0){if(1!=l.length)throw Error("Expecting 1 "+tF.tagName+" but finding "+l.length+"!");let s=$(l[0]),i=new tF(es(l[0]),s);t.setProperty(i),i.setValue=(function(e){i.value=e,(t.dictRef==t$.dictRef||t.dictRef==tK.dictRef||t.dictRef==tW.dictRef||t.dictRef==tZ.dictRef)&&n9()}).bind(i);let a=function(e,t,s,i,n,a,d,o){let l=U(e,o),r=s+nu,g=s+nm,h=nA(e,C);t.add(h);let c=O(g,h,d);l.appendChild(c),c.classList.add(ny),c.classList.add(nw);let m=nA(e,s,nE);t.add(m);let u=i();return void 0==u?(c.textContent=g,c.classList.toggle(ny)):(aa(l,m,s,u,n,d),c.textContent=r,c.classList.toggle(nw)),c.addEventListener("click",e=>{null==document.getElementById(m)?(aa(l,m,s,u,n,d),c.textContent=r):(document.getElementById(m)?.remove(),a(),console.log("Removed "+m),c.textContent=g),c.classList.toggle(ny),c.classList.toggle(nw)}),l}(nA(n.id,t.dictRef),o,t.dictRef,i.getValue.bind(i),i.setValue,()=>e.removeProperty(t.dictRef),nh,ng);n.appendChild(a)}else console.log("Expecting "+tF.tagName+" but finding none!")}(e,o,0,t,s,0,0),e.setProperty(o),o}function sX(e,t,s,i,n,a,d,o,l){let r,g=n.addID(N(d.id,t.dictRef)),h=a.getElementsByTagName(tH.tagName);if(h.length>0){if(1!=h.length)throw Error("Expecting 1 "+tH.tagName+" but finding "+h.length+"!");let i=$(h[0]),a=new(u(p))(i),l=es(h[0]),c=new tH(l,a);t.setProperty(c),c.setValue=(function(e){c.value=e,(t.dictRef==t$.dictRef||t.dictRef==tK.dictRef||t.dictRef==tW.dictRef||t.dictRef==tZ.dictRef)&&n9()}).bind(c),ad(s,l,r=as(g,n,t.dictRef,c.getValue.bind(c),s=>sT(t.dictRef,e,c,s),()=>e.removeProperty(t.dictRef),nh,ng),r.querySelector(nE),n.addID(g,tH.s_units),t.dictRef,o,o),d.appendChild(r)}else{let h=a.getElementsByTagName(tj.tagName);if(h.length>0){if(1!=h.length)throw Error("Expecting 1 "+tj.tagName+" but finding "+h.length+"!");let i=$(h[0]);""==i&&(console.warn("inputString is empty setting to 0!"),i="0");let a=E(i.split(/\s+/)),l=es(h[0]),c=new tj(l,a);t.setProperty(c),ad(s,l,r=s$(d,n,t.dictRef,c,c.getValues.bind(c),c.setValues,()=>e.removeProperty(t.dictRef),nh,ng),r.querySelector(nI),n.addID(g,tj.s_units),t.dictRef,o,o),d.appendChild(r)}else{let e=a.getElementsByTagName(tX.tagName);if(e.length>0){var c,m;let a,r,h;if(1!=e.length)throw Error("Expecting 1 "+tX.tagName+" but finding "+e.length+"!");let u=$(e[0]),p=E(u.split(/\s+/)),f=es(e[0]),N=new tX(f,p);t.setProperty(N);let x=t.dictRef,v=(c=e=>{let s=e.target;sW(!1,t.dictRef,N,s)},m=u,a=U(void 0,l),(h=_(g,o)).onchange=c,h.value=m,B(h),(r=q(x,o)).htmlFor=g,a.appendChild(r),a.appendChild(h),a),y=v.querySelector("textarea");y.value=u,B(y),y.addEventListener("change",e=>{u=e.target.value,N=t.getProperty(),p=E(u.split(/\s+/)),N.values=p,console.log("Set "+t.dictRef+" of "+i.getLabel()+" to "+u),B(y)}),ad(s,f,v,y,n.addID(g,tj.s_units),t.dictRef,o,o),d.appendChild(v)}else throw Error("Expecting "+tH.tagName+", "+tj.tagName+" or "+tX.tagName+" but finding none!")}}}function sY(e,t,s,i,n){let a;let d=G(e.addID(s.id,nD,nx),n);s.appendChild(d);let l=e.addID(s.id,nD),r=!1,g=!1;function h(e,s,n,a,o){let r=G(l,i);r.className="mol-container",d.appendChild(r);let g=$3Dmol.createViewer(r,{backgroundColor:"grey"});return g.setStyle({stick:{}}),t.getAtoms().atoms.forEach(function(e){let t,s,i=e.getElementType();t=void 0==i?"Purple":tB.atomColors.get(i)||"Purple",s=void 0==i?100:tB.atomRadii.get(e.getElementType())||100;let n=e.getX3()?.toNumber()||0,d=e.getY3()?.toNumber()||0,o=e.getZ3()?.toNumber()||0;g.addSphere({center:{x:n,y:d,z:o},radius:s/110,color:t}),a&&g.addLabel(e.getID(),{position:{x:n,y:d,z:o}})}),t.getBonds().bonds.forEach(function(e){let s=e.getAtomRefs2().split(" "),i=t.getAtoms(),n=i.getAtom(s[0]),a=i.getAtom(s[1]),d=e.getOrder()||1,l=tB.bondColors.get(d)||"Purple",r=n.getX3()?.toNumber()||0,h=n.getY3()?.toNumber()||0,c=n.getZ3()?.toNumber()||0,m=a.getX3()?.toNumber()||0,u=a.getY3()?.toNumber()||0,p=a.getZ3()?.toNumber()||0;g.addCylinder({start:{x:r,y:h,z:c},end:{x:m,y:u,z:p},radius:.06*d,color:l}),o&&g.addLabel(e.getID(),{position:{x:(r+m)/2,y:(h+u)/2,z:(c+p)/2}})}),void 0!=e?(console.log("position",e),g.position=e):console.log("position",g.position),void 0!=s?(console.log("rotation",s),g.rotation=s):console.log("rotation",g.rotation),void 0!=n?(console.log("zoom",n),g.zoomLevel=n):console.log("zoom",g.zoomLevel),g.zoomTo(),g.render(),g}let c=O("Draw/Redraw",void 0);function m(e,t,s,n){let d=O((s?"Hide ":"Show ")+e,t,i);return d.addEventListener("click",()=>{s?(d.textContent="Show "+e,s=!1):(d.textContent="Hide "+e,s=!0);let t=a.position,i=a.rotation,o=a.zoomLevel;n(s),nk(l),a=h(t,i,o,r,g)}),d}c.addEventListener("click",()=>{nk(l),a=void 0==a?h(void 0,void 0,void 0,r,g):h(a.position,a.rotation,a.zoom,r,g)}),d.appendChild(c);let u="Atom Labels",p=m(u,e.addID(l,u),r,e=>r=e);d.appendChild(p);let f="Bond Labels",N=m(f,e.addID(l,f),g,e=>g=e);d.appendChild(N);let x=O("Save as PNG",e.addID(l,nC),nh);x.addEventListener("click",()=>{let e=a.pngURI(),t=document.createElement("a");t.href=e;let s=o.getTitle()?.value;t.download=s.replace(/[^a-z0-9]/gi,"_")+"mol.png",document.body.appendChild(t),t.click(),document.body.removeChild(t),console.log("Save Image")}),d.appendChild(x)}function s$(e,t,s,i,n,a,d,o,l){let r=N(e.id,s),g=U(r,l),h=s+nu,c=s+nm,m=O(c,N(r,C),o);g.appendChild(m),m.classList.add(ny),m.classList.add(nw);let u=N(r,nE),p=n();return void 0==p?(m.textContent=c,m.classList.toggle(ny)):(sK(g,u,s,p,i,n,a,o),m.textContent=h,m.classList.toggle(nw)),m.addEventListener("click",e=>{null==document.getElementById(u)?(sK(g,u,s,p,i,n,a,o),m.textContent=h):(document.getElementById(u)?.remove(),d(),console.log("Removed "+u),m.textContent=c),m.classList.toggle(ny),m.classList.toggle(nw)}),g}function sK(e,t,s,i,n,a,d,o){let l;l=void 0==i?"":w(i);let r=_(t,o);r.addEventListener("change",e=>{let t=e.target,i=sW(!0,s,n,r);try{d(i),console.log(s+" changed from "+l+" to "+t.value)}catch(e){alert("Input invalid, resetting..."),t.value=a().toString()}B(t)}),r.value=l,B(r),e.appendChild(r)}function sW(e,t,s,i){var n;let a,d,o,l=i.value.trim(),r=v(s.values," ");if(""==l)return alert("Empty input resetting..."),i.value=r,s.values;let g=(n=s.values,a=l.split(/\s+/),d=[],o=!0,(a.forEach(function(e){y(e)?d.push(new(u(p))(e)):o=!1}),o)?d:(alert("An input is not a number, resetting..."),n));return g.length==s.values.length?(s.setValues(g),console.log("Changed "+s.tagName+' from: "'+r+'" to: "'+v(s.values," ")+'"')):e?(s.setValues(g),console.log("Changed "+s.tagName+' from: "'+r+'" to: "'+v(s.values," ")+'"')):(alert("Expecting "+s.values.length+" values for, but finding "+g.length+" resetting..."),i.value=r),s.values}class sZ{constructor(){}readFile(){return new Promise((e,t)=>{let s=document.createElement("input");s.type="file";let i=this;s.onchange=function(){if(s.files){let n=s.files[0];n.name;let a=new FileReader,d=0,o="";a.onload=function(s){if(null==s.target){t(Error("Event target is null"));return}if(o+=s.target.result,null!=n){if(d<n.size){let e=n.slice(d,d+1048576);a.readAsText(e),d+=1048576}else{o=o.trim();let t=new DOMParser().parseFromString(o,"text/xml");e(i.parse(t))}}};let l=n.slice(d,d+1048576);a.readAsText(l),d+=1048576}},s.click()})}parse(e){let t=new Map,s=ei(e,tz.tagName),i=new Set;s.childNodes.forEach(function(e){i.add(e.nodeName)});let n=s.getElementsByTagName(sC.tagName),a=n.length;console.log("Number of molecules="+a);let d=0;for(let e=0;e<a;e++){let s,i=es(n[e]),a=i.get(sC.s_id);if(void 0==a)throw Error(sC.s_id+" is undefined");let o=n[e].childNodes;if(0==o.length){if(d++,void 0==i.get("ref"))throw Error("ref is undefined");continue}for(;void 0==(s=sL(!1,a,void 0,t)););let l=new sC(i,s);t.set(s,l);let r=new Set;for(let e=0;e<o.length;e++){let t=o[e];r.has(t.nodeName)?"#text"!=t.nodeName&&console.warn("Another ChildNode with nodeName="+t.nodeName):r.add(t.nodeName)}let g=n[e].getElementsByTagName(tR.tagName);if(g.length>0){if(g.length>1)throw Error("Expecting 1 or 0 "+tR.tagName+" but finding "+g.length+"!");let e=new tR(es(g[0]));l.setMetadataList(e);let t=g[0].getElementsByTagName(tN.tagName);for(let s=0;s<t.length;s++){let i=new tN(es(t[s]));e.addMetadata(i)}r.delete(tR.tagName)}let h=n[e].getElementsByTagName(tU.tagName);if(h.length>1)throw Error("Expecting 1 or 0 "+tU.tagName+" but finding "+h.length+"!");if(1==h.length){let e=h[0],t=e.getElementsByTagName(tG.tagName);if(0==t.length)throw Error("Expecting 1 or more atoms in "+tU.tagName+", but finding 0!");let s=new tU(es(e));l.setAtoms(s);for(let e=0;e<t.length;e++)s.addAtom(new tG(es(t[e]),l));r.delete(tU.tagName)}else{let t=n[e].getElementsByTagName(tG.tagName);if(1==t.length){let e=new tU(new Map);e.addAtom(new tG(es(t[0]),l)),l.setAtoms(e)}else if(t.length>1)throw Error("Expecting 1 "+tG.tagName+" but finding "+t.length+". Should these be in an "+tU.tagName+"?")}r.delete(tG.tagName);let c=n[e].getElementsByTagName(tV.tagName);if(c.length>0){if(c.length>1)throw Error("Expecting 1 or 0 "+tV.tagName+" but finding "+c.length+"!");let e=c[0].getElementsByTagName(tq.tagName),t=new tV(es(c[0]));for(let s=0;s<e.length;s++)t.addBond(new tq(es(e[s]),l));l.setBonds(t),r.delete(tV.tagName)}else{let t=n[e].getElementsByTagName(tq.tagName);if(t.length>0){if(t.length>1)throw Error("Expecting 1 "+tq.tagName+" but finding "+t.length+". Should these be in a "+tV.tagName+"?");let e=new tV(new Map);e.addBond(new tq(es(t[0]),l)),l.setBonds(e)}}r.delete(tq.tagName);let m=n[e].getElementsByTagName(ss.tagName);if(m.length>1)throw Error("Expecting 1 or 0 "+ss.tagName+" but finding "+m.length+"!");if(1==m.length){let e=new ss(es(m[0]));l.setPropertyList(e);let t=m[0].getElementsByTagName(tY.tagName);for(let s=0;s<t.length;s++)e.setProperty(sJ(t[s]));r.delete(ss.tagName)}else{let t=new ss(new Map);l.setPropertyList(t);let s=n[e].getElementsByTagName(tY.tagName);if(1!=s.length)throw Error("Expecting 1 "+tY.tagName+" but finding "+s.length+". Should these be in a "+ss.tagName+"?");t.setProperty(sJ(s[0])),r.delete(tY.tagName)}let u=n[e].getElementsByTagName(so.tagName);if(u.length>0){if(u.length>1)throw Error("Expecting 1 or 0 "+so.tagName+" but finding "+u.length+"!");let e=new so(es(u[0]));l.setEnergyTransferModel(e),r.delete(so.tagName)}let f=n[e].getElementsByTagName(sl.tagName);if(f.length>0){if(f.length>1)throw Error("Expecting 1 or 0 "+sl.tagName+" but finding "+f.length+"!");let e=new sl(es(f[0]));l.setDOSCMethod(e),r.delete(sl.tagName)}let N=n[e].getElementsByTagName(sh.tagName);if(N.length>0){if(N.length>1)throw Error("Expecting 1 or 0 "+sh.tagName+" but finding "+N.length+"!");let e=new sh(es(N[0]));l.setDistributionCalcMethod(e),r.delete(sh.tagName)}let x=n[e].getElementsByTagName(sw.tagName);if(x.length>0){if(x.length>1)throw Error("Expecting 1 or 0 "+sw.tagName+" but finding "+x.length+"!");let e=new sw(es(x[0]));l.setDensityOfStatesList(e);let t=x[0].getElementsByTagName(sy.tagName),s=x[0].getElementsByTagName(tA.tagName);if(s.length>0){if(s.length>1)throw Error("Expecting 1 or 0 "+tA.tagName+" but finding "+s.length+"!");let t=new tA(es(s[0]),Y(X(s[0])));e.setDescription(t)}if(0==t.length)throw Error("Expecting 1 or more "+sy.tagName+" but finding 0!");for(let s=0;s<t.length;s++){let i=new sy(es(t[s]));e.addDensityOfStates(i);let n=t[s].getElementsByTagName(tk.tagName);if(1!=n.length)throw Error("Expecting 1 "+tk.tagName+" but finding "+n.length+"!");{let e=new tk(es(n[0]),new p.Big(Y(X(n[0]))));i.setT(e)}let a=t[s].getElementsByTagName(sx.tagName);if(1!=a.length)throw Error("Expecting 1 "+sx.tagName+" but finding "+a.length+"!");{let e=new sx(es(a[0]),new p.Big(Y(X(a[0]))));i.setQtot(e)}let d=t[s].getElementsByTagName(sv.tagName);if(1!=d.length)throw Error("Expecting 1 "+sv.tagName+" but finding "+d.length+"!");{let e=new sv(es(d[0]),new p.Big(Y(X(d[0]))));i.setSumc(e)}let o=t[s].getElementsByTagName(sE.tagName);if(1!=o.length)throw Error("Expecting 1 "+sE.tagName+" but finding "+o.length+"!");{let e=new sE(es(o[0]),new p.Big(Y(X(o[0]))));i.setSumg(e)}}r.delete(sw.tagName)}let v=n[e].getElementsByTagName(sR.tagName);if(v.length>0){if(v.length>1)throw Error("Expecting 1 or 0 "+sR.tagName+" but finding "+v.length+"!");let e=new sR(es(v[0])),t=v[0].getElementsByTagName(sb.tagName);for(let s=0;s<t.length;s++){let i=new sb(es(t[s]),s);e.addState(i)}l.setStates(e),r.delete(sR.tagName)}r.delete("#text"),r.size>0&&(console.warn("There are additional unexpected moleculeTagNames:"),r.forEach(e=>console.warn(e)))}return console.log("Number of molecules="+t.size),console.log("Number of alias molecules="+d.toString()),t}}function sJ(e){let t=new tY(es(e));return t.dictRef==t$.dictRef?sQ(t,e):t.dictRef==tK.dictRef?sQ(t,e):t.dictRef==tW.dictRef?sQ(t,e):t.dictRef==tZ.dictRef?sQ(t,e):t.dictRef==tJ.dictRef?sQ(t,e):t.dictRef==tQ.dictRef?sQ(t,e):t.dictRef==t0.dictRef?sQ(t,e):t.dictRef==t1.dictRef?sQ(t,e):t.dictRef==t2.dictRef?sQ(t,e):t.dictRef==t3.dictRef?sQ(t,e):t.dictRef==t5.dictRef?sQ(t,e):t.dictRef==t4.dictRef?sQ(t,e):t.dictRef==t6.dictRef?sQ(t,e):t.dictRef==t8.dictRef?sQ(t,e):t.dictRef==t9.dictRef?sQ(t,e):t.dictRef==t7.dictRef?sQ(t,e):t.dictRef==se.dictRef?sQ(t,e):function(e,t){let s=t.getElementsByTagName(tF.tagName);if(s.length>0){if(1!=s.length)throw Error("Expecting 1 "+tF.tagName+" but finding "+s.length+"!");let t=$(s[0]),i=new tF(es(s[0]),t);e.setProperty(i)}else console.log("Expecting "+tF.tagName+" but finding none!")}(t,e),t}function sQ(e,t){let s=t.getElementsByTagName(tH.tagName);if(s.length>0){if(1!=s.length)throw Error("Expecting 1 "+tH.tagName+" but finding "+s.length+"!");let t=$(s[0]),i=new p.Big(t),n=new tH(es(s[0]),i);e.setProperty(n)}else{let s=t.getElementsByTagName(tj.tagName);if(s.length>0){if(1!=s.length)throw Error("Expecting 1 "+tj.tagName+" but finding "+s.length+"!");let t=$(s[0]);if(""!=t){let i=E(t.split(/\s+/)),n=new tj(es(s[0]),i);e.setProperty(n)}}else{let s=t.getElementsByTagName(tX.tagName);if(s.length>0){if(1!=s.length)throw Error("Expecting 1 "+tX.tagName+" but finding "+s.length+"!");let t=E($(s[0]).split(/\s+/)),i=new tX(es(s[0]),t);e.setProperty(i)}else throw Error("Expecting "+tH.tagName+", "+tj.tagName+" or "+tX.tagName+" but finding none!")}}}let s0="https://github.com/MESMER-kinetics",s1=s0+"/mxg",s2=document.createElement("a");s2.href=s1,s2.textContent=s1;let s3=s1+"/tree/main/data/examples",s5=document.createElement("a");s5.href=s3,s5.textContent=s3;let s4=s0+"/MESMER-code",s6=document.createElement("a");s6.href=s4,s6.textContent=s4;let s8=document.createElement("a");s8.href="https://epsrc.ukri.org/",s8.textContent="The UK Engineering and Physical Sciences Research Council (EPSRC)";let s9=document.createElement("a");s9.href="https://www.leeds.ac.uk/",s9.textContent="The University of Leeds";let s7="https://github.com/3dmol/3Dmol.js",ie=document.createElement("a");ie.href=s7,ie.textContent=s7;let it=document.createElement("a");it.href="http://doi.org/10.1093/bioinformatics/btu829",it.textContent="doi:10.1093/bioinformatics/btu829";let is="https://mikemcl.github.io/big.js/",ii=document.createElement("a");ii.href=is,ii.textContent=is;class ia{constructor(){this.tagName="defaults",this.values=new Map,this.attributess=new Map}readFile(){let e=document.createElement("input");e.type="file";let t=this;e.onchange=function(){if(e.files){for(let t=0;t<e.files.length;t++)console.log("inputElement.files["+t+"]="+e.files[t]);let s=e.files[0];console.log(s.name),s.name;let i=new FileReader,n=0,a="";i.onload=function(e){if(null==e.target)throw Error("Event target is null");if(a+=e.target.result,null!=s){if(n<s.size){let e=s.slice(n,n+1048576);i.readAsText(e),n+=1048576}else{a=a.trim();let e=new DOMParser().parseFromString(a,"text/xml");t.parse(e)}}};let d=s.slice(n,n+1048576);i.readAsText(d),n+=1048576}},e.click()}parse(e){let t=ei(e,this.tagName);console.log("Default attributes: "+x(es(t)));let s=t.children;console.log("children.length="+s.length);for(let e=0;e<s.length;e++){let t=s[e],i=t.tagName;console.log("tagName="+i);let n=es(t);if(this.attributess.set(i,n),console.log("Attributes: "+x(n)),"property"==i){let e=t.getAttribute("dictRef");try{let s=ei(t,"scalar").innerHTML;null!=s?(console.log("v="+s),this.values.set(e,s)):console.log("v is null")}catch(e){console.log("Error: "+e)}}else{let e=t.innerHTML;null!=e?(console.log("v="+e),this.values.set(i,e)):console.log("v is null")}}console.log("values: "+x(this.values)),this.attributess.forEach((e,t)=>{console.log("key="+t+" value="+x(e))})}}class id extends W{static{this.tagName="molecule"}static{this.s_ref="ref"}static{this.s_role="role"}constructor(e){super(e,id.tagName),this.ref=e.get(id.s_ref),this.role=e.get(id.s_role)}getRef(){return this.ref}setRef(e){this.ref=e,this.attributes.set("ref",e)}getRole(){return this.role}setRole(e){this.role=e,this.attributes.set("role",e)}}class io extends ee{static{this.tagName="reactant"}static{this.s_deficientReactant="deficientReactant"}static{this.s_excessReactant="excessReactant"}static{this.s_modelled="modelled"}static{this.roleOptions=[io.s_deficientReactant,io.s_excessReactant,io.s_modelled]}constructor(e,t){super(e,io.tagName),this.addNode(t)}getMolecule(){return this.nodes.get(0)}}class il extends ee{static{this.tagName="product"}static{this.roleOptions=["modelled","sink"]}constructor(e,t){super(e,il.tagName),this.addNode(t)}getMolecule(){return this.nodes.get(0)}}class ir extends ee{static{this.tagName="me:transitionState"}static{this.role="transitionState"}constructor(e,t){super(e,ir.tagName),this.addNode(t)}getMolecule(){return this.nodes.get(0)}}class ig extends J{static{this.tagName="me:preExponential"}constructor(e,t){super(e,ig.tagName,t)}}class ih extends J{static{this.tagName="me:activationEnergy"}constructor(e,t){super(e,ih.tagName,t)}}class ic extends J{static{this.tagName="me:TInfinity"}constructor(e,t){super(e,ic.tagName,t)}}class im extends J{static{this.tagName="me:nInfinity"}constructor(e,t){super(e,im.tagName,t)}}class iu extends ee{static{this.tagName="me:MCRCMethod"}constructor(e){super(e,iu.tagName)}}class ip extends iu{static{this.xsiType="me:MesmerILT"}static{this.xsiType2="MesmerILT"}constructor(e,t,s,i,n){super(e),this.index=new Map,void 0!=t&&(this.index.set(ig.tagName,this.index.size),this.addNode(t)),void 0!=s&&(this.index.set(ih.tagName,this.index.size),this.addNode(s)),void 0!=i&&(this.index.set(ic.tagName,this.index.size),this.addNode(i)),void 0!=n&&(this.index.set(im.tagName,this.index.size),this.addNode(n))}getPreExponential(){let e=this.index.get(ig.tagName);if(void 0!=e)return this.nodes.get(e)}setPreExponential(e){let t=this.index.get(ig.tagName);void 0==t?(this.index.set(ig.tagName,this.nodes.size),this.addNode(e)):this.nodes.set(t,e)}getActivationEnergy(){let e=this.index.get(ih.tagName);if(void 0!=e)return this.nodes.get(e)}setActivationEnergy(e){let t=this.index.get(ih.tagName);void 0==t?(this.index.set(ih.tagName,this.nodes.size),this.addNode(e)):this.nodes.set(t,e)}getTInfinity(){let e=this.index.get(ic.tagName);if(void 0!=e)return this.nodes.get(e)}setTInfinity(e){let t=this.index.get(ic.tagName);void 0==t?(this.index.set(ic.tagName,this.nodes.size),this.addNode(e)):this.nodes.set(t,e)}getNInfinity(){let e=this.index.get(im.tagName);if(void 0!=e)return this.nodes.get(e)}setNInfinity(e){let t=this.index.get(im.tagName);void 0==t?(this.index.set(im.tagName,this.nodes.size),this.addNode(e)):this.nodes.set(t,e)}}class iN extends W{static{this.tagName="me:tunneling"}static{this.options=["Eckart","WKB"]}static{this.s_name="name"}constructor(e){super(e,iN.tagName)}getName(){return this.attributes.get(iN.s_name)}setName(e){this.attributes.set(iN.s_name,e)}}class ix extends J{static{this.tagName="me:excessReactantConc"}constructor(e,t){super(e,ix.tagName,t)}}class iv extends J{static{this.tagName="me:val"}constructor(e,t){super(e,iv.tagName,t)}}class iE extends J{static{this.tagName="me:rev"}constructor(e,t){super(e,iE.tagName,t)}}class iy extends J{static{this.tagName="me:Keq"}constructor(e,t){super(e,iy.tagName,t)}}class iw extends ee{static{this.tagName="me:kinf"}constructor(e,t,s,i,n){super(e,iw.tagName),this.index=new Map,void 0!=t&&(this.index.set(tk.tagName,this.nodes.size),this.addNode(t)),void 0!=s&&(this.index.set(iv.tagName,this.nodes.size),this.addNode(s)),void 0!=i&&(this.index.set(iE.tagName,this.nodes.size),this.addNode(i)),void 0!=n&&(this.index.set(iy.tagName,this.nodes.size),this.addNode(n))}getT(){let e=this.index.get(tk.tagName);if(void 0!=e)return this.nodes.get(e)}setT(e){let t=this.index.get(tk.tagName);void 0==t?(this.index.set(tk.tagName,this.nodes.size),this.addNode(e)):this.nodes.set(t,e)}getVal(){let e=this.index.get(iv.tagName);if(void 0!=e)return this.nodes.get(e)}setVal(e){let t=this.index.get(iv.tagName);void 0==t?(this.index.set(iv.tagName,this.nodes.size),this.addNode(e)):this.nodes.set(t,e)}getRev(){let e=this.index.get(iE.tagName);if(void 0!=e)return this.nodes.get(e)}setRev(e){let t=this.index.get(iE.tagName);void 0==t?(this.index.set(iE.tagName,this.nodes.size),this.addNode(e)):this.nodes.set(t,e)}getKeq(){let e=this.index.get(iy.tagName);if(void 0!=e)return this.nodes.get(e)}setKeq(e){let t=this.index.get(iy.tagName);void 0==t?(this.index.set(iy.tagName,this.nodes.size),this.addNode(e)):this.nodes.set(t,e)}getHeader(){let e=[];return e.push("T ("+this.getT()?.attributes.get("units")+")"),e.push("kf ("+this.getVal()?.attributes.get("units")+")"),e.push("krev ("+this.getRev()?.attributes.get("units")+")"),e.push("Keq ("+this.getKeq()?.attributes.get("units")+")"),e}toStringArray(){let e=this.getT(),t=this.getVal(),s=this.getRev(),i=this.getKeq();return[e.value.toString(),t.value.toString(),s.value.toString(),i.value.toString()]}toCSV(){return this.toStringArray().join(",")}}class iR extends ee{static{this.tagName="me:canonicalRateList"}constructor(e,t,s){super(e,iR.tagName),this.index=new Map,this.kinfIndex=new Map,void 0!=t&&(this.index.set(tA.tagName,this.nodes.size),this.addNode(t)),void 0!=s&&s.forEach(e=>{this.kinfIndex.set(this.nodes.size,this.nodes.size),this.addNode(e)})}getDescription(){let e=this.index.get(tA.tagName);if(void 0!=e)return this.nodes.get(e)}setDescription(e){let t=this.index.get(tA.tagName);void 0==t?(this.index.set(tA.tagName,this.nodes.size),this.addNode(e)):this.nodes.set(t,e)}getKinfs(){return Array.from(this.kinfIndex.values()).map(e=>this.nodes.get(e))}addKinf(e){this.kinfIndex.set(this.kinfIndex.size,this.nodes.size),this.addNode(e)}toCSV(){let e="",t=!0;return this.getKinfs().forEach(s=>{t&&(t=!1,e+=s.getHeader().join(",")+"\n"),e+=s.toCSV()+"\n"}),e}}class ib extends ee{static{this.tagName="reaction"}static{this.s_id="id"}constructor(e,t,s,i,n,a,d,o){super(e,ib.tagName),this.index=new Map,this.reactantsIndex=new Map,this.productsIndex=new Map,this.transitionStatesIndex=new Map;let l=e.get(ib.s_id);if(void 0==l)throw Error(ib.s_id+" is undefined!");this.id=l,void 0!=t&&(t.forEach((e,t)=>{this.reactantsIndex.set(e.getMolecule().getRef(),this.nodes.size),this.addNode(e)}),this.index.set(io.tagName,this.reactantsIndex)),void 0!=s&&(s.forEach((e,t)=>{this.productsIndex.set(e.getMolecule().getRef(),this.nodes.size),this.addNode(e)}),this.index.set(il.tagName,this.productsIndex)),void 0!=i&&(this.index.set(iN.tagName,this.nodes.size),this.addNode(i)),void 0!=n&&(n.forEach((e,t)=>{this.transitionStatesIndex.set(e.getMolecule().getRef(),this.nodes.size),this.addNode(e)}),this.index.set(ir.tagName,this.transitionStatesIndex)),void 0!=a&&(this.index.set(iu.tagName,this.nodes.size),this.addNode(a)),void 0!=d&&(this.index.set(ix.tagName,this.nodes.size),this.addNode(d)),void 0!=o&&(this.index.set(iR.tagName,this.nodes.size),this.addNode(o))}addToIndex(e,t){let s=this.index.get(e);if(void 0==s)this.index.set(e,this.nodes.size);else if(s instanceof Map)s.set(t.tagName,this.nodes.size);else{let i=new Map;i.set(this.nodes.get(s).getRef(),s),i.set(t.tagName,this.nodes.size),this.index.set(e,i)}}getReactants(){let e=this.index.get(io.tagName);if(void 0==e)return new Map;let t=new Map;if(e instanceof Map)e.forEach((e,s)=>{t.set(s,this.nodes.get(e))});else{let s=this.nodes.get(e);t.set(s.getMolecule().getRef(),s)}return t}setReactants(e){e.forEach((e,t)=>{this.reactantsIndex.set(e.getMolecule().getRef(),this.nodes.size),this.addNode(e)}),this.index.set(io.tagName,this.reactantsIndex)}getReactant(e){let t=this.reactantsIndex.get(e);if(void 0==t)throw Error(`Reactant with ref ${e} not found`);return this.nodes.get(t)}addReactant(e){this.reactantsIndex.set(e.getMolecule().getRef(),this.nodes.size),this.addNode(e)}removeReactant(e){let t=this.reactantsIndex.get(e);if(void 0==t)throw Error(`Reactant with ref ${e} not found`);this.nodes.delete(t),this.reactantsIndex.delete(e)}getProducts(){let e=this.index.get(il.tagName);if(void 0==e)return new Map;let t=new Map;if(e instanceof Map)e.forEach((e,s)=>{t.set(s,this.nodes.get(e))});else{let s=this.nodes.get(e);t.set(s.getMolecule().getRef(),s)}return t}setProducts(e){e.forEach((e,t)=>{this.productsIndex.set(e.getMolecule().getRef(),this.nodes.size),this.addNode(e)}),this.index.set(il.tagName,this.productsIndex)}getProduct(e){let t=this.productsIndex.get(e);if(void 0==t)throw Error(`Product with ref ${e} not found`);return this.nodes.get(t)}addProduct(e){this.productsIndex.set(e.getMolecule().getRef(),this.nodes.size),this.addNode(e)}removeProduct(e){let t=this.productsIndex.get(e);if(void 0==t)throw Error(`Product with ref ${e} not found`);this.nodes.delete(t),this.productsIndex.delete(e)}getTunneling(){let e=this.index.get(iN.tagName);if(void 0!=e)return this.nodes.get(e)}setTunneling(e){let t=this.index.get(iN.tagName);if(void 0==t)this.index.set(iN.tagName,this.nodes.size),this.addNode(e);else{if(t instanceof Map)throw Error("Tunneling is a map and it is assumed there would be only 1!");this.nodes.set(t,e)}}getTransitionStates(){let e=this.index.get(ir.tagName);if(void 0==e)return new Map;let t=new Map;if(e instanceof Map)e.forEach((e,s)=>{t.set(s,this.nodes.get(e))});else{let s=this.nodes.get(e);t.set(s.getMolecule().getRef(),s)}return t}setTransitionStates(e){e.forEach((e,t)=>{this.transitionStatesIndex.set(e.getMolecule().getRef(),this.nodes.size),this.addNode(e)}),this.index.set(ir.tagName,this.transitionStatesIndex)}getTransitionState(e){let t=this.transitionStatesIndex.get(e);if(void 0==t)throw Error(`Transition state with ref ${e} not found`);return this.nodes.get(t)}addTransitionState(e){this.transitionStatesIndex.set(e.getMolecule().getRef(),this.nodes.size),this.addNode(e)}removeTransitionState(e){let t=this.transitionStatesIndex.get(e);if(void 0==t)throw Error(`Transition State with ref ${e} not found`);this.nodes.delete(t),this.transitionStatesIndex.delete(e)}getMCRCMethod(){let e=this.index.get(iu.tagName);if(void 0!=e)return this.nodes.get(e)}setMCRCMethod(e){let t=this.index.get(iu.tagName);if(void 0==t)this.index.set(iu.tagName,this.nodes.size),this.addNode(e);else{if(t instanceof Map)throw Error("MCRCMethod is a map and it is assumed there would be only 1!");this.nodes.set(t,e)}}getExcessReactantConc(){let e=this.index.get(ix.tagName);if(void 0!=e)return this.nodes.get(e)}setExcessReactantConc(e){let t=this.index.get(ix.tagName);if(void 0==t)this.index.set(ix.tagName,this.nodes.size),this.addNode(e);else{if(t instanceof Map)throw Error("ExcessReactantConc is a map and it is assumed there would be only 1!");this.nodes.set(t,e)}}getCanonicalRateList(){let e=this.index.get(iR.tagName);if(void 0!=e)return this.nodes.get(e)}setCanonicalRateList(e){let t=this.index.get(iR.tagName);if(void 0==t)this.index.set(iR.tagName,this.nodes.size),this.addNode(e);else{if(t instanceof Map)throw Error("CanonicalRateList is a map and it is assumed there would be only 1!");this.nodes.set(t,e)}}getReactantsLabel(){return Array.from(this.getReactants().values()).map(e=>e.getMolecule().getRef()).join(" + ")}getProductsLabel(){return Array.from(this.getProducts().values()).map(e=>e.getMolecule().getRef()).join(" + ")}getLabel(){return this.id+" ("+this.getReactantsLabel()+" -> "+this.getProductsLabel()+")"}getTotalEnergy(e,t,s){return Array.from(s.values()).map(s=>{let i=s.getMolecule().getRef(),n=e(i,t);return void 0==n?(console.log("Molecule with ref "+i+" not found!"),alert("Molecule with ref "+i+" not found. Please add it to the list of molecules.                  In the meantime it will be treated as having an energy of 0."),nK):n.getEnergy()}).reduce((e,t)=>e.add(t),new p.Big(0))}getReactantsEnergy(e,t){return this.getTotalEnergy(e,t,this.getReactants())}getProductsEnergy(e,t){return this.getTotalEnergy(e,t,this.getProducts())}getEnergyUnits(e,t,s){let i=new Set;return(Array.from(s.values()).map(s=>{let n=s.getMolecule().getRef(),a=e(n,t);if(void 0==a)return console.log("molecule with ref "+n+" not found"),alert("Molecule with ref "+n+" not found. Please add it to the list of molecules.                      In the meantime it will be treated as having an energy of 0."),"";{let e=a.getProperty("me:ZPE"),t=e?.attributes.get(tH.s_units);i.add(t||"")}}),i.size>1)?(console.log("Warning: Not all molecules have the same units"),""):Array.from(i)[0]}get(e,t){if(this.index.has(e)){let s=this.index.get(e);if(void 0!=s){if(!(s instanceof Map))return this.nodes.get(s);{let e=s.get(t);if(void 0!=e)return this.nodes.get(e)}}}}}function iC(e,t,s,i,n,a,d){let o=O(np,s.addID(i,io.tagName,C),ng);n.appendChild(o),o.addEventListener("click",()=>{if(0===a.size){alert("Please add a molecule to the moleculeList first.");return}let l=U(void 0);n.insertBefore(l,o);let r=A(nJ(a),S,"",N(i,io.tagName,S),ng);r.classList.add(eu.tagName),l.appendChild(r),r.addEventListener("click",e=>{1===r.options.length&&(alert("As there is only one molecule it will be selected."),r.selectedIndex=0,r.dispatchEvent(new Event("change")))}),r.addEventListener("change",o=>{let g=o.target,h=a.get(g.value),c=new Map,m=h.getID();if(d.has(m)){alert("Molecule already selected as a reactant. Please select a different molecule                 (you may want to add more molecules to the moleculeList)."),l.removeChild(r);return}l.id=s.addID(i,io.tagName,m),c.set(id.s_ref,m);let u=new id(c),p=new io(new Map,u);d.set(m,p),e.addReactant(p),t.textContent=e.getLabel(),console.log("ReactionLabel="+e.getLabel());let f=k(u.getRef()+" role",io.roleOptions,"Role",u.getRole(),N(i,S),nh,ng),x=f.querySelector("select");x?.addEventListener("change",e=>{let t=e.target;u.setRole(t.value),console.log("Set Role to "+t.value),L(t)}),l.appendChild(f),l.removeChild(r),an(l,nh,()=>{n.removeChild(l),d.delete(m),e.removeReactant(m),n9()}),n9()}),1===r.options.length&&(r.selectedIndex=0,r.dispatchEvent(new Event("change")))})}function iS(e,t,s,i,n,a,d){let o=O(np,s.addID(i,il.tagName,C),ng);n.appendChild(o),o.addEventListener("click",()=>{if(0===a.size){alert("Please add a molecule to the moleculeList first.");return}let l=U(void 0);n.insertBefore(l,o);let r=A(nJ(a),S,"",N(i,il.tagName,S),ng);r.classList.add(eu.tagName),l.appendChild(r),r.addEventListener("click",e=>{1===r.options.length&&(alert("As there is only one molecule it will be selected."),r.selectedIndex=0,r.dispatchEvent(new Event("change")))}),r.addEventListener("change",o=>{let g=o.target,h=a.get(g.value),c=new Map,m=h.getID();if(d.has(m)){alert("Molecule already selected as a product. Please select a different molecule (you may want to add more molecules to the moleculeList)."),l.removeChild(r);return}l.id=s.addID(i,il.tagName,m),c.set(id.s_ref,m);let u=new id(c),p=new il(new Map,u);d.set(m,p),e.addProduct(p),t.textContent=e.getLabel(),console.log("ReactionLabel="+e.getLabel());let f=k(u.getRef()+" role",il.roleOptions,"Role",u.getRole(),N(i,S),nh,ng),x=f.querySelector("select");x?.addEventListener("change",e=>{let t=e.target;u.setRole(t.value),console.log("Set Role to "+t.value),L(t)}),l.appendChild(f),l.removeChild(r),an(l,nh,()=>{n.removeChild(l),d.delete(m),e.removeProduct(m),n9()}),n9()}),1===r.options.length&&(r.selectedIndex=0,r.dispatchEvent(new Event("change")))})}function iM(e,t,s,i,n){let a=O(np,e.addID(t,ir.tagName,C),ng);s.appendChild(a),a.addEventListener("click",()=>{if(0===i.size){alert("Please add a molecule to the moleculeList first.");return}let d=U(void 0);s.insertBefore(d,a);let o=A(nJ(i),S,"",N(t,ir.tagName,S),ng);o.classList.add(eu.tagName),d.appendChild(o),o.addEventListener("click",e=>{1===o.options.length&&(alert("As there is only one molecule it will be selected."),o.selectedIndex=0,o.dispatchEvent(new Event("change")))}),o.addEventListener("change",a=>{let l=a.target,r=i.get(l.value),g=new Map,h=r.getID();if(n.has(h)){alert("Molecule already selected as a transitionState. Please select a different molecule (you may want to add more molecules to the moleculeList)."),s.removeChild(o);return}d.id=e.addID(t,ir.tagName,h),g.set(id.s_ref,h);let c=new id(g),m=new ir(new Map,c);n.set(h,m);let u=q(c.getRef()+" role "+ir.role,ng);d.appendChild(u),d.removeChild(o),an(d,nh,()=>{d.removeChild(s),n.delete(h)})}),1===o.options.length&&(o.selectedIndex=0,o.dispatchEvent(new Event("change")))})}function iT(e,t,s,i,n,a){e.removeChild(t),s.removeIDs(i),s.removeIDs(N(i,nx)),s.removeIDs(N(i,io.tagName)),n.delete(a.id),o.getReactionList().removeReaction(a.id)}function iI(e,t,s,i,n){let a=G(i.addID(t.id,eu.tagName));M(i.addID(t.id,eu.tagName,nx),t,null,a,eu.tagName,nh,ng);let d=O(np,i.addID(t.id,eu.tagName,C),ng);if(a.appendChild(d),d.addEventListener("click",()=>{let s=new eu(new Map,nS),o=e.addBathGas(s),l=U(void 0,ng),r=i.addID(t.id,eu.tagName,o.toString()),g=iq(Array.from(nJ(n)),s,!0,r);g.classList.add(eu.tagName),l.appendChild(g),an(l,nh,t=>{a.removeChild(l),i.removeIDs(r),e.removeBathGas(t)}),a.insertBefore(l,d)}),null!=s){let o=Array.from(s.children).filter(e=>e.tagName===eu.tagName);if(o.length>0)for(let s=0;s<o.length;s++){let l=new eu(es(o[s]),Y(X(o[s]))),r=e.addBathGas(l),g=i.addID(t.id,eu.tagName,r.toString()),h=U(g,ng);h.appendChild(iq(Array.from(nJ(n)),l,!1,g)),an(h,nh,t=>{a.removeChild(h),i.removeIDs(g),e.removeBathGas(t)}),a.insertBefore(h,d)}else{let s=U(void 0,ng),o=i.addID(t.id,eu.tagName,0);s.appendChild(iq(Array.from(nJ(n)),void 0,!1,o)),an(s,nh,t=>{a.removeChild(s),i.removeIDs(o),e.removeBathGas(t)}),a.insertBefore(s,d)}}}function iz(e,t,s,i,n){let a=nJ(n),d=i.addID(t.id,eE.tagName),o=G(d);M(i.addID(t.id,d,nx),t,null,o,eE.tagName,nh,ng);let l=new eE(new Map);if(s){let i=s.getElementsByTagName(eE.tagName);if(i.length>0){if(i.length>1)throw Error("Expecting 1 "+eE.tagName+" but finding "+i.length+"!");let s=es(i[0]),n=i[0].getElementsByTagName(ev.tagName);if(0==n.length)console.warn("Expecting 1 or more "+ev.tagName+" but finding 0! Please add some PTpairs in "+ey.tagName+" "+e.id+".");else{l=new eE(s);for(let e=0;e<n.length;e++){let s=new ev(es(n[e]));l.add(s);let i=n[e].getElementsByTagName(eu.tagName);i.length>0&&(i.length>1&&console.warn("xml_bathGass.length="+i.length),s.setBathGas(new eu(es(i[0]),Y(X(i[0])))));let d=n[e].getElementsByTagName(ep.tagName);d.length>0&&(d.length>1&&console.warn("xml_experimentRates.length="+d.length),s.setExperimentalRate(new ep(es(d[0]),new(u(p))(Y(X(d[0])).trim()))));let r=n[e].getElementsByTagName(ef.tagName);r.length>0&&(r.length>1&&console.warn("xml_experimentalYields.length="+r.length),s.setExperimentalYield(new ef(es(r[0]),new(u(p))(Y(X(r[0])).trim()))));let g=n[e].getElementsByTagName(eN.tagName);g.length>0&&(g.length>1&&console.warn("xml_experimentalEigenvalues.length="+g.length),s.setExperimentalEigenvalue(new eN(es(g[0]),new(u(p))(Y(X(g[0])).trim())))),o.appendChild(iP(l,o,s,t.id,e,a,ng))}}}}e.setPTs(l);let r=G(void 0,ng);o.appendChild(r);let g=O(np,void 0,nh);r.appendChild(g),g.addEventListener("click",()=>{let e=new Map;e.set("units","Torr");let s=new ev(e),i=l.add(s);console.log("Added new pTpair pTpairIndex="+i),o.insertBefore(iP(l,o,s,t.id,i,a,ng),r)});let h=O(nN,void 0,nh);r.appendChild(h),h.addEventListener("click",()=>{let e=U(void 0,ng),s=z("text",nA(eE.tagName,"addFromSpreadsheet"),ng);e.appendChild(s),o.insertBefore(e,r),s.addEventListener("change",()=>{if(console.log("inputElement.value="+s.value),console.log("inputElement.value.length="+s.value.length),s.value.length>0){let i=s.value.split(" "),n=new Map;i[0].split("	").forEach((e,t)=>{n.set(e,t)}),console.log("pTpairsArray.length="+i.length);for(let e=1;e<i.length;e++){let s=i[e].split("	"),d=n.get("P"),g=new(u(p))(s[d]),h=n.get("units"),c=new Map;if(n.has("units")){let e=s[h];c.set("units",e)}let m=new ev(c);l.add(m);let f=n.get("T"),N=new(u(p))(s[f]);if(m.setP(g),m.setT(N),n.has(ev.s_excessReactantConc)){let e=s[n.get(ev.s_excessReactantConc)];c.set(ev.s_excessReactantConc,e)}if(n.has(ev.s_percentExcessReactantConc)){let e=s[n.get(ev.s_percentExcessReactantConc)];c.set(ev.s_percentExcessReactantConc,e)}if(n.has(ev.s_precision)){console.log("index.has(PTpair.s_precision)");let e=s[n.get(ev.s_precision)];c.set(ev.s_precision,e)}if(n.has(eu.tagName)){let e=s[n.get(eu.tagName)];m.setBathGas(new eu(new Map,e))}if(n.has(ep.tagName)){let e=s[n.get(ep.tagName)];if(e.length>0){c.set(ep.tagName,e),m.setExperimentalRate(new ep(new Map,new(u(p))(e)));let t=s[n.get(ep.tagName+"_"+ep.s_ref1)];m.getExperimentalRate()?.setRef1(t);let i=s[n.get(ep.tagName+"_"+ep.s_ref2)];m.getExperimentalRate()?.setRef2(i);let a=s[n.get(ep.tagName+"_"+ep.s_refReaction)];m.getExperimentalRate()?.setRefReaction(a);let d=s[n.get(ep.tagName+"_"+ep.s_error)];m.getExperimentalRate()?.setError(new(u(p))(d))}}if(n.has(ef.tagName)){let e=s[n.get(ef.tagName)];if(e.length>0){m.setExperimentalYield(new ef(new Map,new(u(p))(e)));let t=s[n.get(ef.tagName+"_"+ef.s_ref)];m.getExperimentalYield()?.setRef(t);let i=s[n.get(ef.tagName+"_"+ef.s_yieldTime)];m.getExperimentalYield()?.setYieldTime(new(u(p))(i));let a=s[n.get(ef.tagName+"_"+ef.s_error)];m.getExperimentalYield()?.setError(new(u(p))(a))}}if(n.has(eN.tagName)){let e=s[n.get(eN.tagName)];if(e.length>0){m.setExperimentalEigenvalue(new eN(new Map,new(u(p))(e)));let t=s[n.get(eN.tagName+"_"+eN.s_EigenvalueID)];m.getExperimentalEigenvalue()?.setEigenvalueID(t);let i=s[n.get(eN.tagName+"_"+eN.s_error)];m.getExperimentalEigenvalue()?.setError(new(u(p))(i))}}let x=l.ptps.length-1;o.insertBefore(iP(l,o,m,t.id,x,a,ng),r)}o.removeChild(e)}})});let c=O("Remove All",void 0,nh);r.appendChild(c),c.addEventListener("click",()=>{l.clear();let e=o.firstChild;for(;null!=e&&e!=r;){let t=e.nextSibling;o.removeChild(e),e=t}})}function i_(e,t,s){let i=O(np,void 0,ng);return e.appendChild(i),i.addEventListener("click",n=>{let a,d=o.getNextConditionsID();console.log("Add Conditions "+d.toString());let l=t.addID(ey.tagName,d.toString()),r=G(l,nh),g=nA(l,nx);if(d>0){let t=document.getElementById(N(ey.tagName,(d-1).toString(),nx)).nextElementSibling;a=null!=t&&t.parentElement==e?t:i}else a=i;M(g,e,a,r,ey.tagName+" "+d.toString(),nh,ng);let h=iD(new Map,d);iI(h,r,null,t,s),iz(h,r,null,t,s),an(r,ng,o.removeConditions.bind(o),d).addEventListener("click",e=>{nk(g),t.removeIDs(l)})}),i}function iD(e,t){let s=new ey(e,t);return o.addConditions(s),s}function iP(e,t,s,i,n,a,d){let o=U(nA(t.id,n),d);return iL(o,ev.s_P,s.getP.bind(s),s.setP.bind(s)),ad(tB.pressureUnits,s.attributes,o,null,ev.tagName,ev.tagName,nh,ng),iL(o,ev.s_T,s.getT.bind(s),s.setT.bind(s)),iA(o,s,ev.s_excessReactantConc,iG),function(e,t){let s=nA(e.id,ev.s_percentExcessReactantConc),i=G(s,nh);e.appendChild(i);let n=ev.s_percentExcessReactantConc,a=n+nu,d=n+nm,o=O(d,nA(s,C),nh);i.appendChild(o),o.classList.add(ny),o.classList.add(nw),t.attributes.get(n)?.toLowerCase()=="true"?(o.classList.toggle(nw),o.textContent=a):(o.classList.toggle(ny),o.textContent=d),o.addEventListener("click",e=>{o.classList.toggle(ny),o.classList.toggle(nw),o.textContent===d?(o.textContent=a,t.attributes.set(n,"true")):(o.textContent=d,t.attributes.delete(n))})}(o,s),iA(o,s,ev.s_precision,iO),function(e,t,s){let i=nA(e.id,eu.tagName),n=G(i,nh);e.appendChild(n);let a=eu.tagName,d=a+nu,o=a+nm,l=O(o,nA(i,C),nh);n.appendChild(l),l.classList.add(ny),l.classList.add(nw);let r=nA(i,nE),g=t.getBathGas();void 0==g?(l.classList.toggle(ny),l.textContent=o):(l.classList.toggle(nw),l.textContent=d,!1==s.has(g.value)&&console.warn("moleculeKeys does not contain "+g.value),n.appendChild(iU(r,t,g,!1,s))),l.addEventListener("click",e=>{l.classList.toggle(ny),l.classList.toggle(nw),l.textContent===o?(l.textContent=d,n.appendChild(iU(r,t,g,!1,s))):(l.textContent=o,nk(r))})}(o,s,a),ik(o,s,n,ep.tagName,e=>e.getExperimentalRate(),iV),ik(o,s,n,ef.tagName,e=>e.getExperimentalYield(),iF),ik(o,s,n,eN.tagName,e=>e.getExperimentalEigenvalue(),iH),an(o,nh,(s,i,n)=>{t.removeChild(s),void 0!==i&&e.remove(i),n.removeBathGas()},o,n,s),o}function iL(e,t,s,i){let n=I("text",ev.tagName+"_"+t,nh,nr,e=>{let n=e.target;try{i(new(u(p))(n.value)),console.log(`Set ${t} to ${n.value}`)}catch(e){alert("Invalid input, resetting..."),a.value=iB(s)}P(n)},iB(s),t),a=n.querySelector("input");a.value=iB(s),P(a),e.appendChild(n)}function iB(e){let t=e();return void 0!==t?t.toString():""}function iA(e,t,s,i){let n=nA(e.id,s),a=G(n,nh);e.appendChild(a);let d=s+nu,o=s+nm,l=O(o,nA(n,C),nh);a.appendChild(l),l.classList.add(ny),l.classList.add(nw);let r=nA(n,nE);if(t.attributes.has(s)){l.classList.toggle(nw),l.textContent=d;let e=i(r,t);a.insertBefore(e,l.nextSibling)}else l.classList.toggle(ny),l.textContent=o;l.addEventListener("click",e=>{if(l.classList.toggle(ny),l.classList.toggle(nw),l.textContent===o){l.textContent=d;let e=i(r,t);a.insertBefore(e,l.nextSibling)}else l.textContent=o,nk(r)})}function ik(e,t,s,i,n,a){let d=nA(e.id,i),o=G(d,nh);e.appendChild(o);let l=i+nu,r=i+nm,g=O(r,nA(d,C),nh);o.appendChild(g),g.classList.add(ny),g.classList.add(nw);let h=nA(d,nE);void 0==n(t)?(g.classList.toggle(ny),g.textContent=r):(g.classList.toggle(nw),g.textContent=l,o.appendChild(a(h,t,s))),g.addEventListener("click",e=>{g.classList.toggle(ny),g.classList.toggle(nw),g.textContent===r?(g.textContent=l,o.appendChild(a(h,t,s))):(g.textContent=r,nk(h))})}function iO(e,t){let s;s=t.attributes.has(ev.s_precision)?t.attributes.get(ev.s_precision):tB.precisionOptions[0];let i=A(tB.precisionOptions,ev.s_precision,s,e,nh);return i.addEventListener("change",e=>{let s=e.target;t.setPrecision(s.value),console.log("Set "+ev.s_precision+" to "+s.value),L(s)}),L(i),i}function iG(e,t){let s,i=z("number",e,nh);return s=t.attributes.has(ev.s_excessReactantConc)?t.attributes.get(ev.s_excessReactantConc):NaN.toString(),console.log(ev.s_excessReactantConc+"="+s),i.value=s,i.addEventListener("change",e=>{let s=e.target;t.setExcessReactantConc(s.value),console.log("Set "+ev.s_excessReactantConc+" to "+s.value),P(s)}),P(i),i}function iU(e,t,s,i,n){let a=iq(Array.from(n),s,i,e);return a.addEventListener("change",e=>{let s=e.target;t.setBathGas(new eu(new Map,s.value)),console.log("Set bathGas to "+s.value),L(s)}),L(a),a}function iq(e,t,s,i){let n;if(s)e.push(nS);else{let t=e.indexOf(nS);t>-1&&e.splice(t,1)}void 0==t?(t=new eu(new Map,nS),n=nS):n=t.value;let a=A(e,eu.tagName,n,nA(i,S),nh);return a.classList.add(eu.tagName),ao(e,a),a.addEventListener("change",e=>{let s=e.target;t.value=s.value,console.log("Added "+s.value+" as "+eu.tagName),L(s)}),a.value=n,L(a),a}function iV(e,t){return ij(t,e,e=>e.getExperimentalRate(),(e,t)=>e.setExperimentalRate(t),ep,[{tagName:ep.tagName,type:"number",eventHandler:(e,s)=>ap(t.getExperimentalRate(),s),valueGetter:()=>t.getExperimentalRate().value.toString()},{tagName:ep.tagName+"_"+ep.s_ref1,type:"text",eventHandler:(e,s)=>t.getExperimentalRate()?.setRef1(s.value),valueGetter:()=>t.getExperimentalRate().getRef1()},{tagName:ep.tagName+"_"+ep.s_ref2,type:"text",eventHandler:(e,s)=>t.getExperimentalRate()?.setRef2(s.value),valueGetter:()=>t.getExperimentalRate().getRef2()},{tagName:ep.tagName+"_"+ep.s_refReaction,type:"text",eventHandler:(e,s)=>t.getExperimentalRate()?.setRefReaction(s.value),valueGetter:()=>t.getExperimentalRate().getRefReaction()},{tagName:ep.tagName+"_"+ep.s_error,type:"number",eventHandler:(e,s)=>t.getExperimentalRate()?.setError(new(u(p))(s.value)),valueGetter:()=>t.getExperimentalRate().getError().toString()}])}function iF(e,t){return ij(t,e,e=>e.getExperimentalYield(),(e,t)=>e.setExperimentalYield(t),ef,[{tagName:ef.tagName,type:"number",eventHandler:(e,s)=>ap(t.getExperimentalYield(),s),valueGetter:()=>t.getExperimentalYield().value.toString()},{tagName:ef.tagName+"_"+ef.s_ref,type:"text",eventHandler:(e,s)=>t.getExperimentalYield()?.setRef(s.value),valueGetter:()=>t.getExperimentalYield().getRef()},{tagName:ef.tagName+"_"+ef.s_yieldTime,type:"number",eventHandler:(e,s)=>t.getExperimentalYield()?.setYieldTime(new(u(p))(s.value)),valueGetter:()=>t.getExperimentalYield().getYieldTime().toString()},{tagName:ef.tagName+"_"+ef.s_error,type:"number",eventHandler:(e,s)=>t.getExperimentalYield()?.setError(new(u(p))(s.value)),valueGetter:()=>t.getExperimentalYield().getError().toString()}])}function iH(e,t){return ij(t,e,e=>e.getExperimentalEigenvalue(),(e,t)=>e.setExperimentalEigenvalue(t),eN,[{tagName:eN.tagName,type:"number",eventHandler:(e,s)=>ap(t.getExperimentalEigenvalue(),s),valueGetter:()=>t.getExperimentalEigenvalue().value.toString()},{tagName:eN.tagName+"_"+eN.s_EigenvalueID,type:"text",eventHandler:(e,s)=>t.getExperimentalEigenvalue()?.setEigenvalueID(s.value),valueGetter:()=>t.getExperimentalEigenvalue().getEigenvalueID()},{tagName:eN.tagName+"_"+eN.s_error,type:"number",eventHandler:(e,s)=>t.getExperimentalEigenvalue()?.setError(new(u(p))(s.value)),valueGetter:()=>t.getExperimentalEigenvalue().getError().toString()}])}function ij(e,t,s,i,n,a){let d=G(void 0,nh);d.id=t;let o=s(e);for(let s of(void 0==o&&i(e,o=new n(new Map,nK)),a)){let e=t+"_"+s.tagName;d.appendChild(I(s.type,e,nh,nr,e=>{let t=e.target;s.eventHandler(e,t),console.log("Set "+s.tagName+" to "+t.value),P(t)},s.valueGetter(),s.label||""))}return d}function iX(e,t){let s=new tT(e,t);return o.addModelParameters(s),s}function iY(e){let t,s;if(void 0!=l){let i=l.values.get(e)??"";t=""==i?nK:new(u(p))(i),s=l.attributess.get(e)??new Map}else console.log(e+" set using hardcoded default."),t=new(u(p))(101),(s=new Map).set(n_,"cm-1");return new tb(s,t)}function i$(e,t,s,i,n,a,d){let o,l,r=n.tagName,g=U(t.addID(i.id,r),ng);i.appendChild(g);let h=r+nu,c=r+nm,m=O(r,t.addID(i.id,r,C),nh);m.classList.add(ny),m.classList.add(nw),g.appendChild(m);let f=t.addID(i.id,r,nE);if(null!=s){let t=s.getElementsByTagName(r);if(1==t.length){l=Y(X(t[0]));let s=new(u(p))(l);o=new n(es(t[0]),s),m.textContent=h,iK(e,g,o,f,l,a,void 0),m.classList.toggle(nw)}else l="",o=new n(new Map,nK),m.textContent=c,m.classList.toggle(ny)}else l="",o=new n(new Map,nK),m.textContent=c,m.classList.toggle(ny);m.addEventListener("click",()=>{e.index.has(r)?(d(),nk(f),t.removeIDs(f),m.textContent=c):(iK(e,g,o,f,l,a,void 0),m.textContent=h),m.classList.toggle(ny),m.classList.toggle(nw)})}function iK(e,t,s,i,n,a,d){a.call(e,s);let o=z("text",i,nh);t.appendChild(o),o.addEventListener("change",e=>{let t=e.target;ap(s,t),P(t)}),o.value=n,P(o),ad(d,s.attributes,t,o,N(i,n_),s.constructor.tagName,nh,nh)}function iW(e,t){let s=O(np,void 0,ng),i=tT.tagName;return e.appendChild(s),s.addEventListener("click",n=>{let a,d=o.getNextModelParametersID();console.log("Add "+i+d.toString());let l=nA(i,d.toString()),r=G(l,nh),g=nA(l,nx);if(d>0){let t=document.getElementById(N(i,(d-1).toString(),nx)).nextElementSibling;a=null!=t&&t.parentElement==e?t:s}else a=s;M(g,e,a,r,i+" "+d.toString(),nh,ng);let h=iX(new Map,d);(function(e,t,s){let i,n=tb.tagName,a=U(s.addID(t.id,n),ng);t.appendChild(a);let d=n+nu,o=n+nm,l=O(n,s.addID(t.id,n,C),nh);l.classList.add(ny),l.classList.add(nw),a.appendChild(l);let r=s.addID(t.id,n,nE);l.textContent=o,l.classList.toggle(ny),l.addEventListener("click",()=>{e.index.has(tb.tagName)?(console.log("Removing GrainSize input"),e.removeGrainSize(),document.getElementById(r)?.remove(),document.getElementById(N(r,n_))?.remove(),l.textContent=o):(console.log("Adding GrainSize input"),i=iY(n),e.setGrainSize(i),iK(e,a,i,r,i.value.toString(),e.setGrainSize,tB.energyUnits),l.textContent=d),l.classList.toggle(ny),l.classList.toggle(nw)})})(h,r,t),i$(h,t,null,r,tm,h.setAutomaticallySetMaxEne,h.removeAutomaticallySetMaxEne),i$(h,t,null,r,tS,h.setEnergyAboveTheTopHill,h.removeEnergyAboveTheTopHill),i$(h,t,null,r,tM,h.setMaxTemperature,h.removeMaxTemperature),an(r,ng,o.removeModelParameters.bind(o),d).addEventListener("click",e=>{nk(g),t.removeIDs(l)})}),s}function iZ(e){return[{class:ew,setMethod:e.setCalculateRateCoefficientsOnly,removeMethod:e.removeCalculateRateCoefficientsOnly},{class:eR,setMethod:e.setPrintCellDOS,removeMethod:e.removePrintCellDOS},{class:eb,setMethod:e.setPrintCellTransitionStateFlux,removeMethod:e.removePrintCellTransitionStateFlux},{class:eC,setMethod:e.setPrintReactionOperatorColumnSums,removeMethod:e.removePrintReactionOperatorColumnSums},{class:eS,setMethod:e.setPrintGrainBoltzmann,removeMethod:e.removePrintGrainBoltzmann},{class:eM,setMethod:e.setPrintGrainDOS,removeMethod:e.removePrintGrainDOS},{class:eT,setMethod:e.setPrintGrainkbE,removeMethod:e.removePrintGrainkbE},{class:eI,setMethod:e.setPrintGrainkfE,removeMethod:e.removePrintGrainkfE},{class:ez,setMethod:e.setPrintTSsos,removeMethod:e.removePrintTSsos},{class:e_,setMethod:e.setPrintGrainedSpeciesProfile,removeMethod:e.removePrintGrainedSpeciesProfile},{class:eD,setMethod:e.setPrintGrainTransitionStateFlux,removeMethod:e.removePrintGrainTransitionStateFlux},{class:eP,setMethod:e.setPrintReactionOperatorSize,removeMethod:e.removePrintReactionOperatorSize},{class:eL,setMethod:e.setPrintSpeciesProfile,removeMethod:e.removePrintSpeciesProfile},{class:eB,setMethod:e.setPrintPhenomenologicalEvolution,removeMethod:e.removePrintPhenomenologicalEvolution},{class:eA,setMethod:e.setPrintTunnelingCoefficients,removeMethod:e.removePrintTunnelingCoefficients},{class:ek,setMethod:e.setPrintCrossingCoefficients,removeMethod:e.removePrintCrossingCoefficients},{class:eO,setMethod:e.setTestDOS,removeMethod:e.removeTestDOS},{class:eG,setMethod:e.setTestRateConstants,removeMethod:e.removeTestRateConstants},{class:eU,setMethod:e.setUseTheSameCellNumberForAllConditions,removeMethod:e.removeUseTheSameCellNumberForAllConditions},{class:eq,setMethod:e.setForceMacroDetailedBalance,removeMethod:e.removeForceMacroDetailedBalance}]}function iJ(e){return[{class:tg,setMethod:e.setEigenvalues,removeMethod:e.removeEigenvalues},{class:th,setMethod:e.setShortestTimeOfInterest,removeMethod:e.removeShortestTimeOfInterest},{class:tc,setMethod:e.setMaximumEvolutionTime,removeMethod:e.removeMaximumEvolutionTime},{class:tm,setMethod:e.setAutomaticallySetMaxEne,removeMethod:e.removeAutomaticallySetMaxEne},{class:tu,setMethod:e.setDiagramEnergyOffset,removeMethod:e.removeDiagramEnergyOffset}]}function iQ(e,t){let s=O(np,void 0,ng);return e.appendChild(s),s.addEventListener("click",i=>{let n,a=o.getNextControlID();console.log("Add Control "+a.toString());let d=t.addID(tf.tagName,a.toString()),l=G(d,nh);if(a>0){let t=document.getElementById(N(tf.tagName,(a-1).toString(),nx)).nextElementSibling;n=null!=t&&t.parentElement==e?t:s}else n=s;let r=t.addID(d,nx);M(r,e,n,l,tf.tagName+" "+a.toString(),nh,ng);let g=i0(new Map,a),h=new Map;iZ(g).forEach(e=>{i2(g,l,t,h,null,null,e.class,e.setMethod,e.removeMethod)});let c=U(void 0,ng);new Map([...h.entries()].sort()).forEach(e=>{c.appendChild(e)}),l.appendChild(c),i5(g,l,t,null,ng),i3(g,l,t,null,ng),iJ(g).forEach(e=>{i2(g,l,t,h,null,ng,e.class,e.setMethod,e.removeMethod,!0)}),an(l,ng,o.removeControl.bind(o),a).addEventListener("click",e=>{nk(r),t.removeIDs(d);let s=N(d,eF.tagName);t.removeIDs(s);let i=N(s,"details");t.removeIDs(i);let n=N(i,"select");t.removeIDs(n)})}),s}function i0(e,t){let s=new tf(e,t);return o.addControl(s),s}function i1(e,t,s,i,n,a){i.call(e,s);let d=z("number",n,nh);d.addEventListener("change",e=>{let t=e.target;ap(s,t),P(t)}),d.value=a,P(d),t.appendChild(d)}function i2(e,t,s,i,n,a,d,o,l,r=!1){let g,h,c,m=d.tagName,f=m+nu,N=m+nm,x=O(N,void 0,nh);if(x.classList.add(ny),x.classList.add(nw),i&&i.set(m,x),a&&(h=U(c=s.addID(t.id,m),a),t.appendChild(h),h.appendChild(x),c=s.addID(t.id,c,nE)),n){let t=n.getElementsByTagName(m);if(1==t.length){if(r){let s,i=Y(X(t[0]));s=new(u(p))("all"==i?0:i),g=new d(es(t[0]),s),i1(e,h,g,o,c,i)}else g=new d(es(t[0])),o.call(e,g);x.textContent=f,x.classList.toggle(nw)}else x.textContent=N,x.classList.toggle(ny)}else g=new d(new Map),x.textContent=N,x.classList.toggle(ny);x.addEventListener("click",t=>{e.index.has(m)?(r&&nk(c),l.call(e),x.textContent=N):(r?i1(e,h,g,o,c,""):o.call(e,g),x.textContent=f),x.classList.toggle(ny),x.classList.toggle(nw)})}function i3(e,t,s,i,n){let a,d=U(void 0,n);t.appendChild(d);let o=eF.tagName,l=o+nu,r=o+nm,g=O(r,void 0,nh);d.appendChild(g),g.classList.add(ny),g.classList.add(nw);let h=s.addID(t.id,o),c=U(h,nh);d.appendChild(c);let m=eF.options,f=s.addID(h,"details"),N=s.addID(f,"select");if(null!=i){let t=i.getElementsByTagName(o);if(t.length>0){if(t.length>1)throw Error("More than one CalcMethod element.");let i=es(t[0]),n=i.get("xsi:type");a=function e(t,s,i,n,a,d,o,l,r,g){let h;let c=ns(t,s,i,a,o,l,r,g);c.value=l,i.appendChild(c);let m=U(r,nh);if(i.appendChild(m),l==eH.xsi_type||l==eH.xsi_type2)h=new eH(d);else if(l==ej.xsi_type||l==ej.xsi_type2)h=new ej(d);else if(l==eY.xsi_type||l==eY.xsi_type2){let e=new eY(d);h=e;let t=n[0].getElementsByTagName(eX.tagName);if(t.length>0){if(1==t.length){let s=new(u(p))(Y(X(t[0]))),i=new eX(es(t[0]),s);e.setFittingIterations(i)}else throw Error("More than one FittingIterations element.")}i6(m,e)}else if(l==eZ.xsi_type||l==eZ.xsi_type2){let e=new eZ(d);function f(e,t,s){let i=e$.tagName,n=e[0].getElementsByTagName(i);if(n.length>0){if(1==n.length){let e=new(u(p))(Y(X(n[0])));s(new t(es(n[0]),e))}else throw Error(`More than one ${i} element.`)}}h=e,f(n,e$,e.setMarquardtIterations.bind(e)),f(n,eK,e.setMarquardtTolerance.bind(e)),f(n,eW,e.setMarquardtDerivDelta.bind(e)),i8(m,e)}else if(l==e7.xsi_type||l==e7.xsi_type2){let e=new e7(d);function f(e,t,s,i){let n=t.tagName,a=e[0].getElementsByTagName(n);if(a.length>0){if(1==a.length){let e=Y(X(a[0]));i&&void 0!=e&&""!=e&&"NaN"!=e&&(e=new(u(p))(e)),s(new t(es(a[0]),e))}else throw Error(`More than one ${n} element.`)}}h=e,f(n,eQ,e.setFormat.bind(e),!1),f(n,e0,e.setPrecision.bind(e),!1),f(n,e1,e.setChebNumTemp.bind(e),!0),f(n,e2,e.setChebNumConc.bind(e),!0),f(n,e3,e.setChebMaxTemp.bind(e),!0),f(n,e5,e.setChebMinTemp.bind(e),!0),f(n,e4,e.setChebMaxConc.bind(e),!0),f(n,e6,e.setChebMinConc.bind(e),!0),f(n,e8,e.setChebTExSize.bind(e),!0),f(n,e9,e.setChebPExSize.bind(e),!0),i9(m,e)}else if(l==tn.xsi_type||l==tn.xsi_type2){let e=new tn(d);function f(e,t,s){let i=t.tagName,n=e[0].getElementsByTagName(i);if(n.length>0){if(1==n.length){let e=new(u(p))(Y(X(n[0])));s(new t(es(n[0]),e))}else throw Error(`More than one ${i} element.`)}}h=e,f(n,te,e.setTmin.bind(e)),f(n,tt,e.setTmid.bind(e)),f(n,ts,e.setTmax.bind(e)),f(n,ti,e.setTstep.bind(e)),i7(m,e)}else if(l==tr.xsi_type||l==tr.xsi_type2){let e=new tr(d);function f(e,t,s){let i=t.tagName,n=e[0].getElementsByTagName(i);if(n.length>0){if(1==n.length){let e=Y(X(n[0]));void 0!=e&&(e=new(u(p))(e)),s(new t(es(n[0]),e))}else throw Error(`More than one ${i} element.`)}}h=e,f(n,ta,e.setSensitivityAnalysisSamples.bind(e)),f(n,td,e.setSensitivityAnalysisOrder.bind(e)),f(n,to,e.setSensitivityNumVarRedIters.bind(e)),f(n,tl,e.setSensitivityVarRedMethod.bind(e)),nt(m,e)}else{let h=d.get("name");if(void 0!=h&&h!==l)return d.set("xsi:type",h),console.warn(`Using name attribute as xsi:type: ${h}`),e(t,s,i,n,a,d,o,h,r,g);throw Error(`Unable to determine calculation method for xsi_type: ${l}`)}return h}(s,e,c,t,m,i,o,n,f,N),e.setCalcMethod(a),g.classList.toggle(nw),g.textContent=l}else g.classList.toggle(ny),g.textContent=r}else g.classList.toggle(ny),g.textContent=r;g.addEventListener("click",t=>{if(e.index.has(o))null!=e.getCalcMethod()&&(e.removeCalcMethod(),s.removeIDs(f),s.removeIDs(N),g.textContent=r,g.classList.toggle(ny),g.classList.toggle(nw));else{m[m.length-1]!=nS&&m.push(nS),s.removeIDs(f),s.removeIDs(N);let t=ns(s,e,d,m,o,nS,f,N);c.appendChild(t),g.textContent=l,g.classList.toggle(ny),g.classList.toggle(nw)}})}function i5(e,t,s,i,n){let a=tp.tagName,d=U(s.addID(t.id,a),n);t.appendChild(d);let o=a+nu,l=a+nm,r=O(a,s.addID(t.id,a,C),nh);d.appendChild(r),r.classList.add(ny),r.classList.add(nw);let g=s.addID(t.id,a,ts.tagName),h=s.addID(t.id,a,te.tagName),c=s.addID(t.id,a,ti.tagName);if(i){let t=i.getElementsByTagName(a);1==t.length?(i4(e,d,t,g,h,c),r.classList.toggle(nw),r.textContent=o):(r.classList.toggle(ny),r.textContent=l)}else r.classList.toggle(ny),r.textContent=l;r.addEventListener("click",t=>{e.index.has(a)?(e.removeTestMicroRates(),document.getElementById(g)?.remove(),document.getElementById(h)?.remove(),document.getElementById(c)?.remove(),r.textContent=l):(i4(e,d,null,g,h,c),r.textContent=o),r.classList.toggle(ny),r.classList.toggle(nw)})}function i4(e,t,s,i,n,a){let d,o;if(null!=s&&s.length>0){if(s.length>1)throw Error("More than one TestMicroRates element.");o=new tp(d=es(s[0]))}else(d=new Map).set(tp.s_Tmax,"2000"),d.set(tp.s_Tmin,"100"),d.set(tp.s_Tstep,"100"),o=new tp(d);e.setTestMicroRates(o);let l=o.getTmax(),r=I("text",N(i,"input"),nh,nr,e=>{let t=e.target;try{o.setTmax(new(u(p))(t.value)),console.log("Set "+tp.s_Tmax+" to "+t.value)}catch(e){alert("Invalid input, resetting..."),t.value=l.toString()}P(t)},l.toString(),tp.s_Tmax);r.id=i,P(r.querySelector("input")),t.appendChild(r);let g=o.getTmin(),h=I("number",N(n+"input"),nh,nr,e=>{let t=e.target;y(t.value)?(o.setTmin(new(u(p))(t.value)),console.log("Set "+tp.s_Tmin+" to "+t.value)):(alert("Value is not numeric, resetting..."),t.value=g.toString()),P(t)},g.toString(),tp.s_Tmin);h.id=n,P(h.querySelector("input")),t.appendChild(h);let c=o.getTstep(),m=I("text",N(a+"input"),nh,nr,e=>{let t=e.target;y(t.value)?(o.setTstep(new(u(p))(t.value)),console.log("Set "+tp.s_Tstep+" to "+t.value)):(alert("Value is not numeric, resetting..."),t.value=c.toString()),P(t)},c.toString(),tp.s_Tstep);m.id=a,P(m.querySelector("input")),t.appendChild(m)}function i6(e,t){let s=t.getFittingIterations()||new eX(new Map,nK);t.setFittingIterations(s),e.appendChild(I("number",N(e.id,eX.tagName,nE),nh,nr,e=>{let t=e.target;y(t.value)?(s.value=new(u(p))(t.value),console.log("Set FittingIterations to "+t.value)):(alert("Value is not numeric, resetting..."),t.value=s.value.toString()),P(t)},s.value.toString(),eX.tagName))}function i8(e,t){function s(e,t,s,i){let n=N(t.id,e.tagName,nE),a=e.value.toString(),d=e.tagName;t.appendChild(I("number",n,s,i,t=>{let s=t.target;y(s.value)?(e.value=new(u(p))(s.value),console.log("Set "+e.tagName+" to "+s.value)):(alert("Value is not numeric, resetting..."),s.value=e.value.toString()),P(s)},a,d))}let i=t.getMarquardtIterations()||new e$(new Map,nK);t.setMarquardtIterations(i),s(i,e,nh,nr);let n=t.getMarquardtTolerance()||new eK(new Map,nK);t.setMarquardtTolerance(n),s(n,e,nh,nr);let a=t.getMarquardtDerivDelta()||new eW(new Map,nK);t.setMarquardtDerivDelta(a),s(a,e,nh,nr)}function i9(e,t){let s=t.getFormat()||new eQ(new Map,eQ.options[0]);function i(t,s,i,n,a){let d=s()||new t(new Map,a[0]);i(d);let o=k(n,a,n,d.value,e.id,nh,nh);o.querySelector("select")?.addEventListener("change",e=>{let t=e.target;d.value=t.value,console.log(`Set ${n} to `+t.value),L(t)}),e.appendChild(o)}function n(t,s,i,n){let a=s()||new t(new Map,NaN);i(a),e.appendChild(I("text",e.id+`_${n}_input`,nh,nr,ne(a,n),a.value.toString(),n))}i(eQ,t.getFormat.bind(t),t.setFormat.bind(t),eQ.tagName,eQ.options),i(eQ,()=>s.getRateUnits(),s.setRateUnits.bind(s),eQ.rateUnits,eQ.rateUnitsOptions),i(e0,t.getPrecision.bind(t),t.setPrecision.bind(t),e0.tagName,tB.precisionOptions),n(e1,t.getChebNumTemp.bind(t),t.setChebNumTemp.bind(t),e1.tagName),n(e2,t.getChebNumConc.bind(t),t.setChebNumConc.bind(t),e2.tagName),n(e3,t.getChebMaxTemp.bind(t),t.setChebMaxTemp.bind(t),e3.tagName),n(e5,t.getChebMinTemp.bind(t),t.setChebMinTemp.bind(t),e5.tagName),n(e4,t.getChebMaxConc.bind(t),t.setChebMaxConc.bind(t),e4.tagName),n(e6,t.getChebMinConc.bind(t),t.setChebMinConc.bind(t),e6.tagName),n(e8,t.getChebTExSize.bind(t),t.setChebTExSize.bind(t),e8.tagName),n(e9,t.getChebPExSize.bind(t),t.setChebPExSize.bind(t),e9.tagName)}function i7(e,t){function s(t,s,i,n){let a=s()||new t(new Map,NaN);i(a),e.appendChild(I("text",e.id+`_${n}_input`,nh,nr,ne(a,n),a.value.toString(),n))}s(te,t.getTmin.bind(t),t.setTmin.bind(t),te.tagName),s(tt,t.getTmid.bind(t),t.setTmid.bind(t),tt.tagName),s(ts,t.getTmax.bind(t),t.setTmax.bind(t),ts.tagName),s(ti,t.getTstep.bind(t),t.setTstep.bind(t),ti.tagName)}function ne(e,t){return t=>{let s=t.target;try{e.value=new(u(p))(s.value)}catch(t){alert("Invalid input value "+s.value+" , resetting..."),s.value=e.value.toString()}P(s)}}function nt(e,t){function s(t,s,i,n){let a=s()||new t(new Map,NaN);i(a),e.appendChild(I("text",N(e.id,n,nE),nh,nr,ne(a,n),a.value.toString(),n))}s(ta,t.getSensitivityAnalysisSamples.bind(t),t.setSensitivityAnalysisSamples.bind(t),ta.tagName),s(td,t.getSensitivityAnalysisOrder.bind(t),t.setSensitivityAnalysisOrder.bind(t),td.tagName),s(to,t.getSensitivityNumVarRedIters.bind(t),t.setSensitivityNumVarRedIters.bind(t),to.tagName);let i=t.getSensitivityVarRedMethod()||new tl(new Map,"");t.setSensitivityVarRedMethod(i);let n=tl.tagName;e.appendChild(k(n,tl.options,n,tl.options[0],N(e.id,n,"select"),nh,nh));let a=e.querySelector("select");a?.addEventListener("change",e=>{let t=e.target;i.value=t.value,console.log(n+" set to "+t.value),L(t)})}function ns(e,t,s,i,n,a,d,o){let l=A(i,n,a,o,nh);return s.appendChild(l),ao(i,l),l.addEventListener("change",i=>{let n=document.getElementById(d);null!=n&&(n.remove(),e.removeIDs(d)),n=U(d,nh),s.appendChild(n);let a=i.target,o=a.value,l=new Map;if(l.set("xsi:type",o),o==eH.xsi_type||o==eH.xsi_type2)t.setCalcMethod(new eH(l));else if(o==ej.xsi_type||o==ej.xsi_type2)t.setCalcMethod(new ej(l));else if(o==eY.xsi_type||o==eY.xsi_type2){let e=new eY(l);t.setCalcMethod(e),i6(n,e)}else if(o==eZ.xsi_type||o==eZ.xsi_type2){let e=new eZ(l);t.setCalcMethod(e),i8(n,e)}else if(o==e7.xsi_type||o==e7.xsi_type2){let e=new e7(l);t.setCalcMethod(e),i9(n,e)}else if(o==tn.xsi_type||o==tn.xsi_type2){let e=new tn(l);t.setCalcMethod(e),i7(n,e)}else if(o==tr.xsi_type||o==tr.xsi_type2){let e=new tr(new Map);t.setCalcMethod(e),nt(n,e)}else throw Error("Unknown CalcMethod type.");L(a)}),l}function ni(e,t,s,i,n,a,d,o,l,r,g){let h=i+(a-i)/2;na(e,g,o,t,h-nd(e,g,o)/2,d+l),na(e,r,o,t,h-nd(e,r,o)/2,d+3*l),nn(e,t,s,i,n,a,d)}function nn(e,t,s,i,n,a,d){e.beginPath(),e.strokeStyle=t,e.lineWidth=s,e.moveTo(i,n),e.lineTo(a,d),e.stroke()}function na(e,t,s,i,n,a){e.save(),e.translate(n,a),e.scale(1,-1),e.font=s,e.fillStyle=i,e.fillText(t,0,0),e.restore()}function nd(e,t,s){return e.font=s,e.measureText(t).width}function no(e,t,s,i,n,a,d,o,l,r){null!=d&&(d.close(),d=null);let g=document.getElementById(nV),h=nA(n0);nk(h);let c=G(h,ng);g.appendChild(c),M(h,g,null,c,n0,nh,nr);let m=nA(c.id,C+"s"),u=G(m);c.appendChild(u);let p=nA(m,C),f="Pop into a new Window",N=O(f,p);u.appendChild(N);let x=document.createElement("canvas");x.id=e,c.appendChild(x),x.height=t,x.style.border="1px solid black",r&&nl(x,t,s,i,n,a,o,l),N.addEventListener("click",()=>{if(null==d){let g=document.createElement("canvas");g.id=e,(d=window.open("",n0,"width="+x.width+", height="+x.height)).document.body.appendChild(g),r&&nl(g,t,s,i,n,a,o,l),nk(e),N.textContent="Pop into this Window"}else(x=document.createElement("canvas")).id=e,c.appendChild(x),x.height=t,x.style.border="1px solid black",r&&nl(x,t,s,i,n,a,o,l),d.close(),d=null,N.textContent=f}),am(x,u,null,n0)}function nl(e,t,s,i,n,a,d,o){console.log("drawReactionDiagram");let l="kJ/mol";if(null!=e&&o.size>0){var r,g;let h,c,m,u,p,N,x,v,E;s?(h="lightgrey",c="lightblue",m="orange"):(h="darkgrey",c="blue",m="darkorange");let y=e.getContext("2d");y.clearRect(0,0,e.width,e.height),y.font="bold "+i;let w=(r=y.font,y.font=r,(g=y.measureText("Aj")).actualBoundingBoxAscent+g.actualBoundingBoxDescent),C=[],S=new Set,M=new Set,T=new Set,I=new Map,z=new Map,_=0;o.forEach(function(e,t){let s=e.getTransitionStates(),i=e.getReactantsLabel();if(void 0!=i){C.push(i),S.has(i)&&M.add(i);let t=e.getReactantsEnergy(nQ,d);console.log("energy="+t.toString()),console.log("units="+(l=e.getEnergyUnits(nQ,d,e.getReactants()))),u=b(u,t),p=R(p,t),z.set(i,t),!I.has(i)&&(I.set(i,_),_++)}let n=e.getProductsLabel();if(void 0!=n){S.add(n);let t=e.getProductsEnergy(nQ,d);if(console.log("energy="+t.toString()),console.log("units="+(l=e.getEnergyUnits(nQ,d,e.getProducts()))),u=b(u,t),p=R(p,t),z.set(n,t),I.has(n)){_--;let i=f(I,n);I.forEach(function(e,t){e>i&&I.set(t,e-1)}),void 0!=s&&(s.forEach(function(s,i){let n=s.getMolecule().getRef();T.add(n),I.set(n,_),console.log("energy="+(t=nQ(n,d).getEnergy()??nK).toString()),console.log("units="+(l=e.getEnergyUnits(nQ,d,e.getTransitionStates()))),u=b(u,t),p=R(p,t),z.set(n,t),_++}),I.set(n,_),_++)}else void 0!=s&&s.forEach(function(e,s){let i=e.getMolecule().getRef();T.add(i),I.set(i,_),console.log("energy="+(t=nQ(i,d).getEnergy()??nK).toString()),u=b(u,t),p=R(p,t),z.set(i,t),_++}),I.set(n,_),_++}});let D=p.minus(u).toNumber(),P=[];I.forEach(function(e,t){P[e]=t});let L=0,B=0,A=new Map,k=new Map,O=new Map,G=new Map,U=new Map,q=new Map;P.forEach(function(e){let s=f(z,e);console.log("energy="+s.toString());let a=(s-u.toNumber())*t/(D+0)+0;E=Math.max(nd(y,s.toString(),i),nd(y,e,i)),x=L+E+5,v=N=a+n,A.set(e,[L,N]),k.set(e,[x,v]),S.has(e)&&(O.set(e,[L,N]),G.set(e,[x,v])),T.has(e)&&(U.set(e,[L,N]),q.set(e,[x,v])),L=x+10,B=x}),e.width=B;let V=t+4*w+2*n;e.height=V,y.transform(1,0,0,-1,0,V),o.forEach(function(e,t){let s=e.getTransitionStates(),i=e.getReactantsLabel(),n=e.getProductsLabel(),d=f(k,i),o=f(O,n);s.size>0?s.forEach(function(e,t){let s=f(U,t);nn(y,h,a,d[0],d[1],s[0],s[1]);let i=f(q,t);nn(y,h,a,i[0],i[1],o[0],o[1])}):nn(y,h,a,d[0],d[1],o[0],o[1])}),y.save(),y.translate(20,t/2),y.rotate(-Math.PI/2),y.scale(-1,1),y.textAlign="center",y.textBaseline="middle",y.font="16px Arial",y.fillText("Energy "+l,0,0),y.restore(),C.forEach(function(e){let s=f(z,e);console.log("energy="+s.toString());let a=(s-u.toNumber())*t/(D+0)+0;console.log("energyRescaled="+a.toString());let d=f(A,e)[0],o=a+n,l=f(k,e)[0],r=s.toString();ni(y,c,n,d,o,l,o,i,w,e,r)}),S.forEach(function(e){let s=f(z,e);console.log("energy="+s.toString());let a=(s-u.toNumber())*t/(D+0)+0;console.log("energyRescaled="+a.toString());let d=f(O,e)[0],o=a+n,l=f(G,e)[0],r=s.toString();M.has(e)?ni(y,m,n,d,o,l,o,i,w,e,r):ni(y,"green",n,d,o,l,o,i,w,e,r)}),T.forEach(function(e){let s=f(z,e);console.log("energy="+s.toString());let a=(s-u.toNumber())*t/(D+0)+0;console.log("energyRescaled="+a.toString());let d=f(U,e)[0],o=a+n;ni(y,"red",n,d,o,f(q,e)[0],o,i,w,e,s.toString())})}}p.Big.PE=7;let nr={marginLeft:"0px",marginTop:"1px",marginBottom:"1px",marginRight:"0px"},ng={marginLeft:"25px",marginTop:"1px",marginBottom:"1px",marginRight:"0px"},nh={marginLeft:"1px",marginTop:"1px",marginBottom:"1px",marginRight:"1px"};const nc="✎",nm=" ✗",nu=" ✓",np="Add ＋",nf="Add from library ＋",nN="Add from spreadsheet ＋",nx="container",nv="description",nE="input",ny="optionOn",nw="optionOff",nR="Products",nb="Reactants",nC="save",nS="Select an option (press a letter key to cycle through options for it)...",nM="table",nT="Transition States",nI="textarea",nz="undefined",n_="units",nD="viewer";let nP=new Set,nL=new Set;function nB(...e){let t=N(...e);if(nP.has(t))throw Error(t+" already exists!");return nP.add(t),t}function nA(...e){let t=nB(...e);return nL.add(t),t}function nk(e){let t=document.getElementById(e);null!=t&&t.remove(),nL.delete(e),nP.delete(e)}const nO=nB("menu"),nG=nB("title"),nU=nB("molecules"),nq=nB("reactions"),nV=nB("reactionsDiagram"),nF=nB("conditions"),nH=nB("modelParameters"),nj=nB("control"),nX=nB("metadata"),nY=nB("analysis"),n$=nB("xml"),nK=new p.Big(0);class nW{addID(e,...t){let s=nA(e,...t);return this.ids.has(e)||this.ids.set(e,new Set),this.ids.get(e)?.add(s),s}removeID(e){nL.delete(e),nP.delete(e)}removeIDs(e){this.ids.has(e)&&(this.ids.get(e).forEach(e=>{console.log("remove id "+e),this.removeID(e)}),this.ids.delete(e))}removeAllIDs(){this.ids.forEach((e,t)=>{this.removeIDs(t)})}constructor(){this.ids=new Map}}function nZ(e,t,s){let i;for(;void 0==(i=sL(e,t.getID(),t,s)););s.set(i,t)}function nJ(e){let t=new Set;return e.forEach((e,s)=>{let i=e.getID();t.has(i)?t.add(i+"-"+s.toString()):t.add(i)}),t}function nQ(e,t){for(let[s,i]of t)if(i.id==e)return i;return null}const n0="Reactions Diagram",n1=nA(n0),n2=nA(n1,"Canvas");let n3="1em SensSerif";function n5(){nL.forEach(e=>{nk(e)}),nL=new Set,s=new nW,i=new nW,n=new nW,a=new nW,d=new nW,l=new ia,g=new Map,h=new Map,c=[]}function n4(){n5(),n6("Example_title",new Map);let e=document.getElementById(nU),i=nA(tz.tagName),o=G(i);e.appendChild(o),M(i,e,null,o,tz.tagName,nh,nr);let l=sS(o,s,g);sP(o,l,s,g);let r=nA(t_.tagName);nk(r),n8(G(r)),no(n2,400,t,n3,4,2,m,g,h,!0);let c=document.getElementById(nF),u=nA(ey.tagName),p=G(u);c.appendChild(p);let f=G(void 0,nh);i_(f,n,g),M(u,p,null,f,"ConditionsList",nh,nr);let N=document.getElementById(nH),x=nA(tT.tagName,"list"),v=G(x);N.appendChild(v);let E=G(void 0,nh);iW(E,a),M(x,v,null,E,"ModelParametersList",nh,nr);let y=document.getElementById(nj),w=nA(tf.tagName),R=G(w);y.appendChild(R);let b=G(void 0,nh);iQ(b,d),M(w,R,null,b,"ControlList",nh,nr)}function n6(e,t){let s=new tI(t,e);o.setTitle(s);let i=document.getElementById(nG),n=nA("titleDiv");nk(n);let a=I("text",nA(n,nE),nh,nr,e=>{let t=e.target;s.value=t.value,console.log(s.tagName+" changed to "+s.value),P(t)},e,tI.tagName);a.id=n,i.appendChild(a)}function n8(e){var t,s,n;let a,d=document.getElementById(nq),r=nA(t_.tagName);d.appendChild(e),M(r,d,null,e,t_.tagName,nh,nr),t=i,s=h,n=g,a=O(np,nA(ib.tagName,"add",C),ng),e.appendChild(a),a.addEventListener("click",()=>{let i,d,r=new Map,g=o.getReactionList(),h=g.getNextReactionID();console.log("Next Reaction ID="+h),r.set(ib.s_id,"R"+h);let c=new ib(r);s.set(c.id,c),g.addReaction(c);let m=t.addID(ib.tagName,c.id),f=G(m);e.appendChild(f);let N=M(t.addID(m,nx),e,a,f,c.getLabel(),nh,ng),x=N.querySelector("button"),v=t.addID(m,io.tagName),E=G(v);M(t.addID(v,nx),f,null,E,nb,nh,ng);let y=new Map;c.setReactants(y),iC(c,x,t,m,E,n,y);let w=t.addID(m,il.tagName),R=G(w);M(t.addID(w,nx),f,null,R,nR,nh,ng);let b=new Map;c.setProducts(b),iS(c,x,t,m,R,n,b);let C=t.addID(m,ir.tagName),S=G(C);M(t.addID(C,nx),f,null,S,nT,nh,ng);let T=new Map;c.setTransitionStates(T),iM(t,m,S,n,T);let z=t.addID(m,iu.tagName),_=G(z);M(t.addID(z,nx),f,null,_,iu.tagName,nh,ng);let D=new Map;D.set("xsi:type",ip.xsiType);let L=new ip(D);c.setMCRCMethod(L);{void 0!=l?""==(i=l.values.get(ig.tagName)??"")&&(i="6.00e-12"):i="6.00e-12",d=new(u(p))(i);let e=new Map,t=new ig(e,d);L.setPreExponential(t);let s=I("number",nA(z,ig.tagName,nE),nh,ng,e=>{ap(t,e.target)},i,ig.tagName);_.appendChild(s);let n=s.querySelector("input");n.value=i,P(n),n.addEventListener("change",e=>{i=e.target.value,t.value=new(u(p))(i),console.log(ig.tagName+" changed to "+i),P(n)}),ad(void 0,e,s,null,nA(z,ig.tagName),ig.tagName,nh,nh),_.appendChild(s)}{void 0!=l?""==(i=l.values.get(ih.tagName)??"")&&(i="0.0"):i="0.0",d=new(u(p))(i);let e=new Map,t=new ih(e,d);L.setActivationEnergy(t);let s=I("number",nA(z,ih.tagName,nE),nh,ng,e=>{ap(t,e.target)},i,ih.tagName),n=s.querySelector("input");n.value=i,P(n),n.addEventListener("change",e=>{i=e.target.value,t.value=new(u(p))(i),console.log(ih.tagName+" changed to "+i),P(n)}),ad(void 0,e,s,null,nA(z,ih.tagName),ih.tagName,nh,nh),_.appendChild(s)}{void 0!=l?""==(i=l.values.get(ic.tagName)??"")&&(i="298"):i="298",d=new(u(p))(i);let e=new Map,t=new ic(e,d);L.setTInfinity(t);let s=I("number",nA(z,ic.tagName,nE),nh,ng,e=>{ap(t,e.target)},i,ic.tagName),n=s.querySelector("input");n.value=i,P(n),n.addEventListener("change",e=>{i=e.target.value,t.value=new(u(p))(i),console.log(ic.tagName+" changed to "+i),P(n)}),ad(void 0,e,s,null,nA(z,ic.tagName),ic.tagName,nh,nh),_.appendChild(s)}{void 0!=l?""==(i=l.values.get(im.tagName)??"")&&(i="0.08"):i="0.08",d=new(u(p))(i);let e=new Map,t=new im(e,d);L.setNInfinity(t);let s=I("number",nA(z,im.tagName,nE),nh,ng,e=>{ap(t,e.target)},i,im.tagName);_.appendChild(s);let n=s.querySelector("input");n.value=i,P(n),n.addEventListener("change",e=>{i=e.target.value,t.value=new(u(p))(i),console.log(im.tagName+" set to "+i),P(n)}),ad(void 0,e,s,null,nA(z,im.tagName),im.tagName,nh,nh),_.appendChild(s)}let B=t.addID(m,ix.tagName),A=G(B);void 0!=l?""==(i=l.values.get(ix.tagName)??"")&&(i="2.25e+16"):i="2.25e+16",d=new(u(p))(i);let k=new ix(new Map,d);c.setExcessReactantConc(k);let O=I("number",nA(B,ix.tagName,nE),nh,ng,e=>{ap(k,e.target)},i,ix.tagName),U=O.querySelector("input");U.value=i,P(U),U.addEventListener("change",e=>{let t=e.target.value;k.value=new(u(p))(t),console.log(ix.tagName+" changed to "+t),P(U)}),ad(void 0,new Map,O,null,nA(B,ix.tagName),ix.tagName,nh,nh),A.appendChild(O),f.appendChild(A),an(f,ng,()=>{iT(e,N,t,m,s,c)})})}function n9(){null==m?nl(document.getElementById(n2),400,t,n3,4,2,g,h):nl(m.document.getElementById(n2),400,t,n3,4,2,g,h)}function n7(e,t){let s=document.getElementsByClassName(e);for(let e=0;e<s.length;e++)if(s[e]instanceof HTMLSelectElement){let i=s[e].options,n=s[e].value;Array.from(i).forEach(i=>{if(i.value==t&&(i.remove(),n==t)){let t=new Event("change");s[e].dispatchEvent(t)}})}}function ae(e,t){let s=document.getElementsByClassName(e);console.log("n elements with className "+e+"="+s.length);for(let e=0;e<s.length;e++){let i=s[e];if(s[e]instanceof HTMLSelectElement){let e=document.createElement("option");e.value=t,e.text=t,i.add(e)}}}function at(e,t){if(t)e.push(nS);else{let t=e.indexOf(nS);t>-1&&e.splice(t,1)}}function as(e,t,s,i,n,a,d,o){let l=U(e,o),r=s+nu,g=s+nm,h=O(g,N(e,s,C),d);l.appendChild(h),h.classList.add(ny),h.classList.add(nw);let c=N(e,s,nE),m=i();return void 0==m?(h.textContent=g,h.classList.toggle(ny)):(ai(l,c,s,m,i,n,d),h.textContent=r,h.classList.toggle(nw)),h.addEventListener("click",e=>{if(null==document.getElementById(c)){console.log("Adding "+c),ai(l,c,s,m,i,n,d);let e=l.querySelector(nE);void 0!=m&&(e.value=m.toString());let t=new Event("change");e.dispatchEvent(t),h.textContent=r}else document.getElementById(c)?.remove(),a(s),console.log("Removed "+c),h.textContent=g;h.classList.toggle(ny),h.classList.toggle(nw)}),l}function ai(e,t,s,i,n,a,d){let o;o=void 0==i?"":i.toString();let l=z("text",t,d);l.addEventListener("click",e=>{o=l.value}),l.addEventListener("change",e=>{let t=e.target;try{let e=t.value;""==e&&(e="0"),a(new p.Big(e)),console.log(s+" changed from "+o+" to "+t.value)}catch(s){alert("Input invalid, resetting...");let e=n();void 0!=e&&(t.value=e.toString())}P(t)}),l.value=o,P(l),e.appendChild(l)}function an(e,t,s,...i){let n=O("Remove ✕",void 0,t);return e.appendChild(n),n.addEventListener("click",()=>{s(...i),e.remove(),nk(e.id)}),n}function aa(e,t,s,i,n,a){let d;d=void 0==i?"":i.toString();let o=z("text",t,a);o.addEventListener("change",e=>{let t=e.target;n(t.value),console.log(s+" changed from "+i+" to "+t.value),P(t)}),o.value=d,P(o),e.appendChild(o)}function ad(e,t,s,i,n,a,d,o){if(void 0!=e){let l=function(e,t,s,i,n,a){let d=t.get("units");if(void 0!=d){let o=k("units",e,"units",d,s,n,a),l=o.querySelector("select");return l.value=d,L(l),l.addEventListener("change",e=>{let s=e.target;t.set("units",s.value),console.log("Set "+i+" units to "+s.value),L(s)}),o}}(e,t,n,a,d,o);void 0!=l&&s.insertBefore(l,i)}else{let e=t.get("units");if(void 0!=e){let t=q("units "+e,o);s.insertBefore(t,i)}}}function ao(e,t){t.addEventListener("click",s=>{e[e.length-1]==nS&&e.pop();let i=t.options.length-1;t.options[i].value==nS&&t.remove(i)})}document.addEventListener("DOMContentLoaded",()=>{let f,E,w,R,b,T,_,D,B,A,K,W,Z,J,Q,ee;document.body.className=t?"dark-mode":"light-mode";let et=new Map;et.set("xmlns","http://www.xml-cml.org/schema"),et.set("xmlns:me","http://www.chem.leeds.ac.uk/mesmer"),et.set("xmlns:xsi","http://www.w3.org/2001/XMLSchema-instance"),o=new tB(et),(f=document.getElementById(nO)).style.display="flex",f.style.justifyContent="center",f.style.margin="5px",f.style.padding="5px",f.style.border="1px solid black",f.style.backgroundColor="lightgrey",w=O(E="About",nB(E),nh),f.appendChild(w),w.addEventListener("click",async e=>{!function(e){if(null==e)return;e.document.title="About MXG";let t=document.createElement("div");e.document.body.appendChild(t);let s=e.document.createElement("p");t.appendChild(s),s.appendChild(e.document.createTextNode("MXG is a free and open source program to assist in creating, editing and         visualising MESMER XML data. MXG is released via the MESMER-kinetics GitHub repository: ")),s.appendChild(s2),s.appendChild(e.document.createTextNode(". Details of MESMER - the Master Equation Solver for Multi Energy-well Reactions         can be found at: ")),s.appendChild(s6),s.appendChild(e.document.createTextNode("."));let i=document.createElement("p");t.appendChild(i),i.appendChild(e.document.createTextNode("MXG development has been led by a team based at ")),i.appendChild(s9),i.appendChild(e.document.createTextNode(" and funded by ")),i.appendChild(s8),i.appendChild(e.document.createTextNode(". Please contribute to MXG development by reporting issues on GitHub."));let n=e.document.createElement("p");t.appendChild(n),n.appendChild(e.document.createTextNode("MXG should work with the latest Firefox, Chrome, Edge or Safari Web browsers.         It can be used offline after installation as a Progressive Web App (PWA). The process of installing a PWA varies by         Web browser and device. For guidance please see the MXG development repository README."));let a=e.document.createElement("p");t.appendChild(a),a.appendChild(e.document.createTextNode("The Menu contains 7 buttons:         The About button displays the about text in a new Window.         The Load MESMER File button is for loading a MESMER XML data file.         The Load Into Library button is for adding molecule data to a molecule library.         The Clear Library button clears the molecule library.         The Load Defaults button is for loading default values from a file.         The Save button is for saving a new MESMER XML data file.         The Restart button reinitialises the interface."));let d=document.createElement("p");t.appendChild(d),d.appendChild(e.document.createTextNode('A MESMER XML input data file normally has a "me:mesmer" element containing:         "me:title", "moleculeList", "reactionList", "me:conditions", "me:modelParameters", and "me:control" elements.         A MESMER XML output data usually also has "me:metadataList" and "me:analysis" elements in the "me:mesmer"         element, and additional output located in the "moleculeList" and "reactionList" elements.         The main interface below the Menu presents what is in a loaded MESMER file, or what will be in saved to a MESMER file.         It also presents visualisations of the data which can be output in PNG or CSV formats.         The "me:title" value is presented in an input after a label. The input allows for the default value,         "Example_title" to be changed. Other details are presented via buttons with descriptive names and a triangular         symbol:         A triangle orientated with a point down: ▼ can be actioned to reveal details.         A triangle orientated with a point up: ▲ can be actioned to hide those details.'));let o=e.document.createElement("p");t.appendChild(o),o.textContent='The Reaction Diagram button shows/hides a reaction well diagram which is redrawn if molecule "me:ZPE"         property values are changed. The diagram can be opened in a new Window and saved as an image in PNG format file.';let l=e.document.createElement("p");t.appendChild(l),l.textContent="MXG uses 3DMol.js under a BSD-3-Clause licence to visualise molecules with coordinates. For details         of 3DMol.js please see the GitHub repository: ",l.appendChild(ie),l.appendChild(e.document.createTextNode(". If you use the 3DMol.js visualisations, please cite: Nicholas Rego and         David Koes 3Dmol.js: molecular visualization with WebGL Bioinformatics (2015) 31 (8): 1322-1324 ")),l.appendChild(it),l.appendChild(e.document.createTextNode("."));let r=e.document.createElement("p");t.appendChild(r),r.textContent="MXG uses Big.js under an MIT licence to handle numbers. For details of Big.js please see the GitHub         repository: ",r.appendChild(ii),r.appendChild(e.document.createTextNode("."))}(window.open("","","width=600,height=400"))}),(b=O(R="Load MESMER File",nB(R),nh)).addEventListener("click",l=>{if(confirm("Any unsaved changes will be lost. Select OK to continue loading or Cancel to cancel.")){let l;n5(),(l=document.createElement("input")).type="file",l.onchange=function(){if(l.files){for(let e=0;e<l.files.length;e++)console.log("inputElement.files["+e+"]="+l.files[e]);let r=l.files[0];console.log(r.name),e=r.name;let f=new FileReader,E=0,w="";f.onload=function(l){if(null==l.target)throw Error("Event target is null");if(w+=l.target.result,null!=r){if(E<r.size){let e=r.slice(E,E+1048576);f.readAsText(e),E+=1048576}else{var R;let l,r,f,E;R=w=w.trim(),l=document.getElementById(n$),nk(r=nA(n$,2)),f=G(r,ng),M(r,l,null,f,e,nh,nr),(E=document.createElement("pre")).textContent=R,f.appendChild(E),function(l){let r,f;console.log("parse: "+l);let E=ei(l,tB.tagName);o=new tB(es(E));let w=l.getElementsByTagName(tI.tagName);w.length>0?(w.length>1&&console.warn("Multiple "+tI.tagName+" tags found, using the first."),r=w[0].childNodes[0].nodeValue.trim(),f=es(w[0])):(r=e,console.warn("No "+tI.tagName+" tag found, using the filename: "+e+" as the title."),f=new Map),n6(r,f);let R=document.getElementById(nU),b=nA(tz.tagName);nk(b),M(b,R,null,function(e,t,s){let i=G(void 0,nh),n=ei(e,tz.tagName),a=new Set;if(n.childNodes.forEach(function(e){a.add(e.nodeName)}),1==a.size||2==a.size&&a.has("#text")||(console.error("moleculeListTagNames:"),a.forEach(e=>console.error(e)),console.warn("Additional tag names in moleculeList:")),!a.has(sC.tagName)){console.warn('Expecting tags with "'+sC.tagName+'" tagName but there are none! Please add molecules to the moleculeList.');let e=i.appendChild(sS(i,t,s));return i.appendChild(sP(i,e,t,s)),i}let d=n.getElementsByTagName(sC.tagName),o=d.length;console.log("Number of molecules="+o);for(let e=0;e<o;e++){let n,a,o=t.addID(sC.tagName,e),l=G(o),r=es(d[e]),g=new sC(r,r.get(sC.s_id));nZ(!1,g,s);let h=M(t.addID(o,nx),i,null,l,g.getLabel(),nh,ng),c=new Set,m=d[e].childNodes;for(let e=0;e<m.length;e++){let t=m[e];c.has(t.nodeName)?"#text"!=t.nodeName&&console.warn("Another ChildNode with nodeName="+t.nodeName):c.add(t.nodeName)}sB(g,s,h.querySelector(C),t,l,ng),l.appendChild(sA(t.addID(o,nv),t,g.getDescription.bind(g),g.setDescription.bind(g),nh,ng));let f=d[e].getElementsByTagName(tR.tagName);if(f.length>0){f.length>1&&console.warn("Expecting 1 or 0 "+tR.tagName+" but finding "+f.length+". Loading the first of these...");let e=t.addID(o,tR.tagName),s=G(e);M(t.addID(e,nx),l,null,s,tR.tagName,nh,ng);let i=f[0].getElementsByTagName(tN.tagName),n=new tR(es(f[0]));g.setMetadataList(n);for(let a=0;a<i.length;a++){let d=new tN(es(i[a]));s.appendChild(function(e,t,s,i,n,a){s.addMetadata(t);let d=U(i,a);return d.appendChild(q(e.getLabel(),n)),d}(g,d,n,t.addID(e,a),nh,ng))}c.delete(tR.tagName)}let v=d[e].getElementsByTagName(tU.tagName),E=t.addID(o,tU.tagName),w=G(E);M(t.addID(E,nx),l,null,w,tU.tagName,nh,ng);let R=new tU(new Map);g.setAtoms(R);for(let e=0;e<v.length;e++){let t=es(v[e]);t.size>0&&console.warn("AtomArray attributes lost/ignored: "+x(t))}let b=d[e].getElementsByTagName(tG.tagName);for(let e=0;e<b.length;e++)w.appendChild(sG(!0,t,g,E,R,new tG(es(b[e]),g),nh,ng));w.appendChild(sO(t,g,w,tG.tagName,nh,ng)),c.delete(tG.tagName);let S=d[e].getElementsByTagName(tV.tagName),T=t.addID(o,tV.tagName),_=G(T);M(t.addID(T,nx),l,null,_,tV.tagName,nh,ng);let D=new tV(new Map);g.setBonds(D);for(let e=0;e<S.length;e++){let t=es(S[e]);t.size>0&&console.warn("BondArray attributes lost/ignored: "+x(t))}let L=d[e].getElementsByTagName(tq.tagName);for(let e=0;e<L.length;e++)es(L[e]).has(tq.s_id)&&_.appendChild(sV(!0,t,g,T,g.getAtoms().atoms,D,new tq(es(L[e]),g),nh,ng));for(let e=0;e<L.length;e++)es(L[e]).has(tq.s_id)||_.appendChild(sV(!0,t,g,T,g.getAtoms().atoms,D,new tq(es(L[e]),g),nh,ng));_.appendChild(sq(t,g,_,tq.tagName,nh,ng)),c.delete(tq.tagName);let B=t.addID(o,nD),A=G(B);M(t.addID(B,nx),l,null,A,nD,nh,ng),sY(t,g,A,nh,ng);let j=d[e].getElementsByTagName(ss.tagName),K=t.addID(o,ss.tagName),W=G(K);M(t.addID(K,nx),l,null,W,ss.tagName,nh,ng),j.length>1&&console.warn("Expecting 1 or 0 "+ss.tagName+" but finding "+j.length+". Loading the first of these...");let Z=new Set,J=new Map;if(j.length>0){n=new ss(es(j[0])),a=j[0].getElementsByTagName(tY.tagName);for(let e=0;e<a.length;e++){let t=new tY(es(a[e]));Z.add(t.dictRef),J.set(t.dictRef,e)}}else n=new ss(new Map);g.setPropertyList(n),c.delete(ss.tagName),Z.has(t$.dictRef)?(N(W.id,t$.dictRef),sj(n,a[J.get(t$.dictRef)],W,g,t,nh,ng)):sM(!1,g,t,W,n,t$.dictRef,tB.energyUnits),Z.has(tK.dictRef)?(N(W.id,tK.dictRef),sj(n,a[J.get(tK.dictRef)],W,g,t,nh,ng)):sM(!0,g,t,W,n,tK.dictRef,tB.energyUnits),Z.has(tW.dictRef)?(N(W.id,tW.dictRef),sj(n,a[J.get(tW.dictRef)],W,g,t,nh,ng)):sM(!1,g,t,W,n,tW.dictRef,tB.energyUnits),Z.has(tZ.dictRef)?(N(W.id,tZ.dictRef),sj(n,a[J.get(tZ.dictRef)],W,g,t,nh,ng)):sM(!1,g,t,W,n,tZ.dictRef,tB.energyUnits),Z.has(tJ.dictRef)?(N(W.id,tJ.dictRef),sj(n,a[J.get(tJ.dictRef)],W,g,t,nh,ng)):sI(!1,!1,g,t,W,n,tJ.dictRef,tB.frequencyUnits),Z.has(tQ.dictRef)?(N(W.id,tQ.dictRef),sj(n,a[J.get(tQ.dictRef)],W,g,t,nh,ng)):sM(!1,g,t,W,n,tQ.dictRef,void 0),Z.has(t0.dictRef)?(N(W.id,t0.dictRef),sj(n,a[J.get(t0.dictRef)],W,g,t,nh,ng)):sM(!1,g,t,W,n,t0.dictRef,void 0),Z.has(t1.dictRef)?(N(W.id,t1.dictRef),sj(n,a[J.get(t1.dictRef)],W,g,t,nh,ng)):sM(!1,g,t,W,n,t1.dictRef,void 0),Z.has(t2.dictRef)?(N(W.id,t2.dictRef),sj(n,a[J.get(t2.dictRef)],W,g,t,nh,ng)):sI(!1,!1,g,t,W,n,t2.dictRef,tB.frequencyUnits),Z.has(t3.dictRef)?(N(W.id,t3.dictRef),sj(n,a[J.get(t3.dictRef)],W,g,t,nh,ng)):sM(!1,g,t,W,n,t3.dictRef,tB.massUnits),Z.has(t5.dictRef)?(N(W.id,t5.dictRef),sj(n,a[J.get(t5.dictRef)],W,g,t,nh,ng)):(sM(!1,g,t,W,n,t5.dictRef,void 0).querySelector(C).click(),n.removeProperty(t5.dictRef)),Z.has(t4.dictRef)?(N(W.id,t4.dictRef),sj(n,a[J.get(t4.dictRef)],W,g,t,nh,ng)):sM(!1,g,t,W,n,t4.dictRef,tB.temperatureUnits),Z.has(t6.dictRef)?(N(W.id,t6.dictRef),sj(n,a[J.get(t6.dictRef)],W,g,t,nh,ng)):sM(!1,g,t,W,n,t6.dictRef,tB.lengthUnits),Z.has(t8.dictRef)?(N(W.id,t8.dictRef),sj(n,a[J.get(t8.dictRef)],W,g,t,nh,ng)):sD(!1,!1,g,t,W,n,t8.dictRef,tB.hessianUnits),Z.has(t9.dictRef)?(N(W.id,t9.dictRef),sj(n,a[J.get(t9.dictRef)],W,g,t,nh,ng)):sI(!1,!1,g,t,W,n,t9.dictRef,tB.EinsteinAUnits),Z.has(t7.dictRef)?(N(W.id,t7.dictRef),sj(n,a[J.get(t7.dictRef)],W,g,t,nh,ng)):sI(!1,!1,g,t,W,n,t7.dictRef,tB.EinsteinBUnits),Z.has(se.dictRef)?(N(W.id,se.dictRef),sj(n,a[J.get(se.dictRef)],W,g,t,nh,ng)):sM(!1,g,t,W,n,se.dictRef,tB.frequencyUnits),c.delete(ss.tagName),c.delete(tY.tagName);let Q=d[e].getElementsByTagName(so.tagName);if(Q.length>0){if(Q.length>1)throw Error("Expecting 1 or 0 "+so.tagName+" but finding "+Q.length+"!");(function(e,t,s,i,n){let a=i.getElementsByTagName(si.tagName);if(a.length>0){let i=e.addID(n.id,so.tagName),d=document.createElement("div");M(e.addID(i,nx),n,null,d,so.tagName,nh,ng);let o=[];for(let t=0;t<a.length;t++){let s=$(a[t]),n=new(u(p))(s),l=new si(es(a[t]),n);o.push(l);let r=si.tagName,g=e.addID(i,si.tagName,t),h=I("number",g,nh,ng,e=>{let i=e.target;ap(l,i),s=i.value,o[t].setValue(new(u(p))(s)),console.log("Set "+g+" to "+s),P(i)},s,r);d.appendChild(h);let c=document.createElement("label");c.textContent="units cm-1",h.appendChild(c)}t.setDeltaEDowns(o),s.setEnergyTransferModel(t)}})(t,new so(es(Q[0])),g,Q[0],l),c.delete(so.tagName)}let ee=d[e].getElementsByTagName(sl.tagName);if(ee.length>0){if(ee.length>1)throw Error("Expecting 1 or 0 "+sl.tagName+" but finding "+ee.length+"!");let e=new sl(es(ee[0]));l.appendChild(k(sl.tagName,sl.xsi_typeOptions,sl.tagName,e.getXsiType(),t.addID(o,sl.tagName),nh,ng)),c.delete(sl.tagName)}let et=d[e].getElementsByTagName(sh.tagName);if(et.length>0){if(et.length>1)throw Error("Expecting 1 or 0 "+sh.tagName+" but finding "+et.length+"!");let e=es(et[0]),s=new sh(e);g.setDistributionCalcMethod(s);let i=G(t.addID(o,sh.tagName));l.appendChild(i),i.appendChild(q(sh.tagName+" "+x(e),ng)),c.delete(sh.tagName)}let ei=d[e].getElementsByTagName(sw.tagName);if(ei.length>0){if(ei.length>1)throw Error("Expecting 1 or 0 "+sw.tagName+" but finding "+ei.length+"!");let e=new sw(es(ei[0]));g.setDensityOfStatesList(e);let s=t.addID(o,sw.tagName),i=G(s);M(t.addID(s,nx),l,null,i,sw.tagName,nh,ng);let n=ei[0].getElementsByTagName(sy.tagName),a=ei[0].getElementsByTagName(tA.tagName);if(a.length>0){if(a.length>1)throw Error("Expecting 1 or 0 "+tA.tagName+" but finding "+a.length+"!");let t=new tA(es(a[0]),Y(X(a[0])));e.setDescription(t)}if(0==n.length)throw Error("Expecting 1 or more "+sy.tagName+" but finding 0!");{let a=V(t.addID(s,nM),ng);F(a,sy.header),i.appendChild(a);for(let d=0;d<n.length;d++){let o=new sy(es(n[d]));e.addDensityOfStates(o);let l=U(t.addID(s,d),ng);i.appendChild(l);let r=n[d].getElementsByTagName(tk.tagName);if(1!=r.length)throw Error("Expecting 1 "+tk.tagName+" but finding "+r.length+"!");{let e=new tk(es(r[0]),new(u(p))(Y(X(r[0]))));o.setT(e)}let g=n[d].getElementsByTagName(sx.tagName);if(1!=g.length)throw Error("Expecting 1 "+sx.tagName+" but finding "+g.length+"!");{let e=new sx(es(g[0]),new(u(p))(Y(X(g[0]))));o.setQtot(e)}let h=n[d].getElementsByTagName(sv.tagName);if(1!=h.length)throw Error("Expecting 1 "+sv.tagName+" but finding "+h.length+"!");{let e=new sv(es(h[0]),new(u(p))(Y(X(h[0]))));o.setSumc(e)}let c=n[d].getElementsByTagName(sE.tagName);if(1!=c.length)throw Error("Expecting 1 "+sE.tagName+" but finding "+c.length+"!");{let e=new sE(es(c[0]),new(u(p))(Y(X(c[0]))));o.setSumg(e)}H(a,o.toStringArray())}au(e.toCSV,i,a,g.getID()+"_"+sw.tagName,ng)}c.delete(sw.tagName)}let en=sm.tagName,ea=d[e].getElementsByTagName(en);if(ea.length>0){let e;if(ea.length>1)throw Error("Expecting 1 or 0 "+en+" but finding "+ea.length+"!");let s=new sm(es(ea[0])),i=t.addID(o,sm.tagName),n=G(i);M(t.addID(i,nx),l,null,n,en,nh,ng);let a=sc.tagName,d=ea[0].getElementsByTagName(a);if(0==d.length)throw Error("Expecting 1 or more "+a+" but finding 0!");{e=[];let a=V(t.addID(i,nM),ng);F(a,s.getHeader());for(let t=0;t<d.length;t++){let s=new sc(es(d[t]));e.push(s),H(a,s.toStringArray())}n.appendChild(a),s.init(e),au(s.toCSV.bind(s),n,a,t.addID(g.getID(),sm.tagName),ng)}g.setThermoTable(s),c.delete(a),c.delete(en)}let ed=d[e].getElementsByTagName(sf.tagName);if(ed.length>0)for(let e=0;e<ed.length;e++){let s=new sf(es(ed[e])),i=t.addID(o,sf.tagName,e),n=G(i);M(t.addID(i,nx),l,null,n,sf.tagName,nh,ng);let a=ed[e].getElementsByTagName(sr.tagName);if(a.length>0){if(1!=a.length)throw Error("Expecting only 1 bondRef, but there are "+a.length);let e=g.getBonds().getBondIds(),s=new sr(es(a[0]),Y(X(a[0]))),d=k(sr.tagName,e,sr.tagName,s.value,t.addID(i,sr.tagName),nh,ng);d.getElementsByTagName("select")[0].classList.add(tq.tagName),n.appendChild(d)}let d=ed[e].getElementsByTagName(su.tagName);if(d.length>0){if(1!=d.length)throw Error("Expecting only 1 HinderedRotorPotential, but there are "+d.length);let e=es(d[0]),a=new su(e),o=t.addID(i,su.tagName),r=G(o);M(t.addID(o,nx),n,null,r,su.tagName,nh,ng);let g=k(su.s_format,su.formats,su.tagName,a.getFormat(),t.addID(o,su.s_format),nh,ng);r.appendChild(g),ad(tB.energyUnits,e,r,g,t.addID(o,su.s_units),su.tagName,nh,ng);let h=a.getExpansionSize()??nz;r.appendChild(I("text",t.addID(o,su.s_expansionSize),nh,ng,e=>{let t=e.target;try{console.log("Setting "+su.s_expansionSize+" to "+t.value),a.setExpansionSize(new(u(p))(t.value))}catch(e){alert("Invalid value, resetting..."),t.value=a.getExpansionSize()??nz}P(t)},h,su.s_expansionSize)),function(e,t,s,i){e.addID(t.id,su.s_useSineTerms);let n=su.s_useSineTerms+nu,a=su.s_useSineTerms+nm,d=O(a,void 0,i);t.appendChild(d),d.classList.add(ny),d.classList.add(nw),!0==s.getUseSineTerms()?(d.textContent=n,d.classList.toggle(nw)):(d.textContent=a,d.classList.toggle(ny)),d.addEventListener("click",e=>{!1==s.getUseSineTerms()?(s.setUseSineTerms(!0),d.textContent=n):(s.setUseSineTerms(!1),d.textContent=a),d.classList.toggle(ny),d.classList.toggle(nw)})}(t,r,a,ng);let c=t.addID(o,sg.tagName),m=G(c),f=M(t.addID(c,nx),l,null,m,"PotentialPoints",nh,ng);r.appendChild(f);let N=[],x=d[0].getElementsByTagName(sg.tagName);for(let e=0;e<x.length;e++){let s=new sg(es(x[e]));N.push(s);let i=t.addID(c,e),n=U(i,ng);m.appendChild(n);let a=q(sg.tagName+" "+e,nh);n.appendChild(a);let d=s.getAngle()??nz,o=I("text",t.addID(i,sg.s_angle),nh,nh,e=>{let t=e.target;if(y(t.value)){let e=new(u(p))(t.value);s.setAngle(e)}else alert("Angle input is not a number, resetting..."),t.value=s.getAngle()??nz;P(t)},d,sg.s_angle);n.appendChild(o);let l=q(sg.s_potential,nh);n.appendChild(l);let r=z("text",t.addID(i,sg.s_potential),nh);n.appendChild(r);let g=s.getPotential()??nz;r.addEventListener("change",e=>{let t=e.target;if(y(t.value)){let e=new(u(p))(t.value);s.setPotential(e),console.log("Set "+sg.tagName+" to "+e.toExponential())}else alert("Potential input is not a number, resetting..."),r.value=s.getPotential()??nz;P(r)}),r.value=g,P(r)}a.setPotentialPoints(N),s.setHinderedRotorPotential(a)}let r=ed[e].getElementsByTagName(sp.tagName);if(r.length>0){if(1!=r.length)throw Error("Expecting only 1 Periodicity, but there are "+r.length);let e=Y(X(r[0])),a=new sp(es(r[0]),new(u(p))(e));s.setPeriodicity(a);let d=I("text",t.addID(i,sp.tagName),nh,ng,t=>{let i=t.target;if(y(e=i.value)){let t=new(u(p))(e);a.value=t,s.getPeriodicity().value=t,console.log("Set "+sp.tagName+" to "+t)}else alert("Periodicity input is not a number, resetting..."),i.value=a.value.toExponential()},e,sp.tagName);n.appendChild(d)}g.setExtraDOSCMethod(e,s),c.delete(sf.tagName)}c.delete(sN.tagName);let eo=d[e].getElementsByTagName(sN.tagName);if(eo.length>0){if(1!=eo.length)throw Error("Expecting only 1 reservoirSize, but there are "+eo.length);let e=Y(X(eo[0])),t=new(u(p))(e),s=new sN(es(eo[0]),t);g.setReservoirSize(s);let i=I("number",g.getID()+"_"+sN.tagName,nh,ng,e=>{let t=e.target;s.value=new(u(p))(t.value),P(t)},e,sN.tagName);l.appendChild(i)}let el=d[e].getElementsByTagName(sR.tagName),er=t.addID(o,sb.tagName),eg=G(er);if(M(t.addID(er,nx),l,null,eg,sR.tagName,nh,ng),el.length>0){if(el.length>1)throw Error("Expecting 1 or 0 "+sR.tagName+" but finding "+el.length+"!");let e=new sR(es(el[0])),t=el[0].getElementsByTagName(sb.tagName);for(let s=0;s<t.length;s++){let i=new sb(es(t[s]),s);e.addState(i)}g.setStates(e),c.delete(sb.tagName)}c.delete("#text"),c.size>0&&(console.warn("There are additional unexpected moleculeTagNames:"),c.forEach(e=>console.warn(e))),an(l,ng,()=>{sH(i,h,t,s,o,g)})}let l=sS(i,t,s);return sP(i,l,t,s),i}(l,s,g),tz.tagName,nh,nr);let T=nA(t_.tagName);nk(T),n8(function(e,t,s,i,n){let a=N(s,C),d=document.querySelector(a),o=G(void 0,nh),l=ei(e,t_.tagName),r=new Set;if(l.childNodes.forEach(function(e){r.add(e.nodeName)}),r.size>0){if(1!=r.size&&!(2==r.size&&r.has("#text")||3==r.size&&r.has("#text")&&r.has("#comment")))throw console.error("reactionListTagNames:"),r.forEach(e=>console.error(e)),Error("Additional tag names in reactionList:");if(!r.has(ib.tagName))throw Error('Expecting tags with "'+ib.tagName+'" tagName but there are none!');let e=l.getElementsByTagName(ib.tagName);console.log("Number of reactions="+e.length);for(let s=0;s<e.length;s++){let a=new ib(es(e[s]));i.set(a.id,a);let l=new Set,r=e[s].childNodes,g=nA(ib.tagName,s),h=G(g);for(let e=0;e<r.length;e++){let t=r[e];l.has(t.nodeName)?"#text"!=t.nodeName&&console.warn("Another ChildNode with nodeName="+t.nodeName):l.add(t.nodeName)}let c=e[s].getElementsByTagName(io.tagName);l.delete(io.tagName);let m=t.addID(g,io.tagName),f=G(m);M(N(m,nx),h,null,f,nb,nh,ng);let v=new Map;if(c.length>0){for(let e=0;e<c.length;e++){let s=N(m,io.tagName,e),i=U(s);f.appendChild(i);let n=new id(es(j(c[e],sC.tagName))),a=new io(es(c[e]),n);v.set(n.getRef(),a);let d=k(n.getRef()+" role",io.roleOptions,"Role",n.getRole(),t.addID(s,S),nh,ng);d.querySelector("select")?.addEventListener("change",e=>{let t=e.target;n.setRole(t.value),console.log("Set Role to "+t.value),L(t)}),i.appendChild(d),an(i,nh,()=>{f.removeChild(i),t.removeIDs(s),v.delete(n.getRef())})}a.setReactants(v)}iC(a,d,t,g,f,n,v);let E=e[s].getElementsByTagName(il.tagName);l.delete(il.tagName);let y=t.addID(g,il.tagName),w=U(y);M(N(y,nx),h,null,w,nR,nh,ng);let R=new Map;if(E.length>0){for(let e=0;e<E.length;e++){let s=new id(es(j(E[e],sC.tagName))),i=new il(es(E[e]),s);R.set(s.getRef(),i);let n=k(s.getRef()+" role",il.roleOptions,s.getRole(),s.getRef(),t.addID(y,e,"Role"),nh,ng),a=n.querySelector("select");a.value=s.getRole(),a.addEventListener("change",e=>{let t=e.target;s.setRole(t.value),console.log("Set Role to "+t.value),L(t)}),L(a),w.appendChild(n),an(w,nh,()=>{w.removeChild(n),t.removeIDs(y),R.delete(s.getRef())})}a.setProducts(R)}iS(a,d,t,g,w,n,R);let b=M(nA(g,nx),o,null,h,a.getLabel(),nh,ng),C=e[s].getElementsByTagName(iN.tagName);if(C.length>0){if(C.length>1)throw Error("Expecting 1 "+iN.tagName+" but finding "+C.length+"!");let e=new iN(es(C[0]));a.setTunneling(e);let t=k(iN.tagName,iN.options,"Tunneling",e.getName(),nA(g,iN.tagName),nh,ng);t.querySelector("select")?.addEventListener("change",t=>{let s=t.target;e.setName(s.value),console.log("Set Tunneling to "+s.value),L(s)}),h.appendChild(t)}let T=e[s].getElementsByTagName(ir.tagName),z=nA(g,ir.tagName),_=G(z);M(nA(z,nx),h,null,_,nT,nh,ng);let D=new Map;if(T.length>0){for(let e=0;e<T.length;e++){let t=new id(es(j(T[e],sC.tagName))),s=new ir(es(T[e]),t);D.set(t.getRef(),s);let i=q(t.getRef()+" role "+ir.role,ng);_.appendChild(i)}a.setTransitionStates(D)}iM(t,g,_,n,D);let B=e[s].getElementsByTagName(iu.tagName);if(B.length>0){if(B.length>1)throw Error("Expecting 1 "+iu.tagName+" but finding "+B.length+"!");{let e;let t=es(B[0]),s=t.get("xsi:type");void 0==s&&(s=t.get("name"));let i=nA(g,iu.tagName),n=G(i);if(s==ip.xsiType||s==ip.xsiType2){let s=M(nA(i,nx),h,null,n,iu.tagName,nh,ng);h.appendChild(s),e=new ip(t);let a=B[0].getElementsByTagName(ig.tagName);if(null!=a&&null!=a[0]){let t=$(a[0]),s=new(u(p))(t),d=es(a[0]),o=new ig(d,s);e.setPreExponential(o);let l=I("number",nA(i,ig.tagName,nE),nh,ng,e=>{ap(o,e.target)},t,ig.tagName);n.appendChild(l);let r=l.querySelector("input");r.value=t,P(r),r.addEventListener("change",e=>{t=e.target.value,o.value=new(u(p))(t),console.log(ig.tagName+" changed to "+t),P(r)}),ad(void 0,d,l,null,nA(i,ig.tagName),ig.tagName,nh,nh),n.appendChild(l)}let d=B[0].getElementsByTagName(ih.tagName);if(null!=d&&null!=d[0]){let t=$(d[0]),s=new(u(p))(t),a=es(d[0]),o=new ih(a,s);e.setActivationEnergy(o);let l=I("number",nA(i,ih.tagName,nE),nh,ng,e=>{ap(o,e.target)},t,ih.tagName),r=l.querySelector("input");r.value=t,P(r),r.addEventListener("change",e=>{t=e.target.value,o.value=new(u(p))(t),console.log(ih.tagName+" changed to "+t),P(r)}),ad(void 0,a,l,null,nA(i,ih.tagName),ih.tagName,nh,nh),n.appendChild(l)}let o=B[0].getElementsByTagName(ic.tagName);if(null!=o&&null!=o[0]){let t=$(o[0]),s=new(u(p))(t),a=es(o[0]),d=new ic(a,s);e.setTInfinity(d);let l=I("number",nA(i,ic.tagName,nE),nh,ng,e=>{ap(d,e.target)},t,ic.tagName),r=l.querySelector("input");r.value=t,P(r),r.addEventListener("change",e=>{t=e.target.value,d.value=new(u(p))(t),console.log(ic.tagName+" changed to "+t),P(r)}),ad(void 0,a,l,null,nA(i,ic.tagName),ic.tagName,nh,nh),n.appendChild(l)}let l=B[0].getElementsByTagName(im.tagName);if(null!=l&&null!=l[0]){let t=$(l[0]),s=new(u(p))(t),a=es(l[0]),d=new im(a,s);e.setNInfinity(d);let o=I("number",nA(i,im.tagName,nE),nh,ng,e=>{ap(d,e.target)},t,im.tagName);n.appendChild(o);let r=o.querySelector("input");r.value=t,P(r),r.addEventListener("change",e=>{t=e.target.value,d.value=new(u(p))(t),console.log(im.tagName+" set to "+t),P(r)}),ad(void 0,a,o,null,nA(i,im.tagName),im.tagName,nh,nh),n.appendChild(o)}}else{e=new iu(t);let i=document.createElement("label");i.textContent=iu.tagName+": "+s,Object.assign(i.style,ng),n.appendChild(i),h.appendChild(n)}a.setMCRCMethod(e)}}let A=e[s].getElementsByTagName(ix.tagName);if(A.length>0){if(A.length>1)throw Error("Expecting 1 "+ix.tagName+" but finding "+A.length+"!");let e=new(u(p))(Y(X(A[0]))),t=new ix(es(A[0]),e);a.setExcessReactantConc(t);let s=I("number",nA(g,ix.tagName),nh,ng,e=>{ap(t,e.target)},e.toExponential(),ix.tagName);h.appendChild(s)}let O=e[s].getElementsByTagName(iR.tagName);if(O.length>0){if(O.length>1)throw Error("Expecting 1 "+iR.tagName+" but finding "+O.length+"!");let e=es(O[0]),t=new iR(e);a.setCanonicalRateList(t);let s=nA(g,iR.tagName),i=G(s),n=M(nA(s,nx),h,null,i,iR.tagName,nh,ng);h.appendChild(n);let d=O[0].getElementsByTagName(tA.tagName);if(d.length>0){if(d.length>1)throw Error("Expecting 1 "+tA.tagName+" but finding "+d.length+"!");let s=Y(X(d[0]));t.setDescription(new tA(es(d[0]),s));let n=q(s+" ("+x(e)+")",nh),a=G(void 0,ng);a.appendChild(n),i.appendChild(a)}let o=O[0].getElementsByTagName(iw.tagName);if(o.length>0){let e=V(nA(s,iw.tagName,nM),ng);i.appendChild(e);for(let s=0;s<o.length;s++){let i=new iw(es(o[s]));t.addKinf(i);let n=o[s].getElementsByTagName(tk.tagName);if(n.length>0){if(n.length>1)throw Error("Expecting 1 "+tk.tagName+" but finding "+n.length+"!");let e=new(u(p))(Y(X(n[0])));i.setT(new tk(es(n[0]),e))}let a=o[s].getElementsByTagName(iv.tagName);if(a.length>0){if(a.length>1)throw Error("Expecting 1 "+iv.tagName+" but finding "+a.length+"!");let e=new(u(p))(Y(X(a[0])));i.setVal(new iv(es(a[0]),e))}let d=o[s].getElementsByTagName(iE.tagName);if(d.length>0){if(d.length>1)throw Error("Expecting 1 "+iE.tagName+" but finding "+d.length+"!");let e=new(u(p))(Y(X(d[0])));i.setRev(new iE(es(d[0]),e))}let l=o[s].getElementsByTagName(iy.tagName);if(l.length>0){if(l.length>1)throw Error("Expecting 1 "+iy.tagName+" but finding "+l.length+"!");let e=new(u(p))(Y(X(l[0])));i.setKeq(new iy(es(l[0]),e))}0==s&&F(e,i.getHeader()),H(e,i.toStringArray())}au(t.toCSV.bind(t),i,e,a.id+"_"+iR.tagName,ng)}}an(h,ng,()=>{iT(o,b,t,g,i,a)})}}else console.warn("No reaction elements found! Please add a reaction in reactionList.");return o}(l,i,T,h,g)),no(n2,400,t,n3,4,2,m,g,h,!0);let _=document.getElementById(nF),D=nA(ey.tagName);nk(D),M(D,_,null,function(e,t,s){console.log(ey.tagName);let i=G(void 0,nh),n=e.getElementsByTagName(ey.tagName);for(let e=0;e<n.length;e++){let a=n[e],d=nA(ey.tagName,e.toString()),l=G(d,nh),r=nA(d,nx);M(r,i,null,l,ey.tagName+" "+e.toString(),nh,ng);let g=iD(es(a),e);iI(g,l,a,t,s),iz(g,l,a,t,s),an(l,ng,o.removeConditions.bind(o),e).addEventListener("click",e=>{nk(r),t.removeIDs(d)})}return i_(i,t,s),i}(l,n,g),"ConditionsList",nh,nr);let B=document.getElementById(nH),A=nA(tT.tagName,"list");nk(A),M(A,B,null,function(e,t){console.log(tT.tagName);let s=G(void 0,nh),i=e.getElementsByTagName(tT.tagName);for(let e=0;e<i.length;e++){let n=t.addID(tT.tagName,e.toString()),a=G(n,nh),d=t.addID(n,nx);M(d,s,null,a,tT.tagName+" "+e.toString(),nh,ng);let l=iX(es(i[e]),e);(function(e,t,s,i){let n,a,d=tb.tagName,o=U(i.addID(s.id,d),ng);s.appendChild(o);let l=d+nu,r=d+nm,g=O(d,i.addID(s.id,d,C),nh);g.classList.add(ny),g.classList.add(nw),o.appendChild(g);let h=i.addID(s.id,d,nE);if(null!=t){let s=t.getElementsByTagName(d);if(1==s.length){a=Y(X(s[0]));let t=new(u(p))(Number(a));n=new tb(es(s[0]),t),g.textContent=l,iK(e,o,n,h,a,e.setGrainSize,tB.energyUnits),g.classList.toggle(nw)}else n=iY(d),g.textContent=r,g.classList.toggle(ny)}else n=iY(d),g.textContent=r,g.classList.toggle(ny);g.addEventListener("click",()=>{e.index.has(tb.tagName)?(e.removeGrainSize(),document.getElementById(h)?.remove(),document.getElementById(N(h,n_))?.remove(),g.textContent=r):(iK(e,o,n,h,a,e.setGrainSize,tB.energyUnits),g.textContent=l),g.classList.toggle(ny),g.classList.toggle(nw)})})(l,i[e],a,t),i$(l,t,i[e],a,tm,l.setAutomaticallySetMaxEne,l.removeAutomaticallySetMaxEne.bind(l)),i$(l,t,i[e],a,tS,l.setEnergyAboveTheTopHill,l.removeEnergyAboveTheTopHill.bind(l)),i$(l,t,i[e],a,tM,l.setMaxTemperature,l.removeMaxTemperature.bind(l)),an(a,ng,o.removeModelParameters.bind(o),e).addEventListener("click",e=>{nk(d),t.removeIDs(n)})}return iW(s,t),s}(l,a),"ModelParametersList",nh,nr);let K=document.getElementById(nj),W=nA(tf.tagName);if(nk(W),M(W,K,null,function(e,t){console.log(tf.tagName);let s=G(void 0,nh),i=e.getElementsByTagName(tf.tagName);for(let e=0;e<i.length;e++){let n=i[e],a=t.addID(tf.tagName,e.toString()),d=G(a,nh);s.appendChild(d);let l=t.addID(a,nx);M(l,s,null,d,tf.tagName+" "+e.toString(),nh,ng);let r=i0(es(n),e),g=new Map;iZ(r).forEach(e=>{i2(r,d,t,g,n,null,e.class,e.setMethod,e.removeMethod)});let h=U(void 0,ng);if(new Map([...g.entries()].sort()).forEach(e=>{h.appendChild(e)}),d.appendChild(h),i5(r,d,t,null,ng),i3(r,d,t,n,ng),iJ(r).forEach(e=>{i2(r,d,t,g,n,ng,e.class,e.setMethod,e.removeMethod,!0)}),1==n.getElementsByTagName(eq.tagName).length){let e=new eq;r.setForceMacroDetailedBalance(e);let s=U(t.addID(a,eq.tagName),ng);d.appendChild(s);let i=q(eq.tagName,nh);s.appendChild(i)}an(d,ng,o.removeControl.bind(o),e).addEventListener("click",e=>{nk(l),t.removeIDs(a);let s=N(a,eF.tagName);t.removeIDs(s);let i=N(s,"details");t.removeIDs(i);let n=N(i,"select");t.removeIDs(n)})}return iQ(s,t),s}(l,d),"ControlList",nh,nr),l.getElementsByTagName(tR.tagName).length>0){let e=document.getElementById(nX),t=nA(tR.tagName);nk(t),M(t,e,null,function(e){console.log(tR.tagName);let t=G(nA(tR.tagName,0),nh),s=e.getElementsByTagName(tR.tagName);if(s.length>0){s.length>1&&console.warn("More than one MetadataList element - showing the last.");let e=new tR(es(s[s.length-1]));function i(i,n,a){let d=s[s.length-1].getElementsByTagName(i);if(d.length>0){if(1==d.length){let s=X(d[0])?.nodeValue??"",i=new n(es(d[0]),s),o=G(void 0,ng);t.appendChild(o),o.appendChild(q(i.tagName+" "+s,nh)),a.call(e,i)}else throw Error(`More than one ${i} element.`)}}o.setMetadataList(e),i(tv.tagName,tv,e.setSource),i(tE.tagName,tE,e.setCreator),i(ty.tagName,ty,e.setDate),i(tw.tagName,tw,e.setContributor)}return t}(l),tR.tagName,nh,nr)}if(l.getElementsByTagName(em.tagName).length>0){let e=document.getElementById(nY),t=nA(em.tagName);nk(t),M(t,e,null,function(e){console.log(em.tagName);let t=nA(em.tagName,0),s=G(t,nh),i=e.getElementsByTagName(em.tagName);if(i.length>0){if(i.length>1)throw Error("More than one Analysis element.");let e=new em(es(i[0]));o.setAnalysis(e);let n=i[0].getElementsByTagName(tA.tagName);if(n.length>0){if(1==n.length){let i=X(n[0])?.nodeValue??"",a=new tA(es(n[0]),i),d=G(nA(t,tA.tagName),ng);s.appendChild(d),d.appendChild(q(a.tagName+" "+i,nh)),e.setDescription(a)}else throw Error("More than one Description element.")}let a=i[0].getElementsByTagName(ea.tagName),d=nA(t,ea.tagName),l=G(d,ng);if(M(d,s,null,l,ea.tagName+"s",nh,ng),a.length>0)for(let t=0;t<a.length;t++){let s=es(a[t]),i=new ea(s),n=i.tagName+" "+t.toString()+" "+x(s),o=nA(l.id,t.toString()),r=G(d,ng);M(o,l,null,r,n,nh,nr),e.addEigenvalueList(i);let g=[],h=a[t].getElementsByTagName(en.tagName);if(h.length>0)for(let e=0;e<h.length;e++){let t=new p.Big(X(h[e])?.nodeValue);g.push(t),i.addEigenvalue(new en(es(h[e]),t))}r.appendChild(q(v(g,", "),nh))}let r=i[0].getElementsByTagName(el.tagName),g=nA(t,el.tagName),h=G(g,ng);if(M(g,s,null,h,el.tagName+"s",nh,ng),r.length>0)for(let t=0;t<r.length;t++){let i=es(r[t]);void 0!=i.get("T")&&new p.Big(i.get("T")),void 0!=i.get("conc")&&new p.Big(i.get("conc"));let n=new el(i),a=n.tagName+" "+t.toString()+" "+x(i),d=nA(s.id,el.tagName,t.toString()),o=nA(d,t.toString()),l=G(d,ng);M(o,h,null,l,a,nh,nr),e.addPopulationList(n);let g=new Map,m=[];m.push("time");let u=r[t].getElementsByTagName(eo.tagName);if(u.length>0)for(let e=0;e<u.length;e++){let t=es(u[e]),s=new eo(t,[]);n.addPopulation(s);let i=void 0!=t.get("time")?new p.Big(t.get("time")):nK,a=new Map;g.set(i,a);let d=u[e].getElementsByTagName(ed.tagName);if(d.length>0)for(let t=0;t<d.length;t++){let i=es(d[t]),n=i.get("ref");0==e&&m.push(n);let o=new p.Big(X(d[t])?.nodeValue),l=new ed(i,o);s.addPop(l),a.set(n,o)}}let f=G(nA(o,"graph"),nh);l.appendChild(f);let N=document.createElement("canvas");f.appendChild(N);let v=new al(N,g,"2em SensSerif");c.push(v),am(N,l,f,a);let E=G(nA(o,nM),nh);l.appendChild(E);let y=V(nA(d,nM),nh);F(y,m),g.forEach((e,t)=>{let s=[];s.push(t.toString()),e.forEach((e,t)=>{s.push(e.toString())}),H(y,s)}),E.appendChild(y),au(()=>ar(y),l,E,a,nh)}let m=i[0].getElementsByTagName(ec.tagName),u=nA(t,ec.tagName),f=G(u,ng);if(M(u,s,null,f,ec.tagName+"s",nh,ng),m.length>0)for(let t=0;t<m.length;t++){let s,i,n=es(m[t]),a=Array.from(n.keys()),d=[];for(let e=0;e<a.length;e++)d.push(n.get(a[e]));let o=new ec(n);o.setTemperature(new p.Big(n.get("T"))),o.setConcentration(new p.Big(n.get("conc"))),o.setBathGas(n.get("bathGas"));let l=n.get("units");o.setUnits(l),e.addRateList(o);let r=o.tagName+" "+t.toString()+" "+x(n),g=nB(u,t.toString()),h=G(g);f.appendChild(h),M(g,f,null,h,r,nh,nr);let c=nB(g,er.tagName),N=G(c);h.appendChild(N),M(c,h,null,N,er.tagName,nh,ng);let v=m[t].getElementsByTagName(er.tagName),E=V(c,nh),y=G(nA(c,nM),ng);y.appendChild(E),N.appendChild(y);for(let e=0;e<v.length;e++){let t=es(v[e]);0==e&&((s=Array.from(t.keys())).push("kloss/"+l),F(E,s)),i=Array.from(t.values()),s.length-1!=i.length&&console.error("FirstOrderLoss values0!.length != values!.length");let n=(X(v[e])?.nodeValue??"").trim(),a=new er(t,new p.Big(n));o.addFirstOrderLoss(a);for(let e=0;e<s.length;e++)s[e]==i[e]?i.push(t.get(i[e])):console.log("FirstOrderLoss values0![k] != values![k]");i.push(n),H(E,i)}au(()=>ar(E),N,y,"First Order Losses",ng);let w=nB(g,eg.tagName),R=G(w);h.appendChild(R),M(w,h,null,R,eg.tagName,nh,ng);let b=m[t].getElementsByTagName(eg.tagName),C=V(w,nh),S=G(nA(w,nM),ng);S.appendChild(C),R.appendChild(S);for(let e=0;e<b.length;e++){let t=es(b[e]);if(0==e){s=Array.from(t.keys());let e=Array.from(t.keys());(e=e.map(e=>"fromRef"==e?"reactant":"toRef"==e?"product":e)).push("k/"+l),F(C,e)}i=Array.from(t.values()),s.length!=i.length&&console.error("FirstOrderLoss values0!.length != values!.length");let n=(X(b[e])?.nodeValue??"").trim(),a=new eg(t,new p.Big(n));o.addFirstOrderRate(a);for(let e=0;e<s.length;e++)s[e]==i[e]?i.push(t.get(i[e])):console.log("FirstOrderRate values0![k] != values![k]");i.push(n),H(C,i)}au(()=>ar(C),R,S,"First Order Rates",ng);let T=nB(g,eh.tagName),I=G(T);h.appendChild(I),M(T,h,null,I,eh.tagName,nh,ng);let z=m[t].getElementsByTagName(eh.tagName),_=V(T,nh),D=G(nA(T,nM),ng);D.appendChild(_),I.appendChild(D);for(let e=0;e<z.length;e++){let t=es(z[e]);0==e&&((s=Array.from(t.keys())).push("k/cm3molecule-1"+l),F(_,s)),i=Array.from(t.values()),s.length-1!=i.length&&console.error("SecondOrderRate values0!.length != values!.length");let n=(X(z[e])?.nodeValue??"").trim(),a=new eh(t,new p.Big(n));o.addSecondOrderRate(a);for(let e=0;e<s.length;e++)s[e]==i[e]?i.push(t.get(i[e])):console.log("SecondOrderRate values0![k] != values![k]");i.push(n),H(_,i)}au(()=>ar(_),I,D,"Second Order Rates",ng)}}return s}(l),em.tagName,nh,nr)}}(new DOMParser().parseFromString(w,"text/xml"))}}};let R=r.slice(E,E+1048576);f.readAsText(R),E+=1048576}},l.click()}}),f.appendChild(b),_=O(T="Load Into Library",nB(T),nh),f.appendChild(_),D=new sZ,_.addEventListener("click",async e=>{let t=await D.readFile();void 0==r&&(r=new Map),t.forEach((e,t)=>{nZ(!1,e,r)})}),A=O(B="Clear Library",nB(B),nh),f.appendChild(A),A.addEventListener("click",async e=>{r=new Map}),(W=O(K="Load Defaults",nB(K),nh)).addEventListener("click",e=>{l.readFile()}),f.appendChild(W),(J=O(Z="Save",nB(Z),nh)).addEventListener("click",ah),f.appendChild(J),ee=O(Q="Restart",nB(Q),nh),f.appendChild(ee),ee.addEventListener("click",e=>{confirm("Any unsaved changes will be lost. Select OK to continue loading or Cancel to cancel.")&&n4()}),n4()});class al{constructor(e,t,s){this.canvas=e,this.data=t,this.draw(s)}draw(e){this.canvas.width=800,this.canvas.height=400;let t=this.canvas.getContext("2d");t.font=e,t.clearRect(0,0,this.canvas.width,this.canvas.height);let s=this.canvas.width,i=this.canvas.height,n=Number.MAX_VALUE,a=Number.MIN_VALUE,d=0;this.data.forEach((e,s)=>{let i=Math.log10(s.toNumber());n=Math.min(n,i),a=Math.max(a,i),e.forEach((e,s)=>{d=Math.max(d,t.measureText(s).width)})});let o=0;for(let e=0;e<2;e++){let s=1-1*e;o=Math.max(o,t.measureText(s.toString()).width)}let l=t.measureText("0"),r=l.actualBoundingBoxAscent+l.actualBoundingBoxDescent,g=4*r,h=o+r+20,c=i-(h+3*r),m=s-(g+d+20),u=(m-h)/(a-n),p=(g-c)/1;t.beginPath(),t.moveTo(h,c),t.lineTo(m,c),t.stroke(),t.beginPath(),t.moveTo(h,c),t.lineTo(h,g),t.stroke();let f=["red","green","blue","orange","purple","grey","cyan","magenta","lightblue","lightgreen","pink","yellow","brown","black"],N=new Map;this.data.forEach((e,s)=>{let i=0;e.forEach((e,a)=>{let d=h+(Math.log10(s.toNumber())-n)*u,o=e.toNumber();if(o<1){let e=c+(o-0)*p;if(e>0){t.beginPath(),t.arc(d,e,2,0,2*Math.PI);let s=f[i%f.length];N.set(a,s),t.fillStyle=s,t.fill()}}i++})}),t.textAlign="center",t.textBaseline="top",t.fillStyle="black",t.fillText("log10(time/secs)",h+(m-h)/2,c+g/2),t.save(),t.rotate(-Math.PI/2),t.textAlign="center",t.textBaseline="top",t.fillText("fractional population",-c-(g-c)/2,h-h),t.restore();let x=a-n,v=Math.abs(Math.ceil(x/Math.pow(10,Math.floor(Math.log10(x))))),E=Math.ceil(n/v),y=E*v;for(;y<a;){let e=h+(y-n)*u;t.beginPath(),t.moveTo(e,c),t.lineTo(e,c+5),t.stroke(),t.fillText(y.toString(),e,c+5),y+=v}for(let e=0;e<2;e++){let s=c-1*e;t.beginPath(),t.moveTo(h,s),t.lineTo(h-5,s),t.stroke()}let w=0;N.forEach((e,s)=>{let i=t.measureText(s),n=i.actualBoundingBoxAscent+i.actualBoundingBoxDescent;w=Math.max(w,n)});let R=m+20,b=w;E=0,N.forEach((e,s)=>{let i=g+E*b;t.fillStyle=e,t.fillRect(R,i,w/2,w/2),t.fillStyle="black",t.fillText(s,R+r+t.measureText(s).width/2,i-w/2),E++})}}function ar(e){let t="",s=e.rows;for(let e=0;e<s.length;e++){let i=s[e].cells;for(let e=0;e<i.length;e++)t+=i[e].textContent,e<i.length-1&&(t+=",");t+="\n"}return t}function ag(e,t,s,i=!1){let n=document.createElement("a");n.href=i?e:`data:${t};charset=utf-8,`+encodeURIComponent(e),n.download=s,document.body.appendChild(n),n.click(),document.body.removeChild(n)}function ah(){if(null==o){alert("No Mesmer object to save.");return}{let e=new tB(o.attributes);e.setTitle(o.getTitle()),void 0!=g&&e.setMoleculeList(new tz(new Map,Array.from(g.values()))),void 0!=h&&e.setReactionList(new t_(new Map,Array.from(h.values()))),void 0!=o.getConditionss()&&e.setConditionss(o.getConditionss()),void 0!=o.getModelParameterss()&&e.setModelParameterss(o.getModelParameterss()),void 0!=o.getControls()&&e.setControls(o.getControls());let t=o.getMetadataList();void 0!=t&&e.setMetadataList(t);let s=o.getAnalysis();void 0!=s&&e.setAnalysis(s),console.log("saveXML"),ag(tB.header+e.toXML("  ",""),"text/xml",ac(e.getTitle()?.value)+".xml")}}function ac(e){return e.replace(/[^a-z0-9]/gi,"_")}function am(e,t,s,i){let n=O("Save as PNG",nA(t.id,"saveButton"),nh);null!=s?t.insertBefore(n,s):t.appendChild(n),n.addEventListener("click",()=>{ag(e.toDataURL(),"image/png",ac(o.getTitle()?.value+"_"+i)+".png",!0)})}function au(e,t,s,i,n){let a=O("Save as CSV",nA(t.id,C,nC),n);t.insertBefore(a,s),a.addEventListener("click",()=>{let t=e(),s=ac(o.getTitle()?.value+"_"+i)+".csv";ag(t,"text/csv",s),console.log("Saved "+s)})}function ap(e,t){try{let s=new p.Big(t.value);e.value=s}catch(e){alert("Value invalid, resetting...")}t.value=e.value.toString()}
//# sourceMappingURL=index.80780198.js.map
