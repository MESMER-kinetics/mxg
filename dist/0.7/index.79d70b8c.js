let e,t,s,i;function n(e,t){if(!e.has(t))throw Error(`Key ${t} not found in map`);return e.get(t)}function a(e,t){return void 0==t&&(t=", "),e.map(e=>null==e?"null":e.toString()).join(t)}function o(e){let t=[];for(let s=0;s<e.length;s++)l(e[s])&&t.push(parseFloat(e[s]));return t}function l(e){return""!==e&&!isNaN(Number(e))}function d(e){let t=document.getElementById(e);null!=t&&t.parentNode?.removeChild(t)}function r({content:e,buttonLabel:t,buttonFontSize:s="",boundary:i={marginLeft:"",marginTop:"",marginBottom:"",marginRight:""},level:n={marginLeft:"",marginTop:"",marginBottom:"",marginRight:""},contentDivId:a="",contentDivClassName:o=""}){let l=v(i);l.id=a,l.className=o;let d=document.createElement("button");return d.id=a+"Button",d.className="collapsible",d.innerText=`${t} \u{25BC}`,d.addEventListener("click",function(){d.innerText=d.innerText.includes("â–¼")?`${t} \u{25B2}`:`${t} \u{25BC}`}),d.style.fontSize=s,Object.assign(d.style,n),l.appendChild(d),l.appendChild(e),l}function g(){this.classList.toggle("active");let e=this.nextElementSibling;"block"===e.style.display?e.style.display="none":e.style.display="block"}function h(e,t,s,i,n,a,o,l){let d;let r=((d=c(e,t,s)).onchange=n,d.value=a,void 0!=l&&(d.style.fontSize=l),u(d),d);Object.assign(r.style,s);let g=C(o,s);g.htmlFor=t,Object.assign(g.style,s);let h=E(i);return h.appendChild(g),h.appendChild(r),h}function c(e,t,s){let i=document.createElement("input");return i.type=e,i.id=t,Object.assign(i.style,s),i.classList.add("auto-width"),i}function m(e,t){let s="<"+t;if(e)for(let[t,i]of e)s+=" "+t+'="'+i+'"';return s+" />"}function u(e,t){void 0==t&&(t=4),e.style.width=e.value.length+t+"ch"}function p(e,t){void 0==t&&(t=6),e.style.width=e.value.length+t+"ch"}function f(e,t,s,i){let n=document.createElement("select");return e.forEach(e=>{n.name=t,n.id=s;let i=document.createElement("option");i.value=e,i.text=e,n.appendChild(i)}),n.style.fontSize="1em",n.classList.add("auto-width"),Object.assign(n.style,i),n}function N(e,t){let s=document.createElement("button");return s.textContent=e,Object.assign(s.style,t),s.style.fontSize="1em",s}function x(e,t,s,i){let n=E(i);n.appendChild(N(t,s));let a=C(e,s);return Object.assign(a.style,s),n.appendChild(a),n}function v(e){let t=document.createElement("div");return Object.assign(t.style,e),t}function E(e){let t=v(e);return t.style.display="flex",t}function C(e,t){let s=document.createElement("label");return Object.assign(s.style,t),s.textContent=e,s.style.fontSize="1em",s}function L(e,t){let s=e.getElementsByTagName(t)[0];if(null==s)throw Error(t+" element not found");return s}function b(e){let t=e.childNodes;if(null==t)throw Error("Element has no childNodes");return t[0]}function y(e){let t=e.nodeValue;if(null==t)throw Error("nodeValue is null");return t}function S(e){let t=b(e);return t?y(t).trim():""}class O{constructor(e){this.tagName=e}toXML(e){let t=m(void 0,this.tagName);return e?"\n"+e+t:t}}class T extends O{constructor(e,t){super(t),this.attributes=e}toString(){let e=this.tagName+"(";return this.attributes&&this.attributes.forEach((t,s)=>{e+=`${s}(${t}), `}),e}toXML(e){let t="";for(let[s,i]of(void 0!=e&&(t+="\n"+e),t+="<"+this.tagName,this.attributes))t+=" "+s+'="'+i.toString()+'"';return t+" />"}}class w extends T{constructor(e,t,s){super(e,t),this.value=s}toString(){return super.toString()+`, ${this.value.toString()})`}toXML(e){return z(this.value.trim(),this.tagName,this.attributes,e,!1)}}class P extends T{constructor(e,t,s){super(e,t),this.value=s}toString(){return super.toString()+`, ${this.value.toString()})`}toXML(e){return z(this.value.toString().trim(),this.tagName,this.attributes,e,!1)}}class _ extends T{constructor(e,t,s,i){super(e,t),this.delimiter=",",this.values=s,void 0!=i&&(this.delimiter=i)}toString(){return super.toString()+`, ${this.values.toString()})`}setDelimiter(e){this.delimiter=e}toXML(e){return z(this.values.toString().replaceAll(",",this.delimiter),this.tagName,this.attributes,e,!1)}}class M extends T{constructor(e,t){super(e,t),this.nodes=new Map}addNode(e){this.nodes.set(this.nodes.size,e)}toString(){let e=super.toString();return this.nodes.forEach((t,s)=>{e+=`, ${t.toString()}`}),e+")"}toXML(e,t){let s;void 0!=e&&void 0!=t&&(s=t+e);let i="";if(this.nodes.size>0)return this.nodes.forEach(t=>{t instanceof M?i+=t.toXML(e,s):i+=t.toXML(s)}),z(i,this.tagName,this.attributes,t,!0);{let e=m(this.attributes,this.tagName);return void 0!=t?"\n"+t+e:e}}}function z(e,t,s,i,n){let a;return function(e,t,s){let i="";if(void 0!=s&&(i+="\n"+s),i+="<"+e,t)for(let[e,s]of t)i+=" "+e+'="'+s.toString()+'"';return i+">"}(t,s,i)+e+(a="",n&&void 0!=i&&(a+="\n"+i),a+"</"+t+">")}function R(e){let t=e.getAttributeNames(),s=new Map;return t.forEach(function(t){let i=e.getAttribute(t);null!=i&&s.set(t,i)}),s}function B(e,t){let s=e.getElementsByTagName(t);if(1!=s.length)throw Error("Expecting 1 "+t+" but finding "+s.length);return s[0]}class I extends T{static{this.tagName="atom"}constructor(e){super(e,I.tagName);let t=e.get("elementType");if(void 0==t)throw Error("elementType is undefined");this.elementType=t;let s=e.get("id");void 0==s&&(s=this.elementType),this.id=s}}class F extends M{static{this.tagName="atomArray"}constructor(e,t){super(e,F.tagName),t.forEach(e=>{this.nodes.set(this.nodes.size,e)})}}class D extends T{static{this.tagName="bond"}static{this.s_atomRefs2="atomRefs2"}static{this.s_id="id"}static{this.s_order="order"}constructor(e){super(e,D.tagName);let t=e.get(D.s_atomRefs2);if(void 0==t)throw Error(D.s_atomRefs2+" is undefined!");this.atomRefs2=t}setAtomRefs2(e){this.atomRefs2=e,this.attributes.set(D.s_atomRefs2,e)}getId(){return this.attributes.get(D.s_id)}setId(e){this.attributes.set(D.s_id,e)}getOrder(){let e=this.attributes.get(D.s_order);if(void 0!=e)return parseFloat(e)}setOrder(e){this.attributes.set(D.s_order,e.toString())}}class k extends M{static{this.tagName="bondArray"}constructor(e,t){super(e,k.tagName),this.bonds=t,t.forEach(e=>{this.nodes.set(this.nodes.size,e)})}getBond(e){return this.bonds[e]}getBonds(){return this.bonds}setBond(e,t){this.bonds[e]=t,this.nodes.set(e,t)}addBond(e){this.bonds.push(e),this.nodes.set(this.nodes.size,e)}removeBond(e){this.bonds.splice(e,1),this.nodes.delete(e)}getBondIds(){let e=new Set;return this.bonds.forEach(t=>{e.add(t.getId())}),e}}class G extends P{static{this.tagName="scalar"}static{this.s_units="units"}constructor(e,t){super(e,G.tagName,t)}updateUnits(e){if(e){let t=this.attributes.get(G.s_units);void 0!=t&&t!=e&&this.attributes.set(G.s_units,e)}}}class A extends _{static{this.tagName="array"}static{this.s_units="units"}constructor(e,t,s){super(e,A.tagName,t,s)}updateUnits(e){if(e){let t=this.attributes.get(A.s_units);void 0!=t&&t!=e&&(this.attributes.set(A.s_units,e),console.log("Units changed from "+t+" to "+e))}}}class q extends M{static{this.tagName="property"}static{this.s_dictRef="dictRef"}constructor(e,t){super(e,q.tagName);let s=e.get(q.s_dictRef);if(void 0==s)throw Error(q.s_dictRef+" is undefined!");this.dictRef=s,t&&this.nodes.set(0,t)}getProperty(){return this.nodes.get(0)}setProperty(e){this.nodes.set(0,e)}}class U extends q{static{this.dictRef="me:ZPE"}static{this.units=["kJ/mol","cm-1","kcal/mol","Hartree"]}constructor(e,t){super(e,t)}setUnits(e){this.getProperty().updateUnits(e)}}class H extends q{static{this.dictRef="me:frequenciesScaleFactor"}constructor(e,t){super(e,t)}}class X extends q{static{this.dictRef="me:vibFreqs"}constructor(e,t){super(e,t)}}class j extends q{static{this.dictRef="me:rotConsts"}static{this.units=["cm-1","GHz"]}constructor(e,t){super(e,t)}}class $ extends q{static{this.dictRef="me:MW"}constructor(e,t){super(e,t)}}class V extends q{static{this.dictRef="me:imFreqs"}constructor(e,t){super(e,t)}}class W extends M{static{this.tagName="propertyList"}constructor(e,t){super(e,W.tagName),this.index=new Map,void 0!=t&&t.forEach(e=>{this.nodes.set(this.nodes.size,e),this.index.set(e.dictRef,this.nodes.size-1)})}getProperty(e){let t=this.index.get(e);if(void 0!=t)return this.nodes.get(t);throw Error("Property "+e+" does not exist")}setProperty(e){let t=this.index.get(e.dictRef);void 0==t?(this.nodes.set(this.nodes.size,e),this.index.set(e.dictRef,this.nodes.size-1)):(console.log("Property "+e.dictRef+" already exists, updating..."),this.nodes.set(t,e))}}class K extends P{static{this.tagName="me:deltaEDown"}static{this.s_bathGas="bathGas"}static{this.s_units="units"}static{this.s_lower="lower"}static{this.s_upper="upper"}static{this.s_stepsize="stepsize"}constructor(e,t){super(e,K.tagName,t)}getBathGas(){return this.attributes.get(K.s_bathGas)}setBathGas(e){this.attributes.set(K.s_bathGas,e)}getUnits(){return this.attributes.get(K.s_units)}setUnits(e){this.attributes.set(K.s_units,e)}getLower(){return parseFloat(n(this.attributes,K.s_lower))}setLower(e){this.attributes.set(K.s_lower,e.toString())}getUpper(){return parseFloat(n(this.attributes,K.s_upper))}setUpper(e){this.attributes.set(K.s_upper,e.toString())}getStepsize(){return parseFloat(n(this.attributes,K.s_stepsize))}setStepsize(e){this.attributes.set(K.s_stepsize,e.toString())}setValue(e){this.value=e}}class Y extends M{static{this.tagName="me:energyTransferModel"}constructor(e,t){super(e,Y.tagName),void 0!=t&&t.forEach(e=>{this.nodes.set(this.nodes.size,e)})}getDeltaEDowns(){let e=[];return this.nodes.forEach(t=>{t instanceof K&&e.push(t)}),e}setDeltaEDowns(e){this.nodes.clear(),e.forEach(e=>{this.nodes.set(this.nodes.size,e)})}getDeltaEDown(e){if(e<0||e>=this.nodes.size)throw Error("index out of range");return this.nodes.get(e)}setDeltaEDown(e,t){this.nodes.set(e,t)}addDeltaEDown(e){return this.nodes.set(this.nodes.size,e),this.nodes.size-1}}class J extends T{static{this.tagName="me:DOSCMethod"}static{this.s_xsi_type="xsi:type"}constructor(e){if(super(e,J.tagName),void 0==e.get(J.s_xsi_type)){let t=e.get("name");if(void 0==t)throw Error("Neither xsi:type or name are defined.");e.set(J.s_xsi_type,t)}}getXsiType(){return this.attributes.get(J.s_xsi_type)}setXsiType(e){this.attributes.set(J.s_xsi_type,e)}}class Q extends w{static{this.tagName="me:bondRef"}constructor(e,t){super(e,Q.tagName,t)}}class Z extends T{static{this.tagName="me:PotentialPoint"}static{this.s_angle="angle"}static{this.s_potential="potential"}constructor(e){super(e,Z.tagName);let t=e.get(Z.s_angle);if(void 0==t)throw Error(Z.s_potential+" is undefined!");this.angle=parseFloat(t);let s=e.get(Z.s_potential);if(void 0==s)throw Error(Z.s_potential+" is undefined!");this.potential=parseFloat(s)}getAngle(){return this.angle}setAngle(e){this.angle=e,this.attributes.set(Z.s_angle,e.toString())}getPotential(){return this.potential}setPotential(e){this.potential=e,this.attributes.set(Z.s_potential,e.toString())}}class ee extends M{static{this.tagName="me:HinderedRotorPotential"}static{this.formats=["numerical","analytical"]}static{this.units=["kJ/mol","cm-1","Hartree"]}static{this.s_format="format"}static{this.s_units="units"}static{this.s_expansionSize="expansionSize"}static{this.s_useSineTerms="useSineTerms"}constructor(e,t){super(e,ee.tagName);let s=e.get(ee.s_format);if(void 0==s)throw Error(ee.s_format+" is undefined!");this.format=s;let i=e.get(ee.s_units);if(void 0==i)throw Error(ee.s_units+" is undefined!");this.units=i,void 0!=t&&t.forEach(e=>{this.nodes.set(this.nodes.size,e)});let n=e.get(ee.s_expansionSize);if(void 0==n)throw Error(ee.s_expansionSize+" is undefined!");this.expansionSize=parseFloat(n);let a=e.get(ee.s_useSineTerms);if(void 0==a)throw Error(ee.s_useSineTerms+" is undefined!");this.useSineTerms="yes"==a}getFormat(){return this.format}setFormat(e){this.format=e,this.attributes.set(ee.s_format,e)}getUnits(){return this.units}setUnits(e){this.units=e,this.attributes.set(ee.s_units,e)}getExpansionSize(){return this.expansionSize}setExpansionSize(e){this.expansionSize=e,this.attributes.set(ee.s_expansionSize,e.toString())}getUseSineTerms(){return this.useSineTerms}setUseSineTerms(e){this.useSineTerms=e,this.attributes.set(ee.s_useSineTerms,e?"yes":"no")}getPotentialPoint(e){return this.nodes.get(e)}setPotentialPoint(e,t){this.nodes.set(e,t)}setPotentialPoints(e){this.nodes.clear(),e.forEach(e=>{this.nodes.set(this.nodes.size,e)})}addPotentialPoint(e){return this.nodes.set(this.nodes.size,e),this.nodes.size-1}removePotentialPoint(e){this.nodes.delete(e)}}class et extends P{static{this.tagName="me:periodicity"}constructor(e,t){super(e,et.tagName,t)}}class es extends M{static{this.tagName="me:ExtraDOSCMethod"}constructor(e,t,s,i){super(e,es.tagName),this.index=new Map,t&&(this.nodes.set(this.nodes.size,t),this.index.set(Q.tagName,this.nodes.size-1)),s&&(this.nodes.set(this.nodes.size,s),this.index.set(ee.tagName,this.nodes.size-1)),i&&(this.nodes.set(this.nodes.size,i),this.index.set(et.tagName,this.nodes.size-1))}getBondRef(){let e=this.index.get(Q.tagName);if(void 0!=e)return this.nodes.get(e)}setBondRef(e){let t=this.index.get(Q.tagName);void 0!=t?this.nodes.set(t,e):(this.nodes.set(this.nodes.size,e),this.index.set(Q.tagName,this.nodes.size-1))}getHinderedRotorPotential(){let e=this.index.get(ee.tagName);if(void 0!=e)return this.nodes.get(e)}setHinderedRotorPotential(e){let t=this.index.get(ee.tagName);void 0!=t?this.nodes.set(t,e):(this.nodes.set(this.nodes.size,e),this.index.set(ee.tagName,this.nodes.size-1))}getPeriodicity(){let e=this.index.get(et.tagName);if(void 0!=e)return this.nodes.get(e)}setPeriodicity(e){let t=this.index.get(et.tagName);void 0!=t?this.nodes.set(t,e):(this.nodes.set(this.nodes.size,e),this.index.set(et.tagName,this.nodes.size-1))}}class ei extends P{static{this.tagName="me:reservoirSize"}constructor(e,t){super(e,ei.tagName,t)}}class en extends M{static{this.tagName="molecule"}static{this.s_id="id"}static{this.s_description="description"}static{this.s_active="active"}constructor(e,t,s,i,n,a,o,l){super(e,en.tagName),this.index=new Map;let d=e.get(en.s_id);if(void 0==d)throw Error(en.s_id+" is undefined");this.id=d;let r=0;t&&(this.nodes.set(r,t),t instanceof I?this.index.set(I.tagName,r):this.index.set(F.tagName,r),r++),s&&(this.nodes.set(r,s),this.index.set(k.tagName,r),r++),i&&(this.nodes.set(r,i),this.index.set(W.tagName,r),r++),n&&(this.nodes.set(r,n),this.index.set(Y.tagName,r),r++),a&&(this.nodes.set(r,a),this.index.set(J.tagName,r)),o&&(this.nodes.set(r,o),this.index.set(es.tagName,r)),l&&(this.nodes.set(r,l),this.index.set(ei.tagName,r))}getDescription(){return this.attributes.get(en.s_description)}setDescription(e){this.attributes.set(en.s_description,e)}getActive(){let e=this.attributes.get(en.s_active);if(void 0!=e)return"true"==e}setActive(e){this.attributes.set(en.s_active,e.toString())}getLabel(){let e=this.id,t=this.getDescription();return void 0!=t&&(e+=" ("+t+")"),this.getActive()&&(e+=" ("+en.s_active+")"),e}getAttributesAsString(){return Array.from(this.attributes,([e,t])=>`${e}="${t}"`).join(", ")}getProperties(){let e=this.index.get(W.tagName);if(void 0!=e||void 0!=(e=this.index.get(q.tagName)))return this.nodes.get(e)}setProperties(e){let t=this.index.get(W.tagName);void 0==t?(this.index.set(W.tagName,this.nodes.size),this.addNode(e)):this.nodes.set(t,e)}getProperty(e){let t=this.getProperties();if(void 0!=t)return t instanceof W?t.getProperty(e):t}setProperty(e){let t=this.getProperties();void 0!=t?t instanceof W?t.setProperty(e):this.setProperties(t):this.setProperties(e)}getAtoms(){let e=this.index.get(I.tagName);if(void 0!=e||void 0!=(e=this.index.get(F.tagName)))return this.nodes.get(e)}getBonds(){let e=this.index.get(k.tagName);if(void 0!=e)return this.nodes.get(e)}getEnergyTransferModel(){let e=this.index.get(Y.tagName);if(void 0!=e)return this.nodes.get(e)}setEnergyTransferModel(e){let t=this.index.get(Y.tagName);void 0==t?(this.index.set(Y.tagName,this.nodes.size),this.addNode(e)):this.nodes.set(t,e)}getDOSCMethod(){let e=this.index.get(J.tagName);if(void 0!=e)return this.nodes.get(e)}setDOSCMethod(e){let t=this.index.get(J.tagName);void 0==t?(this.index.set(J.tagName,this.nodes.size),this.addNode(e)):this.nodes.set(t,e)}getExtraDOSCMethod(){let e=this.index.get(es.tagName);if(void 0!=e)return this.nodes.get(e)}setExtraDOSCMethod(e){let t=this.index.get(es.tagName);void 0==t?(this.index.set(es.tagName,this.nodes.size),this.addNode(e)):this.nodes.set(t,e)}getReservoirSize(){let e=this.index.get(ei.tagName);if(void 0!=e)return this.nodes.get(e)}setReservoirSize(e){let t=this.index.get(ei.tagName);void 0==t?(this.index.set(ei.tagName,this.nodes.size),this.addNode(e)):this.nodes.set(t,e)}getEnergy(){let e=this.getProperty(U.dictRef);if(void 0==e)throw console.log(this.toString()),Error(U.dictRef+" property not found!");return e.getProperty().value}}class ea extends T{static{this.tagName="molecule"}constructor(e){super(e,ea.tagName),this.ref=e.get("ref"),this.role=e.get("role")}setRole(e){this.role=e}}class eo extends M{static{this.tagName="reactant"}constructor(e,t){super(e,eo.tagName),this.addNode(t)}getMolecule(){return this.nodes.get(0)}}class el extends M{static{this.tagName="product"}constructor(e,t){super(e,el.tagName),this.addNode(t)}getMolecule(){return this.nodes.get(0)}}class ed extends M{static{this.tagName="me:transitionState"}constructor(e,t){super(e,ed.tagName),this.addNode(t)}getMolecule(){return this.nodes.get(0)}}class er extends P{static{this.tagName="me:preExponential"}constructor(e,t){super(e,er.tagName,t)}}class eg extends P{static{this.tagName="me:activationEnergy"}constructor(e,t){super(e,eg.tagName,t)}}class eh extends P{static{this.tagName="me:TInfinity"}constructor(e,t){super(e,eh.tagName,t)}}class ec extends P{static{this.tagName="me:nInfinity"}constructor(e,t){super(e,ec.tagName,t)}}class em extends M{static{this.tagName="me:MCRCMethod"}constructor(e){super(e,em.tagName)}}class eu extends em{static{this.xsiType="me:MesmerILT"}static{this.xsiType2="MesmerILT"}constructor(e,t,s,i,n){super(e),this.index=new Map,void 0!=t&&(this.index.set(er.tagName,this.index.size),this.addNode(t)),void 0!=s&&(this.index.set(eg.tagName,this.index.size),this.addNode(s)),void 0!=i&&(this.index.set(eh.tagName,this.index.size),this.addNode(i)),void 0!=n&&(this.index.set(ec.tagName,this.index.size),this.addNode(n))}getPreExponential(){let e=this.index.get(er.tagName);if(void 0!=e)return this.nodes.get(e)}setPreExponential(e){let t=this.index.get(er.tagName);void 0==t?(this.index.set(er.tagName,this.nodes.size),this.addNode(e)):this.nodes.set(t,e)}getActivationEnergy(){let e=this.index.get(eg.tagName);if(void 0!=e)return this.nodes.get(e)}setActivationEnergy(e){let t=this.index.get(eg.tagName);void 0==t?(this.index.set(eg.tagName,this.nodes.size),this.addNode(e)):this.nodes.set(t,e)}getTInfinity(){let e=this.index.get(eh.tagName);if(void 0!=e)return this.nodes.get(e)}setTInfinity(e){let t=this.index.get(eh.tagName);void 0==t?(this.index.set(eh.tagName,this.nodes.size),this.addNode(e)):this.nodes.set(t,e)}getNInfinity(){let e=this.index.get(ec.tagName);if(void 0!=e)return this.nodes.get(e)}setNInfinity(e){let t=this.index.get(ec.tagName);void 0==t?(this.index.set(ec.tagName,this.nodes.size),this.addNode(e)):this.nodes.set(t,e)}}class ep extends T{static{this.tagName="me:tunneling"}static{this.s_name="name"}constructor(e){super(e,ep.tagName)}getName(){return this.attributes.get(ep.s_name)}setName(e){this.attributes.set(ep.s_name,e)}}class ef extends P{static{this.tagName="me:excessReactantConc"}constructor(e,t){super(e,ef.tagName,t)}}class eN extends M{static{this.tagName="reaction"}static{this.s_id="id"}constructor(e,t,s,i,n,a,o){super(e,eN.tagName),this.index=new Map,this.reactantsIndex=new Map,this.productsIndex=new Map,this.transitionStatesIndex=new Map;let l=e.get(eN.s_id);if(void 0==l)throw Error(eN.s_id+" is undefined!");this.id=l,void 0!=t&&(t.forEach(e=>{this.reactantsIndex.set(e.getMolecule().ref,this.nodes.size),this.addNode(e)}),this.index.set(eo.tagName,this.reactantsIndex)),void 0!=s&&(s.forEach(e=>{this.productsIndex.set(e.getMolecule().ref,this.nodes.size),this.addNode(e)}),this.index.set(el.tagName,this.productsIndex)),void 0!=i&&(this.index.set(ep.tagName,this.nodes.size),this.addNode(i)),void 0!=n&&(n.forEach(e=>{this.transitionStatesIndex.set(e.getMolecule().ref,this.nodes.size),this.addNode(e)}),this.index.set(ed.tagName,this.transitionStatesIndex)),void 0!=a&&(this.index.set(em.tagName,this.nodes.size),this.addNode(a)),void 0!=o&&(this.index.set(ef.tagName,this.nodes.size),this.addNode(o))}addToIndex(e,t){let s=this.index.get(e);if(void 0==s)this.index.set(e,this.nodes.size);else if(s instanceof Map)s.set(t.tagName,this.nodes.size);else{let i=new Map;i.set(this.nodes.get(s).ref,s),i.set(t.tagName,this.nodes.size),this.index.set(e,i)}}getReactants(){let e=this.index.get(eo.tagName);return void 0==e?[]:e instanceof Map?Array.from(e.values()).map(e=>this.nodes.get(e)):[this.nodes.get(e)]}setReactants(e){e.forEach(e=>{this.reactantsIndex.set(e.getMolecule().ref,this.nodes.size),this.addNode(e)}),this.index.set(eo.tagName,this.reactantsIndex)}getReactant(e){let t=this.reactantsIndex.get(e);if(void 0==t)throw Error(`Reactant with ref ${e} not found`);return this.nodes.get(t)}addReactant(e){this.reactantsIndex.set(e.getMolecule().ref,this.nodes.size),this.addNode(e)}removeReactant(e){let t=this.reactantsIndex.get(e);if(void 0==t)throw Error(`Reactant with ref ${e} not found`);this.nodes.delete(t),this.reactantsIndex.delete(e)}getProducts(){let e=this.index.get(el.tagName);return void 0==e?[]:e instanceof Map?Array.from(e.values()).map(e=>this.nodes.get(e)):[this.nodes.get(e)]}setProducts(e){e.forEach(e=>{this.productsIndex.set(e.getMolecule().ref,this.nodes.size),this.addNode(e)}),this.index.set(el.tagName,this.productsIndex)}getProduct(e){let t=this.productsIndex.get(e);if(void 0==t)throw Error(`Product with ref ${e} not found`);return this.nodes.get(t)}addProduct(e){this.productsIndex.set(e.getMolecule().ref,this.nodes.size),this.addNode(e)}removeProduct(e){let t=this.productsIndex.get(e);if(void 0==t)throw Error(`Product with ref ${e} not found`);this.nodes.delete(t),this.productsIndex.delete(e)}getTunneling(){let e=this.index.get(ep.tagName);if(void 0!=e)return this.nodes.get(e)}setTunneling(e){let t=this.index.get(ep.tagName);if(void 0==t)this.index.set(ep.tagName,this.nodes.size),this.addNode(e);else{if(t instanceof Map)throw Error("Tunneling is a map and it is assumed there would be only 1!");this.nodes.set(t,e)}}getTransitionStates(){let e=this.index.get(ed.tagName);return void 0==e?[]:e instanceof Map?Array.from(e.values()).map(e=>this.nodes.get(e)):[this.nodes.get(e)]}setTransitionStates(e){e.forEach(e=>{this.transitionStatesIndex.set(e.getMolecule().ref,this.nodes.size),this.addNode(e)}),this.index.set(ed.tagName,this.transitionStatesIndex)}getTransitionState(e){let t=this.transitionStatesIndex.get(e);if(void 0==t)throw Error(`Transition state with ref ${e} not found`);return this.nodes.get(t)}addTransitionState(e){this.transitionStatesIndex.set(e.getMolecule().ref,this.nodes.size),this.addNode(e)}removeTransitionState(e){let t=this.transitionStatesIndex.get(e);if(void 0==t)throw Error(`Transition State with ref ${e} not found`);this.nodes.delete(t),this.transitionStatesIndex.delete(e)}getMCRCMethod(){let e=this.index.get(em.tagName);if(void 0!=e)return this.nodes.get(e)}setMCRCMethod(e){let t=this.index.get(em.tagName);if(void 0==t)this.index.set(em.tagName,this.nodes.size),this.addNode(e);else{if(t instanceof Map)throw Error("MCRCMethod is a map and it is assumed there would be only 1!");this.nodes.set(t,e)}}getExcessReactantConc(){let e=this.index.get(ef.tagName);if(void 0!=e)return this.nodes.get(e)}setExcessReactantConc(e){let t=this.index.get(ef.tagName);if(void 0==t)this.index.set(ef.tagName,this.nodes.size),this.addNode(e);else{if(t instanceof Map)throw Error("ExcessReactantConc is a map and it is assumed there would be only 1!");this.nodes.set(t,e)}}getReactantsLabel(){return this.getReactants().map(e=>e.getMolecule().ref).join(" + ")}getProductsLabel(){return this.getProducts().map(e=>e.getMolecule().ref).join(" + ")}getLabel(){return this.getReactantsLabel()+" -> "+this.getProductsLabel()}getReactantsEnergy(e){return Array.from(this.getReactants()).map(t=>{let s=e.get(t.getMolecule().ref);if(void 0==s)throw Error(`Molecule with ref ${t.getMolecule().ref} not found`);return s.getEnergy()}).reduce((e,t)=>e+t,0)}getProductsEnergy(e){return Array.from(this.getProducts()).map(t=>{let s=e.get(t.getMolecule().ref);if(void 0==s)throw Error(`Molecule with ref ${t.getMolecule().ref} not found`);return s.getEnergy()}).reduce((e,t)=>e+t,0)}get(e,t){if(this.index.has(e)){let s=this.index.get(e);if(void 0!=s){if(!(s instanceof Map))return this.nodes.get(s);{let e=s.get(t);if(void 0!=e)return this.nodes.get(e)}}}}}function ex(e,t,s,i,n,a,o,l,d,r,g){let h=i+(a-i)/2;eE(e,g,l,t,h-eC(e,g,l)/2,o+d),eE(e,r,l,t,h-eC(e,r,l)/2,o+3*d),ev(e,t,s,i,n,a,o)}function ev(e,t,s,i,n,a,o){e.beginPath(),e.strokeStyle=t,e.lineWidth=s,e.moveTo(i,n),e.lineTo(a,o),e.stroke()}function eE(e,t,s,i,n,a){e.save(),e.translate(n,a),e.scale(1,-1),e.font=s,e.fillStyle=i,e.fillText(t,0,0),e.restore()}function eC(e,t,s){return e.font=s,e.measureText(t).width}class eL extends w{static{this.tagName="me:bathGas"}constructor(e,t){super(e,eL.tagName,t)}}class eb extends P{static{this.tagName="me:experimentRate"}static{this.s_ref1="ref1"}static{this.s_ref2="ref2"}static{this.s_refReaction="refReaction"}static{this.s_error="error"}constructor(e,t){super(e,eb.tagName,t)}getRef1(){return this.attributes.get(eb.s_ref1)}setRef1(e){this.attributes.set(eb.s_ref1,e)}getRef2(){return this.attributes.get(eb.s_ref2)}setRef2(e){this.attributes.set(eb.s_ref2,e)}getRefReaction(){return this.attributes.get(eb.s_refReaction)}setRefReaction(e){this.attributes.set(eb.s_refReaction,e)}getError(){let e=this.attributes.get(eb.s_error);if(void 0!=e)return parseFloat(e)}setError(e){this.attributes.set(eb.s_error,e.toString())}}class ey extends P{static{this.tagName="me:experimentalYield"}static{this.s_ref="ref"}static{this.s_error="error"}static{this.s_yieldTime="yieldTime"}constructor(e,t){super(e,ey.tagName,t)}getRef(){return this.attributes.get(ey.s_ref)}setRef(e){this.attributes.set(ey.s_ref,e)}getError(){let e=this.attributes.get(ey.s_error);if(void 0!=e)return parseFloat(e)}setError(e){this.attributes.set(ey.s_error,e.toString())}getYieldTime(){let e=this.attributes.get(ey.s_yieldTime);if(e)return parseFloat(e)}setYieldTime(e){this.attributes.set(ey.s_yieldTime,e.toString())}}class eS extends P{static{this.tagName="me:experimentalEigenvalue"}static{this.s_EigenvalueID="EigenvalueID"}static{this.s_error="error"}constructor(e,t){super(e,eS.tagName,t)}getEigenvalueID(){return this.attributes.get(eS.s_EigenvalueID)}setEigenvalueID(e){this.attributes.set(eS.s_EigenvalueID,e)}getError(){let e=this.attributes.get(eS.s_error);if(void 0!=e)return parseFloat(e)}setError(e){this.attributes.set(eS.s_error,e.toString())}}class eO extends P{static{this.tagName="me:excessReactantConc"}static{this.s_percent="percent"}constructor(e,t){super(e,eO.tagName,t)}getPercent(){return this.attributes.get(eO.s_percent)}setPercent(e){this.attributes.set(eO.s_percent,e)}}class eT extends M{static{this.tagName="me:PTpair"}static{this.precisions=["d","dd","qd","double","double-double","quad-double"]}static{this.pressureUnits=["Torr","PPCC","atm","mbar","psi","mols/cc"]}static{this.s_P="P"}static{this.s_T="T"}static{this.s_precision="precision"}static{this.s_excessReactantConc="excessReactantConc"}static{this.s_percentExcessReactantConc="percentExcessReactantConc"}constructor(e,t,s,i,n){super(e,eT.tagName),this.index=new Map,void 0!=t&&(this.index.set(eL.tagName,this.nodes.size),this.addNode(t)),void 0!=s&&(this.index.set(eb.tagName,this.nodes.size),this.addNode(s)),void 0!=i&&(this.index.set(ey.tagName,this.nodes.size),this.addNode(i)),void 0!=n&&(this.index.set(eS.tagName,this.nodes.size),this.addNode(n))}getP(){let e=this.attributes.get(eT.s_P);return void 0!=e?parseFloat(e):NaN}setP(e){this.attributes.set(eT.s_P,e.toString())}getT(){let e=this.attributes.get(eT.s_T);return void 0!=e?parseFloat(e):NaN}setT(e){this.attributes.set(eT.s_T,e.toString())}getPrecision(){return this.attributes.get(eT.s_precision)}setPrecision(e){this.attributes.set(eT.s_precision,e)}getBathGas(){let e=this.index.get(eL.tagName);return void 0!=e?this.nodes.get(e):void 0}setBathGas(e){let t=this.index.get(eL.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eL.tagName,this.nodes.size),this.addNode(e))}removeBathGas(){let e=this.index.get(eL.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(eL.tagName))}getExperimentRate(){let e=this.index.get(eb.tagName);return void 0!=e?this.nodes.get(e):void 0}setExperimentRate(e){let t=this.index.get(eb.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eb.tagName,this.nodes.size),this.addNode(e))}removeExperimentRate(){let e=this.index.get(eb.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(eb.tagName))}getExcessReactantConc(){return this.attributes.get(eT.s_excessReactantConc)}setExcessReactantConc(e){this.attributes.set(eT.s_excessReactantConc,e)}getPercentExcessReactantConc(){return this.attributes.get(eT.s_percentExcessReactantConc)}setPercentExcessReactantConc(e){this.attributes.set(eT.s_percentExcessReactantConc,e)}}class ew extends M{static{this.tagName="me:PTs"}constructor(e,t){super(e,ew.tagName),void 0!=t?(t.forEach(e=>{this.addNode(e)}),this.pTpairs=t):this.pTpairs=[]}getPTpair(e){return this.pTpairs[e]}setPTpair(e,t){this.nodes.set(e,t),this.pTpairs[e]=t}addPTpair(e){return this.addNode(e),this.pTpairs.push(e),this.nodes.size-1}setPTpairs(e){this.nodes.clear(),e.forEach(e=>{this.addNode(e),this.pTpairs.push(e)})}removePTpair(e){this.nodes.delete(e),this.pTpairs.splice(e,1)}}class eP extends M{static{this.tagName="me:conditions"}constructor(e,t,s){super(e,eP.tagName),this.index=new Map,this.bathGasesIndex=new Map,this.bathGases=new Set,void 0!=t&&(this.index.set(eL.tagName,this.nodes.size),t.forEach(e=>{this.bathGasesIndex.set(e.value,this.nodes.size),this.addNode(e),this.bathGases.add(e)})),void 0!=s&&(this.index.set(ew.tagName,this.nodes.size),this.addNode(s))}getBathGases(){return this.bathGases}addBathGas(e){this.bathGases.has(e)||(this.bathGases.add(e),this.bathGasesIndex.set(e.value,this.nodes.size),this.addNode(e))}removeBathGas(e){this.bathGases.has(e)?(this.bathGases.delete(e),this.nodes.delete(this.bathGasesIndex.get(e.value))):console.warn("Conditions.removeBathGas: bathGas not found to remove.")}getPTs(){let e=this.index.get(ew.tagName);if(void 0!=e)return this.nodes.get(e)}setPTs(e){let t=this.index.get(ew.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(ew.tagName,this.nodes.size),this.addNode(e))}}class e_ extends P{static{this.tagName="me:grainSize"}constructor(e,t){super(e,e_.tagName,t)}}class eM extends P{static{this.tagName="me:automaticallySetMaxEne"}constructor(e,t){super(e,eM.tagName,t)}}class ez extends P{static{this.tagName="me:energyAboveTheTopHill"}constructor(e,t){super(e,ez.tagName,t)}}class eR extends P{static{this.tagName="me:maxTemperature"}constructor(e,t){super(e,eR.tagName,t)}}class eB extends M{static{this.tagName="me:modelParameters"}constructor(e,t,s,i,n){super(e,eB.tagName),this.index=new Map,void 0!=t&&(this.index.set(e_.tagName,this.nodes.size),this.addNode(t)),void 0!=s&&(this.index.set(eM.tagName,this.nodes.size),this.addNode(s)),void 0!=i&&(this.index.set(ez.tagName,this.nodes.size),this.addNode(i)),void 0!=n&&(this.index.set(eR.tagName,this.nodes.size),this.addNode(n))}getGrainSize(){let e=this.index.get(e_.tagName);if(e)return this.nodes.get(e)}setGrainSize(e){let t=this.index.get(e_.tagName);t?this.nodes.set(t,e):(this.index.set(e_.tagName,this.nodes.size),this.addNode(e))}removeGrainSize(){let e=this.index.get(e_.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(e_.tagName))}getAutomaticallySetMaxEne(){let e=this.index.get(eM.tagName);if(e)return this.nodes.get(e)}setAutomaticallySetMaxEne(e){let t=this.index.get(eM.tagName);t?this.nodes.set(t,e):(this.index.set(eM.tagName,this.nodes.size),this.addNode(e))}removeAutomaticallySetMaxEne(){let e=this.index.get(eM.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(eM.tagName))}getEnergyAboveTheTopHill(){let e=this.index.get(ez.tagName);if(e)return this.nodes.get(e)}setEnergyAboveTheTopHill(e){let t=this.index.get(ez.tagName);t?this.nodes.set(t,e):(this.index.set(ez.tagName,this.nodes.size),this.addNode(e))}removeEnergyAboveTheTopHill(){let e=this.index.get(ez.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(ez.tagName))}getMaxTemperature(){let e=this.index.get(eR.tagName);if(e)return this.nodes.get(e)}setMaxTemperature(e){let t=this.index.get(eR.tagName);t?this.nodes.set(t,e):(this.index.set(eR.tagName,this.nodes.size),this.addNode(e))}removeMaxTemperature(){let e=this.index.get(eR.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(eR.tagName))}}class eI extends O{static{this.tagName="me:calculateRateCoefficientsOnly"}constructor(){super(eI.tagName)}}class eF extends O{static{this.tagName="me:printCellDOS"}constructor(){super(eF.tagName)}}class eD extends O{static{this.tagName="me:printCellTransitionStateFlux"}constructor(){super(eD.tagName)}}class ek extends O{static{this.tagName="me:printReactionOperatorColumnSums"}constructor(){super(ek.tagName)}}class eG extends O{static{this.tagName="me:printGrainBoltzmann"}constructor(){super(eG.tagName)}}class eA extends O{static{this.tagName="me:printGrainDOS"}constructor(){super(eA.tagName)}}class eq extends O{static{this.tagName="me:printGrainkbE"}constructor(){super(eq.tagName)}}class eU extends O{static{this.tagName="me:printGrainkfE"}constructor(){super(eU.tagName)}}class eH extends O{static{this.tagName="me:printTSsos"}constructor(){super(eH.tagName)}}class eX extends O{static{this.tagName="me:printGrainedSpeciesProfile"}constructor(){super(eX.tagName)}}class ej extends O{static{this.tagName="me:printGrainTransitionStateFlux"}constructor(){super(ej.tagName)}}class e$ extends O{static{this.tagName="me:printReactionOperatorSize"}constructor(){super(e$.tagName)}}class eV extends O{static{this.tagName="me:printSpeciesProfile"}constructor(){super(eV.tagName)}}class eW extends O{static{this.tagName="me:printPhenomenologicalEvolution"}constructor(){super(eW.tagName)}}class eK extends O{static{this.tagName="me:printTunnelingCoefficients"}constructor(){super(eK.tagName)}}class eY extends O{static{this.tagName="me:printCrossingCoefficients"}constructor(){super(eY.tagName)}}class eJ extends O{static{this.tagName="me:testDOS"}constructor(){super(eJ.tagName)}}class eQ extends O{static{this.tagName="me:testRateConstants"}constructor(){super(eQ.tagName)}}class eZ extends O{static{this.tagName="me:useTheSameCellNumberForAllConditions"}constructor(){super(eZ.tagName)}}class e0 extends O{static{this.tagName="me:ForceMacroDetailedBalance"}constructor(){super(e0.tagName)}}class e1 extends O{static{this.tagName="me:hideInactive"}constructor(){super(e1.tagName)}}class e2 extends w{static{this.tagName="me:calcMethod"}static{this.options=["simpleCalc","gridSearch","fitting","marquardt","analyticalRepresentation","ThermodynamicTable","sensitivityAnalysis"]}constructor(e,t){super(e,e2.tagName,t)}}class e4 extends P{static{this.tagName="me:eigenvalues"}constructor(e,t){super(e,e4.tagName,t)}}class e5 extends P{static{this.tagName="me:shortestTimeOfInterest"}constructor(e,t){super(e,e5.tagName,t)}}class e6 extends P{static{this.tagName="me:MaximumEvolutionTime"}constructor(e,t){super(e,e6.tagName,t)}}class e7 extends P{static{this.tagName="me:automaticallySetMaxEne"}constructor(e,t){super(e,e7.tagName,t)}}class e8 extends P{static{this.tagName="me:diagramEnergyOffset"}constructor(e,t){super(e,e8.tagName,t)}}class e3 extends T{static{this.tagName="me:testMicroRates"}constructor(e){super(e,e3.tagName),this.tMin=parseFloat(e.get("Tmin")),this.tMax=parseFloat(e.get("Tmax")),this.tStep=parseFloat(e.get("Tstep"))}getTmin(){return this.tMin}setTmin(e){this.tMin=e,this.attributes?.set("Tmin",e.toString())}getTmax(){return this.tMax}setTmax(e){this.tMax=e,this.attributes?.set("Tmax",e.toString())}getTstep(){return this.tStep}setTstep(e){this.tStep=e,this.attributes?.set("Tstep",e.toString())}}class e9 extends M{static{this.tagName="me:control"}constructor(e){super(e,e9.tagName),this.index=new Map}getCalculateRateCoefficientsOnly(){let e=this.index.get(eI.tagName);if(void 0!=e)return this.nodes.get(e)}setCalculateRateCoefficientsOnly(e){let t=this.index.get(eI.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eI.tagName,this.nodes.size),this.addNode(e))}removeCalculateRateCoefficientsOnly(){let e=this.index.get(eI.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(eI.tagName))}getPrintCellDOS(){let e=this.index.get(eF.tagName);if(void 0!=e)return this.nodes.get(e)}setPrintCellDOS(e){let t=this.index.get(eF.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eF.tagName,this.nodes.size),this.addNode(e))}removePrintCellDOS(){let e=this.index.get(eF.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(eF.tagName))}getPrintCellTransitionStateFlux(){let e=this.index.get(eD.tagName);if(void 0!=e)return this.nodes.get(e)}setPrintCellTransitionStateFlux(e){let t=this.index.get(eD.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eD.tagName,this.nodes.size),this.addNode(e))}removePrintCellTransitionStateFlux(){let e=this.index.get(eD.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(eD.tagName))}getPrintReactionOperatorColumnSums(){let e=this.index.get(ek.tagName);if(void 0!=e)return this.nodes.get(e)}setPrintReactionOperatorColumnSums(e){let t=this.index.get(ek.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(ek.tagName,this.nodes.size),this.addNode(e))}removePrintReactionOperatorColumnSums(){let e=this.index.get(ek.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(ek.tagName))}getPrintGrainBoltzmann(){let e=this.index.get(eG.tagName);if(void 0!=e)return this.nodes.get(e)}setPrintGrainBoltzmann(e){let t=this.index.get(eG.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eG.tagName,this.nodes.size),this.addNode(e))}removePrintGrainBoltzmann(){let e=this.index.get(eG.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(eG.tagName))}getPrintGrainDOS(){let e=this.index.get(eA.tagName);if(void 0!=e)return this.nodes.get(e)}setPrintGrainDOS(e){let t=this.index.get(eA.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eA.tagName,this.nodes.size),this.addNode(e))}removePrintGrainDOS(){let e=this.index.get(eA.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(eA.tagName))}getPrintGrainkbE(){let e=this.index.get(eq.tagName);if(void 0!=e)return this.nodes.get(e)}setPrintGrainkbE(e){let t=this.index.get(eq.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eq.tagName,this.nodes.size),this.addNode(e))}removePrintGrainkbE(){let e=this.index.get(eq.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(eq.tagName))}getPrintGrainkfE(){let e=this.index.get(eU.tagName);if(void 0!=e)return this.nodes.get(e)}setPrintGrainkfE(e){let t=this.index.get(eU.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eU.tagName,this.nodes.size),this.addNode(e))}removePrintGrainkfE(){let e=this.index.get(eU.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(eU.tagName))}getPrintTSsos(){let e=this.index.get(eH.tagName);if(void 0!=e)return this.nodes.get(e)}setPrintTSsos(e){let t=this.index.get(eH.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eH.tagName,this.nodes.size),this.addNode(e))}removePrintTSsos(){let e=this.index.get(eH.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(eH.tagName))}getPrintGrainedSpeciesProfile(){let e=this.index.get(eX.tagName);if(void 0!=e)return this.nodes.get(e)}setPrintGrainedSpeciesProfile(e){let t=this.index.get(eX.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eX.tagName,this.nodes.size),this.addNode(e))}removePrintGrainedSpeciesProfile(){let e=this.index.get(eX.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(eX.tagName))}getPrintGrainTransitionStateFlux(){let e=this.index.get(ej.tagName);if(void 0!=e)return this.nodes.get(e)}setPrintGrainTransitionStateFlux(e){let t=this.index.get(ej.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(ej.tagName,this.nodes.size),this.addNode(e))}removePrintGrainTransitionStateFlux(){let e=this.index.get(ej.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(ej.tagName))}getPrintReactionOperatorSize(){let e=this.index.get(e$.tagName);if(void 0!=e)return this.nodes.get(e)}setPrintReactionOperatorSize(e){let t=this.index.get(e$.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(e$.tagName,this.nodes.size),this.addNode(e))}removePrintReactionOperatorSize(){let e=this.index.get(e$.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(e$.tagName))}getPrintSpeciesProfile(){let e=this.index.get(eV.tagName);if(void 0!=e)return this.nodes.get(e)}setPrintSpeciesProfile(e){let t=this.index.get(eV.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eV.tagName,this.nodes.size),this.addNode(e))}removePrintSpeciesProfile(){let e=this.index.get(eV.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(eV.tagName))}getPrintPhenomenologicalEvolution(){let e=this.index.get(eW.tagName);if(void 0!=e)return this.nodes.get(e)}setPrintPhenomenologicalEvolution(e){let t=this.index.get(eW.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eW.tagName,this.nodes.size),this.addNode(e))}removePrintPhenomenologicalEvolution(){let e=this.index.get(eW.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(eW.tagName))}getPrintTunnelingCoefficients(){let e=this.index.get(eK.tagName);if(void 0!=e)return this.nodes.get(e)}setPrintTunnelingCoefficients(e){let t=this.index.get(eK.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eK.tagName,this.nodes.size),this.addNode(e))}removePrintTunnelingCoefficients(){let e=this.index.get(eK.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(eK.tagName))}getPrintCrossingCoefficients(){let e=this.index.get(eY.tagName);if(void 0!=e)return this.nodes.get(e)}setPrintCrossingCoefficients(e){let t=this.index.get(eY.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eY.tagName,this.nodes.size),this.addNode(e))}removePrintCrossingCoefficients(){let e=this.index.get(eY.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(eY.tagName))}getTestDOS(){let e=this.index.get(eJ.tagName);if(void 0!=e)return this.nodes.get(e)}setTestDOS(e){let t=this.index.get(eJ.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eJ.tagName,this.nodes.size),this.addNode(e))}removeTestDOS(){let e=this.index.get(eJ.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(eJ.tagName))}getTestRateConstants(){let e=this.index.get(eQ.tagName);if(void 0!=e)return this.nodes.get(e)}setTestRateConstants(e){let t=this.index.get(eQ.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eQ.tagName,this.nodes.size),this.addNode(e))}removeTestRateConstants(){let e=this.index.get(eQ.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(eQ.tagName))}getUseTheSameCellNumberForAllConditions(){let e=this.index.get(eZ.tagName);if(void 0!=e)return this.nodes.get(e)}setUseTheSameCellNumberForAllConditions(e){let t=this.index.get(eZ.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eZ.tagName,this.nodes.size),this.addNode(e))}removeUseTheSameCellNumberForAllConditions(){let e=this.index.get(eZ.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(eZ.tagName))}getHideInactive(){let e=this.index.get(e1.tagName);if(void 0!=e)return this.nodes.get(e)}setHideInactive(e){let t=this.index.get(e1.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(e1.tagName,this.nodes.size),this.addNode(e))}removeHideInactive(){let e=this.index.get(e1.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(e1.tagName))}getForceMacroDetailedBalance(){let e=this.index.get(e0.tagName);if(void 0!=e)return this.nodes.get(e)}setForceMacroDetailedBalance(e){let t=this.index.get(e0.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(e0.tagName,this.nodes.size),this.addNode(e))}removeForceMacroDetailedBalance(){let e=this.index.get(e0.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(e0.tagName))}getCalcMethod(){let e=this.index.get(e2.tagName);if(void 0!=e)return this.nodes.get(e)}setCalcMethod(e){let t=this.index.get(e2.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(e2.tagName,this.nodes.size),this.addNode(e))}removeCalcMethod(){let e=this.index.get(e2.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(e2.tagName))}getEigenvalues(){let e=this.index.get(e4.tagName);if(void 0!=e)return this.nodes.get(e)}setEigenvalues(e){let t=this.index.get(e4.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(e4.tagName,this.nodes.size),this.addNode(e))}removeEigenvalues(){let e=this.index.get(e4.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(e4.tagName))}getShortestTimeOfInterest(){let e=this.index.get(e5.tagName);if(void 0!=e)return this.nodes.get(e)}setShortestTimeOfInterest(e){let t=this.index.get(e5.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(e5.tagName,this.nodes.size),this.addNode(e))}removeShortestTimeOfInterest(){let e=this.index.get(e5.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(e5.tagName))}getMaximumEvolutionTime(){let e=this.index.get(e6.tagName);if(void 0!=e)return this.nodes.get(e)}setMaximumEvolutionTime(e){let t=this.index.get(e.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(e.tagName,this.nodes.size),this.addNode(e))}removeMaximumEvolutionTime(){let e=this.index.get(e6.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(e6.tagName))}getAutomaticallySetMaxEne(){let e=this.index.get(e7.tagName);if(void 0!=e)return this.nodes.get(e)}setAutomaticallySetMaxEne(e){let t=this.index.get(e7.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(e7.tagName,this.nodes.size),this.addNode(e))}removeAutomaticallySetMaxEne(){let e=this.index.get(e7.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(e7.tagName))}getDiagramEnergyOffset(){let e=this.index.get(e8.tagName);if(void 0!=e)return this.nodes.get(e)}setDiagramEnergyOffset(e){let t=this.index.get(e8.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(e8.tagName,this.nodes.size),this.addNode(e))}removeDiagramEnergyOffset(){let e=this.index.get(e8.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(e8.tagName))}getTestMicroRates(){let e=this.index.get(e3.tagName);if(void 0!=e)return this.nodes.get(e)}setTestMicroRates(e){let t=this.index.get(e3.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(e3.tagName,this.nodes.size),this.addNode(e))}removeTestMicroRates(){let e=this.index.get(e3.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(e3.tagName))}}class te extends w{static{this.tagName="me:title"}constructor(e,t){super(e,te.tagName,t)}}class tt extends M{static{this.tagName="moleculeList"}constructor(e,t){super(e,tt.tagName),this.index=new Map,void 0!=t&&t.forEach(e=>{this.nodes.set(this.nodes.size,e),this.index.set(e.id,this.nodes.size-1)})}getMolecule(e){let t=this.index.get(e);if(void 0!=t)return this.nodes.get(t)}removeMolecule(e){let t=this.index.get(e);void 0!=t&&(this.nodes.delete(t),this.index.delete(e))}addMolecule(e){let t=this.index.get(e.id);void 0!==t?(this.nodes.set(t,e),console.log("Replaced molecule with id "+e.id)):(this.nodes.set(this.nodes.size,e),this.index.set(e.id,this.nodes.size-1))}}class ts extends M{static{this.tagName="reactionList"}constructor(e,t){super(e,ts.tagName),this.index=new Map,void 0!=t&&t.forEach(e=>{this.nodes.set(this.nodes.size,e),this.index.set(e.id,this.nodes.size-1)})}getReaction(e){let t=this.index.get(e);if(void 0!=t)return this.nodes.get(t)}removeReaction(e){let t=this.index.get(e);void 0!=t&&(this.nodes.delete(t),this.index.delete(e))}addReaction(e){let t=this.index.get(e.id);void 0!==t?(this.nodes.set(t,e),console.log("Replaced reaction with id "+e.id)):(this.nodes.set(this.nodes.size,e),this.index.set(e.id,this.nodes.size-1))}}class ti extends M{static{this.tagName="me:mesmer"}static{this.header=`<?xml version="1.0" encoding="utf-8" ?>
<?xml-stylesheet type='text/xsl' href='../../mesmer2.xsl' media='other'?>
<?xml-stylesheet type='text/xsl' href='../../mesmer1.xsl' media='screen'?>`}constructor(e,t,s,i,n,a,o){super(e,ti.tagName),this.index=new Map,void 0!=t&&(this.index.set(te.tagName,this.nodes.size),this.addNode(t)),void 0!=s&&(this.index.set(tt.tagName,this.nodes.size),this.addNode(s)),void 0!=i&&(this.index.set(ts.tagName,this.nodes.size),this.addNode(i)),void 0!=n&&(this.index.set(eP.tagName,this.nodes.size),this.addNode(n)),void 0!=a&&(this.index.set(eB.tagName,this.nodes.size),this.addNode(a)),void 0!=o&&(this.index.set(e9.tagName,this.nodes.size),this.addNode(o))}getTitle(){let e=this.index.get(te.tagName);if(void 0!=e)return this.nodes.get(e)}setTitle(e){let t=this.index.get(te.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(te.tagName,this.nodes.size),this.addNode(e))}getMoleculeList(){let e=this.index.get(tt.tagName);if(void 0!=e)return this.nodes.get(e)}setMoleculeList(e){let t=this.index.get(tt.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(tt.tagName,this.nodes.size),this.addNode(e))}getReactionList(){let e=this.index.get(ts.tagName);if(void 0!=e)return this.nodes.get(e)}setReactionList(e){let t=this.index.get(ts.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(ts.tagName,this.nodes.size),this.addNode(e))}getConditions(){let e=this.index.get(eP.tagName);if(void 0!=e)return this.nodes.get(e)}setConditions(e){let t=this.index.get(eP.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eP.tagName,this.nodes.size),this.addNode(e))}getModelParameters(){let e=this.index.get(eB.tagName);if(void 0!=e)return this.nodes.get(e)}setModelParameters(e){let t=this.index.get(eB.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eB.tagName,this.nodes.size),this.addNode(e))}getControl(){let e=this.index.get(e9.tagName);if(void 0!=e)return this.nodes.get(e)}setControl(e){let t=this.index.get(e9.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(e9.tagName,this.nodes.size),this.addNode(e))}}let tn="https://github.com/agdturner/mxg-pwa",ta=document.createElement("a");ta.href=tn,ta.textContent=tn;let to="https://sourceforge.net/projects/mesmer/",tl=document.createElement("a");tl.href=to,tl.textContent=to;let td="1.5em",tr="1.25em",tg="1.0em",th={marginTop:"1px",marginBottom:"1px"},tc={marginLeft:"25px",marginTop:"1px",marginBottom:"1px"},tm={marginLeft:"50px",marginTop:"1px",marginBottom:"1px"},tu={marginLeft:"75px",marginTop:"1px",marginBottom:"1px"},tp={marginLeft:"100px",marginTop:"1px",marginBottom:"1px"},tf={marginLeft:"125px",marginTop:"1px",marginBottom:"1px"},tN={marginLeft:"1px",marginTop:"1px",marginBottom:"1px",marginRight:"1px"},tx="remove",tv="âœ“ [SELECTED] Action to deselect",tE="âœ— [DESELECTED] Action to select",tC=", change using input:",tL=", then specify using input.",tb="Action/select another option...",ty=new Map,tS=-1/0,tO=1/0,tT=new Map,tw="reactionsDiagramCanvas",tP="1em SensSerif";function t_(){null==i?tQ(s,e,tP,4,2):tQ(i.document.getElementById(tw),e,tP,4,2)}function tM(e,t,s,i,n,a,l){let d=i.getElementsByTagName(G.tagName);if(d.length>0){if(1!=d.length)throw Error("Expecting 1 "+G.tagName+" but finding "+d.length+"!");let i=S(d[0]),o=parseFloat(i),r=R(d[0]),g=new G(r,o);e.setProperty(g);let c=e.dictRef,m=h("number",s.id+"_"+e.dictRef,tN,l,e=>{let t=e.target;tB(g,t)},i,c),p=m.querySelector("input");u(p),p.addEventListener("change",t=>{i=t.target.value,(g=e.getProperty()).value=parseFloat(i),console.log("Set "+e.dictRef+" of "+s.id+" to "+i),u(p),e.dictRef==U.dictRef&&(o<tO&&(tO=o),o>tS&&(tS=o),t_())}),tz(t,r,m,s.id+"_"+e.dictRef+"_Select_Units",e.dictRef,a),n.appendChild(m)}else{let d=i.getElementsByTagName(A.tagName);if(d.length>0){if(1!=d.length)throw Error("Expecting 1 "+A.tagName+" but finding "+d.length+"!");let i=S(d[0]),r=o(i.split(/\s+/)),g=R(d[0]),c=new A(g,r);e.setProperty(c);let m=e.dictRef,p=h("text",s.id+"_"+e.dictRef,a,l,e=>{let t=e.target;tR(c,t)},i,m),f=p.querySelector("input");f.value=i,u(f),f.addEventListener("change",t=>{i=t.target.value,c=e.getProperty(),r=o(i.split(/\s+/)),c.values=r,console.log("Set "+e.dictRef+" of "+s.id+" to "+i),u(f)}),tz(t,g,p,s.id+"_"+e.dictRef+"_Select_Units",e.dictRef,a),n.appendChild(p)}else throw Error("Expecting "+G.tagName+" or "+A.tagName)}}function tz(e,t,s,i,n,a){if(void 0!=e){let o=function(e,t,s,i){let n=t.get("units");if(void 0!=n){let a=f(e,"Units",s,tN);return a.value=n,p(a),a.addEventListener("change",e=>{let s=e.target;t.set("units",s.value),console.log("Set "+i+" units to "+s.value),p(a)}),a}}(e,t,i,n);void 0!=o&&(Object.assign(o.style,a),s.appendChild(o))}else{let e=t.get("units");if(void 0!=e){let t=C(e,a);s.appendChild(t)}}}function tR(e,t){let s=t.value.trim();if(""==s){alert("Empty input resetting..."),t.value=a(e.values," ");return}let i=s.split(/\s+/),n=[],o=!0;if(i.forEach(function(e){l(e)||(o=!1),n.push(parseFloat(e))}),!o){alert("An input is not a number, resetting..."),t.value=a(e.values," ");return}n.length==e.values.length?console.log("Changed "+e.tagName+' from: "'+s+'" to: "'+a(e.values," ")+'"'):(alert("Expecting "+e.values.length+" values for, but finding "+n.length+" resetting..."),t.value=a(e.values," "))}function tB(e,t){if(l(t.value)){let s=parseFloat(t.value);e.value=s,console.log(e.tagName+" value set to "+s)}else alert("Value is not numeric, resetting..."),t.value=e.value.toString()}function tI(e,t){let s=h("number",eT.tagName+"_P",tN,th,e=>{let s=e.target;l(s.value)?(t.setP(parseFloat(s.value)),console.log("Set P to "+s.value)):(alert("Value is not numeric, resetting..."),s.value=t.getP().toString()),u(s)},t.getP().toString(),"P"),i=s.querySelector("input");i.value=t.getP().toString(),u(i),e.appendChild(s)}function tF(e,t){let s=h("number",eT.tagName+"_T",tN,th,e=>{let s=e.target;l(s.value)?(t.setT(parseFloat(s.value)),console.log("Set T to "+s.value)):(alert("Value is not numeric, resetting..."),s.value=t.getT().toString()),u(s)},t.getT().toString(),"T"),i=s.querySelector("input");i.value=t.getT().toString(),u(i),e.appendChild(s)}function tD(e,t){let s=N("add "+ef.tagName,tN);e.append(s),s.addEventListener("click",()=>{let i=document.createElement("label");i.textContent="excessReactantConc: ",e.appendChild(i);let n=c("number",eT.tagName+"_"+ef.tagName,tN);n.value=NaN.toString(),n.addEventListener("change",e=>{let s=e.target;t.setExcessReactantConc(s.value),console.log("Set excessReactantConc to "+s.value),u(s)}),u(n),e.appendChild(n);let a=N("âœ•",tN);a.addEventListener("click",()=>{e.removeChild(i),e.removeChild(n),e.removeChild(a),tD(e,t)}),e.appendChild(a),e.removeChild(s)})}function tk(e,t){let s=N("add percentExcessReactantConc",tN);e.appendChild(s),s.addEventListener("click",()=>{let s=document.createElement("label");s.textContent="percentExcessReactantConc: ",e.appendChild(s);let i=c("number",eT.tagName+"_percentExcessReactantConc",tN);i.value=NaN.toString(),i.addEventListener("change",e=>{let s=e.target;t.setPercentExcessReactantConc(s.value),console.log("Set percentExcessReactantConc to "+s.value),u(s)}),u(i),e.appendChild(i)})}function tG(e,t){let s=N("add precision",tN);e.appendChild(s),s.addEventListener("click",()=>{let s=document.createElement("label");s.textContent="Precision: ",e.appendChild(s);let i=c("number",eT.tagName+"_precision",tN);i.value=NaN.toString(),i.addEventListener("change",e=>{let s=e.target;t.setPrecision(s.value),console.log("Set Precision to "+s.value),u(s)}),u(i),e.appendChild(i)})}function tA(e,t){let s=N("add "+eL.tagName,tN);e.appendChild(s),s.addEventListener("click",()=>{let i=document.createElement("div"),n=new eL(new Map,"");t.setBathGas(n);let a=document.createElement("label");a.textContent=eL.tagName+": ",i.appendChild(a),e.insertBefore(i,s);let o=f(Array.from(new Set(ty.keys())),eL.tagName,ew.tagName+"_"+eL.tagName,tN);o.value=n.value,o.addEventListener("change",e=>{let t=e.target;n.value=t.value,console.log("Added "+t.value+" as a "+eL.tagName),p(t)}),p(o),i.appendChild(o),e.insertBefore(i,s),e.removeChild(s)})}function tq(e,t,s,i,n,a){e.setGrainSize(s);let o=c("number",i,tN);o.addEventListener("change",e=>{e.target instanceof HTMLInputElement&&(tB(s,e.target),u(e.target))}),o.value=a,u(o),t.appendChild(o),tz(U.units,s.attributes,t,n,e_.tagName,tN)}function tU(e,t,s,i,n,a){e.setAutomaticallySetMaxEne(s);let o=c("number",i,tN);o.addEventListener("change",e=>{let t=e.target;tB(s,t),u(t)}),o.value=a,u(o),t.appendChild(o),tz(U.units,s.attributes,t,n,e7.tagName,tN)}function tH(e,t,s,i,n,a){e.setEnergyAboveTheTopHill(s);let o=c("number",i,tN);o.addEventListener("change",e=>{let t=e.target;tB(s,t),u(t)}),o.value=a,u(o),t.appendChild(o),tz(U.units,s.attributes,t,n,ez.tagName,tN)}function tX(e,t,s,i,n,a){e.setMaxTemperature(s);let o=c("number",i,tN);o.addEventListener("change",e=>{let t=e.target;tB(s,t),u(t)}),o.value=a,u(o),t.appendChild(o),tz(void 0,s.attributes,t,n,eR.tagName,tN)}function tj(e,t,s,i,n,a){let o,d;1==s.length?d=new e3(o=R(s[0])):((o=new Map).set("Tmax",""),o.set("Tmin",""),o.set("Tstep",""),d=new e3(o));let r=d.getTmax(),g=h("number",i+"_input",tN,th,e=>{let t=e.target;l(t.value)?(d.setTmax(parseFloat(t.value)),console.log("Set Tmax to "+t.value)):(alert("Value is not numeric, resetting..."),t.value=r.toString()),u(t)},r.toString(),"Tmax");g.id=i,u(g.querySelector("input")),t.appendChild(g);let c=h("number",n+"_input",tN,th,e=>{let t=e.target;l(t.value)?(d.setTmin(parseFloat(t.value)),console.log("Set Tmin to "+t.value)):(alert("Value is not numeric, resetting..."),t.value=r.toString()),u(t)},d.getTmin().toString(),"Tmin");c.id=n,u(c.querySelector("input")),t.appendChild(c);let m=h("number",a+"_input",tN,th,e=>{let t=e.target;l(t.value)?(d.setTstep(parseFloat(t.value)),console.log("Set Tstep to "+t.value)):(alert("Value is not numeric, resetting..."),t.value=r.toString()),u(t)},d.getTstep().toString(),"Tstep");m.id=a,u(m.querySelector("input")),t.appendChild(m),e.setTestMicroRates(d)}function t$(e,t,s,i,n,a,o){let l=f(t,a,n,tN);return l.addEventListener("click",e=>{t[t.length-1]==tb&&t.pop();let s=l.options.length-1;l.options[s].value==tb&&l.remove(s)}),l.addEventListener("change",e=>{let t=e.target;i.value=t.value,p(t)}),l.value=a,console.log("Value: "+a),p(l),s.appendChild(l),e.setCalcMethod(i),!1}function tV(e,t,s,i,n){e.setEigenvalues(s);let a=c("number",i,tN);a.addEventListener("change",e=>{let t=e.target;tB(s,t),u(t)}),a.value=n,u(a),t.appendChild(a)}function tW(e,t,s,i,n){e.setShortestTimeOfInterest(s);let a=c("number",i,tN);a.addEventListener("change",e=>{let t=e.target;tB(s,t),u(t)}),a.value=n,u(a),t.appendChild(a)}function tK(e,t,s,i,n){e.setMaximumEvolutionTime(s);let a=c("number",i,tN);a.addEventListener("change",e=>{let t=e.target;tB(s,t),u(t)}),a.value=n,u(a),t.appendChild(a)}function tY(e,t,s,i,n){e.setAutomaticallySetMaxEne(s);let a=c("number",i,tN);a.addEventListener("change",e=>{let t=e.target;tB(s,t),u(t)}),a.value=n,u(a),t.appendChild(a)}function tJ(e,t,s,i,n){e.setDiagramEnergyOffset(s);let a=c("number",i,tN);a.addEventListener("change",e=>{let t=e.target;tB(s,t),u(t)}),a.value=n,u(a),t.appendChild(a)}function tQ(e,t,s,i,a){if(console.log("drawReactionDiagram"),null!=e){var o,l;let d,r,g,h,c,m,u;t?(d="lightgrey",r="lightblue",g="orange"):(d="darkgrey",r="blue",g="darkorange");let p=e.getContext("2d");p.clearRect(0,0,e.width,e.height),p.font="bold "+s;let f=(o=p.font,p.font=o,(l=p.measureText("Aj")).actualBoundingBoxAscent+l.actualBoundingBoxDescent),N=[],x=new Set,v=new Set,E=new Set,C=new Map,L=new Map,b=0,y=Number.MAX_VALUE,S=Number.MIN_VALUE;tT.forEach(function(e,t){let s=e.getTransitionStates(),i=e.getReactantsLabel();if(void 0!=i){N.push(i),x.has(i)&&v.add(i);let t=e.getReactantsEnergy(ty);y=Math.min(y,t),S=Math.max(S,t),L.set(i,t),!C.has(i)&&(C.set(i,b),b++)}let a=e.getProductsLabel();if(void 0!=a){x.add(a);let t=e.getProductsEnergy(ty);if(y=Math.min(y,t),S=Math.max(S,t),L.set(a,t),C.has(a)){b--;let e=n(C,a);C.forEach(function(t,s){t>e&&C.set(s,t-1)}),void 0!=s&&(s.forEach(function(e){let s=e.getMolecule().ref;E.add(s),C.set(s,b),t=ty.get(s)?.getEnergy()??0,y=Math.min(y,t),S=Math.max(S,t),L.set(s,t),b++}),C.set(a,b),b++)}else void 0!=s&&s.forEach(function(e){let s=e.getMolecule().ref;E.add(s),C.set(s,b),t=ty.get(s)?.getEnergy()??0,y=Math.min(y,t),S=Math.max(S,t),L.set(s,t),b++}),C.set(a,b),b++}});let O=S-y,T=[];C.forEach(function(e,t){T[e]=t});let w=0,P=0,_=new Map,M=new Map,z=new Map,R=new Map,B=new Map,I=new Map;T.forEach(function(e){let t=n(L,e),a=(t-y)*400/(O+0)+0;u=Math.max(eC(p,t.toString(),s),eC(p,e,s)),c=w+u+5,m=h=a+i,_.set(e,[w,h]),M.set(e,[c,m]),x.has(e)&&(z.set(e,[w,h]),R.set(e,[c,m])),E.has(e)&&(B.set(e,[w,h]),I.set(e,[c,m])),w=c+10,P=c}),e.width=P;let F=400+4*f+2*i;e.height=F,p.transform(1,0,0,-1,0,F),tT.forEach(function(e,t){let s=e.getTransitionStates(),i=e.getReactantsLabel(),o=e.getProductsLabel(),l=n(M,i),r=n(z,o);s.length>0?s.forEach(function(e){let t=e.getMolecule().ref,s=n(B,t);ev(p,d,a,l[0],l[1],s[0],s[1]);let i=n(I,t);ev(p,d,a,i[0],i[1],r[0],r[1])}):ev(p,d,a,l[0],l[1],r[0],r[1])}),N.forEach(function(e){let t=n(L,e),a=(t-y)*400/(O+0)+0,o=n(_,e)[0],l=a+i,d=n(M,e)[0],g=t.toString();ex(p,r,i,o,l,d,l,s,f,e,g)}),x.forEach(function(e){let t=n(L,e),a=(t-y)*400/(O+0)+0,o=n(z,e)[0],l=a+i,d=n(R,e)[0],r=t.toString();v.has(e)?ex(p,g,i,o,l,d,l,s,f,e,r):ex(p,"green",i,o,l,d,l,s,f,e,r)}),E.forEach(function(e){let t=n(L,e),a=(t-y)*400/(O+0)+0,o=n(B,e)[0],l=a+i;ex(p,"red",i,o,l,n(I,e)[0],l,s,f,e,t.toString())})}}function tZ(){console.log("saveXML");let e=new Blob([ti.header,t.toXML("  ","  ")],{type:"text/plain"}),s=URL.createObjectURL(e),i=document.createElement("a");i.href=s;let n=t.getTitle()?.value;i.download=n.replace(/[^a-z0-9]/gi,"_")+".xml",document.body.appendChild(i),i.click(),document.body.removeChild(i)}document.addEventListener("DOMContentLoaded",()=>{document.body.className=e?"dark-mode":"light-mode",document.body.className=e?"dark-mode":"light-mode";let n=document.getElementById("menu");n.style.display="flex",n.style.justifyContent="center",n.style.margin="5px",n.style.padding="5px",n.style.border="1px solid black",n.style.backgroundColor="lightgrey";let a=N("Load",tN);a.addEventListener("click",n=>{let o;(o=document.createElement("input")).type="file",o.onchange=function(){if(o.files){for(let e=0;e<o.files.length;e++)console.log("inputElement.files["+e+"]="+o.files[e]);let n=o.files[0];console.log(n.name);let a=n.name,m=new FileReader,O=0,T="";m.onload=function(o){if(null==o.target)throw Error("Event target is null");if(T+=o.target.result,null!=n){if(O<n.size){let e=n.slice(O,O+1048576);m.readAsText(e),O+=1048576}else{var w;let n,o,m;w=T=T.trim(),n=document.getElementById("xml"),d("xmlHeading"),(o=document.createElement("h2")).textContent=a,n.appendChild(o),d("xmlParagraph"),(m=document.createElement("pre")).textContent=w,n.appendChild(m),function(n){let a,o,m,O,T,w;console.log("parse: "+n);let P=B(n,ti.tagName);t=new ti(R(P));let _=n.getElementsByTagName(te.tagName);if(1!=_.length)throw Error("Multiple "+te.tagName+" tags found");{let e=_[0].childNodes[0].nodeValue.trim(),s=new te(R(_[0]),e);t.setTitle(s);let i=document.getElementById("title"),n="titleDiv";d(n);let a=h("text",n+"Input",tN,th,e=>{let t=e.target;s.value=t.value,console.log(s.tagName+" changed to "+s.value),u(t)},e,te.tagName,td);a.id=n,i.appendChild(a)}let M=document.getElementById("molecules"),z="moleculesList";d(z);let G=function(e){let t=v(tN),s=B(e,tt.tagName),i=new Set;if(s.childNodes.forEach(function(e){i.add(e.nodeName)}),1!=i.size&&!(2==i.size&&i.has("#text")))throw console.error("moleculeListTagNames:"),i.forEach(e=>console.error(e)),Error("Additional tag names in moleculeList:");if(!i.has(en.tagName))throw Error('Expecting tags with "'+en.tagName+'" tagName but there are none!');let n=s.getElementsByTagName(en.tagName);console.log("Number of molecules="+n.length);for(let e=0;e<n.length;e++){let s,i,a=document.createElement("div"),o=R(n[e]),d=new Set,g=n[e].childNodes;for(let e=0;e<g.length;e++){let t=g[e];d.has(t.nodeName)?"#text"!=t.nodeName&&console.warn("Another ChildNode with nodeName="+t.nodeName):d.add(t.nodeName)}let m=n[e].getElementsByTagName(F.tagName);if(m.length>1)throw Error("Expecting 1 or 0 "+F.tagName+" but finding "+m.length+"!");if(1==m.length){let e=m[0],t=e.getElementsByTagName(I.tagName);if(t.length<2)throw Error("Expecting 2 or more atoms in "+F.tagName+", but finding "+t.length+"!");let i=[];for(let e=0;e<t.length;e++)i.push(new I(R(t[e])));s=new F(R(e),i),d.delete(F.tagName)}else{let t=n[e].getElementsByTagName(I.tagName);if(1==t.length)s=new I(R(t[0]));else if(t.length>1)throw Error("Expecting 1 "+I.tagName+" but finding "+t.length+". Should these be in an "+F.tagName+"?")}d.delete(I.tagName);let N=n[e].getElementsByTagName(k.tagName);if(N.length>1)throw Error("Expecting 1 or 0 "+k.tagName+" but finding "+N.length+"!");if(1==N.length){let e=N[0],t=e.getElementsByTagName(D.tagName),s=[];for(let e=0;e<t.length;e++)s.push(new D(R(t[e])));i=new k(R(e),s),d.delete(k.tagName)}else{let t=n[e].getElementsByTagName(D.tagName);if(1==t.length)i=new D(R(t[0]));else if(t.length>1)throw Error("Expecting 1 "+D.tagName+" but finding "+t.length+". Should these be in a "+k.tagName+"?")}d.delete(D.tagName);let x=new en(o,s,i);ty.set(x.id,x);let v=n[e].getElementsByTagName(W.tagName);if(v.length>1)throw Error("Expecting 1 or 0 "+W.tagName+" but finding "+v.length+"!");if(1==v.length){let e=document.createElement("div"),t=x.id+"_"+W.tagName+"_",s=r({content:e,buttonLabel:W.tagName,buttonFontSize:tg,boundary:tN,level:tm,contentDivId:t});a.appendChild(s);let i=new W(R(v[0]));x.setProperties(i);let n=v[0].getElementsByTagName(q.tagName);for(let t=0;t<n.length;t++){let s=new q(R(n[t]));i.setProperty(s),x.setProperties(i),s.dictRef==U.dictRef?tM(s,U.units,x,n[t],e,tN,tu):s.dictRef==j.dictRef?tM(s,j.units,x,n[t],e,tN,tu):tM(s,void 0,x,n[t],e,tN,tu)}d.delete(W.tagName)}else{let t=n[e].getElementsByTagName(q.tagName);if(1!=t.length)throw Error("Expecting 1 "+q.tagName+" but finding "+t.length+". Should these be in a "+W.tagName+"?");let s=new q(R(t[0]));x.setProperties(s),s.dictRef==U.dictRef?tM(s,U.units,x,t[0],a,tN,tm):s.dictRef==j.dictRef?tM(s,j.units,x,t[0],a,tN,tm):tM(s,void 0,x,t[0],a,tN,tm),d.delete(q.tagName)}let L=n[e].getElementsByTagName(Y.tagName);if(L.length>0){if(L.length>1)throw Error("Expecting 1 or 0 "+Y.tagName+" but finding "+L.length+"!");(function(e,t,s,i,n){let a=s.getElementsByTagName(K.tagName);if(a.length>0){let s=document.createElement("div"),n=t.id+"_"+Y.tagName,o=r({content:s,buttonLabel:Y.tagName,buttonFontSize:tg,boundary:tN,level:tm,contentDivId:n});i.appendChild(o);let l=[];for(let e=0;e<a.length;e++){let i=S(a[e]),n=parseFloat(i),o=new K(R(a[e]),n);l.push(o);let d=K.tagName,r=t.id+"_"+Y.tagName+"_"+K.tagName+"_"+e,g=h("number",r,tN,tu,t=>{let s=t.target;tB(o,s),i=s.value,l[e].setValue(parseFloat(i)),console.log("Set "+r+" to "+i),u(s)},i,d);s.appendChild(g);let c=document.createElement("label");c.textContent="cm-1",g.appendChild(c)}e.setDeltaEDowns(l),t.setEnergyTransferModel(e)}})(new Y(R(L[0])),x,L[0],a,0),d.delete(Y.tagName)}let O=n[e].getElementsByTagName(J.tagName);if(O.length>0){if(O.length>1)throw Error("Expecting 1 or 0 "+J.tagName+" but finding "+O.length+"!");(function(e,t,s){let i=document.createElement("label");i.textContent=J.tagName+": ";let n=document.createElement("div");n.appendChild(i);let a=f(["ClassicalRotors","me:QMRotors","QMRotors"],"DOSCMethod",t.id+"_Select_DOSCMethod",tN);a.value=e.getXsiType(),a.addEventListener("change",t=>{let s=t.target;e.setXsiType(s.value),console.log("Set DOSCMethod to "+s.value)}),t.setDOSCMethod(e),n.appendChild(a),Object.assign(n.style,tm),s.appendChild(n)})(new J(R(O[0])),x,a),d.delete(J.tagName)}let T=n[e].getElementsByTagName(es.tagName);if(T.length>0){if(1!=T.length)throw Error("Expecting only 1 extra DOSCMethod, but there are "+T.length);let e=new es(R(O[0])),t=document.createElement("div"),s=x.id+"_"+es.tagName+"_",i=r({content:t,buttonLabel:es.tagName,buttonFontSize:tg,boundary:tN,level:tm,contentDivId:s});a.appendChild(i);let n=T[0].getElementsByTagName(Q.tagName);if(n.length>0){if(1!=n.length)throw Error("Expecting only 1 bondRef, but there are "+n.length);let s=E(tu),i=document.createElement("label");i.textContent=Q.tagName+": ",s.appendChild(i);let a=new Q(R(n[0]),y(b(n[0])));e.setBondRef(a);let o=f(x.getBonds().getBondIds(),a.value,x.id+"_"+Q.tagName,tN);o.addEventListener("change",e=>{let t=e.target;a.value=t.value,p(t)}),p(o),s.appendChild(o),t.appendChild(s)}let o=T[0].getElementsByTagName(ee.tagName);if(o.length>0){if(1!=o.length)throw Error("Expecting only 1 HinderedRotorPotential, but there are "+o.length);let s=R(o[0]),i=new ee(s),n=E(tN),a=x.id+"_"+J.tagName+"_"+ee.tagName,d=r({content:n,buttonLabel:ee.tagName,buttonFontSize:tg,boundary:tN,level:tu,contentDivId:a});t.appendChild(d);let g=C("Format:",tp);n.appendChild(g);let h=f(ee.formats,i.format,x.id+"_"+ee.tagName,tN);h.addEventListener("change",e=>{let t=e.target;i.format=t.value,p(t)}),p(h),n.appendChild(h);let m=C("Units:",tN);n.appendChild(m),tz(ee.units,s,n,x.id+"_"+J.tagName+"_"+ee.tagName,ee.tagName,tN);let N=C("Expansion size:",tN);n.appendChild(N);let v=c("number",x.id+"_"+J.tagName+"_"+ee.tagName+"_expansionSize",tN);v.value=i.getExpansionSize().toString(),v.addEventListener("change",e=>{let t=e.target;l(t.value)?i.setExpansionSize(parseInt(t.value)):(alert("Expansion size input is not a number, resetting..."),v.value=i.getExpansionSize().toString()),u(v)}),v.value=i.getExpansionSize().toString(),u(v),n.appendChild(v);let L=C("Use sine terms:",tN);n.appendChild(L);let b=c("checkbox",x.id+"_"+J.tagName+"_"+ee.tagName+"_useSineTerms",tN);b.checked=i.getUseSineTerms(),b.addEventListener("change",e=>{let t=e.target;i.setUseSineTerms(t.checked)}),n.appendChild(b);let y=document.createElement("div"),S=x.id+"_"+J.tagName+"_"+ee.tagName+"_"+Z.tagName,O=r({content:y,buttonLabel:Z.tagName,buttonFontSize:tg,boundary:tN,level:tp,contentDivId:S});n.appendChild(O);let T=[],w=o[0].getElementsByTagName(Z.tagName);for(let e=0;e<w.length;e++){let t=new Z(R(w[e]));T.push(t);let s=E(tf);O.appendChild(s);let i=C("Angle:",tN);s.appendChild(i);let n=c("number",x.id+"_"+Z.tagName+"_angle",tN);n.addEventListener("change",e=>{let s=e.target;if(l(s.value)){let e=parseFloat(s.value);t.setAngle(e)}else alert("Angle input is not a number, resetting..."),n.value=t.getAngle().toString();u(n)}),n.value=t.getAngle().toString(),u(n),s.appendChild(n);let a=C("Potential:",tN);s.appendChild(a);let o=c("number",x.id+"_"+Z.tagName+"_potential",tN);o.addEventListener("change",e=>{let s=e.target;if(l(s.value)){let e=parseFloat(s.value);t.setPotential(e),console.log("Set "+Z.tagName+" to "+e.toString())}else alert("Potential input is not a number, resetting..."),o.value=t.getPotential().toString();u(o)}),o.value=t.getPotential().toString(),u(o),s.appendChild(o),y.appendChild(s)}O.appendChild(y),i.setPotentialPoints(T),e.setHinderedRotorPotential(i)}let g=O[0].getElementsByTagName(et.tagName);if(g.length>0){if(1!=g.length)throw Error("Expecting only 1 Periodicity, but there are "+g.length);let s=y(b(g[0])),i=new et(R(g[0]),parseFloat(s));e.setPeriodicity(i);let n=h("number",x.id+"_"+et.tagName,tN,tu,t=>{let n=t.target;if(l(s=n.value)){let t=parseFloat(s);i.value=t,e.getPeriodicity().value=t,console.log("Set "+et.tagName+" to "+t)}else alert("Periodicity input is not a number, resetting..."),n.value=i.value.toString()},s,et.tagName);t.appendChild(n)}x.setExtraDOSCMethod(e),d.delete(es.tagName)}d.delete(ei.tagName);let w=n[e].getElementsByTagName(ei.tagName);if(w.length>0){if(1!=w.length)throw Error("Expecting only 1 reservoirSize, but there are "+w.length);let e=y(b(w[0])),t=parseFloat(e),s=new ei(R(w[0]),t);x.setReservoirSize(s);let i=h("number",x.id+"_"+ei.tagName,tN,tm,e=>{let t=e.target;s.value=parseFloat(t.value),u(t)},e,ei.tagName);a.appendChild(i)}d.delete("#text"),d.size>0&&(console.warn("There are additional unexpected moleculeTagNames:"),d.forEach(e=>console.warn(e)));let P=document.createElement("div");P.id=x.id+"_molstar",a.appendChild(P);let _=r({content:a,buttonLabel:x.getLabel(),buttonFontSize:tr,boundary:tN,level:tc,contentDivId:x.tagName+"_"+x.id});t.appendChild(_)}return t}(n);G.id=z,M.appendChild(r({content:G,buttonLabel:"Molecules",buttonFontSize:td,boundary:tN,level:th,contentDivId:G.id})),t.setMoleculeList(new tt(R(G),Array.from(ty.values())));let A=document.getElementById("reactions"),H="reactionsList";d(H);let X=function(e){let t=v(tN),s=B(e,ts.tagName),i=new Set;if(s.childNodes.forEach(function(e){i.add(e.nodeName)}),1!=i.size&&!(2==i.size&&i.has("#text")))throw console.error("reactionListTagNames:"),i.forEach(e=>console.error(e)),Error("Additional tag names in reactionList:");if(!i.has(eN.tagName))throw Error('Expecting tags with "'+eN.tagName+'" tagName but there are none!');let n=s.getElementsByTagName(eN.tagName);console.log("Number of reactions="+n.length);for(let e=0;e<n.length;e++){let s=v(tN),i=R(n[e]),a=new Set,o=n[e].childNodes;for(let e=0;e<o.length;e++){let t=o[e];a.has(t.nodeName)?"#text"!=t.nodeName&&console.warn("Another ChildNode with nodeName="+t.nodeName):a.add(t.nodeName)}let l=new eN(i);tT.set(l.id,l);let d=n[e].getElementsByTagName(eo.tagName);if(a.delete(eo.tagName),d.length>0){let e=document.createElement("div"),t=[];for(let s=0;s<d.length;s++){let i=new ea(R(L(d[s],en.tagName))),n=new eo(R(d[s]),i);t.push(n);let a=document.createElement("div"),o=document.createElement("label");o.textContent=i.ref+" role: ",a.appendChild(o);let l=f(["deficientReactant","excessReactant","modelled"],"Role",i.ref+"_Select_Role",tN);l.value=i.role,l.addEventListener("change",e=>{let t=e.target;i.setRole(t.value),console.log("Set Role to "+t.value)}),a.appendChild(l),Object.assign(a.style,tu),e.appendChild(a)}l.setReactants(t);let i=r({content:e,buttonLabel:"Reactants",buttonFontSize:tg,boundary:tN,level:tm,contentDivId:l.id+"_"+eo.tagName});s.appendChild(i)}let g=n[e].getElementsByTagName(el.tagName);if(a.delete(el.tagName),g.length>0){let e=document.createElement("div"),t=[];for(let s=0;s<g.length;s++){let i=new ea(R(L(g[s],en.tagName))),n=new el(R(g[s]),i);t.push(n);let a=["modelled","sink"],o=function(e,t,s,i,n,a){let o=v(a),l=C(e,n);o.appendChild(l);let d=document.createElement("select");return o.appendChild(d),t.forEach(e=>{d.name=s,d.id=i;let t=document.createElement("option");t.value=e,t.text=e,d.appendChild(t)}),o}(i.ref+" role:",a,i.ref+"_Select_Role","Role",tN,tu),l=o.querySelector("select");l.value=i.role,l.addEventListener("change",e=>{let t=e.target;i.setRole(t.value),console.log("Set Role to "+t.value)}),e.appendChild(o)}l.setProducts(t);let i=r({content:e,buttonLabel:"Products",buttonFontSize:tg,boundary:tN,level:tm,contentDivId:l.id+"_"+el.tagName});s.appendChild(i)}let c=n[e].getElementsByTagName(ep.tagName);if(c.length>0){if(c.length>1)throw Error("Expecting 1 "+ep.tagName+" but finding "+c.length+"!");let e=new ep(R(c[0]));l.setTunneling(e);let t=document.createElement("div"),i=document.createElement("label");i.textContent=ep.tagName+": ",t.appendChild(i);let n=f(["Eckart","WKB"],"Tunneling",l.id+"_Select_Tunneling",tN);n.value=e.getName(),n.addEventListener("change",t=>{let s=t.target;e.setName(s.value),console.log("Set Tunneling to "+s.value)}),t.appendChild(n),Object.assign(t.style,tm),s.appendChild(t)}let m=n[e].getElementsByTagName(ed.tagName);if(m.length>0){let e=document.createElement("div"),t=[];for(let s=0;s<m.length;s++){let i=new ea(R(L(m[s],en.tagName))),n=new ed(R(m[s]),i);t.push(n);let a=C(i.ref+" role: transitionState",tu);e.appendChild(a)}l.setTransitionStates(t);let i=r({content:e,buttonLabel:"Transition States",buttonFontSize:tg,boundary:tN,level:tm,contentDivId:l.id+"_"+ed.tagName});s.appendChild(i)}let p=n[e].getElementsByTagName(em.tagName);if(p.length>0){if(p.length>1)throw Error("Expecting 1 "+em.tagName+" but finding "+p.length+"!");{let e,t=document.createElement("div"),i=R(p[0]),n=i.get("name");if(void 0==n||n==eu.xsiType2){let n=i.get("xsi:type");if(e=new eu(i),n==eu.xsiType||n==eu.xsiType2){let i=p[0].getElementsByTagName(er.tagName);if(null!=i&&null!=i[0]){let s=S(i[0]),n=parseFloat(s),a=R(i[0]),o=new er(a,n);e.setPreExponential(o);let d=er.tagName,r=l.id+"_"+eu.tagName+"_"+er.tagName,g=h("number",r,tN,tu,e=>{tB(o,e.target)},s,d);t.appendChild(g);let c=g.querySelector("input");c.value=s,u(c),c.addEventListener("change",e=>{s=e.target.value,o.value=parseFloat(s),console.log("Set "+r+" to "+s),u(c)}),tz(void 0,a,g,l.id+"_"+eu.xsiType+"_"+er.tagName,er.tagName,tN),t.appendChild(g)}let n=p[0].getElementsByTagName(eg.tagName);if(null!=n&&null!=n[0]){let s=S(n[0]),i=parseFloat(s),a=R(n[0]),o=new eg(a,i);e.setActivationEnergy(o);let d=eg.tagName,r=l.id+"_"+eu.tagName+"_"+eg.tagName,g=h("number",r,tN,tu,e=>{tB(o,e.target)},s,d),c=g.querySelector("input");c.value=s,u(c),c.addEventListener("change",e=>{s=e.target.value,o.value=parseFloat(s),console.log("Set "+r+" to "+s),u(c)}),tz(void 0,a,g,l.id+"_"+eu.xsiType+"_"+eg.tagName,eg.tagName,tN),t.appendChild(g)}let a=p[0].getElementsByTagName(eh.tagName);if(null!=a&&null!=a[0]){let s=S(a[0]),i=parseFloat(s),n=R(a[0]),o=new eh(n,i);e.setTInfinity(o);let d=eh.tagName,r=l.id+"_"+eu.tagName+"_"+eh.tagName,g=h("number",r,tN,tu,e=>{tB(o,e.target)},s,d),c=g.querySelector("input");c.value=s,u(c),c.addEventListener("change",e=>{s=e.target.value,o.value=parseFloat(s),console.log("Set "+r+" to "+s),u(c)}),tz(void 0,n,g,l.id+"_"+eu.xsiType+"_"+eh.tagName,eh.tagName,tN),t.appendChild(g)}let o=p[0].getElementsByTagName(ec.tagName);if(null!=o&&null!=o[0]){let s=S(o[0]),i=parseFloat(s),n=R(o[0]),a=new ec(n,i);e.setNInfinity(a);let d=ec.tagName,r=l.id+"_"+eu.tagName+"_"+ec.tagName,g=h("number",r,tN,tu,e=>{tB(a,e.target)},s,d);t.appendChild(g);let c=g.querySelector("input");c.value=s,u(c),c.addEventListener("change",e=>{s=e.target.value,a.value=parseFloat(s),console.log("Set "+r+" to "+s),u(c)}),tz(void 0,n,g,l.id+"_"+eu.xsiType+"_"+ec.tagName,ec.tagName,tN),t.appendChild(g)}let d=l.id+"_"+em.tagName,g=r({content:t,buttonLabel:em.tagName,buttonFontSize:tg,boundary:tN,level:tm,contentDivId:d});s.appendChild(g)}else throw Error("Unexpected xsi:type="+n)}else{e=new em(i);let n=document.createElement("label");n.textContent=em.tagName+": "+i.get("name"),Object.assign(n.style,tm),t.appendChild(n),s.appendChild(t)}l.setMCRCMethod(e)}}let N=n[e].getElementsByTagName(ef.tagName);if(N.length>0){if(N.length>1)throw Error("Expecting 1 "+ef.tagName+" but finding "+N.length+"!");let e=parseFloat(y(b(N[0]))),t=new ef(R(N[0]),e);l.setExcessReactantConc(t);let i=h("number",l.id+"_"+ef.tagName,tN,tm,e=>{tB(t,e.target)},e.toString(),ef.tagName);s.appendChild(i)}let x=r({content:s,buttonLabel:l.id+"("+l.getLabel()+")",buttonFontSize:tr,boundary:tN,level:tc,contentDivId:l.tagName+"_"+l.id});t.appendChild(x)}return t}(n);X.id=H,A.appendChild(r({content:X,buttonLabel:"Reactions",buttonFontSize:td,boundary:tN,level:th,contentDivId:X.id})),t.setReactionList(new ts(R(A),Array.from(tT.values())));let $=v(tN);$.id="reactionsDiagram",A.append($);let V="popButtonDivId";d(V);let ex=v(tN);ex.id=V,$.appendChild(ex);let ev="popButtonId";d(ev);let eE=N("Pop out diagram into a new window",tN);eE.id=ev,ex.appendChild(eE),d(tw),(s=document.createElement("canvas")).id=tw,$.appendChild(s),s.height=400,s.style.border="1px solid black",tQ(s,e,tP,4,2),eE.addEventListener("click",()=>{if(null==i){let t=s;t.id=tw,(i=window.open("","Reactions Diagram","width="+t.width+", height="+t.height)).document.body.appendChild(t),tQ(t,e,tP,4,2),eE.textContent="Pop back reaction diagram"}else{let t=i.document.getElementById(tw);s=t,$.appendChild(t),i.close(),i=null,eE.textContent="Pop out reaction diagram to a new window",tQ(s,e,tP,4,2)}});let eC=document.getElementById("conditions"),ey="conditionsList";d(ey);let eS=function(e){console.log(eP.tagName);let s=v(tN),i=B(e,eP.tagName),n=new eP(R(i));t.setConditions(n);let a=document.createElement("div");s.appendChild(a),s.appendChild(r({content:a,buttonLabel:eL.name,buttonFontSize:tr,boundary:tN,level:tc,contentDivId:eL.tagName}));let o=N("add",tm);a.appendChild(o),o.addEventListener("click",()=>{let e=new eL(new Map,"");n.addBathGas(e);let t=E(tm),s=C(eL.tagName,tN);t.appendChild(s);let i=f(Array.from(new Set(ty.keys())),eL.tagName,eP.tagName+"_"+eL.tagName,tN);i.value=e.value,i.addEventListener("change",t=>{let s=t.target;e.value=s.value,console.log("Added "+s.value+" as a "+eL.tagName),p(s)}),i.style.marginLeft="2px",p(i),t.appendChild(i);let o=N(tx,tN);o.addEventListener("click",()=>{a.removeChild(t),n.removeBathGas(e)}),t.appendChild(o),a.appendChild(t)});let l=Array.from(i.children).filter(e=>e.tagName===eL.tagName);if(l.length>0)for(let e=0;e<l.length;e++){let t=new eL(R(l[e]),y(b(l[e])));console.log("bathGas"+t.toString()),n.addBathGas(t);let s=E(tm),i=C(eL.tagName,tN);s.appendChild(i);let o=f(Array.from(new Set(ty.keys())),eL.tagName,eP.tagName+"_"+eL.tagName,tN);o.value=t.value,o.addEventListener("change",e=>{let s=e.target;t.value=s.value,console.log("Set "+eT.tagName+"_"+eL.tagName+" to "+s.value),p(s)}),p(o),s.appendChild(o);let d=N(tx,tN);d.addEventListener("click",()=>{a.removeChild(s),n.removeBathGas(t)}),s.appendChild(d),a.appendChild(s)}let d=document.createElement("div");s.appendChild(d);let g=new ew(new Map);s.appendChild(r({content:d,buttonLabel:ew.name,buttonFontSize:tr,boundary:tN,level:tc,contentDivId:eL.tagName}));let m=N("add",tm);d.appendChild(m),m.addEventListener("click",()=>{let e=new Map;e.set("units","Torr");let t=new eT(e),s=g.addPTpair(t),i=E(tm);tI(i,t),tF(i,t),tz(void 0,e,i,eT.tagName,eT.tagName,tN);let n=N("add details",tN);i.appendChild(n),n.addEventListener("click",()=>{let e,s=document.createElement("div");tD(i,t),tk(i,t),tG(i,t),tA(i,t),(e=N("add "+eb.tagName,tN)).addEventListener("click",()=>{let s=document.createElement("div");s.style.marginLeft="5px";let n=new eb(new Map,NaN);t.setExperimentRate(n);let a=h("number",eT.tagName+"_"+eb.tagName,tN,tu,e=>{let t=e.target;tB(n,t),u(t)},"",eb.tagName);s.appendChild(a),i.insertBefore(s,e),i.removeChild(e)}),i.insertBefore(s,n),i.removeChild(n)});let a=N(tx,tN);a.addEventListener("click",()=>{d.removeChild(i),g.removePTpair(s),t.removeBathGas()}),i.appendChild(a),d.appendChild(i)});let x=N("Add from spreadsheet",tN);d.appendChild(x),x.addEventListener("click",()=>{let e=E(tm),t=c("text",ew.tagName+"_addFromSpreadsheet",tm);e.appendChild(t),d.insertBefore(e,m),t.addEventListener("change",()=>{if(console.log("inputElement.value="+t.value),console.log("inputElement.value.length="+t.value.length),t.value.length>0){let s=t.value.split(" "),i=new Map;s[0].split("	").forEach((e,t)=>{i.set(e,t)}),console.log("pTPairsArray.length="+s.length);for(let e=1;e<s.length;e++){let t=new Map;t.set("units","Torr");let n=new eT(t),a=s[e].split("	"),o=i.get("P"),l=i.get("T"),r=i.get("me:bathGas"),h=parseFloat(a[o]),c=parseFloat(a[l]);if(n.setP(h),n.setT(c),i.has("me:bathGas")){let e=a[r];n.setBathGas(new eL(new Map,e))}console.log("pTPair="+n);let u=E(tm);tI(u,n),tF(u,n),tz(void 0,t,u,eT.tagName,eT.tagName,tN),tD(u,n),tk(u,n),tG(u,n),tA(u,n),console.log(m),console.log(d),d.insertBefore(u,m),g.addPTpair(n)}d.removeChild(e)}})});let L=i.getElementsByTagName(ew.tagName);if(L.length>0){if(L.length>1)throw Error("Expecting 1 "+ew.tagName+" but finding "+L.length+"!");let e=document.createElement("div");s.appendChild(e);let t=R(L[0]),i=L[0].getElementsByTagName(eT.tagName);if(0==i.length)throw Error("Expecting 1 or more "+eT.tagName+" but finding 0!");{let s=new ew(t);for(let t=0;t<i.length;t++){let n=new eT(R(i[t])),a=E(tm);e.appendChild(a);let o=i[t].getElementsByTagName(eL.tagName);if(o.length>0){o.length>1&&console.warn("xml_bathGass.length="+o.length);let e=document.createElement("label");e.textContent=eL.tagName+": ",a.appendChild(e);let t=y(b(o[0])),s=new eL(R(o[0]),t);n.setBathGas(s);let i=f(Array.from(new Set(ty.keys())),eL.tagName,eT.tagName+"_"+eL.tagName,tN);i.value=s.value,i.addEventListener("change",e=>{let t=e.target;s.value=t.value,console.log("Set "+eT.tagName+"_"+eL.tagName+" to "+t.value),p(t)}),p(i),a.appendChild(i)}let l=i[t].getElementsByTagName(eb.tagName);if(l.length>0){l.length>1&&console.warn("xml_experimentRates.length="+l.length);let e=y(b(l[0])),t=new eb(R(l[0]),parseFloat(e));n.setExperimentRate(t);let s=h("number",eT.tagName+"_"+eb.tagName,tN,th,e=>{tB(t,e.target)},t.value.toString(),eb.tagName);a.appendChild(s)}tI(a,n),tF(a,n),tz(void 0,R(i[t]),a,eT.tagName,eT.tagName,tN),tD(a,n),tk(a,n),tG(a,n),tA(a,n),s.addPTpair(n),e.appendChild(a)}n.setPTs(s)}}return s}(n);eS.id=ey,eC.appendChild(r({content:eS,buttonLabel:"Conditions",buttonFontSize:td,boundary:tN,level:th,contentDivId:eS.id})),t.setConditions(new eP(R(eC)));let eO=document.getElementById("modelParameters"),eM=(console.log(eB.tagName),a=v(tN),o=B(n,eB.tagName),m=new eB(R(o)),t.setModelParameters(m),function(e,t,s){let i,n,a=E(tc);s.appendChild(a);let o=t.getElementsByTagName(e_.tagName),l=x(e_.tagName,"",tN,tN),d=l.querySelector("button");d.classList.add("optionOn"),d.classList.add("optionOff"),a.appendChild(l);let r=eB.tagName+"_"+e_.tagName+"_input",g=eB.tagName+"_"+e_.tagName+"_select";if(1==o.length){let t=parseFloat(n=y(b(o[0])));i=new e_(R(o[0]),t),e.setGrainSize(i),d.textContent=tv+tC,tq(e,a,i,r,g,n),d.classList.toggle("optionOff")}else n="",i=new e_(new Map,NaN),d.textContent=tE+tL,d.classList.toggle("optionOn");d.addEventListener("click",()=>{if(e.index.has(e_.tagName)){n=i.value.toString(),e.removeGrainSize();let t=document.getElementById(r);null!=t&&t.remove(),d.textContent=tE+tL,d.classList.toggle("optionOn"),d.classList.toggle("optionOff")}else tq(e,a,i,r,g,n),d.textContent=tv+tC,d.classList.toggle("optionOff"),d.classList.toggle("optionOn")})}(m,o,a),function(e,t,s){let i,n,a=E(tc);s.appendChild(a);let o=t.getElementsByTagName(e7.tagName),l=x(e7.tagName,"",tN,tN),d=l.querySelector("button");d.classList.add("optionOn"),d.classList.add("optionOff"),a.appendChild(l);let r=eB.tagName+"_"+e7.tagName+"_input",g=eB.tagName+"_"+e7.tagName+"_select";if(1==o.length){let t=parseFloat(n=y(b(o[0])));i=new e7(R(o[0]),t),e.setAutomaticallySetMaxEne(i),d.textContent=tv+tC,tU(e,a,i,r,g,n),d.classList.toggle("optionOff")}else n="",i=new e7(new Map,NaN),d.textContent=tE+tL,d.classList.toggle("optionOn");d.addEventListener("click",()=>{if(e.index.has(e7.tagName)){n=i.value.toString(),e.removeAutomaticallySetMaxEne();let t=document.getElementById(r);null!=t&&t.remove(),d.textContent=tE+tL,d.classList.toggle("optionOn"),d.classList.toggle("optionOff")}else tU(e,a,i,r,g,n),d.textContent=tv+tC,d.classList.toggle("optionOff"),d.classList.toggle("optionOn")})}(m,o,a),function(e,t,s){let i,n,a=E(tc);s.appendChild(a);let o=t.getElementsByTagName(ez.tagName),l=x(ez.tagName,"",tN,tN),d=l.querySelector("button");d.classList.add("optionOn"),d.classList.add("optionOff"),a.appendChild(l);let r=eB.tagName+"_"+ez.tagName+"_input",g=eB.tagName+"_"+ez.tagName+"_select";if(1==o.length){let t=parseFloat(n=y(b(o[0])));i=new ez(R(o[0]),t),e.setEnergyAboveTheTopHill(i),d.textContent=tv+tC,tH(e,a,i,r,g,n),d.classList.toggle("optionOff")}else n="",i=new ez(new Map,NaN),d.textContent=tE+tL,d.classList.toggle("optionOn");d.addEventListener("click",t=>{if(e.index.has(ez.tagName)){n=i.value.toString(),e.removeEnergyAboveTheTopHill();let t=document.getElementById(r);null!=t&&t.remove(),d.textContent=tE+tL,d.classList.toggle("optionOn"),d.classList.toggle("optionOff")}else tH(e,a,i,r,g,n),d.textContent=tv+tC,d.classList.toggle("optionOff"),d.classList.toggle("optionOn")})}(m,o,a),function(e,t,s){let i,n,a=E(tc);s.appendChild(a);let o=t.getElementsByTagName(eR.tagName),l=x(eR.tagName,"",tN,tN),d=l.querySelector("button");d.classList.add("optionOn"),d.classList.add("optionOff"),a.appendChild(l);let r=eB.tagName+"_"+eR.tagName+"_input",g=eB.tagName+"_"+eR.tagName+"_select";if(1==o.length){let t=parseFloat(n=y(b(o[0])));i=new eR(R(o[0]),t),e.setMaxTemperature(i),d.textContent=tv+tC,tX(e,a,i,r,g,n),d.classList.toggle("optionOff")}else n="",i=new eR(new Map,NaN),d.textContent=tE+tL,d.classList.toggle("optionOn");d.addEventListener("click",t=>{if(e.index.has(eR.tagName)){n=i.value.toString(),e.removeMaxTemperature();let t=document.getElementById(r);null!=t&&t.remove(),d.textContent=tE+tL,d.classList.toggle("optionOn"),d.classList.toggle("optionOff")}else tX(e,a,i,r,g,n),d.textContent=tv+tC,d.classList.toggle("optionOff"),d.classList.toggle("optionOn")})}(m,o,a),a);eM.id="modelParametersList",d(eM.id),eO.appendChild(r({content:eM,buttonLabel:"Model Parameters",buttonFontSize:td,boundary:tN,level:th,contentDivId:eM.id})),t.setModelParameters(new eB(R(eO)));let tn=document.getElementById("control"),ta=(console.log(e9.tagName),O=v(tN),T=B(n,e9.tagName),w=new e9(R(T)),t.setControl(w),function(e,t,s){let i=E(tc);t.appendChild(i);let n=s.getElementsByTagName(eI.tagName),a=x(eI.tagName,"",tN,tN),o=a.querySelector("button");o.classList.add("optionOn"),o.classList.add("optionOff"),i.appendChild(a);let l=new eI;1==n.length?(e.setCalculateRateCoefficientsOnly(l),o.textContent=tv,o.classList.toggle("optionOff")):(o.textContent=tE,o.classList.toggle("optionOn")),o.addEventListener("click",t=>{e.index.has(eI.tagName)?(e.removeCalculateRateCoefficientsOnly(),o.textContent=tE,o.classList.toggle("optionOn"),o.classList.toggle("optionOff")):(e.setCalculateRateCoefficientsOnly(l),o.textContent=tv,o.classList.toggle("optionOff"),o.classList.toggle("optionOn"))})}(w,O,T),function(e,t,s){let i=E(tc);t.appendChild(i);let n=s.getElementsByTagName(eF.tagName),a=x(eF.tagName,"",tN,tN),o=a.querySelector("button");o.classList.add("optionOn"),o.classList.add("optionOff"),i.appendChild(a);let l=new eF;1==n.length?(e.setPrintCellDOS(l),o.textContent=tv,o.classList.toggle("optionOff")):(o.textContent=tE,o.classList.toggle("optionOn")),o.addEventListener("click",t=>{e.index.has(eF.tagName)?(e.removePrintCellDOS(),o.textContent=tE,o.classList.toggle("optionOn"),o.classList.toggle("optionOff")):(e.setPrintCellDOS(l),o.textContent=tv,o.classList.toggle("optionOff"),o.classList.toggle("optionOn"))})}(w,O,T),function(e,t,s){let i=E(tc);t.appendChild(i);let n=s.getElementsByTagName(eD.tagName),a=x(eD.tagName,"",tN,tN),o=a.querySelector("button");o.classList.add("optionOn"),o.classList.add("optionOff"),i.appendChild(a);let l=new eD;1==n.length?(e.setPrintCellTransitionStateFlux(l),o.textContent=tv,o.classList.toggle("optionOff")):(o.textContent=tE,o.classList.toggle("optionOn")),o.addEventListener("click",t=>{e.index.has(eD.tagName)?(e.removePrintCellTransitionStateFlux(),o.textContent=tE,o.classList.toggle("optionOn"),o.classList.toggle("optionOff")):(e.setPrintCellTransitionStateFlux(l),o.textContent=tv,o.classList.toggle("optionOff"),o.classList.toggle("optionOn"))})}(w,O,T),function(e,t,s){let i=E(tc);t.appendChild(i);let n=s.getElementsByTagName(ek.tagName),a=x(ek.tagName,"",tN,tN),o=a.querySelector("button");o.classList.add("optionOn"),o.classList.add("optionOff"),i.appendChild(a);let l=new ek;1==n.length?(e.setPrintReactionOperatorColumnSums(l),o.textContent=tv,o.classList.toggle("optionOff")):(o.textContent=tE,o.classList.toggle("optionOn")),o.addEventListener("click",t=>{e.index.has(ek.tagName)?(e.removePrintReactionOperatorColumnSums(),o.textContent=tE,o.classList.toggle("optionOn"),o.classList.toggle("optionOff")):(e.setPrintReactionOperatorColumnSums(l),o.textContent=tv,o.classList.toggle("optionOff"),o.classList.toggle("optionOn"))})}(w,O,T),function(e,t,s){let i=E(tc);t.appendChild(i);let n=s.getElementsByTagName(eG.tagName),a=x(eG.tagName,"",tN,tN),o=a.querySelector("button");o.classList.add("optionOn"),o.classList.add("optionOff"),i.appendChild(a);let l=new eG;1==n.length?(e.setPrintGrainBoltzmann(l),o.textContent=tv,o.classList.toggle("optionOff")):(o.textContent=tE,o.classList.toggle("optionOn")),o.addEventListener("click",t=>{e.index.has(eG.tagName)?(e.removePrintGrainBoltzmann(),o.textContent=tE,o.classList.toggle("optionOn"),o.classList.toggle("optionOff")):(e.setPrintGrainBoltzmann(l),o.textContent=tv,o.classList.toggle("optionOff"),o.classList.toggle("optionOn"))})}(w,O,T),function(e,t,s){let i=E(tc);t.appendChild(i);let n=s.getElementsByTagName(eA.tagName),a=x(eA.tagName,"",tN,tN),o=a.querySelector("button");o.classList.add("optionOn"),o.classList.add("optionOff"),i.appendChild(a);let l=new eA;1==n.length?(e.setPrintGrainDOS(l),o.textContent=tv,o.classList.toggle("optionOff")):(o.textContent=tE,o.classList.toggle("optionOn")),o.addEventListener("click",t=>{e.index.has(eA.tagName)?(e.removePrintGrainDOS(),o.textContent=tE,o.classList.toggle("optionOn"),o.classList.toggle("optionOff")):(e.setPrintGrainDOS(l),o.textContent=tv,o.classList.toggle("optionOff"),o.classList.toggle("optionOn"))})}(w,O,T),function(e,t,s){let i=E(tc);t.appendChild(i);let n=s.getElementsByTagName(eq.tagName),a=x(eq.tagName,"",tN,tN),o=a.querySelector("button");o.classList.add("optionOn"),o.classList.add("optionOff"),i.appendChild(a);let l=new eq;1==n.length?(e.setPrintGrainkbE(l),o.textContent=tv,o.classList.toggle("optionOff")):(o.textContent=tE,o.classList.toggle("optionOn")),o.addEventListener("click",t=>{e.index.has(eq.tagName)?(e.removePrintGrainkbE(),o.textContent=tE,o.classList.toggle("optionOn"),o.classList.toggle("optionOff")):(e.setPrintGrainkbE(l),o.textContent=tv,o.classList.toggle("optionOff"),o.classList.toggle("optionOn"))})}(w,O,T),function(e,t,s){let i=E(tc);t.appendChild(i);let n=s.getElementsByTagName(eU.tagName),a=x(eU.tagName,"",tN,tN),o=a.querySelector("button");o.classList.add("optionOn"),o.classList.add("optionOff"),i.appendChild(a);let l=new eU;1==n.length?(e.setPrintGrainkfE(l),o.textContent=tv,o.classList.toggle("optionOff")):(o.textContent=tE,o.classList.toggle("optionOn")),o.addEventListener("click",t=>{e.index.has(eU.tagName)?(e.removePrintGrainkfE(),o.textContent=tE,o.classList.toggle("optionOn"),o.classList.toggle("optionOff")):(e.setPrintGrainkfE(l),o.textContent=tv,o.classList.toggle("optionOff"),o.classList.toggle("optionOn"))})}(w,O,T),function(e,t,s){let i=E(tc);t.appendChild(i);let n=s.getElementsByTagName(eH.tagName),a=x(eH.tagName,"",tN,tN),o=a.querySelector("button");o.classList.add("optionOn"),o.classList.add("optionOff"),i.appendChild(a);let l=new eH;1==n.length?(e.setPrintTSsos(l),o.textContent=tv,o.classList.toggle("optionOff")):(o.textContent=tE,o.classList.toggle("optionOn")),o.addEventListener("click",t=>{e.index.has(eH.tagName)?(e.removePrintTSsos(),o.textContent=tE,o.classList.toggle("optionOn"),o.classList.toggle("optionOff")):(e.setPrintTSsos(l),o.textContent=tv,o.classList.toggle("optionOff"),o.classList.toggle("optionOn"))})}(w,O,T),function(e,t,s){let i=E(tc);t.appendChild(i);let n=s.getElementsByTagName(eX.tagName),a=x(eX.tagName,"",tN,tN),o=a.querySelector("button");o.classList.add("optionOn"),o.classList.add("optionOff"),i.appendChild(a);let l=new eX;1==n.length?(e.setPrintGrainedSpeciesProfile(l),o.textContent=tv,o.classList.toggle("optionOff")):(o.textContent=tE,o.classList.toggle("optionOn")),o.addEventListener("click",t=>{e.index.has(eX.tagName)?(e.removePrintGrainedSpeciesProfile(),o.textContent=tE,o.classList.toggle("optionOn"),o.classList.toggle("optionOff")):(e.setPrintGrainedSpeciesProfile(l),o.textContent=tv,o.classList.toggle("optionOff"),o.classList.toggle("optionOn"))})}(w,O,T),function(e,t,s){let i=E(tc);t.appendChild(i);let n=s.getElementsByTagName(ej.tagName),a=x(ej.tagName,"",tN,tN),o=a.querySelector("button");o.classList.add("optionOn"),o.classList.add("optionOff"),i.appendChild(a);let l=new ej;1==n.length?(e.setPrintGrainTransitionStateFlux(l),o.textContent=tv,o.classList.toggle("optionOff")):(o.textContent=tE,o.classList.toggle("optionOn")),o.addEventListener("click",t=>{e.index.has(ej.tagName)?(e.removePrintGrainTransitionStateFlux(),o.textContent=tE,o.classList.toggle("optionOn"),o.classList.toggle("optionOff")):(e.setPrintGrainTransitionStateFlux(l),o.textContent=tv,o.classList.toggle("optionOff"),o.classList.toggle("optionOn"))})}(w,O,T),function(e,t,s){let i=E(tc);t.appendChild(i);let n=s.getElementsByTagName(e$.tagName),a=x(e$.tagName,"",tN,tN),o=a.querySelector("button");o.classList.add("optionOn"),o.classList.add("optionOff"),i.appendChild(a);let l=new e$;1==n.length?(e.setPrintReactionOperatorSize(l),o.textContent=tv,o.classList.toggle("optionOff")):(o.textContent=tE,o.classList.toggle("optionOn")),o.addEventListener("click",t=>{e.index.has(e$.tagName)?(e.removePrintReactionOperatorSize(),o.textContent=tE,o.classList.toggle("optionOn"),o.classList.toggle("optionOff")):(e.setPrintReactionOperatorSize(l),o.textContent=tv,o.classList.toggle("optionOff"),o.classList.toggle("optionOn"))})}(w,O,T),function(e,t,s){let i=E(tc);t.appendChild(i);let n=s.getElementsByTagName(eV.tagName),a=x(eV.tagName,"",tN,tN),o=a.querySelector("button");o.classList.add("optionOn"),o.classList.add("optionOff"),i.appendChild(a);let l=new eV;1==n.length?(e.setPrintSpeciesProfile(l),o.textContent=tv,o.classList.toggle("optionOff")):(o.textContent=tE,o.classList.toggle("optionOn")),o.addEventListener("click",t=>{e.index.has(eV.tagName)?(e.removePrintSpeciesProfile(),o.textContent=tE,o.classList.toggle("optionOn"),o.classList.toggle("optionOff")):(e.setPrintSpeciesProfile(l),o.textContent=tv,o.classList.toggle("optionOff"),o.classList.toggle("optionOn"))})}(w,O,T),function(e,t,s){let i=E(tc);t.appendChild(i);let n=s.getElementsByTagName(eW.tagName),a=x(eW.tagName,"",tN,tN),o=a.querySelector("button");o.classList.add("optionOn"),o.classList.add("optionOff"),i.appendChild(a);let l=new eW;1==n.length?(e.setPrintPhenomenologicalEvolution(l),o.textContent=tv,o.classList.toggle("optionOff")):(o.textContent=tE,o.classList.toggle("optionOn")),o.addEventListener("click",t=>{e.index.has(eW.tagName)?(e.removePrintPhenomenologicalEvolution(),o.textContent=tE,o.classList.toggle("optionOn"),o.classList.toggle("optionOff")):(e.setPrintPhenomenologicalEvolution(l),o.textContent=tv,o.classList.toggle("optionOff"),o.classList.toggle("optionOn"))})}(w,O,T),function(e,t,s){let i=E(tc);t.appendChild(i);let n=s.getElementsByTagName(eK.tagName),a=x(eK.tagName,"",tN,tN),o=a.querySelector("button");o.classList.add("optionOn"),o.classList.add("optionOff"),i.appendChild(a);let l=new eK;1==n.length?(e.setPrintTunnelingCoefficients(l),o.textContent=tv,o.classList.toggle("optionOff")):(o.textContent=tE,o.classList.toggle("optionOn")),o.addEventListener("click",t=>{e.index.has(eK.tagName)?(e.removePrintTunnelingCoefficients(),o.textContent=tE,o.classList.toggle("optionOn"),o.classList.toggle("optionOff")):(e.setPrintTunnelingCoefficients(l),o.textContent=tv,o.classList.toggle("optionOff"),o.classList.toggle("optionOn"))})}(w,O,T),function(e,t,s){let i=E(tc);t.appendChild(i);let n=s.getElementsByTagName(eY.tagName),a=x(eY.tagName,"",tN,tN),o=a.querySelector("button");o.classList.add("optionOn"),o.classList.add("optionOff"),i.appendChild(a);let l=new eY;1==n.length?(e.setPrintCrossingCoefficients(l),o.textContent=tv,o.classList.toggle("optionOff")):(o.textContent=tE,o.classList.toggle("optionOn")),o.addEventListener("click",t=>{e.index.has(eY.tagName)?(e.removePrintCrossingCoefficients(),o.textContent=tE,o.classList.toggle("optionOn"),o.classList.toggle("optionOff")):(e.setPrintCrossingCoefficients(l),o.textContent=tv,o.classList.toggle("optionOff"),o.classList.toggle("optionOn"))})}(w,O,T),function(e,t,s){let i=E(tc);t.appendChild(i);let n=s.getElementsByTagName(eJ.tagName),a=x(eJ.tagName,"",tN,tN),o=a.querySelector("button");o.classList.add("optionOn"),o.classList.add("optionOff"),i.appendChild(a);let l=new eJ;1==n.length?(e.setTestDOS(l),o.textContent=tv,o.classList.toggle("optionOff")):(o.textContent=tE,o.classList.toggle("optionOn")),o.addEventListener("click",t=>{e.index.has(eJ.tagName)?(e.removeTestDOS(),o.textContent=tE,o.classList.toggle("optionOn"),o.classList.toggle("optionOff")):(e.setTestDOS(l),o.textContent=tv,o.classList.toggle("optionOff"),o.classList.toggle("optionOn"))})}(w,O,T),function(e,t,s){let i=E(tc);t.appendChild(i);let n=s.getElementsByTagName(eQ.tagName),a=x(eQ.tagName,"",tN,tN),o=a.querySelector("button");o.classList.add("optionOn"),o.classList.add("optionOff"),i.appendChild(a);let l=new eQ;1==n.length?(e.setTestRateConstants(l),o.textContent=tv,o.classList.toggle("optionOff")):(o.textContent=tE,o.classList.toggle("optionOn")),o.addEventListener("click",t=>{e.index.has(eQ.tagName)?(e.removeTestRateConstants(),o.textContent=tE,o.classList.toggle("optionOn"),o.classList.toggle("optionOff")):(e.setTestRateConstants(l),o.textContent=tv,o.classList.toggle("optionOff"),o.classList.toggle("optionOn"))})}(w,O,T),function(e,t,s){let i=E(tc);t.appendChild(i);let n=s.getElementsByTagName(eZ.tagName),a=x(eZ.tagName,"",tN,tN),o=a.querySelector("button");o.classList.add("optionOn"),o.classList.add("optionOff"),i.appendChild(a);let l=new eZ;1==n.length?(e.setUseTheSameCellNumberForAllConditions(l),o.textContent=tv,o.classList.toggle("optionOff")):(o.textContent=tE,o.classList.toggle("optionOn")),o.addEventListener("click",t=>{e.index.has(eZ.tagName)?(e.removeUseTheSameCellNumberForAllConditions(),o.textContent=tE,o.classList.toggle("optionOn"),o.classList.toggle("optionOff")):(e.setUseTheSameCellNumberForAllConditions(l),o.textContent=tv,o.classList.toggle("optionOff"),o.classList.toggle("optionOn"))})}(w,O,T),function(e,t,s){let i=E(tc);t.appendChild(i);let n=s.getElementsByTagName(e1.tagName),a=x(e1.tagName,"",tN,tN),o=a.querySelector("button");o.classList.add("optionOn"),o.classList.add("optionOff"),i.appendChild(a);let l=new e1;1==n.length?(e.setHideInactive(l),o.textContent=tv,o.classList.toggle("optionOff")):(o.textContent=tE,o.classList.toggle("optionOn")),o.addEventListener("click",t=>{e.index.has(e1.tagName)?(e.removeHideInactive(),o.textContent=tE,o.classList.toggle("optionOn"),o.classList.toggle("optionOff")):(e.setHideInactive(l),o.textContent=tv,o.classList.toggle("optionOff"),o.classList.toggle("optionOn"))})}(w,O,T),function(e,t,s){let i=E(tc);t.appendChild(i);let n=s.getElementsByTagName(e0.tagName),a=x(e0.tagName,"",tN,tN),o=a.querySelector("button");o.classList.add("optionOn"),o.classList.add("optionOff"),i.appendChild(a);let l=new e0;1==n.length?(e.setForceMacroDetailedBalance(l),o.textContent=tv,o.classList.toggle("optionOff")):(o.textContent=tE,o.classList.toggle("optionOn")),o.addEventListener("click",t=>{e.index.has(e0.tagName)?(e.removeForceMacroDetailedBalance(),o.textContent=tE,o.classList.toggle("optionOn"),o.classList.toggle("optionOff")):(e.setForceMacroDetailedBalance(l),o.textContent=tv,o.classList.toggle("optionOff"),o.classList.toggle("optionOn"))})}(w,O,T),function(e,t,s){let i,n=E(tc);t.appendChild(n);let a=s.getElementsByTagName(e3.tagName),o=x(e3.tagName,"",tN,tN),l=o.querySelector("button");l.classList.add("optionOn"),l.classList.add("optionOff"),n.appendChild(o);let d=e9.tagName+"_"+e3.tagName+"_input",r=e9.tagName+"_"+e3.tagName+"_Tmax",g=e9.tagName+"_"+e3.tagName+"_Tmin",h=e9.tagName+"_"+e3.tagName+"_Tstep";1==a.length?(i=new e3(R(a[0])),e.setTestMicroRates(i),l.textContent=tv+", change using inputs:",tj(e,n,a,r,g,h),l.classList.toggle("optionOff")):(i=new e3(new Map),l.textContent=tE+tL,l.classList.toggle("optionOn")),l.addEventListener("click",t=>{let s=N(tC,tN);if(n.appendChild(s),s.addEventListener("click",e=>{n.removeChild(s)}),e.index.has(e4.tagName)){e.removeTestMicroRates();let t=document.getElementById(d);null!=t&&t.remove(),HTMLDivElement,null!=(t=document.getElementById(r))&&t.remove(),null!=(t=document.getElementById(g))&&t.remove(),null!=(t=document.getElementById(h))&&t.remove(),l.textContent=tE+tL,l.classList.toggle("optionOn"),l.classList.toggle("optionOff")}else tj(e,n,a,r,g,h),l.textContent=tv+tC,l.classList.toggle("optionOff"),l.classList.toggle("optionOn")})}(w,O,T),function(e,t,s){let i,n=E(tc);t.appendChild(n);let a=s.getElementsByTagName(e2.tagName),o=x(e2.tagName,"",tN,tN),l=o.querySelector("button");l.classList.add("optionOn"),l.classList.add("optionOff"),n.appendChild(o);let d=e2.options,r=e9.tagName+"_"+e2.tagName+"_input",g=!0;if(1==a.length){let t=y(b(a[0]));i=new e2(R(a[0]),t),l.textContent=tv+tC,g=t$(e,d,n,i,r,t,g),l.classList.toggle("optionOff")}else i=new e2(new Map,tb),l.textContent=tE+tL,l.classList.toggle("optionOn");let h=i.value;l.addEventListener("click",t=>{if(e.index.has(e2.tagName)){h=i.value,e.removeCalcMethod();let t=document.getElementById(r);null!=t&&t.remove(),l.textContent=tE+tL,l.classList.toggle("optionOn"),l.classList.toggle("optionOff")}else g&&d.push(tb),g=t$(e,d,n,i,r,h,g),l.textContent=tv+tC,l.classList.toggle("optionOff"),l.classList.toggle("optionOn")})}(w,O,T),function(e,t,s){let i,n,a=E(tc);t.appendChild(a);let o=s.getElementsByTagName(e4.tagName),l=x(e4.tagName,"",tN,tN),d=l.querySelector("button");d.classList.add("optionOn"),d.classList.add("optionOff"),a.appendChild(l);let r=e9.tagName+"_"+e4.tagName+"_input";if(1==o.length){let t=parseFloat(n=y(b(o[0])));i=new e4(R(o[0]),t),e.setEigenvalues(i),d.textContent=tv+tC,tV(e,a,i,r,n),d.classList.toggle("optionOff")}else n="",i=new e4(new Map,NaN),d.textContent=tE+tL,d.classList.toggle("optionOn");d.addEventListener("click",t=>{let s=N(tC,tN);if(a.appendChild(s),s.addEventListener("click",e=>{a.removeChild(s)}),e.index.has(e4.tagName)){n=i.value.toString(),e.removeEigenvalues();let t=document.getElementById(r);null!=t&&t.remove(),d.textContent=tE+tL,d.classList.toggle("optionOn"),d.classList.toggle("optionOff")}else tV(e,a,i,r,n),d.textContent=tv+tC,d.classList.toggle("optionOff"),d.classList.toggle("optionOn")})}(w,O,T),function(e,t,s){let i,n,a=E(tc);t.appendChild(a);let o=s.getElementsByTagName(e5.tagName),l=x(e5.tagName,"",tN,tN),d=l.querySelector("button");d.classList.add("optionOn"),d.classList.add("optionOff"),a.appendChild(l);let r=e9.tagName+"_"+e5.tagName+"_input";if(1==o.length){let t=parseFloat(n=y(b(o[0])));i=new e5(R(o[0]),t),e.setShortestTimeOfInterest(i),d.textContent=tv+tC,tW(e,a,i,r,n),d.classList.toggle("optionOff")}else n="",i=new e5(new Map,NaN),d.textContent=tE+tL,d.classList.toggle("optionOn");d.addEventListener("click",t=>{if(e.index.has(e5.tagName)){n=i.value.toString(),e.removeShortestTimeOfInterest();let t=document.getElementById(r);null!=t&&t.remove(),d.textContent=tE+tL,d.classList.toggle("optionOn"),d.classList.toggle("optionOff")}else tW(e,a,i,r,n),d.textContent=tv+tC,d.classList.toggle("optionOff"),d.classList.toggle("optionOn")})}(w,O,T),function(e,t,s){let i,n,a=E(tc);t.appendChild(a);let o=s.getElementsByTagName(e6.tagName),l=x(e6.tagName,"",tN,tN),d=l.querySelector("button");d.classList.add("optionOn"),d.classList.add("optionOff"),a.appendChild(l);let r=e9.tagName+"_"+e6.tagName+"_input";if(1==o.length){let t=parseFloat(n=y(b(o[0])));i=new e6(R(o[0]),t),e.setMaximumEvolutionTime(i),d.textContent=tv+tC,tK(e,a,i,r,n),d.classList.toggle("optionOff")}else n="",i=new e6(new Map,NaN),d.textContent=tE+tL,d.classList.toggle("optionOn");d.addEventListener("click",t=>{if(e.index.has(e6.tagName)){n=i.value.toString(),e.removeMaximumEvolutionTime();let t=document.getElementById(r);null!=t&&t.remove(),d.textContent=tE+tL,d.classList.toggle("optionOn"),d.classList.toggle("optionOff")}else tK(e,a,i,r,n),d.textContent=tv+tC,d.classList.toggle("optionOff"),d.classList.toggle("optionOn")})}(w,O,T),function(e,t,s){let i,n,a=E(tc);t.appendChild(a);let o=s.getElementsByTagName(e7.tagName),l=x(e7.tagName,"",tN,tN),d=l.querySelector("button");d.classList.add("optionOn"),d.classList.add("optionOff"),a.appendChild(l);let r=e9.tagName+"_"+e7.tagName+"_input";if(1==o.length){let t=parseFloat(n=y(b(o[0])));i=new e7(R(o[0]),t),e.setAutomaticallySetMaxEne(i),d.textContent=tv+tC,tY(e,a,i,r,n),d.classList.toggle("optionOff")}else n="",i=new e7(new Map,NaN),d.textContent=tE+tL,d.classList.toggle("optionOn");d.addEventListener("click",t=>{if(e.index.has(e7.tagName)){n=i.value.toString(),e.removeAutomaticallySetMaxEne();let t=document.getElementById(r);null!=t&&t.remove(),d.textContent=tE+tL,d.classList.toggle("optionOn"),d.classList.toggle("optionOff")}else tY(e,a,i,r,n),d.textContent=tv+tC,d.classList.toggle("optionOff"),d.classList.toggle("optionOn")})}(w,O,T),function(e,t,s){let i,n,a=E(tc);t.appendChild(a);let o=s.getElementsByTagName(e8.tagName),l=x(e8.tagName,"",tN,tN),d=l.querySelector("button");d.classList.add("optionOn"),d.classList.add("optionOff"),a.appendChild(l);let r=e9.tagName+"_"+e8.tagName+"_input";if(1==o.length){let t=parseFloat(n=y(b(o[0])));i=new e8(R(o[0]),t),e.setDiagramEnergyOffset(i),d.textContent=tv+tC,tJ(e,a,i,r,n),d.classList.toggle("optionOff")}else n="",i=new e8(new Map,NaN),d.textContent=tE+tL,d.classList.toggle("optionOn");d.addEventListener("click",t=>{if(e.index.has(e8.tagName)){n=i.value.toString(),e.removeDiagramEnergyOffset();let t=document.getElementById(r);null!=t&&t.remove(),d.textContent=tE+tL,d.classList.toggle("optionOn"),d.classList.toggle("optionOff")}else tJ(e,a,i,r,n),d.textContent=tv+tC,d.classList.toggle("optionOff"),d.classList.toggle("optionOn")})}(w,O,T),O);ta.id="controlList",d(ta.id),tn.appendChild(r({content:ta,buttonLabel:"Control",buttonFontSize:td,boundary:tN,level:th,contentDivId:ta.id})),t.setControl(new e9(R(tn))),function(){for(var e=document.getElementsByClassName("collapsible"),t=0;t<e.length;t++)e[t].removeEventListener("click",g),e[t].addEventListener("click",g)}()}(new DOMParser().parseFromString(T,"text/xml"))}}};let w=n.slice(O,O+1048576);m.readAsText(w),O+=1048576}},o.click(),a.textContent="Load"}),a.style.fontSize="1em",n.appendChild(a);let o=N("Increase Font Size",tN);o.addEventListener("click",()=>{let e=parseFloat(getComputedStyle(document.body).fontSize);document.body.style.fontSize=e+1+"px",null!=i&&(i.document.body.style.fontSize=e+1+"px"),t_()}),n.appendChild(o);let m=N("Decrease Font Size",tN);m.addEventListener("click",()=>{let e=parseFloat(getComputedStyle(document.body).fontSize);document.body.style.fontSize=e-1+"px",null!=i&&(i.document.body.style.fontSize=e-1+"px"),t_()}),n.appendChild(m);let O=N("Light/Dark Mode",tN);O.addEventListener("click",()=>{(e=!e)?document.body.className="dark-mode":document.body.className="light-mode",t_()}),n.appendChild(O);let T="saveButtonId";d(T);let w=N("Save",tN);w.id=T,w.addEventListener("click",tZ),w.style.fontSize="1em",n.appendChild(w);let P=v(tN),_=document.createElement("p");P.appendChild(_),_.textContent="Welcome to MXG - a Graphical User Interface (GUI) program to assist MEMSER users in creating, editing     and visualising MESMER data. MESMER is the Master Equation Solver for Multi Energy-well Reactions, details can be found     at: ",_.appendChild(tl),_.style.alignContent="center";let M=document.createElement("p");P.appendChild(M),M.textContent="MXG development is being funded by the UK Engineering and Physical Sciences Research Council (EPSRC).";let z=document.createElement("p");P.appendChild(z),z.textContent="There is a menu above containing buttons. Use the Load button to select a MESMER file to load (the file         will not be modified). MXG reads the file and presents the data it contains so that the user can make changes and use         the Save button to generate a new MESMER file. The saved file should have the same content as was loaded except it         will contain no comments, values will be trimmed of white space, and number formats will be in a standard         scientific notation if they were not already. The saved file will also reflect any changes specified using the GUI.";let G=document.createElement("p");P.appendChild(G),G.textContent="MXG is designed to be user-friendly and accessible. Between the Load and Save buttons are buttons to         increase or decrease the font size. It is planned to have themes selectable to provide a dark mode rendering and to         support users without normal colour vision.The development is in an alpha release phase, is undergoing testing, and         is not recommended for general use. A community release with ongoing support from MESMER developers is scheduled for         the end of April 2024. MXG is free and open source software based and free and open source software. The main         development GitHub repository is: ",G.appendChild(ta);let A=document.createElement("p");A.textContent+="Please feel free to explore the code and have a play with MXG.",P.appendChild(A);let H=document.createElement("p");P.appendChild(H),H.textContent="MXG can be installed locally as a Progressive Web App (PWA). A PWA is a type of application software     that works on any platform with a standards-compliant Web browser. PWA installation varies by Web browser/device.     Some details to help with installation of the MXG PWA are in the GitHub Repository README. Please refer to that     README for further details. Below the menu is a section for instructions on how to use MXG.";let X=document.createElement("p");P.appendChild(X),X.textContent='The MESMER file loaded is expected to contain the following child elements of the parent "me:mesmer"     element: "me:title", "moleculeList", "reactionList", "me:conditions", "me:modelParameters", and "me:control". If a     child element is missing or there are multiple of the same, an Error is currently thrown. MXG should support files     loaded with multiple "me:contol" sections soon...',document.body.appendChild(P);let $=v(tN);document.body.appendChild($);let V=document.createElement("p");$.appendChild(V),V.textContent='Upon loading a MESMER file, an input containing the "me:title" value should appear along side a label.         The value can be changed using the input. The "me:title" value is used to compose the filename for data saved using         the Save button. Characters that are unsuitable for filenames will be replaced with the underscore character "_" in         the filename.';let ex=document.createElement("p");$.appendChild(ex),ex.textContent='The "moleculeList", "reactionList", "me:conditions", "me:modelParameters", and "me:control" details         are presented below the "me:title" in a series of buttons. A canvas depicts a well diagram for the reactions. The         diagram redraws if an "me:ZPE" property value of a molecule a listed reaction are changed. Below all this is a text         representation of the file loaded.';let ev=document.createElement("p");$.appendChild(ev),ev.textContent='The "moleculeList", "reactionList", "me:conditions", "me:modelParameters", and "me:control" buttons contain         a triangular symbol which indicate a collapsed (triangle orientated with a point down: â–¼) or expanded (triangle with a point         up: â–²) state. Actioning these buttons will either expand or collapse content that should appear or be present below the button.'}),window.setNumberArrayNode=tR,window.set=tB;
//# sourceMappingURL=index.79d70b8c.js.map
