let e,t,n,s,i,a,o,r,l,g,d,h,c,m,u,f;function N(e,t){if(!e.has(t))throw Error(`Key ${t} not found in map`);return e.get(t)}function p(e,t){return void 0==t&&(t=", "),e.map(e=>null==e?"null":e.toString()).join(t)}function E(e){return""!==e&&!isNaN(Number(e))}function x(e){var t="";for(let n=0;n<e.length;n++)t+="<th>"+e[n]+"</th>";return v(t)}function y(e,t=!1){let n="<td";return t&&(n+=' contenteditable="true"'),n+=">"+e+"</td>"}function v(e){return"<tr>"+e+"</tr>\n"}function w(e,t,n,s){let i=document.createElement("div");n&&(i.id=n),s&&(i.className=s);let a=document.createElement("button");return a.className="collapsible",t?a.innerText=t:a.innerText="Show/Hide Details",i.appendChild(a),i.appendChild(e),M(),i}function b(e,t,n,s,i){let a=document.createElement("input");a.type=e,a.id=t,a.onchange=n,a.value=s;let o=document.createElement("label");o.htmlFor=t,i?o.textContent=i+": ":o.textContent="";let r=document.createElement("div");return r.appendChild(o),r.appendChild(a),r}function T(e,t){let n="<"+t;if(e)for(let[t,s]of e)n+=" "+t+'="'+s+'"';return n+" />"}function M(){for(var e=document.getElementsByClassName("collapsible"),t=0;t<e.length;t++)e[t].removeEventListener("click",S),e[t].addEventListener("click",S)}function S(){this.classList.toggle("active");var e=this.nextElementSibling;"block"===e.style.display?e.style.display="none":e.style.display="block"}function P(e,t){void 0==t&&(t=4),e.style.width=e.value.length+t+"ch"}function B(e,t){let n=e.getElementsByTagName(t)[0];if(null==n)throw Error(t+" element not found");return n}function R(e){let t=e.childNodes;if(null==t)throw Error("Element has no childNodes");return t[0]}function z(e){let t=e.nodeValue;if(null==t)throw Error("nodeValue is null");return t}class L{constructor(e){this.tagName=e}toXML(e){let t=T(void 0,this.tagName);return e?"\n"+e+t:t}}class C extends L{constructor(e,t){super(t),this.attributes=e}toString(){let e=this.tagName+"(";return this.attributes&&this.attributes.forEach((t,n)=>{e+=`${n}(${t}), `}),e}toXML(e){let t="";if(void 0!=e&&(t+="\n"+e),t+="<"+this.tagName,this.attributes)for(let[e,n]of this.attributes)t+=" "+e+'="'+n.toString()+'"';return t+" />"}}class A extends C{constructor(e,t,n){super(e,t),this.value=n}toString(){return super.toString()+`, ${this.value.toString()})`}toXML(e){return F(this.value.trim(),this.tagName,this.attributes,e,!1)}}class I extends C{constructor(e,t,n){super(e,t),this.value=n}toString(){return super.toString()+`, ${this.value.toString()})`}toXML(e){return F(this.value.toString().trim(),this.tagName,this.attributes,e,!1)}}class D extends C{constructor(e,t,n,s){super(e,t),this.delimiter=",",this.values=n,s&&(this.delimiter=s)}toString(){return super.toString()+`, ${this.values.toString()})`}setDelimiter(e){this.delimiter=e}toXML(e){return F(this.values.toString().replaceAll(",",this.delimiter),this.tagName,this.attributes,e,!1)}}class _ extends C{constructor(e,t){super(e,t),this.nodes=new Map}addNode(e){return this.nodes.set(this.nodes.size,e),this.nodes.size-1}toString(){let e=super.toString();return this.nodes.forEach((t,n)=>{e+=`, ${t.toString()}`}),e+")"}toXML(e,t){let n;void 0!=e&&void 0!=t&&(n=t+e);let s="";if(this.nodes.size>0)return this.nodes.forEach(t=>{t instanceof _?s+=t.toXML(e,n):s+=t.toXML(n)}),F(s,this.tagName,this.attributes,t,!0);{let e=T(this.attributes,this.tagName);return void 0!=t?"\n"+t+e:e}}}function O(e,t,n){let s="";return n&&void 0!=t&&(s+="\n"+t),s+"</"+e+">"}function F(e,t,n,s,i){return function(e,t,n){let s="";if(void 0!=n&&(s+="\n"+n),s+="<"+e,t)for(let[e,n]of t)s+=" "+e+'="'+n.toString()+'"';return s+">"}(t,n,s)+e+O(t,s,i)}function H(e){let t=e.getAttributeNames(),n=new Map;return t.forEach(function(t){let s=e.getAttribute(t);null!=s&&n.set(t,s)}),n}function G(e,t){let n=e.getElementsByTagName(t);if(1!=n.length)throw Error("Expecting 1 "+t+" but finding "+n.length);return n[0]}class k extends C{static{this.tagName="atom"}constructor(e){super(e,k.tagName),void 0==e.get("id")&&console.warn(k.tagName+" id attribute is undefined"),void 0==e.get("elementType")&&console.warn(k.tagName+" elementType attribute is undefined")}get id(){if(this.attributes)return this.attributes.get("id")}get elementType(){if(this.attributes)return this.attributes.get("elementType")}}class X extends _{static{this.tagName="atomArray"}constructor(e,t){super(e,X.tagName),t.forEach(e=>{this.nodes.set(this.nodes.size,e)})}}class $ extends C{static{this.tagName="bond"}constructor(e){super(e,$.tagName)}}class j extends _{static{this.tagName="bondArray"}constructor(e,t){super(e,j.tagName),t.forEach(e=>{this.nodes.set(this.nodes.size,e)})}}class U extends I{static{this.tagName="scalar"}constructor(e,t){super(e,U.tagName,t)}}class V extends D{static{this.tagName="array"}constructor(e,t,n){super(e,V.tagName,t,n)}}class W extends _{static{this.tagName="property"}constructor(e,t){super(e,W.tagName),this.nodes.set(0,t)}getProperty(){return this.nodes.get(0)}}class q extends _{static{this.tagName="propertyList"}constructor(e,t){super(e,q.tagName),this.properties=t,t.forEach(e=>{this.nodes.set(this.nodes.size,e)})}}class K extends I{static{this.tagName="me:deltaEDown"}constructor(e,t){super(e,K.tagName,t)}}class Z extends _{static{this.tagName="me:energyTransferModel"}constructor(e,t){super(e,Z.tagName),t.forEach(e=>{this.nodes.set(this.nodes.size,e)})}getDeltaEDown(e){if(e<0||e>=this.nodes.size)throw Error("index out of range");return this.nodes.get(e)}setDeltaEDown(e,t){this.nodes.set(this.nodes.size,t)}addDeltaEDown(e){return this.nodes.set(this.nodes.size,e),this.nodes.size-1}}class J extends C{static{this.tagName="me:DOSCMethod"}constructor(e){super(e,J.tagName)}}class Q extends A{static{this.tagName="me:bondRef"}constructor(e,t){super(e,Q.tagName,t)}}class Y extends C{static{this.tagName="me:PotentialPoint"}constructor(e){super(e,Y.tagName)}}class ee extends _{static{this.tagName="me:HinderedRotorPotential"}constructor(e,t){super(e,ee.tagName),t.forEach(e=>{this.nodes.set(this.nodes.size,e)})}getPotentialPoint(e){return this.nodes.get(e)}setPotentialPoints(e,t){this.nodes.set(this.nodes.size,t)}addPotentialPoint(e){return this.nodes.set(this.nodes.size,e),this.nodes.size-1}}class et extends I{static{this.tagName="me:periodicity"}constructor(e,t){super(e,et.tagName,t)}}class en extends _{static{this.tagName="me:ExtraDOSCMethod"}constructor(e,t,n,s){super(e,en.tagName),t&&this.nodes.set(this.nodes.size,t),n&&this.nodes.set(this.nodes.size,n),s&&this.nodes.set(this.nodes.size,s)}getBondRef(){return this.nodes.get(0)}setBondRef(e){this.nodes.set(0,e)}getHinderedRotorPotential(){return this.nodes.get(1)}setHinderedRotorPotential(e){this.nodes.set(1,e)}getPeriodicity(){return this.nodes.get(2)}setPeriodicity(e){this.nodes.set(2,e)}}class es extends I{static{this.tagName="me:reservoirSize"}constructor(e,t){super(e,es.tagName,t)}}class ei extends _{static{this.tagName="molecule"}static{this.energyDictRef="me:ZPE"}static{this.rotConstsDictRef="me:rotConsts"}static{this.vibFreqsDictRef="me:vibFreqs"}constructor(e,t,n,s,i,a,o,r){super(e,ei.tagName),this.index=new Map;let l=e.get("id");if(void 0==l)throw Error("id is undefined");this.id=l;let g=0;if(t&&(this.nodes.set(g,t),t instanceof k?this.index.set(k.tagName,g):this.index.set(X.tagName,g),g++),n&&(this.nodes.set(g,n),this.index.set(j.tagName,g),g++),void 0==s)throw Error("properties is undefined");this.nodes.set(g,s),this.index.set(q.tagName,g),g++,i&&(this.nodes.set(g,i),this.index.set(Z.tagName,g),g++),a&&(this.nodes.set(g,a),this.index.set(J.tagName,g)),o&&(this.nodes.set(g,o),this.index.set(en.tagName,g)),r&&(this.nodes.set(g,r),this.index.set(es.tagName,g))}getDescription(){if(void 0!=this.attributes)return this.attributes.get("description")}getActive(){if(void 0!=this.attributes){let e=this.attributes.get("active");return void 0!=e||e}}getLabel(){let e=this.id,t=this.getDescription();return t&&(e+=" ("+t+")"),this.getActive()&&(e+=" (active)"),e}getAttributesAsString(){return void 0==this.attributes?"":Array.from(this.attributes,([e,t])=>`${e}: ${t}`).join(", ")}getProperties(){let e=this.index.get(q.tagName);if(void 0!=e||void 0!=(e=this.index.get(W.tagName)))return this.nodes.get(e)}getPropertyScalar(e){let t=this.getProperties();if(void 0!=t){if(t instanceof q){let n=t.properties.get(e);if(void 0==n)return;return n.getProperty().value}{let e=t.getProperty();if(void 0==e)return;return e.value}}}getEnergy(){let e=this.getPropertyScalar(ei.energyDictRef);return void 0==e?0:e}setPropertyScalar(e,t,n){let s=this.getProperties();if(void 0==s)this.nodes.set(this.nodes.size,this.createPropertyScalar(e,t,n)),this.index.set(W.tagName,this.nodes.size);else if(s instanceof W){if(s?.getProperty()?.attributes?.get(e))s.getProperty().value=t;else{let i=new Map;i.set(e,s),i.set(e,this.createPropertyScalar(e,t,n)),s=new q(new Map,i)}}else{let i=s.properties.get(e);void 0==i?s.properties.set(e,this.createPropertyScalar(e,t,n)):i.getProperty().value=t}}createPropertyScalar(e,t,n){let s=new Map;s.set("dictRef",e);let i=new Map;return n&&i.set("units",n),new W(s,new U(i,t))}setPropertyArray(e,t,n){let s=this.getProperties();if(void 0==s)this.nodes.set(this.nodes.size,this.createPropertyArray(e,t,n)),this.index.set(W.tagName,this.nodes.size);else if(s instanceof W){if(s?.getProperty()?.attributes?.get(e))s.getProperty().values=t;else{let i=new Map;i.set(e,s),i.set(e,this.createPropertyArray(e,t,n)),s=new q(new Map,i)}}else{let i=s.properties.get(e);void 0==i?s.properties.set(e,this.createPropertyArray(e,t,n)):i.getProperty().values=t}}createPropertyArray(e,t,n){let s=new Map;s.set("dictRef",e);let i=new Map;return n&&i.set("units",n),new W(s,new V(i,t))}getPropertyArray(e){let t=this.getProperties();if(void 0!=t){if(t instanceof q){let n=t.properties.get(e);if(void 0==n)return;return n.getProperty().values}if(t.getProperty().tagName==e){let e=t.getProperty();if(void 0==e)return;return e.values}}}getAtoms(){let e=this.index.get(k.tagName);if(void 0!=e||void 0!=(e=this.index.get(X.tagName)))return this.nodes.get(e)}getBonds(){let e=this.index.get(j.tagName);if(void 0!=e)return this.nodes.get(e)}getEnergyTransferModel(){let e=this.index.get(Z.tagName);if(void 0!=e)return this.nodes.get(e)}setEnergyTransferModel(e){let t=this.index.get(Z.tagName);void 0==t?(this.index.set(Z.tagName,this.nodes.size),this.addNode(e)):this.nodes.set(t,e)}getDOSCMethod(){let e=this.index.get(J.tagName);if(void 0!=e)return this.nodes.get(e)}setDOSCMethod(e){let t=this.index.get(J.tagName);void 0==t?(this.index.set(J.tagName,this.nodes.size),this.addNode(e)):this.nodes.set(t,e)}getExtraDOSCMethod(){let e=this.index.get(en.tagName);if(void 0!=e)return this.nodes.get(e)}setExtraDOSCMethod(e){let t=this.index.get(en.tagName);void 0==t?(this.index.set(en.tagName,this.nodes.size),this.addNode(e)):this.nodes.set(t,e)}getReservoirSize(){let e=this.index.get(es.tagName);if(void 0!=e)return this.nodes.get(e)}setReservoirSize(e){let t=this.index.get(es.tagName);void 0==t?(this.index.set(es.tagName,this.nodes.size),this.addNode(e)):this.nodes.set(t,e)}setNode(e,t){let n=this.index.get(e);void 0==n?(this.index.set(e,this.nodes.size),this.addNode(t)):this.nodes.set(n,t)}}class ea extends _{constructor(e,t,n,s){super(e,t),this.nodes.set(0,n),this.molecules=s}getMoleculeAbb(){return this.nodes.get(0)}getRef(){let e=this.getMoleculeAbb().attributes?.get("ref");if(null==e)throw console.log(this.getMoleculeAbb().toString()),Error('Attribute "ref" is undefined.');return e}getMolecule(){let e=this.getRef(),t=this.molecules.get(e);if(null==t)throw Error(`Molecule with ref ${e} not found in molecules`);return t}}class eo extends ea{static{this.tagName="reactant"}constructor(e,t,n){super(e,eo.tagName,t,n)}}class er extends ea{static{this.tagName="product"}constructor(e,t,n){super(e,er.tagName,t,n)}}class el extends ea{static{this.tagName="me:transitionState"}constructor(e,t,n){super(e,el.tagName,t,n)}}class eg extends I{static{this.tagName="me:preExponential"}constructor(e,t){super(e,eg.tagName,t)}}class ed extends I{static{this.tagName="me:activationEnergy"}constructor(e,t){super(e,ed.tagName,t)}}class eh extends I{static{this.tagName="me:TInfinity"}constructor(e,t){super(e,eh.tagName,t)}}class ec extends I{static{this.tagName="me:nInfinity"}constructor(e,t){super(e,ec.tagName,t)}}class em extends C{static{this.tagName="me:tunneling"}constructor(e){super(e,em.tagName)}}class eu extends _{static{this.tagName="me:MCRCMethod"}constructor(e){super(e,eu.tagName)}}class ef extends eu{static{this.xsiType="me:MesmerILT"}static{this.xsiType2="MesmerILT"}constructor(e,t,n,s,i){super(e),this.index=new Map,void 0!=t&&(this.index.set(eg.tagName,this.index.size),this.addNode(t)),void 0!=n&&(this.index.set(ed.tagName,this.index.size),this.addNode(n)),void 0!=s&&(this.index.set(eh.tagName,this.index.size),this.addNode(s)),void 0!=i&&(this.index.set(ec.tagName,this.index.size),this.addNode(i))}getPreExponential(){let e=this.index.get(eg.tagName);if(void 0!=e)return this.nodes.get(e)}getActivationEnergy(){let e=this.index.get(ed.tagName);if(void 0!=e)return this.nodes.get(e)}getTInfinity(){let e=this.index.get(eh.tagName);if(void 0!=e)return this.nodes.get(e)}getNInfinity(){let e=this.index.get(ec.tagName);if(void 0!=e)return this.nodes.get(e)}}class eN extends I{static{this.tagName="me:excessReactantConc"}constructor(e,t){super(e,eN.tagName,t)}}class ep extends _{static{this.tagName="reaction"}constructor(e,t,n,s,i,a,o,r){super(e,ep.tagName),this.index=new Map,this.id=t,this.reactants=n,n instanceof Map?n.forEach(e=>{this.addToIndex(eo.tagName,e),this.addNode(e)}):void 0!=n&&(this.index.set(eo.tagName,this.nodes.size),this.addNode(n)),this.products=s,s instanceof Map?s.forEach(e=>{this.addToIndex(er.tagName,e),this.addNode(e)}):void 0!=s&&(this.index.set(er.tagName,this.nodes.size),this.addNode(s)),i&&(this.index.set(em.tagName,this.nodes.size),this.addNode(i)),this.transitionStates=a,a instanceof Map?a.forEach(e=>{this.addToIndex(el.tagName,e),this.addNode(e)}):void 0!=a&&(this.index.set(el.tagName,this.nodes.size),this.addNode(a)),void 0!=o&&(this.index.set(eu.tagName,this.nodes.size),this.addNode(o)),r&&(this.index.set(eN.tagName,this.nodes.size),this.addNode(r))}addToIndex(e,t){let n=this.index.get(e);if(void 0==n)this.index.set(e,this.nodes.size);else if(n instanceof Map)n.set(t.tagName,this.nodes.size);else{let s=new Map;s.set(this.nodes.get(n).getRef(),n),s.set(t.tagName,this.nodes.size),this.index.set(e,s)}}getMCRCMethod(){let e=this.index.get(eu.tagName);if(void 0!=e)return this.nodes.get(e)}setMCRCMethod(e){let t=this.index.get(eu.tagName);if(void 0==t)this.index.set(eu.tagName,this.nodes.size),this.addNode(e);else{if(t instanceof Map)throw Error("MCRCMethod is a map and it is assumed there would be only 1!");this.nodes.set(t,e)}}getTunneling(){let e=this.index.get(em.tagName);if(void 0!=e)return this.nodes.get(e)}setTunneling(e){let t=this.index.get(em.tagName);if(void 0==t)this.index.set(em.tagName,this.nodes.size),this.addNode(e);else{if(t instanceof Map)throw Error("Tunneling is a map and it is assumed there would be only 1!");this.nodes.set(t,e)}}getExcessReactantConc(){let e=this.index.get(eN.tagName);if(void 0!=e)return this.nodes.get(e)}setExcessReactantConc(e){let t=this.index.get(eN.tagName);if(void 0==t)this.index.set(eN.tagName,this.nodes.size),this.addNode(new eN(void 0,e));else{if(t instanceof Map)throw Error("ExcessReactantConc is a map and it is assumed there would be only 1!");this.nodes.set(t,new eN(void 0,e))}}getReactantsLabel(){return void 0==this.reactants?void 0:this.reactants instanceof Map?Array.from(this.reactants.keys()).join(" + "):this.reactants.getRef()}getReactantsEnergy(){return this.reactants instanceof Map?Array.from(this.reactants.values()).map(e=>e.getMolecule().getEnergy()).reduce((e,t)=>e+t,0):0}getProductsLabel(){return void 0==this.products?void 0:this.products instanceof Map?Array.from(this.products.keys()).join(" + "):this.products.getRef()}getProductsEnergy(){return this.products instanceof Map?Array.from(this.products.values()).map(e=>e.getMolecule().getEnergy()).reduce((e,t)=>e+t,0):0}getLabel(){return this.getReactantsLabel()+" -> "+this.getProductsLabel()}set(e,t,n){let s=this.index.get(e);if(void 0==s)throw Error("index not found");if(s instanceof Map){let e=s.get(t);if(void 0==e)throw Error("dictRef not found");{let t=this.nodes.get(e);if(t instanceof C)eE(t,n);else throw Error("Unexpected node type.")}}else{let e=this.nodes.get(s);if(e instanceof C)eE(e,n);else throw Error("Unexpected node type.")}throw Error("Method not implemented.")}}function eE(e,t){if(e instanceof I){if("number"==typeof t)e.value=t;else throw Error("value is not a number")}else if(e instanceof D){if(Array.isArray(t)&&t.every(e=>"number"==typeof e))e.values=t;else throw Error("value is not a number[]")}else if("string"==typeof t)e.value=t;else throw Error("value is not a string")}function ex(e,t,n,s,i,a,o,r,l,g,d){let h=s+(a-s)/2;ev(e,d,r,t,h-ew(e,d,r)/2,o+l),ev(e,g,r,t,h-ew(e,g,r)/2,o+3*l),ey(e,t,n,s,i,a,o)}function ey(e,t,n,s,i,a,o){e.beginPath(),e.strokeStyle=t,e.lineWidth=n,e.moveTo(s,i),e.lineTo(a,o),e.stroke()}function ev(e,t,n,s,i,a){e.save(),e.translate(i,a),e.scale(1,-1),e.font=n,e.fillStyle=s,e.fillText(t,0,0),e.restore()}function ew(e,t,n){return e.font=n,e.measureText(t).width}class eb extends A{static{this.tagName="me:bathGas"}constructor(e,t,n){super(e,eb.tagName,t),this.molecules=n}getMolecule(){return this.molecules.get(this.value)}}class eT extends I{static{this.tagName="me:experimentRate"}constructor(e,t){super(e,eT.tagName,t)}}class eM extends _{static{this.tagName="me:PTpair"}constructor(e,t,n){super(e,eM.tagName),this.index=new Map,t&&(this.index.set(eb.tagName,this.nodes.size),this.addNode(t)),n&&(this.index.set(eT.tagName,this.nodes.size),this.addNode(n))}getP(){if(void 0!=this.attributes){let e=this.attributes.get("P");if(e)return parseFloat(e);throw Error("P is undefined")}return NaN}setP(e){void 0!=this.attributes&&this.attributes.set("P",e.toString())}getT(){if(void 0!=this.attributes){let e=this.attributes.get("T");if(e)return parseFloat(e);throw Error("T is undefined")}return NaN}setT(e){void 0!=this.attributes&&this.attributes.set("T",e.toString())}getBathGas(){let e=this.index.get(eb.tagName);return e?this.nodes.get(e):void 0}setBathGas(e){let t=this.index.get(eb.tagName);t?this.nodes.set(t,e):(this.index.set(eb.tagName,this.nodes.size),this.addNode(e))}getExperimentRate(){let e=this.index.get(eT.tagName);return e?this.nodes.get(e):void 0}setExperimentRate(e){let t=this.index.get(eT.tagName);t?this.nodes.set(t,e):(this.index.set(eT.tagName,this.nodes.size),this.addNode(e))}}class eS extends _{static{this.tagName="me:PTs"}constructor(e,t){super(e,eS.tagName),t.forEach(e=>{this.addNode(e)})}getPTpair(e){return this.nodes.get(e)}setPTpair(e,t){this.nodes.set(e,t)}addPTpair(e){return this.addNode(e)}}class eP extends _{static{this.tagName="me:conditions"}constructor(e,t,n){super(e,eP.tagName),this.addNode(t),this.addNode(n)}getBathGas(){return this.nodes.get(0)}getPTs(){return this.nodes.get(1)}}class eB extends I{static{this.tagName="me:grainSize"}constructor(e,t){super(e,eB.tagName,t)}toString(){return`GrainSize(${super.toString()})`}}class eR extends I{static{this.tagName="me:energyAboveTheTopHill"}constructor(e,t){super(e,eR.tagName,t)}}class ez extends _{static{this.tagName="me:modelParameters"}constructor(e,t){super(new Map,ez.tagName),this.addNode(e),this.addNode(t)}getGrainSize(){return this.nodes.get(0)}getEnergyAboveTheTopHill(){return this.nodes.get(1)}}class eL extends L{static{this.tagName="me:testDOS"}constructor(){super(eL.tagName)}}class eC extends L{static{this.tagName="me:printSpeciesProfile"}constructor(){super(eC.tagName)}}class eA extends L{static{this.tagName="me:testMicroRates"}constructor(){super(eA.tagName)}}class eI extends L{static{this.tagName="me:testRateConstant"}constructor(){super(eI.tagName)}}class eD extends L{static{this.tagName="me:printGrainDOS"}constructor(){super(eD.tagName)}}class e_ extends L{static{this.tagName="me:printCellDOS"}constructor(){super(e_.tagName)}}class eO extends L{static{this.tagName="me:printReactionOperatorColumnSums"}constructor(){super(eO.tagName)}}class eF extends L{static{this.tagName="me:printTunnellingCoefficients"}constructor(){super(eF.tagName)}}class eH extends L{static{this.tagName="me:printGrainkfE"}constructor(){super(eH.tagName)}}class eG extends L{static{this.tagName="me:printGrainBoltzmann"}constructor(){super(eG.tagName)}}class ek extends L{static{this.tagName="me:printGrainkbE"}constructor(){super(ek.tagName)}}class eX extends I{static{this.tagName="me:eigenvalues"}constructor(e,t){super(e,eX.tagName,t)}}class e$ extends L{static{this.tagName="me:hideInactive"}constructor(){super(e$.tagName)}}class ej extends I{static{this.tagName="me:diagramEnergyOffset"}constructor(e,t){super(e,ej.tagName,t)}}class eU extends _{static{this.tagName="me:control"}constructor(e,t,n,s,i,a,o,r,l,g,d,h,c,m,u){super(e,eU.tagName),this.index=new Map,void 0!=t&&(this.addNode(t),this.index.set(eL.tagName,this.index.size)),void 0!=n&&(this.addNode(n),this.index.set(eC.tagName,this.index.size)),void 0!=s&&(this.addNode(s),this.index.set(eA.tagName,this.index.size)),void 0!=i&&(this.addNode(i),this.index.set(eI.tagName,this.index.size)),void 0!=a&&(this.addNode(a),this.index.set(eD.tagName,this.index.size)),void 0!=o&&(this.addNode(o),this.index.set(e_.tagName,this.index.size)),void 0!=r&&(this.addNode(r),this.index.set(eO.tagName,this.index.size)),void 0!=l&&(this.addNode(l),this.index.set(eF.tagName,this.index.size)),void 0!=g&&(this.addNode(g),this.index.set(eH.tagName,this.index.size)),void 0!=d&&(this.addNode(d),this.index.set(eG.tagName,this.index.size)),void 0!=h&&(this.addNode(h),this.index.set(ek.tagName,this.index.size)),void 0!=c&&(this.addNode(c),this.index.set(eX.tagName,this.index.size)),void 0!=m&&(this.addNode(m),this.index.set(e$.tagName,this.index.size)),void 0!=u&&(this.addNode(u),this.index.set(ej.tagName,this.index.size))}getTestDOS(){let e=this.index.get(eL.tagName)??-1;if(-1!==e)return this.nodes.get(e)}getPrintSpeciesProfile(){let e=this.index.get(eC.tagName)??-1;if(-1!==e)return this.nodes.get(e)}getTestMicroRates(){let e=this.index.get(eA.tagName)??-1;if(-1!==e)return this.nodes.get(e)}getTestRateConstant(){let e=this.index.get(eI.tagName)??-1;if(-1!==e)return this.nodes.get(e)}getPrintGrainDOS(){let e=this.index.get(eD.tagName)??-1;if(-1!==e)return this.nodes.get(e)}getPrintCellDOS(){let e=this.index.get(e_.tagName)??-1;if(-1!==e)return this.nodes.get(e)}getPrintReactionOperatorColumnSums(){let e=this.index.get(eO.tagName)??-1;if(-1!==e)return this.nodes.get(e)}getPrintTunnellingCoefficients(){let e=this.index.get(eF.tagName)??-1;if(-1!==e)return this.nodes.get(e)}getPrintGrainkfE(){let e=this.index.get(eH.tagName)??-1;if(-1!==e)return this.nodes.get(e)}getPrintGrainBoltzmann(){let e=this.index.get(eG.tagName)??-1;if(-1!==e)return this.nodes.get(e)}getPrintGrainkbE(){let e=this.index.get(ek.tagName)??-1;if(-1!==e)return this.nodes.get(e)}getEigenvalues(){let e=this.index.get(eX.tagName)??-1;if(-1!==e)return this.nodes.get(e)}getHideInactive(){let e=this.index.get(e$.tagName)??-1;if(-1!==e)return this.nodes.get(e)}getDiagramEnergyOffset(){let e=this.index.get(ej.tagName)??-1;if(-1!==e)return this.nodes.get(e)}}let eV="me:title",eW=new Map,eq=new Map;const eK=`<?xml version="1.0" encoding="utf-8" ?>
<?xml-stylesheet type='text/xsl' href='../../mesmer2.xsl' media='other'?>
<?xml-stylesheet type='text/xsl' href='../../mesmer1.xsl' media='screen'?>`;function eZ(e){let t=H(e),n=e.children;if(1!=n.length)throw Error("Expecting 1 child but finding "+n.length);let s=H(n[0]),i=n[0].nodeName,a=n[0].textContent;if(null==a)throw console.error("nodeName"),Error("textContent is null");if(a=a.trim(),null==t.get("dictRef"))throw Error("dictRef is null");if(i==U.tagName)return new W(t,new U(s,parseFloat(a)));if(i==V.tagName)return new W(t,new V(s,function(e){let t=[];for(let n=0;n<e.length;n++)t.push(parseFloat(e[n]));return t}(a.split(/\s+/))," "));throw Error("Unexpected nodeName: "+i)}function eJ(e,t){let n=t.attributes,s=e;if(void 0!=n){var i;s+=" "+(i=" ",null==n?"":(void 0==i&&(i=", "),Array.from(n.entries()).map(([e,t])=>`${null==e?"null":e.toString()}(${null==t?"null":t.toString()})`).join(i)))}return s}function eQ(e,t,n,s,i){let a=eJ(n,s),o=b("number",e+"_"+n,e=>{e.target instanceof HTMLInputElement&&e3(n,e.target)},s.value.toString(),a);t.appendChild(o);let r=e+"_"+n,l=s.attributes?.get("units"),g=document.getElementById(r);g&&(P(g),g.addEventListener("change",t=>{let s=t.target.value;i.setPropertyScalar(n,parseFloat(s)),void 0!=l?console.log("Set "+n+" of "+e+" to "+s+" "+l):console.log("Set "+n+" of "+e+" to "+s),P(g),n===ei.energyDictRef?(console.log("update display diagram"),e7()):console.log("key0 "+n+" does not match "+ei.energyDictRef)}))}function eY(e,t,n,s,i){let a=eJ(n,s),o=b("text",e+"_"+n,e=>{e.target instanceof HTMLInputElement&&e9(n,e.target)},p(s.values," "),a);t.appendChild(o);let r=e+"_"+n,l=document.getElementById(r);l&&(P(l),l.addEventListener("change",t=>{let s=t.target.value,a=s.split(/\s+/),o=[];a.forEach(function(e){o.push(parseFloat(e))}),i.setPropertyArray(n,o),console.log("Set "+n+" of "+e+" to "+s),P(l)}))}function e0(e,t,n){let s=document.getElementById(t);s&&(P(s),s.addEventListener("change",t=>{let i=t.target.value;if(n instanceof _&&n instanceof q){let t=eW.get(e);n.properties.forEach(function(n,s){let i=n.getProperty();if(i instanceof U){let n=i.attributes?.get("units"),a=document.getElementById(e+"_"+s);a&&(P(a),a.addEventListener("change",i=>{let o=i.target.value;t.setPropertyScalar(s,parseFloat(o)),void 0!=n?console.log("Set "+s+" of "+e+" to "+o+" "+n):console.log("Set "+s+" of "+e+" to "+o),P(a),s===ei.energyDictRef?(console.log("update display diagram"),e7()):console.log("key0 "+s+" does not match "+ei.energyDictRef)}))}else{let n=document.getElementById(e+"_"+s);n&&(P(n),n.addEventListener("change",i=>{let a=i.target.value,o=a.split(/\s+/),r=[];o.forEach(function(e){r.push(parseFloat(e))}),t.setPropertyArray(s,r),console.log("Set "+s+" of "+e+" to "+a),P(n)}))}})}console.log("Set "+n.tagName+" of "+e+" to "+i),P(s)}))}function e1(e,t,n){console.log("Tag");let s=n.tagName,i=b("text",e+"_"+n.tagName,e=>{e.target instanceof HTMLInputElement&&e9(n.tagName,e.target)},"true",s);t.appendChild(i);let a=e+"_"+n.tagName;e0(e,a,n)}function e2(e,t,n,s){console.log("TagWithAttributes");let i=s.tagName,a=n+" "+eJ(i,s),o=b("text",e+"_"+i,e=>{e.target instanceof HTMLInputElement&&e9(i,e.target)},"true",a);t.appendChild(o),e0(e,e+"_"+a.replaceAll(" ","_"),s)}function e4(e,t,n,s){console.log("StringNode");let i=s.tagName,a=s.value,o=n+" "+eJ(i,s),r=b("number",e+"_"+i,e=>{e.target instanceof HTMLInputElement&&e3(i,e.target)},a.toString(),o);t.appendChild(r),e0(e,o.replaceAll(" ","_"),s)}function e8(e,t,n,s){console.log("NumberArrayNode");let i=s.tagName,a=s.values,o=n+" "+eJ(i,s),r=b("text",e+"_"+i,e=>{e.target instanceof HTMLInputElement&&e9(i,e.target)},p(a," "),o);t.appendChild(r),e0(e,o.replaceAll(" ","_"),s)}function e5(e,t,n,s){console.log("NumberNode");let i=s.tagName,a=s.value,o=n+" "+eJ(i,s),r=b("text",e+"_"+i,e=>{e.target instanceof HTMLInputElement&&e9(i,e.target)},a.toString(),o);t.appendChild(r),e0(e,o.replaceAll(" ","_"),s)}function e6(e,t,n){if(n instanceof _){let s=n.attributes?.get("dictRef")??"";n.nodes.forEach(function(n){n instanceof _?e6(e,t,n):n instanceof A?e4(e,t,s,n):n instanceof D?e8(e,t,s,n):n instanceof I?e5(e,t,s,n):n instanceof C?e2(e,t,s,n):e1(e,t,n)})}else n instanceof A?e4(e,t,n.attributes?.get("dictRef")??"",n):n instanceof D?e8(e,t,n.attributes?.get("dictRef")??"",n):n instanceof I?e5(e,t,n.attributes?.get("dictRef")??"",n):n instanceof C?e2(e,t,n.attributes?.get("dictRef")??"",n):e1(e,t,n)}function e7(){if(eq.size>1){let e=document.getElementById("reactions_diagram");null!=e&&(e.style.display="block",function(e,t,n,s,i){var a;let o,r,l,g;console.log("drawReactionDiagram");let d="black",h=e.getContext("2d"),c=(h.font=n,(a=h.measureText("Aj")).actualBoundingBoxAscent+a.actualBoundingBoxDescent),m=new Set,u=new Set,f=new Set,p=new Set,E=new Map,x=new Map,y=0,v=Number.MAX_VALUE,w=Number.MIN_VALUE;eq.forEach(function(e,t){let n=e.transitionStates,s=e.getReactantsLabel();if(void 0!=s){m.add(s),u.has(s)&&f.add(s);let t=e.getReactantsEnergy();v=Math.min(v,t),w=Math.max(w,t),x.set(s,t),!E.has(s)&&(E.set(s,y),y++)}let i=e.getProductsLabel();if(void 0!=i){u.add(i);let t=e.getProductsEnergy();if(v=Math.min(v,t),w=Math.max(w,t),x.set(i,t),E.has(i)){y--;let e=N(E,i);if(E.forEach(function(t,n){t>e&&E.set(n,t-1)}),void 0!=n){if(n instanceof Map)n.forEach(function(e,n){let s=e.getRef();p.add(s),E.set(s,y),t=e.getMolecule().getEnergy(),v=Math.min(v,t),w=Math.max(w,t),x.set(s,t),y++});else{let e=n.getRef();p.add(e),E.set(e,y),t=n.getMolecule().getEnergy(),v=Math.min(v,t),w=Math.max(w,t),x.set(e,t),y++}E.set(i,y),y++}}else{if(void 0!=n){if(n instanceof Map)n.forEach(function(e,n){let s=e.getRef();p.add(s),E.set(s,y),t=e.getMolecule().getEnergy(),v=Math.min(v,t),w=Math.max(w,t),x.set(s,t),y++});else{let e=n.getRef();p.add(e),E.set(e,y),t=n.getMolecule().getEnergy(),v=Math.min(v,t),w=Math.max(w,t),x.set(e,t),y++}}E.set(i,y),y++}}});let b=w-v,T=[];E.forEach(function(e,t){T[e]=t});let M=0,S=0,P=new Map,B=new Map,R=new Map,z=new Map,L=new Map,C=new Map;T.forEach(function(t){let s=N(x,t),i=(s-v)*e.height/(b+0)+0;g=Math.max(ew(h,s.toString(),n),ew(h,t,n)),r=M+g+5,l=o=i+4,P.set(t,[M,o]),B.set(t,[r,l]),u.has(t)&&(R.set(t,[M,o]),z.set(t,[r,l])),p.has(t)&&(L.set(t,[M,o]),C.set(t,[r,l])),M=r+10,S=r}),e.width=S;let A=e.height+4*c+8,I=e.height;e.height=A,h.transform(1,0,0,-1,0,A),eq.forEach(function(e,t){let n=e.transitionStates,s=e.getReactantsLabel(),a=e.getProductsLabel(),o=N(B,s),r=N(R,a);if(void 0!=n){if(n instanceof Map)n.forEach(function(e,t){let n=e.getRef(),s=N(L,n);ey(h,d,2,o[0],o[1],s[0],s[1]);let i=N(C,n);ey(h,d,2,i[0],i[1],r[0],r[1])});else{let e=n.getRef(),t=N(L,e);ey(h,d,2,o[0],o[1],t[0],t[1]);let s=N(C,e);ey(h,d,i,s[0],s[1],r[0],r[1])}}else ey(h,d,i,o[0],o[1],r[0],r[1])}),m.forEach(function(e){let t=N(x,e),i=(t-v)*I/(b+0)+0,a=N(P,e)[0],o=i+4;ex(h,"blue",s,a,o,N(B,e)[0],o,n,c,e,t.toString())}),u.forEach(function(e){let t=N(x,e),i=(t-v)*I/(b+0)+0,a=N(R,e)[0],o=i+s,r=N(z,e)[0],l=t.toString();f.has(e)?ex(h,"orange",s,a,o,r,o,n,c,e,l):ex(h,"green",s,a,o,r,o,n,c,e,l)}),p.forEach(function(e){let t=N(x,e),i=(t-v)*I/(b+0)+0,a=N(L,e)[0],o=i+s;ex(h,"red",s,a,o,N(C,e)[0],o,n,c,e,t.toString())})}(e,0,"14px Arial",4,2))}}function e3(e,t){let n=t.id,s=n.split("_")[0],i=eW.get(s);if(i){if(E(t.value)){let n=parseFloat(t.value);i.setPropertyScalar(e,n),console.log(e+" of "+s+" set to "+n)}else{alert(e+" input for "+s+" is not numeric, resetting...");let t=document.getElementById(n),a=i.getPropertyScalar(e);void 0!=a&&(t.value=a.toString())}}}function e9(e,t){let n=t.id,s=n.split("_")[0],i=eW.get(s);if(i){let a=t.value,o=a.split(/\s+/),r=i.getPropertyArray(e);if(r){let t=r.length,l=!0;if(o.forEach(function(e){E(e)||(l=!1)}),!l){alert(e+" input for "+s+" is not a number, resetting..."),document.getElementById(n).value=p(r," ");return}if(o.length==t){let t=a.split(" ").map(Number);i.setPropertyArray(e,t),console.log(e+" input for "+s+" changed from: "+r+" to: "+t)}else alert("Expecting "+t+" "+e+" values for "+s+" but finding "+o.length+" resetting..."),document.getElementById(n).value=p(r," ")}}}document.addEventListener("DOMContentLoaded",N=>{h=document.getElementById("xml_title"),c=document.getElementById("xml_text"),window.loadXML=function(){!function N(){let p=document.createElement("input");p.type="file",p.onchange=function(){if(p.files){for(let e=0;e<p.files.length;e++)console.log("inputElement.files["+e+"]="+p.files[e]);let i=p.files[0];if(console.log(i.name),s=i.name,null!=c){let a=new FileReader,N=0,p="";a.onload=function(E){if(!E.target)throw Error("Event target is null");if(p+=E.target.result,null!=i){if(N<i.size){let e=i.slice(N,N+1048576);a.readAsText(e),N+=1048576}else{var b;b=p=p.trim(),null!=h&&(h.innerHTML=s),null!=c&&(c.innerHTML=b.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\n/g,"<br>").replace(/\t/g,"&nbsp;&nbsp;&nbsp;&nbsp;").replace(/  /g,"&nbsp;&nbsp;")),function(s){let i,a,h,c,N,p,E,b,T,S;t="\n";let L=s.documentElement;if(null==L)throw Error("Document element not found");{let e=L.tagName;t+="<"+e,console.log(e),n=O(e,"",!0);let s=!0,i=" ".repeat(e.length+2);L.getAttributeNames().forEach(function(e){let n=L.getAttribute(e),a=`${e}="${n}"`;s?(s=!1,t+=" "+a):t+="\n"+i+a}),t+=">"}(function(t){if(null==(o=t.getElementsByTagName(eV)))throw Error(eV+" not found");if(1!=o.length)throw Error("Multiple "+eV+" elements found");{console.log("Title="+(e=(e=o[0].childNodes[0].nodeValue).trim()));let t=document.getElementById("title");if(null!=t){let n=document.createElement("input");n.type="text",n.value=e,n.style.fontSize="2em",n.style.fontWeight="bold";let s=document.createTextNode("Title: ");t.parentNode?.insertBefore(s,t),P(n,0),t.parentNode?.replaceChild(n,t),console.log("inputElement.value="+n.value),n.addEventListener("change",function(){n.value!=e&&console.log("title="+(e=n.value)),P(n,0)})}}})(s),function(e){let t="moleculeList";console.log("Read and store "+t);let n=G(e,t);null!=(r=document.getElementById("molecules_title"))&&(r.innerHTML="Molecules");let s=new Set;if(n.childNodes.forEach(function(e){s.add(e.nodeName)}),1!=s.size&&!(2==s.size&&s.has("#text")))throw console.error("moleculeListTagNames:"),s.forEach(e=>console.error(e)),Error("Additional tag names in moleculeList:");if(!s.has(ei.tagName))throw Error('Expecting tags with "'+ei.tagName+'" tagName but there are none!');let i=n.getElementsByTagName(ei.tagName);console.log("Number of molecules="+i.length);for(let e=0;e<i.length;e++){let t,n,s,a,o,r,l,g,d=H(i[e]),h=new Set,c=i[e].childNodes;for(let e=0;e<c.length;e++){let t=c[e];h.has(t.nodeName)?"#text"!=t.nodeName&&console.warn("Another ChildNode with nodeName="+t.nodeName):h.add(t.nodeName)}let m=i[e].getElementsByTagName(X.tagName);if(m.length>1)throw Error("Expecting 1 or 0 "+X.tagName+" but finding "+m.length+"!");if(1==m.length){let e=m[0],t=e.getElementsByTagName(k.tagName);if(t.length<2)throw Error("Expecting 2 or more atoms in "+X.tagName+", but finding "+t.length+"!");let n=[];for(let e=0;e<t.length;e++)n.push(new k(H(t[e])));a=new X(H(e),n),h.delete(X.tagName)}else{let t=i[e].getElementsByTagName(k.tagName);if(1==t.length)a=new k(H(t[0]));else if(t.length>1)throw Error("Expecting 1 "+k.tagName+" but finding "+t.length+". Should these be in an "+X.tagName+"?")}h.delete(k.tagName);let u=i[e].getElementsByTagName(j.tagName);if(u.length>1)throw Error("Expecting 1 or 0 "+j.tagName+" but finding "+u.length+"!");if(1==u.length){let e=u[0],t=e.getElementsByTagName($.tagName),n=[];for(let e=0;e<t.length;e++)n.push(new $(H(t[e])));o=new j(H(e),n),h.delete(j.tagName)}else{let t=i[e].getElementsByTagName($.tagName);if(1==t.length)o=new $(H(t[0]));else if(t.length>1)throw Error("Expecting 1 "+$.tagName+" but finding "+t.length+". Should these be in a "+j.tagName+"?")}h.delete($.tagName);let f=i[e].getElementsByTagName(q.tagName);if(f.length>1)throw Error("Expecting 1 or 0 "+q.tagName+" but finding "+f.length+"!");if(1==f.length){let e=f[0],t=e.getElementsByTagName(W.tagName);if(t.length<2)throw Error("Expecting 2 or more "+W.tagName+" in "+q.tagName+", but finding "+t.length+"!");let n=new Map;for(let e=0;e<t.length;e++){let s=eZ(t[e]),i=s.attributes?.get("dictRef");n.set(i,s)}r=new q(H(e),n),h.delete(q.tagName)}else{let t=i[e].getElementsByTagName(W.tagName);if(t.length>1)throw Error("Expecting 1 "+W.tagName+" but finding "+t.length+". Should these be in a "+q.tagName+"?");r=eZ(t[0])}if(h.delete(W.tagName),h.delete(Z.tagName),null!=(l=i[e].getElementsByTagName(Z.tagName))&&l.length>0){if(1!=l.length)throw Error("energyTransferModel length="+l.length);let e=l[0].getElementsByTagName(K.tagName);if(null!=e){let n=[];for(let t=0;t<e.length;t++){let s=parseFloat(z(R(e[t]))),i=new K(H(e[t]),s);n.push(i)}t=new Z(H(l[0]),n)}}if(h.delete(J.tagName),null!=(l=i[e].getElementsByTagName(J.tagName))){let e=l[0];null!=e&&(n=new J(H(e)))}if(h.delete(en.tagName),(l=i[e].getElementsByTagName(en.tagName)).length>0){let e,t,n;if(1!=l.length)throw Error("Expecting only 1 extra DOSCMethod, but there are "+l.length);let i=l[0].getElementsByTagName(Q.tagName);if(i.length>0){if(1!=i.length)throw Error("Expecting only 1 bondRef, but there are "+i.length);e=new Q(H(i[0]),z(R(i[0])))}let a=l[0].getElementsByTagName(ee.tagName);if(a.length>0){if(1!=a.length)throw Error("Expecting only 1 HinderedRotorPotential, but there are "+a.length);let e=[],n=a[0].getElementsByTagName(Y.tagName);for(let t=0;t<n.length;t++)e.push(new Y(H(n[t])));t=new ee(H(a[0]),e)}let o=l[0].getElementsByTagName(et.tagName);if(o.length>0){if(1!=o.length)throw Error("Expecting only 1 Periodicity, but there are "+o.length);n=new et(H(o[0]),parseFloat(z(R(o[0]))))}s=new en(H(l[0]),e,t,n)}if(h.delete(es.tagName),(l=i[e].getElementsByTagName(es.tagName)).length>0){if(1!=l.length)throw Error("Expecting only 1 reservoirSize, but there are "+l.length);g=new es(H(l[0]),parseFloat(z(R(l[0]))))}h.delete("#text"),h.size>0&&(console.warn("There are additional unexpected moleculeTagNames:"),h.forEach(e=>console.warn(e)));let N=new ei(d,a,o,r,t,n,s,g);eW.set(N.id,N)}}(s),0!=eW.size&&(eW.forEach(function(e,t){let n=document.createElement("div"),s=e.getProperties();if(void 0!=s){if(s instanceof q)s.properties.forEach(function(s,i){let a=s.getProperty();a instanceof U?eQ(t,n,i,a,e):eY(t,n,i,a,e)});else{let i=s.getProperty(),a=s.attributes?.get("dictRef")??"";i instanceof U?eQ(t,n,a,i,e):eY(t,n,a,i,e)}}let i=e.getEnergyTransferModel();void 0!=i&&e6(t,n,i);let a=e.getDOSCMethod();void 0!=a&&e6(t,n,a);let o=e.getExtraDOSCMethod();void 0!=o&&e6(t,n,o);let r=e.getReservoirSize();void 0!=r&&e6(t,n,r),e.nodes.forEach(function(e){e instanceof _?e6(t,n,e):e instanceof A?e4(t,n,"",e):e instanceof D?e8(t,n,"",e):e instanceof I?e5(t,n,"",e):e instanceof C?e2(t,n,"",e):e1(t,n,e)});let l=w(n,e.getLabel(),t+"_details","molecule");if(null!==document.getElementById("moleculesList")){let e=document.getElementById("molecules");e&&e.appendChild(l)}}),M()),function(e){let t="reactionList";console.log(t);let n=G(e,t).getElementsByTagName(ep.tagName),s=n.length;if(console.log("Number of reactions="+s),0==s)throw Error("No reactions: There should be at least 1!");null!=(l=document.getElementById("reactions_title"))&&(l.innerHTML="Reactions");for(let e=0;e<s;e++){let t=H(n[e]),s=t.get("id");if(null==s)throw Error("reactionID is null");if(null!=s){let i,a,o,r,l,g;console.log("id="+s);let d=n[e].getElementsByTagName(eo.tagName);if(d.length>0){if(d.length<2){let e=new C(H(B(d[0],ei.tagName)),ei.tagName);i=new eo(H(d[0]),e,eW)}else{i=new Map;for(let e=0;e<d.length;e++){let t=new C(H(B(d[e],ei.tagName)),ei.tagName),n=new eo(H(d[e]),t,eW);i.set(n.getRef(),n)}}}let h=n[e].getElementsByTagName(er.tagName);if(h.length>0){if(h.length<2){let e=new C(H(B(h[0],ei.tagName)),ei.tagName);a=new er(H(h[0]),e,eW)}else{a=new Map;for(let e=0;e<h.length;e++){let t=new C(H(B(h[e],ei.tagName)),ei.tagName),n=new er(H(h[e]),t,eW);a.set(n.getRef(),n)}}}let c=n[e].getElementsByTagName(el.tagName);if(c.length>0){if(c.length<2){let e=new C(H(c[0].getElementsByTagName(ei.tagName)[0]),ei.tagName);o=new el(H(c[0]),e,eW)}else{o=new Map;for(let e=0;e<c.length;e++){let t=new C(H(c[e].getElementsByTagName(ei.tagName)[0]),ei.tagName),n=new el(H(c[e]),t,eW);o.set(n.getRef(),n)}}}let m=n[e].getElementsByTagName(em.tagName);if(m.length>0){if(m.length>1)throw Error("Expecting 1 "+em.tagName+" but finding "+m.length+"!");r=new em(H(m[0]))}let u=n[e].getElementsByTagName(eu.tagName);if(u.length>0){if(u.length>1)throw Error("Expecting 1 "+eu.tagName+" but finding "+u.length+"!");{let e=H(u[0]),t=e.get("name");if(void 0==t||t==ef.xsiType2){let t=e.get("xsi:type");if(void 0!=t&&(t==ef.xsiType||t==ef.xsiType2)){let t,n,s,i;let a=u[0].getElementsByTagName(eg.tagName);if(null!=a&&null!=a[0]){let e=parseFloat(z(R(a[0])));t=new eg(H(a[0]),e)}let o=u[0].getElementsByTagName(ed.tagName);if(null!=o&&null!=o[0]){let e=parseFloat(z(R(o[0])));n=new ed(H(o[0]),e)}let r=u[0].getElementsByTagName(eh.tagName);if(null!=r&&null!=r[0]){let e=parseFloat(z(R(r[0])));s=new ec(H(r[0]),e)}let g=u[0].getElementsByTagName(ec.tagName);if(null!=g&&null!=g[0]){let e=parseFloat(z(R(g[0])));i=new ec(H(g[0]),e)}l=new ef(e,t,n,s,i)}}else l=new eu(e)}}let f=n[e].getElementsByTagName(eN.tagName);if(f.length>0){if(f.length>1)throw Error("Expecting 1 "+eN.tagName+" but finding "+f.length+"!");let e=parseFloat(z(R(f[0])));g=new eN(H(f[0]),e)}let N=new ep(t,s,i,a,r,o,l,g);eq.set(s,N)}}}(s),0!=eq.size&&(eq.forEach(function(e,t){console.log("id="+t);let n=document.createElement("div");e.index.forEach(function(s,i){if(s instanceof Map)s.forEach(function(s,i){let a=e.nodes.get(s);void 0!=a&&e6(t,n,a)});else{let i=e.nodes.get(s);void 0!=i&&e6(t,n,i)}});let s=w(n,e.getLabel(),t+"_details","reaction");if(null!==document.getElementById("reactionsList")){let e=document.getElementById("reactions");e&&e.appendChild(s)}}),M()),eW.forEach(function(e,t){let n=e.getProperties();void 0!=n&&n instanceof q&&n.properties.forEach(function(n,s){let i=n.getProperty();if(i instanceof U){let n=i.attributes?.get("units"),a=document.getElementById(t+"_"+s);a&&(P(a),a.addEventListener("change",i=>{let o=i.target.value;e.setPropertyScalar(s,parseFloat(o)),void 0!=n?console.log("Set "+s+" of "+t+" to "+o+" "+n):console.log("Set "+s+" of "+t+" to "+o),P(a),s===ei.energyDictRef?(console.log("update display diagram"),e7()):console.log("key0 "+s+" does not match "+ei.energyDictRef)}))}else{let n=document.getElementById(t+"_"+s);n&&(P(n),n.addEventListener("change",i=>{let a=i.target.value,o=a.split(/\s+/),r=[];o.forEach(function(e){r.push(parseFloat(e))}),e.setPropertyArray(s,r),console.log("Set "+s+" of "+t+" to "+a),P(n)}))}})}),e7(),function(e){console.log(eP.tagName);let t=G(e,eP.tagName);null!=(g=document.getElementById("conditions_title"))&&(g.innerHTML="Conditions");let n=B(t,eb.tagName),s=new eb(H(n),z(R(n)),eW),i=G(t,"me:PTs"),a=i.getElementsByTagName(eM.tagName),o=[];for(let e=0;e<a.length;e++){let t,n,s=a[e].getElementsByTagName(eb.tagName);s.length>0&&(s.length>1&&console.warn("xml_bathGass.length="+s.length),console.log("pTBathGas"+(t=new eb(H(s[0]),z(R(s[0])),eW)).toString()));let i=a[e].getElementsByTagName(eT.tagName);i.length>0&&(i.length>1&&console.warn("xml_experimentRates.length="+i.length),console.log("experimentRate"+(n=new eT(H(i[0]),parseFloat(z(R(i[0]))))).toString())),o.push(new eM(H(a[e]),t,n))}m=new eP(H(t),s,new eS(H(i),o))}(s),console.log(ez.tagName),i=G(s,ez.tagName),null!=(d=document.getElementById("modelParameters_title"))&&(d.innerHTML="Model Parameters"),a=G(i,eB.tagName),h=new eB(H(a),parseFloat(z(R(a)))),c=G(i,eR.tagName),u=new ez(h,new eR(H(c),parseFloat(z(R(c))))),N=document.getElementById("modelParameters_table"),p=x(["Parameter","Value"])+(v(y("Grain Size")+y(u.getGrainSize().value.toString()))+v(y("Energy Above The Top Hill")+y(u.getEnergyAboveTheTopHill().value.toString()))),null!=N&&(N.innerHTML=p),function(e){let t,n,s,i,a,o,r,l,g,d,h,c,m,u;console.log(eU.tagName);let N=G(e,eU.tagName),p=document.getElementById("control_title");null!=p&&(p.innerHTML="Control");let E=N.getElementsByTagName(eL.tagName);1==E.length?t=new eL:E.length>1&&console.warn("testDOS.length="+E.length);let x=N.getElementsByTagName(eC.tagName);1==x.length?n=new eC:x.length>1&&console.warn("printSpeciesProfile.length="+x.length);let y=N.getElementsByTagName(eA.tagName);1==y.length?s=new eA:y.length>1&&console.warn("testMicroRates.length="+y.length);let v=N.getElementsByTagName(eI.tagName);1==v.length?i=new eI:v.length>1&&console.warn("testRateConstant.length="+v.length);let w=N.getElementsByTagName(eD.tagName);1==w.length?a=new eD:w.length>1&&console.warn("printGrainDOS.length="+w.length);let b=N.getElementsByTagName(e_.tagName);1==b.length?o=new e_:b.length>1&&console.warn("printCellDOS.length="+b.length);let T=N.getElementsByTagName(eO.tagName);1==T.length?r=new eO:T.length>1&&console.warn("printReactionOperatorColumnSums.length="+T.length);let M=N.getElementsByTagName(eF.tagName);1==M.length?l=new eF:M.length>1&&console.warn("printTunnellingCoefficients.length="+M.length);let S=N.getElementsByTagName(eH.tagName);1==S.length?g=new eH:S.length>1&&console.warn("printGrainkfE.length="+S.length);let P=N.getElementsByTagName(eG.tagName);1==P.length?d=new eG:P.length>1&&console.warn("printGrainBoltzmann.length="+P.length);let B=N.getElementsByTagName(ek.tagName);1==B.length?h=new ek:B.length>1&&console.warn("printGrainkbE.length="+B.length);let L=N.getElementsByTagName(eX.tagName);1==L.length?c=new eX(H(L[0]),parseFloat(z(R(L[0])))):console.warn("eigenvalues.length="+L.length);let C=N.getElementsByTagName(e$.tagName);1==C.length?m=new e$:console.warn("hideInactive.length="+C.length);let A=N.getElementsByTagName(ej.tagName);if(1==A.length){let e=parseFloat(z(R(A[0])));u=new ej(H(A[0]),e)}else console.warn("diagramEnergyOffset.length="+A.length);f=new eU(H(N),t,n,s,i,a,o,r,l,g,d,h,c,m,u)}(s),E=document.getElementById("control_table"),b=x(["Control","Value"]),void 0!=f.getTestDOS()&&(b+=v(y(eL.tagName)+y(""))),void 0!=f.getPrintSpeciesProfile()&&(b+=v(y(eC.tagName)+y(""))),void 0!=f.getTestMicroRates()&&(b+=v(y(eA.tagName)+y(""))),void 0!=f.getTestRateConstant()&&(b+=v(y(eI.tagName)+y(""))),void 0!=f.getPrintGrainDOS()&&(b+=v(y(eD.tagName)+y(""))),void 0!=f.getPrintCellDOS()&&(b+=v(y(e_.tagName)+y(""))),void 0!=f.getPrintReactionOperatorColumnSums()&&(b+=v(y(eO.tagName)+y(""))),void 0!=f.getPrintTunnellingCoefficients()&&(b+=v(y(eF.tagName)+y(""))),void 0!=f.getPrintGrainkfE()&&(b+=v(y(eH.tagName)+y(""))),void 0!=f.getPrintGrainBoltzmann()&&(b+=v(y(eG.tagName)+y(""))),void 0!=f.getPrintGrainkbE()&&(b+=v(y(ek.tagName)+y(""))),void 0!=(T=f.getEigenvalues())&&(b+=v(y(eX.tagName)+y(T.value.toString()))),void 0!=f.getHideInactive()&&(b+=v(y(e$.tagName)+y(""))),void 0!=(S=f.getDiagramEnergyOffset())&&(b+=v(y(ej.tagName)+y(S.value.toString()))),null!=E&&(E.innerHTML=b)}(new DOMParser().parseFromString(p,"text/xml"))}}};let E=i.slice(N,N+1048576);a.readAsText(E),N+=1048576}}},p.click(),null!=(i=document.getElementById("load_button"))&&i.addEventListener("click",N),null!=(a=document.getElementById("saveButton"))&&(a.style.display="inline")}()}}),window.setTag=function(e,t,n){let s=t.id;if(s.split("_")[0],n){if(E(t.value)){let s=parseFloat(t.value);n.set(n.tagName,e,s),console.log(e+" of "+n.id+" set to "+s)}else alert(e+" input for "+n.id+" is not numeric, resetting..."),document.getElementById(s)}},window.setPropertyScalar=e3,window.setPropertyArray=e9,window.saveXML=function(){console.log("saveXML");let i="  ".repeat(2),a="\n  "+F(e,"me:title"),o="";eW.forEach(function(e,t){o+=e.toXML("  ",i)}),o=F(o,"moleculeList",void 0,"  ",!0);let r="";eq.forEach(function(e,t){r+=e.toXML("  ",i)}),r=F(r,"reactionList",void 0,"  ",!0);let l=m.toXML("  ","  "),g=u.toXML("  ","  "),d=f.toXML("  ","  "),h=new Blob([eK,t,a,o,r,l,g,d,n],{type:"text/plain"}),c=URL.createObjectURL(h),N=document.createElement("a");N.href=c,N.download=s,document.body.appendChild(N),N.click(),document.body.removeChild(N)};
//# sourceMappingURL=index.8f3c5a27.js.map
