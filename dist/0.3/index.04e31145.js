let e,t,s,i,a;function n(e,t){if(!e.has(t))throw Error(`Key ${t} not found in map`);return e.get(t)}function o(e,t){return void 0==t&&(t=", "),e.map(e=>null==e?"null":e.toString()).join(t)}function r(e){let t=[];for(let s=0;s<e.length;s++)d(e[s])&&t.push(parseFloat(e[s]));return t}function d(e){return""!==e&&!isNaN(Number(e))}function l(e,t,s,i,a,n,o,r,d){let l=document.createElement("div");void 0!=r&&(l.id=r),void 0!=d&&(l.className=d);let g=document.createElement("button");return void 0!=s&&(g.id=s),g.className="collapsible",g.innerText=t,void 0!=i&&(g.style.fontSize=i),void 0!=a&&(g.style.marginLeft=a),void 0!=n&&(g.style.marginTop=n),void 0!=o&&(g.style.marginBottom=o),l.appendChild(g),l.appendChild(e),l}function g(){this.classList.toggle("active");let e=this.nextElementSibling;"block"===e.style.display?e.style.display="none":e.style.display="block"}function h(e,t,s,i,a){let n=document.createElement("input");n.type=e,n.id=t,n.onchange=s,n.value=i;let o=document.createElement("label");o.htmlFor=t,a?o.textContent=a+": ":o.textContent="";let r=document.createElement("div");return r.appendChild(o),r.appendChild(n),r}function c(e,t){let s="<"+t;if(e)for(let[t,i]of e)s+=" "+t+'="'+i+'"';return s+" />"}function m(e,t){void 0==t&&(t=4),e.style.width=e.value.length+t+"ch"}function u(e,t){void 0==t&&(t=6),e.style.width=e.value.length+t+"ch"}function N(e,t,s){let i=document.createElement("select");return e.forEach(e=>{i.name=t,i.id=s;let a=document.createElement("option");a.value=e,a.text=e,i.appendChild(a)}),i}function p(e,t){let s=e.getElementsByTagName(t)[0];if(null==s)throw Error(t+" element not found");return s}function f(e){let t=e.childNodes;if(null==t)throw Error("Element has no childNodes");return t[0]}function x(e){let t=e.nodeValue;if(null==t)throw Error("nodeValue is null");return t}function v(e){let t=f(e);return t?x(t).trim():""}class E{constructor(e){this.tagName=e}toXML(e){let t=c(void 0,this.tagName);return e?"\n"+e+t:t}}class y extends E{constructor(e,t){super(t),this.attributes=e}toString(){let e=this.tagName+"(";return this.attributes&&this.attributes.forEach((t,s)=>{e+=`${s}(${t}), `}),e}toXML(e){let t="";if(void 0!=e&&(t+="\n"+e),t+="<"+this.tagName,this.attributes)for(let[e,s]of this.attributes)t+=" "+e+'="'+s.toString()+'"';return t+" />"}}class w extends y{constructor(e,t,s){super(e,t),this.value=s}toString(){return super.toString()+`, ${this.value.toString()})`}toXML(e){return S(this.value.trim(),this.tagName,this.attributes,e,!1)}}class b extends y{constructor(e,t,s){super(e,t),this.value=s}toString(){return super.toString()+`, ${this.value.toString()})`}toXML(e){return S(this.value.toString().trim(),this.tagName,this.attributes,e,!1)}}class T extends y{constructor(e,t,s,i){super(e,t),this.delimiter=",",this.values=s,void 0!=i&&(this.delimiter=i)}toString(){return super.toString()+`, ${this.values.toString()})`}setDelimiter(e){this.delimiter=e}toXML(e){return S(this.values.toString().replaceAll(",",this.delimiter),this.tagName,this.attributes,e,!1)}}class M extends y{constructor(e,t){super(e,t),this.nodes=new Map}addNode(e){return this.nodes.set(this.nodes.size,e),this.nodes.size-1}toString(){let e=super.toString();return this.nodes.forEach((t,s)=>{e+=`, ${t.toString()}`}),e+")"}toXML(e,t){let s;void 0!=e&&void 0!=t&&(s=t+e);let i="";if(this.nodes.size>0)return this.nodes.forEach(t=>{t instanceof M?i+=t.toXML(e,s):i+=t.toXML(s)}),S(i,this.tagName,this.attributes,t,!0);{let e=c(this.attributes,this.tagName);return void 0!=t?"\n"+t+e:e}}}function S(e,t,s,i,a){let n;return function(e,t,s){let i="";if(void 0!=s&&(i+="\n"+s),i+="<"+e,t)for(let[e,s]of t)i+=" "+e+'="'+s.toString()+'"';return i+">"}(t,s,i)+e+(n="",a&&void 0!=i&&(n+="\n"+i),n+"</"+t+">")}function z(e){let t=e.getAttributeNames(),s=new Map;return t.forEach(function(t){let i=e.getAttribute(t);null!=i&&s.set(t,i)}),s}function R(e,t){let s=e.getElementsByTagName(t);if(1!=s.length)throw Error("Expecting 1 "+t+" but finding "+s.length);return s[0]}class C extends y{static{this.tagName="atom"}constructor(e){super(e,C.tagName);let t=e.get("elementType");if(void 0==t)throw Error("elementType is undefined");this.elementType=t;let s=e.get("id");void 0==s&&(s=this.elementType),this.id=s}}class L extends M{static{this.tagName="atomArray"}constructor(e,t){super(e,L.tagName),t.forEach(e=>{this.nodes.set(this.nodes.size,e)})}}class P extends y{static{this.tagName="bond"}constructor(e){super(e,P.tagName);let t=e.get("atomRefs2");if(void 0==t)throw Error("atomRefs2 is undefined");this.atomRefs2=t}}class B extends M{static{this.tagName="bondArray"}constructor(e,t){super(e,B.tagName),t.forEach(e=>{this.nodes.set(this.nodes.size,e)})}}class _ extends b{static{this.tagName="scalar"}constructor(e,t){super(e,_.tagName,t)}updateUnits(e){if(e&&void 0!=this.attributes){let t=this.attributes.get("units");void 0!=t&&t!=e&&this.attributes.set("units",e)}}}class I extends T{static{this.tagName="array"}constructor(e,t,s){super(e,I.tagName,t,s)}updateUnits(e){if(e&&void 0!=this.attributes){let t=this.attributes.get("units");void 0!=t&&t!=e&&this.attributes.set("units",e)}}}class D extends M{static{this.tagName="property"}constructor(e,t){super(e,D.tagName);let s=e.get("dictRef");if(void 0==s)throw Error("dictRef is undefined");this.dictRef=s,t&&this.nodes.set(0,t)}getProperty(){return this.nodes.get(0)}setProperty(e){this.nodes.set(0,e)}}class A extends D{static{this.dictRef="me:ZPE"}constructor(e,t){super(e,t)}setUnits(e){this.getProperty().updateUnits(e)}}class F extends D{static{this.dictRef="me:frequenciesScaleFactor"}constructor(e,t){super(e,t)}}class O extends D{static{this.dictRef="me:vibFreqs"}constructor(e,t){super(e,t)}}class H extends D{static{this.dictRef="me:rotConsts"}constructor(e,t){super(e,t)}}class G extends D{static{this.dictRef="me:MW"}constructor(e,t){super(e,t)}}class k extends D{static{this.dictRef="me:imFreqs"}constructor(e,t){super(e,t)}}class X extends M{static{this.tagName="propertyList"}constructor(e,t){super(e,X.tagName),this.index=new Map,t&&t.forEach(e=>{this.nodes.set(this.nodes.size,e),this.index.set(e.dictRef,this.nodes.size-1)})}getProperty(e){let t=this.index.get(e);if(void 0!=t)return this.nodes.get(t);throw Error("Property "+e+" does not exist")}setProperty(e){let t=this.index.get(e.dictRef);void 0==t?(this.nodes.set(this.nodes.size,e),this.index.set(e.dictRef,this.nodes.size-1)):(console.log("Property "+e.dictRef+" already exists, updating..."),this.nodes.set(t,e))}}class $ extends b{static{this.tagName="me:deltaEDown"}constructor(e,t){super(e,$.tagName,t)}getBathGas(){if(void 0!=this.attributes)return this.attributes.get("bathGas")}setBathGas(e){void 0!=this.attributes&&this.attributes.set("bathGas",e)}getUnits(){if(void 0!=this.attributes)return this.attributes.get("units")}getLower(){if(void 0!=this.attributes)return parseFloat(n(this.attributes,"lower"))}setLower(e){void 0!=this.attributes&&this.attributes.set("lower",e.toString())}getUpper(){if(void 0!=this.attributes)return parseFloat(n(this.attributes,"upper"))}setUpper(e){void 0!=this.attributes&&this.attributes.set("upper",e.toString())}getStepsize(){if(void 0!=this.attributes)return parseFloat(n(this.attributes,"stepsize"))}setStepsize(e){void 0!=this.attributes&&this.attributes.set("stepsize",e.toString())}setValue(e){this.value=e}}class U extends M{static{this.tagName="me:energyTransferModel"}constructor(e,t){super(e,U.tagName),void 0!=t&&t.forEach(e=>{this.nodes.set(this.nodes.size,e)})}getDeltaEDowns(){let e=[];return this.nodes.forEach(t=>{t instanceof $&&e.push(t)}),e}setDeltaEDowns(e){this.nodes.clear(),e.forEach(e=>{this.nodes.set(this.nodes.size,e)})}getDeltaEDown(e){if(e<0||e>=this.nodes.size)throw Error("index out of range");return this.nodes.get(e)}setDeltaEDown(e,t){this.nodes.set(e,t)}addDeltaEDown(e){return this.nodes.set(this.nodes.size,e),this.nodes.size-1}}class q extends y{static{this.tagName="me:DOSCMethod"}constructor(e){if(super(e,q.tagName),void 0==e.get("xsi:type"))throw Error("xsi:type is undefined")}getXsiType(){if(void 0==this.attributes)throw Error("attributes is undefined");return this.attributes.get("xsi:type")}setXsiType(e){if(void 0==this.attributes)throw Error("attributes is undefined");this.attributes.set("xsi:type",e)}}class V extends w{static{this.tagName="me:bondRef"}constructor(e,t){super(e,V.tagName,t)}}class j extends y{static{this.tagName="me:PotentialPoint"}constructor(e){super(e,j.tagName)}}class W extends M{static{this.tagName="me:HinderedRotorPotential"}constructor(e,t){super(e,W.tagName),t.forEach(e=>{this.nodes.set(this.nodes.size,e)})}getPotentialPoint(e){return this.nodes.get(e)}setPotentialPoints(e,t){this.nodes.set(e,t)}addPotentialPoint(e){return this.nodes.set(this.nodes.size,e),this.nodes.size-1}}class K extends b{static{this.tagName="me:periodicity"}constructor(e,t){super(e,K.tagName,t)}}class Z extends M{static{this.tagName="me:ExtraDOSCMethod"}constructor(e,t,s,i){super(e,Z.tagName),this.index=new Map,t&&(this.nodes.set(this.nodes.size,t),this.index.set(V.tagName,this.nodes.size-1)),s&&(this.nodes.set(this.nodes.size,s),this.index.set(W.tagName,this.nodes.size-1)),i&&(this.nodes.set(this.nodes.size,i),this.index.set(K.tagName,this.nodes.size-1))}getBondRef(){let e=this.index.get(V.tagName);if(void 0!=e)return this.nodes.get(e)}setBondRef(e){let t=this.index.get(V.tagName);void 0!=t?this.nodes.set(t,e):(this.nodes.set(this.nodes.size,e),this.index.set(V.tagName,this.nodes.size-1))}getHinderedRotorPotential(){let e=this.index.get(W.tagName);if(void 0!=e)return this.nodes.get(e)}setHinderedRotorPotential(e){let t=this.index.get(W.tagName);void 0!=t?this.nodes.set(t,e):(this.nodes.set(this.nodes.size,e),this.index.set(W.tagName,this.nodes.size-1))}getPeriodicity(){let e=this.index.get(K.tagName);if(void 0!=e)return this.nodes.get(e)}setPeriodicity(e){let t=this.index.get(K.tagName);void 0!=t?this.nodes.set(t,e):(this.nodes.set(this.nodes.size,e),this.index.set(K.tagName,this.nodes.size-1))}}class J extends b{static{this.tagName="me:reservoirSize"}constructor(e,t){super(e,J.tagName,t)}}class Q extends M{static{this.tagName="molecule"}constructor(e,t,s,i,a,n,o,r){super(e,Q.tagName),this.index=new Map;let d=e.get("id");if(void 0==d)throw Error("id is undefined");this.id=d;let l=0;t&&(this.nodes.set(l,t),t instanceof C?this.index.set(C.tagName,l):this.index.set(L.tagName,l),l++),s&&(this.nodes.set(l,s),this.index.set(B.tagName,l),l++),i&&(this.nodes.set(l,i),this.index.set(X.tagName,l),l++),a&&(this.nodes.set(l,a),this.index.set(U.tagName,l),l++),n&&(this.nodes.set(l,n),this.index.set(q.tagName,l)),o&&(this.nodes.set(l,o),this.index.set(Z.tagName,l)),r&&(this.nodes.set(l,r),this.index.set(J.tagName,l))}getDescription(){if(void 0!=this.attributes)return this.attributes.get("description")}setDescription(e){void 0!=this.attributes&&this.attributes.set("description",e)}getActive(){if(void 0!=this.attributes){let e=this.attributes.get("active");if(void 0!=e)return"true"==e}}setActive(e){void 0!=this.attributes&&this.attributes.set("active",e.toString())}getLabel(){let e=this.id,t=this.getDescription();return void 0!=t&&(e+=" ("+t+")"),this.getActive()&&(e+=" (active)"),e}getAttributesAsString(){return void 0==this.attributes?"":Array.from(this.attributes,([e,t])=>`${e}="${t}"`).join(", ")}getProperties(){let e=this.index.get(X.tagName);if(void 0!=e||void 0!=(e=this.index.get(D.tagName)))return this.nodes.get(e)}setProperties(e){let t=this.index.get(X.tagName);void 0==t?(this.index.set(X.tagName,this.nodes.size),this.addNode(e)):this.nodes.set(t,e)}getProperty(e){let t=this.getProperties();if(void 0!=t)return t instanceof X?t.getProperty(e):t}setProperty(e){let t=this.getProperties();void 0!=t?t instanceof X?t.setProperty(e):this.setProperties(t):this.setProperties(e)}getAtoms(){let e=this.index.get(C.tagName);if(void 0!=e||void 0!=(e=this.index.get(L.tagName)))return this.nodes.get(e)}getBonds(){let e=this.index.get(B.tagName);if(void 0!=e)return this.nodes.get(e)}getEnergyTransferModel(){let e=this.index.get(U.tagName);if(void 0!=e)return this.nodes.get(e)}setEnergyTransferModel(e){let t=this.index.get(U.tagName);void 0==t?(this.index.set(U.tagName,this.nodes.size),this.addNode(e)):this.nodes.set(t,e)}getDOSCMethod(){let e=this.index.get(q.tagName);if(void 0!=e)return this.nodes.get(e)}setDOSCMethod(e){let t=this.index.get(q.tagName);void 0==t?(this.index.set(q.tagName,this.nodes.size),this.addNode(e)):this.nodes.set(t,e)}getExtraDOSCMethod(){let e=this.index.get(Z.tagName);if(void 0!=e)return this.nodes.get(e)}setExtraDOSCMethod(e){let t=this.index.get(Z.tagName);void 0==t?(this.index.set(Z.tagName,this.nodes.size),this.addNode(e)):this.nodes.set(t,e)}getReservoirSize(){let e=this.index.get(J.tagName);if(void 0!=e)return this.nodes.get(e)}setReservoirSize(e){let t=this.index.get(J.tagName);void 0==t?(this.index.set(J.tagName,this.nodes.size),this.addNode(e)):this.nodes.set(t,e)}getEnergy(){let e=this.getProperty(A.dictRef);if(void 0==e)throw console.log(this.toString()),Error("ZPE property not found");return e.getProperty().value}}class Y extends y{static{this.tagName="molecule"}constructor(e){super(e,Y.tagName),this.ref=e.get("ref"),this.role=e.get("role")}setRole(e){this.role=e}}class ee extends M{static{this.tagName="reactant"}constructor(e,t){super(e,ee.tagName),this.addNode(t)}getMolecule(){return this.nodes.get(0)}}class et extends M{static{this.tagName="product"}constructor(e,t){super(e,et.tagName),this.addNode(t)}getMolecule(){return this.nodes.get(0)}}class es extends M{static{this.tagName="me:transitionState"}constructor(e,t){super(e,es.tagName),this.addNode(t)}getMolecule(){return this.nodes.get(0)}}class ei extends b{static{this.tagName="me:preExponential"}constructor(e,t){super(e,ei.tagName,t)}}class ea extends b{static{this.tagName="me:activationEnergy"}constructor(e,t){super(e,ea.tagName,t)}}class en extends b{static{this.tagName="me:TInfinity"}constructor(e,t){super(e,en.tagName,t)}}class eo extends b{static{this.tagName="me:nInfinity"}constructor(e,t){super(e,eo.tagName,t)}}class er extends M{static{this.tagName="me:MCRCMethod"}constructor(e){super(e,er.tagName)}}class ed extends er{static{this.xsiType="me:MesmerILT"}static{this.xsiType2="MesmerILT"}constructor(e,t,s,i,a){super(e),this.index=new Map,void 0!=t&&(this.index.set(ei.tagName,this.index.size),this.addNode(t)),void 0!=s&&(this.index.set(ea.tagName,this.index.size),this.addNode(s)),void 0!=i&&(this.index.set(en.tagName,this.index.size),this.addNode(i)),void 0!=a&&(this.index.set(eo.tagName,this.index.size),this.addNode(a))}getPreExponential(){let e=this.index.get(ei.tagName);if(void 0!=e)return this.nodes.get(e)}setPreExponential(e){let t=this.index.get(ei.tagName);void 0==t?(this.index.set(ei.tagName,this.nodes.size),this.addNode(e)):this.nodes.set(t,e)}getActivationEnergy(){let e=this.index.get(ea.tagName);if(void 0!=e)return this.nodes.get(e)}setActivationEnergy(e){let t=this.index.get(ea.tagName);void 0==t?(this.index.set(ea.tagName,this.nodes.size),this.addNode(e)):this.nodes.set(t,e)}getTInfinity(){let e=this.index.get(en.tagName);if(void 0!=e)return this.nodes.get(e)}setTInfinity(e){let t=this.index.get(en.tagName);void 0==t?(this.index.set(en.tagName,this.nodes.size),this.addNode(e)):this.nodes.set(t,e)}getNInfinity(){let e=this.index.get(eo.tagName);if(void 0!=e)return this.nodes.get(e)}setNInfinity(e){let t=this.index.get(eo.tagName);void 0==t?(this.index.set(eo.tagName,this.nodes.size),this.addNode(e)):this.nodes.set(t,e)}}class el extends y{static{this.tagName="me:tunneling"}constructor(e){super(e,el.tagName)}getName(){return void 0!=this.attributes?this.attributes.get("name"):""}setName(e){void 0!=this.attributes&&this.attributes.set("name",e)}}class eg extends b{static{this.tagName="me:excessReactantConc"}constructor(e,t){super(e,eg.tagName,t)}}class eh extends M{static{this.tagName="reaction"}constructor(e,t,s,i,a,n,o){super(e,eh.tagName),this.index=new Map,this.reactantsIndex=new Map,this.productsIndex=new Map,this.transitionStatesIndex=new Map;let r=e.get("id");if(void 0==r)throw Error("Reaction id is undefined");this.id=r,void 0!=t&&(t.forEach(e=>{this.reactantsIndex.set(e.getMolecule().ref,this.nodes.size),this.addNode(e)}),this.index.set(ee.tagName,this.reactantsIndex)),void 0!=s&&(s.forEach(e=>{this.productsIndex.set(e.getMolecule().ref,this.nodes.size),this.addNode(e)}),this.index.set(et.tagName,this.productsIndex)),void 0!=i&&(this.index.set(el.tagName,this.nodes.size),this.addNode(i)),void 0!=a&&(a.forEach(e=>{this.transitionStatesIndex.set(e.getMolecule().ref,this.nodes.size),this.addNode(e)}),this.index.set(es.tagName,this.transitionStatesIndex)),void 0!=n&&(this.index.set(er.tagName,this.nodes.size),this.addNode(n)),void 0!=o&&(this.index.set(eg.tagName,this.nodes.size),this.addNode(o))}addToIndex(e,t){let s=this.index.get(e);if(void 0==s)this.index.set(e,this.nodes.size);else if(s instanceof Map)s.set(t.tagName,this.nodes.size);else{let i=new Map;i.set(this.nodes.get(s).ref,s),i.set(t.tagName,this.nodes.size),this.index.set(e,i)}}getReactants(){let e=this.index.get(ee.tagName);return void 0==e?[]:e instanceof Map?Array.from(e.values()).map(e=>this.nodes.get(e)):[this.nodes.get(e)]}setReactants(e){e.forEach(e=>{this.reactantsIndex.set(e.getMolecule().ref,this.nodes.size),this.addNode(e)}),this.index.set(ee.tagName,this.reactantsIndex)}getReactant(e){let t=this.reactantsIndex.get(e);if(void 0==t)throw Error(`Reactant with ref ${e} not found`);return this.nodes.get(t)}addReactant(e){this.reactantsIndex.set(e.getMolecule().ref,this.nodes.size),this.addNode(e)}removeReactant(e){let t=this.reactantsIndex.get(e);if(void 0==t)throw Error(`Reactant with ref ${e} not found`);this.nodes.delete(t),this.reactantsIndex.delete(e)}getProducts(){let e=this.index.get(et.tagName);return void 0==e?[]:e instanceof Map?Array.from(e.values()).map(e=>this.nodes.get(e)):[this.nodes.get(e)]}setProducts(e){e.forEach(e=>{this.productsIndex.set(e.getMolecule().ref,this.nodes.size),this.addNode(e)}),this.index.set(et.tagName,this.productsIndex)}getProduct(e){let t=this.productsIndex.get(e);if(void 0==t)throw Error(`Product with ref ${e} not found`);return this.nodes.get(t)}addProduct(e){this.productsIndex.set(e.getMolecule().ref,this.nodes.size),this.addNode(e)}removeProduct(e){let t=this.productsIndex.get(e);if(void 0==t)throw Error(`Product with ref ${e} not found`);this.nodes.delete(t),this.productsIndex.delete(e)}getTunneling(){let e=this.index.get(el.tagName);if(void 0!=e)return this.nodes.get(e)}setTunneling(e){let t=this.index.get(el.tagName);if(void 0==t)this.index.set(el.tagName,this.nodes.size),this.addNode(e);else{if(t instanceof Map)throw Error("Tunneling is a map and it is assumed there would be only 1!");this.nodes.set(t,e)}}getTransitionStates(){let e=this.index.get(es.tagName);return void 0==e?[]:e instanceof Map?Array.from(e.values()).map(e=>this.nodes.get(e)):[this.nodes.get(e)]}setTransitionStates(e){e.forEach(e=>{this.transitionStatesIndex.set(e.getMolecule().ref,this.nodes.size),this.addNode(e)}),this.index.set(es.tagName,this.transitionStatesIndex)}getTransitionState(e){let t=this.transitionStatesIndex.get(e);if(void 0==t)throw Error(`Transition state with ref ${e} not found`);return this.nodes.get(t)}addTransitionState(e){this.transitionStatesIndex.set(e.getMolecule().ref,this.nodes.size),this.addNode(e)}removeTransitionState(e){let t=this.transitionStatesIndex.get(e);if(void 0==t)throw Error(`Transition State with ref ${e} not found`);this.nodes.delete(t),this.transitionStatesIndex.delete(e)}getMCRCMethod(){let e=this.index.get(er.tagName);if(void 0!=e)return this.nodes.get(e)}setMCRCMethod(e){let t=this.index.get(er.tagName);if(void 0==t)this.index.set(er.tagName,this.nodes.size),this.addNode(e);else{if(t instanceof Map)throw Error("MCRCMethod is a map and it is assumed there would be only 1!");this.nodes.set(t,e)}}getExcessReactantConc(){let e=this.index.get(eg.tagName);if(void 0!=e)return this.nodes.get(e)}setExcessReactantConc(e){let t=this.index.get(eg.tagName);if(void 0==t)this.index.set(eg.tagName,this.nodes.size),this.addNode(e);else{if(t instanceof Map)throw Error("ExcessReactantConc is a map and it is assumed there would be only 1!");this.nodes.set(t,e)}}getReactantsLabel(){return this.getReactants().map(e=>e.getMolecule().ref).join(" + ")}getProductsLabel(){return this.getProducts().map(e=>e.getMolecule().ref).join(" + ")}getLabel(){return this.getReactantsLabel()+" -> "+this.getProductsLabel()}getReactantsEnergy(e){return Array.from(this.getReactants()).map(t=>{let s=e.get(t.getMolecule().ref);if(void 0==s)throw Error(`Molecule with ref ${t.getMolecule().ref} not found`);return s.getEnergy()}).reduce((e,t)=>e+t,0)}getProductsEnergy(e){return Array.from(this.getProducts()).map(t=>{let s=e.get(t.getMolecule().ref);if(void 0==s)throw Error(`Molecule with ref ${t.getMolecule().ref} not found`);return s.getEnergy()}).reduce((e,t)=>e+t,0)}get(e,t){if(this.index.has(e)){let s=this.index.get(e);if(void 0!=s){if(!(s instanceof Map))return this.nodes.get(s);{let e=s.get(t);if(void 0!=e)return this.nodes.get(e)}}}}}function ec(e,t,s,i,a,n,o,r,d,l,g){let h=i+(n-i)/2;eu(e,g,r,t,h-eN(e,g,r)/2,o+d),eu(e,l,r,t,h-eN(e,l,r)/2,o+3*d),em(e,t,s,i,a,n,o)}function em(e,t,s,i,a,n,o){e.beginPath(),e.strokeStyle=t,e.lineWidth=s,e.moveTo(i,a),e.lineTo(n,o),e.stroke()}function eu(e,t,s,i,a,n){e.save(),e.translate(a,n),e.scale(1,-1),e.font=s,e.fillStyle=i,e.fillText(t,0,0),e.restore()}function eN(e,t,s){return e.font=s,e.measureText(t).width}class ep extends w{static{this.tagName="me:bathGas"}constructor(e,t,s){super(e,ep.tagName,t),this.molecules=s}getMolecule(){return this.molecules.get(this.value)}}class ef extends b{static{this.tagName="me:experimentRate"}constructor(e,t){super(e,ef.tagName,t)}}class ex extends M{static{this.tagName="me:PTpair"}constructor(e,t,s){super(e,ex.tagName),this.index=new Map,t&&(this.index.set(ep.tagName,this.nodes.size),this.addNode(t)),s&&(this.index.set(ef.tagName,this.nodes.size),this.addNode(s))}getP(){if(void 0!=this.attributes){let e=this.attributes.get("P");if(e)return parseFloat(e);throw Error("P is undefined")}return NaN}setP(e){void 0!=this.attributes&&this.attributes.set("P",e.toString())}getT(){if(void 0!=this.attributes){let e=this.attributes.get("T");if(e)return parseFloat(e);throw Error("T is undefined")}return NaN}setT(e){void 0!=this.attributes&&this.attributes.set("T",e.toString())}getBathGas(){let e=this.index.get(ep.tagName);return e?this.nodes.get(e):void 0}setBathGas(e){let t=this.index.get(ep.tagName);t?this.nodes.set(t,e):(this.index.set(ep.tagName,this.nodes.size),this.addNode(e))}getExperimentRate(){let e=this.index.get(ef.tagName);return e?this.nodes.get(e):void 0}setExperimentRate(e){let t=this.index.get(ef.tagName);t?this.nodes.set(t,e):(this.index.set(ef.tagName,this.nodes.size),this.addNode(e))}}class ev extends M{static{this.tagName="me:PTs"}constructor(e,t){super(e,ev.tagName),t.forEach(e=>{this.addNode(e)})}getPTpair(e){return this.nodes.get(e)}setPTpair(e,t){this.nodes.set(e,t)}addPTpair(e){return this.addNode(e)}}class eE extends M{static{this.tagName="me:conditions"}constructor(e,t,s){super(e,eE.tagName),this.addNode(t),this.addNode(s)}getBathGas(){return this.nodes.get(0)}getPTs(){return this.nodes.get(1)}}class ey extends b{static{this.tagName="me:grainSize"}constructor(e,t){super(e,ey.tagName,t)}toString(){return`GrainSize(${super.toString()})`}}class ew extends b{static{this.tagName="me:energyAboveTheTopHill"}constructor(e,t){super(e,ew.tagName,t)}}class eb extends M{static{this.tagName="me:modelParameters"}constructor(e,t){super(new Map,eb.tagName),this.addNode(e),this.addNode(t)}getGrainSize(){return this.nodes.get(0)}getEnergyAboveTheTopHill(){return this.nodes.get(1)}}class eT extends E{static{this.tagName="me:testDOS"}constructor(){super(eT.tagName)}}class eM extends E{static{this.tagName="me:printSpeciesProfile"}constructor(){super(eM.tagName)}}class eS extends E{static{this.tagName="me:testMicroRates"}constructor(){super(eS.tagName)}}class ez extends E{static{this.tagName="me:testRateConstant"}constructor(){super(ez.tagName)}}class eR extends E{static{this.tagName="me:printGrainDOS"}constructor(){super(eR.tagName)}}class eC extends E{static{this.tagName="me:printCellDOS"}constructor(){super(eC.tagName)}}class eL extends E{static{this.tagName="me:printReactionOperatorColumnSums"}constructor(){super(eL.tagName)}}class eP extends E{static{this.tagName="me:printTunnellingCoefficients"}constructor(){super(eP.tagName)}}class eB extends E{static{this.tagName="me:printGrainkfE"}constructor(){super(eB.tagName)}}class e_ extends E{static{this.tagName="me:printGrainBoltzmann"}constructor(){super(e_.tagName)}}class eI extends E{static{this.tagName="me:printGrainkbE"}constructor(){super(eI.tagName)}}class eD extends b{static{this.tagName="me:eigenvalues"}constructor(e,t){super(e,eD.tagName,t)}}class eA extends E{static{this.tagName="me:hideInactive"}constructor(){super(eA.tagName)}}class eF extends b{static{this.tagName="me:diagramEnergyOffset"}constructor(e,t){super(e,eF.tagName,t)}}class eO extends M{static{this.tagName="me:control"}constructor(e,t,s,i,a,n,o,r,d,l,g,h,c,m,u){super(e,eO.tagName),this.index=new Map,void 0!=t&&(this.addNode(t),this.index.set(eT.tagName,this.index.size)),void 0!=s&&(this.addNode(s),this.index.set(eM.tagName,this.index.size)),void 0!=i&&(this.addNode(i),this.index.set(eS.tagName,this.index.size)),void 0!=a&&(this.addNode(a),this.index.set(ez.tagName,this.index.size)),void 0!=n&&(this.addNode(n),this.index.set(eR.tagName,this.index.size)),void 0!=o&&(this.addNode(o),this.index.set(eC.tagName,this.index.size)),void 0!=r&&(this.addNode(r),this.index.set(eL.tagName,this.index.size)),void 0!=d&&(this.addNode(d),this.index.set(eP.tagName,this.index.size)),void 0!=l&&(this.addNode(l),this.index.set(eB.tagName,this.index.size)),void 0!=g&&(this.addNode(g),this.index.set(e_.tagName,this.index.size)),void 0!=h&&(this.addNode(h),this.index.set(eI.tagName,this.index.size)),void 0!=c&&(this.addNode(c),this.index.set(eD.tagName,this.index.size)),void 0!=m&&(this.addNode(m),this.index.set(eA.tagName,this.index.size)),void 0!=u&&(this.addNode(u),this.index.set(eF.tagName,this.index.size))}getTestDOS(){let e=this.index.get(eT.tagName)??-1;if(-1!==e)return this.nodes.get(e)}getPrintSpeciesProfile(){let e=this.index.get(eM.tagName)??-1;if(-1!==e)return this.nodes.get(e)}getTestMicroRates(){let e=this.index.get(eS.tagName)??-1;if(-1!==e)return this.nodes.get(e)}getTestRateConstant(){let e=this.index.get(ez.tagName)??-1;if(-1!==e)return this.nodes.get(e)}getPrintGrainDOS(){let e=this.index.get(eR.tagName)??-1;if(-1!==e)return this.nodes.get(e)}getPrintCellDOS(){let e=this.index.get(eC.tagName)??-1;if(-1!==e)return this.nodes.get(e)}getPrintReactionOperatorColumnSums(){let e=this.index.get(eL.tagName)??-1;if(-1!==e)return this.nodes.get(e)}getPrintTunnellingCoefficients(){let e=this.index.get(eP.tagName)??-1;if(-1!==e)return this.nodes.get(e)}getPrintGrainkfE(){let e=this.index.get(eB.tagName)??-1;if(-1!==e)return this.nodes.get(e)}getPrintGrainBoltzmann(){let e=this.index.get(e_.tagName)??-1;if(-1!==e)return this.nodes.get(e)}getPrintGrainkbE(){let e=this.index.get(eI.tagName)??-1;if(-1!==e)return this.nodes.get(e)}getEigenvalues(){let e=this.index.get(eD.tagName)??-1;if(-1!==e)return this.nodes.get(e)}getHideInactive(){let e=this.index.get(eA.tagName)??-1;if(-1!==e)return this.nodes.get(e)}getDiagramEnergyOffset(){let e=this.index.get(eF.tagName)??-1;if(-1!==e)return this.nodes.get(e)}}class eH extends w{static{this.tagName="me:title"}constructor(e,t){super(e,eH.tagName,t)}}class eG extends M{static{this.tagName="moleculeList"}constructor(e,t){super(e,eG.tagName),this.index=new Map,void 0!=t&&t.forEach(e=>{this.nodes.set(this.nodes.size,e),this.index.set(e.id,this.nodes.size-1)})}getMolecule(e){let t=this.index.get(e);if(void 0!=t)return this.nodes.get(t)}removeMolecule(e){let t=this.index.get(e);void 0!=t&&(this.nodes.delete(t),this.index.delete(e))}addMolecule(e){let t=this.index.get(e.id);void 0!==t?(this.nodes.set(t,e),console.log("Replaced molecule with id "+e.id)):(this.nodes.set(this.nodes.size,e),this.index.set(e.id,this.nodes.size-1))}}class ek extends M{static{this.tagName="reactionList"}constructor(e,t){super(e,ek.tagName),this.index=new Map,void 0!=t&&t.forEach(e=>{this.nodes.set(this.nodes.size,e),this.index.set(e.id,this.nodes.size-1)})}getReaction(e){let t=this.index.get(e);if(void 0!=t)return this.nodes.get(t)}removeReaction(e){let t=this.index.get(e);void 0!=t&&(this.nodes.delete(t),this.index.delete(e))}addReaction(e){let t=this.index.get(e.id);void 0!==t?(this.nodes.set(t,e),console.log("Replaced reaction with id "+e.id)):(this.nodes.set(this.nodes.size,e),this.index.set(e.id,this.nodes.size-1))}}class eX extends M{static{this.tagName="me:mesmer"}constructor(e,t,s,i,a,n){super(e,eX.tagName),this.index=new Map,void 0!=t&&(this.index.set(eG.tagName,this.nodes.size),this.addNode(t)),void 0!=s&&(this.index.set(ek.tagName,this.nodes.size),this.addNode(s)),void 0!=i&&(this.index.set(eE.tagName,this.nodes.size),this.addNode(i)),void 0!=a&&(this.index.set(eb.tagName,this.nodes.size),this.addNode(a)),void 0!=n&&(this.index.set(eO.tagName,this.nodes.size),this.addNode(n))}getMoleculeList(){let e=this.index.get(eG.tagName);if(void 0!=e)return this.nodes.get(e)}setMoleculeList(e){let t=this.index.get(eG.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eG.tagName,this.nodes.size),this.addNode(e))}getReactionList(){let e=this.index.get(ek.tagName);if(void 0!=e)return this.nodes.get(e)}setReactionList(e){let t=this.index.get(ek.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(ek.tagName,this.nodes.size),this.addNode(e))}getConditions(){let e=this.index.get(eE.tagName);if(void 0!=e)return this.nodes.get(e)}setConditions(e){let t=this.index.get(eE.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eE.tagName,this.nodes.size),this.addNode(e))}getModelParameters(){let e=this.index.get(eb.tagName);if(void 0!=e)return this.nodes.get(e)}setModelParameters(e){let t=this.index.get(eb.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eb.tagName,this.nodes.size),this.addNode(e))}getControl(){let e=this.index.get(eO.tagName);if(void 0!=e)return this.nodes.get(e)}setControl(e){let t=this.index.get(eO.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eO.tagName,this.nodes.size),this.addNode(e))}}let e$="1.5em",eU="1.25em",eq="1.0em",eV="25px",ej="50px",eW="75px",eK=["kJ/mol","cm-1","kcal/mol","Hartree"],eZ=["cm-1","GHz"],eJ=new Map,eQ=-1/0,eY=1/0,e0=new Map;function e1(e,t,s,i,a,n){let o=i.getElementsByTagName(_.tagName);if(o.length>0){if(1!=o.length)throw Error("Expecting 1 "+_.tagName+" but finding "+o.length+"!");let i=v(o[0]),r=parseFloat(i),d=z(o[0]),l=new _(d,r);e.setProperty(l);let g=e.dictRef,c=h("number",s.id+"_"+e.dictRef,e=>{e.target instanceof HTMLInputElement&&e5(l,e.target)},i,g);c.style.marginLeft=n,c.style.marginTop="1px",c.style.marginBottom="1px";let u=c.querySelector("input");u.value=i,m(u),u.addEventListener("change",t=>{i=t.target.value,(l=e.getProperty()).value=parseFloat(i),console.log("Set "+e.dictRef+" of "+s.id+" to "+i),m(u),e.dictRef==A.dictRef&&(r<eY&&(eY=r),r>eQ&&(eQ=r),e6())}),e2(t,d,c,s.id+"_"+e.dictRef+"_Select_Units",e.dictRef),a.appendChild(c)}else{let o=i.getElementsByTagName(I.tagName);if(o.length>0){if(1!=o.length)throw Error("Expecting 1 "+I.tagName+" but finding "+o.length+"!");let i=v(o[0]),d=r(i.split(/\s+/)),l=z(o[0]),g=new I(l,d);e.setProperty(g);let c=e.dictRef,u=h("text",s.id+"_"+e.dictRef,e=>{e.target instanceof HTMLInputElement&&e4(g,e.target)},i,c);u.style.marginLeft=n,u.style.marginTop="1px",u.style.marginBottom="1px";let N=u.querySelector("input");N.value=i,m(N),N.addEventListener("change",t=>{i=t.target.value,g=e.getProperty(),d=r(i.split(/\s+/)),g.values=d,console.log("Set "+e.dictRef+" of "+s.id+" to "+i),m(N)}),e2(t,l,u,s.id+"_"+e.dictRef+"_Select_Units",e.dictRef),a.appendChild(u)}else throw Error("Expecting "+_.tagName+" or "+I.tagName)}}function e2(e,t,s,i,a){if(void 0!=e){let n=function(e,t,s,i){let a=t.get("units");if(void 0!=a){let n=N(e,"Units",s);return n.value=a,u(n),n.addEventListener("change",e=>{e.target instanceof HTMLSelectElement&&(t.set("units",e.target.value),console.log("Set "+i+" units to "+e.target.value)),u(n)}),n}}(e,t,i,a);void 0!=n&&s.appendChild(n)}else{let e=t.get("units");if(void 0!=e){let t=document.createElement("label");t.textContent=e,s.appendChild(t)}}}function e4(e,t){let s=t.id,i=t.value.trim();if(""==i){alert("Empty input resetting..."),document.getElementById(s).value=o(e.values," ");return}let a=i.split(/\s+/),n=[],r=!0;if(a.forEach(function(e){d(e)||(r=!1),n.push(parseFloat(e))}),!r){alert("An input is not a number, resetting..."),document.getElementById(s).value=o(e.values," ");return}n.length==e.values.length?console.log("Changed "+e.tagName+' from: "'+i+'" to: "'+o(e.values," ")+'"'):(alert("Expecting "+e.values.length+" values for, but finding "+n.length+" resetting..."),document.getElementById(s).value=o(e.values," "))}function e5(e,t){let s=t.id;if(d(t.value)){let s=parseFloat(t.value);e.value=s,console.log("Value set to "+s)}else alert("Value is not numeric, resetting..."),document.getElementById(s).value=e.value.toString()}function e6(){if(e0.size>0){let e=document.getElementById("reactions_diagram");null!=e&&(e.style.display="block",function(e,t,s,i,a){var o;let r,d,l,g;console.log("drawReactionDiagram");let h="black",c=e.getContext("2d"),m=(c.font=s,(o=c.measureText("Aj")).actualBoundingBoxAscent+o.actualBoundingBoxDescent),u=new Set,N=new Set,p=new Set,f=new Set,x=new Map,v=new Map,E=0,y=Number.MAX_VALUE,w=Number.MIN_VALUE;e0.forEach(function(e,t){let s=e.getTransitionStates(),i=e.getReactantsLabel();if(void 0!=i){u.add(i),N.has(i)&&p.add(i);let t=e.getReactantsEnergy(eJ);y=Math.min(y,t),w=Math.max(w,t),v.set(i,t),!x.has(i)&&(x.set(i,E),E++)}let a=e.getProductsLabel();if(void 0!=a){N.add(a);let t=e.getProductsEnergy(eJ);if(y=Math.min(y,t),w=Math.max(w,t),v.set(a,t),x.has(a)){E--;let e=n(x,a);x.forEach(function(t,s){t>e&&x.set(s,t-1)}),void 0!=s&&(s.forEach(function(e){let s=e.getMolecule().ref;f.add(s),x.set(s,E),t=eJ.get(s)?.getEnergy()??0,y=Math.min(y,t),w=Math.max(w,t),v.set(s,t),E++}),x.set(a,E),E++)}else void 0!=s&&s.forEach(function(e){let s=e.getMolecule().ref;f.add(s),x.set(s,E),t=eJ.get(s)?.getEnergy()??0,y=Math.min(y,t),w=Math.max(w,t),v.set(s,t),E++}),x.set(a,E),E++}});let b=w-y,T=[];x.forEach(function(e,t){T[e]=t});let M=0,S=0,z=new Map,R=new Map,C=new Map,L=new Map,P=new Map,B=new Map;T.forEach(function(t){let i=n(v,t),a=(i-y)*e.height/(b+0)+0;g=Math.max(eN(c,i.toString(),s),eN(c,t,s)),d=M+g+5,l=r=a+4,z.set(t,[M,r]),R.set(t,[d,l]),N.has(t)&&(C.set(t,[M,r]),L.set(t,[d,l])),f.has(t)&&(P.set(t,[M,r]),B.set(t,[d,l])),M=d+10,S=d}),e.width=S;let _=e.height+4*m+8,I=e.height;e.height=_,c.transform(1,0,0,-1,0,_),e0.forEach(function(e,t){let s=e.getTransitionStates(),i=e.getReactantsLabel(),a=e.getProductsLabel(),o=n(R,i),r=n(C,a);s.length>0?s.forEach(function(e){let t=e.getMolecule().ref,s=n(P,t);em(c,h,2,o[0],o[1],s[0],s[1]);let i=n(B,t);em(c,h,2,i[0],i[1],r[0],r[1])}):em(c,h,2,o[0],o[1],r[0],r[1])}),u.forEach(function(e){let t=n(v,e),a=(t-y)*I/(b+0)+0,o=n(z,e)[0],r=a+4;ec(c,"blue",i,o,r,n(R,e)[0],r,s,m,e,t.toString())}),N.forEach(function(e){let t=n(v,e),a=(t-y)*I/(b+0)+0,o=n(C,e)[0],r=a+i,d=n(L,e)[0],l=t.toString();p.has(e)?ec(c,"orange",i,o,r,d,r,s,m,e,l):ec(c,"green",i,o,r,d,r,s,m,e,l)}),f.forEach(function(e){let t=n(v,e),a=(t-y)*I/(b+0)+0,o=n(P,e)[0],r=a+i;ec(c,"red",i,o,r,n(B,e)[0],r,s,m,e,t.toString())})}(e,0,"14px Arial",4,2))}}document.addEventListener("DOMContentLoaded",n=>{i=document.getElementById("xml_title"),a=document.getElementById("xml_text"),window.loadXML=function(){!function n(){let o=document.createElement("input");o.type="file",o.onchange=function(){if(o.files){for(let e=0;e<o.files.length;e++)console.log("inputElement.files["+e+"]="+o.files[e]);let t=o.files[0];if(console.log(t.name),e=t.name,null!=a){let s=new FileReader,n=0,o="";s.onload=function(r){if(null==r.target)throw Error("Event target is null");if(o+=r.target.result,null!=t){if(n<t.size){let e=t.slice(n,n+1048576);s.readAsText(e),n+=1048576}else{var d;d=o=o.trim(),null!=i&&(i.innerHTML=e),null!=a&&(a.innerHTML=d.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\n/g,"<br>").replace(/\t/g,"&nbsp;&nbsp;&nbsp;&nbsp;").replace(/  /g,"&nbsp;&nbsp;")),function(e){let t=e.getElementsByTagName(eH.tagName);if(1!=t.length)throw Error("Multiple "+eH.tagName+" tags found");{let s=t[0].childNodes[0].nodeValue.trim(),i=new eH(z(t[0]),s),a=document.getElementById("title"),n=document.createElement("div");n.style.marginTop="1px",n.style.marginBottom="1px";let o=document.createTextNode("Title: ");n.appendChild(o);let r=document.createElement("input");r.type="text",r.value=s,r.style.fontSize=e$,n.appendChild(r),a.parentNode?.insertBefore(n,a),a.parentNode?.removeChild(a),m(r,0),console.log("inputElement.value="+r.value),r.addEventListener("change",function(){r.value!=s&&(i.value=r.value),m(r,0)});let d=document.getElementById("molecules"),c=function(e){let t=document.createElement("div"),s=R(e,eG.tagName),i=new Set;if(s.childNodes.forEach(function(e){i.add(e.nodeName)}),1!=i.size&&!(2==i.size&&i.has("#text")))throw console.error("moleculeListTagNames:"),i.forEach(e=>console.error(e)),Error("Additional tag names in moleculeList:");if(!i.has(Q.tagName))throw Error('Expecting tags with "'+Q.tagName+'" tagName but there are none!');let a=s.getElementsByTagName(Q.tagName);console.log("Number of molecules="+a.length);for(let e=0;e<a.length;e++){let s,i,n=document.createElement("div"),o=z(a[e]),r=new Set,d=a[e].childNodes;for(let e=0;e<d.length;e++){let t=d[e];r.has(t.nodeName)?"#text"!=t.nodeName&&console.warn("Another ChildNode with nodeName="+t.nodeName):r.add(t.nodeName)}let g=a[e].getElementsByTagName(L.tagName);if(g.length>1)throw Error("Expecting 1 or 0 "+L.tagName+" but finding "+g.length+"!");if(1==g.length){let e=g[0],t=e.getElementsByTagName(C.tagName);if(t.length<2)throw Error("Expecting 2 or more atoms in "+L.tagName+", but finding "+t.length+"!");let i=[];for(let e=0;e<t.length;e++)i.push(new C(z(t[e])));s=new L(z(e),i),r.delete(L.tagName)}else{let t=a[e].getElementsByTagName(C.tagName);if(1==t.length)s=new C(z(t[0]));else if(t.length>1)throw Error("Expecting 1 "+C.tagName+" but finding "+t.length+". Should these be in an "+L.tagName+"?")}r.delete(C.tagName);let c=a[e].getElementsByTagName(B.tagName);if(c.length>1)throw Error("Expecting 1 or 0 "+B.tagName+" but finding "+c.length+"!");if(1==c.length){let e=c[0],t=e.getElementsByTagName(P.tagName),s=[];for(let e=0;e<t.length;e++)s.push(new P(z(t[e])));i=new B(z(e),s),r.delete(B.tagName)}else{let t=a[e].getElementsByTagName(P.tagName);if(1==t.length)i=new P(z(t[0]));else if(t.length>1)throw Error("Expecting 1 "+P.tagName+" but finding "+t.length+". Should these be in a "+B.tagName+"?")}r.delete(P.tagName);let u=new Q(o,s,i);eJ.set(u.id,u);let p=a[e].getElementsByTagName(X.tagName);if(p.length>1)throw Error("Expecting 1 or 0 "+X.tagName+" but finding "+p.length+"!");if(1==p.length){let e=document.createElement("div"),t=u.id+"_"+X.tagName,s=u.id+"_"+X.tagName+"_",i=l(e,X.tagName,t,eq,ej,"1px","1px",s);n.appendChild(i);let a=new X(z(p[0]));u.setProperties(a);let o=p[0].getElementsByTagName(D.tagName);for(let t=0;t<o.length;t++){let s=new D(z(o[t]));a.setProperty(s),u.setProperties(a),s.dictRef==A.dictRef?e1(s,eK,u,o[t],e,eW):s.dictRef==H.dictRef?e1(s,eZ,u,o[t],e,eW):e1(s,void 0,u,o[t],e,eW)}r.delete(X.tagName)}else{let t=a[e].getElementsByTagName(D.tagName);if(1!=t.length)throw Error("Expecting 1 "+D.tagName+" but finding "+t.length+". Should these be in a "+X.tagName+"?");let s=new D(z(t[0]));u.setProperties(s),s.dictRef==A.dictRef?e1(s,eK,u,t[0],n,eW):s.dictRef==H.dictRef?e1(s,eZ,u,t[0],n,eW):e1(s,void 0,u,t[0],n,eW),r.delete(D.tagName)}let E=a[e].getElementsByTagName(U.tagName);if(E.length>0){if(E.length>1)throw Error("Expecting 1 or 0 "+U.tagName+" but finding "+E.length+"!");(function(e,t,s,i,a){let n=s.getElementsByTagName($.tagName);if(n.length>0){let s=document.createElement("div"),o=t.id+"_"+U.tagName,r=t.id+"_"+U.tagName+"_",d=l(s,U.tagName,o,eq,ej,"1px","1px",r);i.appendChild(d);let g=[];for(let e=0;e<n.length;e++){let i=v(n[e]),o=parseFloat(i),r=new $(z(n[e]),o);g.push(r);let d=$.tagName,l=t.id+"_"+U.tagName+"_"+$.tagName+"_"+e,c=h("number",l,e=>{e.target instanceof HTMLInputElement&&e5(r,e.target)},i,d);c.style.marginLeft=a,c.style.marginTop="1px",c.style.marginBottom="1px",s.appendChild(c);let u=c.querySelector("input");u.value=i,m(u),u.addEventListener("change",t=>{i=t.target.value,g[e].setValue(parseFloat(i)),console.log("Set "+l+" to "+i),m(u)});let N=document.createElement("label");N.textContent="cm-1",c.appendChild(N)}e.setDeltaEDowns(g),t.setEnergyTransferModel(e)}})(new U(z(E[0])),u,E[0],n,eW),r.delete(U.tagName)}let y=a[e].getElementsByTagName(q.tagName);if(y.length>0){if(y.length>1)throw Error("Expecting 1 or 0 "+q.tagName+" but finding "+y.length+"!");(function(e,t,s,i){let a=document.createElement("label");a.textContent=q.tagName+": ";let n=document.createElement("div");n.appendChild(a);let o=N(["ClassicalRotors","QMRotors"],"DOSCMethod",t.id+"_Select_DOSCMethod");o.value=e.getXsiType(),o.addEventListener("change",t=>{t.target instanceof HTMLSelectElement&&(e.setXsiType(t.target.value),console.log("Set DOSCMethod to "+t.target.value))}),t.setDOSCMethod(e),n.appendChild(o),n.style.marginLeft=s,n.style.marginTop="1px",n.style.marginBottom="1px",i.appendChild(n)})(new q(z(y[0])),u,ej,n),r.delete(q.tagName)}let w=a[e].getElementsByTagName(Z.tagName);if(w.length>0){let e,t,s;if(1!=w.length)throw Error("Expecting only 1 extra DOSCMethod, but there are "+w.length);console.warn("ExtraDOSCMethod detected: This is not displayed in the GUI - more coding needed!");let i=new Z(z(y[0])),a=document.createElement("div"),o=u.id+"_"+Z.tagName,d=u.id+"_"+Z.tagName+"_",g=l(a,Z.tagName,o,eq,ej,"1px","1px",d);n.appendChild(g);let h=w[0].getElementsByTagName(V.tagName);if(h.length>0){if(1!=h.length)throw Error("Expecting only 1 bondRef, but there are "+h.length);e=new V(z(h[0]),x(f(h[0]))),i.setBondRef(e)}let c=w[0].getElementsByTagName(W.tagName);if(c.length>0){if(1!=c.length)throw Error("Expecting only 1 HinderedRotorPotential, but there are "+c.length);let e=[],s=c[0].getElementsByTagName(j.tagName);for(let t=0;t<s.length;t++)e.push(new j(z(s[t])));t=new W(z(c[0]),e),i.setHinderedRotorPotential(t)}let m=y[0].getElementsByTagName(K.tagName);if(m.length>0){if(1!=m.length)throw Error("Expecting only 1 Periodicity, but there are "+m.length);s=new K(z(m[0]),parseFloat(x(f(m[0])))),i.setPeriodicity(s)}u.setExtraDOSCMethod(i),r.delete(Z.tagName)}r.delete(J.tagName);let b=a[e].getElementsByTagName(J.tagName);if(b.length>0){if(1!=b.length)throw Error("Expecting only 1 reservoirSize, but there are "+b.length);console.warn("ReservoirSize detected: This is not displayed in the GUI - more coding needed!"),u.setReservoirSize(new J(z(b[0]),parseFloat(x(f(b[0])))))}r.delete("#text"),r.size>0&&(console.warn("There are additional unexpected moleculeTagNames:"),r.forEach(e=>console.warn(e)));let T=l(n,u.getLabel(),u.tagName+"_"+u.id+"_button",eU,eV,"1px","1px",u.tagName+"_"+u.id);t.appendChild(T)}return t}(e);d.appendChild(l(c,"Molecules","molecules_button",e$,"0px","1px","1px","moleculesList"));let u=document.getElementById("reactions"),E=function(e){let t=document.createElement("div");t.style.marginTop="1px",t.style.marginBottom="1px";let s=R(e,ek.tagName),i=new Set;if(s.childNodes.forEach(function(e){i.add(e.nodeName)}),1!=i.size&&!(2==i.size&&i.has("#text")))throw console.error("reactionListTagNames:"),i.forEach(e=>console.error(e)),Error("Additional tag names in reactionList:");if(!i.has(eh.tagName))throw Error('Expecting tags with "'+eh.tagName+'" tagName but there are none!');let a=s.getElementsByTagName(eh.tagName);console.log("Number of reactions="+a.length);for(let e=0;e<a.length;e++){let s=document.createElement("div"),i=z(a[e]),n=new Set,o=a[e].childNodes;for(let e=0;e<o.length;e++){let t=o[e];n.has(t.nodeName)?"#text"!=t.nodeName&&console.warn("Another ChildNode with nodeName="+t.nodeName):n.add(t.nodeName)}let r=new eh(i);e0.set(r.id,r);let d=a[e].getElementsByTagName(ee.tagName);if(n.delete(ee.tagName),d.length>0){let e=document.createElement("div"),t=[];for(let s=0;s<d.length;s++){let i=new Y(z(p(d[s],Q.tagName))),a=new ee(z(d[s]),i);t.push(a);let n=document.createElement("div"),o=document.createElement("label");o.textContent=i.ref+" role: ",n.appendChild(o);let r=N(["deficientReactant","excessReactant"],"Role",i.ref+"_Select_Role");r.value=i.role,r.addEventListener("change",e=>{e.target instanceof HTMLSelectElement&&(i.setRole(e.target.value),console.log("Set Role to "+e.target.value))}),n.appendChild(r),n.style.marginLeft=eW,n.style.marginTop="1px",n.style.marginBottom="1px",e.appendChild(n)}r.setReactants(t);let i=l(e,"Reactants",r.id+"_"+ee.tagName,eq,ej,"1px","1px",r.id+"_"+ee.tagName+"_");s.appendChild(i)}let g=a[e].getElementsByTagName(et.tagName);if(n.delete(et.tagName),g.length>0){let e=document.createElement("div"),t=[];for(let s=0;s<g.length;s++){let i=new Y(z(p(g[s],Q.tagName))),a=new et(z(g[s]),i);t.push(a);let n=document.createElement("div"),o=document.createElement("label");o.textContent=i.ref+" role: ",n.appendChild(o);let r=N(["modelled","sink"],"Role",i.ref+"_Select_Role");r.value=i.role,r.addEventListener("change",e=>{e.target instanceof HTMLSelectElement&&(i.setRole(e.target.value),console.log("Set Role to "+e.target.value))}),n.appendChild(r),n.style.marginLeft=eW,n.style.marginTop="1px",n.style.marginBottom="1px",e.appendChild(n)}r.setProducts(t);let i=l(e,"Products",r.id+"_"+et.tagName,eq,ej,"1px","1px",r.id+"_"+et.tagName+"_");s.appendChild(i)}let c=a[e].getElementsByTagName(el.tagName);if(c.length>0){if(c.length>1)throw Error("Expecting 1 "+el.tagName+" but finding "+c.length+"!");let e=new el(z(c[0]));r.setTunneling(e);let t=document.createElement("div"),i=document.createElement("label");i.textContent=el.tagName+": ",t.appendChild(i);let a=N(["Eckart","WKB"],"Tunneling",r.id+"_Select_Tunneling");a.value=e.getName(),a.addEventListener("change",t=>{t.target instanceof HTMLSelectElement&&(e.setName(t.target.value),console.log("Set Tunneling to "+t.target.value))}),t.appendChild(a),t.style.marginLeft=ej,t.style.marginTop="1px",t.style.marginBottom="1px",s.appendChild(t)}let u=a[e].getElementsByTagName(es.tagName);if(u.length>0){let e=document.createElement("div"),t=[];for(let s=0;s<u.length;s++){let i=new Y(z(p(u[s],Q.tagName))),a=new es(z(u[s]),i);t.push(a);let n=document.createElement("label");n.textContent=i.ref+" role: transitionState",n.style.marginLeft=eW,n.style.marginTop="1px",n.style.marginBottom="1px",e.appendChild(n)}r.setTransitionStates(t);let i=l(e,"Transition States",r.id+"_"+es.tagName,eq,ej,"1px","1px",r.id+"_"+es.tagName+"_");s.appendChild(i)}let E=a[e].getElementsByTagName(er.tagName);if(E.length>0){if(E.length>1)throw Error("Expecting 1 "+er.tagName+" but finding "+E.length+"!");{let e,t=document.createElement("div"),i=z(E[0]),a=i.get("name");if(void 0==a||a==ed.xsiType2){let a=i.get("xsi:type");if(e=new ed(i),a==ed.xsiType||a==ed.xsiType2){let i=E[0].getElementsByTagName(ei.tagName);if(null!=i&&null!=i[0]){let s=v(i[0]),a=parseFloat(s),n=z(i[0]),o=new ei(n,a);e.setPreExponential(o);let d=ei.tagName,l=r.id+"_"+ed.tagName+"_"+ei.tagName,g=h("number",l,e=>{e.target instanceof HTMLInputElement&&e5(o,e.target)},s,d);g.style.marginLeft=eW,g.style.marginTop="1px",g.style.marginBottom="1px",t.appendChild(g);let c=g.querySelector("input");c.value=s,m(c),c.addEventListener("change",e=>{s=e.target.value,o.value=parseFloat(s),console.log("Set "+l+" to "+s),m(c)}),e2(void 0,n,g,r.id+"_"+ed.xsiType+"_"+ei.tagName,ei.tagName),t.appendChild(g)}let a=E[0].getElementsByTagName(ea.tagName);if(null!=a&&null!=a[0]){let s=v(a[0]),i=parseFloat(s),n=z(a[0]),o=new ea(n,i);e.setActivationEnergy(o);let d=ea.tagName,l=r.id+"_"+ed.tagName+"_"+ea.tagName,g=h("number",l,e=>{e.target instanceof HTMLInputElement&&e5(o,e.target)},s,d);g.style.marginLeft=eW,g.style.marginTop="1px",g.style.marginBottom="1px";let c=g.querySelector("input");c.value=s,m(c),c.addEventListener("change",e=>{s=e.target.value,o.value=parseFloat(s),console.log("Set "+l+" to "+s),m(c)}),e2(void 0,n,g,r.id+"_"+ed.xsiType+"_"+ea.tagName,ea.tagName),t.appendChild(g)}let n=E[0].getElementsByTagName(en.tagName);if(null!=n&&null!=n[0]){let s=v(n[0]),i=parseFloat(s),a=z(n[0]),o=new en(a,i);e.setTInfinity(o);let d=en.tagName,l=r.id+"_"+ed.tagName+"_"+en.tagName,g=h("number",l,e=>{e.target instanceof HTMLInputElement&&e5(o,e.target)},s,d);g.style.marginLeft=eW,g.style.marginTop="1px",g.style.marginBottom="1px";let c=g.querySelector("input");c.value=s,m(c),c.addEventListener("change",e=>{s=e.target.value,o.value=parseFloat(s),console.log("Set "+l+" to "+s),m(c)}),e2(void 0,a,g,r.id+"_"+ed.xsiType+"_"+en.tagName,en.tagName),t.appendChild(g)}let o=E[0].getElementsByTagName(eo.tagName);if(null!=o&&null!=o[0]){let s=v(o[0]),i=parseFloat(s),a=z(o[0]),n=new eo(a,i);e.setNInfinity(n);let d=eo.tagName,l=r.id+"_"+ed.tagName+"_"+eo.tagName,g=h("number",l,e=>{e.target instanceof HTMLInputElement&&e5(n,e.target)},s,d);g.style.marginLeft=eW,g.style.marginTop="1px",g.style.marginBottom="1px",t.appendChild(g);let c=g.querySelector("input");c.value=s,m(c),c.addEventListener("change",e=>{s=e.target.value,n.value=parseFloat(s),console.log("Set "+l+" to "+s),m(c)}),e2(void 0,a,g,r.id+"_"+ed.xsiType+"_"+eo.tagName,eo.tagName),t.appendChild(g)}let d=r.id+"_"+er.tagName,g=r.id+"_"+er.tagName+"_",c=l(t,er.tagName,d,eq,ej,"1px","1px",g);s.appendChild(c)}else throw Error("Unexpected xsi:type="+a)}else{e=new er(i);let a=document.createElement("label");a.textContent=er.tagName+": "+i.get("name"),a.style.marginLeft=ej,a.style.marginTop="1px",a.style.marginBottom="1px",t.appendChild(a),s.appendChild(t)}r.setMCRCMethod(e)}}let y=a[e].getElementsByTagName(eg.tagName);if(y.length>0){let e;if(y.length>1)throw Error("Expecting 1 "+eg.tagName+" but finding "+y.length+"!");let t=parseFloat(x(f(y[0])));e=new eg(z(y[0]),t),r.setExcessReactantConc(e)}let w=l(s,r.id+"("+r.getLabel()+")",r.tagName+"_"+r.id+"_button",eU,eV,"1px","1px",r.tagName+"_"+r.id);t.appendChild(w)}return t}(e);u.appendChild(l(E,"Reactions","reactions_button",e$,"0px","1px","1px","reactionsList")),e6(),function(){for(var e=document.getElementsByClassName("collapsible"),t=0;t<e.length;t++)e[t].removeEventListener("click",g),e[t].addEventListener("click",g)}()}}(new DOMParser().parseFromString(o,"text/xml"))}}};let r=t.slice(n,n+1048576);s.readAsText(r),n+=1048576}}},o.click(),null!=(t=document.getElementById("load_button"))&&t.addEventListener("click",n),null!=(s=document.getElementById("saveButton"))&&(s.style.display="inline")}()}}),window.setNumberArrayNode=e4,window.set=e5,window.saveXML=function(){console.log("saveXML");let t="  ".repeat(2),s="";eJ.forEach(function(e,i){s+=e.toXML("  ",t)}),s=S(s,"moleculeList",void 0,"  ",!0);let i="";e0.forEach(function(e,s){i+=e.toXML("  ",t)}),i=S(i,"reactionList",void 0,"  ",!0);let a=new Blob([s,i],{type:"text/plain"}),n=URL.createObjectURL(a),o=document.createElement("a");o.href=n,o.download=e,document.body.appendChild(o),o.click(),document.body.removeChild(o)};
//# sourceMappingURL=index.04e31145.js.map
