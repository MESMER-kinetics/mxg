let e,t,i,s,n,a,o,d,r;function l(e,t){if(!e.has(t))throw Error(`Key ${t} not found in map`);return e.get(t)}function g(e,t){return void 0==t&&(t=", "),e.map(e=>null==e?"null":e.toString()).join(t)}function h(e){let t=[];for(let i=0;i<e.length;i++)m(e[i])&&t.push(parseFloat(e[i]));return t}function m(e){return""!==e&&!isNaN(Number(e))}function c(e,t,i,s,n,a,o,d,r){let l=document.createElement("div");void 0!=d&&(l.id=d),void 0!=r&&(l.className=r);let g=document.createElement("button");return void 0!=i&&(g.id=i),g.className="collapsible",g.innerText=t+" ▼",g.addEventListener("click",function(){g.innerText.includes("▼")?g.innerText=t+" ▲":g.innerText=t+" ▼"}),void 0!=s&&(g.style.fontSize=s),void 0!=n&&(g.style.marginLeft=n),void 0!=a&&(g.style.marginTop=a),void 0!=o&&(g.style.marginBottom=o),l.appendChild(g),l.appendChild(e),l}function u(){this.classList.toggle("active");let e=this.nextElementSibling;"block"===e.style.display?e.style.display="none":e.style.display="block"}function p(e,t,i,s,n){let a=document.createElement("input");a.type=e,a.id=t,a.onchange=i,a.value=s;let o=document.createElement("label");o.htmlFor=t,n?o.textContent=n+": ":o.textContent="";let d=document.createElement("div");return d.appendChild(o),d.appendChild(a),d}function N(e,t){let i="<"+t;if(e)for(let[t,s]of e)i+=" "+t+'="'+s+'"';return i+" />"}function x(e,t){void 0==t&&(t=4),e.style.width=e.value.length+t+"ch"}function f(e,t){void 0==t&&(t=6),e.style.width=e.value.length+t+"ch"}function v(e,t,i){let s=document.createElement("select");return e.forEach(e=>{s.name=t,s.id=i;let n=document.createElement("option");n.value=e,n.text=e,s.appendChild(n)}),s}function E(e,t){let i=e.getElementsByTagName(t)[0];if(null==i)throw Error(t+" element not found");return i}function y(e){let t=e.childNodes;if(null==t)throw Error("Element has no childNodes");return t[0]}function T(e){let t=e.nodeValue;if(null==t)throw Error("nodeValue is null");return t}function w(e){let t=y(e);return t?T(t).trim():""}class b{constructor(e){this.tagName=e}toXML(e){let t=N(void 0,this.tagName);return e?"\n"+e+t:t}}class C extends b{constructor(e,t){super(t),this.attributes=e}toString(){let e=this.tagName+"(";return this.attributes&&this.attributes.forEach((t,i)=>{e+=`${i}(${t}), `}),e}toXML(e){let t="";if(void 0!=e&&(t+="\n"+e),t+="<"+this.tagName,this.attributes)for(let[e,i]of this.attributes)t+=" "+e+'="'+i.toString()+'"';return t+" />"}}class S extends C{constructor(e,t,i){super(e,t),this.value=i}toString(){return super.toString()+`, ${this.value.toString()})`}toXML(e){return P(this.value.trim(),this.tagName,this.attributes,e,!1)}}class M extends C{constructor(e,t,i){super(e,t),this.value=i}toString(){return super.toString()+`, ${this.value.toString()})`}toXML(e){return P(this.value.toString().trim(),this.tagName,this.attributes,e,!1)}}class z extends C{constructor(e,t,i,s){super(e,t),this.delimiter=",",this.values=i,void 0!=s&&(this.delimiter=s)}toString(){return super.toString()+`, ${this.values.toString()})`}setDelimiter(e){this.delimiter=e}toXML(e){return P(this.values.toString().replaceAll(",",this.delimiter),this.tagName,this.attributes,e,!1)}}class L extends C{constructor(e,t){super(e,t),this.nodes=new Map}addNode(e){return this.nodes.set(this.nodes.size,e),this.nodes.size-1}toString(){let e=super.toString();return this.nodes.forEach((t,i)=>{e+=`, ${t.toString()}`}),e+")"}toXML(e,t){let i;void 0!=e&&void 0!=t&&(i=t+e);let s="";if(this.nodes.size>0)return this.nodes.forEach(t=>{t instanceof L?s+=t.toXML(e,i):s+=t.toXML(i)}),P(s,this.tagName,this.attributes,t,!0);{let e=N(this.attributes,this.tagName);return void 0!=t?"\n"+t+e:e}}}function P(e,t,i,s,n){let a;return function(e,t,i){let s="";if(void 0!=i&&(s+="\n"+i),s+="<"+e,t)for(let[e,i]of t)s+=" "+e+'="'+i.toString()+'"';return s+">"}(t,i,s)+e+(a="",n&&void 0!=s&&(a+="\n"+s),a+"</"+t+">")}function R(e){let t=e.getAttributeNames(),i=new Map;return t.forEach(function(t){let s=e.getAttribute(t);null!=s&&i.set(t,s)}),i}function B(e,t){let i=e.getElementsByTagName(t);if(1!=i.length)throw Error("Expecting 1 "+t+" but finding "+i.length);return i[0]}class _ extends C{static{this.tagName="atom"}constructor(e){super(e,_.tagName);let t=e.get("elementType");if(void 0==t)throw Error("elementType is undefined");this.elementType=t;let i=e.get("id");void 0==i&&(i=this.elementType),this.id=i}}class I extends L{static{this.tagName="atomArray"}constructor(e,t){super(e,I.tagName),t.forEach(e=>{this.nodes.set(this.nodes.size,e)})}}class D extends C{static{this.tagName="bond"}constructor(e){super(e,D.tagName);let t=e.get("atomRefs2");if(void 0==t)throw Error("atomRefs2 is undefined");this.atomRefs2=t}}class k extends L{static{this.tagName="bondArray"}constructor(e,t){super(e,k.tagName),t.forEach(e=>{this.nodes.set(this.nodes.size,e)})}}class O extends M{static{this.tagName="scalar"}constructor(e,t){super(e,O.tagName,t)}updateUnits(e){if(e&&void 0!=this.attributes){let t=this.attributes.get("units");void 0!=t&&t!=e&&this.attributes.set("units",e)}}}class G extends z{static{this.tagName="array"}constructor(e,t,i){super(e,G.tagName,t,i)}updateUnits(e){if(e&&void 0!=this.attributes){let t=this.attributes.get("units");void 0!=t&&t!=e&&this.attributes.set("units",e)}}}class H extends L{static{this.tagName="property"}constructor(e,t){super(e,H.tagName);let i=e.get("dictRef");if(void 0==i)throw Error("dictRef is undefined");this.dictRef=i,t&&this.nodes.set(0,t)}getProperty(){return this.nodes.get(0)}setProperty(e){this.nodes.set(0,e)}}class A extends H{static{this.dictRef="me:ZPE"}constructor(e,t){super(e,t)}setUnits(e){this.getProperty().updateUnits(e)}}class F extends H{static{this.dictRef="me:frequenciesScaleFactor"}constructor(e,t){super(e,t)}}class $ extends H{static{this.dictRef="me:vibFreqs"}constructor(e,t){super(e,t)}}class U extends H{static{this.dictRef="me:rotConsts"}constructor(e,t){super(e,t)}}class X extends H{static{this.dictRef="me:MW"}constructor(e,t){super(e,t)}}class q extends H{static{this.dictRef="me:imFreqs"}constructor(e,t){super(e,t)}}class V extends L{static{this.tagName="propertyList"}constructor(e,t){super(e,V.tagName),this.index=new Map,t&&t.forEach(e=>{this.nodes.set(this.nodes.size,e),this.index.set(e.dictRef,this.nodes.size-1)})}getProperty(e){let t=this.index.get(e);if(void 0!=t)return this.nodes.get(t);throw Error("Property "+e+" does not exist")}setProperty(e){let t=this.index.get(e.dictRef);void 0==t?(this.nodes.set(this.nodes.size,e),this.index.set(e.dictRef,this.nodes.size-1)):(console.log("Property "+e.dictRef+" already exists, updating..."),this.nodes.set(t,e))}}class j extends M{static{this.tagName="me:deltaEDown"}constructor(e,t){super(e,j.tagName,t)}getBathGas(){if(void 0!=this.attributes)return this.attributes.get("bathGas")}setBathGas(e){void 0!=this.attributes&&this.attributes.set("bathGas",e)}getUnits(){if(void 0!=this.attributes)return this.attributes.get("units")}getLower(){if(void 0!=this.attributes)return parseFloat(l(this.attributes,"lower"))}setLower(e){void 0!=this.attributes&&this.attributes.set("lower",e.toString())}getUpper(){if(void 0!=this.attributes)return parseFloat(l(this.attributes,"upper"))}setUpper(e){void 0!=this.attributes&&this.attributes.set("upper",e.toString())}getStepsize(){if(void 0!=this.attributes)return parseFloat(l(this.attributes,"stepsize"))}setStepsize(e){void 0!=this.attributes&&this.attributes.set("stepsize",e.toString())}setValue(e){this.value=e}}class W extends L{static{this.tagName="me:energyTransferModel"}constructor(e,t){super(e,W.tagName),void 0!=t&&t.forEach(e=>{this.nodes.set(this.nodes.size,e)})}getDeltaEDowns(){let e=[];return this.nodes.forEach(t=>{t instanceof j&&e.push(t)}),e}setDeltaEDowns(e){this.nodes.clear(),e.forEach(e=>{this.nodes.set(this.nodes.size,e)})}getDeltaEDown(e){if(e<0||e>=this.nodes.size)throw Error("index out of range");return this.nodes.get(e)}setDeltaEDown(e,t){this.nodes.set(e,t)}addDeltaEDown(e){return this.nodes.set(this.nodes.size,e),this.nodes.size-1}}class K extends C{static{this.tagName="me:DOSCMethod"}constructor(e){if(super(e,K.tagName),void 0==e.get("xsi:type"))throw Error("xsi:type is undefined")}getXsiType(){if(void 0==this.attributes)throw Error("attributes is undefined");return this.attributes.get("xsi:type")}setXsiType(e){if(void 0==this.attributes)throw Error("attributes is undefined");this.attributes.set("xsi:type",e)}}class Z extends S{static{this.tagName="me:bondRef"}constructor(e,t){super(e,Z.tagName,t)}}class J extends C{static{this.tagName="me:PotentialPoint"}constructor(e){super(e,J.tagName)}}class Q extends L{static{this.tagName="me:HinderedRotorPotential"}constructor(e,t){super(e,Q.tagName),t.forEach(e=>{this.nodes.set(this.nodes.size,e)})}getPotentialPoint(e){return this.nodes.get(e)}setPotentialPoints(e,t){this.nodes.set(e,t)}addPotentialPoint(e){return this.nodes.set(this.nodes.size,e),this.nodes.size-1}}class Y extends M{static{this.tagName="me:periodicity"}constructor(e,t){super(e,Y.tagName,t)}}class ee extends L{static{this.tagName="me:ExtraDOSCMethod"}constructor(e,t,i,s){super(e,ee.tagName),this.index=new Map,t&&(this.nodes.set(this.nodes.size,t),this.index.set(Z.tagName,this.nodes.size-1)),i&&(this.nodes.set(this.nodes.size,i),this.index.set(Q.tagName,this.nodes.size-1)),s&&(this.nodes.set(this.nodes.size,s),this.index.set(Y.tagName,this.nodes.size-1))}getBondRef(){let e=this.index.get(Z.tagName);if(void 0!=e)return this.nodes.get(e)}setBondRef(e){let t=this.index.get(Z.tagName);void 0!=t?this.nodes.set(t,e):(this.nodes.set(this.nodes.size,e),this.index.set(Z.tagName,this.nodes.size-1))}getHinderedRotorPotential(){let e=this.index.get(Q.tagName);if(void 0!=e)return this.nodes.get(e)}setHinderedRotorPotential(e){let t=this.index.get(Q.tagName);void 0!=t?this.nodes.set(t,e):(this.nodes.set(this.nodes.size,e),this.index.set(Q.tagName,this.nodes.size-1))}getPeriodicity(){let e=this.index.get(Y.tagName);if(void 0!=e)return this.nodes.get(e)}setPeriodicity(e){let t=this.index.get(Y.tagName);void 0!=t?this.nodes.set(t,e):(this.nodes.set(this.nodes.size,e),this.index.set(Y.tagName,this.nodes.size-1))}}class et extends M{static{this.tagName="me:reservoirSize"}constructor(e,t){super(e,et.tagName,t)}}class ei extends L{static{this.tagName="molecule"}constructor(e,t,i,s,n,a,o,d){super(e,ei.tagName),this.index=new Map;let r=e.get("id");if(void 0==r)throw Error("id is undefined");this.id=r;let l=0;t&&(this.nodes.set(l,t),t instanceof _?this.index.set(_.tagName,l):this.index.set(I.tagName,l),l++),i&&(this.nodes.set(l,i),this.index.set(k.tagName,l),l++),s&&(this.nodes.set(l,s),this.index.set(V.tagName,l),l++),n&&(this.nodes.set(l,n),this.index.set(W.tagName,l),l++),a&&(this.nodes.set(l,a),this.index.set(K.tagName,l)),o&&(this.nodes.set(l,o),this.index.set(ee.tagName,l)),d&&(this.nodes.set(l,d),this.index.set(et.tagName,l))}getDescription(){if(void 0!=this.attributes)return this.attributes.get("description")}setDescription(e){void 0!=this.attributes&&this.attributes.set("description",e)}getActive(){if(void 0!=this.attributes){let e=this.attributes.get("active");if(void 0!=e)return"true"==e}}setActive(e){void 0!=this.attributes&&this.attributes.set("active",e.toString())}getLabel(){let e=this.id,t=this.getDescription();return void 0!=t&&(e+=" ("+t+")"),this.getActive()&&(e+=" (active)"),e}getAttributesAsString(){return void 0==this.attributes?"":Array.from(this.attributes,([e,t])=>`${e}="${t}"`).join(", ")}getProperties(){let e=this.index.get(V.tagName);if(void 0!=e||void 0!=(e=this.index.get(H.tagName)))return this.nodes.get(e)}setProperties(e){let t=this.index.get(V.tagName);void 0==t?(this.index.set(V.tagName,this.nodes.size),this.addNode(e)):this.nodes.set(t,e)}getProperty(e){let t=this.getProperties();if(void 0!=t)return t instanceof V?t.getProperty(e):t}setProperty(e){let t=this.getProperties();void 0!=t?t instanceof V?t.setProperty(e):this.setProperties(t):this.setProperties(e)}getAtoms(){let e=this.index.get(_.tagName);if(void 0!=e||void 0!=(e=this.index.get(I.tagName)))return this.nodes.get(e)}getBonds(){let e=this.index.get(k.tagName);if(void 0!=e)return this.nodes.get(e)}getEnergyTransferModel(){let e=this.index.get(W.tagName);if(void 0!=e)return this.nodes.get(e)}setEnergyTransferModel(e){let t=this.index.get(W.tagName);void 0==t?(this.index.set(W.tagName,this.nodes.size),this.addNode(e)):this.nodes.set(t,e)}getDOSCMethod(){let e=this.index.get(K.tagName);if(void 0!=e)return this.nodes.get(e)}setDOSCMethod(e){let t=this.index.get(K.tagName);void 0==t?(this.index.set(K.tagName,this.nodes.size),this.addNode(e)):this.nodes.set(t,e)}getExtraDOSCMethod(){let e=this.index.get(ee.tagName);if(void 0!=e)return this.nodes.get(e)}setExtraDOSCMethod(e){let t=this.index.get(ee.tagName);void 0==t?(this.index.set(ee.tagName,this.nodes.size),this.addNode(e)):this.nodes.set(t,e)}getReservoirSize(){let e=this.index.get(et.tagName);if(void 0!=e)return this.nodes.get(e)}setReservoirSize(e){let t=this.index.get(et.tagName);void 0==t?(this.index.set(et.tagName,this.nodes.size),this.addNode(e)):this.nodes.set(t,e)}getEnergy(){let e=this.getProperty(A.dictRef);if(void 0==e)throw console.log(this.toString()),Error("ZPE property not found");return e.getProperty().value}}class es extends C{static{this.tagName="molecule"}constructor(e){super(e,es.tagName),this.ref=e.get("ref"),this.role=e.get("role")}setRole(e){this.role=e}}class en extends L{static{this.tagName="reactant"}constructor(e,t){super(e,en.tagName),this.addNode(t)}getMolecule(){return this.nodes.get(0)}}class ea extends L{static{this.tagName="product"}constructor(e,t){super(e,ea.tagName),this.addNode(t)}getMolecule(){return this.nodes.get(0)}}class eo extends L{static{this.tagName="me:transitionState"}constructor(e,t){super(e,eo.tagName),this.addNode(t)}getMolecule(){return this.nodes.get(0)}}class ed extends M{static{this.tagName="me:preExponential"}constructor(e,t){super(e,ed.tagName,t)}}class er extends M{static{this.tagName="me:activationEnergy"}constructor(e,t){super(e,er.tagName,t)}}class el extends M{static{this.tagName="me:TInfinity"}constructor(e,t){super(e,el.tagName,t)}}class eg extends M{static{this.tagName="me:nInfinity"}constructor(e,t){super(e,eg.tagName,t)}}class eh extends L{static{this.tagName="me:MCRCMethod"}constructor(e){super(e,eh.tagName)}}class em extends eh{static{this.xsiType="me:MesmerILT"}static{this.xsiType2="MesmerILT"}constructor(e,t,i,s,n){super(e),this.index=new Map,void 0!=t&&(this.index.set(ed.tagName,this.index.size),this.addNode(t)),void 0!=i&&(this.index.set(er.tagName,this.index.size),this.addNode(i)),void 0!=s&&(this.index.set(el.tagName,this.index.size),this.addNode(s)),void 0!=n&&(this.index.set(eg.tagName,this.index.size),this.addNode(n))}getPreExponential(){let e=this.index.get(ed.tagName);if(void 0!=e)return this.nodes.get(e)}setPreExponential(e){let t=this.index.get(ed.tagName);void 0==t?(this.index.set(ed.tagName,this.nodes.size),this.addNode(e)):this.nodes.set(t,e)}getActivationEnergy(){let e=this.index.get(er.tagName);if(void 0!=e)return this.nodes.get(e)}setActivationEnergy(e){let t=this.index.get(er.tagName);void 0==t?(this.index.set(er.tagName,this.nodes.size),this.addNode(e)):this.nodes.set(t,e)}getTInfinity(){let e=this.index.get(el.tagName);if(void 0!=e)return this.nodes.get(e)}setTInfinity(e){let t=this.index.get(el.tagName);void 0==t?(this.index.set(el.tagName,this.nodes.size),this.addNode(e)):this.nodes.set(t,e)}getNInfinity(){let e=this.index.get(eg.tagName);if(void 0!=e)return this.nodes.get(e)}setNInfinity(e){let t=this.index.get(eg.tagName);void 0==t?(this.index.set(eg.tagName,this.nodes.size),this.addNode(e)):this.nodes.set(t,e)}}class ec extends C{static{this.tagName="me:tunneling"}constructor(e){super(e,ec.tagName)}getName(){return void 0!=this.attributes?this.attributes.get("name"):""}setName(e){void 0!=this.attributes&&this.attributes.set("name",e)}}class eu extends M{static{this.tagName="me:excessReactantConc"}constructor(e,t){super(e,eu.tagName,t)}}class ep extends L{static{this.tagName="reaction"}constructor(e,t,i,s,n,a,o){super(e,ep.tagName),this.index=new Map,this.reactantsIndex=new Map,this.productsIndex=new Map,this.transitionStatesIndex=new Map;let d=e.get("id");if(void 0==d)throw Error("Reaction id is undefined");this.id=d,void 0!=t&&(t.forEach(e=>{this.reactantsIndex.set(e.getMolecule().ref,this.nodes.size),this.addNode(e)}),this.index.set(en.tagName,this.reactantsIndex)),void 0!=i&&(i.forEach(e=>{this.productsIndex.set(e.getMolecule().ref,this.nodes.size),this.addNode(e)}),this.index.set(ea.tagName,this.productsIndex)),void 0!=s&&(this.index.set(ec.tagName,this.nodes.size),this.addNode(s)),void 0!=n&&(n.forEach(e=>{this.transitionStatesIndex.set(e.getMolecule().ref,this.nodes.size),this.addNode(e)}),this.index.set(eo.tagName,this.transitionStatesIndex)),void 0!=a&&(this.index.set(eh.tagName,this.nodes.size),this.addNode(a)),void 0!=o&&(this.index.set(eu.tagName,this.nodes.size),this.addNode(o))}addToIndex(e,t){let i=this.index.get(e);if(void 0==i)this.index.set(e,this.nodes.size);else if(i instanceof Map)i.set(t.tagName,this.nodes.size);else{let s=new Map;s.set(this.nodes.get(i).ref,i),s.set(t.tagName,this.nodes.size),this.index.set(e,s)}}getReactants(){let e=this.index.get(en.tagName);return void 0==e?[]:e instanceof Map?Array.from(e.values()).map(e=>this.nodes.get(e)):[this.nodes.get(e)]}setReactants(e){e.forEach(e=>{this.reactantsIndex.set(e.getMolecule().ref,this.nodes.size),this.addNode(e)}),this.index.set(en.tagName,this.reactantsIndex)}getReactant(e){let t=this.reactantsIndex.get(e);if(void 0==t)throw Error(`Reactant with ref ${e} not found`);return this.nodes.get(t)}addReactant(e){this.reactantsIndex.set(e.getMolecule().ref,this.nodes.size),this.addNode(e)}removeReactant(e){let t=this.reactantsIndex.get(e);if(void 0==t)throw Error(`Reactant with ref ${e} not found`);this.nodes.delete(t),this.reactantsIndex.delete(e)}getProducts(){let e=this.index.get(ea.tagName);return void 0==e?[]:e instanceof Map?Array.from(e.values()).map(e=>this.nodes.get(e)):[this.nodes.get(e)]}setProducts(e){e.forEach(e=>{this.productsIndex.set(e.getMolecule().ref,this.nodes.size),this.addNode(e)}),this.index.set(ea.tagName,this.productsIndex)}getProduct(e){let t=this.productsIndex.get(e);if(void 0==t)throw Error(`Product with ref ${e} not found`);return this.nodes.get(t)}addProduct(e){this.productsIndex.set(e.getMolecule().ref,this.nodes.size),this.addNode(e)}removeProduct(e){let t=this.productsIndex.get(e);if(void 0==t)throw Error(`Product with ref ${e} not found`);this.nodes.delete(t),this.productsIndex.delete(e)}getTunneling(){let e=this.index.get(ec.tagName);if(void 0!=e)return this.nodes.get(e)}setTunneling(e){let t=this.index.get(ec.tagName);if(void 0==t)this.index.set(ec.tagName,this.nodes.size),this.addNode(e);else{if(t instanceof Map)throw Error("Tunneling is a map and it is assumed there would be only 1!");this.nodes.set(t,e)}}getTransitionStates(){let e=this.index.get(eo.tagName);return void 0==e?[]:e instanceof Map?Array.from(e.values()).map(e=>this.nodes.get(e)):[this.nodes.get(e)]}setTransitionStates(e){e.forEach(e=>{this.transitionStatesIndex.set(e.getMolecule().ref,this.nodes.size),this.addNode(e)}),this.index.set(eo.tagName,this.transitionStatesIndex)}getTransitionState(e){let t=this.transitionStatesIndex.get(e);if(void 0==t)throw Error(`Transition state with ref ${e} not found`);return this.nodes.get(t)}addTransitionState(e){this.transitionStatesIndex.set(e.getMolecule().ref,this.nodes.size),this.addNode(e)}removeTransitionState(e){let t=this.transitionStatesIndex.get(e);if(void 0==t)throw Error(`Transition State with ref ${e} not found`);this.nodes.delete(t),this.transitionStatesIndex.delete(e)}getMCRCMethod(){let e=this.index.get(eh.tagName);if(void 0!=e)return this.nodes.get(e)}setMCRCMethod(e){let t=this.index.get(eh.tagName);if(void 0==t)this.index.set(eh.tagName,this.nodes.size),this.addNode(e);else{if(t instanceof Map)throw Error("MCRCMethod is a map and it is assumed there would be only 1!");this.nodes.set(t,e)}}getExcessReactantConc(){let e=this.index.get(eu.tagName);if(void 0!=e)return this.nodes.get(e)}setExcessReactantConc(e){let t=this.index.get(eu.tagName);if(void 0==t)this.index.set(eu.tagName,this.nodes.size),this.addNode(e);else{if(t instanceof Map)throw Error("ExcessReactantConc is a map and it is assumed there would be only 1!");this.nodes.set(t,e)}}getReactantsLabel(){return this.getReactants().map(e=>e.getMolecule().ref).join(" + ")}getProductsLabel(){return this.getProducts().map(e=>e.getMolecule().ref).join(" + ")}getLabel(){return this.getReactantsLabel()+" -> "+this.getProductsLabel()}getReactantsEnergy(e){return Array.from(this.getReactants()).map(t=>{let i=e.get(t.getMolecule().ref);if(void 0==i)throw Error(`Molecule with ref ${t.getMolecule().ref} not found`);return i.getEnergy()}).reduce((e,t)=>e+t,0)}getProductsEnergy(e){return Array.from(this.getProducts()).map(t=>{let i=e.get(t.getMolecule().ref);if(void 0==i)throw Error(`Molecule with ref ${t.getMolecule().ref} not found`);return i.getEnergy()}).reduce((e,t)=>e+t,0)}get(e,t){if(this.index.has(e)){let i=this.index.get(e);if(void 0!=i){if(!(i instanceof Map))return this.nodes.get(i);{let e=i.get(t);if(void 0!=e)return this.nodes.get(e)}}}}}function eN(e,t,i,s,n,a,o,d,r,l,g){let h=s+(a-s)/2;ef(e,g,d,t,h-ev(e,g,d)/2,o+r),ef(e,l,d,t,h-ev(e,l,d)/2,o+3*r),ex(e,t,i,s,n,a,o)}function ex(e,t,i,s,n,a,o){e.beginPath(),e.strokeStyle=t,e.lineWidth=i,e.moveTo(s,n),e.lineTo(a,o),e.stroke()}function ef(e,t,i,s,n,a){e.save(),e.translate(n,a),e.scale(1,-1),e.font=i,e.fillStyle=s,e.fillText(t,0,0),e.restore()}function ev(e,t,i){return e.font=i,e.measureText(t).width}class eE extends S{static{this.tagName="me:bathGas"}constructor(e,t){super(e,eE.tagName,t)}}class ey extends M{static{this.tagName="me:experimentRate"}constructor(e,t){super(e,ey.tagName,t)}getError(){if(void 0!=this.attributes){let e=this.attributes.get("error");if(e)return parseFloat(e)}}setError(e){void 0!=this.attributes&&this.attributes.set("error",e.toString())}}class eT extends L{static{this.tagName="me:PTpair"}constructor(e,t,i){super(e,eT.tagName),this.index=new Map,t&&(this.index.set(eE.tagName,this.nodes.size),this.addNode(t)),i&&(this.index.set(ey.tagName,this.nodes.size),this.addNode(i))}getP(){if(void 0!=this.attributes){let e=this.attributes.get("P");if(e)return parseFloat(e);throw Error("P is undefined")}return NaN}setP(e){void 0!=this.attributes&&this.attributes.set("P",e.toString())}getT(){if(void 0!=this.attributes){let e=this.attributes.get("T");if(e)return parseFloat(e);throw Error("T is undefined")}return NaN}setT(e){void 0!=this.attributes&&this.attributes.set("T",e.toString())}getBathGas(){let e=this.index.get(eE.tagName);return e?this.nodes.get(e):void 0}setBathGas(e){let t=this.index.get(eE.tagName);t?this.nodes.set(t,e):(this.index.set(eE.tagName,this.nodes.size),this.addNode(e))}getExperimentRate(){let e=this.index.get(ey.tagName);return e?this.nodes.get(e):void 0}setExperimentRate(e){let t=this.index.get(ey.tagName);t?this.nodes.set(t,e):(this.index.set(ey.tagName,this.nodes.size),this.addNode(e))}}class ew extends L{static{this.tagName="me:PTs"}constructor(e,t){super(e,ew.tagName),t&&t.forEach(e=>{this.addNode(e)})}getPTpair(e){return this.nodes.get(e)}setPTpair(e,t){this.nodes.set(e,t)}addPTpair(e){return this.addNode(e)}}class eb extends L{static{this.tagName="me:conditions"}constructor(e,t,i){super(e,eb.tagName),this.index=new Map,t&&(this.index.set(eE.tagName,this.nodes.size),this.addNode(t)),i&&(this.index.set(ew.tagName,this.nodes.size),this.addNode(i))}getBathGas(){let e=this.index.get(eE.tagName);if(void 0!=e)return this.nodes.get(e)}setBathGas(e){let t=this.index.get(eE.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eE.tagName,this.nodes.size),this.addNode(e))}getPTs(){let e=this.index.get(ew.tagName);if(void 0!=e)return this.nodes.get(e)}setPTs(e){let t=this.index.get(ew.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(ew.tagName,this.nodes.size),this.addNode(e))}}class eC extends M{static{this.tagName="me:grainSize"}constructor(e,t){super(e,eC.tagName,t)}toString(){return`GrainSize(${super.toString()})`}}class eS extends M{static{this.tagName="me:energyAboveTheTopHill"}constructor(e,t){super(e,eS.tagName,t)}}class eM extends L{static{this.tagName="me:modelParameters"}constructor(e,t,i){super(e,eM.tagName),this.index=new Map,void 0!=t&&(this.index.set(eC.tagName,this.nodes.size),this.addNode(t)),void 0!=i&&(this.index.set(eS.tagName,this.nodes.size),this.addNode(i))}getGrainSize(){let e=this.index.get(eC.tagName);if(e)return this.nodes.get(e)}setGrainSize(e){let t=this.index.get(eC.tagName);t?this.nodes.set(t,e):(this.index.set(eC.tagName,this.nodes.size),this.addNode(e))}getEnergyAboveTheTopHill(){let e=this.index.get(eS.tagName);if(e)return this.nodes.get(e)}setEnergyAboveTheTopHill(e){let t=this.index.get(eS.tagName);t?this.nodes.set(t,e):(this.index.set(eS.tagName,this.nodes.size),this.addNode(e))}}class ez extends b{static{this.tagName="me:testDOS"}constructor(){super(ez.tagName)}}class eL extends b{static{this.tagName="me:printSpeciesProfile"}constructor(){super(eL.tagName)}}class eP extends b{static{this.tagName="me:testMicroRates"}constructor(){super(eP.tagName)}}class eR extends b{static{this.tagName="me:testRateConstant"}constructor(){super(eR.tagName)}}class eB extends b{static{this.tagName="me:printGrainDOS"}constructor(){super(eB.tagName)}}class e_ extends b{static{this.tagName="me:printCellDOS"}constructor(){super(e_.tagName)}}class eI extends b{static{this.tagName="me:printReactionOperatorColumnSums"}constructor(){super(eI.tagName)}}class eD extends b{static{this.tagName="me:printTunnellingCoefficients"}constructor(){super(eD.tagName)}}class ek extends b{static{this.tagName="me:printGrainkfE"}constructor(){super(ek.tagName)}}class eO extends b{static{this.tagName="me:printGrainBoltzmann"}constructor(){super(eO.tagName)}}class eG extends b{static{this.tagName="me:printGrainkbE"}constructor(){super(eG.tagName)}}class eH extends M{static{this.tagName="me:eigenvalues"}constructor(e,t){super(e,eH.tagName,t)}}class eA extends b{static{this.tagName="me:hideInactive"}constructor(){super(eA.tagName)}}class eF extends M{static{this.tagName="me:diagramEnergyOffset"}constructor(e,t){super(e,eF.tagName,t)}}class e$ extends L{static{this.tagName="me:control"}constructor(e,t,i,s,n,a,o,d,r,l,g,h,m,c,u){super(e,e$.tagName),this.index=new Map,void 0!=t&&(this.addNode(t),this.index.set(ez.tagName,this.index.size)),void 0!=i&&(this.addNode(i),this.index.set(eL.tagName,this.index.size)),void 0!=s&&(this.addNode(s),this.index.set(eP.tagName,this.index.size)),void 0!=n&&(this.addNode(n),this.index.set(eR.tagName,this.index.size)),void 0!=a&&(this.addNode(a),this.index.set(eB.tagName,this.index.size)),void 0!=o&&(this.addNode(o),this.index.set(e_.tagName,this.index.size)),void 0!=d&&(this.addNode(d),this.index.set(eI.tagName,this.index.size)),void 0!=r&&(this.addNode(r),this.index.set(eD.tagName,this.index.size)),void 0!=l&&(this.addNode(l),this.index.set(ek.tagName,this.index.size)),void 0!=g&&(this.addNode(g),this.index.set(eO.tagName,this.index.size)),void 0!=h&&(this.addNode(h),this.index.set(eG.tagName,this.index.size)),void 0!=m&&(this.addNode(m),this.index.set(eH.tagName,this.index.size)),void 0!=c&&(this.addNode(c),this.index.set(eA.tagName,this.index.size)),void 0!=u&&(this.addNode(u),this.index.set(eF.tagName,this.index.size))}getTestDOS(){let e=this.index.get(ez.tagName);if(void 0!=e)return this.nodes.get(e)}setTestDOS(e){let t=this.index.get(ez.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(ez.tagName,this.nodes.size),this.addNode(e))}removeTestDOS(){let e=this.index.get(ez.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(ez.tagName))}getPrintSpeciesProfile(){let e=this.index.get(eL.tagName);if(void 0!=e)return this.nodes.get(e)}setPrintSpeciesProfile(e){let t=this.index.get(eL.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eL.tagName,this.nodes.size),this.addNode(e))}removePrintSpeciesProfile(){let e=this.index.get(eL.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(eL.tagName))}getTestMicroRates(){let e=this.index.get(eP.tagName);if(void 0!=e)return this.nodes.get(e)}setTestMicroRates(e){let t=this.index.get(eP.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eP.tagName,this.nodes.size),this.addNode(e))}removeTestMicroRates(){let e=this.index.get(eP.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(eP.tagName))}getTestRateConstant(){let e=this.index.get(eR.tagName);if(void 0!=e)return this.nodes.get(e)}setTestRateConstant(e){let t=this.index.get(eR.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eR.tagName,this.nodes.size),this.addNode(e))}removeTestRateConstant(){let e=this.index.get(eR.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(eR.tagName))}getPrintGrainDOS(){let e=this.index.get(eB.tagName);if(void 0!=e)return this.nodes.get(e)}setPrintGrainDOS(e){let t=this.index.get(eB.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eB.tagName,this.nodes.size),this.addNode(e))}removePrintGrainDOS(){let e=this.index.get(eB.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(eB.tagName))}getPrintCellDOS(){let e=this.index.get(e_.tagName);if(void 0!=e)return this.nodes.get(e)}setPrintCellDOS(e){let t=this.index.get(e_.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(e_.tagName,this.nodes.size),this.addNode(e))}removePrintCellDOS(){let e=this.index.get(e_.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(e_.tagName))}getPrintReactionOperatorColumnSums(){let e=this.index.get(eI.tagName);if(void 0!=e)return this.nodes.get(e)}setPrintReactionOperatorColumnSums(e){let t=this.index.get(eI.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eI.tagName,this.nodes.size),this.addNode(e))}removePrintReactionOperatorColumnSums(){let e=this.index.get(eI.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(eI.tagName))}getPrintTunnellingCoefficients(){let e=this.index.get(eD.tagName);if(void 0!=e)return this.nodes.get(e)}setPrintTunnellingCoefficients(e){let t=this.index.get(eD.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eD.tagName,this.nodes.size),this.addNode(e))}removePrintTunnellingCoefficients(){let e=this.index.get(eD.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(eD.tagName))}getPrintGrainkfE(){let e=this.index.get(ek.tagName);if(void 0!=e)return this.nodes.get(e)}setPrintGrainkfE(e){let t=this.index.get(ek.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(ek.tagName,this.nodes.size),this.addNode(e))}removePrintGrainkfE(){let e=this.index.get(ek.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(ek.tagName))}getPrintGrainBoltzmann(){let e=this.index.get(eO.tagName);if(void 0!=e)return this.nodes.get(e)}setPrintGrainBoltzmann(e){let t=this.index.get(eO.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eO.tagName,this.nodes.size),this.addNode(e))}removePrintGrainBoltzmann(){let e=this.index.get(eO.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(eO.tagName))}getPrintGrainkbE(){let e=this.index.get(eG.tagName);if(void 0!=e)return this.nodes.get(e)}setPrintGrainkbE(e){let t=this.index.get(eG.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eG.tagName,this.nodes.size),this.addNode(e))}removePrintGrainkbE(){let e=this.index.get(eG.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(eG.tagName))}getEigenvalues(){let e=this.index.get(eH.tagName);if(void 0!=e)return this.nodes.get(e)}setEigenvalues(e){let t=this.index.get(eH.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eH.tagName,this.nodes.size),this.addNode(e))}removeEigenvalues(){let e=this.index.get(eH.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(eH.tagName))}getHideInactive(){let e=this.index.get(eA.tagName);if(void 0!=e)return this.nodes.get(e)}setHideInactive(e){let t=this.index.get(eA.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eA.tagName,this.nodes.size),this.addNode(e))}removeHideInactive(){let e=this.index.get(eA.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(eA.tagName))}getDiagramEnergyOffset(){let e=this.index.get(eF.tagName);if(void 0!=e)return this.nodes.get(e)}setDiagramEnergyOffset(e){let t=this.index.get(eF.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eF.tagName,this.nodes.size),this.addNode(e))}removeDiagramEnergyOffset(){let e=this.index.get(eF.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(eF.tagName))}}class eU extends S{static{this.tagName="me:title"}constructor(e,t){super(e,eU.tagName,t)}}class eX extends L{static{this.tagName="moleculeList"}constructor(e,t){super(e,eX.tagName),this.index=new Map,void 0!=t&&t.forEach(e=>{this.nodes.set(this.nodes.size,e),this.index.set(e.id,this.nodes.size-1)})}getMolecule(e){let t=this.index.get(e);if(void 0!=t)return this.nodes.get(t)}removeMolecule(e){let t=this.index.get(e);void 0!=t&&(this.nodes.delete(t),this.index.delete(e))}addMolecule(e){let t=this.index.get(e.id);void 0!==t?(this.nodes.set(t,e),console.log("Replaced molecule with id "+e.id)):(this.nodes.set(this.nodes.size,e),this.index.set(e.id,this.nodes.size-1))}}class eq extends L{static{this.tagName="reactionList"}constructor(e,t){super(e,eq.tagName),this.index=new Map,void 0!=t&&t.forEach(e=>{this.nodes.set(this.nodes.size,e),this.index.set(e.id,this.nodes.size-1)})}getReaction(e){let t=this.index.get(e);if(void 0!=t)return this.nodes.get(t)}removeReaction(e){let t=this.index.get(e);void 0!=t&&(this.nodes.delete(t),this.index.delete(e))}addReaction(e){let t=this.index.get(e.id);void 0!==t?(this.nodes.set(t,e),console.log("Replaced reaction with id "+e.id)):(this.nodes.set(this.nodes.size,e),this.index.set(e.id,this.nodes.size-1))}}class eV extends L{static{this.tagName="me:mesmer"}static{this.header=`<?xml version="1.0" encoding="utf-8" ?>
<?xml-stylesheet type='text/xsl' href='../../mesmer2.xsl' media='other'?>
<?xml-stylesheet type='text/xsl' href='../../mesmer1.xsl' media='screen'?>`}constructor(e,t,i,s,n,a,o){super(e,eV.tagName),this.index=new Map,void 0!=t&&(this.index.set(eU.tagName,this.nodes.size),this.addNode(t)),void 0!=i&&(this.index.set(eX.tagName,this.nodes.size),this.addNode(i)),void 0!=s&&(this.index.set(eq.tagName,this.nodes.size),this.addNode(s)),void 0!=n&&(this.index.set(eb.tagName,this.nodes.size),this.addNode(n)),void 0!=a&&(this.index.set(eM.tagName,this.nodes.size),this.addNode(a)),void 0!=o&&(this.index.set(e$.tagName,this.nodes.size),this.addNode(o))}getTitle(){let e=this.index.get(eU.tagName);if(void 0!=e)return this.nodes.get(e)}setTitle(e){let t=this.index.get(eU.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eU.tagName,this.nodes.size),this.addNode(e))}getMoleculeList(){let e=this.index.get(eX.tagName);if(void 0!=e)return this.nodes.get(e)}setMoleculeList(e){let t=this.index.get(eX.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eX.tagName,this.nodes.size),this.addNode(e))}getReactionList(){let e=this.index.get(eq.tagName);if(void 0!=e)return this.nodes.get(e)}setReactionList(e){let t=this.index.get(eq.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eq.tagName,this.nodes.size),this.addNode(e))}getConditions(){let e=this.index.get(eb.tagName);if(void 0!=e)return this.nodes.get(e)}setConditions(e){let t=this.index.get(eb.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eb.tagName,this.nodes.size),this.addNode(e))}getModelParameters(){let e=this.index.get(eM.tagName);if(void 0!=e)return this.nodes.get(e)}setModelParameters(e){let t=this.index.get(eM.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eM.tagName,this.nodes.size),this.addNode(e))}getControl(){let e=this.index.get(e$.tagName);if(void 0!=e)return this.nodes.get(e)}setControl(e){let t=this.index.get(e$.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(e$.tagName,this.nodes.size),this.addNode(e))}}let ej="1.5em",eW="1.25em",eK="1.0em",eZ="25px",eJ="50px",eQ="75px",eY=["kJ/mol","cm-1","kcal/mol","Hartree"],e0=["cm-1","GHz"],e1=new Map,e2=-1/0,e5=1/0,e4=new Map;function e8(e,t,i,s,n,a){let o=s.getElementsByTagName(O.tagName);if(o.length>0){if(1!=o.length)throw Error("Expecting 1 "+O.tagName+" but finding "+o.length+"!");let s=w(o[0]),d=parseFloat(s),r=R(o[0]),l=new O(r,d);e.setProperty(l);let g=e.dictRef,h=p("number",i.id+"_"+e.dictRef,e=>{e.target instanceof HTMLInputElement&&e3(l,e.target)},s,g);h.style.marginLeft=a,h.style.marginTop="1px",h.style.marginBottom="1px";let m=h.querySelector("input");m.value=s,x(m),m.addEventListener("change",t=>{s=t.target.value,(l=e.getProperty()).value=parseFloat(s),console.log("Set "+e.dictRef+" of "+i.id+" to "+s),x(m),e.dictRef==A.dictRef&&(d<e5&&(e5=d),d>e2&&(e2=d),e9())}),e6(t,r,h,i.id+"_"+e.dictRef+"_Select_Units",e.dictRef,"2px","1px","1px"),n.appendChild(h)}else{let o=s.getElementsByTagName(G.tagName);if(o.length>0){if(1!=o.length)throw Error("Expecting 1 "+G.tagName+" but finding "+o.length+"!");let s=w(o[0]),d=h(s.split(/\s+/)),r=R(o[0]),l=new G(r,d);e.setProperty(l);let g=e.dictRef,m=p("text",i.id+"_"+e.dictRef,e=>{e.target instanceof HTMLInputElement&&e7(l,e.target)},s,g);m.style.marginLeft=a,m.style.marginTop="1px",m.style.marginBottom="1px";let c=m.querySelector("input");c.value=s,x(c),c.addEventListener("change",t=>{s=t.target.value,l=e.getProperty(),d=h(s.split(/\s+/)),l.values=d,console.log("Set "+e.dictRef+" of "+i.id+" to "+s),x(c)}),e6(t,r,m,i.id+"_"+e.dictRef+"_Select_Units",e.dictRef,"2px","1px","1px"),n.appendChild(m)}else throw Error("Expecting "+O.tagName+" or "+G.tagName)}}function e6(e,t,i,s,n,a,o,d){if(void 0!=e){let r=function(e,t,i,s){let n=t.get("units");if(void 0!=n){let a=v(e,"Units",i);return a.value=n,f(a),a.addEventListener("change",e=>{e.target instanceof HTMLSelectElement&&(t.set("units",e.target.value),console.log("Set "+s+" units to "+e.target.value)),f(a)}),a}}(e,t,s,n);void 0!=r&&(r.style.marginLeft=a,r.style.marginTop=o,r.style.marginBottom=d,i.appendChild(r))}else{let e=t.get("units");if(void 0!=e){let t=document.createElement("label");t.textContent=e,t.style.marginLeft=a,t.style.marginTop=o,t.style.marginBottom=d,i.appendChild(t)}}}function e7(e,t){let i=t.id,s=t.value.trim();if(""==s){alert("Empty input resetting..."),document.getElementById(i).value=g(e.values," ");return}let n=s.split(/\s+/),a=[],o=!0;if(n.forEach(function(e){m(e)||(o=!1),a.push(parseFloat(e))}),!o){alert("An input is not a number, resetting..."),document.getElementById(i).value=g(e.values," ");return}a.length==e.values.length?console.log("Changed "+e.tagName+' from: "'+s+'" to: "'+g(e.values," ")+'"'):(alert("Expecting "+e.values.length+" values for, but finding "+a.length+" resetting..."),document.getElementById(i).value=g(e.values," "))}function e3(e,t){let i=t.id;if(m(t.value)){let i=parseFloat(t.value);e.value=i,console.log("Value set to "+i)}else alert("Value is not numeric, resetting..."),document.getElementById(i).value=e.value.toString()}function e9(){if(e4.size>0){let e=document.getElementById("reactions_diagram");null!=e&&(e.style.display="block",function(e,t,i,s,n){var a;let o,d,r,g;console.log("drawReactionDiagram");let h="black",m=e.getContext("2d"),c=(m.font=i,(a=m.measureText("Aj")).actualBoundingBoxAscent+a.actualBoundingBoxDescent),u=new Set,p=new Set,N=new Set,x=new Set,f=new Map,v=new Map,E=0,y=Number.MAX_VALUE,T=Number.MIN_VALUE;e4.forEach(function(e,t){let i=e.getTransitionStates(),s=e.getReactantsLabel();if(void 0!=s){u.add(s),p.has(s)&&N.add(s);let t=e.getReactantsEnergy(e1);y=Math.min(y,t),T=Math.max(T,t),v.set(s,t),!f.has(s)&&(f.set(s,E),E++)}let n=e.getProductsLabel();if(void 0!=n){p.add(n);let t=e.getProductsEnergy(e1);if(y=Math.min(y,t),T=Math.max(T,t),v.set(n,t),f.has(n)){E--;let e=l(f,n);f.forEach(function(t,i){t>e&&f.set(i,t-1)}),void 0!=i&&(i.forEach(function(e){let i=e.getMolecule().ref;x.add(i),f.set(i,E),t=e1.get(i)?.getEnergy()??0,y=Math.min(y,t),T=Math.max(T,t),v.set(i,t),E++}),f.set(n,E),E++)}else void 0!=i&&i.forEach(function(e){let i=e.getMolecule().ref;x.add(i),f.set(i,E),t=e1.get(i)?.getEnergy()??0,y=Math.min(y,t),T=Math.max(T,t),v.set(i,t),E++}),f.set(n,E),E++}});let w=T-y,b=[];f.forEach(function(e,t){b[e]=t});let C=0,S=0,M=new Map,z=new Map,L=new Map,P=new Map,R=new Map,B=new Map;b.forEach(function(t){let s=l(v,t),n=(s-y)*e.height/(w+0)+0;g=Math.max(ev(m,s.toString(),i),ev(m,t,i)),d=C+g+5,r=o=n+4,M.set(t,[C,o]),z.set(t,[d,r]),p.has(t)&&(L.set(t,[C,o]),P.set(t,[d,r])),x.has(t)&&(R.set(t,[C,o]),B.set(t,[d,r])),C=d+10,S=d}),e.width=S;let _=e.height+4*c+8,I=e.height;e.height=_,m.transform(1,0,0,-1,0,_),e4.forEach(function(e,t){let i=e.getTransitionStates(),s=e.getReactantsLabel(),n=e.getProductsLabel(),a=l(z,s),o=l(L,n);i.length>0?i.forEach(function(e){let t=e.getMolecule().ref,i=l(R,t);ex(m,h,2,a[0],a[1],i[0],i[1]);let s=l(B,t);ex(m,h,2,s[0],s[1],o[0],o[1])}):ex(m,h,2,a[0],a[1],o[0],o[1])}),u.forEach(function(e){let t=l(v,e),n=(t-y)*I/(w+0)+0,a=l(M,e)[0],o=n+4;eN(m,"blue",s,a,o,l(z,e)[0],o,i,c,e,t.toString())}),p.forEach(function(e){let t=l(v,e),n=(t-y)*I/(w+0)+0,a=l(L,e)[0],o=n+s,d=l(P,e)[0],r=t.toString();N.has(e)?eN(m,"orange",s,a,o,d,o,i,c,e,r):eN(m,"green",s,a,o,d,o,i,c,e,r)}),x.forEach(function(e){let t=l(v,e),n=(t-y)*I/(w+0)+0,a=l(R,e)[0],o=n+s;eN(m,"red",s,a,o,l(B,e)[0],o,i,c,e,t.toString())})}(e,0,"14px Arial",4,2))}}document.addEventListener("DOMContentLoaded",l=>{d=document.getElementById("xml_title"),r=document.getElementById("xml_text"),window.loadXML=function(){!function l(){let g=document.createElement("input");g.type="file",g.onchange=function(){if(g.files){for(let e=0;e<g.files.length;e++)console.log("inputElement.files["+e+"]="+g.files[e]);let a=g.files[0];if(console.log(a.name),n=a.name,null!=r){let o=new FileReader,l=0,g="";o.onload=function(h){if(null==h.target)throw Error("Event target is null");if(g+=h.target.result,null!=a){if(l<a.size){let e=a.slice(l,l+1048576);o.readAsText(e),l+=1048576}else{var N;N=g=g.trim(),null!=d&&(d.innerHTML=n),null!=r&&(r.innerHTML=N.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\n/g,"<br>").replace(/\t/g,"&nbsp;&nbsp;&nbsp;&nbsp;").replace(/  /g,"&nbsp;&nbsp;")),function(n){let a=B(n,eV.tagName);e=new eV(R(a));let o=n.getElementsByTagName(eU.tagName);if(1!=o.length)throw Error("Multiple "+eU.tagName+" tags found");{let a=o[0].childNodes[0].nodeValue.trim(),d=new eU(R(o[0]),a),r=document.getElementById("title");e.setTitle(d);let l=document.createElement("div");l.style.marginTop="1px",l.style.marginBottom="1px";let g=document.createTextNode("Title: ");l.appendChild(g);let h=document.createElement("input");h.type="text",h.value=a,h.style.fontSize=ej,l.appendChild(h),r.parentNode?.insertBefore(l,r),r.parentNode?.removeChild(r),x(h,0),console.log("inputElement.value="+h.value),h.addEventListener("change",function(){h.value!=a&&(d.value=h.value),x(h,0)});let N=document.getElementById("molecules");if(null==N);else{let t=function(e){let t=document.createElement("div"),i=B(e,eX.tagName),s=new Set;if(i.childNodes.forEach(function(e){s.add(e.nodeName)}),1!=s.size&&!(2==s.size&&s.has("#text")))throw console.error("moleculeListTagNames:"),s.forEach(e=>console.error(e)),Error("Additional tag names in moleculeList:");if(!s.has(ei.tagName))throw Error('Expecting tags with "'+ei.tagName+'" tagName but there are none!');let n=i.getElementsByTagName(ei.tagName);console.log("Number of molecules="+n.length);for(let e=0;e<n.length;e++){let i,s,a=document.createElement("div"),o=R(n[e]),d=new Set,r=n[e].childNodes;for(let e=0;e<r.length;e++){let t=r[e];d.has(t.nodeName)?"#text"!=t.nodeName&&console.warn("Another ChildNode with nodeName="+t.nodeName):d.add(t.nodeName)}let l=n[e].getElementsByTagName(I.tagName);if(l.length>1)throw Error("Expecting 1 or 0 "+I.tagName+" but finding "+l.length+"!");if(1==l.length){let e=l[0],t=e.getElementsByTagName(_.tagName);if(t.length<2)throw Error("Expecting 2 or more atoms in "+I.tagName+", but finding "+t.length+"!");let s=[];for(let e=0;e<t.length;e++)s.push(new _(R(t[e])));i=new I(R(e),s),d.delete(I.tagName)}else{let t=n[e].getElementsByTagName(_.tagName);if(1==t.length)i=new _(R(t[0]));else if(t.length>1)throw Error("Expecting 1 "+_.tagName+" but finding "+t.length+". Should these be in an "+I.tagName+"?")}d.delete(_.tagName);let g=n[e].getElementsByTagName(k.tagName);if(g.length>1)throw Error("Expecting 1 or 0 "+k.tagName+" but finding "+g.length+"!");if(1==g.length){let e=g[0],t=e.getElementsByTagName(D.tagName),i=[];for(let e=0;e<t.length;e++)i.push(new D(R(t[e])));s=new k(R(e),i),d.delete(k.tagName)}else{let t=n[e].getElementsByTagName(D.tagName);if(1==t.length)s=new D(R(t[0]));else if(t.length>1)throw Error("Expecting 1 "+D.tagName+" but finding "+t.length+". Should these be in a "+k.tagName+"?")}d.delete(D.tagName);let h=new ei(o,i,s);e1.set(h.id,h);let m=n[e].getElementsByTagName(V.tagName);if(m.length>1)throw Error("Expecting 1 or 0 "+V.tagName+" but finding "+m.length+"!");if(1==m.length){let e=document.createElement("div"),t=h.id+"_"+V.tagName,i=h.id+"_"+V.tagName+"_",s=c(e,V.tagName,t,eK,eJ,"1px","1px",i);a.appendChild(s);let n=new V(R(m[0]));h.setProperties(n);let o=m[0].getElementsByTagName(H.tagName);for(let t=0;t<o.length;t++){let i=new H(R(o[t]));n.setProperty(i),h.setProperties(n),i.dictRef==A.dictRef?e8(i,eY,h,o[t],e,eQ):i.dictRef==U.dictRef?e8(i,e0,h,o[t],e,eQ):e8(i,void 0,h,o[t],e,eQ)}d.delete(V.tagName)}else{let t=n[e].getElementsByTagName(H.tagName);if(1!=t.length)throw Error("Expecting 1 "+H.tagName+" but finding "+t.length+". Should these be in a "+V.tagName+"?");let i=new H(R(t[0]));h.setProperties(i),i.dictRef==A.dictRef?e8(i,eY,h,t[0],a,eQ):i.dictRef==U.dictRef?e8(i,e0,h,t[0],a,eQ):e8(i,void 0,h,t[0],a,eQ),d.delete(H.tagName)}let u=n[e].getElementsByTagName(W.tagName);if(u.length>0){if(u.length>1)throw Error("Expecting 1 or 0 "+W.tagName+" but finding "+u.length+"!");(function(e,t,i,s,n){let a=i.getElementsByTagName(j.tagName);if(a.length>0){let i=document.createElement("div"),o=t.id+"_"+W.tagName,d=t.id+"_"+W.tagName+"_",r=c(i,W.tagName,o,eK,eJ,"1px","1px",d);s.appendChild(r);let l=[];for(let e=0;e<a.length;e++){let s=w(a[e]),o=parseFloat(s),d=new j(R(a[e]),o);l.push(d);let r=j.tagName,g=t.id+"_"+W.tagName+"_"+j.tagName+"_"+e,h=p("number",g,e=>{e.target instanceof HTMLInputElement&&e3(d,e.target)},s,r);h.style.marginLeft=n,h.style.marginTop="1px",h.style.marginBottom="1px",i.appendChild(h);let m=h.querySelector("input");m.value=s,x(m),m.addEventListener("change",t=>{s=t.target.value,l[e].setValue(parseFloat(s)),console.log("Set "+g+" to "+s),x(m)});let c=document.createElement("label");c.textContent="cm-1",h.appendChild(c)}e.setDeltaEDowns(l),t.setEnergyTransferModel(e)}})(new W(R(u[0])),h,u[0],a,eQ),d.delete(W.tagName)}let N=n[e].getElementsByTagName(K.tagName);if(N.length>0){if(N.length>1)throw Error("Expecting 1 or 0 "+K.tagName+" but finding "+N.length+"!");(function(e,t,i,s){let n=document.createElement("label");n.textContent=K.tagName+": ";let a=document.createElement("div");a.appendChild(n);let o=v(["ClassicalRotors","QMRotors"],"DOSCMethod",t.id+"_Select_DOSCMethod");o.value=e.getXsiType(),o.addEventListener("change",t=>{t.target instanceof HTMLSelectElement&&(e.setXsiType(t.target.value),console.log("Set DOSCMethod to "+t.target.value))}),t.setDOSCMethod(e),a.appendChild(o),a.style.marginLeft=i,a.style.marginTop="1px",a.style.marginBottom="1px",s.appendChild(a)})(new K(R(N[0])),h,eJ,a),d.delete(K.tagName)}let f=n[e].getElementsByTagName(ee.tagName);if(f.length>0){let e,t,i;if(1!=f.length)throw Error("Expecting only 1 extra DOSCMethod, but there are "+f.length);console.warn("ExtraDOSCMethod detected: This is not displayed in the GUI - more coding needed!");let s=new ee(R(N[0])),n=document.createElement("div"),o=h.id+"_"+ee.tagName,r=h.id+"_"+ee.tagName+"_",l=c(n,ee.tagName,o,eK,eJ,"1px","1px",r);a.appendChild(l);let g=f[0].getElementsByTagName(Z.tagName);if(g.length>0){if(1!=g.length)throw Error("Expecting only 1 bondRef, but there are "+g.length);e=new Z(R(g[0]),T(y(g[0]))),s.setBondRef(e)}let m=f[0].getElementsByTagName(Q.tagName);if(m.length>0){if(1!=m.length)throw Error("Expecting only 1 HinderedRotorPotential, but there are "+m.length);let e=[],i=m[0].getElementsByTagName(J.tagName);for(let t=0;t<i.length;t++)e.push(new J(R(i[t])));t=new Q(R(m[0]),e),s.setHinderedRotorPotential(t)}let u=N[0].getElementsByTagName(Y.tagName);if(u.length>0){if(1!=u.length)throw Error("Expecting only 1 Periodicity, but there are "+u.length);i=new Y(R(u[0]),parseFloat(T(y(u[0])))),s.setPeriodicity(i)}h.setExtraDOSCMethod(s),d.delete(ee.tagName)}d.delete(et.tagName);let E=n[e].getElementsByTagName(et.tagName);if(E.length>0){if(1!=E.length)throw Error("Expecting only 1 reservoirSize, but there are "+E.length);console.warn("ReservoirSize detected: This is not displayed in the GUI - more coding needed!"),h.setReservoirSize(new et(R(E[0]),parseFloat(T(y(E[0])))))}d.delete("#text"),d.size>0&&(console.warn("There are additional unexpected moleculeTagNames:"),d.forEach(e=>console.warn(e)));let b=c(a,h.getLabel(),h.tagName+"_"+h.id+"_button",eW,eZ,"1px","1px",h.tagName+"_"+h.id);t.appendChild(b)}return t}(n);N.appendChild(c(t,"Molecules","molecules_button",ej,"0px","1px","1px","moleculesList")),e.setMoleculeList(new eX(R(t),Array.from(e1.values())))}let f=document.getElementById("reactions");if(null==f);else{let t=function(e){let t=document.createElement("div");t.style.marginTop="1px",t.style.marginBottom="1px";let i=B(e,eq.tagName),s=new Set;if(i.childNodes.forEach(function(e){s.add(e.nodeName)}),1!=s.size&&!(2==s.size&&s.has("#text")))throw console.error("reactionListTagNames:"),s.forEach(e=>console.error(e)),Error("Additional tag names in reactionList:");if(!s.has(ep.tagName))throw Error('Expecting tags with "'+ep.tagName+'" tagName but there are none!');let n=i.getElementsByTagName(ep.tagName);console.log("Number of reactions="+n.length);for(let e=0;e<n.length;e++){let i=document.createElement("div"),s=R(n[e]),a=new Set,o=n[e].childNodes;for(let e=0;e<o.length;e++){let t=o[e];a.has(t.nodeName)?"#text"!=t.nodeName&&console.warn("Another ChildNode with nodeName="+t.nodeName):a.add(t.nodeName)}let d=new ep(s);e4.set(d.id,d);let r=n[e].getElementsByTagName(en.tagName);if(a.delete(en.tagName),r.length>0){let e=document.createElement("div"),t=[];for(let i=0;i<r.length;i++){let s=new es(R(E(r[i],ei.tagName))),n=new en(R(r[i]),s);t.push(n);let a=document.createElement("div"),o=document.createElement("label");o.textContent=s.ref+" role: ",a.appendChild(o);let d=v(["deficientReactant","excessReactant","modelled"],"Role",s.ref+"_Select_Role");d.value=s.role,d.addEventListener("change",e=>{e.target instanceof HTMLSelectElement&&(s.setRole(e.target.value),console.log("Set Role to "+e.target.value))}),a.appendChild(d),a.style.marginLeft=eQ,a.style.marginTop="1px",a.style.marginBottom="1px",e.appendChild(a)}d.setReactants(t);let s=c(e,"Reactants",d.id+"_"+en.tagName,eK,eJ,"1px","1px",d.id+"_"+en.tagName+"_");i.appendChild(s)}let l=n[e].getElementsByTagName(ea.tagName);if(a.delete(ea.tagName),l.length>0){let e=document.createElement("div"),t=[];for(let i=0;i<l.length;i++){let s=new es(R(E(l[i],ei.tagName))),n=new ea(R(l[i]),s);t.push(n);let a=document.createElement("div"),o=document.createElement("label");o.textContent=s.ref+" role: ",a.appendChild(o);let d=v(["modelled","sink"],"Role",s.ref+"_Select_Role");d.value=s.role,d.addEventListener("change",e=>{e.target instanceof HTMLSelectElement&&(s.setRole(e.target.value),console.log("Set Role to "+e.target.value))}),a.appendChild(d),a.style.marginLeft=eQ,a.style.marginTop="1px",a.style.marginBottom="1px",e.appendChild(a)}d.setProducts(t);let s=c(e,"Products",d.id+"_"+ea.tagName,eK,eJ,"1px","1px",d.id+"_"+ea.tagName+"_");i.appendChild(s)}let g=n[e].getElementsByTagName(ec.tagName);if(g.length>0){if(g.length>1)throw Error("Expecting 1 "+ec.tagName+" but finding "+g.length+"!");let e=new ec(R(g[0]));d.setTunneling(e);let t=document.createElement("div"),s=document.createElement("label");s.textContent=ec.tagName+": ",t.appendChild(s);let n=v(["Eckart","WKB"],"Tunneling",d.id+"_Select_Tunneling");n.value=e.getName(),n.addEventListener("change",t=>{t.target instanceof HTMLSelectElement&&(e.setName(t.target.value),console.log("Set Tunneling to "+t.target.value))}),t.appendChild(n),t.style.marginLeft=eJ,t.style.marginTop="1px",t.style.marginBottom="1px",i.appendChild(t)}let h=n[e].getElementsByTagName(eo.tagName);if(h.length>0){let e=document.createElement("div"),t=[];for(let i=0;i<h.length;i++){let s=new es(R(E(h[i],ei.tagName))),n=new eo(R(h[i]),s);t.push(n);let a=document.createElement("label");a.textContent=s.ref+" role: transitionState",a.style.marginLeft=eQ,a.style.marginTop="1px",a.style.marginBottom="1px",e.appendChild(a)}d.setTransitionStates(t);let s=c(e,"Transition States",d.id+"_"+eo.tagName,eK,eJ,"1px","1px",d.id+"_"+eo.tagName+"_");i.appendChild(s)}let m=n[e].getElementsByTagName(eh.tagName);if(m.length>0){if(m.length>1)throw Error("Expecting 1 "+eh.tagName+" but finding "+m.length+"!");{let e,t=document.createElement("div"),s=R(m[0]),n=s.get("name");if(void 0==n||n==em.xsiType2){let n=s.get("xsi:type");if(e=new em(s),n==em.xsiType||n==em.xsiType2){let s=m[0].getElementsByTagName(ed.tagName);if(null!=s&&null!=s[0]){let i=w(s[0]),n=parseFloat(i),a=R(s[0]),o=new ed(a,n);e.setPreExponential(o);let r=ed.tagName,l=d.id+"_"+em.tagName+"_"+ed.tagName,g=p("number",l,e=>{e.target instanceof HTMLInputElement&&e3(o,e.target)},i,r);g.style.marginLeft=eQ,g.style.marginTop="1px",g.style.marginBottom="1px",t.appendChild(g);let h=g.querySelector("input");h.value=i,x(h),h.addEventListener("change",e=>{i=e.target.value,o.value=parseFloat(i),console.log("Set "+l+" to "+i),x(h)}),e6(void 0,a,g,d.id+"_"+em.xsiType+"_"+ed.tagName,ed.tagName,"2px","1px","1px"),t.appendChild(g)}let n=m[0].getElementsByTagName(er.tagName);if(null!=n&&null!=n[0]){let i=w(n[0]),s=parseFloat(i),a=R(n[0]),o=new er(a,s);e.setActivationEnergy(o);let r=er.tagName,l=d.id+"_"+em.tagName+"_"+er.tagName,g=p("number",l,e=>{e.target instanceof HTMLInputElement&&e3(o,e.target)},i,r);g.style.marginLeft=eQ,g.style.marginTop="1px",g.style.marginBottom="1px";let h=g.querySelector("input");h.value=i,x(h),h.addEventListener("change",e=>{i=e.target.value,o.value=parseFloat(i),console.log("Set "+l+" to "+i),x(h)}),e6(void 0,a,g,d.id+"_"+em.xsiType+"_"+er.tagName,er.tagName,"2px","1px","1px"),t.appendChild(g)}let a=m[0].getElementsByTagName(el.tagName);if(null!=a&&null!=a[0]){let i=w(a[0]),s=parseFloat(i),n=R(a[0]),o=new el(n,s);e.setTInfinity(o);let r=el.tagName,l=d.id+"_"+em.tagName+"_"+el.tagName,g=p("number",l,e=>{e.target instanceof HTMLInputElement&&e3(o,e.target)},i,r);g.style.marginLeft=eQ,g.style.marginTop="1px",g.style.marginBottom="1px";let h=g.querySelector("input");h.value=i,x(h),h.addEventListener("change",e=>{i=e.target.value,o.value=parseFloat(i),console.log("Set "+l+" to "+i),x(h)}),e6(void 0,n,g,d.id+"_"+em.xsiType+"_"+el.tagName,el.tagName,"2px","1px","1px"),t.appendChild(g)}let o=m[0].getElementsByTagName(eg.tagName);if(null!=o&&null!=o[0]){let i=w(o[0]),s=parseFloat(i),n=R(o[0]),a=new eg(n,s);e.setNInfinity(a);let r=eg.tagName,l=d.id+"_"+em.tagName+"_"+eg.tagName,g=p("number",l,e=>{e.target instanceof HTMLInputElement&&e3(a,e.target)},i,r);g.style.marginLeft=eQ,g.style.marginTop="1px",g.style.marginBottom="1px",t.appendChild(g);let h=g.querySelector("input");h.value=i,x(h),h.addEventListener("change",e=>{i=e.target.value,a.value=parseFloat(i),console.log("Set "+l+" to "+i),x(h)}),e6(void 0,n,g,d.id+"_"+em.xsiType+"_"+eg.tagName,eg.tagName,"2px","1px","1px"),t.appendChild(g)}let r=d.id+"_"+eh.tagName,l=d.id+"_"+eh.tagName+"_",g=c(t,eh.tagName,r,eK,eJ,"1px","1px",l);i.appendChild(g)}else throw Error("Unexpected xsi:type="+n)}else{e=new eh(s);let n=document.createElement("label");n.textContent=eh.tagName+": "+s.get("name"),n.style.marginLeft=eJ,n.style.marginTop="1px",n.style.marginBottom="1px",t.appendChild(n),i.appendChild(t)}d.setMCRCMethod(e)}}let u=n[e].getElementsByTagName(eu.tagName);if(u.length>0){let e;if(u.length>1)throw Error("Expecting 1 "+eu.tagName+" but finding "+u.length+"!");let t=parseFloat(T(y(u[0])));e=new eu(R(u[0]),t),d.setExcessReactantConc(e)}let N=c(i,d.id+"("+d.getLabel()+")",d.tagName+"_"+d.id+"_button",eW,eZ,"1px","1px",d.tagName+"_"+d.id);t.appendChild(N)}return t}(n);f.appendChild(c(t,"Reactions","reactions_button",ej,"0px","1px","1px","reactionsList")),e.setReactionList(new eq(R(t),Array.from(e4.values())))}e9();let b=document.getElementById("conditions");if(null==b);else{let i=function(e){console.log(eb.tagName);let i=document.createElement("div"),s=B(e,eb.tagName);t=new eb(R(s));let n=s.getElementsByTagName(eE.tagName);if(n.length>0){if(n.length>1)throw Error("Expecting 1 "+eE.tagName+" but finding "+n.length+"!");let e=new eE(R(n[0]),T(y(n[0])));console.log("bathGas"+e.toString()),t.setBathGas(e);let s=document.createElement("label");s.textContent=eE.tagName+": "+e.value,s.style.marginLeft=eZ,s.style.marginTop="1px",s.style.marginBottom="1px",i.appendChild(s)}let a=s.getElementsByTagName(ew.tagName);if(a.length>0){if(a.length>1)throw Error("Expecting 1 "+ew.tagName+" but finding "+a.length+"!");let e=document.createElement("div");i.appendChild(e);let s=R(a[0]),n=a[0].getElementsByTagName(eT.tagName);if(0==n.length)throw Error("Expecting 1 or more "+eT.tagName+" but finding 0!");{let i=new ew(s);for(let t=0;t<n.length;t++){let s=new eT(R(n[t])),a=document.createElement("div");a.style.marginLeft=eZ,a.style.marginTop="1px",a.style.marginBottom="1px",e.appendChild(a);let o=n[t].getElementsByTagName(eE.tagName);if(o.length>0){o.length>1&&console.warn("xml_bathGass.length="+o.length);let e=new eE(R(o[0]),T(y(o[0])));s.setBathGas(e);let t=document.createElement("label");t.textContent=eE.tagName+": "+e.value,t.style.marginLeft=eJ,t.style.marginTop="1px",t.style.marginBottom="1px",a.appendChild(t)}let d=n[t].getElementsByTagName(ey.tagName);if(d.length>0){d.length>1&&console.warn("xml_experimentRates.length="+d.length);let e=new ey(R(d[0]),parseFloat(T(y(d[0]))));s.setExperimentRate(e);let t=p("number",eT.tagName+"_"+ey.tagName,t=>{t.target instanceof HTMLInputElement&&e3(e,t.target)},e.value.toString(),ey.tagName);t.style.marginLeft=eJ,t.style.marginTop="1px",t.style.marginBottom="1px",a.appendChild(t)}let r=s.getP(),l=eT.tagName+"_P",g=s.getT(),h=eT.tagName+"_T",u=document.createElement("div");u.style.display="flex";let N=p("number",l,e=>{e.target instanceof HTMLInputElement&&(m(e.target.value)?(s.setP(parseFloat(e.target.value)),console.log("Set P to "+e.target.value)):(alert("Value is not numeric, resetting..."),document.getElementById(l).value=s.getP().toString()),x(e.target))},r.toString(),"P"),f=N.querySelector("input");f.value=r.toString(),x(f),N.style.marginLeft=eZ,N.style.marginTop="1px",N.style.marginBottom="1px",u.appendChild(N);let v=p("number",h,e=>{e.target instanceof HTMLInputElement&&(m(e.target.value)?(s.setT(parseFloat(e.target.value)),console.log("Set T to "+e.target.value)):(alert("Value is not numeric, resetting..."),document.getElementById(h).value=s.getT().toString()))},g.toString(),"T"),E=v.querySelector("input");E.value=g.toString(),x(E),v.style.marginLeft="5px",v.style.marginTop="1px",v.style.marginBottom="1px",u.appendChild(v),e6(void 0,R(n[t]),u,eT.tagName,eT.tagName,"2px","1px","1px"),a.appendChild(u);let w=eT.tagName+"_"+t,b=eT.tagName+"_"+t+"_",C=c(a,eT.tagName,w,eW,eZ,"1px","1px",b);e.appendChild(C),i.addPTpair(s)}t.setPTs(i)}}return i}(n);b.appendChild(c(i,"Conditions","conditions_button",ej,"0px","1px","1px","conditionsList")),e.setConditions(t)}let C=document.getElementById("modelParameters");if(null==C);else{let t=function(e){console.log(eM.tagName);let t=document.createElement("div"),s=B(e,eM.tagName);i=new eM(R(s));let n=s.getElementsByTagName(eC.tagName);if(n.length>0){if(n.length>1)throw Error("Expecting 1 "+eE.tagName+" but finding "+n.length+"!");let e=R(n[0]),s=parseFloat(T(y(n[0]))),a=new eC(e,s);i.setGrainSize(a);let o=document.createElement("div");o.style.display="flex";let d=p("number",eM.tagName+"_"+eC.tagName,e=>{e.target instanceof HTMLInputElement&&(e3(a,e.target),x(e.target))},s.toString(),eC.tagName);x(d.querySelector("input")),d.style.marginLeft=eZ,d.style.marginTop="1px",d.style.marginBottom="1px",o.appendChild(d),e6(void 0,e,o,eM.tagName+"_"+eC.tagName,eC.tagName,"2px","1px","1px"),t.appendChild(o)}let a=B(s,eS.tagName),o=new eS(R(a),parseFloat(T(y(a))));i.setEnergyAboveTheTopHill(o);let d=p("number",eM.tagName+"_"+eS.tagName,e=>{e.target instanceof HTMLInputElement&&(e3(o,e.target),x(e.target))},o.value.toString(),eS.tagName);return x(d.querySelector("input")),d.style.marginLeft=eZ,d.style.marginTop="1px",d.style.marginBottom="1px",t.appendChild(d),t}(n);C.appendChild(c(t,"Model Parameters","modelParameters_button",ej,"0px","1px","1px","modelParametersList")),e.setModelParameters(i)}let S=document.getElementById("control");if(null==S);else{let t=function(e){console.log(e$.tagName);let t=document.createElement("div"),i=B(e,e$.tagName);s=new e$(R(i));let n=document.createElement("div");n.style.display="flex",n.style.marginLeft=eZ,t.appendChild(n);let a=i.getElementsByTagName(ez.tagName),o=document.createElement("label");n.appendChild(o),o.textContent=ez.tagName;let d=document.createElement("input");n.appendChild(d),d.type="checkbox",d.id=ez.tagName,d.addEventListener("change",e=>{e.target instanceof HTMLInputElement&&(e.target.checked?s.setTestDOS(new ez):s.removeTestDOS())}),1==a.length?(d.checked=!0,s.setTestDOS(new ez)):a.length>1&&console.warn("xml_testDOS.length="+a.length);let r=document.createElement("div");r.style.display="flex",r.style.marginLeft=eZ,t.appendChild(r);let l=i.getElementsByTagName(eL.tagName),g=document.createElement("label");r.appendChild(g),g.textContent=eL.tagName;let h=document.createElement("input");r.appendChild(h),h.type="checkbox",h.id=eL.tagName,h.addEventListener("change",e=>{e.target instanceof HTMLInputElement&&(e.target.checked?s.setPrintSpeciesProfile(new eL):s.removePrintSpeciesProfile())}),1==l.length?(h.checked=!0,s.setTestDOS(new eL)):a.length>1&&console.warn("xml_printSpeciesProfile.length="+l.length);let m=document.createElement("div");m.style.display="flex",m.style.marginLeft=eZ,t.appendChild(m);let c=i.getElementsByTagName(eP.tagName),u=document.createElement("label");m.appendChild(u),u.textContent=eP.tagName;let N=document.createElement("input");m.appendChild(N),N.type="checkbox",N.id=eP.tagName,N.addEventListener("change",e=>{e.target instanceof HTMLInputElement&&(e.target.checked?s.setTestMicroRates(new eP):s.removeTestMicroRates())}),1==c.length?(N.checked=!0,s.setTestMicroRates(new eP)):c.length>1&&console.warn("xml_testMicroRates.length="+c.length);let f=document.createElement("div");f.style.display="flex",f.style.marginLeft=eZ,t.appendChild(f);let v=i.getElementsByTagName(eR.tagName),E=document.createElement("label");f.appendChild(E),E.textContent=eR.tagName;let w=document.createElement("input");f.appendChild(w),w.type="checkbox",w.id=eR.tagName,w.addEventListener("change",e=>{e.target instanceof HTMLInputElement&&(e.target.checked?s.setTestRateConstant(new eR):s.removeTestRateConstant())}),1==v.length?(w.checked=!0,s.setTestRateConstant(new eR)):v.length>1&&console.warn("xml_testRateConstant.length="+v.length);let b=document.createElement("div");b.style.display="flex",b.style.marginLeft=eZ,t.appendChild(b);let C=i.getElementsByTagName(eB.tagName),S=document.createElement("label");b.appendChild(S),S.textContent=eB.tagName;let M=document.createElement("input");b.appendChild(M),M.type="checkbox",M.id=eB.tagName,M.addEventListener("change",e=>{e.target instanceof HTMLInputElement&&(e.target.checked?s.setPrintGrainDOS(new eB):s.removePrintGrainDOS())}),1==C.length?(M.checked=!0,s.setPrintGrainDOS(new eB)):C.length>1&&console.warn("xml_printGrainDOS.length="+C.length);let z=document.createElement("div");z.style.display="flex",z.style.marginLeft=eZ,t.appendChild(z);let L=i.getElementsByTagName(e_.tagName),P=document.createElement("label");z.appendChild(P),P.textContent=e_.tagName;let _=document.createElement("input");z.appendChild(_),_.type="checkbox",_.id=e_.tagName,_.addEventListener("change",e=>{e.target instanceof HTMLInputElement&&(e.target.checked?s.setPrintCellDOS(new e_):s.removePrintCellDOS())}),1==L.length?(_.checked=!0,s.setPrintCellDOS(new e_)):L.length>1&&console.warn("xml_printCellDOS.length="+L.length);let I=document.createElement("div");I.style.display="flex",I.style.marginLeft=eZ,t.appendChild(I);let D=i.getElementsByTagName(eI.tagName),k=document.createElement("label");I.appendChild(k),k.textContent=eI.tagName;let O=document.createElement("input");I.appendChild(O),O.type="checkbox",O.id=eI.tagName,O.addEventListener("change",e=>{e.target instanceof HTMLInputElement&&(e.target.checked?s.setPrintReactionOperatorColumnSums(new eI):s.removePrintReactionOperatorColumnSums())}),1==D.length?(O.checked=!0,s.setPrintReactionOperatorColumnSums(new eI)):D.length>1&&console.warn("xml_printReactionOperatorColumnSums.length="+D.length);let G=document.createElement("div");G.style.display="flex",G.style.marginLeft=eZ,t.appendChild(G);let H=i.getElementsByTagName(eD.tagName),A=document.createElement("label");G.appendChild(A),A.textContent=eD.tagName;let F=document.createElement("input");G.appendChild(F),F.type="checkbox",F.id=eD.tagName,F.addEventListener("change",e=>{e.target instanceof HTMLInputElement&&(e.target.checked?s.setPrintTunnellingCoefficients(new eD):s.removePrintTunnellingCoefficients())}),1==H.length?(F.checked=!0,s.setPrintTunnellingCoefficients(new eD)):H.length>1&&console.warn("xml_printTunnellingCoefficients.length="+H.length);let $=document.createElement("div");$.style.display="flex",$.style.marginLeft=eZ,t.appendChild($),i.getElementsByTagName(ek.tagName);let U=document.createElement("label");$.appendChild(U),U.textContent=ek.tagName;let X=document.createElement("input");$.appendChild(X),X.type="checkbox",X.id=ek.tagName,X.addEventListener("change",e=>{e.target instanceof HTMLInputElement&&(e.target.checked?s.setPrintGrainkfE(new ek):s.removePrintGrainkfE())});let q=document.createElement("div");q.style.display="flex",q.style.marginLeft=eZ,t.appendChild(q),i.getElementsByTagName(eO.tagName);let V=document.createElement("label");q.appendChild(V),V.textContent=eO.tagName;let j=document.createElement("input");q.appendChild(j),j.type="checkbox",j.id=eO.tagName,j.addEventListener("change",e=>{e.target instanceof HTMLInputElement&&(e.target.checked?s.setPrintGrainBoltzmann(new eO):s.removePrintGrainBoltzmann())});let W=document.createElement("div");W.style.display="flex",W.style.marginLeft=eZ,t.appendChild(W),i.getElementsByTagName(eG.tagName);let K=document.createElement("label");W.appendChild(K),K.textContent=eG.tagName;let Z=document.createElement("input");W.appendChild(Z),Z.type="checkbox",Z.id=eG.tagName,Z.addEventListener("change",e=>{e.target instanceof HTMLInputElement&&(e.target.checked?s.setPrintGrainkbE(new eG):s.removePrintGrainkbE())});let J=i.getElementsByTagName(eH.tagName);if(1==J.length){let e=new eH(R(J[0]),parseFloat(T(y(J[0]))));s.setEigenvalues(e);let i=p("number",e$.tagName+"_"+eH.tagName,t=>{t.target instanceof HTMLInputElement&&(e3(e,t.target),x(t.target))},e.value.toString(),eH.tagName);x(i.querySelector("input")),i.style.marginLeft=eZ,i.style.marginTop="1px",i.style.marginBottom="1px",t.appendChild(i)}else console.warn("eigenvalues.length="+J.length);let Q=i.getElementsByTagName(eF.tagName);if(1==Q.length){let e=parseFloat(T(y(Q[0]))),i=new eF(R(Q[0]),e);s.setDiagramEnergyOffset(i);let n=p("number",e$.tagName+"_"+eF.tagName,e=>{e.target instanceof HTMLInputElement&&(e3(i,e.target),x(e.target))},e.toString(),eF.tagName);x(n.querySelector("input")),n.style.marginLeft=eZ,n.style.marginTop="1px",n.style.marginBottom="1px",t.appendChild(n)}else console.warn("diagramEnergyOffset.length="+Q.length);return t}(n);S.appendChild(c(t,"Control","control_button",ej,"0px","1px","1px","controlList")),e.setControl(s)}!function(){for(var e=document.getElementsByClassName("collapsible"),t=0;t<e.length;t++)e[t].removeEventListener("click",u),e[t].addEventListener("click",u)}()}}(new DOMParser().parseFromString(g,"text/xml"))}}};let h=a.slice(l,l+1048576);o.readAsText(h),l+=1048576}}},g.click(),null!=(a=document.getElementById("load_button"))&&a.addEventListener("click",l),null!=(o=document.getElementById("saveButton"))&&(o.style.display="inline")}()}}),window.setNumberArrayNode=e7,window.set=e3,window.saveXML=function(){console.log("saveXML");let t=new Blob([eV.header,e.toXML("  ","  ")],{type:"text/plain"}),i=URL.createObjectURL(t),s=document.createElement("a");s.href=i,s.download=n,document.body.appendChild(s),s.click(),document.body.removeChild(s)};
//# sourceMappingURL=index.17c45b12.js.map
