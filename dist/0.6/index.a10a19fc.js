let e;function t(e,t){if(!e.has(t))throw Error(`Key ${t} not found in map`);return e.get(t)}function a(e,t){return void 0==t&&(t=", "),e.map(e=>null==e?"null":e.toString()).join(t)}function s(e){let t=[];for(let a=0;a<e.length;a++)i(e[a])&&t.push(parseFloat(e[a]));return t}function i(e){return""!==e&&!isNaN(Number(e))}function n(e){let t=document.getElementById(e);null!=t&&t.parentNode?.removeChild(t)}function o({content:e,buttonLabel:t,buttonFontSize:a="",boundary:s={marginLeft:"",marginTop:"",marginBottom:"",marginRight:""},level:i={marginLeft:"",marginTop:"",marginBottom:"",marginRight:""},contentDivId:n="",contentDivClassName:o=""}){let r=N(s);r.id=n,r.className=o;let d=document.createElement("button");return d.id=n+"Button",d.className="collapsible",d.innerText=`${t} \u{25BC}`,d.addEventListener("click",function(){d.innerText=d.innerText.includes("â–¼")?`${t} \u{25B2}`:`${t} \u{25BC}`}),d.style.fontSize=a,Object.assign(d.style,i),r.appendChild(d),r.appendChild(e),r}function r(){this.classList.toggle("active");let e=this.nextElementSibling;"block"===e.style.display?e.style.display="none":e.style.display="block"}function d(e,t,a,s,i,n,o,r,d){let g;let m=((g=l(e,t,a)).onchange=i,g.value=n,void 0!=r&&(g.style.fontSize=r),h(g),g);Object.assign(m.style,a);let c=x(o,a,d);c.htmlFor=t,Object.assign(c.style,a);let u=f(s);return u.appendChild(c),u.appendChild(m),u}function l(e,t,a){let s=document.createElement("input");return s.type=e,s.id=t,Object.assign(s.style,a),s.classList.add("auto-width"),s}function g(e,t){let a="<"+t;if(e)for(let[t,s]of e)a+=" "+t+'="'+s+'"';return a+" />"}function h(e,t){void 0==t&&(t=4),e.style.width=e.value.length+t+"ch"}function m(e,t){void 0==t&&(t=6),e.style.width=e.value.length+t+"ch"}function c(e,t,a,s){let i=document.createElement("select");return e.forEach(e=>{i.name=t,i.id=a;let s=document.createElement("option");s.value=e,s.text=e,i.appendChild(s)}),i.classList.add("auto-width"),Object.assign(i.style,s),i}function u(e,t){let a=document.createElement("button");return a.textContent=e,Object.assign(a.style,t),a}function p(e,t,a,s){let i=f(s),n=x(e,a);return Object.assign(n.style,a),i.appendChild(n),i.appendChild(u(t,a)),i}function N(e){let t=document.createElement("div");return Object.assign(t.style,e),t}function f(e){let t=N(e);return t.style.display="flex",t}function x(e,t,a){let s=document.createElement("label");return Object.assign(s.style,t),s.textContent=e,void 0!=a&&(s.style.fontSize=a),s}function v(e,t){let a=e.getElementsByTagName(t)[0];if(null==a)throw Error(t+" element not found");return a}function E(e){let t=e.childNodes;if(null==t)throw Error("Element has no childNodes");return t[0]}function b(e){let t=e.nodeValue;if(null==t)throw Error("nodeValue is null");return t}function T(e){let t=E(e);return t?b(t).trim():""}class C{constructor(e){this.tagName=e}toXML(e){let t=g(void 0,this.tagName);return e?"\n"+e+t:t}}class S extends C{constructor(e,t){super(t),this.attributes=e}toString(){let e=this.tagName+"(";return this.attributes&&this.attributes.forEach((t,a)=>{e+=`${a}(${t}), `}),e}toXML(e){let t="";for(let[a,s]of(void 0!=e&&(t+="\n"+e),t+="<"+this.tagName,this.attributes))t+=" "+a+'="'+s.toString()+'"';return t+" />"}}class y extends S{constructor(e,t,a){super(e,t),this.value=a}toString(){return super.toString()+`, ${this.value.toString()})`}toXML(e){return L(this.value.trim(),this.tagName,this.attributes,e,!1)}}class _ extends S{constructor(e,t,a){super(e,t),this.value=a}toString(){return super.toString()+`, ${this.value.toString()})`}toXML(e){return L(this.value.toString().trim(),this.tagName,this.attributes,e,!1)}}class w extends S{constructor(e,t,a,s){super(e,t),this.delimiter=",",this.values=a,void 0!=s&&(this.delimiter=s)}toString(){return super.toString()+`, ${this.values.toString()})`}setDelimiter(e){this.delimiter=e}toXML(e){return L(this.values.toString().replaceAll(",",this.delimiter),this.tagName,this.attributes,e,!1)}}class M extends S{constructor(e,t){super(e,t),this.nodes=new Map}addNode(e){this.nodes.set(this.nodes.size,e)}toString(){let e=super.toString();return this.nodes.forEach((t,a)=>{e+=`, ${t.toString()}`}),e+")"}toXML(e,t){let a;void 0!=e&&void 0!=t&&(a=t+e);let s="";if(this.nodes.size>0)return this.nodes.forEach(t=>{t instanceof M?s+=t.toXML(e,a):s+=t.toXML(a)}),L(s,this.tagName,this.attributes,t,!0);{let e=g(this.attributes,this.tagName);return void 0!=t?"\n"+t+e:e}}}function L(e,t,a,s,i){let n;return function(e,t,a){let s="";if(void 0!=a&&(s+="\n"+a),s+="<"+e,t)for(let[e,a]of t)s+=" "+e+'="'+a.toString()+'"';return s+">"}(t,a,s)+e+(n="",i&&void 0!=s&&(n+="\n"+s),n+"</"+t+">")}function P(e){let t=e.getAttributeNames(),a=new Map;return t.forEach(function(t){let s=e.getAttribute(t);null!=s&&a.set(t,s)}),a}function z(e,t){let a=e.getElementsByTagName(t);if(1!=a.length)throw Error("Expecting 1 "+t+" but finding "+a.length);return a[0]}class R extends S{static{this.tagName="atom"}constructor(e){super(e,R.tagName);let t=e.get("elementType");if(void 0==t)throw Error("elementType is undefined");this.elementType=t;let a=e.get("id");void 0==a&&(a=this.elementType),this.id=a}}class I extends M{static{this.tagName="atomArray"}constructor(e,t){super(e,I.tagName),t.forEach(e=>{this.nodes.set(this.nodes.size,e)})}}class B extends S{static{this.tagName="bond"}static{this.s_atomRefs2="atomRefs2"}static{this.s_id="id"}static{this.s_order="order"}constructor(e){super(e,B.tagName);let t=e.get(B.s_atomRefs2);if(void 0==t)throw Error(B.s_atomRefs2+" is undefined!");this.atomRefs2=t}setAtomRefs2(e){this.atomRefs2=e,this.attributes.set(B.s_atomRefs2,e)}getId(){return this.attributes.get(B.s_id)}setId(e){this.attributes.set(B.s_id,e)}getOrder(){let e=this.attributes.get(B.s_order);if(void 0!=e)return parseFloat(e)}setOrder(e){this.attributes.set(B.s_order,e.toString())}}class O extends M{static{this.tagName="bondArray"}constructor(e,t){super(e,O.tagName),this.bonds=t,t.forEach(e=>{this.nodes.set(this.nodes.size,e)})}getBond(e){return this.bonds[e]}getBonds(){return this.bonds}setBond(e,t){this.bonds[e]=t,this.nodes.set(e,t)}addBond(e){this.bonds.push(e),this.nodes.set(this.nodes.size,e)}removeBond(e){this.bonds.splice(e,1),this.nodes.delete(e)}getBondIds(){let e=new Set;return this.bonds.forEach(t=>{e.add(t.getId())}),e}}class k extends _{static{this.tagName="scalar"}static{this.s_units="units"}constructor(e,t){super(e,k.tagName,t)}updateUnits(e){if(e){let t=this.attributes.get(k.s_units);void 0!=t&&t!=e&&this.attributes.set(k.s_units,e)}}}class F extends w{static{this.tagName="array"}static{this.s_units="units"}constructor(e,t,a){super(e,F.tagName,t,a)}updateUnits(e){if(e){let t=this.attributes.get(F.s_units);void 0!=t&&t!=e&&(this.attributes.set(F.s_units,e),console.log("Units changed from "+t+" to "+e))}}}class D extends M{static{this.tagName="property"}static{this.s_dictRef="dictRef"}constructor(e,t){super(e,D.tagName);let a=e.get(D.s_dictRef);if(void 0==a)throw Error(D.s_dictRef+" is undefined!");this.dictRef=a,t&&this.nodes.set(0,t)}getProperty(){return this.nodes.get(0)}setProperty(e){this.nodes.set(0,e)}}class H extends D{static{this.dictRef="me:ZPE"}static{this.units=["kJ/mol","cm-1","kcal/mol","Hartree"]}constructor(e,t){super(e,t)}setUnits(e){this.getProperty().updateUnits(e)}}class G extends D{static{this.dictRef="me:frequenciesScaleFactor"}constructor(e,t){super(e,t)}}class A extends D{static{this.dictRef="me:vibFreqs"}constructor(e,t){super(e,t)}}class U extends D{static{this.dictRef="me:rotConsts"}static{this.units=["cm-1","GHz"]}constructor(e,t){super(e,t)}}class q extends D{static{this.dictRef="me:MW"}constructor(e,t){super(e,t)}}class j extends D{static{this.dictRef="me:imFreqs"}constructor(e,t){super(e,t)}}class $ extends M{static{this.tagName="propertyList"}constructor(e,t){super(e,$.tagName),this.index=new Map,void 0!=t&&t.forEach(e=>{this.nodes.set(this.nodes.size,e),this.index.set(e.dictRef,this.nodes.size-1)})}getProperty(e){let t=this.index.get(e);if(void 0!=t)return this.nodes.get(t);throw Error("Property "+e+" does not exist")}setProperty(e){let t=this.index.get(e.dictRef);void 0==t?(this.nodes.set(this.nodes.size,e),this.index.set(e.dictRef,this.nodes.size-1)):(console.log("Property "+e.dictRef+" already exists, updating..."),this.nodes.set(t,e))}}class X extends _{static{this.tagName="me:deltaEDown"}static{this.s_bathGas="bathGas"}static{this.s_units="units"}static{this.s_lower="lower"}static{this.s_upper="upper"}static{this.s_stepsize="stepsize"}constructor(e,t){super(e,X.tagName,t)}getBathGas(){return this.attributes.get(X.s_bathGas)}setBathGas(e){this.attributes.set(X.s_bathGas,e)}getUnits(){return this.attributes.get(X.s_units)}setUnits(e){this.attributes.set(X.s_units,e)}getLower(){return parseFloat(t(this.attributes,X.s_lower))}setLower(e){this.attributes.set(X.s_lower,e.toString())}getUpper(){return parseFloat(t(this.attributes,X.s_upper))}setUpper(e){this.attributes.set(X.s_upper,e.toString())}getStepsize(){return parseFloat(t(this.attributes,X.s_stepsize))}setStepsize(e){this.attributes.set(X.s_stepsize,e.toString())}setValue(e){this.value=e}}class V extends M{static{this.tagName="me:energyTransferModel"}constructor(e,t){super(e,V.tagName),void 0!=t&&t.forEach(e=>{this.nodes.set(this.nodes.size,e)})}getDeltaEDowns(){let e=[];return this.nodes.forEach(t=>{t instanceof X&&e.push(t)}),e}setDeltaEDowns(e){this.nodes.clear(),e.forEach(e=>{this.nodes.set(this.nodes.size,e)})}getDeltaEDown(e){if(e<0||e>=this.nodes.size)throw Error("index out of range");return this.nodes.get(e)}setDeltaEDown(e,t){this.nodes.set(e,t)}addDeltaEDown(e){return this.nodes.set(this.nodes.size,e),this.nodes.size-1}}class W extends S{static{this.tagName="me:DOSCMethod"}static{this.s_xsi_type="xsi:type"}constructor(e){if(super(e,W.tagName),void 0==e.get(W.s_xsi_type)){let t=e.get("name");if(void 0==t)throw Error("Neither xsi:type or name are defined.");e.set(W.s_xsi_type,t)}}getXsiType(){return this.attributes.get(W.s_xsi_type)}setXsiType(e){this.attributes.set(W.s_xsi_type,e)}}class Y extends y{static{this.tagName="me:bondRef"}constructor(e,t){super(e,Y.tagName,t)}}class J extends S{static{this.tagName="me:PotentialPoint"}static{this.s_angle="angle"}static{this.s_potential="potential"}constructor(e){super(e,J.tagName);let t=e.get(J.s_angle);if(void 0==t)throw Error(J.s_potential+" is undefined!");this.angle=parseFloat(t);let a=e.get(J.s_potential);if(void 0==a)throw Error(J.s_potential+" is undefined!");this.potential=parseFloat(a)}getAngle(){return this.angle}setAngle(e){this.angle=e,this.attributes.set(J.s_angle,e.toString())}getPotential(){return this.potential}setPotential(e){this.potential=e,this.attributes.set(J.s_potential,e.toString())}}class K extends M{static{this.tagName="me:HinderedRotorPotential"}static{this.formats=["numerical","analytical"]}static{this.units=["kJ/mol","cm-1","Hartree"]}static{this.s_format="format"}static{this.s_units="units"}static{this.s_expansionSize="expansionSize"}static{this.s_useSineTerms="useSineTerms"}constructor(e,t){super(e,K.tagName);let a=e.get(K.s_format);if(void 0==a)throw Error(K.s_format+" is undefined!");this.format=a;let s=e.get(K.s_units);if(void 0==s)throw Error(K.s_units+" is undefined!");this.units=s,void 0!=t&&t.forEach(e=>{this.nodes.set(this.nodes.size,e)});let i=e.get(K.s_expansionSize);if(void 0==i)throw Error(K.s_expansionSize+" is undefined!");this.expansionSize=parseFloat(i);let n=e.get(K.s_useSineTerms);if(void 0==n)throw Error(K.s_useSineTerms+" is undefined!");this.useSineTerms="yes"==n}getFormat(){return this.format}setFormat(e){this.format=e,this.attributes.set(K.s_format,e)}getUnits(){return this.units}setUnits(e){this.units=e,this.attributes.set(K.s_units,e)}getExpansionSize(){return this.expansionSize}setExpansionSize(e){this.expansionSize=e,this.attributes.set(K.s_expansionSize,e.toString())}getUseSineTerms(){return this.useSineTerms}setUseSineTerms(e){this.useSineTerms=e,this.attributes.set(K.s_useSineTerms,e?"yes":"no")}getPotentialPoint(e){return this.nodes.get(e)}setPotentialPoint(e,t){this.nodes.set(e,t)}setPotentialPoints(e){this.nodes.clear(),e.forEach(e=>{this.nodes.set(this.nodes.size,e)})}addPotentialPoint(e){return this.nodes.set(this.nodes.size,e),this.nodes.size-1}removePotentialPoint(e){this.nodes.delete(e)}}class Q extends _{static{this.tagName="me:periodicity"}constructor(e,t){super(e,Q.tagName,t)}}class Z extends M{static{this.tagName="me:ExtraDOSCMethod"}constructor(e,t,a,s){super(e,Z.tagName),this.index=new Map,t&&(this.nodes.set(this.nodes.size,t),this.index.set(Y.tagName,this.nodes.size-1)),a&&(this.nodes.set(this.nodes.size,a),this.index.set(K.tagName,this.nodes.size-1)),s&&(this.nodes.set(this.nodes.size,s),this.index.set(Q.tagName,this.nodes.size-1))}getBondRef(){let e=this.index.get(Y.tagName);if(void 0!=e)return this.nodes.get(e)}setBondRef(e){let t=this.index.get(Y.tagName);void 0!=t?this.nodes.set(t,e):(this.nodes.set(this.nodes.size,e),this.index.set(Y.tagName,this.nodes.size-1))}getHinderedRotorPotential(){let e=this.index.get(K.tagName);if(void 0!=e)return this.nodes.get(e)}setHinderedRotorPotential(e){let t=this.index.get(K.tagName);void 0!=t?this.nodes.set(t,e):(this.nodes.set(this.nodes.size,e),this.index.set(K.tagName,this.nodes.size-1))}getPeriodicity(){let e=this.index.get(Q.tagName);if(void 0!=e)return this.nodes.get(e)}setPeriodicity(e){let t=this.index.get(Q.tagName);void 0!=t?this.nodes.set(t,e):(this.nodes.set(this.nodes.size,e),this.index.set(Q.tagName,this.nodes.size-1))}}class ee extends _{static{this.tagName="me:reservoirSize"}constructor(e,t){super(e,ee.tagName,t)}}class et extends M{static{this.tagName="molecule"}static{this.s_id="id"}static{this.s_description="description"}static{this.s_active="active"}constructor(e,t,a,s,i,n,o,r){super(e,et.tagName),this.index=new Map;let d=e.get(et.s_id);if(void 0==d)throw Error(et.s_id+" is undefined");this.id=d;let l=0;t&&(this.nodes.set(l,t),t instanceof R?this.index.set(R.tagName,l):this.index.set(I.tagName,l),l++),a&&(this.nodes.set(l,a),this.index.set(O.tagName,l),l++),s&&(this.nodes.set(l,s),this.index.set($.tagName,l),l++),i&&(this.nodes.set(l,i),this.index.set(V.tagName,l),l++),n&&(this.nodes.set(l,n),this.index.set(W.tagName,l)),o&&(this.nodes.set(l,o),this.index.set(Z.tagName,l)),r&&(this.nodes.set(l,r),this.index.set(ee.tagName,l))}getDescription(){return this.attributes.get(et.s_description)}setDescription(e){this.attributes.set(et.s_description,e)}getActive(){let e=this.attributes.get(et.s_active);if(void 0!=e)return"true"==e}setActive(e){this.attributes.set(et.s_active,e.toString())}getLabel(){let e=this.id,t=this.getDescription();return void 0!=t&&(e+=" ("+t+")"),this.getActive()&&(e+=" ("+et.s_active+")"),e}getAttributesAsString(){return Array.from(this.attributes,([e,t])=>`${e}="${t}"`).join(", ")}getProperties(){let e=this.index.get($.tagName);if(void 0!=e||void 0!=(e=this.index.get(D.tagName)))return this.nodes.get(e)}setProperties(e){let t=this.index.get($.tagName);void 0==t?(this.index.set($.tagName,this.nodes.size),this.addNode(e)):this.nodes.set(t,e)}getProperty(e){let t=this.getProperties();if(void 0!=t)return t instanceof $?t.getProperty(e):t}setProperty(e){let t=this.getProperties();void 0!=t?t instanceof $?t.setProperty(e):this.setProperties(t):this.setProperties(e)}getAtoms(){let e=this.index.get(R.tagName);if(void 0!=e||void 0!=(e=this.index.get(I.tagName)))return this.nodes.get(e)}getBonds(){let e=this.index.get(O.tagName);if(void 0!=e)return this.nodes.get(e)}getEnergyTransferModel(){let e=this.index.get(V.tagName);if(void 0!=e)return this.nodes.get(e)}setEnergyTransferModel(e){let t=this.index.get(V.tagName);void 0==t?(this.index.set(V.tagName,this.nodes.size),this.addNode(e)):this.nodes.set(t,e)}getDOSCMethod(){let e=this.index.get(W.tagName);if(void 0!=e)return this.nodes.get(e)}setDOSCMethod(e){let t=this.index.get(W.tagName);void 0==t?(this.index.set(W.tagName,this.nodes.size),this.addNode(e)):this.nodes.set(t,e)}getExtraDOSCMethod(){let e=this.index.get(Z.tagName);if(void 0!=e)return this.nodes.get(e)}setExtraDOSCMethod(e){let t=this.index.get(Z.tagName);void 0==t?(this.index.set(Z.tagName,this.nodes.size),this.addNode(e)):this.nodes.set(t,e)}getReservoirSize(){let e=this.index.get(ee.tagName);if(void 0!=e)return this.nodes.get(e)}setReservoirSize(e){let t=this.index.get(ee.tagName);void 0==t?(this.index.set(ee.tagName,this.nodes.size),this.addNode(e)):this.nodes.set(t,e)}getEnergy(){let e=this.getProperty(H.dictRef);if(void 0==e)throw console.log(this.toString()),Error(H.dictRef+" property not found!");return e.getProperty().value}}class ea extends S{static{this.tagName="molecule"}constructor(e){super(e,ea.tagName),this.ref=e.get("ref"),this.role=e.get("role")}setRole(e){this.role=e}}class es extends M{static{this.tagName="reactant"}constructor(e,t){super(e,es.tagName),this.addNode(t)}getMolecule(){return this.nodes.get(0)}}class ei extends M{static{this.tagName="product"}constructor(e,t){super(e,ei.tagName),this.addNode(t)}getMolecule(){return this.nodes.get(0)}}class en extends M{static{this.tagName="me:transitionState"}constructor(e,t){super(e,en.tagName),this.addNode(t)}getMolecule(){return this.nodes.get(0)}}class eo extends _{static{this.tagName="me:preExponential"}constructor(e,t){super(e,eo.tagName,t)}}class er extends _{static{this.tagName="me:activationEnergy"}constructor(e,t){super(e,er.tagName,t)}}class ed extends _{static{this.tagName="me:TInfinity"}constructor(e,t){super(e,ed.tagName,t)}}class el extends _{static{this.tagName="me:nInfinity"}constructor(e,t){super(e,el.tagName,t)}}class eg extends M{static{this.tagName="me:MCRCMethod"}constructor(e){super(e,eg.tagName)}}class eh extends eg{static{this.xsiType="me:MesmerILT"}static{this.xsiType2="MesmerILT"}constructor(e,t,a,s,i){super(e),this.index=new Map,void 0!=t&&(this.index.set(eo.tagName,this.index.size),this.addNode(t)),void 0!=a&&(this.index.set(er.tagName,this.index.size),this.addNode(a)),void 0!=s&&(this.index.set(ed.tagName,this.index.size),this.addNode(s)),void 0!=i&&(this.index.set(el.tagName,this.index.size),this.addNode(i))}getPreExponential(){let e=this.index.get(eo.tagName);if(void 0!=e)return this.nodes.get(e)}setPreExponential(e){let t=this.index.get(eo.tagName);void 0==t?(this.index.set(eo.tagName,this.nodes.size),this.addNode(e)):this.nodes.set(t,e)}getActivationEnergy(){let e=this.index.get(er.tagName);if(void 0!=e)return this.nodes.get(e)}setActivationEnergy(e){let t=this.index.get(er.tagName);void 0==t?(this.index.set(er.tagName,this.nodes.size),this.addNode(e)):this.nodes.set(t,e)}getTInfinity(){let e=this.index.get(ed.tagName);if(void 0!=e)return this.nodes.get(e)}setTInfinity(e){let t=this.index.get(ed.tagName);void 0==t?(this.index.set(ed.tagName,this.nodes.size),this.addNode(e)):this.nodes.set(t,e)}getNInfinity(){let e=this.index.get(el.tagName);if(void 0!=e)return this.nodes.get(e)}setNInfinity(e){let t=this.index.get(el.tagName);void 0==t?(this.index.set(el.tagName,this.nodes.size),this.addNode(e)):this.nodes.set(t,e)}}class em extends S{static{this.tagName="me:tunneling"}static{this.s_name="name"}constructor(e){super(e,em.tagName)}getName(){return this.attributes.get(em.s_name)}setName(e){this.attributes.set(em.s_name,e)}}class ec extends _{static{this.tagName="me:excessReactantConc"}constructor(e,t){super(e,ec.tagName,t)}}class eu extends M{static{this.tagName="reaction"}static{this.s_id="id"}constructor(e,t,a,s,i,n,o){super(e,eu.tagName),this.index=new Map,this.reactantsIndex=new Map,this.productsIndex=new Map,this.transitionStatesIndex=new Map;let r=e.get(eu.s_id);if(void 0==r)throw Error(eu.s_id+" is undefined!");this.id=r,void 0!=t&&(t.forEach(e=>{this.reactantsIndex.set(e.getMolecule().ref,this.nodes.size),this.addNode(e)}),this.index.set(es.tagName,this.reactantsIndex)),void 0!=a&&(a.forEach(e=>{this.productsIndex.set(e.getMolecule().ref,this.nodes.size),this.addNode(e)}),this.index.set(ei.tagName,this.productsIndex)),void 0!=s&&(this.index.set(em.tagName,this.nodes.size),this.addNode(s)),void 0!=i&&(i.forEach(e=>{this.transitionStatesIndex.set(e.getMolecule().ref,this.nodes.size),this.addNode(e)}),this.index.set(en.tagName,this.transitionStatesIndex)),void 0!=n&&(this.index.set(eg.tagName,this.nodes.size),this.addNode(n)),void 0!=o&&(this.index.set(ec.tagName,this.nodes.size),this.addNode(o))}addToIndex(e,t){let a=this.index.get(e);if(void 0==a)this.index.set(e,this.nodes.size);else if(a instanceof Map)a.set(t.tagName,this.nodes.size);else{let s=new Map;s.set(this.nodes.get(a).ref,a),s.set(t.tagName,this.nodes.size),this.index.set(e,s)}}getReactants(){let e=this.index.get(es.tagName);return void 0==e?[]:e instanceof Map?Array.from(e.values()).map(e=>this.nodes.get(e)):[this.nodes.get(e)]}setReactants(e){e.forEach(e=>{this.reactantsIndex.set(e.getMolecule().ref,this.nodes.size),this.addNode(e)}),this.index.set(es.tagName,this.reactantsIndex)}getReactant(e){let t=this.reactantsIndex.get(e);if(void 0==t)throw Error(`Reactant with ref ${e} not found`);return this.nodes.get(t)}addReactant(e){this.reactantsIndex.set(e.getMolecule().ref,this.nodes.size),this.addNode(e)}removeReactant(e){let t=this.reactantsIndex.get(e);if(void 0==t)throw Error(`Reactant with ref ${e} not found`);this.nodes.delete(t),this.reactantsIndex.delete(e)}getProducts(){let e=this.index.get(ei.tagName);return void 0==e?[]:e instanceof Map?Array.from(e.values()).map(e=>this.nodes.get(e)):[this.nodes.get(e)]}setProducts(e){e.forEach(e=>{this.productsIndex.set(e.getMolecule().ref,this.nodes.size),this.addNode(e)}),this.index.set(ei.tagName,this.productsIndex)}getProduct(e){let t=this.productsIndex.get(e);if(void 0==t)throw Error(`Product with ref ${e} not found`);return this.nodes.get(t)}addProduct(e){this.productsIndex.set(e.getMolecule().ref,this.nodes.size),this.addNode(e)}removeProduct(e){let t=this.productsIndex.get(e);if(void 0==t)throw Error(`Product with ref ${e} not found`);this.nodes.delete(t),this.productsIndex.delete(e)}getTunneling(){let e=this.index.get(em.tagName);if(void 0!=e)return this.nodes.get(e)}setTunneling(e){let t=this.index.get(em.tagName);if(void 0==t)this.index.set(em.tagName,this.nodes.size),this.addNode(e);else{if(t instanceof Map)throw Error("Tunneling is a map and it is assumed there would be only 1!");this.nodes.set(t,e)}}getTransitionStates(){let e=this.index.get(en.tagName);return void 0==e?[]:e instanceof Map?Array.from(e.values()).map(e=>this.nodes.get(e)):[this.nodes.get(e)]}setTransitionStates(e){e.forEach(e=>{this.transitionStatesIndex.set(e.getMolecule().ref,this.nodes.size),this.addNode(e)}),this.index.set(en.tagName,this.transitionStatesIndex)}getTransitionState(e){let t=this.transitionStatesIndex.get(e);if(void 0==t)throw Error(`Transition state with ref ${e} not found`);return this.nodes.get(t)}addTransitionState(e){this.transitionStatesIndex.set(e.getMolecule().ref,this.nodes.size),this.addNode(e)}removeTransitionState(e){let t=this.transitionStatesIndex.get(e);if(void 0==t)throw Error(`Transition State with ref ${e} not found`);this.nodes.delete(t),this.transitionStatesIndex.delete(e)}getMCRCMethod(){let e=this.index.get(eg.tagName);if(void 0!=e)return this.nodes.get(e)}setMCRCMethod(e){let t=this.index.get(eg.tagName);if(void 0==t)this.index.set(eg.tagName,this.nodes.size),this.addNode(e);else{if(t instanceof Map)throw Error("MCRCMethod is a map and it is assumed there would be only 1!");this.nodes.set(t,e)}}getExcessReactantConc(){let e=this.index.get(ec.tagName);if(void 0!=e)return this.nodes.get(e)}setExcessReactantConc(e){let t=this.index.get(ec.tagName);if(void 0==t)this.index.set(ec.tagName,this.nodes.size),this.addNode(e);else{if(t instanceof Map)throw Error("ExcessReactantConc is a map and it is assumed there would be only 1!");this.nodes.set(t,e)}}getReactantsLabel(){return this.getReactants().map(e=>e.getMolecule().ref).join(" + ")}getProductsLabel(){return this.getProducts().map(e=>e.getMolecule().ref).join(" + ")}getLabel(){return this.getReactantsLabel()+" -> "+this.getProductsLabel()}getReactantsEnergy(e){return Array.from(this.getReactants()).map(t=>{let a=e.get(t.getMolecule().ref);if(void 0==a)throw Error(`Molecule with ref ${t.getMolecule().ref} not found`);return a.getEnergy()}).reduce((e,t)=>e+t,0)}getProductsEnergy(e){return Array.from(this.getProducts()).map(t=>{let a=e.get(t.getMolecule().ref);if(void 0==a)throw Error(`Molecule with ref ${t.getMolecule().ref} not found`);return a.getEnergy()}).reduce((e,t)=>e+t,0)}get(e,t){if(this.index.has(e)){let a=this.index.get(e);if(void 0!=a){if(!(a instanceof Map))return this.nodes.get(a);{let e=a.get(t);if(void 0!=e)return this.nodes.get(e)}}}}}function ep(e,t,a,s,i,n,o,r,d,l,g){let h=s+(n-s)/2;ef(e,g,r,t,h-ex(e,g,r)/2,o+d),ef(e,l,r,t,h-ex(e,l,r)/2,o+3*d),eN(e,t,a,s,i,n,o)}function eN(e,t,a,s,i,n,o){e.beginPath(),e.strokeStyle=t,e.lineWidth=a,e.moveTo(s,i),e.lineTo(n,o),e.stroke()}function ef(e,t,a,s,i,n){e.save(),e.translate(i,n),e.scale(1,-1),e.font=a,e.fillStyle=s,e.fillText(t,0,0),e.restore()}function ex(e,t,a){return e.font=a,e.measureText(t).width}class ev extends y{static{this.tagName="me:bathGas"}constructor(e,t){super(e,ev.tagName,t)}}class eE extends _{static{this.tagName="me:experimentRate"}static{this.s_ref1="ref1"}static{this.s_ref2="ref2"}static{this.s_refReaction="refReaction"}static{this.s_error="error"}constructor(e,t){super(e,eE.tagName,t)}getRef1(){return this.attributes.get(eE.s_ref1)}setRef1(e){this.attributes.set(eE.s_ref1,e)}getRef2(){return this.attributes.get(eE.s_ref2)}setRef2(e){this.attributes.set(eE.s_ref2,e)}getRefReaction(){return this.attributes.get(eE.s_refReaction)}setRefReaction(e){this.attributes.set(eE.s_refReaction,e)}getError(){let e=this.attributes.get(eE.s_error);if(void 0!=e)return parseFloat(e)}setError(e){this.attributes.set(eE.s_error,e.toString())}}class eb extends _{static{this.tagName="me:experimentalYield"}static{this.s_ref="ref"}static{this.s_error="error"}static{this.s_yieldTime="yieldTime"}constructor(e,t){super(e,eb.tagName,t)}getRef(){return this.attributes.get(eb.s_ref)}setRef(e){this.attributes.set(eb.s_ref,e)}getError(){let e=this.attributes.get(eb.s_error);if(void 0!=e)return parseFloat(e)}setError(e){this.attributes.set(eb.s_error,e.toString())}getYieldTime(){let e=this.attributes.get(eb.s_yieldTime);if(e)return parseFloat(e)}setYieldTime(e){this.attributes.set(eb.s_yieldTime,e.toString())}}class eT extends _{static{this.tagName="me:experimentalEigenvalue"}static{this.s_EigenvalueID="EigenvalueID"}static{this.s_error="error"}constructor(e,t){super(e,eT.tagName,t)}getEigenvalueID(){return this.attributes.get(eT.s_EigenvalueID)}setEigenvalueID(e){this.attributes.set(eT.s_EigenvalueID,e)}getError(){let e=this.attributes.get(eT.s_error);if(void 0!=e)return parseFloat(e)}setError(e){this.attributes.set(eT.s_error,e.toString())}}class eC extends _{static{this.tagName="me:excessReactantConc"}static{this.s_percent="percent"}constructor(e,t){super(e,eC.tagName,t)}getPercent(){return this.attributes.get(eC.s_percent)}setPercent(e){this.attributes.set(eC.s_percent,e)}}class eS extends M{static{this.tagName="me:PTpair"}static{this.precisions=["d","dd","qd","double","double-double","quad-double"]}static{this.pressureUnits=["Torr","PPCC","atm","mbar","psi","mols/cc"]}static{this.s_P="P"}static{this.s_T="T"}static{this.s_precision="precision"}static{this.s_excessReactantConc="excessReactantConc"}static{this.s_percentExcessReactantConc="percentExcessReactantConc"}constructor(e,t,a,s,i){super(e,eS.tagName),this.index=new Map,void 0!=t&&(this.index.set(ev.tagName,this.nodes.size),this.addNode(t)),void 0!=a&&(this.index.set(eE.tagName,this.nodes.size),this.addNode(a)),void 0!=s&&(this.index.set(eb.tagName,this.nodes.size),this.addNode(s)),void 0!=i&&(this.index.set(eT.tagName,this.nodes.size),this.addNode(i))}getP(){let e=this.attributes.get(eS.s_P);return void 0!=e?parseFloat(e):NaN}setP(e){this.attributes.set(eS.s_P,e.toString())}getT(){let e=this.attributes.get(eS.s_T);return void 0!=e?parseFloat(e):NaN}setT(e){this.attributes.set(eS.s_T,e.toString())}getPrecision(){return this.attributes.get(eS.s_precision)}setPrecision(e){this.attributes.set(eS.s_precision,e)}getBathGas(){let e=this.index.get(ev.tagName);return void 0!=e?this.nodes.get(e):void 0}setBathGas(e){let t=this.index.get(ev.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(ev.tagName,this.nodes.size),this.addNode(e))}removeBathGas(){let e=this.index.get(ev.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(ev.tagName))}getExperimentRate(){let e=this.index.get(eE.tagName);return void 0!=e?this.nodes.get(e):void 0}setExperimentRate(e){let t=this.index.get(eE.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eE.tagName,this.nodes.size),this.addNode(e))}removeExperimentRate(){let e=this.index.get(eE.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(eE.tagName))}getExcessReactantConc(){return this.attributes.get(eS.s_excessReactantConc)}setExcessReactantConc(e){this.attributes.set(eS.s_excessReactantConc,e)}getPercentExcessReactantConc(){return this.attributes.get(eS.s_percentExcessReactantConc)}setPercentExcessReactantConc(e){this.attributes.set(eS.s_percentExcessReactantConc,e)}}class ey extends M{static{this.tagName="me:PTs"}constructor(e,t){super(e,ey.tagName),void 0!=t?(t.forEach(e=>{this.addNode(e)}),this.pTpairs=t):this.pTpairs=[]}getPTpair(e){return this.pTpairs[e]}setPTpair(e,t){this.nodes.set(e,t),this.pTpairs[e]=t}addPTpair(e){return this.addNode(e),this.pTpairs.push(e),this.nodes.size-1}setPTpairs(e){this.nodes.clear(),e.forEach(e=>{this.addNode(e),this.pTpairs.push(e)})}removePTpair(e){this.nodes.delete(e),this.pTpairs.splice(e,1)}}class e_ extends M{static{this.tagName="me:conditions"}constructor(e,t,a){super(e,e_.tagName),this.index=new Map,this.bathGasesIndex=new Map,this.bathGases=new Set,void 0!=t&&(this.index.set(ev.tagName,this.nodes.size),t.forEach(e=>{this.bathGasesIndex.set(e.value,this.nodes.size),this.addNode(e),this.bathGases.add(e)})),void 0!=a&&(this.index.set(ey.tagName,this.nodes.size),this.addNode(a))}getBathGases(){return this.bathGases}addBathGas(e){this.bathGases.has(e)||(this.bathGases.add(e),this.bathGasesIndex.set(e.value,this.nodes.size),this.addNode(e))}removeBathGas(e){this.bathGases.has(e)?(this.bathGases.delete(e),this.nodes.delete(this.bathGasesIndex.get(e.value))):console.warn("Conditions.removeBathGas: bathGas not found to remove.")}getPTs(){let e=this.index.get(ey.tagName);if(void 0!=e)return this.nodes.get(e)}setPTs(e){let t=this.index.get(ey.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(ey.tagName,this.nodes.size),this.addNode(e))}}class ew extends _{static{this.tagName="me:grainSize"}constructor(e,t){super(e,ew.tagName,t)}}class eM extends _{static{this.tagName="me:automaticallySetMaxEne"}constructor(e,t){super(e,eM.tagName,t)}}class eL extends _{static{this.tagName="me:energyAboveTheTopHill"}constructor(e,t){super(e,eL.tagName,t)}}class eP extends _{static{this.tagName="me:maxTemperature"}constructor(e,t){super(e,eP.tagName,t)}}class ez extends M{static{this.tagName="me:modelParameters"}constructor(e,t,a,s,i){super(e,ez.tagName),this.index=new Map,void 0!=t&&(this.index.set(ew.tagName,this.nodes.size),this.addNode(t)),void 0!=a&&(this.index.set(eM.tagName,this.nodes.size),this.addNode(a)),void 0!=s&&(this.index.set(eL.tagName,this.nodes.size),this.addNode(s)),void 0!=i&&(this.index.set(eP.tagName,this.nodes.size),this.addNode(i))}getGrainSize(){let e=this.index.get(ew.tagName);if(e)return this.nodes.get(e)}setGrainSize(e){let t=this.index.get(ew.tagName);t?this.nodes.set(t,e):(this.index.set(ew.tagName,this.nodes.size),this.addNode(e))}removeGrainSize(){let e=this.index.get(ew.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(ew.tagName))}getAutomaticallySetMaxEne(){let e=this.index.get(eM.tagName);if(e)return this.nodes.get(e)}setAutomaticallySetMaxEne(e){let t=this.index.get(eM.tagName);t?this.nodes.set(t,e):(this.index.set(eM.tagName,this.nodes.size),this.addNode(e))}removeAutomaticallySetMaxEne(){let e=this.index.get(eM.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(eM.tagName))}getEnergyAboveTheTopHill(){let e=this.index.get(eL.tagName);if(e)return this.nodes.get(e)}setEnergyAboveTheTopHill(e){let t=this.index.get(eL.tagName);t?this.nodes.set(t,e):(this.index.set(eL.tagName,this.nodes.size),this.addNode(e))}removeEnergyAboveTheTopHill(){let e=this.index.get(eL.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(eL.tagName))}getMaxTemperature(){let e=this.index.get(eP.tagName);if(e)return this.nodes.get(e)}setMaxTemperature(e){let t=this.index.get(eP.tagName);t?this.nodes.set(t,e):(this.index.set(eP.tagName,this.nodes.size),this.addNode(e))}removeMaxTemperature(){let e=this.index.get(eP.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(eP.tagName))}}class eR extends C{static{this.tagName="me:calculateRateCoefficientsOnly"}constructor(){super(eR.tagName)}}class eI extends C{static{this.tagName="me:printCellDOS"}constructor(){super(eI.tagName)}}class eB extends C{static{this.tagName="me:printCellTransitionStateFlux"}constructor(){super(eB.tagName)}}class eO extends C{static{this.tagName="me:printReactionOperatorColumnSums"}constructor(){super(eO.tagName)}}class ek extends C{static{this.tagName="me:printGrainBoltzmann"}constructor(){super(ek.tagName)}}class eF extends C{static{this.tagName="me:printGrainDOS"}constructor(){super(eF.tagName)}}class eD extends C{static{this.tagName="me:printGrainkbE"}constructor(){super(eD.tagName)}}class eH extends C{static{this.tagName="me:printGrainkfE"}constructor(){super(eH.tagName)}}class eG extends C{static{this.tagName="me:printTSsos"}constructor(){super(eG.tagName)}}class eA extends C{static{this.tagName="me:printGrainedSpeciesProfile"}constructor(){super(eA.tagName)}}class eU extends C{static{this.tagName="me:printGrainTransitionStateFlux"}constructor(){super(eU.tagName)}}class eq extends C{static{this.tagName="me:printReactionOperatorSize"}constructor(){super(eq.tagName)}}class ej extends C{static{this.tagName="me:printSpeciesProfile"}constructor(){super(ej.tagName)}}class e$ extends C{static{this.tagName="me:printPhenomenologicalEvolution"}constructor(){super(e$.tagName)}}class eX extends C{static{this.tagName="me:printTunnelingCoefficients"}constructor(){super(eX.tagName)}}class eV extends C{static{this.tagName="me:printCrossingCoefficients"}constructor(){super(eV.tagName)}}class eW extends C{static{this.tagName="me:testDOS"}constructor(){super(eW.tagName)}}class eY extends C{static{this.tagName="me:testRateConstants"}constructor(){super(eY.tagName)}}class eJ extends C{static{this.tagName="me:useTheSameCellNumberForAllConditions"}constructor(){super(eJ.tagName)}}class eK extends C{static{this.tagName="me:ForceMacroDetailedBalance"}constructor(){super(eK.tagName)}}class eQ extends C{static{this.tagName="me:hideInactive"}constructor(){super(eQ.tagName)}}class eZ extends y{static{this.tagName="me:calcMethod"}static{this.options=["simpleCalc","gridSearch","fitting","marquardt","analyticalRepresentation","ThermodynamicTable","sensitivityAnalysis"]}constructor(e,t){super(e,eZ.tagName,t)}}class e0 extends _{static{this.tagName="me:eigenvalues"}constructor(e,t){super(e,e0.tagName,t)}}class e1 extends _{static{this.tagName="me:shortestTimeOfInterest"}constructor(e,t){super(e,e1.tagName,t)}}class e2 extends _{static{this.tagName="me:MaximumEvolutionTime"}constructor(e,t){super(e,e2.tagName,t)}}class e5 extends _{static{this.tagName="me:automaticallySetMaxEne"}constructor(e,t){super(e,e5.tagName,t)}}class e4 extends _{static{this.tagName="me:diagramEnergyOffset"}constructor(e,t){super(e,e4.tagName,t)}}class e8 extends S{static{this.tagName="me:testMicroRates"}constructor(e){super(e,e8.tagName),this.tMin=parseFloat(e.get("Tmin")),this.tMax=parseFloat(e.get("Tmax")),this.tStep=parseFloat(e.get("Tstep"))}getTmin(){return this.tMin}setTmin(e){this.tMin=e,this.attributes?.set("Tmin",e.toString())}getTmax(){return this.tMax}setTmax(e){this.tMax=e,this.attributes?.set("Tmax",e.toString())}getTstep(){return this.tStep}setTstep(e){this.tStep=e,this.attributes?.set("Tstep",e.toString())}}class e6 extends M{static{this.tagName="me:control"}constructor(e){super(e,e6.tagName),this.index=new Map}getCalculateRateCoefficientsOnly(){let e=this.index.get(eR.tagName);if(void 0!=e)return this.nodes.get(e)}setCalculateRateCoefficientsOnly(e){let t=this.index.get(eR.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eR.tagName,this.nodes.size),this.addNode(e))}removeCalculateRateCoefficientsOnly(){let e=this.index.get(eR.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(eR.tagName))}getPrintCellDOS(){let e=this.index.get(eI.tagName);if(void 0!=e)return this.nodes.get(e)}setPrintCellDOS(e){let t=this.index.get(eI.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eI.tagName,this.nodes.size),this.addNode(e))}removePrintCellDOS(){let e=this.index.get(eI.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(eI.tagName))}getPrintCellTransitionStateFlux(){let e=this.index.get(eB.tagName);if(void 0!=e)return this.nodes.get(e)}setPrintCellTransitionStateFlux(e){let t=this.index.get(eB.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eB.tagName,this.nodes.size),this.addNode(e))}removePrintCellTransitionStateFlux(){let e=this.index.get(eB.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(eB.tagName))}getPrintReactionOperatorColumnSums(){let e=this.index.get(eO.tagName);if(void 0!=e)return this.nodes.get(e)}setPrintReactionOperatorColumnSums(e){let t=this.index.get(eO.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eO.tagName,this.nodes.size),this.addNode(e))}removePrintReactionOperatorColumnSums(){let e=this.index.get(eO.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(eO.tagName))}getPrintGrainBoltzmann(){let e=this.index.get(ek.tagName);if(void 0!=e)return this.nodes.get(e)}setPrintGrainBoltzmann(e){let t=this.index.get(ek.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(ek.tagName,this.nodes.size),this.addNode(e))}removePrintGrainBoltzmann(){let e=this.index.get(ek.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(ek.tagName))}getPrintGrainDOS(){let e=this.index.get(eF.tagName);if(void 0!=e)return this.nodes.get(e)}setPrintGrainDOS(e){let t=this.index.get(eF.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eF.tagName,this.nodes.size),this.addNode(e))}removePrintGrainDOS(){let e=this.index.get(eF.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(eF.tagName))}getPrintGrainkbE(){let e=this.index.get(eD.tagName);if(void 0!=e)return this.nodes.get(e)}setPrintGrainkbE(e){let t=this.index.get(eD.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eD.tagName,this.nodes.size),this.addNode(e))}removePrintGrainkbE(){let e=this.index.get(eD.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(eD.tagName))}getPrintGrainkfE(){let e=this.index.get(eH.tagName);if(void 0!=e)return this.nodes.get(e)}setPrintGrainkfE(e){let t=this.index.get(eH.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eH.tagName,this.nodes.size),this.addNode(e))}removePrintGrainkfE(){let e=this.index.get(eH.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(eH.tagName))}getPrintTSsos(){let e=this.index.get(eG.tagName);if(void 0!=e)return this.nodes.get(e)}setPrintTSsos(e){let t=this.index.get(eG.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eG.tagName,this.nodes.size),this.addNode(e))}removePrintTSsos(){let e=this.index.get(eG.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(eG.tagName))}getPrintGrainedSpeciesProfile(){let e=this.index.get(eA.tagName);if(void 0!=e)return this.nodes.get(e)}setPrintGrainedSpeciesProfile(e){let t=this.index.get(eA.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eA.tagName,this.nodes.size),this.addNode(e))}removePrintGrainedSpeciesProfile(){let e=this.index.get(eA.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(eA.tagName))}getPrintGrainTransitionStateFlux(){let e=this.index.get(eU.tagName);if(void 0!=e)return this.nodes.get(e)}setPrintGrainTransitionStateFlux(e){let t=this.index.get(eU.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eU.tagName,this.nodes.size),this.addNode(e))}removePrintGrainTransitionStateFlux(){let e=this.index.get(eU.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(eU.tagName))}getPrintReactionOperatorSize(){let e=this.index.get(eq.tagName);if(void 0!=e)return this.nodes.get(e)}setPrintReactionOperatorSize(e){let t=this.index.get(eq.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eq.tagName,this.nodes.size),this.addNode(e))}removePrintReactionOperatorSize(){let e=this.index.get(eq.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(eq.tagName))}getPrintSpeciesProfile(){let e=this.index.get(ej.tagName);if(void 0!=e)return this.nodes.get(e)}setPrintSpeciesProfile(e){let t=this.index.get(ej.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(ej.tagName,this.nodes.size),this.addNode(e))}removePrintSpeciesProfile(){let e=this.index.get(ej.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(ej.tagName))}getPrintPhenomenologicalEvolution(){let e=this.index.get(e$.tagName);if(void 0!=e)return this.nodes.get(e)}setPrintPhenomenologicalEvolution(e){let t=this.index.get(e$.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(e$.tagName,this.nodes.size),this.addNode(e))}removePrintPhenomenologicalEvolution(){let e=this.index.get(e$.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(e$.tagName))}getPrintTunnelingCoefficients(){let e=this.index.get(eX.tagName);if(void 0!=e)return this.nodes.get(e)}setPrintTunnelingCoefficients(e){let t=this.index.get(eX.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eX.tagName,this.nodes.size),this.addNode(e))}removePrintTunnelingCoefficients(){let e=this.index.get(eX.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(eX.tagName))}getPrintCrossingCoefficients(){let e=this.index.get(eV.tagName);if(void 0!=e)return this.nodes.get(e)}setPrintCrossingCoefficients(e){let t=this.index.get(eV.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eV.tagName,this.nodes.size),this.addNode(e))}removePrintCrossingCoefficients(){let e=this.index.get(eV.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(eV.tagName))}getTestDOS(){let e=this.index.get(eW.tagName);if(void 0!=e)return this.nodes.get(e)}setTestDOS(e){let t=this.index.get(eW.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eW.tagName,this.nodes.size),this.addNode(e))}removeTestDOS(){let e=this.index.get(eW.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(eW.tagName))}getTestRateConstants(){let e=this.index.get(eY.tagName);if(void 0!=e)return this.nodes.get(e)}setTestRateConstants(e){let t=this.index.get(eY.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eY.tagName,this.nodes.size),this.addNode(e))}removeTestRateConstants(){let e=this.index.get(eY.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(eY.tagName))}getUseTheSameCellNumberForAllConditions(){let e=this.index.get(eJ.tagName);if(void 0!=e)return this.nodes.get(e)}setUseTheSameCellNumberForAllConditions(e){let t=this.index.get(eJ.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eJ.tagName,this.nodes.size),this.addNode(e))}removeUseTheSameCellNumberForAllConditions(){let e=this.index.get(eJ.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(eJ.tagName))}getHideInactive(){let e=this.index.get(eQ.tagName);if(void 0!=e)return this.nodes.get(e)}setHideInactive(e){let t=this.index.get(eQ.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eQ.tagName,this.nodes.size),this.addNode(e))}removeHideInactive(){let e=this.index.get(eQ.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(eQ.tagName))}getForceMacroDetailedBalance(){let e=this.index.get(eK.tagName);if(void 0!=e)return this.nodes.get(e)}setForceMacroDetailedBalance(e){let t=this.index.get(eK.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eK.tagName,this.nodes.size),this.addNode(e))}removeForceMacroDetailedBalance(){let e=this.index.get(eK.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(eK.tagName))}getCalcMethod(){let e=this.index.get(eZ.tagName);if(void 0!=e)return this.nodes.get(e)}setCalcMethod(e){let t=this.index.get(eZ.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eZ.tagName,this.nodes.size),this.addNode(e))}removeCalcMethod(){let e=this.index.get(eZ.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(eZ.tagName))}getEigenvalues(){let e=this.index.get(e0.tagName);if(void 0!=e)return this.nodes.get(e)}setEigenvalues(e){let t=this.index.get(e0.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(e0.tagName,this.nodes.size),this.addNode(e))}removeEigenvalues(){let e=this.index.get(e0.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(e0.tagName))}getShortestTimeOfInterest(){let e=this.index.get(e1.tagName);if(void 0!=e)return this.nodes.get(e)}setShortestTimeOfInterest(e){let t=this.index.get(e1.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(e1.tagName,this.nodes.size),this.addNode(e))}removeShortestTimeOfInterest(){let e=this.index.get(e1.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(e1.tagName))}getMaximumEvolutionTime(){let e=this.index.get(e2.tagName);if(void 0!=e)return this.nodes.get(e)}setMaximumEvolutionTime(e){let t=this.index.get(e.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(e.tagName,this.nodes.size),this.addNode(e))}removeMaximumEvolutionTime(){let e=this.index.get(e2.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(e2.tagName))}getAutomaticallySetMaxEne(){let e=this.index.get(e5.tagName);if(void 0!=e)return this.nodes.get(e)}setAutomaticallySetMaxEne(e){let t=this.index.get(e5.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(e5.tagName,this.nodes.size),this.addNode(e))}removeAutomaticallySetMaxEne(){let e=this.index.get(e5.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(e5.tagName))}getDiagramEnergyOffset(){let e=this.index.get(e4.tagName);if(void 0!=e)return this.nodes.get(e)}setDiagramEnergyOffset(e){let t=this.index.get(e4.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(e4.tagName,this.nodes.size),this.addNode(e))}removeDiagramEnergyOffset(){let e=this.index.get(e4.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(e4.tagName))}getTestMicroRates(){let e=this.index.get(e8.tagName);if(void 0!=e)return this.nodes.get(e)}setTestMicroRates(e){let t=this.index.get(e8.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(e8.tagName,this.nodes.size),this.addNode(e))}removeTestMicroRates(){let e=this.index.get(e8.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(e8.tagName))}}class e7 extends y{static{this.tagName="me:title"}constructor(e,t){super(e,e7.tagName,t)}}class e3 extends M{static{this.tagName="moleculeList"}constructor(e,t){super(e,e3.tagName),this.index=new Map,void 0!=t&&t.forEach(e=>{this.nodes.set(this.nodes.size,e),this.index.set(e.id,this.nodes.size-1)})}getMolecule(e){let t=this.index.get(e);if(void 0!=t)return this.nodes.get(t)}removeMolecule(e){let t=this.index.get(e);void 0!=t&&(this.nodes.delete(t),this.index.delete(e))}addMolecule(e){let t=this.index.get(e.id);void 0!==t?(this.nodes.set(t,e),console.log("Replaced molecule with id "+e.id)):(this.nodes.set(this.nodes.size,e),this.index.set(e.id,this.nodes.size-1))}}class e9 extends M{static{this.tagName="reactionList"}constructor(e,t){super(e,e9.tagName),this.index=new Map,void 0!=t&&t.forEach(e=>{this.nodes.set(this.nodes.size,e),this.index.set(e.id,this.nodes.size-1)})}getReaction(e){let t=this.index.get(e);if(void 0!=t)return this.nodes.get(t)}removeReaction(e){let t=this.index.get(e);void 0!=t&&(this.nodes.delete(t),this.index.delete(e))}addReaction(e){let t=this.index.get(e.id);void 0!==t?(this.nodes.set(t,e),console.log("Replaced reaction with id "+e.id)):(this.nodes.set(this.nodes.size,e),this.index.set(e.id,this.nodes.size-1))}}class te extends M{static{this.tagName="me:mesmer"}static{this.header=`<?xml version="1.0" encoding="utf-8" ?>
<?xml-stylesheet type='text/xsl' href='../../mesmer2.xsl' media='other'?>
<?xml-stylesheet type='text/xsl' href='../../mesmer1.xsl' media='screen'?>`}constructor(e,t,a,s,i,n,o){super(e,te.tagName),this.index=new Map,void 0!=t&&(this.index.set(e7.tagName,this.nodes.size),this.addNode(t)),void 0!=a&&(this.index.set(e3.tagName,this.nodes.size),this.addNode(a)),void 0!=s&&(this.index.set(e9.tagName,this.nodes.size),this.addNode(s)),void 0!=i&&(this.index.set(e_.tagName,this.nodes.size),this.addNode(i)),void 0!=n&&(this.index.set(ez.tagName,this.nodes.size),this.addNode(n)),void 0!=o&&(this.index.set(e6.tagName,this.nodes.size),this.addNode(o))}getTitle(){let e=this.index.get(e7.tagName);if(void 0!=e)return this.nodes.get(e)}setTitle(e){let t=this.index.get(e7.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(e7.tagName,this.nodes.size),this.addNode(e))}getMoleculeList(){let e=this.index.get(e3.tagName);if(void 0!=e)return this.nodes.get(e)}setMoleculeList(e){let t=this.index.get(e3.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(e3.tagName,this.nodes.size),this.addNode(e))}getReactionList(){let e=this.index.get(e9.tagName);if(void 0!=e)return this.nodes.get(e)}setReactionList(e){let t=this.index.get(e9.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(e9.tagName,this.nodes.size),this.addNode(e))}getConditions(){let e=this.index.get(e_.tagName);if(void 0!=e)return this.nodes.get(e)}setConditions(e){let t=this.index.get(e_.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(e_.tagName,this.nodes.size),this.addNode(e))}getModelParameters(){let e=this.index.get(ez.tagName);if(void 0!=e)return this.nodes.get(e)}setModelParameters(e){let t=this.index.get(ez.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(ez.tagName,this.nodes.size),this.addNode(e))}getControl(){let e=this.index.get(e6.tagName);if(void 0!=e)return this.nodes.get(e)}setControl(e){let t=this.index.get(e6.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(e6.tagName,this.nodes.size),this.addNode(e))}}let tt="1.5em",ta="1.25em",ts="1.0em",ti={marginTop:"1px",marginBottom:"1px"},tn={marginLeft:"25px",marginTop:"1px",marginBottom:"1px"},to={marginLeft:"50px",marginTop:"1px",marginBottom:"1px"},tr={marginLeft:"75px",marginTop:"1px",marginBottom:"1px"},td={marginLeft:"100px",marginTop:"1px",marginBottom:"1px"},tl={marginLeft:"125px",marginTop:"1px",marginBottom:"1px"},tg={marginLeft:"1px",marginTop:"1px",marginBottom:"1px",marginRight:"1px"},th="remove",tm="âœ“ [SELECTED] Action to unselect.",tc="âœ— [NOT SELECTED] Action to select.",tu=" The appended input(s) display loaded value(s) that can be changed:",tp=" Then use the appended input to specify.",tN=" Or use the appended input(s) to specify:",tf=new Map,tx=-1/0,tv=1/0,tE=new Map;function tb(){let t=document.createElement("input");t.type="file",t.onchange=function(){if(t.files){for(let e=0;e<t.files.length;e++)console.log("inputElement.files["+e+"]="+t.files[e]);let a=t.files[0];console.log(a.name);let s=a.name,g=new FileReader,C=0,S="";g.onload=function(t){if(null==t.target)throw Error("Event target is null");if(S+=t.target.result,null!=a){if(C<a.size){let e=a.slice(C,C+1048576);g.readAsText(e),C+=1048576}else{var y;let t,a,g;y=S=S.trim(),t=document.getElementById("xml"),n("xmlHeading"),(a=document.createElement("h2")).textContent=s,t.appendChild(a),n("xmlParagraph"),(g=document.createElement("pre")).textContent=y,t.appendChild(g),function(t){console.log("parse: "+t);let a=z(t,te.tagName);e=new te(P(a));let s=t.getElementsByTagName(e7.tagName);if(1!=s.length)throw Error("Multiple "+e7.tagName+" tags found");{let t=s[0].childNodes[0].nodeValue.trim(),a=new e7(P(s[0]),t),i=document.getElementById("title"),o=a.value;e.setTitle(a);let r="titleId";n(r);let l=d("text",r+"Input",tg,ti,e=>{e.target instanceof HTMLInputElement&&(a.value=e.target.value,console.log(a.tagName+" changed to "+a.value),h(e.target))},o,"Title",tt);l.id=r,i.parentNode?.insertBefore(l,i)}let g=document.getElementById("molecules"),C="moleculesDivId";if(n(C),null==g);else{let a=function(e){let t=document.createElement("div"),a=z(e,e3.tagName),s=new Set;if(a.childNodes.forEach(function(e){s.add(e.nodeName)}),1!=s.size&&!(2==s.size&&s.has("#text")))throw console.error("moleculeListTagNames:"),s.forEach(e=>console.error(e)),Error("Additional tag names in moleculeList:");if(!s.has(et.tagName))throw Error('Expecting tags with "'+et.tagName+'" tagName but there are none!');let n=a.getElementsByTagName(et.tagName);console.log("Number of molecules="+n.length);for(let e=0;e<n.length;e++){let a,s,r=document.createElement("div"),g=P(n[e]),u=new Set,p=n[e].childNodes;for(let e=0;e<p.length;e++){let t=p[e];u.has(t.nodeName)?"#text"!=t.nodeName&&console.warn("Another ChildNode with nodeName="+t.nodeName):u.add(t.nodeName)}let N=n[e].getElementsByTagName(I.tagName);if(N.length>1)throw Error("Expecting 1 or 0 "+I.tagName+" but finding "+N.length+"!");if(1==N.length){let e=N[0],t=e.getElementsByTagName(R.tagName);if(t.length<2)throw Error("Expecting 2 or more atoms in "+I.tagName+", but finding "+t.length+"!");let s=[];for(let e=0;e<t.length;e++)s.push(new R(P(t[e])));a=new I(P(e),s),u.delete(I.tagName)}else{let t=n[e].getElementsByTagName(R.tagName);if(1==t.length)a=new R(P(t[0]));else if(t.length>1)throw Error("Expecting 1 "+R.tagName+" but finding "+t.length+". Should these be in an "+I.tagName+"?")}u.delete(R.tagName);let v=n[e].getElementsByTagName(O.tagName);if(v.length>1)throw Error("Expecting 1 or 0 "+O.tagName+" but finding "+v.length+"!");if(1==v.length){let e=v[0],t=e.getElementsByTagName(B.tagName),a=[];for(let e=0;e<t.length;e++)a.push(new B(P(t[e])));s=new O(P(e),a),u.delete(O.tagName)}else{let t=n[e].getElementsByTagName(B.tagName);if(1==t.length)s=new B(P(t[0]));else if(t.length>1)throw Error("Expecting 1 "+B.tagName+" but finding "+t.length+". Should these be in a "+O.tagName+"?")}u.delete(B.tagName);let C=new et(g,a,s);tf.set(C.id,C);let S=n[e].getElementsByTagName($.tagName);if(S.length>1)throw Error("Expecting 1 or 0 "+$.tagName+" but finding "+S.length+"!");if(1==S.length){let e=document.createElement("div"),t=C.id+"_"+$.tagName+"_",a=o({content:e,buttonLabel:$.tagName,buttonFontSize:ts,boundary:tg,level:to,contentDivId:t});r.appendChild(a);let s=new $(P(S[0]));C.setProperties(s);let i=S[0].getElementsByTagName(D.tagName);for(let t=0;t<i.length;t++){let a=new D(P(i[t]));s.setProperty(a),C.setProperties(s),a.dictRef==H.dictRef?tT(a,H.units,C,i[t],e,tg,tr):a.dictRef==U.dictRef?tT(a,U.units,C,i[t],e,tg,tr):tT(a,void 0,C,i[t],e,tg,tr)}u.delete($.tagName)}else{let t=n[e].getElementsByTagName(D.tagName);if(1!=t.length)throw Error("Expecting 1 "+D.tagName+" but finding "+t.length+". Should these be in a "+$.tagName+"?");let a=new D(P(t[0]));C.setProperties(a),a.dictRef==H.dictRef?tT(a,H.units,C,t[0],r,tg,to):a.dictRef==U.dictRef?tT(a,U.units,C,t[0],r,tg,to):tT(a,void 0,C,t[0],r,tg,to),u.delete(D.tagName)}let y=n[e].getElementsByTagName(V.tagName);if(y.length>0){if(y.length>1)throw Error("Expecting 1 or 0 "+V.tagName+" but finding "+y.length+"!");(function(e,t,a,s,i){let n=a.getElementsByTagName(X.tagName);if(n.length>0){let a=document.createElement("div"),i=t.id+"_"+V.tagName,r=o({content:a,buttonLabel:V.tagName,buttonFontSize:ts,boundary:tg,level:to,contentDivId:i});s.appendChild(r);let l=[];for(let e=0;e<n.length;e++){let s=T(n[e]),i=parseFloat(s),o=new X(P(n[e]),i);l.push(o);let r=X.tagName,g=t.id+"_"+V.tagName+"_"+X.tagName+"_"+e,m=d("number",g,tg,tr,t=>{t.target instanceof HTMLInputElement&&(ty(o,t.target),s=t.target.value,l[e].setValue(parseFloat(s)),console.log("Set "+g+" to "+s),h(t.target))},s,r);a.appendChild(m);let c=document.createElement("label");c.textContent="cm-1",m.appendChild(c)}e.setDeltaEDowns(l),t.setEnergyTransferModel(e)}})(new V(P(y[0])),C,y[0],r,0),u.delete(V.tagName)}let _=n[e].getElementsByTagName(W.tagName);if(_.length>0){if(_.length>1)throw Error("Expecting 1 or 0 "+W.tagName+" but finding "+_.length+"!");(function(e,t,a){let s=document.createElement("label");s.textContent=W.tagName+": ";let i=document.createElement("div");i.appendChild(s);let n=c(["ClassicalRotors","me:QMRotors","QMRotors"],"DOSCMethod",t.id+"_Select_DOSCMethod",tg);n.value=e.getXsiType(),n.addEventListener("change",t=>{t.target instanceof HTMLSelectElement&&(e.setXsiType(t.target.value),console.log("Set DOSCMethod to "+t.target.value))}),t.setDOSCMethod(e),i.appendChild(n),Object.assign(i.style,to),a.appendChild(i)})(new W(P(_[0])),C,r),u.delete(W.tagName)}let w=n[e].getElementsByTagName(Z.tagName);if(w.length>0){if(1!=w.length)throw Error("Expecting only 1 extra DOSCMethod, but there are "+w.length);let e=new Z(P(_[0])),t=document.createElement("div"),a=C.id+"_"+Z.tagName+"_",s=o({content:t,buttonLabel:Z.tagName,buttonFontSize:ts,boundary:tg,level:to,contentDivId:a});r.appendChild(s);let n=w[0].getElementsByTagName(Y.tagName);if(n.length>0){if(1!=n.length)throw Error("Expecting only 1 bondRef, but there are "+n.length);let a=f(tr),s=document.createElement("label");s.textContent=Y.tagName+": ",a.appendChild(s);let i=new Y(P(n[0]),b(E(n[0])));e.setBondRef(i);let o=c(C.getBonds().getBondIds(),i.value,C.id+"_"+Y.tagName,tg);o.addEventListener("change",e=>{e.target instanceof HTMLSelectElement&&(i.value=e.target.value,m(e.target))}),m(o),a.appendChild(o),t.appendChild(a)}let g=w[0].getElementsByTagName(K.tagName);if(g.length>0){if(1!=g.length)throw Error("Expecting only 1 HinderedRotorPotential, but there are "+g.length);let a=P(g[0]),s=new K(a),n=f(tg),r=C.id+"_"+W.tagName+"_"+K.tagName,d=o({content:n,buttonLabel:K.tagName,buttonFontSize:ts,boundary:tg,level:tr,contentDivId:r});t.appendChild(d);let u=x("Format:",td);n.appendChild(u);let p=c(K.formats,s.format,C.id+"_"+K.tagName,tg);p.addEventListener("change",e=>{e.target instanceof HTMLSelectElement&&(s.format=e.target.value,m(e.target))}),m(p),n.appendChild(p);let N=x("Units:",tg);n.appendChild(N),tC(K.units,a,n,C.id+"_"+W.tagName+"_"+K.tagName,K.tagName,tg);let v=x("Expansion size:",tg);n.appendChild(v);let E=l("number",C.id+"_"+W.tagName+"_"+K.tagName+"_expansionSize",tg);E.value=s.getExpansionSize().toString(),E.addEventListener("change",e=>{e.target instanceof HTMLInputElement&&(i(e.target.value)?s.setExpansionSize(parseInt(e.target.value)):(alert("Expansion size input is not a number, resetting..."),E.value=s.getExpansionSize().toString()),h(E))}),E.value=s.getExpansionSize().toString(),h(E),n.appendChild(E);let b=x("Use sine terms:",tg);n.appendChild(b);let T=l("checkbox",C.id+"_"+W.tagName+"_"+K.tagName+"_useSineTerms",tg);T.checked=s.getUseSineTerms(),T.addEventListener("change",e=>{e.target instanceof HTMLInputElement&&s.setUseSineTerms(e.target.checked)}),n.appendChild(T);let S=document.createElement("div"),y=C.id+"_"+W.tagName+"_"+K.tagName+"_"+J.tagName,_=o({content:S,buttonLabel:J.tagName,buttonFontSize:ts,boundary:tg,level:td,contentDivId:y});n.appendChild(_);let w=[],M=g[0].getElementsByTagName(J.tagName);for(let e=0;e<M.length;e++){let t=new J(P(M[e]));w.push(t);let a=f(tl);_.appendChild(a);let s=x("Angle:",tg);a.appendChild(s);let n=l("number",C.id+"_"+J.tagName+"_angle",tg);n.addEventListener("change",e=>{e.target instanceof HTMLInputElement&&(i(e.target.value)?(parseFloat(e.target.value),t.setAngle(parseFloat(e.target.value))):(alert("Angle input is not a number, resetting..."),n.value=t.getAngle().toString()),h(n))}),n.value=t.getAngle().toString(),h(n),a.appendChild(n);let o=x("Potential:",tg);a.appendChild(o);let r=l("number",C.id+"_"+J.tagName+"_potential",tg);r.addEventListener("change",e=>{if(e.target instanceof HTMLInputElement){if(i(e.target.value)){let a=parseFloat(e.target.value);t.setPotential(a),console.log("Set "+J.tagName+" to "+a.toString())}else alert("Potential input is not a number, resetting..."),r.value=t.getPotential().toString();h(r)}}),r.value=t.getPotential().toString(),h(r),a.appendChild(r),S.appendChild(a)}_.appendChild(S),s.setPotentialPoints(w),e.setHinderedRotorPotential(s)}let p=_[0].getElementsByTagName(Q.tagName);if(p.length>0){if(1!=p.length)throw Error("Expecting only 1 Periodicity, but there are "+p.length);let a=b(E(p[0])),s=new Q(P(p[0]),parseFloat(a));e.setPeriodicity(s);let n=d("number",C.id+"_"+Q.tagName,tg,tr,t=>{if(t.target instanceof HTMLInputElement){if(i(a=t.target.value)){let t=parseFloat(a);s.value=t,e.getPeriodicity().value=t,console.log("Set "+Q.tagName+" to "+t)}else alert("Periodicity input is not a number, resetting..."),t.target.value=s.value.toString()}},a,Q.tagName);t.appendChild(n)}C.setExtraDOSCMethod(e),u.delete(Z.tagName)}u.delete(ee.tagName);let M=n[e].getElementsByTagName(ee.tagName);if(M.length>0){if(1!=M.length)throw Error("Expecting only 1 reservoirSize, but there are "+M.length);let e=b(E(M[0])),t=parseFloat(e),a=new ee(P(M[0]),t);C.setReservoirSize(a);let s=d("number",C.id+"_"+ee.tagName,tg,to,e=>{e.target instanceof HTMLInputElement&&(a.value=parseFloat(e.target.value),h(e.target))},e,ee.tagName);r.appendChild(s)}u.delete("#text"),u.size>0&&(console.warn("There are additional unexpected moleculeTagNames:"),u.forEach(e=>console.warn(e)));let L=document.createElement("div");L.id=C.id+"_molstar",r.appendChild(L);let z=o({content:r,buttonLabel:C.getLabel(),buttonFontSize:ta,boundary:tg,level:tn,contentDivId:C.tagName+"_"+C.id});t.appendChild(z)}return t}(t);a.id=C,g.appendChild(o({content:a,buttonLabel:"Molecules",buttonFontSize:tt,boundary:tg,level:ti,contentDivId:C})),e.setMoleculeList(new e3(P(a),Array.from(tf.values())))}let S=document.getElementById("reactions"),y="reactionsDivId";if(n(y),null==S);else{let a=function(e){let t=f(tg),a=z(e,e9.tagName),s=new Set;if(a.childNodes.forEach(function(e){s.add(e.nodeName)}),1!=s.size&&!(2==s.size&&s.has("#text")))throw console.error("reactionListTagNames:"),s.forEach(e=>console.error(e)),Error("Additional tag names in reactionList:");if(!s.has(eu.tagName))throw Error('Expecting tags with "'+eu.tagName+'" tagName but there are none!');let i=a.getElementsByTagName(eu.tagName);console.log("Number of reactions="+i.length);for(let e=0;e<i.length;e++){let a=N(tg),s=P(i[e]),n=new Set,r=i[e].childNodes;for(let e=0;e<r.length;e++){let t=r[e];n.has(t.nodeName)?"#text"!=t.nodeName&&console.warn("Another ChildNode with nodeName="+t.nodeName):n.add(t.nodeName)}let l=new eu(s);tE.set(l.id,l);let g=i[e].getElementsByTagName(es.tagName);if(n.delete(es.tagName),g.length>0){let e=document.createElement("div"),t=[];for(let a=0;a<g.length;a++){let s=new ea(P(v(g[a],et.tagName))),i=new es(P(g[a]),s);t.push(i);let n=document.createElement("div"),o=document.createElement("label");o.textContent=s.ref+" role: ",n.appendChild(o);let r=c(["deficientReactant","excessReactant","modelled"],"Role",s.ref+"_Select_Role",tg);r.value=s.role,r.addEventListener("change",e=>{e.target instanceof HTMLSelectElement&&(s.setRole(e.target.value),console.log("Set Role to "+e.target.value))}),n.appendChild(r),Object.assign(n.style,tr),e.appendChild(n)}l.setReactants(t);let s=o({content:e,buttonLabel:"Reactants",buttonFontSize:ts,boundary:tg,level:to,contentDivId:l.id+"_"+es.tagName});a.appendChild(s)}let m=i[e].getElementsByTagName(ei.tagName);if(n.delete(ei.tagName),m.length>0){let e=document.createElement("div"),t=[];for(let a=0;a<m.length;a++){let s=new ea(P(v(m[a],et.tagName))),i=new ei(P(m[a]),s);t.push(i);let n=["modelled","sink"],o=function(e,t,a,s,i,n){let o=N(n),r=x(e,i);o.appendChild(r);let d=document.createElement("select");return o.appendChild(d),t.forEach(e=>{d.name=a,d.id=s;let t=document.createElement("option");t.value=e,t.text=e,d.appendChild(t)}),o}(s.ref+" role:",n,s.ref+"_Select_Role","Role",tg,tr),r=o.querySelector("select");r.value=s.role,r.addEventListener("change",e=>{e.target instanceof HTMLSelectElement&&(s.setRole(e.target.value),console.log("Set Role to "+e.target.value))}),e.appendChild(o)}l.setProducts(t);let s=o({content:e,buttonLabel:"Products",buttonFontSize:ts,boundary:tg,level:to,contentDivId:l.id+"_"+ei.tagName});a.appendChild(s)}let u=i[e].getElementsByTagName(em.tagName);if(u.length>0){if(u.length>1)throw Error("Expecting 1 "+em.tagName+" but finding "+u.length+"!");let e=new em(P(u[0]));l.setTunneling(e);let t=document.createElement("div"),s=document.createElement("label");s.textContent=em.tagName+": ",t.appendChild(s);let i=c(["Eckart","WKB"],"Tunneling",l.id+"_Select_Tunneling",tg);i.value=e.getName(),i.addEventListener("change",t=>{t.target instanceof HTMLSelectElement&&(e.setName(t.target.value),console.log("Set Tunneling to "+t.target.value))}),t.appendChild(i),Object.assign(t.style,to),a.appendChild(t)}let p=i[e].getElementsByTagName(en.tagName);if(p.length>0){let e=document.createElement("div"),t=[];for(let a=0;a<p.length;a++){let s=new ea(P(v(p[a],et.tagName))),i=new en(P(p[a]),s);t.push(i);let n=x(s.ref+" role: transitionState",tr);e.appendChild(n)}l.setTransitionStates(t);let s=o({content:e,buttonLabel:"Transition States",buttonFontSize:ts,boundary:tg,level:to,contentDivId:l.id+"_"+en.tagName});a.appendChild(s)}let f=i[e].getElementsByTagName(eg.tagName);if(f.length>0){if(f.length>1)throw Error("Expecting 1 "+eg.tagName+" but finding "+f.length+"!");{let e,t=document.createElement("div"),s=P(f[0]),i=s.get("name");if(void 0==i||i==eh.xsiType2){let i=s.get("xsi:type");if(e=new eh(s),i==eh.xsiType||i==eh.xsiType2){let s=f[0].getElementsByTagName(eo.tagName);if(null!=s&&null!=s[0]){let a=T(s[0]),i=parseFloat(a),n=P(s[0]),o=new eo(n,i);e.setPreExponential(o);let r=eo.tagName,g=l.id+"_"+eh.tagName+"_"+eo.tagName,m=d("number",g,tg,tr,e=>{e.target instanceof HTMLInputElement&&ty(o,e.target)},a,r);t.appendChild(m);let c=m.querySelector("input");c.value=a,h(c),c.addEventListener("change",e=>{a=e.target.value,o.value=parseFloat(a),console.log("Set "+g+" to "+a),h(c)}),tC(void 0,n,m,l.id+"_"+eh.xsiType+"_"+eo.tagName,eo.tagName,tg),t.appendChild(m)}let i=f[0].getElementsByTagName(er.tagName);if(null!=i&&null!=i[0]){let a=T(i[0]),s=parseFloat(a),n=P(i[0]),o=new er(n,s);e.setActivationEnergy(o);let r=er.tagName,g=l.id+"_"+eh.tagName+"_"+er.tagName,m=d("number",g,tg,tr,e=>{e.target instanceof HTMLInputElement&&ty(o,e.target)},a,r),c=m.querySelector("input");c.value=a,h(c),c.addEventListener("change",e=>{a=e.target.value,o.value=parseFloat(a),console.log("Set "+g+" to "+a),h(c)}),tC(void 0,n,m,l.id+"_"+eh.xsiType+"_"+er.tagName,er.tagName,tg),t.appendChild(m)}let n=f[0].getElementsByTagName(ed.tagName);if(null!=n&&null!=n[0]){let a=T(n[0]),s=parseFloat(a),i=P(n[0]),o=new ed(i,s);e.setTInfinity(o);let r=ed.tagName,g=l.id+"_"+eh.tagName+"_"+ed.tagName,m=d("number",g,tg,tr,e=>{e.target instanceof HTMLInputElement&&ty(o,e.target)},a,r),c=m.querySelector("input");c.value=a,h(c),c.addEventListener("change",e=>{a=e.target.value,o.value=parseFloat(a),console.log("Set "+g+" to "+a),h(c)}),tC(void 0,i,m,l.id+"_"+eh.xsiType+"_"+ed.tagName,ed.tagName,tg),t.appendChild(m)}let r=f[0].getElementsByTagName(el.tagName);if(null!=r&&null!=r[0]){let a=T(r[0]),s=parseFloat(a),i=P(r[0]),n=new el(i,s);e.setNInfinity(n);let o=el.tagName,g=l.id+"_"+eh.tagName+"_"+el.tagName,m=d("number",g,tg,tr,e=>{e.target instanceof HTMLInputElement&&ty(n,e.target)},a,o);t.appendChild(m);let c=m.querySelector("input");c.value=a,h(c),c.addEventListener("change",e=>{a=e.target.value,n.value=parseFloat(a),console.log("Set "+g+" to "+a),h(c)}),tC(void 0,i,m,l.id+"_"+eh.xsiType+"_"+el.tagName,el.tagName,tg),t.appendChild(m)}let g=l.id+"_"+eg.tagName,m=o({content:t,buttonLabel:eg.tagName,buttonFontSize:ts,boundary:tg,level:to,contentDivId:g});a.appendChild(m)}else throw Error("Unexpected xsi:type="+i)}else{e=new eg(s);let i=document.createElement("label");i.textContent=eg.tagName+": "+s.get("name"),Object.assign(i.style,to),t.appendChild(i),a.appendChild(t)}l.setMCRCMethod(e)}}let C=i[e].getElementsByTagName(ec.tagName);if(C.length>0){if(C.length>1)throw Error("Expecting 1 "+ec.tagName+" but finding "+C.length+"!");let e=parseFloat(b(E(C[0]))),t=new ec(P(C[0]),e);l.setExcessReactantConc(t);let s=d("number",l.id+"_"+ec.tagName,tg,to,e=>{e.target instanceof HTMLInputElement&&ty(t,e.target)},e.toString(),ec.tagName);a.appendChild(s)}let S=o({content:a,buttonLabel:l.id+"("+l.getLabel()+")",buttonFontSize:ta,boundary:tg,level:tn,contentDivId:l.tagName+"_"+l.id});t.appendChild(S)}return t}(t);a.id=y,S.appendChild(o({content:a,buttonLabel:"Reactions",buttonFontSize:tt,boundary:tg,level:ti,contentDivId:y})),e.setReactionList(new e9(P(a),Array.from(tE.values())))}tA();let _=document.getElementById("conditions"),w="conditionsDivId";if(n(w),null==_);else{let a=function(t){console.log(e_.tagName);let a=document.createElement("div"),s=z(t,e_.tagName),i=new e_(P(s));e.setConditions(i);let n=document.createElement("div");a.appendChild(n),a.appendChild(o({content:n,buttonLabel:ev.name,buttonFontSize:ta,boundary:tg,level:tn,contentDivId:ev.tagName}));let r=u("add",to);n.appendChild(r),r.addEventListener("click",()=>{let e=new ev(new Map,"");i.addBathGas(e);let t=f(to),a=x(ev.tagName,tg);t.appendChild(a);let s=c(Array.from(new Set(tf.keys())),ev.tagName,e_.tagName+"_"+ev.tagName,tg);s.value=e.value,s.addEventListener("change",t=>{t.target instanceof HTMLSelectElement&&(e.value=t.target.value,console.log("Added "+t.target.value+" as a "+ev.tagName),m(t.target))}),s.style.marginLeft="2px",m(s),t.appendChild(s);let o=u(th,tg);o.addEventListener("click",()=>{n.removeChild(t),i.removeBathGas(e)}),t.appendChild(o),n.appendChild(t)});let g=Array.from(s.children).filter(e=>e.tagName===ev.tagName);if(g.length>0)for(let e=0;e<g.length;e++){let t=new ev(P(g[e]),b(E(g[e])));console.log("bathGas"+t.toString()),i.addBathGas(t);let a=f(to),s=x(ev.tagName,tg);a.appendChild(s);let o=c(Array.from(new Set(tf.keys())),ev.tagName,e_.tagName+"_"+ev.tagName,tg);o.value=t.value,o.addEventListener("change",e=>{e.target instanceof HTMLSelectElement&&(t.value=e.target.value,console.log("Set "+eS.tagName+"_"+ev.tagName+" to "+e.target.value),m(e.target))}),m(o),a.appendChild(o);let r=u(th,tg);r.addEventListener("click",()=>{n.removeChild(a),i.removeBathGas(t)}),a.appendChild(r),n.appendChild(a)}let h=document.createElement("div");a.appendChild(h);let p=new ey(new Map);a.appendChild(o({content:h,buttonLabel:ey.name,buttonFontSize:ta,boundary:tg,level:tn,contentDivId:ev.tagName}));let N=u("add",to);h.appendChild(N),N.addEventListener("click",()=>{let e=new Map;e.set("units","Torr");let t=new eS(e),a=p.addPTpair(t),s=f(to);t_(s,t),tw(s,t),tC(void 0,e,s,eS.tagName,eS.tagName,tg);let i=u("add details",tg);s.appendChild(i),i.addEventListener("click",()=>{let e,a=document.createElement("div");tM(s,t),tL(s,t),tP(s,t),tz(s,t),(e=u("add "+eE.tagName,tg)).addEventListener("click",()=>{let a=document.createElement("div");a.style.marginLeft="5px";let i=new eE(new Map,NaN);t.setExperimentRate(i),d("number",eS.tagName+"_"+eE.tagName,tg,tr,e=>{e.target instanceof HTMLInputElement&&ty(i,e.target)},"",eE.tagName),s.insertBefore(a,e),s.removeChild(e)}),s.insertBefore(a,i),s.removeChild(i)});let n=u(th,tg);n.addEventListener("click",()=>{h.removeChild(s),p.removePTpair(a),t.removeBathGas()}),s.appendChild(n),h.appendChild(s)});let v=u("Add from spreadsheet",tg);h.appendChild(v),v.addEventListener("click",()=>{let e=f(to),t=l("text",ey.tagName+"_addFromSpreadsheet",to);e.appendChild(t),h.insertBefore(e,N),t.addEventListener("change",()=>{if(console.log("inputElement.value="+t.value),console.log("inputElement.value.length="+t.value.length),t.value.length>0){let a=t.value.split(" "),s=new Map;a[0].split("	").forEach((e,t)=>{s.set(e,t)}),console.log("pTPairsArray.length="+a.length);for(let e=1;e<a.length;e++){let t=new Map;t.set("units","Torr");let i=new eS(t),n=a[e].split("	"),o=s.get("P"),r=s.get("T"),d=s.get("me:bathGas"),l=parseFloat(n[o]),g=parseFloat(n[r]);if(i.setP(l),i.setT(g),s.has("me:bathGas")){let e=n[d];i.setBathGas(new ev(new Map,e))}console.log("pTPair="+i);let m=f(to);t_(m,i),tw(m,i),tC(void 0,t,m,eS.tagName,eS.tagName,tg),tM(m,i),tL(m,i),tP(m,i),tz(m,i),console.log(N),console.log(h),h.insertBefore(m,N),p.addPTpair(i)}h.removeChild(e)}})});let T=s.getElementsByTagName(ey.tagName);if(T.length>0){if(T.length>1)throw Error("Expecting 1 "+ey.tagName+" but finding "+T.length+"!");let e=document.createElement("div");a.appendChild(e);let t=P(T[0]),s=T[0].getElementsByTagName(eS.tagName);if(0==s.length)throw Error("Expecting 1 or more "+eS.tagName+" but finding 0!");{let a=new ey(t);for(let t=0;t<s.length;t++){let i=new eS(P(s[t])),n=f(to);e.appendChild(n);let o=s[t].getElementsByTagName(ev.tagName);if(o.length>0){o.length>1&&console.warn("xml_bathGass.length="+o.length);let e=document.createElement("label");e.textContent=ev.tagName+": ",n.appendChild(e);let t=b(E(o[0])),a=new ev(P(o[0]),t);i.setBathGas(a);let s=c(Array.from(new Set(tf.keys())),ev.tagName,eS.tagName+"_"+ev.tagName,tg);s.value=a.value,s.addEventListener("change",e=>{e.target instanceof HTMLSelectElement&&(a.value=e.target.value,console.log("Set "+eS.tagName+"_"+ev.tagName+" to "+e.target.value),m(e.target))}),m(s),n.appendChild(s)}let r=s[t].getElementsByTagName(eE.tagName);if(r.length>0){r.length>1&&console.warn("xml_experimentRates.length="+r.length);let e=b(E(r[0])),t=new eE(P(r[0]),parseFloat(e));i.setExperimentRate(t);let a=d("number",eS.tagName+"_"+eE.tagName,tg,ti,e=>{e.target instanceof HTMLInputElement&&ty(t,e.target)},t.value.toString(),eE.tagName);n.appendChild(a)}t_(n,i),tw(n,i),tC(void 0,P(s[t]),n,eS.tagName,eS.tagName,tg),tM(n,i),tL(n,i),tP(n,i),tz(n,i),a.addPTpair(i),e.appendChild(n)}i.setPTs(a)}}return a}(t);a.id=w,_.appendChild(o({content:a,buttonLabel:"Conditions",buttonFontSize:tt,boundary:tg,level:ti,contentDivId:w}))}let M=document.getElementById("modelParameters"),L="modelParametersDivId";if(n(L),null==M);else{let a=function(t){console.log(ez.tagName);let a=document.createElement("div"),s=z(t,ez.tagName),i=new ez(P(s));e.setModelParameters(i),function(e,t,a){let s,i,n=f(tn);a.appendChild(n);let o=t.getElementsByTagName(ew.tagName);if(1==o.length){let t=parseFloat(i=b(E(o[0])));s=new ew(P(o[0]),t),e.setGrainSize(s)}else i="",s=new ew(new Map,NaN);let r=ez.tagName+"_"+ew.tagName+"_checkbox",l=ez.tagName+"_"+ew.tagName+"_input",g=ez.tagName+"_"+ew.tagName+"_SelectUnits",h=d("checkbox",r,tg,ti,t=>{if(t.target instanceof HTMLInputElement){if(t.target.checked)tR(e,n,s,l,g,i);else{e.removeGrainSize();let t=document.getElementById(l);null!=t&&t.remove(),null!=(t=document.getElementById(g))&&t.remove()}}},"",ew.tagName);n.appendChild(h),tI(h,o)&&tR(e,n,s,l,g,i)}(i,s,a);let n=s.getElementsByTagName(e5.tagName);if(n.length>0){if(n.length>1)throw Error("Expecting 1 "+e5.tagName+" but finding "+n.length+"!");let e=P(n[0]),t=parseFloat(b(E(n[0]))),s=new e5(e,t);i.setAutomaticallySetMaxEne(s);let o=d("number",ez.tagName+"_"+e5.tagName,tg,tn,e=>{e.target instanceof HTMLInputElement&&(ty(s,e.target),h(e.target))},t.toString(),e5.tagName);tC(void 0,e,o,ez.tagName+"_"+e5.tagName,e5.tagName,tg),a.appendChild(o)}let o=s.getElementsByTagName(eL.tagName);if(o.length>0){if(o.length>1)throw Error("Expecting 1 "+eL.tagName+" but finding "+o.length+"!");let e=P(o[0]),t=new eL(e,parseFloat(b(E(o[0]))));i.setEnergyAboveTheTopHill(t);let s=d("number",ez.tagName+"_"+eL.tagName,tg,tn,e=>{e.target instanceof HTMLInputElement&&(ty(t,e.target),h(e.target))},t.value.toString(),eL.tagName);tC(["kT"],e,s,ez.tagName+"_"+eL.tagName,eL.tagName,tg),a.appendChild(s)}let r=s.getElementsByTagName(eP.tagName);if(r.length>0){if(r.length>1)throw Error("Expecting 1 "+eP.tagName+" but finding "+r.length+"!");let e=P(r[0]),t=new eP(e,parseFloat(b(E(r[0]))));i.setMaxTemperature(t);let s=d("number",ez.tagName+"_"+eP.tagName,tg,tn,e=>{e.target instanceof HTMLInputElement&&(ty(t,e.target),h(e.target))},t.value.toString(),eP.tagName);tC(void 0,e,s,ez.tagName+"_"+eP.tagName,eP.tagName,tg),a.appendChild(s)}return a}(t);a.id=L,M.appendChild(o({content:a,buttonLabel:"Model Parameters",buttonFontSize:tt,boundary:tg,level:ti,contentDivId:L}))}let k=document.getElementById("control"),F="controlDivId";if(n(F),null==k);else{let a,s,i,n,r,l,g,h,m,c,u,N,x,v,T,C,S,y,_,w,M,L,R,I;let B=(console.log(e6.tagName),a=document.createElement("div"),s=z(t,e6.tagName),i=new e6(P(s)),e.setControl(i),tI(n=d("checkbox",e6.tagName+"_"+eR.tagName+"_checkbox",tg,tn,e=>{e.target instanceof HTMLInputElement&&(e.target.checked?i.setCalculateRateCoefficientsOnly(new eR):i.removeCalculateRateCoefficientsOnly())},"",eR.tagName),s.getElementsByTagName(eR.tagName))&&i.setCalculateRateCoefficientsOnly(new eR),a.appendChild(n),tI(r=d("checkbox",e6.tagName+"_"+eI.tagName+"_checkbox",tg,tn,e=>{e.target instanceof HTMLInputElement&&(e.target.checked?i.setPrintCellDOS(new eI):i.removePrintCellDOS())},"",eI.tagName),s.getElementsByTagName(eI.tagName))&&i.setPrintCellDOS(new eI),a.appendChild(r),tI(l=d("checkbox",e6.tagName+"_"+eB.tagName+"_checkbox",tg,tn,e=>{e.target instanceof HTMLInputElement&&(e.target.checked?i.setPrintCellTransitionStateFlux(new eB):i.removePrintCellTransitionStateFlux())},"",eB.tagName),s.getElementsByTagName(eB.tagName))&&i.setPrintCellTransitionStateFlux(new eB),a.appendChild(l),tI(g=d("checkbox",e6.tagName+"_"+eO.tagName+"_checkbox",tg,tn,e=>{e.target instanceof HTMLInputElement&&(e.target.checked?i.setPrintReactionOperatorColumnSums(new eO):i.removePrintReactionOperatorColumnSums())},"",eO.tagName),s.getElementsByTagName(eO.tagName))&&i.setPrintReactionOperatorColumnSums(new eO),a.appendChild(g),tI(h=d("checkbox",e6.tagName+"_"+ek.tagName+"_checkbox",tg,tn,e=>{e.target instanceof HTMLInputElement&&(e.target.checked?i.setPrintGrainBoltzmann(new ek):i.removePrintGrainBoltzmann())},"",ek.tagName),s.getElementsByTagName(ek.tagName))&&i.setPrintGrainBoltzmann(new ek),a.appendChild(h),tI(m=d("checkbox",e6.tagName+"_"+eF.tagName+"_checkbox",tg,tn,e=>{e.target instanceof HTMLInputElement&&(e.target.checked?i.setPrintGrainDOS(new eF):i.removePrintGrainDOS())},"",eF.tagName),s.getElementsByTagName(eF.tagName))&&i.setPrintGrainDOS(new eF),a.appendChild(m),tI(c=d("checkbox",e6.tagName+"_"+eD.tagName+"_checkbox",tg,tn,e=>{e.target instanceof HTMLInputElement&&(e.target.checked?i.setPrintGrainkbE(new eD):i.removePrintGrainkbE())},"",eD.tagName),s.getElementsByTagName(eD.tagName))&&i.setPrintGrainkbE(new eD),a.appendChild(c),tI(u=d("checkbox",e6.tagName+"_"+eH.tagName+"_checkbox",tg,tn,e=>{e.target instanceof HTMLInputElement&&(e.target.checked?i.setPrintGrainkfE(new eH):i.removePrintGrainkfE())},"",eH.tagName),s.getElementsByTagName(eH.tagName))&&i.setPrintGrainkfE(new eH),a.appendChild(u),tI(N=d("checkbox",e6.tagName+"_"+eG.tagName+"_checkbox",tg,tn,e=>{e.target instanceof HTMLInputElement&&(e.target.checked?i.setPrintTSsos(new eG):i.removePrintTSsos())},"",eG.tagName),s.getElementsByTagName(eG.tagName)),tI(N,s.getElementsByTagName(eG.tagName))&&i.setPrintTSsos(new eG),a.appendChild(N),tI(x=d("checkbox",e6.tagName+"_"+eA.tagName+"_checkbox",tg,tn,e=>{e.target instanceof HTMLInputElement&&(e.target.checked?i.setPrintGrainedSpeciesProfile(new eA):i.removePrintGrainedSpeciesProfile())},"",eA.tagName),s.getElementsByTagName(eA.tagName))&&i.setPrintGrainedSpeciesProfile(new eA),a.appendChild(x),tI(v=d("checkbox",e6.tagName+"_"+eU.tagName+"_checkbox",tg,tn,e=>{e.target instanceof HTMLInputElement&&(e.target.checked?i.setPrintGrainTransitionStateFlux(new eU):i.removePrintGrainTransitionStateFlux())},"",eU.tagName),s.getElementsByTagName(eU.tagName))&&i.setPrintGrainTransitionStateFlux(new eU),a.appendChild(v),tI(T=d("checkbox",e6.tagName+"_"+eq.tagName+"_checkbox",tg,tn,e=>{e.target instanceof HTMLInputElement&&(e.target.checked?i.setPrintReactionOperatorSize(new eq):i.removePrintReactionOperatorSize())},"",eq.tagName),s.getElementsByTagName(eq.tagName))&&i.setPrintReactionOperatorSize(new eq),a.appendChild(T),tI(C=d("checkbox",e6.tagName+"_"+ej.tagName+"_checkbox",tg,tn,e=>{e.target instanceof HTMLInputElement&&(e.target.checked?i.setPrintSpeciesProfile(new ej):i.removePrintSpeciesProfile())},"",ej.tagName),s.getElementsByTagName(ej.tagName))&&i.setPrintSpeciesProfile(new ej),a.appendChild(C),tI(S=d("checkbox",e6.tagName+"_"+e$.tagName+"_checkbox",tg,tn,e=>{e.target instanceof HTMLInputElement&&(e.target.checked?i.setPrintPhenomenologicalEvolution(new e$):i.removePrintPhenomenologicalEvolution())},"",e$.tagName),s.getElementsByTagName(e$.tagName))&&i.setPrintPhenomenologicalEvolution(new e$),a.appendChild(S),tI(y=d("checkbox",e6.tagName+"_"+eX.tagName+"_checkbox",tg,tn,e=>{e.target instanceof HTMLInputElement&&(e.target.checked?i.setPrintTunnelingCoefficients(new eX):i.removePrintTunnelingCoefficients())},"",eX.tagName),s.getElementsByTagName(eX.tagName))&&i.setPrintTunnelingCoefficients(new eX),a.appendChild(y),tI(_=d("checkbox",e6.tagName+"_"+eV.tagName+"_checkbox",tg,tn,e=>{e.target instanceof HTMLInputElement&&(e.target.checked?i.setPrintCrossingCoefficients(new eV):i.removePrintCrossingCoefficients())},"",eV.tagName),s.getElementsByTagName(eV.tagName))&&i.setPrintCrossingCoefficients(new eV),a.appendChild(_),tI(w=d("checkbox",e6.tagName+"_"+eW.tagName+"_checkbox",tg,tn,e=>{e.target instanceof HTMLInputElement&&(e.target.checked?i.setTestDOS(new eW):i.removeTestDOS())},"",eW.tagName),s.getElementsByTagName(eW.tagName))&&i.setTestDOS(new eW),a.appendChild(w),tI(M=d("checkbox",e6.tagName+"_"+eY.tagName+"_checkbox",tg,tn,e=>{e.target instanceof HTMLInputElement&&(e.target.checked?i.setTestRateConstants(new eY):i.removeTestRateConstants())},"",eY.tagName),s.getElementsByTagName(eY.tagName))&&i.setTestRateConstants(new eY),a.appendChild(M),tI(L=d("checkbox",e6.tagName+"_"+eJ.tagName+"_checkbox",tg,tn,e=>{e.target instanceof HTMLInputElement&&(e.target.checked?i.setUseTheSameCellNumberForAllConditions(new eJ):i.removeUseTheSameCellNumberForAllConditions())},"",eJ.tagName),s.getElementsByTagName(eJ.tagName))&&i.setUseTheSameCellNumberForAllConditions(new eJ),a.appendChild(L),tI(R=d("checkbox",e6.tagName+"_"+eQ.tagName+"_checkbox",tg,tn,e=>{e.target instanceof HTMLInputElement&&(e.target.checked?i.setHideInactive(new eQ):i.removeHideInactive())},"",eQ.tagName),s.getElementsByTagName(eQ.tagName))&&i.setHideInactive(new eQ),a.appendChild(R),tI(I=d("checkbox",e6.tagName+"_"+eK.tagName+"_checkbox",tg,tn,e=>{e.target instanceof HTMLInputElement&&(e.target.checked?i.setForceMacroDetailedBalance(new eK):i.removeForceMacroDetailedBalance())},"",eK.tagName),s.getElementsByTagName(eK.tagName))&&i.setForceMacroDetailedBalance(new eK),a.appendChild(I),function(e,t,a){let s=f(tn);t.appendChild(s);let i=e6.tagName+"_"+e8.tagName+"_checkbox",n=e6.tagName+"_"+e8.tagName+"_Tmax",o=e6.tagName+"_"+e8.tagName+"_Tmin",r=e6.tagName+"_"+e8.tagName+"_Tstep",l=a.getElementsByTagName(e8.tagName),g=d("checkbox",i,tg,ti,t=>{if(t.target instanceof HTMLInputElement){if(t.target.checked)tB(s,l,n,o,r,e);else{let t;e.removeTestMicroRates(),null!=(t=document.getElementById(n))&&t.remove(),null!=(t=document.getElementById(o))&&t.remove(),null!=(t=document.getElementById(r))&&t.remove()}}},"",e8.tagName);s.appendChild(g),tI(g,l)&&tB(s,l,n,o,r,e)}(i,a,s),function(e,t,a){let s,i=f(tn);t.appendChild(i);let n=a.getElementsByTagName(eZ.tagName),o=p(eZ.tagName,"",tg,tg),r=o.querySelector("button");r.classList.add("optionOn"),r.classList.add("optionOff"),i.appendChild(o);let d=e6.tagName+"_"+eZ.tagName+"_input";if(1==n.length){let t=b(E(n[0]));s=new eZ(P(n[0]),t),r.textContent=tm+tu,tO(e,i,s,d,t),r.classList.toggle("optionOff")}else s=new eZ(new Map,"Please use the dropdown to select a value..."),r.textContent=tc+tp,r.classList.toggle("optionOn");let l=s.value;r.addEventListener("click",t=>{if(e.index.has(eZ.tagName)){l=s.value,e.removeCalcMethod();let t=document.getElementById(d);null!=t&&t.remove(),r.textContent=tc+tp,r.classList.toggle("optionOn"),r.classList.toggle("optionOff")}else tO(e,i,s,d,l),r.textContent=tm+tN,r.classList.toggle("optionOff"),r.classList.toggle("optionOn")})}(i,a,s),function(e,t,a){let s,i,n=f(tn);t.appendChild(n);let o=a.getElementsByTagName(e0.tagName),r=p(e0.tagName,"",tg,tg),d=r.querySelector("button");d.classList.add("optionOn"),d.classList.add("optionOff"),n.appendChild(r);let l=e6.tagName+"_"+e0.tagName+"_input";if(1==o.length){let t=parseFloat(i=b(E(o[0])));s=new e0(P(o[0]),t),e.setEigenvalues(s),d.textContent=tm+tu,tk(e,n,s,l,i),d.classList.toggle("optionOff")}else i="",s=new e0(new Map,NaN),d.textContent=tc+tp,d.classList.toggle("optionOn");d.addEventListener("click",t=>{if(e.index.has(e0.tagName)){i=s.value.toString(),e.removeEigenvalues();let t=document.getElementById(l);null!=t&&t.remove(),d.textContent=tc+tp,d.classList.toggle("optionOn"),d.classList.toggle("optionOff")}else tk(e,n,s,l,i),d.textContent=tm+tN,d.classList.toggle("optionOff"),d.classList.toggle("optionOn")})}(i,a,s),function(e,t,a){let s,i,n=f(tn);t.appendChild(n);let o=a.getElementsByTagName(e1.tagName),r=p(e1.tagName,"",tg,tg),d=r.querySelector("button");d.classList.add("optionOn"),d.classList.add("optionOff"),n.appendChild(r);let l=e6.tagName+"_"+e1.tagName+"_input";if(1==o.length){let t=parseFloat(i=b(E(o[0])));s=new e1(P(o[0]),t),e.setShortestTimeOfInterest(s),d.textContent=tm+tu,tF(e,n,s,l,i),d.classList.toggle("optionOff")}else i="",s=new e1(new Map,NaN),d.textContent=tc+tp,d.classList.toggle("optionOn");d.addEventListener("click",t=>{if(e.index.has(e1.tagName)){i=s.value.toString(),e.removeShortestTimeOfInterest();let t=document.getElementById(l);null!=t&&t.remove(),d.textContent=tc+tp,d.classList.toggle("optionOn"),d.classList.toggle("optionOff")}else tF(e,n,s,l,i),d.textContent=tm+tN,d.classList.toggle("optionOff"),d.classList.toggle("optionOn")})}(i,a,s),function(e,t,a){let s,i,n=f(tn);t.appendChild(n);let o=a.getElementsByTagName(e2.tagName),r=p(e2.tagName,"",tg,tg),d=r.querySelector("button");d.classList.add("optionOn"),d.classList.add("optionOff"),n.appendChild(r);let l=e6.tagName+"_"+e2.tagName+"_input";if(1==o.length){let t=parseFloat(i=b(E(o[0])));s=new e2(P(o[0]),t),e.setMaximumEvolutionTime(s),d.textContent=tm+tu,tD(e,n,s,l,i),d.classList.toggle("optionOff")}else i="",s=new e2(new Map,NaN),d.textContent=tc+tp,d.classList.toggle("optionOn");d.addEventListener("click",t=>{if(e.index.has(e2.tagName)){i=s.value.toString(),e.removeMaximumEvolutionTime();let t=document.getElementById(l);null!=t&&t.remove(),d.textContent=tc+tp,d.classList.toggle("optionOn"),d.classList.toggle("optionOff")}else tD(e,n,s,l,i),d.textContent=tm+tN,d.classList.toggle("optionOff"),d.classList.toggle("optionOn")})}(i,a,s),function(e,t,a){let s,i,n=f(tn);t.appendChild(n);let o=a.getElementsByTagName(e5.tagName),r=p(e5.tagName,"",tg,tg),d=r.querySelector("button");d.classList.add("optionOn"),d.classList.add("optionOff"),n.appendChild(r);let l=e6.tagName+"_"+e5.tagName+"_input";if(1==o.length){let t=parseFloat(i=b(E(o[0])));s=new e5(P(o[0]),t),e.setAutomaticallySetMaxEne(s),d.textContent=tm+tu,tH(e,n,s,l,i),d.classList.toggle("optionOff")}else i="",s=new e5(new Map,NaN),d.textContent=tc+tp,d.classList.toggle("optionOn");d.addEventListener("click",t=>{if(e.index.has(e5.tagName)){i=s.value.toString(),e.removeAutomaticallySetMaxEne();let t=document.getElementById(l);null!=t&&t.remove(),d.textContent=tc+tp,d.classList.toggle("optionOn"),d.classList.toggle("optionOff")}else tH(e,n,s,l,i),d.textContent=tm+tN,d.classList.toggle("optionOff"),d.classList.toggle("optionOn")})}(i,a,s),function(e,t,a){let s,i,n=f(tn);t.appendChild(n);let o=a.getElementsByTagName(e4.tagName),r=p(e4.tagName,"",tg,tg),d=r.querySelector("button");d.classList.add("optionOn"),d.classList.add("optionOff"),n.appendChild(r);let l=e6.tagName+"_"+e4.tagName+"_input";if(1==o.length){let t=parseFloat(i=b(E(o[0])));s=new e4(P(o[0]),t),e.setDiagramEnergyOffset(s),d.textContent=tm+tu,tG(e,n,s,l,i),d.classList.toggle("optionOff")}else i="",s=new e4(new Map,NaN),d.textContent=tc+tp,d.classList.toggle("optionOn");d.addEventListener("click",t=>{if(e.index.has(e4.tagName)){i=s.value.toString(),e.removeDiagramEnergyOffset();let t=document.getElementById(l);null!=t&&t.remove(),d.textContent=tc+tp,d.classList.toggle("optionOn"),d.classList.toggle("optionOff")}else tG(e,n,s,l,i),d.textContent=tm+tN,d.classList.toggle("optionOff"),d.classList.toggle("optionOn")})}(i,a,s),a);B.id=F,k.appendChild(o({content:B,buttonLabel:"Control",buttonFontSize:tt,boundary:tg,level:ti,contentDivId:F}))}!function(){for(var e=document.getElementsByClassName("collapsible"),t=0;t<e.length;t++)e[t].removeEventListener("click",r),e[t].addEventListener("click",r)}()}(new DOMParser().parseFromString(S,"text/xml"))}}};let y=a.slice(C,C+1048576);g.readAsText(y),C+=1048576;let _="saveButtonId";n(_);let w=u("Save",tg);w.id=_,w.addEventListener("click",tU),document.getElementById("menu").appendChild(w)}},t.click()}function tT(e,t,a,i,n,o,r){let l=i.getElementsByTagName(k.tagName);if(l.length>0){if(1!=l.length)throw Error("Expecting 1 "+k.tagName+" but finding "+l.length+"!");let s=T(l[0]),i=parseFloat(s),g=P(l[0]),m=new k(g,i);e.setProperty(m);let c=e.dictRef,u=d("number",a.id+"_"+e.dictRef,tg,r,e=>{e.target instanceof HTMLInputElement&&ty(m,e.target)},s,c),p=u.querySelector("input");h(p),p.addEventListener("change",t=>{s=t.target.value,(m=e.getProperty()).value=parseFloat(s),console.log("Set "+e.dictRef+" of "+a.id+" to "+s),h(p),e.dictRef==H.dictRef&&(i<tv&&(tv=i),i>tx&&(tx=i),tA())}),tC(t,g,u,a.id+"_"+e.dictRef+"_Select_Units",e.dictRef,o),n.appendChild(u)}else{let l=i.getElementsByTagName(F.tagName);if(l.length>0){if(1!=l.length)throw Error("Expecting 1 "+F.tagName+" but finding "+l.length+"!");let i=T(l[0]),g=s(i.split(/\s+/)),m=P(l[0]),c=new F(m,g);e.setProperty(c);let u=e.dictRef,p=d("text",a.id+"_"+e.dictRef,o,r,e=>{e.target instanceof HTMLInputElement&&tS(c,e.target)},i,u),N=p.querySelector("input");N.value=i,h(N),N.addEventListener("change",t=>{i=t.target.value,c=e.getProperty(),g=s(i.split(/\s+/)),c.values=g,console.log("Set "+e.dictRef+" of "+a.id+" to "+i),h(N)}),tC(t,m,p,a.id+"_"+e.dictRef+"_Select_Units",e.dictRef,o),n.appendChild(p)}else throw Error("Expecting "+k.tagName+" or "+F.tagName)}}function tC(e,t,a,s,i,n){if(void 0!=e){let o=function(e,t,a,s){let i=t.get("units");if(void 0!=i){let n=c(e,"Units",a,tg);return n.value=i,m(n),n.addEventListener("change",e=>{e.target instanceof HTMLSelectElement&&(t.set("units",e.target.value),console.log("Set "+s+" units to "+e.target.value)),m(n)}),n}}(e,t,s,i);void 0!=o&&(Object.assign(o.style,n),a.appendChild(o))}else{let e=t.get("units");if(void 0!=e){let t=x(e,n);a.appendChild(t)}}}function tS(e,t){let s=t.value.trim();if(""==s){alert("Empty input resetting..."),t.value=a(e.values," ");return}let n=s.split(/\s+/),o=[],r=!0;if(n.forEach(function(e){i(e)||(r=!1),o.push(parseFloat(e))}),!r){alert("An input is not a number, resetting..."),t.value=a(e.values," ");return}o.length==e.values.length?console.log("Changed "+e.tagName+' from: "'+s+'" to: "'+a(e.values," ")+'"'):(alert("Expecting "+e.values.length+" values for, but finding "+o.length+" resetting..."),t.value=a(e.values," "))}function ty(e,t){if(i(t.value)){let a=parseFloat(t.value);e.value=a,console.log(e.tagName+" value set to "+a)}else alert("Value is not numeric, resetting..."),t.value=e.value.toString()}function t_(e,t){let a=d("number",eS.tagName+"_P",tg,ti,e=>{e.target instanceof HTMLInputElement&&(i(e.target.value)?(t.setP(parseFloat(e.target.value)),console.log("Set P to "+e.target.value)):(alert("Value is not numeric, resetting..."),e.target.value=t.getP().toString()),h(e.target))},t.getP().toString(),"P"),s=a.querySelector("input");s.value=t.getP().toString(),h(s),e.appendChild(a)}function tw(e,t){let a=d("number",eS.tagName+"_T",tg,ti,e=>{e.target instanceof HTMLInputElement&&(i(e.target.value)?(t.setT(parseFloat(e.target.value)),console.log("Set T to "+e.target.value)):(alert("Value is not numeric, resetting..."),e.target.value=t.getT().toString()),h(e.target))},t.getT().toString(),"T"),s=a.querySelector("input");s.value=t.getT().toString(),h(s),e.appendChild(a)}function tM(e,t){let a=u("add "+ec.tagName,tg);e.append(a),a.addEventListener("click",()=>{let s=document.createElement("label");s.textContent="excessReactantConc: ",e.appendChild(s);let i=l("number",eS.tagName+"_"+ec.tagName,tg);i.value=NaN.toString(),i.addEventListener("change",e=>{e.target instanceof HTMLInputElement&&(t.setExcessReactantConc(e.target.value),console.log("Set excessReactantConc to "+e.target.value),h(e.target))}),h(i),e.appendChild(i);let n=u("âœ•",tg);n.addEventListener("click",()=>{e.removeChild(s),e.removeChild(i),e.removeChild(n),tM(e,t)}),e.appendChild(n),e.removeChild(a)})}function tL(e,t){let a=u("add percentExcessReactantConc",tg);e.appendChild(a),a.addEventListener("click",()=>{let a=document.createElement("label");a.textContent="percentExcessReactantConc: ",e.appendChild(a);let s=l("number",eS.tagName+"_percentExcessReactantConc",tg);s.value=NaN.toString(),s.addEventListener("change",e=>{e.target instanceof HTMLInputElement&&(t.setPercentExcessReactantConc(e.target.value),console.log("Set percentExcessReactantConc to "+e.target.value),h(e.target))}),h(s),e.appendChild(s)})}function tP(e,t){let a=u("add precision",tg);e.appendChild(a),a.addEventListener("click",()=>{let a=document.createElement("label");a.textContent="Precision: ",e.appendChild(a);let s=l("number",eS.tagName+"_precision",tg);s.value=NaN.toString(),s.addEventListener("change",e=>{e.target instanceof HTMLInputElement&&(t.setPrecision(e.target.value),console.log("Set Precision to "+e.target.value),h(e.target))}),h(s),e.appendChild(s)})}function tz(e,t){let a=u("add "+ev.tagName,tg);e.appendChild(a),a.addEventListener("click",()=>{let s=document.createElement("div"),i=new ev(new Map,"");t.setBathGas(i);let n=document.createElement("label");n.textContent=ev.tagName+": ",s.appendChild(n),e.insertBefore(s,a);let o=c(Array.from(new Set(tf.keys())),ev.tagName,ey.tagName+"_"+ev.tagName,tg);o.value=i.value,o.addEventListener("change",e=>{e.target instanceof HTMLSelectElement&&(i.value=e.target.value,console.log("Added "+e.target.value+" as a "+ev.tagName),m(e.target))}),m(o),s.appendChild(o),e.insertBefore(s,a),e.removeChild(a)})}function tR(e,t,a,s,i,n){e.setGrainSize(a);let o=l("number",s,tg);o.addEventListener("change",e=>{e.target instanceof HTMLInputElement&&(ty(a,e.target),h(e.target))}),o.value=n,h(o),t.appendChild(o),tC(H.units,a.attributes,t,i,ew.tagName,tg)}function tI(e,t){let a=e.querySelector("input");return t.length>0&&(t.length>1&&console.error("xml.length="+t.length),a.checked=!0,!0)}function tB(e,t,a,s,n,o){let r,l;1==t.length?l=new e8(r=P(t[0])):((r=new Map).set("Tmax",""),r.set("Tmin",""),r.set("Tstep",""),l=new e8(r));let g=l.getTmax(),m=d("number",a+"_input",tg,ti,e=>{e.target instanceof HTMLInputElement&&(i(e.target.value)?(l.setTmax(parseFloat(e.target.value)),console.log("Set Tmax to "+e.target.value)):(alert("Value is not numeric, resetting..."),e.target.value=g.toString()),h(e.target))},g.toString(),"Tmax");m.id=a,h(m.querySelector("input")),e.appendChild(m);let c=d("number",s+"_input",tg,ti,e=>{e.target instanceof HTMLInputElement&&(i(e.target.value)?(l.setTmin(parseFloat(e.target.value)),console.log("Set Tmin to "+e.target.value)):(alert("Value is not numeric, resetting..."),e.target.value=g.toString()),h(e.target))},l.getTmin().toString(),"Tmin");c.id=s,h(c.querySelector("input")),e.appendChild(c);let u=d("number",n+"_input",tg,ti,e=>{e.target instanceof HTMLInputElement&&(i(e.target.value)?(l.setTstep(parseFloat(e.target.value)),console.log("Set Tstep to "+e.target.value)):(alert("Value is not numeric, resetting..."),e.target.value=g.toString()),h(e.target))},l.getTstep().toString(),"Tstep");u.id=n,h(u.querySelector("input")),e.appendChild(u),o.setTestMicroRates(l)}function tO(e,t,a,s,i){let n=eZ.options;n.push("Please use the dropdown to select a value...");let o=c(n,i,s,tg);o.addEventListener("change",e=>{e.target instanceof HTMLSelectElement&&(a.value=e.target.value,m(e.target))}),o.value=i,m(o),t.appendChild(o),e.setCalcMethod(a)}function tk(e,t,a,s,i){e.setEigenvalues(a);let n=l("number",s,tg);n.addEventListener("change",e=>{e.target instanceof HTMLInputElement&&(ty(a,e.target),h(e.target))}),n.value=i,h(n),t.appendChild(n)}function tF(e,t,a,s,i){e.setShortestTimeOfInterest(a);let n=l("number",s,tg);n.addEventListener("change",e=>{e.target instanceof HTMLInputElement&&(ty(a,e.target),h(e.target))}),n.value=i,h(n),t.appendChild(n)}function tD(e,t,a,s,i){e.setMaximumEvolutionTime(a);let n=l("number",s,tg);n.addEventListener("change",e=>{e.target instanceof HTMLInputElement&&(ty(a,e.target),h(e.target))}),n.value=i,h(n),t.appendChild(n)}function tH(e,t,a,s,i){e.setAutomaticallySetMaxEne(a);let n=l("number",s,tg);n.addEventListener("change",e=>{e.target instanceof HTMLInputElement&&(ty(a,e.target),h(e.target))}),n.value=i,h(n),t.appendChild(n)}function tG(e,t,a,s,i){e.setDiagramEnergyOffset(a);let n=l("number",s,tg);n.addEventListener("change",e=>{e.target instanceof HTMLInputElement&&(ty(a,e.target),h(e.target))}),n.value=i,h(n),t.appendChild(n)}function tA(){if(tE.size>0){let e=document.getElementById("reactions"),a="reactionsDiagram",s=document.getElementById(a);null!=s&&s.remove();let i=document.createElement("canvas");i.id=a,i.width=800,i.height=400,i.style.border="1px solid black",null!=i&&(i.style.display="block",function(e,a,s,i,n){var o;let r,d,l,g;console.log("drawReactionDiagram");let h="black",m=e.getContext("2d"),c=(m.font=s,(o=m.measureText("Aj")).actualBoundingBoxAscent+o.actualBoundingBoxDescent),u=[],p=new Set,N=new Set,f=new Set,x=new Map,v=new Map,E=0,b=Number.MAX_VALUE,T=Number.MIN_VALUE;tE.forEach(function(e,a){let s=e.getTransitionStates(),i=e.getReactantsLabel();if(void 0!=i){u.push(i),p.has(i)&&N.add(i);let t=e.getReactantsEnergy(tf);b=Math.min(b,t),T=Math.max(T,t),v.set(i,t),!x.has(i)&&(x.set(i,E),E++)}let n=e.getProductsLabel();if(void 0!=n){p.add(n);let a=e.getProductsEnergy(tf);if(b=Math.min(b,a),T=Math.max(T,a),v.set(n,a),x.has(n)){E--;let e=t(x,n);x.forEach(function(t,a){t>e&&x.set(a,t-1)}),void 0!=s&&(s.forEach(function(e){let t=e.getMolecule().ref;f.add(t),x.set(t,E),a=tf.get(t)?.getEnergy()??0,b=Math.min(b,a),T=Math.max(T,a),v.set(t,a),E++}),x.set(n,E),E++)}else void 0!=s&&s.forEach(function(e){let t=e.getMolecule().ref;f.add(t),x.set(t,E),a=tf.get(t)?.getEnergy()??0,b=Math.min(b,a),T=Math.max(T,a),v.set(t,a),E++}),x.set(n,E),E++}});let C=T-b,S=[];x.forEach(function(e,t){S[e]=t});let y=0,_=0,w=new Map,M=new Map,L=new Map,P=new Map,z=new Map,R=new Map;S.forEach(function(a){let i=t(v,a),n=(i-b)*e.height/(C+0)+0;g=Math.max(ex(m,i.toString(),s),ex(m,a,s)),d=y+g+5,l=r=n+4,w.set(a,[y,r]),M.set(a,[d,l]),p.has(a)&&(L.set(a,[y,r]),P.set(a,[d,l])),f.has(a)&&(z.set(a,[y,r]),R.set(a,[d,l])),y=d+10,_=d}),e.width=_;let I=e.height+4*c+8,B=e.height;e.height=I,m.transform(1,0,0,-1,0,I),tE.forEach(function(e,a){let s=e.getTransitionStates(),i=e.getReactantsLabel(),n=e.getProductsLabel(),o=t(M,i),r=t(L,n);s.length>0?s.forEach(function(e){let a=e.getMolecule().ref,s=t(z,a);eN(m,h,2,o[0],o[1],s[0],s[1]);let i=t(R,a);eN(m,h,2,i[0],i[1],r[0],r[1])}):eN(m,h,2,o[0],o[1],r[0],r[1])}),u.forEach(function(e){let a=t(v,e),n=(a-b)*B/(C+0)+0,o=t(w,e)[0],r=n+4;ep(m,"blue",i,o,r,t(M,e)[0],r,s,c,e,a.toString())}),p.forEach(function(e){let a=t(v,e),n=(a-b)*B/(C+0)+0,o=t(L,e)[0],r=n+i,d=t(P,e)[0],l=a.toString();N.has(e)?ep(m,"orange",i,o,r,d,r,s,c,e,l):ep(m,"green",i,o,r,d,r,s,c,e,l)}),f.forEach(function(e){let a=t(v,e),n=(a-b)*B/(C+0)+0,o=t(z,e)[0],r=n+i;ep(m,"red",i,o,r,t(R,e)[0],r,s,c,e,a.toString())})}(i,0,"14px Arial",4,2)),e.appendChild(i)}}function tU(){console.log("saveXML");let t=new Blob([te.header,e.toXML("  ","  ")],{type:"text/plain"}),a=URL.createObjectURL(t),s=document.createElement("a");s.href=a;let i=e.getTitle()?.value;s.download=i.replace(/[^a-z0-9]/gi,"_")+".xml",document.body.appendChild(s),s.click(),document.body.removeChild(s)}document.addEventListener("DOMContentLoaded",()=>{let e=u("Load",tg);e.addEventListener("click",tb);let t=document.getElementById("menu");t&&t.appendChild(e),t.style.display="flex"}),window.setNumberArrayNode=tS,window.set=ty;
//# sourceMappingURL=index.a10a19fc.js.map
