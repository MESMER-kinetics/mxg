let e,t,s,n,a,d,o,l,r,g,h,c,m,u;function f(e){return e&&e.__esModule?e.default:e}var p={};function N(e,t){if(!e.has(t))throw Error(`Key ${t} not found in map`);return e.get(t)}function x(...e){let t=e.map(e=>e.toString()).join("-").replace(/[^a-zA-Z-_0-9]/g,"_");return/^[0-9]|^--|-^[0-9]/.test(t)&&(t="_"+t),t}function v(e,t){return null==e?"":(void 0==t&&(t=", "),Array.from(e.entries()).map(([e,t])=>`${null==e?"null":e.toString()}(${null==t?"null":t.toString()})`).join(t))}function E(e,t){return void 0==t&&(t=", "),e.map(e=>null==e?"null":e.toString()).join(t)}function y(e){let t=[];for(let s=0;s<e.length;s++)t.push(new(f(p))(e[s]));return t}function w(e){try{return new(f(p))(e),!0}catch(e){return!1}}function R(e,t){return void 0==t&&(t=" "),e.map(e=>e.toString()).join(t)}function b(e,t){return null==e||e.lt(t)?t:e}function C(e,t){return null==e||e.gt(t)?t:e}!function(e){var t,s="[big.js] ",n=s+"Invalid ",a=n+"decimal places",d=n+"rounding mode",o=s+"Division by zero",l={},r=void 0,g=/^-?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i;function h(e,t,s,n){var a=e.c;if(s===r&&(s=e.constructor.RM),0!==s&&1!==s&&2!==s&&3!==s)throw Error(d);if(t<1)n=3===s&&(n||!!a[0])||0===t&&(1===s&&a[0]>=5||2===s&&(a[0]>5||5===a[0]&&(n||a[1]!==r))),a.length=1,n?(e.e=e.e-t+1,a[0]=1):a[0]=e.e=0;else if(t<a.length){if(n=1===s&&a[t]>=5||2===s&&(a[t]>5||5===a[t]&&(n||a[t+1]!==r||1&a[t-1]))||3===s&&(n||!!a[0]),a.length=t,n){for(;++a[--t]>9;)if(a[t]=0,0===t){++e.e,a.unshift(1);break}}for(t=a.length;!a[--t];)a.pop()}return e}function c(e,t,s){var n=e.e,a=e.c.join(""),d=a.length;if(t)a=a.charAt(0)+(d>1?"."+a.slice(1):"")+(n<0?"e":"e+")+n;else if(n<0){for(;++n;)a="0"+a;a="0."+a}else if(n>0){if(++n>d)for(n-=d;n--;)a+="0";else n<d&&(a=a.slice(0,n)+"."+a.slice(n))}else d>1&&(a=a.charAt(0)+"."+a.slice(1));return e.s<0&&s?"-"+a:a}l.abs=function(){var e=new this.constructor(this);return e.s=1,e},l.cmp=function(e){var t,s=this.c,n=(e=new this.constructor(e)).c,a=this.s,d=e.s,o=this.e,l=e.e;if(!s[0]||!n[0])return s[0]?a:n[0]?-d:0;if(a!=d)return a;if(t=a<0,o!=l)return o>l^t?1:-1;for(a=-1,d=(o=s.length)<(l=n.length)?o:l;++a<d;)if(s[a]!=n[a])return s[a]>n[a]^t?1:-1;return o==l?0:o>l^t?1:-1},l.div=function(e){var t=this.constructor,s=this.c,n=(e=new t(e)).c,d=this.s==e.s?1:-1,l=t.DP;if(l!==~~l||l<0||l>1e6)throw Error(a);if(!n[0])throw Error(o);if(!s[0])return e.s=d,e.c=[e.e=0],e;var g,c,m,u,f,p=n.slice(),N=g=n.length,x=s.length,v=s.slice(0,g),E=v.length,y=e,w=y.c=[],R=0,b=l+(y.e=this.e-e.e)+1;for(y.s=d,d=b<0?0:b,p.unshift(0);E++<g;)v.push(0);do{for(m=0;m<10;m++){if(g!=(E=v.length))u=g>E?1:-1;else for(f=-1,u=0;++f<g;)if(n[f]!=v[f]){u=n[f]>v[f]?1:-1;break}if(u<0){for(c=E==g?n:p;E;){if(v[--E]<c[E]){for(f=E;f&&!v[--f];)v[f]=9;--v[f],v[E]+=10}v[E]-=c[E]}for(;!v[0];)v.shift()}else break}w[R++]=u?m:++m,v[0]&&u?v[E]=s[N]||0:v=[s[N]]}while((N++<x||v[0]!==r)&&d--)return!w[0]&&1!=R&&(w.shift(),y.e--,b--),R>b&&h(y,b,t.RM,v[0]!==r),y},l.eq=function(e){return 0===this.cmp(e)},l.gt=function(e){return this.cmp(e)>0},l.gte=function(e){return this.cmp(e)>-1},l.lt=function(e){return 0>this.cmp(e)},l.lte=function(e){return 1>this.cmp(e)},l.minus=l.sub=function(e){var t,s,n,a,d=this.constructor,o=this.s,l=(e=new d(e)).s;if(o!=l)return e.s=-l,this.plus(e);var r=this.c.slice(),g=this.e,h=e.c,c=e.e;if(!r[0]||!h[0])return h[0]?e.s=-l:r[0]?e=new d(this):e.s=1,e;if(o=g-c){for((a=o<0)?(o=-o,n=r):(c=g,n=h),n.reverse(),l=o;l--;)n.push(0);n.reverse()}else for(s=((a=r.length<h.length)?r:h).length,o=l=0;l<s;l++)if(r[l]!=h[l]){a=r[l]<h[l];break}if(a&&(n=r,r=h,h=n,e.s=-e.s),(l=(s=h.length)-(t=r.length))>0)for(;l--;)r[t++]=0;for(l=t;s>o;){if(r[--s]<h[s]){for(t=s;t&&!r[--t];)r[t]=9;--r[t],r[s]+=10}r[s]-=h[s]}for(;0===r[--l];)r.pop();for(;0===r[0];)r.shift(),--c;return r[0]||(e.s=1,r=[c=0]),e.c=r,e.e=c,e},l.mod=function(e){var t,s=this,n=s.constructor,a=s.s,d=(e=new n(e)).s;if(!e.c[0])throw Error(o);return(s.s=e.s=1,t=1==e.cmp(s),s.s=a,e.s=d,t)?new n(s):(a=n.DP,d=n.RM,n.DP=n.RM=0,s=s.div(e),n.DP=a,n.RM=d,this.minus(s.times(e)))},l.neg=function(){var e=new this.constructor(this);return e.s=-e.s,e},l.plus=l.add=function(e){var t,s,n,a=this.constructor;if(e=new a(e),this.s!=e.s)return e.s=-e.s,this.minus(e);var d=this.e,o=this.c,l=e.e,r=e.c;if(!o[0]||!r[0])return r[0]||(o[0]?e=new a(this):e.s=this.s),e;if(o=o.slice(),t=d-l){for(t>0?(l=d,n=r):(t=-t,n=o),n.reverse();t--;)n.push(0);n.reverse()}for(o.length-r.length<0&&(n=r,r=o,o=n),t=r.length,s=0;t;o[t]%=10)s=(o[--t]=o[t]+r[t]+s)/10|0;for(s&&(o.unshift(s),++l),t=o.length;0===o[--t];)o.pop();return e.c=o,e.e=l,e},l.pow=function(e){var t=this,s=new t.constructor("1"),a=s,d=e<0;if(e!==~~e||e<-1e6||e>1e6)throw Error(n+"exponent");for(d&&(e=-e);1&e&&(a=a.times(t)),e>>=1;)t=t.times(t);return d?s.div(a):a},l.prec=function(e,t){if(e!==~~e||e<1||e>1e6)throw Error(n+"precision");return h(new this.constructor(this),e,t)},l.round=function(e,t){if(e===r)e=0;else if(e!==~~e||e<-1e6||e>1e6)throw Error(a);return h(new this.constructor(this),e+this.e+1,t)},l.sqrt=function(){var e,t,n,a=this.constructor,d=this.s,o=this.e,l=new a("0.5");if(!this.c[0])return new a(this);if(d<0)throw Error(s+"No square root");0===(d=Math.sqrt(this+""))||d===1/0?((t=this.c.join("")).length+o&1||(t+="0"),o=((o+1)/2|0)-(o<0||1&o),e=new a(((d=Math.sqrt(t))==1/0?"5e":(d=d.toExponential()).slice(0,d.indexOf("e")+1))+o)):e=new a(d+""),o=e.e+(a.DP+=4);do n=e,e=l.times(n.plus(this.div(n)));while(n.c.slice(0,o).join("")!==e.c.slice(0,o).join(""))return h(e,(a.DP-=4)+e.e+1,a.RM)},l.times=l.mul=function(e){var t,s=this.constructor,n=this.c,a=(e=new s(e)).c,d=n.length,o=a.length,l=this.e,r=e.e;if(e.s=this.s==e.s?1:-1,!n[0]||!a[0])return e.c=[e.e=0],e;for(e.e=l+r,d<o&&(t=n,n=a,a=t,r=d,d=o,o=r),t=Array(r=d+o);r--;)t[r]=0;for(l=o;l--;){for(o=0,r=d+l;r>l;)o=t[r]+a[l]*n[r-l-1]+o,t[r--]=o%10,o=o/10|0;t[r]=o}for(o?++e.e:t.shift(),l=t.length;!t[--l];)t.pop();return e.c=t,e},l.toExponential=function(e,t){var s=this,n=s.c[0];if(e!==r){if(e!==~~e||e<0||e>1e6)throw Error(a);for(s=h(new s.constructor(s),++e,t);s.c.length<e;)s.c.push(0)}return c(s,!0,!!n)},l.toFixed=function(e,t){var s=this,n=s.c[0];if(e!==r){if(e!==~~e||e<0||e>1e6)throw Error(a);for(s=h(new s.constructor(s),e+s.e+1,t),e=e+s.e+1;s.c.length<e;)s.c.push(0)}return c(s,!1,!!n)},l.toJSON=l.toString=function(){var e=this.constructor;return c(this,this.e<=e.NE||this.e>=e.PE,!!this.c[0])},l.toNumber=function(){var e=Number(c(this,!0,!0));if(!0===this.constructor.strict&&!this.eq(e.toString()))throw Error(s+"Imprecise conversion");return e},l.toPrecision=function(e,t){var s=this,a=s.constructor,d=s.c[0];if(e!==r){if(e!==~~e||e<1||e>1e6)throw Error(n+"precision");for(s=h(new a(s),e,t);s.c.length<e;)s.c.push(0)}return c(s,e<=s.e||s.e<=a.NE||s.e>=a.PE,!!d)},l.valueOf=function(){var e=this.constructor;if(!0===e.strict)throw Error(s+"valueOf disallowed");return c(this,this.e<=e.NE||this.e>=e.PE,!0)},(t=function e(){function t(s){if(!(this instanceof t))return s===r?e():new t(s);if(s instanceof t)this.s=s.s,this.e=s.e,this.c=s.c.slice();else{if("string"!=typeof s){if(!0===t.strict&&"bigint"!=typeof s)throw TypeError(n+"value");s=0===s&&1/s<0?"-0":String(s)}(function(e,t){var s,a,d;if(!g.test(t))throw Error(n+"number");for(e.s="-"==t.charAt(0)?(t=t.slice(1),-1):1,(s=t.indexOf("."))>-1&&(t=t.replace(".","")),(a=t.search(/e/i))>0?(s<0&&(s=a),s+=+t.slice(a+1),t=t.substring(0,a)):s<0&&(s=t.length),d=t.length,a=0;a<d&&"0"==t.charAt(a);)++a;if(a==d)e.c=[e.e=0];else{for(;d>0&&"0"==t.charAt(--d););for(e.e=s-a-1,e.c=[],s=0;a<=d;)e.c[s++]=+t.charAt(a++)}})(this,s)}this.constructor=t}return t.prototype=l,t.DP=20,t.RM=1,t.NE=-7,t.PE=21,t.strict=!1,t.roundDown=0,t.roundHalfUp=1,t.roundHalfEven=2,t.roundUp=3,t}()).default=t.Big=t,"function"==typeof define&&define.amd?define(function(){return t}):p?p=t:e.Big=t}(p);const S="button",M="select";function T(e,t,s,n,a,d,o){let l=U(e,o),r=O(a+" ▼",x(e,S),d);return r.className="collapsible",r.addEventListener("click",function(){let e=r.textContent.split(" ");e[e.length-1]="▼"===e[e.length-1]?"▲":"▼",r.textContent=e.join(" ")}),l.appendChild(r),l.appendChild(n),null!=s?t.insertBefore(l,s):t.appendChild(l),r.removeEventListener("click",I),r.addEventListener("click",I),l}function I(){this.classList.toggle("active");let e=this.nextElementSibling;null!=e?e instanceof HTMLDivElement?"block"===e.style.display?e.style.display="none":e.style.display="block":console.log("toggleCollapsible: nextElementSibling is not an HTMLDivElement"):console.log("toggleCollapsible: nextElementSibling is null")}function z(e,t,s,n,a,d,o){let l;let r=q(void 0,n),g=((l=D(e,t,s)).onchange=a,l.value=d,L(l),l),h=V(o,s);return h.htmlFor=t,r.appendChild(h),r.appendChild(g),r}function D(e,t,s){let n=document.createElement("input");return n.type=e,n.id=t,Object.assign(n.style,s),n.style.fontSize="1em",n.classList.add("auto-width"),n}function _(e,t){let s=document.createElement("textarea");return s.id=e,Object.assign(s.style,t),s.style.fontSize="1em",s.classList.add("auto-width"),s}function P(e,t){let s="<"+t;if(e)for(let[t,n]of e)s+=" "+t+'="'+n+'"';return s+" />"}function L(e,t){void 0==t&&(t=4),e.style.width=e.value.length+t+"ch"}function B(e,t){void 0==t&&(t=6),e.style.width=e.value.length+t+"ch"}function A(e,t){void 0==t&&(t=6),e.style.width=e.value.length+t+"ch"}function k(e,t,s,n,a){let d=document.createElement("select");return e.forEach(e=>{d.name=t,d.id=n;let s=document.createElement("option");s.value=e,s.text=e,d.appendChild(s)}),d.value=s,d.style.fontSize="1em",d.classList.add("auto-width"),B(d),Object.assign(d.style,a),d}function G(e,t,s,n,a,d,o){let l=q(a,o),r=V(e,d);return l.appendChild(r),l.appendChild(k(t,s,n,x(a,M),d)),l}function O(e,t,s){let n=document.createElement("button");return n.textContent=e,void 0!=t&&(n.id=t),void 0!=s&&Object.assign(n.style,s),n.style.fontSize="1em",n}function U(e,t){let s=document.createElement("div");return void 0!=e&&(s.id=e),void 0!=t&&Object.assign(s.style,t),s}function q(e,t){let s=U(e,t);return s.style.display="flex",s.style.flexWrap="wrap",s}function V(e,t){let s=document.createElement("label");return Object.assign(s.style,t),s.textContent=e,s.style.fontSize="1em",s}function F(e,t){let s=document.createElement("table");return s.id=e,Object.assign(s.style,t),s}function H(e,t){let s=e.insertRow();return t.forEach(e=>{s.insertCell().textContent=e}),s}function j(e,t){let s=e.getElementsByTagName(t)[0];if(null==s)throw Error(t+" element not found");return s}function X(e){let t=e.childNodes;if(null==t)throw Error("Element has no childNodes");return t[0]}function Y(e){let t=e.nodeValue;if(null==t)throw Error("nodeValue is null");return t}function $(e){let t=X(e);return t?Y(t).trim():""}class K{constructor(e){this.tagName=e}toXML(e){let t=P(void 0,this.tagName);return e?"\n"+e+t:t}}class W extends K{constructor(e,t){super(t),this.attributes=e}toString(){let e=this.tagName+"(";return this.attributes&&this.attributes.forEach((t,s)=>{e+=`${s}(${t}), `}),e}toXML(e){let t="";for(let[s,n]of(void 0!=e&&(t+="\n"+e),t+="<"+this.tagName,this.attributes))t+=" "+s+'="'+n.toString()+'"';return t+" />"}}class Z extends W{constructor(e,t,s){super(e,t),this.value=s}toString(){return super.toString()+`, ${this.value.toString()})`}toXML(e){return et(this.value.trim(),this.tagName,this.attributes,e,!1)}}class Q extends W{constructor(e,t,s){super(e,t),this.value=s}toString(){return super.toString()+`, ${this.value.toString()})`}toXML(e){return et(this.value.toString(),this.tagName,this.attributes,e,!1)}}class J extends W{constructor(e,t,s,n){super(e,t),this.delimiter=" ",this.values=s,void 0!=n&&(this.delimiter=n)}getValues(){return this.values}setValues(e){this.values=e}toString(){return super.toString()+`, ${this.values.toString()})`}setDelimiter(e){this.delimiter=e}toXML(e){return et(R(this.values,this.delimiter),this.tagName,this.attributes,e,!1)}}class ee extends W{constructor(e,t){super(e,t),this.nodes=new Map}addNode(e){this.nodes.set(this.nodes.size,e)}toString(){let e=super.toString();return this.nodes.forEach((t,s)=>{e+=`, ${t.toString()}`}),e+")"}toXML(e,t){let s;void 0!=e&&void 0!=t&&(s=t+e);let n="";if(this.nodes.size>0){let a=0;return this.nodes.forEach(t=>{void 0==t?console.warn("Node "+a.toString()+" is undefined this.nodes.size = "+this.nodes.size):t instanceof ee?n+=t.toXML(e,s):n+=t.toXML(s),a++}),et(n,this.tagName,this.attributes,t,!0)}{let e=P(this.attributes,this.tagName);return void 0!=t?"\n"+t+e:e}}}function et(e,t,s,n,a){let d;return function(e,t,s){let n="";if(void 0!=s&&(n+="\n"+s),n+="<"+e,t)for(let[e,s]of t)n+=" "+e+'="'+s.toString()+'"';return n+">"}(t,s,n)+e+(d="",a&&void 0!=n&&(d+="\n"+n),d+"</"+t+">")}function es(e){let t=e.getAttributeNames(),s=new Map;return t.forEach(function(t){let n=e.getAttribute(t);null!=n&&s.set(t.trim(),n.trim())}),s}function ei(e,t){let s=e.getElementsByTagName(t);if(1!=s.length)throw Error("Expecting 1 "+t+" but finding "+s.length);return s[0]}class en extends Q{static{this.tagName="me:eigenvalue"}constructor(e,t){super(e,en.tagName,t)}}class ea extends ee{static{this.tagName="me:eigenvalueList"}constructor(e,t){super(e,ea.tagName),t&&t.forEach(e=>{this.addNode(e)})}addEigenvalue(e){this.addNode(e)}}class ed extends Q{static{this.tagName="me:pop"}constructor(e,t){super(e,ed.tagName,t)}}class eo extends ee{static{this.tagName="me:population"}constructor(e,t){super(e,eo.tagName)}addPop(e){this.addNode(e)}}class el extends ee{static{this.tagName="me:populationList"}constructor(e,t){super(e,el.tagName),t&&t.forEach(e=>{this.addNode(e)})}addPopulation(e){this.addNode(e)}}class er extends Q{static{this.tagName="me:firstOrderLoss"}constructor(e,t){super(e,er.tagName,t)}}class eg extends Q{static{this.tagName="me:firstOrderRate"}constructor(e,t){super(e,er.tagName,t)}}class eh extends ee{static{this.tagName="me:rateList"}constructor(e,t,s){if(super(e,ec.tagName),this.index=new Map,this.folIndex=new Map,t){let e=0;t.forEach(t=>{this.index.set(er.tagName+e.toString(),this.nodes.size),this.folIndex.set(this.folIndex.size,this.nodes.size),this.addNode(t),e++}),this.fols=t}else this.fols=[];if(this.forIndex=new Map,s){let e=0;s.forEach(t=>{this.index.set(eg.tagName+e.toString(),this.nodes.size),this.forIndex.set(this.forIndex.size,this.nodes.size),this.addNode(t),e++}),this.fors=s}else this.fors=[]}addFirstOrderLoss(e){this.folIndex.set(this.folIndex.size,this.nodes.size),this.index.set(er.tagName+this.folIndex.size.toString(),this.nodes.size),this.fols.push(e),this.addNode(e)}addFirstOrderRate(e){this.forIndex.set(this.forIndex.size,this.nodes.size),this.index.set(eg.tagName+this.forIndex.size.toString(),this.nodes.size),this.fors.push(e),this.addNode(e)}}class ec extends ee{static{this.tagName="me:analysis"}constructor(e,t,s,n,a){super(e,ec.tagName),this.index=new Map,t&&(this.index.set(tB.tagName,this.nodes.size),this.addNode(t)),this.elIndex=new Map,s?(s.forEach(e=>{this.index.set(ea.tagName,this.nodes.size),this.elIndex.set(this.elIndex.size,this.nodes.size),this.addNode(e)}),this.els=s):this.els=[],this.plIndex=new Map,n?(n.forEach(e=>{this.index.set(el.tagName,this.nodes.size),this.plIndex.set(this.plIndex.size,this.nodes.size),this.addNode(e)}),this.pls=n):this.pls=[],this.rlIndex=new Map,a?(a.forEach(e=>{this.index.set(eh.tagName,this.nodes.size),this.rlIndex.set(this.rlIndex.size,this.nodes.size),this.addNode(e)}),this.rls=a):this.rls=[]}getDescription(){if(this.index.has(tB.tagName)){let e=this.index.get(tB.tagName);return this.nodes.get(e)}}setDescription(e){if(this.index.has(tB.tagName)){let t=this.index.get(tB.tagName);this.nodes.set(t,e)}else this.index.set(tB.tagName,this.nodes.size),this.addNode(e)}addEigenvalueList(e){this.elIndex.set(this.elIndex.size,this.nodes.size),this.addNode(e),this.els.push(e)}addPopulationList(e){this.plIndex.set(this.plIndex.size,this.nodes.size),this.addNode(e),this.pls.push(e)}addRateList(e){this.rlIndex.set(this.rlIndex.size,this.nodes.size),this.addNode(e),this.rls.push(e)}}class em extends Z{static{this.tagName="me:bathGas"}constructor(e,t){super(e,em.tagName,t)}}class eu extends Q{static{this.tagName="me:experimentalRate"}static{this.s_ref1="ref1"}static{this.s_ref2="ref2"}static{this.s_refReaction="refReaction"}static{this.s_error="error"}constructor(e,t){super(e,eu.tagName,t)}getRef1(){return this.attributes.get(eu.s_ref1)}setRef1(e){this.attributes.set(eu.s_ref1,e)}getRef2(){return this.attributes.get(eu.s_ref2)}setRef2(e){this.attributes.set(eu.s_ref2,e)}getRefReaction(){return this.attributes.get(eu.s_refReaction)}setRefReaction(e){this.attributes.set(eu.s_refReaction,e)}getError(){return new(f(p))(this.attributes.get(eu.s_error))}setError(e){this.attributes.set(eu.s_error,e.toString())}}class ef extends Q{static{this.tagName="me:experimentalYield"}static{this.s_ref="ref"}static{this.s_error="error"}static{this.s_yieldTime="yieldTime"}constructor(e,t){super(e,ef.tagName,t)}getRef(){return this.attributes.get(ef.s_ref)}setRef(e){this.attributes.set(ef.s_ref,e)}getError(){return new(f(p))(this.attributes.get(ef.s_error))}setError(e){this.attributes.set(ef.s_error,e.toString())}getYieldTime(){return new(f(p))(this.attributes.get(ef.s_yieldTime))}setYieldTime(e){this.attributes.set(ef.s_yieldTime,e.toString())}}class ep extends Q{static{this.tagName="me:experimentalEigenvalue"}static{this.s_EigenvalueID="EigenvalueID"}static{this.s_error="error"}constructor(e,t){super(e,ep.tagName,t)}getEigenvalueID(){return this.attributes.get(ep.s_EigenvalueID)}setEigenvalueID(e){this.attributes.set(ep.s_EigenvalueID,e)}getError(){return new(f(p))(this.attributes.get(ep.s_error))}setError(e){this.attributes.set(ep.s_error,e.toString())}}class eN extends Q{static{this.tagName="me:excessReactantConc"}static{this.s_percent="percent"}constructor(e,t){super(e,eN.tagName,t)}getPercent(){return this.attributes.get(eN.s_percent)}setPercent(e){this.attributes.set(eN.s_percent,e)}}class ex extends ee{static{this.tagName="me:PTpair"}static{this.s_P="P"}static{this.s_T="T"}static{this.s_precision="precision"}static{this.s_excessReactantConc="excessReactantConc"}static{this.s_percentExcessReactantConc="percentExcessReactantConc"}constructor(e,t,s,n,a){super(e,ex.tagName),this.index=new Map,void 0!=t&&(this.index.set(em.tagName,this.nodes.size),this.addNode(t)),void 0!=s&&(this.index.set(eu.tagName,this.nodes.size),this.addNode(s)),void 0!=n&&(this.index.set(ef.tagName,this.nodes.size),this.addNode(n)),void 0!=a&&(this.index.set(ep.tagName,this.nodes.size),this.addNode(a))}getP(){let e=this.attributes.get(ex.s_P);if(void 0!==e)return new(f(p))(e)}setP(e){this.attributes.set(ex.s_P,e.toString())}getT(){let e=this.attributes.get(ex.s_T);if(void 0!==e)return new(f(p))(e)}setT(e){this.attributes.set(ex.s_T,e.toString())}getPrecision(){return this.attributes.get(ex.s_precision)}setPrecision(e){this.attributes.set(ex.s_precision,e)}getBathGas(){let e=this.index.get(em.tagName);return void 0!=e?this.nodes.get(e):void 0}setBathGas(e){let t=this.index.get(em.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(em.tagName,this.nodes.size),this.addNode(e))}removeBathGas(){let e=this.index.get(em.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(em.tagName))}getExperimentalRate(){let e=this.index.get(eu.tagName);return void 0!=e?this.nodes.get(e):void 0}setExperimentalRate(e){let t=this.index.get(eu.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eu.tagName,this.nodes.size),this.addNode(e))}removeExperimentalRate(){let e=this.index.get(eu.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(eu.tagName))}getExperimentalYield(){let e=this.index.get(ef.tagName);return void 0!=e?this.nodes.get(e):void 0}setExperimentalYield(e){let t=this.index.get(ef.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(ef.tagName,this.nodes.size),this.addNode(e))}removeExperimentalYield(){let e=this.index.get(ef.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(ef.tagName))}getExperimentalEigenvalue(){let e=this.index.get(ep.tagName);return void 0!=e?this.nodes.get(e):void 0}setExperimentalEigenvalue(e){let t=this.index.get(ep.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(ep.tagName,this.nodes.size),this.addNode(e))}removeExperimentalEigenvalue(){let e=this.index.get(ep.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(ep.tagName))}getExcessReactantConc(){return this.attributes.get(ex.s_excessReactantConc)}setExcessReactantConc(e){this.attributes.set(ex.s_excessReactantConc,e)}getPercentExcessReactantConc(){return this.attributes.get(ex.s_percentExcessReactantConc)}setPercentExcessReactantConc(e){this.attributes.set(ex.s_percentExcessReactantConc,e)}}class ev extends ee{static{this.tagName="me:PTs"}constructor(e,t){super(e,ev.tagName),void 0!=t?(t.forEach(e=>{this.addNode(e)}),this.ptps=t):this.ptps=[]}get(e){return this.ptps[e]}set(e,t){this.nodes.set(e,t),this.ptps[e]=t}add(e){return this.addNode(e),this.ptps.push(e),this.nodes.size-1}remove(e){this.nodes.delete(e),this.ptps.splice(e,1)}init(e){this.clear(),e.forEach(e=>{this.addNode(e),this.ptps.push(e)})}clear(){this.nodes.clear(),this.ptps=[]}}class eE extends ee{static{this.tagName="me:conditions"}constructor(e,t,s,n){super(e,eE.tagName),this.id=t,this.index=new Map,this.bathGasesIndex=new Map,this.bathGases=new Map,void 0!=s&&(this.index.set(em.tagName,this.nodes.size),s.forEach(e=>{this.bathGasesIndex.set(e.value,this.nodes.size),this.addNode(e),this.bathGases.set(e,s.size)})),void 0!=n&&(this.index.set(ev.tagName,this.nodes.size),this.addNode(n))}getBathGases(){return this.bathGases}addBathGas(e){if(this.bathGases.has(e))return this.bathGases.get(e);{let t=this.bathGases.size;return this.bathGases.set(e,t),this.bathGasesIndex.set(e.value,this.nodes.size),this.addNode(e),t}}removeBathGas(e){this.bathGases.has(e)?(this.bathGases.delete(e),this.nodes.delete(this.bathGasesIndex.get(e.value))):console.warn("Conditions.removeBathGas: bathGas not found to remove.")}getPTs(){let e=this.index.get(ev.tagName);if(void 0!=e)return this.nodes.get(e)}setPTs(e){let t=this.index.get(ev.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(ev.tagName,this.nodes.size),this.addNode(e))}}class ey extends K{static{this.tagName="me:calculateRateCoefficientsOnly"}constructor(){super(ey.tagName)}}class ew extends K{static{this.tagName="me:printCellDOS"}constructor(){super(ew.tagName)}}class eR extends K{static{this.tagName="me:printCellTransitionStateFlux"}constructor(){super(eR.tagName)}}class eb extends K{static{this.tagName="me:printReactionOperatorColumnSums"}constructor(){super(eb.tagName)}}class eC extends K{static{this.tagName="me:printGrainBoltzmann"}constructor(){super(eC.tagName)}}class eS extends K{static{this.tagName="me:printGrainDOS"}constructor(){super(eS.tagName)}}class eM extends K{static{this.tagName="me:printGrainkbE"}constructor(){super(eM.tagName)}}class eT extends K{static{this.tagName="me:printGrainkfE"}constructor(){super(eT.tagName)}}class eI extends K{static{this.tagName="me:printTSsos"}constructor(){super(eI.tagName)}}class ez extends K{static{this.tagName="me:printGrainedSpeciesProfile"}constructor(){super(ez.tagName)}}class eD extends K{static{this.tagName="me:printGrainTransitionStateFlux"}constructor(){super(eD.tagName)}}class e_ extends K{static{this.tagName="me:printReactionOperatorSize"}constructor(){super(e_.tagName)}}class eP extends K{static{this.tagName="me:printSpeciesProfile"}constructor(){super(eP.tagName)}}class eL extends K{static{this.tagName="me:printPhenomenologicalEvolution"}constructor(){super(eL.tagName)}}class eB extends K{static{this.tagName="me:printTunnelingCoefficients"}constructor(){super(eB.tagName)}}class eA extends K{static{this.tagName="me:printCrossingCoefficients"}constructor(){super(eA.tagName)}}class ek extends K{static{this.tagName="me:testDOS"}constructor(){super(ek.tagName)}}class eG extends K{static{this.tagName="me:testRateConstant"}constructor(){super(eG.tagName)}}class eO extends K{static{this.tagName="me:useTheSameCellNumberForAllConditions"}constructor(){super(eO.tagName)}}class eU extends K{static{this.tagName="me:ForceMacroDetailedBalance"}constructor(){super(eU.tagName)}}class eq extends K{static{this.tagName="me:hideInactive"}constructor(){super(eq.tagName)}}class eV extends ee{static{this.tagName="me:calcMethod"}static{this.options=["simpleCalc","gridSearch","fitting","marquardt","analyticalRepresentation","ThermodynamicTable","sensitivityAnalysis","me:simpleCalc","me:gridSearch","me:fitting","me:marquardt","me:analyticalRepresentation","me:ThermodynamicTable","me:sensitivityAnalysis"]}constructor(e){super(e,eV.tagName)}}class eF extends eV{static{this.xsi_type="me:simpleCalc"}static{this.xsi_type2="simpleCalc"}constructor(e){super(e)}}class eH extends eV{static{this.xsi_type="me:gridSearch"}static{this.xsi_type2="gridSearch"}constructor(e){super(e)}}class ej extends Q{static{this.tagName="me:fittingIterations"}constructor(e,t){super(e,ej.tagName,t)}}class eX extends eV{static{this.xsi_type="me:fitting"}static{this.xsi_type2="fitting"}constructor(e,t){super(e),void 0!=t&&this.addNode(t)}getFittingIterations(){return this.nodes.get(0)}setFittingIterations(e){this.nodes.set(0,e)}removeFittingIterations(){this.nodes.delete(0)}}class eY extends Q{static{this.tagName="me:MarquardtIterations"}constructor(e,t){super(e,eY.tagName,t)}}class e$ extends Q{static{this.tagName="me:MarquardtTolerance"}constructor(e,t){super(e,e$.tagName,t)}}class eK extends Q{static{this.tagName="me:MarquardtDerivDelta"}constructor(e,t){super(e,eK.tagName,t)}}class eW extends eV{static{this.xsi_type="me:marquardt"}static{this.xsi_type2="marquardt"}static{this.MarquardtDerivDeltaDefault="1.e-03"}static{this.MarquardtTolerance="1.e-03"}static{this.MarquardtLambda="1.0"}static{this.MarquardtLambdaScale="10.0"}constructor(e,t,s,n){super(e),this.index=new Map,void 0!=t&&(this.index.set(eY.tagName,this.nodes.size),this.addNode(t)),void 0!=s&&(this.index.set(e$.tagName,this.nodes.size),this.addNode(s)),void 0!=n&&(this.index.set(eK.tagName,this.nodes.size),this.addNode(n))}getMarquardtIterations(){let e=this.index.get(eY.tagName);if(void 0!=e)return this.nodes.get(e)}setMarquardtIterations(e){let t=this.index.get(eY.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eY.tagName,this.nodes.size),this.addNode(e))}removeMarquardtIterations(){let e=this.index.get(eY.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(eY.tagName))}getMarquardtTolerance(){let e=this.index.get(e$.tagName);if(void 0!=e)return this.nodes.get(e)}setMarquardtTolerance(e){let t=this.index.get(e$.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(e$.tagName,this.nodes.size),this.addNode(e))}removeMarquardtTolerance(){let e=this.index.get(e$.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(e$.tagName))}getMarquardtDerivDelta(){let e=this.index.get(eK.tagName);if(void 0!=e)return this.nodes.get(e)}setMarquardtDerivDelta(e){let t=this.index.get(eK.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eK.tagName,this.nodes.size),this.addNode(e))}removeMarquardtDerivDelta(){let e=this.index.get(eK.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(eK.tagName))}}class eZ extends K{static{this.tagName="me:useTraceWeighting"}constructor(){super(eZ.tagName)}}class eQ extends Z{static{this.tagName="me:format"}static{this.options=["cantera","chemkin"]}static{this.rateUnits="rateUnits"}static{this.rateUnitsOptions=["cm3mole-1s-1","cm3molecule-1s-1"]}constructor(e,t){super(e,eQ.tagName,t)}getRateUnits(){return this.attributes.get(eQ.rateUnits)}setRateUnits(e){this.attributes.set(eQ.rateUnits,e)}removeRateUnits(){this.attributes.delete(eQ.rateUnits)}}class eJ extends Z{static{this.tagName="me:precision"}constructor(e,t){super(e,eJ.tagName,t)}}class e0 extends Q{static{this.tagName="me:chebNumTemp"}constructor(e,t){super(e,e0.tagName,t)}}class e1 extends Q{static{this.tagName="me:chebNumConc"}constructor(e,t){super(e,e1.tagName,t)}}class e2 extends Q{static{this.tagName="me:chebMaxTemp"}constructor(e,t){super(e,e2.tagName,t)}}class e3 extends Q{static{this.tagName="me:chebMinTemp"}constructor(e,t){super(e,e3.tagName,t)}}class e5 extends Q{static{this.tagName="me:chebMaxConc"}constructor(e,t){super(e,e5.tagName,t)}getUnits(){return this.attributes.get("units")}setUnits(e){this.attributes.set("units",e)}}class e4 extends Q{static{this.tagName="me:chebMinConc"}constructor(e,t){super(e,e4.tagName,t)}}class e6 extends Q{static{this.tagName="me:chebTExSize"}constructor(e,t){super(e,e6.tagName,t)}}class e8 extends Q{static{this.tagName="me:chebPExSize"}constructor(e,t){super(e,e8.tagName,t)}}class e9 extends eV{static{this.xsi_type="me:analyticalRepresentation"}static{this.xsi_type2="analyticalRepresentation"}constructor(e,t,s,n,a,d,o,l,r,g,h){super(e),this.index=new Map,void 0!=t&&(this.index.set(eQ.tagName,this.nodes.size),this.addNode(t)),void 0!=s&&(this.index.set(eJ.tagName,this.nodes.size),this.addNode(s)),void 0!=n&&(this.index.set(e0.tagName,this.nodes.size),this.addNode(n)),void 0!=a&&(this.index.set(e1.tagName,this.nodes.size),this.addNode(a)),void 0!=d&&(this.index.set(e2.tagName,this.nodes.size),this.addNode(d)),void 0!=o&&(this.index.set(e3.tagName,this.nodes.size),this.addNode(o)),void 0!=l&&(this.index.set(e5.tagName,this.nodes.size),this.addNode(l)),void 0!=r&&(this.index.set(e4.tagName,this.nodes.size),this.addNode(r)),void 0!=g&&(this.index.set(e6.tagName,this.nodes.size),this.addNode(g)),void 0!=h&&(this.index.set(e8.tagName,this.nodes.size),this.addNode(h))}getFormat(){let e=this.index.get(eQ.tagName);if(void 0!=e)return this.nodes.get(e)}setFormat(e){let t=this.index.get(eQ.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eQ.tagName,this.nodes.size),this.addNode(e))}removeFormat(){let e=this.index.get(eQ.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(eQ.tagName))}getPrecision(){let e=this.index.get(eJ.tagName);if(void 0!=e)return this.nodes.get(e)}setPrecision(e){let t=this.index.get(eJ.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eJ.tagName,this.nodes.size),this.addNode(e))}removePrecision(){let e=this.index.get(eJ.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(eJ.tagName))}getChebNumTemp(){let e=this.index.get(e0.tagName);if(void 0!=e)return this.nodes.get(e)}setChebNumTemp(e){let t=this.index.get(e0.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(e0.tagName,this.nodes.size),this.addNode(e))}removeChebNumTemp(){let e=this.index.get(e0.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(e0.tagName))}getChebNumConc(){let e=this.index.get(e1.tagName);if(void 0!=e)return this.nodes.get(e)}setChebNumConc(e){let t=this.index.get(e1.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(e1.tagName,this.nodes.size),this.addNode(e))}removeChebNumConc(){let e=this.index.get(e1.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(e1.tagName))}getChebMaxTemp(){let e=this.index.get(e2.tagName);if(void 0!=e)return this.nodes.get(e)}setChebMaxTemp(e){let t=this.index.get(e2.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(e2.tagName,this.nodes.size),this.addNode(e))}removeChebMaxTemp(){let e=this.index.get(e2.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(e2.tagName))}getChebMinTemp(){let e=this.index.get(e3.tagName);if(void 0!=e)return this.nodes.get(e)}setChebMinTemp(e){let t=this.index.get(e3.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(e3.tagName,this.nodes.size),this.addNode(e))}removeChebMinTemp(){let e=this.index.get(e3.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(e3.tagName))}getChebMaxConc(){let e=this.index.get(e5.tagName);if(void 0!=e)return this.nodes.get(e)}setChebMaxConc(e){let t=this.index.get(e5.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(e5.tagName,this.nodes.size),this.addNode(e))}removeChebMaxConc(){let e=this.index.get(e5.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(e5.tagName))}getChebMinConc(){let e=this.index.get(e4.tagName);if(void 0!=e)return this.nodes.get(e)}setChebMinConc(e){let t=this.index.get(e4.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(e4.tagName,this.nodes.size),this.addNode(e))}removeChebMinConc(){let e=this.index.get(e4.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(e4.tagName))}getChebTExSize(){let e=this.index.get(e6.tagName);if(void 0!=e)return this.nodes.get(e)}setChebTExSize(e){let t=this.index.get(e6.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(e6.tagName,this.nodes.size),this.addNode(e))}removeChebTExSize(){let e=this.index.get(e6.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(e6.tagName))}getChebPExSize(){let e=this.index.get(e8.tagName);if(void 0!=e)return this.nodes.get(e)}setChebPExSize(e){let t=this.index.get(e8.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(e8.tagName,this.nodes.size),this.addNode(e))}removeChebPExSize(){let e=this.index.get(e8.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(e8.tagName))}}class e7 extends Q{static{this.tagName="me:Tmin"}constructor(e,t){super(e,e7.tagName,t)}}class te extends Q{static{this.tagName="me:Tmid"}constructor(e,t){super(e,te.tagName,t)}}class tt extends Q{static{this.tagName="me:Tmax"}constructor(e,t){super(e,tt.tagName,t)}}class ts extends Q{static{this.tagName="me:Tstep"}constructor(e,t){super(e,ts.tagName,t)}}class ti extends eV{static{this.xsi_type="me:ThermodynamicTable"}static{this.xsi_type2="ThermodynamicTable"}constructor(e,t,s,n,a){super(e),this.index=new Map,void 0!=t&&(this.index.set(e7.tagName,this.nodes.size),this.addNode(t)),void 0!=s&&(this.index.set(te.tagName,this.nodes.size),this.addNode(s)),void 0!=n&&(this.index.set(tt.tagName,this.nodes.size),this.addNode(n)),void 0!=a&&(this.index.set(ts.tagName,this.nodes.size),this.addNode(a))}getTmin(){let e=this.index.get(e7.tagName);if(void 0!=e)return this.nodes.get(e)}setTmin(e){let t=this.index.get(e7.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(e7.tagName,this.nodes.size),this.addNode(e))}removeTmin(){let e=this.index.get(e7.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(e7.tagName))}getTmid(){let e=this.index.get(te.tagName);if(void 0!=e)return this.nodes.get(e)}setTmid(e){let t=this.index.get(te.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(te.tagName,this.nodes.size),this.addNode(e))}removeTmid(){let e=this.index.get(te.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(te.tagName))}getTmax(){let e=this.index.get(tt.tagName);if(void 0!=e)return this.nodes.get(e)}setTmax(e){let t=this.index.get(tt.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(tt.tagName,this.nodes.size),this.addNode(e))}removeTmax(){let e=this.index.get(tt.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(tt.tagName))}getTstep(){let e=this.index.get(ts.tagName);if(void 0!=e)return this.nodes.get(e)}setTstep(e){let t=this.index.get(ts.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(ts.tagName,this.nodes.size),this.addNode(e))}removeTstep(){let e=this.index.get(ts.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(ts.tagName))}}class tn extends Q{static{this.tagName="me:sensitivityAnalysisSamples"}constructor(e,t){super(e,tn.tagName,t)}}class ta extends Q{static{this.tagName="me:sensitivityAnalysisOrder"}constructor(e,t){super(e,ta.tagName,t)}}class td extends Q{static{this.tagName="me:sensitivityNumVarRedIters"}constructor(e,t){super(e,td.tagName,t)}}class to extends Z{static{this.tagName="me:sensitivityVarRedMethod"}static{this.options=["AdditiveControl","RatioControl"]}constructor(e,t){super(e,to.tagName,t)}}class tl extends eV{static{this.xsi_type="me:sensitivityAnalysis"}static{this.xsi_type2="sensitivityAnalysis"}constructor(e,t,s,n,a){super(e),this.index=new Map,void 0!=t&&(this.index.set(tn.tagName,this.nodes.size),this.addNode(t)),void 0!=s&&(this.index.set(ta.tagName,this.nodes.size),this.addNode(s)),void 0!=n&&(this.index.set(td.tagName,this.nodes.size),this.addNode(n)),void 0!=a&&(this.index.set(to.tagName,this.nodes.size),this.addNode(a))}getSensitivityAnalysisSamples(){let e=this.index.get(tn.tagName);if(void 0!=e)return this.nodes.get(e)}setSensitivityAnalysisSamples(e){let t=this.index.get(tn.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(tn.tagName,this.nodes.size),this.addNode(e))}removeSensitivityAnalysisSamples(){let e=this.index.get(tn.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(tn.tagName))}getSensitivityAnalysisOrder(){let e=this.index.get(ta.tagName);if(void 0!=e)return this.nodes.get(e)}setSensitivityAnalysisOrder(e){let t=this.index.get(ta.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(ta.tagName,this.nodes.size),this.addNode(e))}removeSensitivityAnalysisOrder(){let e=this.index.get(ta.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(ta.tagName))}getSensitivityNumVarRedIters(){let e=this.index.get(td.tagName);if(void 0!=e)return this.nodes.get(e)}setSensitivityNumVarRedIters(e){let t=this.index.get(td.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(td.tagName,this.nodes.size),this.addNode(e))}removeSensitivityNumVarRedIters(){let e=this.index.get(td.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(td.tagName))}getSensitivityVarRedMethod(){let e=this.index.get(to.tagName);if(void 0!=e)return this.nodes.get(e)}setSensitivityVarRedMethod(e){let t=this.index.get(to.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(to.tagName,this.nodes.size),this.addNode(e))}removeSensitivityVarRedMethod(){let e=this.index.get(to.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(to.tagName))}}class tr extends Q{static{this.tagName="me:eigenvalues"}constructor(e,t){super(e,tr.tagName,t)}}class tg extends Q{static{this.tagName="me:shortestTimeOfInterest"}constructor(e,t){super(e,tg.tagName,t)}}class th extends Q{static{this.tagName="me:MaximumEvolutionTime"}constructor(e,t){super(e,th.tagName,t)}}class tc extends Q{static{this.tagName="me:automaticallySetMaxEne"}constructor(e,t){super(e,tc.tagName,t)}}class tm extends Q{static{this.tagName="me:diagramEnergyOffset"}constructor(e,t){super(e,tm.tagName,t)}}class tu extends W{static{this.tagName="me:testMicroRates"}static{this.s_Tmin="Tmin"}static{this.s_Tmax="Tmax"}static{this.s_Tstep="Tstep"}constructor(e){super(e,tu.tagName),this.tMin=new(f(p))(e.get(tu.s_Tmin)),this.tMax=new(f(p))(e.get(tu.s_Tmax)),this.tStep=new(f(p))(e.get(tu.s_Tstep))}getTmin(){return this.tMin}setTmin(e){this.tMin=e,this.attributes?.set("Tmin",e.toString())}getTmax(){return this.tMax}setTmax(e){this.tMax=e,this.attributes?.set("Tmax",e.toString())}getTstep(){return this.tStep}setTstep(e){this.tStep=e,this.attributes?.set("Tstep",e.toString())}}class tf extends ee{static{this.tagName="me:control"}constructor(e,t){super(e,tf.tagName),this.id=t,this.index=new Map}getCalculateRateCoefficientsOnly(){let e=this.index.get(ey.tagName);if(void 0!=e)return this.nodes.get(e)}setCalculateRateCoefficientsOnly(e){let t=this.index.get(ey.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(ey.tagName,this.nodes.size),this.addNode(e))}removeCalculateRateCoefficientsOnly(){let e=this.index.get(ey.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(ey.tagName))}getPrintCellDOS(){let e=this.index.get(ew.tagName);if(void 0!=e)return this.nodes.get(e)}setPrintCellDOS(e){let t=this.index.get(ew.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(ew.tagName,this.nodes.size),this.addNode(e))}removePrintCellDOS(){let e=this.index.get(ew.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(ew.tagName))}getPrintCellTransitionStateFlux(){let e=this.index.get(eR.tagName);if(void 0!=e)return this.nodes.get(e)}setPrintCellTransitionStateFlux(e){let t=this.index.get(eR.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eR.tagName,this.nodes.size),this.addNode(e))}removePrintCellTransitionStateFlux(){let e=this.index.get(eR.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(eR.tagName))}getPrintReactionOperatorColumnSums(){let e=this.index.get(eb.tagName);if(void 0!=e)return this.nodes.get(e)}setPrintReactionOperatorColumnSums(e){let t=this.index.get(eb.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eb.tagName,this.nodes.size),this.addNode(e))}removePrintReactionOperatorColumnSums(){let e=this.index.get(eb.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(eb.tagName))}getPrintGrainBoltzmann(){let e=this.index.get(eC.tagName);if(void 0!=e)return this.nodes.get(e)}setPrintGrainBoltzmann(e){let t=this.index.get(eC.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eC.tagName,this.nodes.size),this.addNode(e))}removePrintGrainBoltzmann(){let e=this.index.get(eC.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(eC.tagName))}getPrintGrainDOS(){let e=this.index.get(eS.tagName);if(void 0!=e)return this.nodes.get(e)}setPrintGrainDOS(e){let t=this.index.get(eS.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eS.tagName,this.nodes.size),this.addNode(e))}removePrintGrainDOS(){let e=this.index.get(eS.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(eS.tagName))}getPrintGrainkbE(){let e=this.index.get(eM.tagName);if(void 0!=e)return this.nodes.get(e)}setPrintGrainkbE(e){let t=this.index.get(eM.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eM.tagName,this.nodes.size),this.addNode(e))}removePrintGrainkbE(){let e=this.index.get(eM.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(eM.tagName))}getPrintGrainkfE(){let e=this.index.get(eT.tagName);if(void 0!=e)return this.nodes.get(e)}setPrintGrainkfE(e){let t=this.index.get(eT.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eT.tagName,this.nodes.size),this.addNode(e))}removePrintGrainkfE(){let e=this.index.get(eT.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(eT.tagName))}getPrintTSsos(){let e=this.index.get(eI.tagName);if(void 0!=e)return this.nodes.get(e)}setPrintTSsos(e){let t=this.index.get(eI.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eI.tagName,this.nodes.size),this.addNode(e))}removePrintTSsos(){let e=this.index.get(eI.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(eI.tagName))}getPrintGrainedSpeciesProfile(){let e=this.index.get(ez.tagName);if(void 0!=e)return this.nodes.get(e)}setPrintGrainedSpeciesProfile(e){let t=this.index.get(ez.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(ez.tagName,this.nodes.size),this.addNode(e))}removePrintGrainedSpeciesProfile(){let e=this.index.get(ez.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(ez.tagName))}getPrintGrainTransitionStateFlux(){let e=this.index.get(eD.tagName);if(void 0!=e)return this.nodes.get(e)}setPrintGrainTransitionStateFlux(e){let t=this.index.get(eD.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eD.tagName,this.nodes.size),this.addNode(e))}removePrintGrainTransitionStateFlux(){let e=this.index.get(eD.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(eD.tagName))}getPrintReactionOperatorSize(){let e=this.index.get(e_.tagName);if(void 0!=e)return this.nodes.get(e)}setPrintReactionOperatorSize(e){let t=this.index.get(e_.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(e_.tagName,this.nodes.size),this.addNode(e))}removePrintReactionOperatorSize(){let e=this.index.get(e_.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(e_.tagName))}getPrintSpeciesProfile(){let e=this.index.get(eP.tagName);if(void 0!=e)return this.nodes.get(e)}setPrintSpeciesProfile(e){let t=this.index.get(eP.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eP.tagName,this.nodes.size),this.addNode(e))}removePrintSpeciesProfile(){let e=this.index.get(eP.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(eP.tagName))}getPrintPhenomenologicalEvolution(){let e=this.index.get(eL.tagName);if(void 0!=e)return this.nodes.get(e)}setPrintPhenomenologicalEvolution(e){let t=this.index.get(eL.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eL.tagName,this.nodes.size),this.addNode(e))}removePrintPhenomenologicalEvolution(){let e=this.index.get(eL.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(eL.tagName))}getPrintTunnelingCoefficients(){let e=this.index.get(eB.tagName);if(void 0!=e)return this.nodes.get(e)}setPrintTunnelingCoefficients(e){let t=this.index.get(eB.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eB.tagName,this.nodes.size),this.addNode(e))}removePrintTunnelingCoefficients(){let e=this.index.get(eB.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(eB.tagName))}getPrintCrossingCoefficients(){let e=this.index.get(eA.tagName);if(void 0!=e)return this.nodes.get(e)}setPrintCrossingCoefficients(e){let t=this.index.get(eA.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eA.tagName,this.nodes.size),this.addNode(e))}removePrintCrossingCoefficients(){let e=this.index.get(eA.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(eA.tagName))}getTestDOS(){let e=this.index.get(ek.tagName);if(void 0!=e)return this.nodes.get(e)}setTestDOS(e){let t=this.index.get(ek.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(ek.tagName,this.nodes.size),this.addNode(e))}removeTestDOS(){let e=this.index.get(ek.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(ek.tagName))}getTestRateConstants(){let e=this.index.get(eG.tagName);if(void 0!=e)return this.nodes.get(e)}setTestRateConstants(e){let t=this.index.get(eG.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eG.tagName,this.nodes.size),this.addNode(e))}removeTestRateConstants(){let e=this.index.get(eG.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(eG.tagName))}getUseTheSameCellNumberForAllConditions(){let e=this.index.get(eO.tagName);if(void 0!=e)return this.nodes.get(e)}setUseTheSameCellNumberForAllConditions(e){let t=this.index.get(eO.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eO.tagName,this.nodes.size),this.addNode(e))}removeUseTheSameCellNumberForAllConditions(){let e=this.index.get(eO.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(eO.tagName))}getHideInactive(){let e=this.index.get(eq.tagName);if(void 0!=e)return this.nodes.get(e)}setHideInactive(e){let t=this.index.get(eq.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eq.tagName,this.nodes.size),this.addNode(e))}removeHideInactive(){let e=this.index.get(eq.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(eq.tagName))}getForceMacroDetailedBalance(){let e=this.index.get(eU.tagName);if(void 0!=e)return this.nodes.get(e)}setForceMacroDetailedBalance(e){let t=this.index.get(eU.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eU.tagName,this.nodes.size),this.addNode(e))}removeForceMacroDetailedBalance(){let e=this.index.get(eU.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(eU.tagName))}getCalcMethod(){let e=this.index.get(eV.tagName);if(void 0!=e)return this.nodes.get(e)}setCalcMethod(e){let t=this.index.get(eV.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eV.tagName,this.nodes.size),this.addNode(e))}removeCalcMethod(){let e=this.index.get(eV.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(eV.tagName))}getEigenvalues(){let e=this.index.get(tr.tagName);if(void 0!=e)return this.nodes.get(e)}setEigenvalues(e){let t=this.index.get(tr.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(tr.tagName,this.nodes.size),this.addNode(e))}removeEigenvalues(){let e=this.index.get(tr.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(tr.tagName))}getShortestTimeOfInterest(){let e=this.index.get(tg.tagName);if(void 0!=e)return this.nodes.get(e)}setShortestTimeOfInterest(e){let t=this.index.get(tg.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(tg.tagName,this.nodes.size),this.addNode(e))}removeShortestTimeOfInterest(){let e=this.index.get(tg.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(tg.tagName))}getMaximumEvolutionTime(){let e=this.index.get(th.tagName);if(void 0!=e)return this.nodes.get(e)}setMaximumEvolutionTime(e){let t=this.index.get(th.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(th.tagName,this.nodes.size),this.addNode(e))}removeMaximumEvolutionTime(){let e=this.index.get(th.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(th.tagName))}getAutomaticallySetMaxEne(){let e=this.index.get(tc.tagName);if(void 0!=e)return this.nodes.get(e)}setAutomaticallySetMaxEne(e){let t=this.index.get(tc.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(tc.tagName,this.nodes.size),this.addNode(e))}removeAutomaticallySetMaxEne(){let e=this.index.get(tc.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(tc.tagName))}getDiagramEnergyOffset(){let e=this.index.get(tm.tagName);if(void 0!=e)return this.nodes.get(e)}setDiagramEnergyOffset(e){let t=this.index.get(tm.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(tm.tagName,this.nodes.size),this.addNode(e))}removeDiagramEnergyOffset(){let e=this.index.get(tm.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(tm.tagName))}getTestMicroRates(){let e=this.index.get(tu.tagName);if(void 0!=e)return this.nodes.get(e)}setTestMicroRates(e){let t=this.index.get(tu.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(tu.tagName,this.nodes.size),this.addNode(e))}removeTestMicroRates(){let e=this.index.get(tu.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(tu.tagName))}}class tp extends ee{static{this.tagName="metadata"}constructor(e){super(e,tp.tagName)}getLabelText(){let e="";return this.attributes.forEach((t,s)=>{e+=s+": "+t+" "}),e}}class tN extends Z{static{this.tagName="dc:title"}constructor(e,t){super(e,tN.tagName,t)}}class tx extends Z{static{this.tagName="dc:source"}constructor(e,t){super(e,tx.tagName,t)}}class tv extends Z{static{this.tagName="dc:creator"}constructor(e,t){super(e,tv.tagName,t)}}class tE extends Z{static{this.tagName="dc:date"}constructor(e,t){super(e,tE.tagName,t)}}class ty extends Z{static{this.tagName="dc:contributor"}constructor(e,t){super(e,ty.tagName,t)}}class tw extends ee{static{this.tagName="metadataList"}constructor(e,t,s,n,a,d){super(e,tw.tagName),this.index=new Map,this.metadataIndex=new Map,t&&(this.index.set(tN.tagName,this.nodes.size),this.addNode(t)),s&&(this.index.set(tx.tagName,this.nodes.size),this.addNode(s)),n&&(this.index.set(tv.tagName,this.nodes.size),this.addNode(n)),a&&(this.index.set(tE.tagName,this.nodes.size),this.addNode(a)),d&&(this.index.set(ty.tagName,this.nodes.size),this.addNode(d))}getTitle(){if(this.index.has(tN.tagName)){let e=this.index.get(tN.tagName);return this.nodes.get(e)}}setTitle(e){if(this.index.has(tN.tagName)){let t=this.index.get(tN.tagName);this.nodes.set(t,e)}else this.index.set(tN.tagName,this.nodes.size),this.addNode(e)}getSource(){if(this.index.has(tx.tagName)){let e=this.index.get(tx.tagName);return this.nodes.get(e)}}setSource(e){if(this.index.has(tx.tagName)){let t=this.index.get(tx.tagName);this.nodes.set(t,e)}else this.index.set(tx.tagName,this.nodes.size),this.addNode(e)}getCreator(){if(this.index.has(tv.tagName)){let e=this.index.get(tv.tagName);return this.nodes.get(e)}}setCreator(e){if(this.index.has(tv.tagName)){let t=this.index.get(tv.tagName);this.nodes.set(t,e)}else this.index.set(tv.tagName,this.nodes.size),this.addNode(e)}getDate(){if(this.index.has(tE.tagName)){let e=this.index.get(tE.tagName);return this.nodes.get(e)}}setDate(e){if(this.index.has(tE.tagName)){let t=this.index.get(tE.tagName);this.nodes.set(t,e)}else this.index.set(tE.tagName,this.nodes.size),this.addNode(e)}getContributor(){if(this.index.has(ty.tagName)){let e=this.index.get(ty.tagName);return this.nodes.get(e)}}setContributor(e){if(this.index.has(ty.tagName)){let t=this.index.get(ty.tagName);this.nodes.set(t,e)}else this.index.set(ty.tagName,this.nodes.size),this.addNode(e)}addMetadata(e){this.metadataIndex.set(this.metadataIndex.size,this.nodes.size),this.addNode(e)}getMetadata(){let e=[];for(let t=0;t<this.metadataIndex.size;t++){let s=this.metadataIndex.get(t);e.push(this.nodes.get(s))}return e}}class tR extends Q{static{this.tagName="me:grainSize"}constructor(e,t){super(e,tR.tagName,t)}}class tb extends Q{static{this.tagName="me:automaticallySetMaxEne"}constructor(e,t){super(e,tb.tagName,t)}}class tC extends Q{static{this.tagName="me:energyAboveTheTopHill"}constructor(e,t){super(e,tC.tagName,t)}}class tS extends Q{static{this.tagName="me:maxTemperature"}constructor(e,t){super(e,tS.tagName,t)}}class tM extends ee{static{this.tagName="me:modelParameters"}constructor(e,t,s,n,a,d){super(e,tM.tagName),this.id=t,this.index=new Map,void 0!=s&&(this.index.set(tR.tagName,this.nodes.size),this.addNode(s)),void 0!=n&&(this.index.set(tb.tagName,this.nodes.size),this.addNode(n)),void 0!=a&&(this.index.set(tC.tagName,this.nodes.size),this.addNode(a)),void 0!=d&&(this.index.set(tS.tagName,this.nodes.size),this.addNode(d))}getGrainSize(){console.log("getGrainSize");let e=this.index.get(tR.tagName);if(void 0!=e)return this.nodes.get(e);console.log("XgetGrainSize")}setGrainSize(e){console.log("setGrainSize");let t=this.index.get(tR.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(tR.tagName,this.nodes.size),this.addNode(e))}removeGrainSize(){let e=this.index.get(tR.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(tR.tagName))}getAutomaticallySetMaxEne(){let e=this.index.get(tb.tagName);if(e)return this.nodes.get(e)}setAutomaticallySetMaxEne(e){let t=this.index.get(tb.tagName);t?this.nodes.set(t,e):(this.index.set(tb.tagName,this.nodes.size),this.addNode(e))}removeAutomaticallySetMaxEne(){let e=this.index.get(tb.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(tb.tagName))}getEnergyAboveTheTopHill(){let e=this.index.get(tC.tagName);if(e)return this.nodes.get(e)}setEnergyAboveTheTopHill(e){let t=this.index.get(tC.tagName);t?this.nodes.set(t,e):(this.index.set(tC.tagName,this.nodes.size),this.addNode(e))}removeEnergyAboveTheTopHill(){let e=this.index.get(tC.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(tC.tagName))}getMaxTemperature(){let e=this.index.get(tS.tagName);if(e)return this.nodes.get(e)}setMaxTemperature(e){let t=this.index.get(tS.tagName);t?this.nodes.set(t,e):(this.index.set(tS.tagName,this.nodes.size),this.addNode(e))}removeMaxTemperature(){let e=this.index.get(tS.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(tS.tagName))}}class tT extends Z{static{this.tagName="me:title"}constructor(e,t){super(e,tT.tagName,t)}}class tI extends ee{static{this.tagName="moleculeList"}constructor(e,t){super(e,tI.tagName),this.index=new Map,void 0!=t&&t.forEach(e=>{this.nodes.set(this.nodes.size,e),this.index.set(e.getID(),this.nodes.size-1)})}getMolecule(e){let t=this.index.get(e);if(void 0!=t)return this.nodes.get(t)}removeMolecule(e){let t=this.index.get(e);void 0!=t&&(this.nodes.delete(t),this.index.delete(e))}addMolecule(e){let t=e.getID(),s=this.index.get(t);void 0!==s?(this.nodes.set(s,e),console.log("Replaced molecule with id "+t)):(this.nodes.set(this.nodes.size,e),this.index.set(t,this.nodes.size-1))}}class tz extends ee{static{this.tagName="reactionList"}constructor(e,t){super(e,tz.tagName),this.index=new Map,void 0!=t&&t.forEach(e=>{this.nodes.set(this.nodes.size,e),this.index.set(e.id,this.nodes.size-1)})}getReaction(e){let t=this.index.get(e);if(void 0!=t)return this.nodes.get(t)}removeReaction(e){let t=this.index.get(e);void 0!=t&&(this.nodes.delete(t),this.index.delete(e))}addReaction(e){let t=this.index.get(e.id);void 0!==t?(this.nodes.set(t,e),console.log("Replaced reaction with id "+e.id)):(this.nodes.set(this.nodes.size,e),this.index.set(e.id,this.nodes.size-1))}getNextReactionID(){let e=1;return Array.from(this.index.keys()).sort((e,t)=>{let s=e.match(/\d+/),n=t.match(/\d+/);return(s?parseInt(s[0]):0)-(n?parseInt(n[0]):0)}).forEach(t=>{if(parseInt(t.match(/\d+/)[0])>e)return e;e++}),e}}class tD extends ee{static{this.tagName="conditionsList"}constructor(e,t){super(e,tP.tagName),this.index=new Map,void 0!=t&&t.forEach(e=>{this.nodes.set(this.nodes.size,e),this.index.set(e.id,this.nodes.size-1)})}getConditions(e){let t=this.index.get(e);if(void 0!=t)return this.nodes.get(t)}removeConditions(e){let t=this.index.get(e);void 0!=t&&(this.nodes.delete(t),this.index.delete(e))}addConditions(e){let t=this.index.get(e.id);void 0!=t?(this.nodes.set(t,e),console.log("Replaced conditions with id "+e.id)):(this.nodes.set(this.nodes.size,e),this.index.set(e.id,this.nodes.size-1))}}class t_ extends ee{static{this.tagName="modelParametersList"}constructor(e,t){super(e,t_.tagName),this.index=new Map,void 0!=t&&t.forEach(e=>{this.nodes.set(this.nodes.size,e),this.index.set(e.id,this.nodes.size-1)})}getModelParameters(e){let t=this.index.get(e);if(void 0!=t)return this.nodes.get(t)}removeModelParameters(e){let t=this.index.get(e);void 0!=t&&(this.nodes.delete(t),this.index.delete(e))}addModelParameters(e){let t=this.index.get(e.id);void 0!=t?(this.nodes.set(t,e),console.log("Replaced modelParameters with id "+e.id)):(this.nodes.set(this.nodes.size,e),this.index.set(e.id,this.nodes.size-1))}}class tP extends ee{static{this.tagName="controlList"}constructor(e,t){super(e,tP.tagName),this.index=new Map,void 0!=t&&t.forEach(e=>{this.nodes.set(this.nodes.size,e),this.index.set(e.id,this.nodes.size-1)})}getControl(e){let t=this.index.get(e);if(void 0!=t)return this.nodes.get(t)}removeControl(e){let t=this.index.get(e);void 0!=t&&(this.nodes.delete(t),this.index.delete(e))}addControl(e){let t=this.index.get(e.id);void 0!==t?(this.nodes.set(t,e),console.log("Replaced control with id "+e.id)):(this.nodes.set(this.nodes.size,e),this.index.set(e.id,this.nodes.size-1))}}class tL extends ee{static{this.tagName="me:mesmer"}static{this.precisionOptions=["d","dd","qd","double","double-double","quad-double"]}static{this.pressureUnits=["Torr","PPCC","atm","mbar","psi","mols/cc"]}static{this.energyUnits=["kJ/mol","kJ per mol","cm-1","wavenumber","kcal/mol","kcal per mol","Hartree","au"]}static{this.frequencyUnits=["cm-1","GHz","amuA^2"]}static{this.massUnits=["amu","g/mol","kg/mol"]}static{this.temperatureUnits=["K"]}static{this.timeUnits=["fs","ps","ns","s"]}static{this.lengthUnits=["Å","nm","um","mm","cm","m"]}static{this.hessianUnits=["kJ/mol/Å2","kcal/mol/Å2","Hartree/Å2"]}static{this.EinsteinAUnits=["s-1"]}static{this.EinsteinBUnits=["m3/J/s2"]}static{this.elementTypes=["H","He","Li","Be","B","C","N","O","F","Ne","Na","Mg","Al","Si","P","S","Cl","Ar","K","Ca","Sc","Ti","V","Cr","Mn","Fe","Co","Ni","Cu","Zn","Ga","Ge","As","Se","Br","Kr","Rb","Sr","Y","Zr","Nb","Mo","Tc","Ru","Rh","Pd","Ag","Cd","In","Sn","Sb","Te","I","Xe","Cs","Ba","La","Ce","Pr","Nd","Pm","Sm","Eu","Gd","Tb","Dy","Ho","Er","Tm","Yb","Lu","Hf","Ta","W","Re","Os","Ir","Pt","Au","Hg","Tl","Pb","Bi","Po","At","Rn","Fr","Ra","Ac","Th","Pa","U","Np","Pu","Am","Cm","Bk","Cf","Es","Fm","Md","No","Lr","Rf","Db","Sg","Bh","Hs","Mt","Ds","Rg","Cn","Nh","Fl","Mc","Lv","Ts","Og"]}static{this.atomMasses=new Map}static{this.atomRadii=new Map}static{this.atomColors=new Map}static{this.bondColors=new Map}static{this.header=`<?xml version="1.0" encoding="utf-8" ?>
<?xml-stylesheet type='text/xsl' href='../../mesmer2.xsl' media='other'?>
<?xml-stylesheet type='text/xsl' href='../../mesmer1.xsl' media='screen'?>`}constructor(e,t,s,n,a,d,o,l,r){super(e,tL.tagName);let g=["H","O","C","N","Cl","S","Ph","Fe"],h=["White","Red","DarkGrey","Blue","Green","Yellow","Orange","Brown"];for(let e=0;e<g.length;e++)tL.atomColors.set(g[e],h[e]);let c=[1.00784,15.999,12.011,14.007,35.453,32.06,77.845,55.845];for(let e=0;e<g.length;e++)tL.atomMasses.set(g[e],c[e]);let m=[37,66,67,56,99,102,110,124];for(let e=0;e<g.length;e++)tL.atomRadii.set(g[e],m[e]);let u=[1,1.5,2,2.5,3,3.5,4,4.5,5,5.5,6];h=["Black","Red","DarkRed","Blue","DarkBlue","Green","DarkGreen","Yellow","DarkYellow","Orange","DarkOrange"];for(let e=0;e<u.length;e++)tL.bondColors.set(u[e],h[e]);this.index=new Map,void 0!=t&&(this.index.set(tT.tagName,this.nodes.size),this.addNode(t)),void 0!=s&&(this.index.set(tI.tagName,this.nodes.size),this.addNode(s)),void 0!=n&&(this.index.set(tz.tagName,this.nodes.size),this.addNode(n)),this.conditionsIndex=new Map,void 0!=a&&a.forEach(e=>{this.index.set(eE.tagName+e.id,this.nodes.size),this.conditionsIndex.set(e.id,this.nodes.size),this.addNode(e)}),this.modelParametersIndex=new Map,void 0!=d&&d.forEach(e=>{this.index.set(tM.tagName+e.id,this.nodes.size),this.modelParametersIndex.set(e.id,this.nodes.size),this.addNode(e)}),this.controlIndex=new Map,void 0!=o&&o.forEach(e=>{this.index.set(tf.tagName+e.id,this.nodes.size),this.controlIndex.set(e.id,this.nodes.size),this.addNode(e)}),void 0!=l&&(this.index.set(tw.tagName,this.nodes.size),this.addNode(l)),void 0!=r&&(this.index.set(ec.tagName,this.nodes.size),this.addNode(r))}getTitle(){let e=this.index.get(tT.tagName);if(void 0!=e)return this.nodes.get(e)}setTitle(e){let t=this.index.get(tT.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(tT.tagName,this.nodes.size),this.addNode(e))}getMoleculeList(){let e=this.index.get(tI.tagName);if(void 0!=e)return this.nodes.get(e);{let e=new tI(new Map);return this.index.set(tI.tagName,this.nodes.size),this.addNode(e),e}}setMoleculeList(e){let t=this.index.get(tI.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(tI.tagName,this.nodes.size),this.addNode(e))}getReactionList(){let e=this.index.get(tz.tagName);if(void 0!=e)return this.nodes.get(e);{let e=new tz(new Map);return this.index.set(tz.tagName,this.nodes.size),this.addNode(e),e}}setReactionList(e){let t=this.index.get(tz.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(tz.tagName,this.nodes.size),this.addNode(e))}addConditions(e){let t=eE.tagName+e.id,s=this.index.get(t);void 0!=s?this.nodes.set(s,e):(this.index.set(t,this.nodes.size),this.conditionsIndex.set(e.id,this.nodes.size),this.addNode(e))}getConditions(e){let t=this.conditionsIndex.get(e);if(void 0!=t)return this.nodes.get(t)}getConditionss(){let e=[];return this.conditionsIndex.forEach((t,s)=>{e.push(this.nodes.get(t))}),e}setConditionss(e){e.forEach(e=>{this.addConditions(e)})}getNextConditionsID(){let e=0;return Array.from(this.conditionsIndex.keys()).sort((e,t)=>e-t).forEach(t=>{if(t>e)return e;e++}),e}removeConditions(e){let t=this.conditionsIndex.get(e);void 0!=t&&(this.nodes.delete(t),this.index.delete(eE.tagName+e),this.conditionsIndex.delete(e))}addModelParameters(e){let t=tM.tagName+e.id,s=this.index.get(t);void 0!=s?this.nodes.set(s,e):(this.index.set(t,this.nodes.size),this.modelParametersIndex.set(e.id,this.nodes.size),this.addNode(e))}getModelParameters(e){let t=this.modelParametersIndex.get(e);if(void 0!=t)return this.nodes.get(t)}getModelParameterss(){let e=[];return this.modelParametersIndex.forEach((t,s)=>{e.push(this.nodes.get(t))}),e}setModelParameterss(e){e.forEach(e=>{this.addModelParameters(e)})}getNextModelParametersID(){let e=0;return Array.from(this.modelParametersIndex.keys()).sort((e,t)=>e-t).forEach(t=>{if(t>e)return e;e++}),e}removeModelParameters(e){let t=this.modelParametersIndex.get(e);void 0!=t&&(this.nodes.delete(t),this.index.delete(tM.tagName+e),this.modelParametersIndex.delete(e))}addControl(e){let t=tf.tagName+e.id,s=this.index.get(t);void 0!=s?this.nodes.set(s,e):(this.index.set(t,this.nodes.size),this.controlIndex.set(e.id,this.nodes.size),this.addNode(e))}getControl(e){let t=this.controlIndex.get(e);if(void 0!=t)return this.nodes.get(t)}getControls(){let e=[];return this.controlIndex.forEach((t,s)=>{e.push(this.nodes.get(t))}),e}setControls(e){e.forEach(e=>{this.addControl(e)})}getNextControlID(){let e=0;return Array.from(this.controlIndex.keys()).sort((e,t)=>e-t).forEach(t=>{if(t>e)return e;e++}),e}removeControl(e){let t=this.controlIndex.get(e);void 0!=t&&(this.nodes.delete(t),this.index.delete(tf.tagName+e),this.controlIndex.delete(e))}getMetadataList(){let e=this.index.get(tw.tagName);if(void 0!=e)return this.nodes.get(e)}setMetadataList(e){let t=this.index.get(tw.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(tw.tagName,this.nodes.size),this.addNode(e))}getAnalysis(){let e=this.index.get(ec.tagName);if(void 0!=e)return this.nodes.get(e)}setAnalysis(e){let t=this.index.get(ec.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(ec.tagName,this.nodes.size),this.addNode(e))}}class tB extends Z{static{this.tagName="me:description"}constructor(e,t){super(e,tB.tagName,t)}}class tA extends Q{static{this.tagName="me:T"}constructor(e,t){super(e,tA.tagName,t)}}class tk extends Q{static{this.s_units="units"}static{this.s_lower="lower"}static{this.s_upper="upper"}static{this.s_stepsize="stepsize"}constructor(e,t,s){super(e,t,s)}setValue(e){this.value=e}getUnits(){return this.attributes.get(tk.s_units)}setUnits(e){this.attributes.set(tk.s_units,e)}removeUnits(){this.attributes.delete(tk.s_units)}getLower(){let e=this.attributes.get(tk.s_lower);if(void 0!=e)return new p.Big(e)}setLower(e){this.attributes.set(tk.s_lower,e.toString())}removeLower(){this.attributes.delete(tk.s_lower)}getUpper(){let e=this.attributes.get(tk.s_upper);if(void 0!=e)return new p.Big(e)}setUpper(e){this.attributes.set(tk.s_upper,e.toString())}removeUpper(){this.attributes.delete(tk.s_upper)}getStepsize(){let e=this.attributes.get(tk.s_stepsize);if(void 0!=e)return new p.Big(e)}setStepsize(e){this.attributes.set(tk.s_stepsize,e.toString())}removeStepsize(){this.attributes.delete(tk.s_stepsize)}}class tG extends W{static{this.tagName="atom"}static{this.s_id="id"}static{this.s_elementType="elementType"}static{this.s_x3="x3"}static{this.s_y3="y3"}static{this.s_z3="z3"}constructor(e,t){super(e,tG.tagName),this.molecule=t}hasCoordinates(){return void 0!=this.attributes.get(tG.s_x3)&&void 0!=this.attributes.get(tG.s_y3)&&void 0!=this.attributes.get(tG.s_z3)}getID(){return this.attributes.get(tG.s_id)}setID(e){this.attributes.set(tG.s_id,e)}getElementType(){return this.attributes.get(tG.s_elementType)}setElementType(e){this.attributes.set(tG.s_elementType,e)}getX3(){let e=this.attributes.get(tG.s_x3);if(void 0!=e)return new p.Big(e)}setX3(e){this.attributes.set(tG.s_x3,e.toString())}removeX3(){this.attributes.delete(tG.s_x3)}getY3(){let e=this.attributes.get(tG.s_y3);if(void 0!=e)return new p.Big(e)}setY3(e){this.attributes.set(tG.s_y3,e.toString())}removeY3(){this.attributes.delete(tG.s_y3)}getZ3(){let e=this.attributes.get(tG.s_z3);if(void 0!=e)return new p.Big(e)}setZ3(e){this.attributes.set("z3",e.toString())}removeZ3(){this.attributes.delete("z3")}}class tO extends ee{static{this.tagName="atomArray"}constructor(e,t){super(e,tO.tagName),this.index=new Map,this.reverseIndex=new Map,void 0==t?this.atoms=new Map:(this.atoms=t,t.forEach((e,t)=>{this.index.set(t,this.nodes.size),this.reverseIndex.set(this.nodes.size,t),this.nodes.set(this.nodes.size,e)}))}getAtom(e){return this.atoms.get(e)}addAtom(e,t){if(void 0==t){let s=e.getID();if(void 0==s)s=this.getNextAtomID(),e.setID(s);else if(this.atoms.has(s)){let t=this.getNextAtomID();console.warn("Atom with id "+s+" already exists, adding with id "+t),e.setID(t),s=t}t=s}else if(this.atoms.has(t)){console.warn("Atom with id "+t+" will be replaced");let s=this.index.get(t);return this.nodes.set(s,e),this.atoms.set(t,e),t}return this.index.set(t,this.nodes.size),this.reverseIndex.set(this.nodes.size,t),this.nodes.set(this.nodes.size,e),this.atoms.set(t,e),t}getNextAtomID(){let e=1,t="a1";if(this.atoms.has(t))for(;this.atoms.has(t);)e++,t="a"+e.toString();return t}removeAtom(e){let t=this.index.get(e);if(void 0==t)throw Error("Atom with id "+e+" does not exist!");console.log("Removing atom with id "+e),this.atoms.delete(e),this.deleteNodeAndReindex(t,e)}deleteNodeAndReindex(e,t){this.nodes.delete(e),this.index.delete(t),this.reverseIndex.delete(e);let s=new Map,n=new Map,a=new Map;this.index.forEach((t,d)=>{t>e?(s.set(t-1,this.nodes.get(t)),n.set(d,t-1),a.set(t-1,d)):(s.set(t,this.nodes.get(t)),n.set(d,t),a.set(t,d))}),this.nodes=s,this.index=n,this.reverseIndex=a}}class tU extends W{static{this.tagName="bond"}static{this.s_atomRefs2="atomRefs2"}static{this.s_id="id"}static{this.s_order="order"}static{this.orderOptions=["1","1.5","2","2.5","3","3.5","4","4.5","5","5.5","6"]}constructor(e,t){super(e,tU.tagName),this.molecule=t}getAtomRefs2(){let e=this.attributes.get(tU.s_atomRefs2);return(e?.split(" "),void 0==e)?"a1 a1":e}setAtomRefs2(e){this.attributes.set(tU.s_atomRefs2,e)}getID(){return this.attributes.get(tU.s_id)}setID(e){this.attributes.set(tU.s_id,e)}getOrder(){let e=this.attributes.get(tU.s_order);if(void 0!=e)return parseFloat(e)}setOrder(e){this.attributes.set(tU.s_order,e.toString())}}class tq extends ee{static{this.tagName="bondArray"}constructor(e,t){super(e,tq.tagName),this.index=new Map,this.reverseIndex=new Map,void 0==t?this.bonds=new Map:(this.bonds=t,t.forEach((e,t)=>{this.index.set(t,this.nodes.size),this.reverseIndex.set(this.nodes.size,t),this.nodes.set(this.nodes.size,e)}))}getBondIds(){return Array.from(this.bonds.keys())}getBond(e){return this.bonds.get(e)}addBond(e,t){if(void 0==t){let s=e.getID();if(void 0==s)s=this.getNextBondID(),e.setID(s);else if(this.bonds.has(s)){let t=this.getNextBondID();console.log("Bond with id "+s+" already exists, adding with id "+t),e.setID(t),s=t}t=s}else if(this.bonds.has(t)){console.log("Bond with id "+t+" will be replaced");let s=this.index.get(t);return this.nodes.set(s,e),this.bonds.set(t,e),t}return this.index.set(t,this.nodes.size),this.reverseIndex.set(this.nodes.size,t),this.nodes.set(this.nodes.size,e),this.bonds.set(t,e),t}getNextBondID(){let e=1,t="b1";for(;this.bonds.has(t);)e++,t="b"+e.toString();return t}removeBond(e){let t=this.index.get(e);if(void 0==t)throw Error("Bond with id "+e+" does not exist!");console.log("Removing bond with id "+e),this.bonds.delete(e),this.deleteNodeAndReindex(t,e)}deleteNodeAndReindex(e,t){this.nodes.delete(e),this.index.delete(t),this.reverseIndex.delete(e);let s=new Map,n=new Map,a=new Map;this.index.forEach((t,d)=>{t>e?(s.set(t-1,this.nodes.get(t)),n.set(d,t-1),a.set(t-1,d)):(s.set(t,this.nodes.get(t)),n.set(d,t),a.set(t,d))}),this.nodes=s,this.index=n,this.reverseIndex=a}}class tV extends Z{static{this.tagName="scalar"}constructor(e,t){super(e,tV.tagName,t)}getValue(){return this.value}setValue(e){this.value=e}}class tF extends Q{static{this.tagName="scalar"}static{this.s_units="units"}static{this.propertyDictRefs=new Set(["me:ZPE","me:Hf0","me:HfAT0","me:Hf298","me:symmetryNumber","me:TSOpticalSymmetryNumber","me:frequenciesScaleFactor","me:MW","me:spinMultiplicity","me:epsilon","me:sigma"])}constructor(e,t){super(e,tF.tagName,t)}updateUnits(e){if(e){let t=this.attributes.get(tF.s_units);void 0!=t&&t!=e&&this.attributes.set(tF.s_units,e)}}getValue(){return this.value}setValue(e){this.value=e}}class tH extends J{static{this.tagName="array"}static{this.s_units="units"}static{this.propertyDictRefs=new Set(["me:rotConsts","me:vibFreqs","me:EinsteinAij","me:EinsteinBij"])}constructor(e,t,s){super(e,tH.tagName,t,s)}updateUnits(e){if(e){let t=this.attributes.get(tH.s_units);void 0!=t&&t!=e&&(this.attributes.set(tH.s_units,e),console.log("Units changed from "+t+" to "+e))}}setSize(e){let t=[];for(let s=0;s<e;s++)t.push(new p.Big(0));this.setValues(t)}}class tj extends J{static{this.tagName="matrix"}static{this.s_rows="rows"}static{this.s_matrixType="matrixType"}static{this.s_units="units"}static{this.propertyDictRefs=new Set(["me:hessian"])}constructor(e,t,s){super(e,tH.tagName,t,s)}updateUnits(e){if(e){let t=this.attributes.get(tH.s_units);void 0!=t&&t!=e&&(this.attributes.set(tH.s_units,e),console.log("Units changed from "+t+" to "+e))}}setSize(e,t){let s=[];for(let n=0;n<e;n++)for(let e=0;e<t;e++)s.push(new p.Big(0));this.setValues(s)}}class tX extends ee{static{this.tagName="property"}static{this.s_dictRef="dictRef"}constructor(e,t){super(e,tX.tagName);let s=e.get(tX.s_dictRef);if(void 0==s){let t=e.get("title");if(void 0==t)throw Error(tX.s_dictRef+" and title are undefined!");if("MW"==t)s="me:MW";else if("Hf298"==t)s="me:Hf298";else if("Hf0"==t)s="me:Hf0";else if("program"==t)s="program";else if("basis"==t)s="basis";else if("method"==t)s="method";else if("File Format"==t)s="File Format";else throw Error("Title "+t+"not recognised!")}this.dictRef=s,t&&this.nodes.set(0,t)}getProperty(){return this.nodes.get(0)}setProperty(e){this.nodes.set(0,e)}}class tY extends tX{static{this.dictRef="me:ZPE"}constructor(e,t){super(e,t)}setUnits(e){this.getProperty().updateUnits(e)}}class t$ extends tX{static{this.dictRef="me:Hf0"}constructor(e,t){super(e,t)}setUnits(e){this.getProperty().updateUnits(e)}}class tK extends tX{static{this.dictRef="me:HfAT0"}constructor(e,t){super(e,t)}setUnits(e){this.getProperty().updateUnits(e)}}class tW extends tX{static{this.dictRef="me:Hf298"}constructor(e,t){super(e,t)}setUnits(e){this.getProperty().updateUnits(e)}}class tZ extends tX{static{this.dictRef="me:rotConsts"}static{this.unitOptions=["cm-1","GHz","amuA^2"]}constructor(e,t){super(e,t)}}class tQ extends tX{static{this.dictRef="me:symmetryNumber"}constructor(e,t){super(e,t)}}class tJ extends tX{static{this.dictRef="me:TSOpticalSymmetryNumber"}constructor(e,t){super(e,t)}}class t0 extends tX{static{this.dictRef="me:frequenciesScaleFactor"}constructor(e,t){super(e,t)}}class t1 extends tX{static{this.dictRef="me:vibFreqs"}constructor(e,t){super(e,t)}}class t2 extends tX{static{this.dictRef="me:MW"}constructor(e,t){super(e,t)}}class t3 extends tX{static{this.dictRef="me:spinMultiplicity"}constructor(e,t){super(e,t)}}class t5 extends tX{static{this.dictRef="me:epsilon"}constructor(e,t){super(e,t)}}class t4 extends tX{static{this.dictRef="me:sigma"}constructor(e,t){super(e,t)}}class t6 extends tX{static{this.dictRef="me:hessian"}static{this.unitOptions=["kJ/mol/Å2","kcal/mol/Å2","Hartree/Å2"]}constructor(e,t){super(e,t)}}class t8 extends tX{static{this.dictRef="me:EinsteinAij"}constructor(e,t){super(e,t)}}class t9 extends tX{static{this.dictRef="me:EinsteinBij"}constructor(e,t){super(e,t)}}class t7 extends tX{static{this.dictRef="me:electronicExcitation"}constructor(e,t){super(e,t)}}class se extends tX{static{this.dictRef="me:imFreqs"}constructor(e,t){super(e,t)}}class st extends ee{static{this.tagName="propertyList"}constructor(e,t){super(e,st.tagName),this.index=new Map,void 0!=t&&t.forEach(e=>{this.nodes.set(this.nodes.size,e),this.index.set(e.dictRef,this.nodes.size-1)})}getProperties(){let e=new Map;return this.nodes.forEach(t=>{e.set(t.dictRef,t)}),e}getProperty(e){let t=this.index.get(e);return void 0!=t?this.nodes.get(t):void 0}setProperty(e){let t=this.index.get(e.dictRef);void 0==t?(console.log("Property "+e.dictRef+" does not exist, adding..."),this.nodes.set(this.nodes.size,e),this.index.set(e.dictRef,this.nodes.size-1)):(console.log("Property "+e.dictRef+" already exists, updating..."),this.nodes.set(t,e))}removeProperty(e){let t=this.index.get(e);if(void 0!=t){this.nodes.delete(t),this.index.delete(e);let s=new Map;this.index.forEach((e,n)=>{e>t?s.set(n,e-1):s.set(n,e)}),this.index=s}}}class ss extends tk{static{this.tagName="me:deltaEDown"}static{this.s_bathGas="bathGas"}constructor(e,t){super(e,ss.tagName,t)}getBathGas(){return this.attributes.get(ss.s_bathGas)}setBathGas(e){this.attributes.set(ss.s_bathGas,e)}}class si extends ss{static{this.tagName="me:deltaEDown2"}constructor(e,t){super(e,t)}}class sn extends tk{static{this.tagName="me:deltaEDownTExponent"}static{this.s_referenceTemperature="referenceTemperature"}constructor(e,t){super(e,sn.tagName,t)}getReferenceTemperature(){return parseFloat(N(this.attributes,sn.s_referenceTemperature))}setReferenceTemperature(e){this.attributes.set(sn.s_referenceTemperature,e.toString())}}class sa extends tk{static{this.tagName="me:deltaEDownLinEne"}constructor(e,t){super(e,sa.tagName,t)}}class sd extends ee{static{this.tagName="me:energyTransferModel"}constructor(e,t){super(e,sd.tagName),void 0!=t&&t.forEach(e=>{this.nodes.set(this.nodes.size,e)})}getDeltaEDowns(){let e=[];return this.nodes.forEach(t=>{t instanceof ss&&e.push(t)}),e}setDeltaEDowns(e){this.nodes.clear(),e.forEach(e=>{this.nodes.set(this.nodes.size,e)})}getDeltaEDown(e){if(e<0||e>=this.nodes.size)throw Error("index out of range");return this.nodes.get(e)}setDeltaEDown(e,t){this.nodes.set(e,t)}addDeltaEDown(e){return this.nodes.set(this.nodes.size,e),this.nodes.size-1}removeDeltaEDown(e){this.nodes.delete(e)}}class so extends W{static{this.tagName="me:DOSCMethod"}static{this.xsi_typeOptions=["ClassicalRotors","QMRotors","DefinedStatesRotors","me:ClassicalRotors","me:QMRotors","me:DefinedStatesRotors"]}static{this.s_xsi_type="xsi:type"}constructor(e){if(super(e,so.tagName),void 0==e.get(so.s_xsi_type)){let t=e.get("name");if(void 0==t)throw Error("Neither xsi:type or name are defined.");e.set(so.s_xsi_type,t)}}getXsiType(){return this.attributes.get(so.s_xsi_type)}setXsiType(e){this.attributes.set(so.s_xsi_type,e)}}class sl extends Z{static{this.tagName="me:bondRef"}constructor(e,t){super(e,sl.tagName,t)}}class sr extends W{static{this.tagName="me:PotentialPoint"}static{this.s_angle="angle"}static{this.s_potential="potential"}constructor(e){super(e,sr.tagName)}getAngle(){return this.attributes.get(sr.s_angle)}setAngle(e){this.attributes.set(sr.s_angle,e.toString())}getPotential(){return this.attributes.get(sr.s_potential)}setPotential(e){this.attributes.set(sr.s_potential,e.toString())}}class sg extends W{static{this.tagName="me:DistributionCalcMethod"}static{this.s_default="default"}static{this.s_name="name"}constructor(e){super(e,sg.tagName)}getDefault(){return this.attributes.get(sg.s_default)}getName(){return this.attributes.get(sg.s_name)}}class sh extends W{static{this.tagName="me:thermoValue"}static{this.s_T="T"}static{this.s_H="H"}static{this.s_S="S"}static{this.s_G="G"}static{this.s_Cp="Cp"}constructor(e){super(e,tG.tagName)}getT(){return new p.Big(this.attributes.get(sh.s_T))}getH(){return new p.Big(this.attributes.get(sh.s_H))}getS(){return new p.Big(this.attributes.get(sh.s_S))}getG(){return new p.Big(this.attributes.get(sh.s_G))}getCp(){return new p.Big(this.attributes.get(sh.s_Cp))}toStringArray(){return[this.getT().toString(),this.getH().toString(),this.getS().toString(),this.getG().toString(),this.getCp().toString()]}toCSV(){return this.toStringArray().join(",")}}class sc extends ee{static{this.tagName="me:thermoTable"}static{this.s_unitsT="unitsT"}static{this.s_unitsH="unitsH"}static{this.s_unitsS="unitsS"}static{this.s_unitsG="unitsG"}static{this.s_unitsCp="unitsCp"}constructor(e,t){super(e,sc.tagName),void 0!=t?(t.forEach(e=>{this.addNode(e)}),this.tvs=t):this.tvs=[]}get(e){return this.tvs[e]}set(e,t){this.nodes.set(e,t),this.tvs[e]=t}add(e){return this.addNode(e),this.tvs.push(e),this.nodes.size-1}remove(e){this.nodes.delete(e),this.tvs.splice(e,1)}init(e){this.clear(),e.forEach(e=>{this.addNode(e),this.tvs.push(e)})}clear(){this.nodes.clear(),this.tvs=[]}getHeader(){return["T ("+this.attributes.get(sc.s_unitsT)+")","H(T)-H(0) ("+this.attributes.get(sc.s_unitsH)+")","S(T) ("+this.attributes.get(sc.s_unitsS)+")","G(T) ("+this.attributes.get(sc.s_unitsG)+")","Cp(T) ("+this.attributes.get(sc.s_unitsCp)+")"]}toCSV(){let e=this.getHeader().join(",")+"\n";return this.tvs.forEach(t=>{e+=t.toCSV()+"\n"}),e}}class sm extends ee{static{this.tagName="me:HinderedRotorPotential"}static{this.formats=new Set(["numerical","analytical"])}static{this.s_format="format"}static{this.s_units="units"}static{this.s_expansionSize="expansionSize"}static{this.s_useSineTerms="useSineTerms"}constructor(e,t){super(e,sm.tagName);let s=e.get(sm.s_format);if(void 0==s)throw Error(sm.s_format+" is undefined!");this.format=s;let n=e.get(sm.s_units);if(void 0==n)throw Error(sm.s_units+" is undefined!");this.units=n,void 0!=t&&t.forEach(e=>{this.nodes.set(this.nodes.size,e)}),void 0==e.get(sm.s_useSineTerms)?this.useSineTerms=!1:this.useSineTerms=!0}getFormat(){return this.format}setFormat(e){this.format=e,this.attributes.set(sm.s_format,e)}getUnits(){return this.units}setUnits(e){this.units=e,this.attributes.set(sm.s_units,e)}getExpansionSize(){return this.attributes.get(sm.s_expansionSize)}setExpansionSize(e){console.log(e.toString()),this.attributes.set(sm.s_expansionSize,e.toString())}getUseSineTerms(){return this.useSineTerms}setUseSineTerms(e){this.useSineTerms=e,this.attributes.set(sm.s_useSineTerms,e?"yes":"no")}getPotentialPoint(e){return this.nodes.get(e)}setPotentialPoint(e,t){this.nodes.set(e,t)}setPotentialPoints(e){this.nodes.clear(),e.forEach(e=>{this.nodes.set(this.nodes.size,e)})}addPotentialPoint(e){return this.nodes.set(this.nodes.size,e),this.nodes.size-1}removePotentialPoint(e){this.nodes.delete(e)}}class su extends Q{static{this.tagName="me:periodicity"}constructor(e,t){super(e,su.tagName,t)}}class sf extends ee{static{this.tagName="me:ExtraDOSCMethod"}constructor(e,t,s,n){super(e,sf.tagName),this.index=new Map,t&&(this.nodes.set(this.nodes.size,t),this.index.set(sl.tagName,this.nodes.size-1)),s&&(this.nodes.set(this.nodes.size,s),this.index.set(sm.tagName,this.nodes.size-1)),n&&(this.nodes.set(this.nodes.size,n),this.index.set(su.tagName,this.nodes.size-1))}getBondRef(){let e=this.index.get(sl.tagName);if(void 0!=e)return this.nodes.get(e)}setBondRef(e){let t=this.index.get(sl.tagName);void 0!=t?this.nodes.set(t,e):(this.nodes.set(this.nodes.size,e),this.index.set(sl.tagName,this.nodes.size-1))}getHinderedRotorPotential(){let e=this.index.get(sm.tagName);if(void 0!=e)return this.nodes.get(e)}setHinderedRotorPotential(e){let t=this.index.get(sm.tagName);void 0!=t?this.nodes.set(t,e):(this.nodes.set(this.nodes.size,e),this.index.set(sm.tagName,this.nodes.size-1))}getPeriodicity(){let e=this.index.get(su.tagName);if(void 0!=e)return this.nodes.get(e)}setPeriodicity(e){let t=this.index.get(su.tagName);void 0!=t?this.nodes.set(t,e):(this.nodes.set(this.nodes.size,e),this.index.set(su.tagName,this.nodes.size-1))}}class sp extends Q{static{this.tagName="me:reservoirSize"}constructor(e,t){super(e,sp.tagName,t)}}class sN extends Q{static{this.tagName="me:qtot"}constructor(e,t){super(e,sN.tagName,t)}}class sx extends Q{static{this.tagName="me:sumc"}constructor(e,t){super(e,sx.tagName,t)}}class sv extends Q{static{this.tagName="me:sumg"}constructor(e,t){super(e,sv.tagName,t)}}class sE extends ee{static{this.tagName="me:densityOfStates"}static{this.header=[tA.tagName,sN.tagName,sx.tagName,sv.tagName]}constructor(e){super(e,sE.tagName),this.index=new Map}getT(){let e=this.index.get(tA.tagName);if(void 0!=e)return this.nodes.get(e)}setT(e){let t=this.index.get(e.tagName);void 0!=t?this.nodes.set(t,e):(this.nodes.set(this.nodes.size,e),this.index.set(e.tagName,this.nodes.size-1))}getQtot(){let e=this.index.get(sN.tagName);if(void 0!=e)return this.nodes.get(e)}setQtot(e){let t=this.index.get(e.tagName);void 0!=t?this.nodes.set(t,e):(this.nodes.set(this.nodes.size,e),this.index.set(e.tagName,this.nodes.size-1))}getSumc(){let e=this.index.get(sx.tagName);if(void 0!=e)return this.nodes.get(e)}setSumc(e){let t=this.index.get(e.tagName);void 0!=t?this.nodes.set(t,e):(this.nodes.set(this.nodes.size,e),this.index.set(e.tagName,this.nodes.size-1))}getSumg(){let e=this.index.get(sv.tagName);if(void 0!=e)return this.nodes.get(e)}setSumg(e){let t=this.index.get(e.tagName);void 0!=t?this.nodes.set(t,e):(this.nodes.set(this.nodes.size,e),this.index.set(e.tagName,this.nodes.size-1))}toStringArray(){return[this.getT().value.toString(),this.getQtot().value.toString(),this.getSumc().value.toString(),this.getSumg().value.toString()]}}class sy extends ee{static{this.tagName="me:densityOfStatesList"}constructor(e,t,s){if(super(e,sy.tagName),this.index=new Map,this.dosIndex=new Map,t&&(this.nodes.set(this.nodes.size,t),this.index.set(tB.tagName,this.nodes.size-1)),s){let e=0;s.forEach(t=>{this.dosIndex.set(e,this.nodes.size),this.nodes.set(this.nodes.size,t),e++})}}getDescription(){let e=this.index.get(tB.tagName);if(void 0!=e)return this.nodes.get(e)}setDescription(e){let t=this.index.get(tB.tagName);void 0!=t?this.nodes.set(t,e):(this.nodes.set(this.nodes.size,e),this.index.set(tB.tagName,this.nodes.size-1))}getDensityOfStates(e){let t=this.dosIndex.get(e);if(void 0!=t)return this.nodes.get(t)}setDensityOfStates(e,t){let s=this.dosIndex.get(e);void 0!=s?this.nodes.set(s,t):(this.nodes.set(this.nodes.size,t),this.dosIndex.set(e,this.nodes.size-1))}addDensityOfStates(e){this.nodes.set(this.nodes.size,e);let t=this.nodes.size-1;return this.dosIndex.set(t,this.nodes.size-1),t}removeDensityOfStates(e){let t=this.dosIndex.get(e);void 0!=t&&this.nodes.delete(t)}toCSV(){let e="",t=sE.header;return e+=t.join(",")+"\n",this.nodes.forEach(t=>{e+=t.toStringArray().join(",")+"\n"}),e}}class sw extends ee{static{this.tagName="me:States"}constructor(e,t){if(super(e,sw.tagName),this.index=new Map,t){let e=0;t.forEach(t=>{this.nodes.set(this.nodes.size,t),this.index.set(t.id,e),e++})}}getStates(){let e=[];return this.nodes.forEach(t=>{e.push(t)}),e}getState(e){return this.nodes.get(this.index.get(e))}setState(e,t){this.nodes.set(this.index.get(t.id),t)}addState(e){let t;return this.index.has(e.id)?t=this.index.get(e.id):(t=this.nodes.size,this.index.set(e.id,t)),this.nodes.set(t,e),this.nodes.size-1}removeState(e){console.log("Removing state with id "+e);let t=this.index.get(e);console.log("Removing state at index "+t),this.nodes.delete(t)}}class sR extends W{static{this.tagName="me:State"}static{this.s_energy="energy"}static{this.s_degeneracy="degeneracy"}constructor(e,t){super(e,sR.tagName),this.id=t}getEnergy(){return new p.Big(this.attributes.get(sR.s_energy))}setEnergy(e){this.attributes.set(sR.s_energy,e.toString())}removeEnergy(){this.attributes.delete(sR.s_energy)}getDegeneracy(){return new p.Big(this.attributes.get(sR.s_degeneracy))}setDegeneracy(e){this.attributes.set(sR.s_degeneracy,e.toString())}removeDegeneracy(){this.attributes.delete(sR.s_degeneracy)}}class sb extends ee{static{this.tagName="molecule"}static{this.s_id="id"}static{this.s_description="description"}static{this.s_active="active"}constructor(e,t,s,n,a,d,o,l,r,g,h,c,m){super(e,sb.tagName),this.index=new Map,this.edmindex=new Map,this.id=t;let u=0;s&&(this.nodes.set(u,s),this.index.set(tw.tagName,u),u++),n&&(this.nodes.set(u,n),this.index.set(tO.tagName,u),u++),a&&(this.nodes.set(u,a),this.index.set(tq.tagName,u),u++),d&&(this.nodes.set(u,d),this.index.set(st.tagName,u),u++),o&&(this.nodes.set(u,o),this.index.set(sd.tagName,u),u++),l&&(this.nodes.set(u,l),this.index.set(so.tagName,u),u++),r&&(this.nodes.set(u,r),this.index.set(sg.tagName,u),u++),g&&g.forEach(e=>{this.nodes.set(u,e),this.edmindex.set(u,u),u++}),h&&(this.nodes.set(u,h),this.index.set(sp.tagName,u),u++),c&&(this.nodes.set(u,c),this.index.set(sc.tagName,u)),m&&(this.nodes.set(u,m),this.index.set(sw.tagName,u))}getLabel(){return this.getID()}getID(){return this.attributes.get(sb.s_id)}setID(e){this.attributes.set(sb.s_id,e)}getDescription(){let e=this.attributes.get(sb.s_description);return void 0!=e?e:this.getID()}setDescription(e){this.attributes.set(sb.s_description,e)}getActive(){let e=this.attributes.get(sb.s_active);if(void 0!=e)return"true"==e}setActive(e){this.attributes.set(sb.s_active,e.toString())}getMetadataList(){let e=this.index.get(tw.tagName);if(void 0!=e)return this.nodes.get(e)}setMetadataList(e){let t=this.index.get(tw.tagName);void 0==t?(this.index.set(tw.tagName,this.nodes.size),this.addNode(e)):this.nodes.set(t,e)}getPropertyList(){let e=this.index.get(st.tagName);if(void 0!=e)return this.nodes.get(e)}setPropertyList(e){let t=this.index.get(st.tagName);void 0==t?(this.index.set(st.tagName,this.nodes.size),this.addNode(e)):this.nodes.set(t,e)}getProperty(e){let t=this.getPropertyList();if(void 0!=t)return t.getProperty(e)}getAtom(e){return this.getAtoms().getAtom(e)}getAtoms(){let e=this.index.get(tO.tagName);return this.nodes.get(e)}setAtoms(e){this.index.set(tO.tagName,this.nodes.size),this.nodes.set(this.nodes.size,e)}getBond(e){return this.getBonds().getBond(e)}getBonds(){let e=this.index.get(tq.tagName);return this.nodes.get(e)}setBonds(e){this.index.set(tq.tagName,this.nodes.size),this.nodes.set(this.nodes.size,e)}getEnergyTransferModel(){let e=this.index.get(sd.tagName);if(void 0!=e)return this.nodes.get(e)}setEnergyTransferModel(e){let t=this.index.get(sd.tagName);void 0==t?(this.index.set(sd.tagName,this.nodes.size),this.addNode(e)):this.nodes.set(t,e)}getDOSCMethod(){let e=this.index.get(so.tagName);if(void 0!=e)return this.nodes.get(e)}setDOSCMethod(e){let t=this.index.get(so.tagName);void 0==t?(this.index.set(so.tagName,this.nodes.size),this.addNode(e)):this.nodes.set(t,e)}getDistributionCalcMethod(){let e=this.index.get(sg.tagName);if(void 0!=e)return this.nodes.get(e)}setDistributionCalcMethod(e){let t=this.index.get(sg.tagName);void 0==t?(this.index.set(sg.tagName,this.nodes.size),this.addNode(e)):this.nodes.set(t,e)}getExtraDOSCMethod(e){let t=this.edmindex.get(e);if(void 0!=t)return this.nodes.get(t)}setExtraDOSCMethod(e,t){let s=this.edmindex.get(e);void 0==s?(this.edmindex.set(e,this.nodes.size),this.nodes.set(this.nodes.size,t)):this.nodes.set(s,t)}getReservoirSize(){let e=this.index.get(sp.tagName);if(void 0!=e)return this.nodes.get(e)}setReservoirSize(e){let t=this.index.get(sp.tagName);void 0==t?(this.index.set(sp.tagName,this.nodes.size),this.addNode(e)):this.nodes.set(t,e)}getDensityOfStatesList(){let e=this.index.get(sy.tagName);if(void 0!=e)return this.nodes.get(e)}setDensityOfStatesList(e){let t=this.index.get(sy.tagName);void 0==t?(this.index.set(sy.tagName,this.nodes.size),this.addNode(e)):this.nodes.set(t,e)}getThermoTable(){let e=this.index.get(sc.tagName);if(void 0!=e)return this.nodes.get(e)}setThermoTable(e){let t=this.index.get(sc.tagName);void 0==t?(this.index.set(sc.tagName,this.nodes.size),this.addNode(e)):this.nodes.set(t,e)}getStates(){let e=this.index.get(sw.tagName);if(void 0!=e)return this.nodes.get(e)}setStates(e){let t=this.index.get(sw.tagName);void 0==t?(this.index.set(sw.tagName,this.nodes.size),this.addNode(e)):this.nodes.set(t,e)}getEnergy(){let e;return void 0==(e=this.getProperty(tY.dictRef))&&void 0==(e=this.getProperty(t$.dictRef))&&void 0==(e=this.getProperty(tK.dictRef))&&void 0==(e=this.getProperty(tW.dictRef))?(0,p.Big)(0):e.getProperty().value}}function sC(e,t,s){let n=O(nf,void 0,ng);return e.appendChild(n),n.addEventListener("click",()=>{var a;let d=sP(!0,void 0,void 0,s);if(void 0==d)return;console.log("mid="+d);let o=new sb(new Map,d);o.setID(d),s.set(d,o),o.setAtoms(new tO(new Map)),o.setBonds(new tq(new Map));let l=t.addID(sb.tagName,d),r=U(l),g=T(t.addID(l,nx),e,n,r,d,nh,ng);n7(em.tagName,d),sL(o,s,g.querySelector(S),t,r,ng),r.appendChild(sB(t.addID(l,nv),t,o.getDescription.bind(o),o.setDescription.bind(o),nh,ng));let h=t.addID(l,tO.tagName),c=U(h);T(t.addID(h,nx),r,null,c,tO.tagName,nh,ng),c.appendChild(sk(t,o,c,tG.tagName,nh,ng));let m=t.addID(l,tq.tagName),u=U(m);T(t.addID(m,nx),r,null,u,tq.tagName,nh,ng),u.appendChild(sU(t,o,u,tU.tagName,nh,ng)),sX(t,o,r,nh,ng);let N=t.addID(l,st.tagName),v=U(N);T(t.addID(N,nx),r,null,v,st.tagName,nh,ng);let E=o.getPropertyList();void 0==E&&(console.log("PropertyList is undefined for molecule "+o.getLabel()),E=new st(new Map),o.setPropertyList(E)),console.log("pl.index.size"+E.index.size),sS(!0,o,t,v,a=E,tY.dictRef,tL.energyUnits),sS(!0,o,t,v,a,t$.dictRef,tL.energyUnits),sS(!0,o,t,v,a,tK.dictRef,tL.energyUnits),sS(!0,o,t,v,a,tW.dictRef,tL.energyUnits),sT(!0,!1,o,t,v,a,tZ.dictRef,tL.frequencyUnits),sS(!0,o,t,v,a,tQ.dictRef,void 0),sS(!0,o,t,v,a,tJ.dictRef,void 0),sS(!0,o,t,v,a,t0.dictRef,void 0),sT(!0,!1,o,t,v,a,t1.dictRef,tL.frequencyUnits),sS(!0,o,t,v,a,t2.dictRef,tL.massUnits),sS(!0,o,t,v,a,t3.dictRef,void 0),sS(!0,o,t,v,a,t5.dictRef,tL.temperatureUnits),sS(!0,o,t,v,a,t4.dictRef,tL.lengthUnits),sD(!0,!1,o,t,v,a,t6.dictRef,tL.hessianUnits),sT(!0,!1,o,t,v,a,t8.dictRef,tL.EinsteinAUnits),sT(!0,!1,o,t,v,a,t9.dictRef,tL.EinsteinBUnits),sS(!0,o,t,v,a,t7.dictRef,tL.frequencyUnits);let y=t.addID(l,sd.tagName),R=U(y);T(t.addID(y,nx),r,null,R,sd.tagName,nh,ng);let b=o.getEnergyTransferModel();void 0==b&&(b=new sd(new Map),o.setEnergyTransferModel(b)),console.log("etm.index.size"+b.nodes.size);let C=O(nf,x(y,ss.tagName,nf,S),ng);R.appendChild(C),C.addEventListener("click",()=>{let e=nK,s=new ss(new Map,e),n=b.addDeltaEDown(s),a=t.addID(y,ss.tagName,b.nodes.size),d=q(a);R.insertBefore(d,C);let o=z(ss.tagName,a,nh,ng,t=>{let n=t.target;w(n.value)?(e=new(f(p))(n.value),s.setValue(e)):(alert("Input is not a number, resetting..."),n.value=s.value.toString()??nz),L(n)},s.value.toString(),ss.tagName);d.appendChild(o),ai(d,nh,()=>{b.removeDeltaEDown(n),R.removeChild(d)})}),ai(r,ng,()=>{sF(e,g,t,s,l,o)})}),n}function sS(e,t,s,n,a,d,o){let l,r,g,h,c;return(l=new Map).set(tX.s_dictRef,d),r=new Map,void 0!=o&&r.set(tF.s_units,o[0]),h=new tX(l,g=new tF(r,nK)),t.getPropertyList().setProperty(h),console.log("pl.index.size"+a.index.size),aa(o,r,c=at(n.id,s,d,g.getValue.bind(g),e=>sM(d,a,g,e),()=>a.removeProperty(h.dictRef),nh,ng),c.querySelector(nE),nA(n.id,d,tF.s_units),d,nh,nh),n.appendChild(c),e&&(c.querySelector(S).click(),a.removeProperty(d)),c}function sM(e,t,s,n){if(void 0==t.getProperty(e)){let n,a;(n=new Map).set(tX.s_dictRef,e),a=new tX(n,s),t.setProperty(a),console.log("Set property "+e)}else console.log("Property "+e+" already exists.");s.setValue.bind(s)(n),(e==tY.dictRef||e==t$.dictRef||e==tK.dictRef||e==tW.dictRef)&&n8()}function sT(e,t,s,n,a,d,o,l){let r,g,h,c,m;(r=new Map).set(tX.s_dictRef,o),g=new Map,void 0!=l&&g.set(tF.s_units,l[0]);let u=[];t&&sI(o,u),c=new tX(r,h=new tH(g,u)),s.getPropertyList().setProperty(c),console.log("pl.index.size"+d.index.size),aa(l,g,m=sY(a,n,o,h,h.getValues.bind(h),e=>sz(o,d,h,e),()=>d.removeProperty(c.dictRef),nh,ng),m.querySelector(nE),nA(a.id,o,tF.s_units),o,nh,nh),a.appendChild(m),e&&(m.querySelector(S).click(),d.removeProperty(o))}function sI(e,t){let s=function(e){let t=0,s=!1;for(;!s;){let n=prompt(e,"0");null!=n&&w(n)&&(t=parseInt(n))>0&&(s=!0)}return t}("Please enter the number of elements in the "+e+" array");for(let e=0;e<s;e++)t.push(nK)}function sz(e,t,s,n){if(void 0==t.getProperty(e)){let n,a;(n=new Map).set(tX.s_dictRef,e),a=new tX(n,s),t.setProperty(a),console.log("Set property "+e)}else console.log("Property "+e+" already exists.");console.log("Value "+s.getValues()),s.setValues.bind(s)(n),console.log("Value "+s.getValues())}function sD(e,t,s,n,a,d,o,l){let r,g,h,c,m;(r=new Map).set(tX.s_dictRef,o),g=new Map,void 0!=l&&g.set(tF.s_units,l[0]);let u=[];t&&sI(o,u),c=new tX(r,h=new tj(g,u)),s.getPropertyList().setProperty(c),console.log("pl.index.size"+d.index.size),aa(l,g,m=sY(a,n,o,h,h.getValues.bind(h),e=>sz(o,d,h,e),()=>d.removeProperty(c.dictRef),nh,ng),m.querySelector(nE),nA(a.id,o,tF.s_units),o,nh,nh),a.appendChild(m),e&&(m.querySelector(S).click(),d.removeProperty(o))}function s_(e,t,s,n){let a=O(np,void 0,nh);return e.appendChild(a),a.addEventListener("click",()=>{let a=s.addID(sb.tagName,"div");nk(a);let d=U(a,ng);if(void 0==g){alert("There are no additional molecules to add, please load data...");return}let o=Array.from(nQ(g));if(0==o.length){alert("There are no additional molecules to add, please load data...");return}console.log("options.length="+o.length),ae(o,!0);let l=s.addID(a,M);nk(l);let r=k(o,"Select molecule",nS,l,nh);r.classList.add(sb.tagName),d.appendChild(r),e.insertBefore(d,t),ad(o,r),r.addEventListener("change",a=>{let o,l=a.target,r=l.options[l.selectedIndex].value,h=g.get(r),c=h.getID();for(;void 0==(c=sP(!0,c,h,n)););n.set(c,h);let m=s.addID(sb.tagName,n.size),u=U(m),f=T(s.addID(m,nx),e,t,u,h.getLabel(),nh,ng);n7(em.tagName,h.getID()),sL(h,n,f.querySelector(S),s,u,ng),u.appendChild(sB(s.addID(m,nv),s,h.getDescription.bind(h),h.setDescription.bind(h),nh,ng));let p=s.addID(m,tw.tagName),N=U(p,ng);T(x(p,nx),u,null,N,tw.tagName,nh,ng);let v=h.getMetadataList();void 0!=v&&v.getMetadata().forEach(e=>{let t=U();N.appendChild(t),t.appendChild(V(e.getLabelText(),nh))});let E=s.addID(m,tO.tagName),y=U(E);T(s.addID(E,nx),u,null,y,tO.tagName,nh,ng);let w=h.getAtoms();void 0!=w&&w.atoms.forEach(e=>{y.appendChild(sG(!1,s,h,E,w,e,nh,ng))}),y.appendChild(sk(s,h,y,tG.tagName,nh,ng));let R=s.addID(m,tq.tagName),b=U(R);T(s.addID(R,nx),u,null,b,tq.tagName,nh,ng);let C=h.getBonds();void 0!=C&&C.bonds.forEach(e=>{if(void 0==w)throw Error("Atoms are not defined for molecule "+h.getLabel());b.appendChild(sq(!1,s,h,R,w.atoms,C,e,nh,ng))}),b.appendChild(sU(s,h,b,tU.tagName,nh,ng)),sX(s,h,u,nh,ng);let M=s.addID(m,st.tagName),I=U(M);T(s.addID(M,nx),u,null,I,st.tagName,nh,ng);let z=h.getPropertyList(),D=new Set(z.getProperties().keys());if(D.has(tY.dictRef)){o=x(I.id,tY.dictRef);let e=z.getProperty(tY.dictRef),t=e.getProperty(),n=at(o,s,e.dictRef,t.getValue.bind(t),s=>sM(e.dictRef,z,t,s),()=>z.removeProperty(e.dictRef),nh,ng);aa(tL.energyUnits,t.attributes,n,n.querySelector(nE),x(o,tF.s_units),e.dictRef,nh,nh),I.appendChild(n)}else sS(!0,h,s,I,z,tY.dictRef,tL.energyUnits);if(D.has(t$.dictRef)){o=x(I.id,t$.dictRef);let e=z.getProperty(t$.dictRef),t=e.getProperty(),n=at(o,s,e.dictRef,t.getValue.bind(t),s=>sM(e.dictRef,z,t,s),()=>z.removeProperty(e.dictRef),nh,ng);aa(tL.energyUnits,t.attributes,n,n.querySelector(nE),x(o,tF.s_units),e.dictRef,nh,nh),I.appendChild(n)}else sS(!0,h,s,I,z,t$.dictRef,tL.energyUnits);if(D.has(tK.dictRef)){o=x(I.id,tK.dictRef);let e=z.getProperty(tK.dictRef),t=e.getProperty(),n=at(o,s,e.dictRef,t.getValue.bind(t),s=>sM(e.dictRef,z,t,s),()=>z.removeProperty(e.dictRef),nh,ng);aa(tL.energyUnits,t.attributes,n,n.querySelector(nE),x(o,tF.s_units),e.dictRef,nh,nh),I.appendChild(n)}else sS(!0,h,s,I,z,tK.dictRef,tL.energyUnits);if(D.has(tW.dictRef)){o=x(I.id,tW.dictRef);let e=z.getProperty(tW.dictRef),t=e.getProperty(),n=at(o,s,e.dictRef,t.getValue.bind(t),s=>sM(e.dictRef,z,t,s),()=>z.removeProperty(e.dictRef),nh,ng);aa(tL.energyUnits,t.attributes,n,n.querySelector(nE),x(o,tF.s_units),e.dictRef,nh,nh),I.appendChild(n)}else sS(!0,h,s,I,z,tW.dictRef,tL.energyUnits);if(D.has(tZ.dictRef)){o=x(I.id,tZ.dictRef);let e=z.getProperty(tZ.dictRef),t=e.getProperty(),n=sY(I,s,e.dictRef,t,t.getValues.bind(t),s=>sz(e.dictRef,z,t,s),()=>z.removeProperty(e.dictRef),nh,ng);aa(tL.frequencyUnits,t.attributes,n,n.querySelector(nE),x(o,tF.s_units),e.dictRef,nh,nh),I.appendChild(n)}else sT(!0,!1,h,s,I,z,tZ.dictRef,tL.frequencyUnits);if(D.has(tQ.dictRef)){o=x(I.id,tQ.dictRef);let e=z.getProperty(tQ.dictRef),t=e.getProperty(),n=at(o,s,e.dictRef,t.getValue.bind(t),s=>sM(e.dictRef,z,t,s),()=>z.removeProperty(e.dictRef),nh,ng);I.appendChild(n)}else sS(!0,h,s,I,z,tQ.dictRef,void 0);if(D.has(tJ.dictRef)){o=x(I.id,tJ.dictRef);let e=z.getProperty(tJ.dictRef),t=e.getProperty(),n=at(o,s,e.dictRef,t.getValue.bind(t),s=>sM(e.dictRef,z,t,s),()=>z.removeProperty(e.dictRef),nh,ng);I.appendChild(n)}else sS(!0,h,s,I,z,tJ.dictRef,void 0);if(D.has(t0.dictRef)){o=x(I.id,t0.dictRef);let e=z.getProperty(t0.dictRef),t=e.getProperty(),n=at(o,s,e.dictRef,t.getValue.bind(t),s=>sM(e.dictRef,z,t,s),()=>z.removeProperty(e.dictRef),nh,ng);I.appendChild(n)}else sS(!0,h,s,I,z,t0.dictRef,void 0);if(D.has(t1.dictRef)){o=x(I.id,t1.dictRef);let e=z.getProperty(t1.dictRef),t=e.getProperty(),n=sY(I,s,e.dictRef,t,t.getValues.bind(t),s=>sz(e.dictRef,z,t,s),()=>z.removeProperty(e.dictRef),nh,ng);aa(tL.frequencyUnits,t.attributes,n,n.querySelector(nE),x(o,tF.s_units),e.dictRef,nh,nh),I.appendChild(n)}else sT(!0,!1,h,s,I,z,t1.dictRef,tL.frequencyUnits);if(D.has(t2.dictRef)){o=x(I.id,t2.dictRef);let e=z.getProperty(t2.dictRef),t=e.getProperty(),n=at(o,s,e.dictRef,t.getValue.bind(t),s=>sM(e.dictRef,z,t,s),()=>z.removeProperty(e.dictRef),nh,ng);aa(tL.massUnits,t.attributes,n,n.querySelector(nE),x(o,tF.s_units),e.dictRef,nh,nh),I.appendChild(n)}else sS(!0,h,s,I,z,t2.dictRef,tL.massUnits);if(D.has(t3.dictRef)){o=x(I.id,t3.dictRef);let e=z.getProperty(t3.dictRef),t=e.getProperty(),n=at(o,s,e.dictRef,t.getValue.bind(t),s=>sM(e.dictRef,z,t,s),()=>z.removeProperty(e.dictRef),nh,ng);I.appendChild(n)}else sS(!0,h,s,I,z,t3.dictRef,void 0);if(D.has(t5.dictRef)){o=x(I.id,t5.dictRef);let e=z.getProperty(t5.dictRef),t=e.getProperty(),n=at(o,s,e.dictRef,t.getValue.bind(t),s=>sM(e.dictRef,z,t,s),()=>z.removeProperty(e.dictRef),nh,ng);I.appendChild(n)}else sS(!0,h,s,I,z,t5.dictRef,tL.temperatureUnits);if(D.has(t4.dictRef)){o=x(I.id,t4.dictRef);let e=z.getProperty(t4.dictRef),t=e.getProperty(),n=at(o,s,e.dictRef,t.getValue.bind(t),s=>sM(e.dictRef,z,t,s),()=>z.removeProperty(e.dictRef),nh,ng);I.appendChild(n)}else sS(!0,h,s,I,z,t4.dictRef,tL.lengthUnits);if(D.has(t6.dictRef)){o=x(I.id,t6.dictRef);let e=z.getProperty(t6.dictRef),t=e.getProperty(),n=sY(I,s,e.dictRef,t,t.getValues.bind(t),s=>sz(e.dictRef,z,t,s),()=>z.removeProperty(e.dictRef),nh,ng);aa(tL.hessianUnits,t.attributes,n,n.querySelector(nE),x(o,tF.s_units),e.dictRef,nh,nh),I.appendChild(n)}else sD(!0,!1,h,s,I,z,t6.dictRef,tL.hessianUnits);if(D.has(t8.dictRef)){o=x(I.id,t8.dictRef);let e=z.getProperty(t8.dictRef),t=e.getProperty(),n=sY(I,s,e.dictRef,t,t.getValues.bind(t),s=>sz(e.dictRef,z,t,s),()=>z.removeProperty(e.dictRef),nh,ng);aa(tL.EinsteinAUnits,t.attributes,n,n.querySelector(nE),x(o,tF.s_units),e.dictRef,nh,nh),I.appendChild(n)}else sT(!0,!1,h,s,I,z,t8.dictRef,tL.EinsteinAUnits);if(D.has(t9.dictRef)){o=x(I.id,t9.dictRef);let e=z.getProperty(t9.dictRef),t=e.getProperty(),n=sY(I,s,e.dictRef,t,t.getValues.bind(t),s=>sz(e.dictRef,z,t,s),()=>z.removeProperty(e.dictRef),nh,ng);aa(tL.EinsteinBUnits,t.attributes,n,n.querySelector(nE),x(o,tF.s_units),e.dictRef,nh,nh),I.appendChild(n)}else sT(!0,!1,h,s,I,z,t9.dictRef,tL.EinsteinBUnits);if(D.has(t7.dictRef)){o=x(I.id,t7.dictRef);let e=z.getProperty(t7.dictRef),t=e.getProperty(),n=at(o,s,e.dictRef,t.getValue.bind(t),s=>sM(e.dictRef,z,t,s),()=>z.removeProperty(e.dictRef),nh,ng);aa(tL.frequencyUnits,t.attributes,n,n.querySelector(nE),x(o,tF.s_units),e.dictRef,nh,nh),I.appendChild(n)}else sS(!0,h,s,I,z,t7.dictRef,tL.frequencyUnits);let _=s.addID(m,sR.tagName),P=U(_);T(s.addID(_,nx),u,null,P,sw.tagName,nh,ng);let L=h.getStates();void 0!=L&&L.getStates().forEach(e=>{console.log(e.toString());let t=x(_,sR.tagName,i),n=q(t);P.appendChild(n);let a=e.getEnergy();if(void 0==a)throw Error("Energy is undefined for state "+e.toString());n.appendChild(at(x(t,sR.s_energy),s,sR.s_energy,()=>a,t=>e.setEnergy(t),()=>e.removeEnergy(),nh,ng));let d=e.getDegeneracy();if(void 0==d)throw Error("Degeneracy is undefined for state "+e.toString());n.appendChild(at(x(t,sR.s_degeneracy),s,sR.s_degeneracy,()=>d,t=>e.setDegeneracy(t),()=>e.removeDegeneracy(),nh,nh)),ai(n,nh,()=>{L.removeState(e.id),n.remove()})}),d.remove(),ai(u,ng,()=>{sF(e,f,s,n,m,h)})})}),a}function sP(e,t,s,n){let a;for(;;){if(null==(a=e?prompt("Please enter a name for the molecule",t):t))return;if(""==a)alert("The molecule ID cannot be empty.");else{if(!n.has(a))return t=a,void 0!=s&&(s.setID(t),n.set(t,s)),t;alert("The molecule ID "+a+" is already in use."),e=!0}}}function sL(e,t,s,n,a,d){let o=nc+" Edit id",l=n.addID(a.id,o,S),r=O(o,l,d);a.appendChild(r),r.addEventListener("click",()=>{let n=e.getID();for(n9(em.tagName,e.getID()),t.delete(n);void 0==(n=sP(!0,n,e,t)););n7(em.tagName,n),s.textContent=e.getLabel()+" ▲"})}function sB(e,t,s,n,a,d){let o=q(void 0,d),l=nv+nu,r=nv+nm,g=O(r,t.addID(e,S),a);o.appendChild(g),g.classList.add(ny),g.classList.add(nw);let h=t.addID(e,nv,nE),c=s();return void 0==c?(g.textContent=r,g.classList.toggle(ny)):(sA(o,h,c,n,a),g.textContent=l,g.classList.toggle(nw)),g.addEventListener("click",e=>{null==document.getElementById(h)?(sA(o,h,c,n,a),g.textContent=l):(document.getElementById(h)?.remove(),console.log("Removed "+h),g.textContent=r),g.classList.toggle(ny),g.classList.toggle(nw)}),o}function sA(e,t,s,n,a){let d;d=void 0==s?"":s;let o=D("text",t,a);o.addEventListener("change",e=>{let a=e.target;n(a.value),console.log(t+" changed from "+s+" to "+a.value),L(a)}),o.value=d,L(o),e.appendChild(o)}function sk(e,t,s,n,a,d){let o=O(nf,e.addID(s.id,"Add"+n+"Button"),d);return o.addEventListener("click",()=>{let n=new tG(new Map,t);s.insertBefore(sG(!0,e,t,s.id,t.getAtoms(),n,a,d),o)}),o}function sG(e,t,s,n,a,d,o,l){let r,g,h,c,m,u,f;let p=q(x(n,r=e?a.addAtom(d,d.getID()):d.getID()),l);return p.appendChild(V(r,o)),g=d.getElementType(),h=tL.elementTypes,void 0==g&&(g=nS,ae(h,!0)),c=x(p.id,tG.s_elementType),(u=(m=G(tG.s_elementType,h,tG.s_elementType,g,c,o,o)).querySelector("select")).addEventListener("change",e=>{let t=e.target;d.setElementType(t.value),B(t)}),u.value=g,B(u),ad(h,u),p.appendChild(m),f=x(p.id,tG.s_x3),p.appendChild(at(f,t,tG.s_x3,d.getX3.bind(d),d.setX3.bind(d),d.removeX3,o,o)),f=x(p.id,tG.s_y3),p.appendChild(at(f,t,tG.s_y3,d.getY3.bind(d),d.setY3.bind(d),d.removeY3,o,o)),f=x(p.id,tG.s_z3),p.appendChild(at(f,t,tG.s_z3,d.getZ3.bind(d),d.setZ3.bind(d),d.removeZ3,o,o)),ai(p,o,sO,s,r,t),n7(tU.s_atomRefs2,r),p}function sO(e,t,s){e.getAtoms().removeAtom(t),s.forEach(e=>{console.log("Removing "+e),nk(e)}),n9(tU.s_atomRefs2,t),e.getBonds().bonds.forEach(t=>{let s=t.getAtomRefs2().split(" ");if(s[0]==s[1]){let s=t.getID();e.getBonds().removeBond(s),n9(tU.tagName,s);let n=x(sb.tagName,e.id,tq.tagName,s),a=document.getElementById(n);if(null==a)throw Error("Bond div with id "+n+" not found.");a.remove()}})}function sU(e,t,s,n,a,d){let o=O(nf,e.addID(s.id,n,S),d);return o.addEventListener("click",()=>{let n=t.getAtoms().atoms;if(n.size<2){alert("There must be at least 2 atoms to create a bond.");return}let l=new Map,r=Array.from(n.keys()).slice(0,2).join(" ");l.set(tU.s_atomRefs2,r);let g=new tU(l,t);s.insertBefore(sq(!0,e,t,s.id,n,t.getBonds(),g,a,d),o)}),s.appendChild(o),o}function sq(e,t,s,n,a,d,o,l,r){let g,h,c,m,u,f,p,N,v,E;let y=q(x(n,g=e?d.addBond(o,o.getID()):o.getID()),r);return y.appendChild(V(g,l)),h=x(y.id,tU.s_atomRefs2),c=o.getAtomRefs2().split(" "),m=Array.from(s.getAtoms().atoms.keys()),u=x(h,0),(p=(f=G(tU.s_atomRefs2+"[0]",m,tG.tagName,c[0],u,l,l)).querySelector("select")).classList.add(tU.s_atomRefs2),p.addEventListener("change",e=>{let t=e.target,s=t.value+" "+c[1];console.log(tU.s_atomRefs2+" changed to "+s),o.setAtomRefs2(s),B(t)}),p.value=c[0],B(p),y.appendChild(f),N=x(h,1),(E=(v=G(tU.s_atomRefs2+"[1]",m,tG.tagName,c[1],N,l,l)).querySelector("select")).classList.add(tU.s_atomRefs2),E.addEventListener("change",e=>{let t=e.target,s=c[0]+" "+t.value;console.log(tU.s_atomRefs2+" changed to "+s),o.setAtomRefs2(s),B(t)}),E.value=c[1],B(E),y.appendChild(v),function(e,t,s,n){let a=x(t.id,tU.s_order),d=q(void 0,n);t.appendChild(d);let o=tU.s_order+nu,l=tU.s_order+nm,r=O(l,void 0,n);d.appendChild(r),r.classList.add(ny),r.classList.add(nw);let g=s.getOrder();void 0==g?(r.textContent=l,r.classList.toggle(ny)):(sV(d,s,a,g,n),r.textContent=o,r.classList.toggle(nw)),r.addEventListener("click",e=>{null==document.getElementById(a)?(void 0==g&&(g=1),sV(d,s,a,g,n),r.textContent=o):(document.getElementById(a)?.remove(),console.log("Removed "+a),r.textContent=l),r.classList.toggle(ny),r.classList.toggle(nw)})}(0,y,o,l),Array.from(a.keys()).forEach(e=>{y.classList.add(e)}),ai(y,l,e=>s.getBonds().removeBond(e),g),n7(tU.tagName,g),y}function sV(e,t,s,n,a){let d=n.toString(),o=k(tU.orderOptions,tU.s_order,d,s,a);o.addEventListener("change",e=>{let s=e.target;t.setOrder(parseFloat(s.value)),console.log(tU.s_order+" changed from "+d+" to "+s.value),B(s)}),o.value=d,B(o),o.id=s,e.appendChild(o)}function sF(e,t,s,n,a,d){e.removeChild(t),s.removeIDs(a),s.removeIDs(x(a,nv)),s.removeIDs(x(a,tO.tagName)),s.removeIDs(x(a,tq.tagName)),s.removeIDs(x(a,n_)),s.removeIDs(x(a,st.tagName)),n.delete(d.getID())}function sH(e,t,s,n,a,d,o){let l=new tX(es(t));return l.dictRef==tY.dictRef?sj(e,l,tL.energyUnits,n,a,t,s,d,o):l.dictRef==t$.dictRef?sj(e,l,tL.energyUnits,n,a,t,s,d,o):l.dictRef==tK.dictRef?sj(e,l,tL.energyUnits,n,a,t,s,d,o):l.dictRef==tW.dictRef?sj(e,l,tL.energyUnits,n,a,t,s,d,o):l.dictRef==tZ.dictRef?sj(e,l,tL.frequencyUnits,n,a,t,s,d,o):l.dictRef==tQ.dictRef?sj(e,l,void 0,n,a,t,s,d,o):l.dictRef==tJ.dictRef?sj(e,l,void 0,n,a,t,s,d,o):l.dictRef==t0.dictRef?sj(e,l,void 0,n,a,t,s,d,o):l.dictRef==t1.dictRef?sj(e,l,tL.frequencyUnits,n,a,t,s,d,o):l.dictRef==t2.dictRef?sj(e,l,void 0,n,a,t,s,d,o):l.dictRef==t3.dictRef?sj(e,l,void 0,n,a,t,s,d,o):l.dictRef==t5.dictRef?sj(e,l,void 0,n,a,t,s,d,o):l.dictRef==t4.dictRef?sj(e,l,void 0,n,a,t,s,d,o):l.dictRef==t6.dictRef?sj(e,l,void 0,n,a,t,s,d,o):l.dictRef==t8.dictRef?sj(e,l,void 0,n,a,t,s,d,o):l.dictRef==t9.dictRef?sj(e,l,void 0,n,a,t,s,d,o):function(e,t,s,n,a,d,o){let l=new Set,r=n.getElementsByTagName(tV.tagName);if(r.length>0){if(1!=r.length)throw Error("Expecting 1 "+tV.tagName+" but finding "+r.length+"!");let s=$(r[0]),n=new tV(es(r[0]),s);t.setProperty(n),n.setValue=(function(e){n.value=e,(t.dictRef==tY.dictRef||t.dictRef==t$.dictRef||t.dictRef==tK.dictRef||t.dictRef==tW.dictRef)&&n8()}).bind(n);let d=function(e,t,s,n,a,d,o,l){let r=q(e,l),g=s+nu,h=s+nm,c=nA(e,S);t.add(c);let m=O(h,c,o);r.appendChild(m),m.classList.add(ny),m.classList.add(nw);let u=nA(e,s,nE);t.add(u);let f=n();return void 0==f?(m.textContent=h,m.classList.toggle(ny)):(an(r,u,s,f,a,o),m.textContent=g,m.classList.toggle(nw)),m.addEventListener("click",e=>{null==document.getElementById(u)?(an(r,u,s,f,a,o),m.textContent=g):(document.getElementById(u)?.remove(),d(),console.log("Removed "+u),m.textContent=h),m.classList.toggle(ny),m.classList.toggle(nw)}),r}(nA(a.id,t.dictRef),l,t.dictRef,n.getValue.bind(n),n.setValue,()=>e.removeProperty(t.dictRef),nh,ng);a.appendChild(d)}else console.log("Expecting "+tV.tagName+" but finding none!")}(e,l,0,t,s,0,0),e.setProperty(l),l}function sj(e,t,s,n,a,d,o,l,r){let g,h=a.addID(x(o.id,t.dictRef)),c=d.getElementsByTagName(tF.tagName);if(c.length>0){if(1!=c.length)throw Error("Expecting 1 "+tF.tagName+" but finding "+c.length+"!");let n=$(c[0]),d=new(f(p))(n),r=es(c[0]),m=new tF(r,d);t.setProperty(m),m.setValue=(function(e){m.value=e,(t.dictRef==tY.dictRef||t.dictRef==t$.dictRef||t.dictRef==tK.dictRef||t.dictRef==tW.dictRef)&&n8()}).bind(m),aa(s,r,g=at(h,a,t.dictRef,m.getValue.bind(m),s=>sM(t.dictRef,e,m,s),()=>e.removeProperty(t.dictRef),nh,ng),g.querySelector(nE),a.addID(h,tF.s_units),t.dictRef,l,l),o.appendChild(g)}else{let c=d.getElementsByTagName(tH.tagName);if(c.length>0){if(1!=c.length)throw Error("Expecting 1 "+tH.tagName+" but finding "+c.length+"!");let n=$(c[0]);""==n&&(console.warn("inputString is empty setting to 0!"),n="0");let d=y(n.split(/\s+/)),r=es(c[0]),m=new tH(r,d);t.setProperty(m),aa(s,r,g=sY(o,a,t.dictRef,m,m.getValues.bind(m),m.setValues,()=>e.removeProperty(t.dictRef),nh,ng),g.querySelector(nI),a.addID(h,tH.s_units),t.dictRef,l,l),o.appendChild(g)}else{let e=d.getElementsByTagName(tj.tagName);if(e.length>0){var m,u;let d,g,c;if(1!=e.length)throw Error("Expecting 1 "+tj.tagName+" but finding "+e.length+"!");let f=$(e[0]),p=y(f.split(/\s+/)),N=es(e[0]),x=new tj(N,p);t.setProperty(x);let v=t.dictRef,E=(m=e=>{let s=e.target;sK(!1,t.dictRef,x,s)},u=f,d=q(void 0,r),(c=_(h,l)).onchange=m,c.value=u,A(c),(g=V(v,l)).htmlFor=h,d.appendChild(g),d.appendChild(c),d),w=E.querySelector("textarea");w.value=f,A(w),w.addEventListener("change",e=>{f=e.target.value,x=t.getProperty(),p=y(f.split(/\s+/)),x.values=p,console.log("Set "+t.dictRef+" of "+n.getLabel()+" to "+f),A(w)}),aa(s,N,E,w,a.addID(h,tH.s_units),t.dictRef,l,l),o.appendChild(E)}else throw Error("Expecting "+tF.tagName+", "+tH.tagName+" or "+tj.tagName+" but finding none!")}}}function sX(e,t,s,n,a){let d;let o=U(e.addID(s.id,n_,nx),a);s.appendChild(o);let r=e.addID(s.id,n_),g=!1,h=!1;function c(e,s){let a=U(r,n);a.className="mol-container",o.appendChild(a);let d=$3Dmol.createViewer(a,{backgroundColor:"grey"});return d.setStyle({stick:{}}),t.getAtoms().atoms.forEach(function(t){let s,n,a=t.getElementType();s=void 0==a?"Purple":tL.atomColors.get(a)||"Purple",n=void 0==a?100:tL.atomRadii.get(t.getElementType())||100;let o=t.getX3()?.toNumber()||0,l=t.getY3()?.toNumber()||0,r=t.getZ3()?.toNumber()||0;d.addSphere({center:{x:o,y:l,z:r},radius:n/110,color:s}),e&&d.addLabel(t.getID(),{position:{x:o,y:l,z:r}})}),t.getBonds().bonds.forEach(function(e){let n=e.getAtomRefs2().split(" "),a=t.getAtoms(),o=a.getAtom(n[0]),l=a.getAtom(n[1]),r=e.getOrder()||1,g=tL.bondColors.get(r)||"Purple",h=o.getX3()?.toNumber()||0,c=o.getY3()?.toNumber()||0,m=o.getZ3()?.toNumber()||0,u=l.getX3()?.toNumber()||0,f=l.getY3()?.toNumber()||0,p=l.getZ3()?.toNumber()||0;d.addCylinder({start:{x:h,y:c,z:m},end:{x:u,y:f,z:p},radius:.06*r,color:g}),s&&d.addLabel(e.getID(),{position:{x:(h+u)/2,y:(c+f)/2,z:(m+p)/2}})}),d.zoomTo(),d.render(),d.zoom(.8,2e3),d}let m=O("Draw/Redraw",void 0);function u(e,t,s,a){let o=O((s?"Hide ":"Show ")+e,t,n);return o.addEventListener("click",()=>{s?(o.textContent="Show "+e,s=!1):(o.textContent="Hide "+e,s=!0),a(s),nk(r),d=c(g,h)}),o}m.addEventListener("click",()=>{nk(r),d=c(g,h)}),o.appendChild(m);let f="Atom Labels",p=u(f,e.addID(r,f),g,e=>g=e);o.appendChild(p);let N="Bond Labels",x=u(N,e.addID(r,N),h,e=>h=e);o.appendChild(x);let v=O("Save as PNG",e.addID(r,nC),nh);v.addEventListener("click",()=>{let e=d.pngURI(),t=document.createElement("a");t.href=e;let s=l.getTitle()?.value;t.download=s.replace(/[^a-z0-9]/gi,"_")+"mol.png",document.body.appendChild(t),t.click(),document.body.removeChild(t),console.log("Save Image")}),o.appendChild(v)}function sY(e,t,s,n,a,d,o,l,r){let g=x(e.id,s),h=q(g,r),c=s+nu,m=s+nm,u=O(m,x(g,S),l);h.appendChild(u),u.classList.add(ny),u.classList.add(nw);let f=x(g,nE),p=a();return void 0==p?(u.textContent=m,u.classList.toggle(ny)):(s$(h,f,s,p,n,a,d,l),u.textContent=c,u.classList.toggle(nw)),u.addEventListener("click",e=>{null==document.getElementById(f)?(s$(h,f,s,p,n,a,d,l),u.textContent=c):(document.getElementById(f)?.remove(),o(),console.log("Removed "+f),u.textContent=m),u.classList.toggle(ny),u.classList.toggle(nw)}),h}function s$(e,t,s,n,a,d,o,l){let r;r=void 0==n?"":R(n);let g=_(t,l);g.addEventListener("change",e=>{let t=e.target,n=sK(!0,s,a,g);try{o(n),console.log(s+" changed from "+r+" to "+t.value)}catch(e){alert("Input invalid, resetting..."),t.value=d().toString()}A(t)}),g.value=r,A(g),e.appendChild(g)}function sK(e,t,s,n){var a;let d,o,l,r=n.value.trim(),g=E(s.values," ");if(""==r)return alert("Empty input resetting..."),n.value=g,s.values;let h=(a=s.values,d=r.split(/\s+/),o=[],l=!0,(d.forEach(function(e){w(e)?o.push(new(f(p))(e)):l=!1}),l)?o:(alert("An input is not a number, resetting..."),a));return h.length==s.values.length?(s.setValues(h),console.log("Changed "+s.tagName+' from: "'+g+'" to: "'+E(s.values," ")+'"')):e?(s.setValues(h),console.log("Changed "+s.tagName+' from: "'+g+'" to: "'+E(s.values," ")+'"')):(alert("Expecting "+s.values.length+" values for, but finding "+h.length+" resetting..."),n.value=g),s.values}class sW{constructor(){}readFile(){return new Promise((e,t)=>{let s=document.createElement("input");s.type="file";let n=this;s.onchange=function(){if(s.files){let a=s.files[0];a.name;let d=new FileReader,o=0,l="";d.onload=function(s){if(null==s.target){t(Error("Event target is null"));return}if(l+=s.target.result,null!=a){if(o<a.size){let e=a.slice(o,o+1048576);d.readAsText(e),o+=1048576}else{l=l.trim();let t=new DOMParser().parseFromString(l,"text/xml");e(n.parse(t))}}};let r=a.slice(o,o+1048576);d.readAsText(r),o+=1048576}},s.click()})}parse(e){let t=new Map,s=ei(e,tI.tagName),n=new Set;s.childNodes.forEach(function(e){n.add(e.nodeName)});let a=s.getElementsByTagName(sb.tagName),d=a.length;console.log("Number of molecules="+d);let o=0;for(let e=0;e<d;e++){let s,n=es(a[e]),d=n.get(sb.s_id);if(void 0==d)throw Error(sb.s_id+" is undefined");let l=a[e].childNodes;if(0==l.length){if(o++,void 0==n.get("ref"))throw Error("ref is undefined");continue}for(;void 0==(s=sP(!1,d,void 0,t)););let r=new sb(n,s);t.set(s,r);let g=new Set;for(let e=0;e<l.length;e++){let t=l[e];g.has(t.nodeName)?"#text"!=t.nodeName&&console.warn("Another ChildNode with nodeName="+t.nodeName):g.add(t.nodeName)}let h=a[e].getElementsByTagName(tw.tagName);if(h.length>0){if(h.length>1)throw Error("Expecting 1 or 0 "+tw.tagName+" but finding "+h.length+"!");let e=new tw(es(h[0]));r.setMetadataList(e);let t=h[0].getElementsByTagName(tp.tagName);for(let s=0;s<t.length;s++){let n=new tp(es(t[s]));e.addMetadata(n)}g.delete(tw.tagName)}let c=a[e].getElementsByTagName(tO.tagName);if(c.length>1)throw Error("Expecting 1 or 0 "+tO.tagName+" but finding "+c.length+"!");if(1==c.length){let e=c[0],t=e.getElementsByTagName(tG.tagName);if(0==t.length)throw Error("Expecting 1 or more atoms in "+tO.tagName+", but finding 0!");let s=new tO(es(e));r.setAtoms(s);for(let e=0;e<t.length;e++)s.addAtom(new tG(es(t[e]),r));g.delete(tO.tagName)}else{let t=a[e].getElementsByTagName(tG.tagName);if(1==t.length){let e=new tO(new Map);e.addAtom(new tG(es(t[0]),r)),r.setAtoms(e)}else if(t.length>1)throw Error("Expecting 1 "+tG.tagName+" but finding "+t.length+". Should these be in an "+tO.tagName+"?")}g.delete(tG.tagName);let m=a[e].getElementsByTagName(tq.tagName);if(m.length>0){if(m.length>1)throw Error("Expecting 1 or 0 "+tq.tagName+" but finding "+m.length+"!");let e=m[0].getElementsByTagName(tU.tagName),t=new tq(es(m[0]));for(let s=0;s<e.length;s++)t.addBond(new tU(es(e[s]),r));r.setBonds(t),g.delete(tq.tagName)}else{let t=a[e].getElementsByTagName(tU.tagName);if(t.length>0){if(t.length>1)throw Error("Expecting 1 "+tU.tagName+" but finding "+t.length+". Should these be in a "+tq.tagName+"?");let e=new tq(new Map);e.addBond(new tU(es(t[0]),r)),r.setBonds(e)}}g.delete(tU.tagName);let u=a[e].getElementsByTagName(st.tagName);if(u.length>1)throw Error("Expecting 1 or 0 "+st.tagName+" but finding "+u.length+"!");if(1==u.length){let e=new st(es(u[0]));r.setPropertyList(e);let t=u[0].getElementsByTagName(tX.tagName);for(let s=0;s<t.length;s++)e.setProperty(sZ(t[s]));g.delete(st.tagName)}else{let t=new st(new Map);r.setPropertyList(t);let s=a[e].getElementsByTagName(tX.tagName);if(1!=s.length)throw Error("Expecting 1 "+tX.tagName+" but finding "+s.length+". Should these be in a "+st.tagName+"?");t.setProperty(sZ(s[0])),g.delete(tX.tagName)}let f=a[e].getElementsByTagName(sd.tagName);if(f.length>0){if(f.length>1)throw Error("Expecting 1 or 0 "+sd.tagName+" but finding "+f.length+"!");let e=new sd(es(f[0]));r.setEnergyTransferModel(e),g.delete(sd.tagName)}let N=a[e].getElementsByTagName(so.tagName);if(N.length>0){if(N.length>1)throw Error("Expecting 1 or 0 "+so.tagName+" but finding "+N.length+"!");let e=new so(es(N[0]));r.setDOSCMethod(e),g.delete(so.tagName)}let x=a[e].getElementsByTagName(sg.tagName);if(x.length>0){if(x.length>1)throw Error("Expecting 1 or 0 "+sg.tagName+" but finding "+x.length+"!");let e=new sg(es(x[0]));r.setDistributionCalcMethod(e),g.delete(sg.tagName)}let v=a[e].getElementsByTagName(sy.tagName);if(v.length>0){if(v.length>1)throw Error("Expecting 1 or 0 "+sy.tagName+" but finding "+v.length+"!");let e=new sy(es(v[0]));r.setDensityOfStatesList(e);let t=v[0].getElementsByTagName(sE.tagName),s=v[0].getElementsByTagName(tB.tagName);if(s.length>0){if(s.length>1)throw Error("Expecting 1 or 0 "+tB.tagName+" but finding "+s.length+"!");let t=new tB(es(s[0]),Y(X(s[0])));e.setDescription(t)}if(0==t.length)throw Error("Expecting 1 or more "+sE.tagName+" but finding 0!");for(let s=0;s<t.length;s++){let n=new sE(es(t[s]));e.addDensityOfStates(n);let a=t[s].getElementsByTagName(tA.tagName);if(1!=a.length)throw Error("Expecting 1 "+tA.tagName+" but finding "+a.length+"!");{let e=new tA(es(a[0]),new p.Big(Y(X(a[0]))));n.setT(e)}let d=t[s].getElementsByTagName(sN.tagName);if(1!=d.length)throw Error("Expecting 1 "+sN.tagName+" but finding "+d.length+"!");{let e=new sN(es(d[0]),new p.Big(Y(X(d[0]))));n.setQtot(e)}let o=t[s].getElementsByTagName(sx.tagName);if(1!=o.length)throw Error("Expecting 1 "+sx.tagName+" but finding "+o.length+"!");{let e=new sx(es(o[0]),new p.Big(Y(X(o[0]))));n.setSumc(e)}let l=t[s].getElementsByTagName(sv.tagName);if(1!=l.length)throw Error("Expecting 1 "+sv.tagName+" but finding "+l.length+"!");{let e=new sv(es(l[0]),new p.Big(Y(X(l[0]))));n.setSumg(e)}}g.delete(sy.tagName)}let E=a[e].getElementsByTagName(sw.tagName);if(E.length>0){if(E.length>1)throw Error("Expecting 1 or 0 "+sw.tagName+" but finding "+E.length+"!");let e=new sw(es(E[0])),t=E[0].getElementsByTagName(sR.tagName);for(let s=0;s<t.length;s++){let n=new sR(es(t[s]),s);e.addState(n)}r.setStates(e),g.delete(sw.tagName)}g.delete("#text"),g.size>0&&(console.warn("There are additional unexpected moleculeTagNames:"),g.forEach(e=>console.warn(e)))}return console.log("Number of molecules="+t.size),console.log("Number of alias molecules="+o.toString()),t}}function sZ(e){let t=new tX(es(e));return t.dictRef==tY.dictRef?sQ(t,e):t.dictRef==t$.dictRef?sQ(t,e):t.dictRef==tK.dictRef?sQ(t,e):t.dictRef==tW.dictRef?sQ(t,e):t.dictRef==tZ.dictRef?sQ(t,e):t.dictRef==tQ.dictRef?sQ(t,e):t.dictRef==tJ.dictRef?sQ(t,e):t.dictRef==t0.dictRef?sQ(t,e):t.dictRef==t1.dictRef?sQ(t,e):t.dictRef==t2.dictRef?sQ(t,e):t.dictRef==t3.dictRef?sQ(t,e):t.dictRef==t5.dictRef?sQ(t,e):t.dictRef==t4.dictRef?sQ(t,e):t.dictRef==t6.dictRef?sQ(t,e):t.dictRef==t8.dictRef?sQ(t,e):t.dictRef==t9.dictRef?sQ(t,e):t.dictRef==t7.dictRef?sQ(t,e):function(e,t){let s=t.getElementsByTagName(tV.tagName);if(s.length>0){if(1!=s.length)throw Error("Expecting 1 "+tV.tagName+" but finding "+s.length+"!");let t=$(s[0]),n=new tV(es(s[0]),t);e.setProperty(n)}else console.log("Expecting "+tV.tagName+" but finding none!")}(t,e),t}function sQ(e,t){let s=t.getElementsByTagName(tF.tagName);if(s.length>0){if(1!=s.length)throw Error("Expecting 1 "+tF.tagName+" but finding "+s.length+"!");let t=$(s[0]),n=new p.Big(t),a=new tF(es(s[0]),n);e.setProperty(a)}else{let s=t.getElementsByTagName(tH.tagName);if(s.length>0){if(1!=s.length)throw Error("Expecting 1 "+tH.tagName+" but finding "+s.length+"!");let t=$(s[0]);if(""!=t){let n=y(t.split(/\s+/)),a=new tH(es(s[0]),n);e.setProperty(a)}}else{let s=t.getElementsByTagName(tj.tagName);if(s.length>0){if(1!=s.length)throw Error("Expecting 1 "+tj.tagName+" but finding "+s.length+"!");let t=y($(s[0]).split(/\s+/)),n=new tj(es(s[0]),t);e.setProperty(n)}else throw Error("Expecting "+tF.tagName+", "+tH.tagName+" or "+tj.tagName+" but finding none!")}}}let sJ="https://github.com/MESMER-kinetics",s0=sJ+"/mxg",s1=document.createElement("a");s1.href=s0,s1.textContent=s0;let s2=s0+"/tree/main/data/examples",s3=document.createElement("a");s3.href=s2,s3.textContent=s2;let s5=sJ+"/MESMER-code",s4=document.createElement("a");s4.href=s5,s4.textContent=s5;let s6=document.createElement("a");s6.href="https://epsrc.ukri.org/",s6.textContent="The UK Engineering and Physical Sciences Research Council (EPSRC)";let s8=document.createElement("a");s8.href="https://www.leeds.ac.uk/",s8.textContent="The University of Leeds";let s9="https://github.com/3dmol/3Dmol.js",s7=document.createElement("a");s7.href=s9,s7.textContent=s9;let ie=document.createElement("a");ie.href="http://doi.org/10.1093/bioinformatics/btu829",ie.textContent="doi:10.1093/bioinformatics/btu829";let it="https://mikemcl.github.io/big.js/",is=document.createElement("a");is.href=it,is.textContent=it;class ii{constructor(){this.tagName="defaults",this.values=new Map,this.attributess=new Map}readFile(){let e=document.createElement("input");e.type="file";let t=this;e.onchange=function(){if(e.files){for(let t=0;t<e.files.length;t++)console.log("inputElement.files["+t+"]="+e.files[t]);let s=e.files[0];console.log(s.name),s.name;let n=new FileReader,a=0,d="";n.onload=function(e){if(null==e.target)throw Error("Event target is null");if(d+=e.target.result,null!=s){if(a<s.size){let e=s.slice(a,a+1048576);n.readAsText(e),a+=1048576}else{d=d.trim();let e=new DOMParser().parseFromString(d,"text/xml");t.parse(e)}}};let o=s.slice(a,a+1048576);n.readAsText(o),a+=1048576}},e.click()}parse(e){let t=ei(e,this.tagName);console.log("Default attributes: "+v(es(t)));let s=t.children;console.log("children.length="+s.length);for(let e=0;e<s.length;e++){let t=s[e],n=t.tagName;console.log("tagName="+n);let a=es(t);if(this.attributess.set(n,a),console.log("Attributes: "+v(a)),"property"==n){let e=t.getAttribute("dictRef");try{let s=ei(t,"scalar").innerHTML;null!=s?(console.log("v="+s),this.values.set(e,s)):console.log("v is null")}catch(e){console.log("Error: "+e)}}else{let e=t.innerHTML;null!=e?(console.log("v="+e),this.values.set(n,e)):console.log("v is null")}}console.log("values: "+v(this.values)),this.attributess.forEach((e,t)=>{console.log("key="+t+" value="+v(e))})}}class ia extends W{static{this.tagName="molecule"}static{this.s_ref="ref"}static{this.s_role="role"}constructor(e){super(e,ia.tagName),this.ref=e.get(ia.s_ref),this.role=e.get(ia.s_role)}getRef(){return this.ref}setRef(e){this.ref=e,this.attributes.set("ref",e)}getRole(){return this.role}setRole(e){this.role=e,this.attributes.set("role",e)}}class id extends ee{static{this.tagName="reactant"}static{this.s_deficientReactant="deficientReactant"}static{this.s_excessReactant="excessReactant"}static{this.s_modelled="modelled"}static{this.roleOptions=[id.s_deficientReactant,id.s_excessReactant,id.s_modelled]}constructor(e,t){super(e,id.tagName),this.addNode(t)}getMolecule(){return this.nodes.get(0)}}class io extends ee{static{this.tagName="product"}static{this.roleOptions=["modelled","sink"]}constructor(e,t){super(e,io.tagName),this.addNode(t)}getMolecule(){return this.nodes.get(0)}}class il extends ee{static{this.tagName="me:transitionState"}static{this.role="transitionState"}constructor(e,t){super(e,il.tagName),this.addNode(t)}getMolecule(){return this.nodes.get(0)}}class ir extends Q{static{this.tagName="me:preExponential"}constructor(e,t){super(e,ir.tagName,t)}}class ig extends Q{static{this.tagName="me:activationEnergy"}constructor(e,t){super(e,ig.tagName,t)}}class ih extends Q{static{this.tagName="me:TInfinity"}constructor(e,t){super(e,ih.tagName,t)}}class ic extends Q{static{this.tagName="me:nInfinity"}constructor(e,t){super(e,ic.tagName,t)}}class im extends ee{static{this.tagName="me:MCRCMethod"}constructor(e){super(e,im.tagName)}}class iu extends im{static{this.xsiType="me:MesmerILT"}static{this.xsiType2="MesmerILT"}constructor(e,t,s,n,a){super(e),this.index=new Map,void 0!=t&&(this.index.set(ir.tagName,this.index.size),this.addNode(t)),void 0!=s&&(this.index.set(ig.tagName,this.index.size),this.addNode(s)),void 0!=n&&(this.index.set(ih.tagName,this.index.size),this.addNode(n)),void 0!=a&&(this.index.set(ic.tagName,this.index.size),this.addNode(a))}getPreExponential(){let e=this.index.get(ir.tagName);if(void 0!=e)return this.nodes.get(e)}setPreExponential(e){let t=this.index.get(ir.tagName);void 0==t?(this.index.set(ir.tagName,this.nodes.size),this.addNode(e)):this.nodes.set(t,e)}getActivationEnergy(){let e=this.index.get(ig.tagName);if(void 0!=e)return this.nodes.get(e)}setActivationEnergy(e){let t=this.index.get(ig.tagName);void 0==t?(this.index.set(ig.tagName,this.nodes.size),this.addNode(e)):this.nodes.set(t,e)}getTInfinity(){let e=this.index.get(ih.tagName);if(void 0!=e)return this.nodes.get(e)}setTInfinity(e){let t=this.index.get(ih.tagName);void 0==t?(this.index.set(ih.tagName,this.nodes.size),this.addNode(e)):this.nodes.set(t,e)}getNInfinity(){let e=this.index.get(ic.tagName);if(void 0!=e)return this.nodes.get(e)}setNInfinity(e){let t=this.index.get(ic.tagName);void 0==t?(this.index.set(ic.tagName,this.nodes.size),this.addNode(e)):this.nodes.set(t,e)}}class ip extends W{static{this.tagName="me:tunneling"}static{this.options=["Eckart","WKB"]}static{this.s_name="name"}constructor(e){super(e,ip.tagName)}getName(){return this.attributes.get(ip.s_name)}setName(e){this.attributes.set(ip.s_name,e)}}class iN extends Q{static{this.tagName="me:excessReactantConc"}constructor(e,t){super(e,iN.tagName,t)}}class ix extends Q{static{this.tagName="me:val"}constructor(e,t){super(e,ix.tagName,t)}}class iv extends Q{static{this.tagName="me:rev"}constructor(e,t){super(e,iv.tagName,t)}}class iE extends Q{static{this.tagName="me:Keq"}constructor(e,t){super(e,iE.tagName,t)}}class iy extends ee{static{this.tagName="me:kinf"}constructor(e,t,s,n,a){super(e,iy.tagName),this.index=new Map,void 0!=t&&(this.index.set(tA.tagName,this.nodes.size),this.addNode(t)),void 0!=s&&(this.index.set(ix.tagName,this.nodes.size),this.addNode(s)),void 0!=n&&(this.index.set(iv.tagName,this.nodes.size),this.addNode(n)),void 0!=a&&(this.index.set(iE.tagName,this.nodes.size),this.addNode(a))}getT(){let e=this.index.get(tA.tagName);if(void 0!=e)return this.nodes.get(e)}setT(e){let t=this.index.get(tA.tagName);void 0==t?(this.index.set(tA.tagName,this.nodes.size),this.addNode(e)):this.nodes.set(t,e)}getVal(){let e=this.index.get(ix.tagName);if(void 0!=e)return this.nodes.get(e)}setVal(e){let t=this.index.get(ix.tagName);void 0==t?(this.index.set(ix.tagName,this.nodes.size),this.addNode(e)):this.nodes.set(t,e)}getRev(){let e=this.index.get(iv.tagName);if(void 0!=e)return this.nodes.get(e)}setRev(e){let t=this.index.get(iv.tagName);void 0==t?(this.index.set(iv.tagName,this.nodes.size),this.addNode(e)):this.nodes.set(t,e)}getKeq(){let e=this.index.get(iE.tagName);if(void 0!=e)return this.nodes.get(e)}setKeq(e){let t=this.index.get(iE.tagName);void 0==t?(this.index.set(iE.tagName,this.nodes.size),this.addNode(e)):this.nodes.set(t,e)}getHeader(){let e=[];return e.push("T ("+this.getT()?.attributes.get("units")+")"),e.push("kf ("+this.getVal()?.attributes.get("units")+")"),e.push("krev ("+this.getRev()?.attributes.get("units")+")"),e.push("Keq ("+this.getKeq()?.attributes.get("units")+")"),e}toStringArray(){let e=this.getT(),t=this.getVal(),s=this.getRev(),n=this.getKeq();return[e.value.toString(),t.value.toString(),s.value.toString(),n.value.toString()]}toCSV(){return this.toStringArray().join(",")}}class iw extends ee{static{this.tagName="me:canonicalRateList"}constructor(e,t,s){super(e,iw.tagName),this.index=new Map,this.kinfIndex=new Map,void 0!=t&&(this.index.set(tB.tagName,this.nodes.size),this.addNode(t)),void 0!=s&&s.forEach(e=>{this.kinfIndex.set(this.nodes.size,this.nodes.size),this.addNode(e)})}getDescription(){let e=this.index.get(tB.tagName);if(void 0!=e)return this.nodes.get(e)}setDescription(e){let t=this.index.get(tB.tagName);void 0==t?(this.index.set(tB.tagName,this.nodes.size),this.addNode(e)):this.nodes.set(t,e)}getKinfs(){return Array.from(this.kinfIndex.values()).map(e=>this.nodes.get(e))}addKinf(e){this.kinfIndex.set(this.kinfIndex.size,this.nodes.size),this.addNode(e)}toCSV(){let e="",t=!0;return this.getKinfs().forEach(s=>{t&&(t=!1,e+=s.getHeader().join(",")+"\n"),e+=s.toCSV()+"\n"}),e}}class iR extends ee{static{this.tagName="reaction"}static{this.s_id="id"}constructor(e,t,s,n,a,d,o,l){super(e,iR.tagName),this.index=new Map,this.reactantsIndex=new Map,this.productsIndex=new Map,this.transitionStatesIndex=new Map;let r=e.get(iR.s_id);if(void 0==r)throw Error(iR.s_id+" is undefined!");this.id=r,void 0!=t&&(t.forEach((e,t)=>{this.reactantsIndex.set(e.getMolecule().getRef(),this.nodes.size),this.addNode(e)}),this.index.set(id.tagName,this.reactantsIndex)),void 0!=s&&(s.forEach((e,t)=>{this.productsIndex.set(e.getMolecule().getRef(),this.nodes.size),this.addNode(e)}),this.index.set(io.tagName,this.productsIndex)),void 0!=n&&(this.index.set(ip.tagName,this.nodes.size),this.addNode(n)),void 0!=a&&(a.forEach((e,t)=>{this.transitionStatesIndex.set(e.getMolecule().getRef(),this.nodes.size),this.addNode(e)}),this.index.set(il.tagName,this.transitionStatesIndex)),void 0!=d&&(this.index.set(im.tagName,this.nodes.size),this.addNode(d)),void 0!=o&&(this.index.set(iN.tagName,this.nodes.size),this.addNode(o)),void 0!=l&&(this.index.set(iw.tagName,this.nodes.size),this.addNode(l))}addToIndex(e,t){let s=this.index.get(e);if(void 0==s)this.index.set(e,this.nodes.size);else if(s instanceof Map)s.set(t.tagName,this.nodes.size);else{let n=new Map;n.set(this.nodes.get(s).getRef(),s),n.set(t.tagName,this.nodes.size),this.index.set(e,n)}}getReactants(){let e=this.index.get(id.tagName);if(void 0==e)return new Map;let t=new Map;if(e instanceof Map)e.forEach((e,s)=>{t.set(s,this.nodes.get(e))});else{let s=this.nodes.get(e);t.set(s.getMolecule().getRef(),s)}return t}setReactants(e){e.forEach((e,t)=>{this.reactantsIndex.set(e.getMolecule().getRef(),this.nodes.size),this.addNode(e)}),this.index.set(id.tagName,this.reactantsIndex)}getReactant(e){let t=this.reactantsIndex.get(e);if(void 0==t)throw Error(`Reactant with ref ${e} not found`);return this.nodes.get(t)}addReactant(e){this.reactantsIndex.set(e.getMolecule().getRef(),this.nodes.size),this.addNode(e)}removeReactant(e){let t=this.reactantsIndex.get(e);if(void 0==t)throw Error(`Reactant with ref ${e} not found`);this.nodes.delete(t),this.reactantsIndex.delete(e)}getProducts(){let e=this.index.get(io.tagName);if(void 0==e)return new Map;let t=new Map;if(e instanceof Map)e.forEach((e,s)=>{t.set(s,this.nodes.get(e))});else{let s=this.nodes.get(e);t.set(s.getMolecule().getRef(),s)}return t}setProducts(e){e.forEach((e,t)=>{this.productsIndex.set(e.getMolecule().getRef(),this.nodes.size),this.addNode(e)}),this.index.set(io.tagName,this.productsIndex)}getProduct(e){let t=this.productsIndex.get(e);if(void 0==t)throw Error(`Product with ref ${e} not found`);return this.nodes.get(t)}addProduct(e){this.productsIndex.set(e.getMolecule().getRef(),this.nodes.size),this.addNode(e)}removeProduct(e){let t=this.productsIndex.get(e);if(void 0==t)throw Error(`Product with ref ${e} not found`);this.nodes.delete(t),this.productsIndex.delete(e)}getTunneling(){let e=this.index.get(ip.tagName);if(void 0!=e)return this.nodes.get(e)}setTunneling(e){let t=this.index.get(ip.tagName);if(void 0==t)this.index.set(ip.tagName,this.nodes.size),this.addNode(e);else{if(t instanceof Map)throw Error("Tunneling is a map and it is assumed there would be only 1!");this.nodes.set(t,e)}}getTransitionStates(){let e=this.index.get(il.tagName);if(void 0==e)return new Map;let t=new Map;if(e instanceof Map)e.forEach((e,s)=>{t.set(s,this.nodes.get(e))});else{let s=this.nodes.get(e);t.set(s.getMolecule().getRef(),s)}return t}setTransitionStates(e){e.forEach((e,t)=>{this.transitionStatesIndex.set(e.getMolecule().getRef(),this.nodes.size),this.addNode(e)}),this.index.set(il.tagName,this.transitionStatesIndex)}getTransitionState(e){let t=this.transitionStatesIndex.get(e);if(void 0==t)throw Error(`Transition state with ref ${e} not found`);return this.nodes.get(t)}addTransitionState(e){this.transitionStatesIndex.set(e.getMolecule().getRef(),this.nodes.size),this.addNode(e)}removeTransitionState(e){let t=this.transitionStatesIndex.get(e);if(void 0==t)throw Error(`Transition State with ref ${e} not found`);this.nodes.delete(t),this.transitionStatesIndex.delete(e)}getMCRCMethod(){let e=this.index.get(im.tagName);if(void 0!=e)return this.nodes.get(e)}setMCRCMethod(e){let t=this.index.get(im.tagName);if(void 0==t)this.index.set(im.tagName,this.nodes.size),this.addNode(e);else{if(t instanceof Map)throw Error("MCRCMethod is a map and it is assumed there would be only 1!");this.nodes.set(t,e)}}getExcessReactantConc(){let e=this.index.get(iN.tagName);if(void 0!=e)return this.nodes.get(e)}setExcessReactantConc(e){let t=this.index.get(iN.tagName);if(void 0==t)this.index.set(iN.tagName,this.nodes.size),this.addNode(e);else{if(t instanceof Map)throw Error("ExcessReactantConc is a map and it is assumed there would be only 1!");this.nodes.set(t,e)}}getCanonicalRateList(){let e=this.index.get(iw.tagName);if(void 0!=e)return this.nodes.get(e)}setCanonicalRateList(e){let t=this.index.get(iw.tagName);if(void 0==t)this.index.set(iw.tagName,this.nodes.size),this.addNode(e);else{if(t instanceof Map)throw Error("CanonicalRateList is a map and it is assumed there would be only 1!");this.nodes.set(t,e)}}getReactantsLabel(){return Array.from(this.getReactants().values()).map(e=>e.getMolecule().getRef()).join(" + ")}getProductsLabel(){return Array.from(this.getProducts().values()).map(e=>e.getMolecule().getRef()).join(" + ")}getLabel(){return this.id+" ("+this.getReactantsLabel()+" -> "+this.getProductsLabel()+")"}getReactantsEnergy(e,t){return Array.from(this.getReactants().values()).map(s=>{let n=s.getMolecule().getRef(),a=e(n,t);return void 0==a?(console.log("molecule with ref "+n+" not found"),alert("Molecule with ref "+n+" not found. Please add it to the list of molecules.                  In the meantime it will be treated as having an energy of 0."),nK):a.getEnergy()}).reduce((e,t)=>e.add(t),new p.Big(0))}getProductsEnergy(e,t){return Array.from(this.getProducts().values()).map(s=>{let n=s.getMolecule().getRef(),a=e(n,t);if(void 0==a)throw console.log("molecule with ref "+n+" not found"),console.log(t.keys()),Error(`Molecule with ref ${n} not found`);return a.getEnergy()}).reduce((e,t)=>e.add(t),new p.Big(0))}get(e,t){if(this.index.has(e)){let s=this.index.get(e);if(void 0!=s){if(!(s instanceof Map))return this.nodes.get(s);{let e=s.get(t);if(void 0!=e)return this.nodes.get(e)}}}}}function ib(e,t,s,n){let a=O(nf,nA(iR.tagName,"add",S),ng);return t.appendChild(a),a.addEventListener("click",()=>{let d,o,g=new Map,h=l.getReactionList(),c=h.getNextReactionID();console.log("Next Reaction ID="+c),g.set(iR.s_id,"R"+c);let m=new iR(g);s.set(m.id,m),h.addReaction(m);let u=e.addID(iR.tagName,m.id),N=U(u);t.appendChild(N);let x=T(e.addID(u,nx),t,a,N,m.getLabel(),nh,ng),v=x.querySelector("button"),E=e.addID(u,id.tagName),y=U(E);T(e.addID(E,nx),N,null,y,nb,nh,ng);let w=new Map;m.setReactants(w),iC(m,v,e,u,y,n,w);let R=e.addID(u,io.tagName),b=U(R);T(e.addID(R,nx),N,null,b,nR,nh,ng);let C=new Map;m.setProducts(C),iS(m,v,e,u,b,n,C);let S=e.addID(u,il.tagName),M=U(S);T(e.addID(S,nx),N,null,M,nT,nh,ng);let I=new Map;m.setTransitionStates(I),iM(e,u,M,n,I);let D=e.addID(u,im.tagName),_=U(D);T(e.addID(D,nx),N,null,_,im.tagName,nh,ng);let P=new Map;P.set("xsi:type",iu.xsiType);let B=new iu(P);m.setMCRCMethod(B);{void 0!=r?""==(d=r.values.get(ir.tagName)??"")&&(d="6.00e-12"):d="6.00e-12",o=new(f(p))(d);let e=new Map,t=new ir(e,o);B.setPreExponential(t);let s=z("number",nA(D,ir.tagName,nE),nh,ng,e=>{au(t,e.target)},d,ir.tagName);_.appendChild(s);let n=s.querySelector("input");n.value=d,L(n),n.addEventListener("change",e=>{d=e.target.value,t.value=new(f(p))(d),console.log(ir.tagName+" changed to "+d),L(n)}),aa(void 0,e,s,null,nA(D,ir.tagName),ir.tagName,nh,nh),_.appendChild(s)}{void 0!=r?""==(d=r.values.get(ig.tagName)??"")&&(d="0.0"):d="0.0",o=new(f(p))(d);let e=new Map,t=new ig(e,o);B.setActivationEnergy(t);let s=z("number",nA(D,ig.tagName,nE),nh,ng,e=>{au(t,e.target)},d,ig.tagName),n=s.querySelector("input");n.value=d,L(n),n.addEventListener("change",e=>{d=e.target.value,t.value=new(f(p))(d),console.log(ig.tagName+" changed to "+d),L(n)}),aa(void 0,e,s,null,nA(D,ig.tagName),ig.tagName,nh,nh),_.appendChild(s)}{void 0!=r?""==(d=r.values.get(ih.tagName)??"")&&(d="298"):d="298",o=new(f(p))(d);let e=new Map,t=new ih(e,o);B.setTInfinity(t);let s=z("number",nA(D,ih.tagName,nE),nh,ng,e=>{au(t,e.target)},d,ih.tagName),n=s.querySelector("input");n.value=d,L(n),n.addEventListener("change",e=>{d=e.target.value,t.value=new(f(p))(d),console.log(ih.tagName+" changed to "+d),L(n)}),aa(void 0,e,s,null,nA(D,ih.tagName),ih.tagName,nh,nh),_.appendChild(s)}{void 0!=r?""==(d=r.values.get(ic.tagName)??"")&&(d="0.08"):d="0.08",o=new(f(p))(d);let e=new Map,t=new ic(e,o);B.setNInfinity(t);let s=z("number",nA(D,ic.tagName,nE),nh,ng,e=>{au(t,e.target)},d,ic.tagName);_.appendChild(s);let n=s.querySelector("input");n.value=d,L(n),n.addEventListener("change",e=>{d=e.target.value,t.value=new(f(p))(d),console.log(ic.tagName+" set to "+d),L(n)}),aa(void 0,e,s,null,nA(D,ic.tagName),ic.tagName,nh,nh),_.appendChild(s)}let A=e.addID(u,iN.tagName),k=U(A);void 0!=r?""==(d=r.values.get(iN.tagName)??"")&&(d="2.25e+16"):d="2.25e+16",o=new(f(p))(d);let G=new iN(new Map,o);m.setExcessReactantConc(G);let O=z("number",nA(A,iN.tagName,nE),nh,ng,e=>{au(G,e.target)},d,iN.tagName),q=O.querySelector("input");q.value=d,L(q),q.addEventListener("change",e=>{let t=e.target.value;G.value=new(f(p))(t),console.log(iN.tagName+" changed to "+t),L(q)}),aa(void 0,new Map,O,null,nA(A,iN.tagName),iN.tagName,nh,nh),k.appendChild(O),N.appendChild(k),ai(N,ng,()=>{iT(t,x,e,u,s,m)})}),a}function iC(e,t,s,n,a,d,o){let l=O(nf,s.addID(n,id.tagName,S),ng);a.appendChild(l),l.addEventListener("click",()=>{if(0===d.size){alert("Please add a molecule to the moleculeList first.");return}let r=q(void 0);a.insertBefore(r,l);let g=k(nQ(d),M,"",x(n,id.tagName,M),ng);g.classList.add(em.tagName),r.appendChild(g),g.addEventListener("click",e=>{1===g.options.length&&(alert("As there is only one molecule it will be selected."),g.selectedIndex=0,g.dispatchEvent(new Event("change")))}),g.addEventListener("change",l=>{let h=l.target,c=d.get(h.value),m=new Map,u=c.getID();if(o.has(u)){alert("Molecule already selected as a reactant. Please select a different molecule                 (you may want to add more molecules to the moleculeList)."),r.removeChild(g);return}r.id=s.addID(n,id.tagName,u),m.set(ia.s_ref,u);let f=new ia(m),p=new id(new Map,f);o.set(u,p),e.addReactant(p),t.textContent=e.getLabel(),console.log("ReactionLabel="+e.getLabel());let N=G(f.getRef()+" role",id.roleOptions,"Role",f.getRole(),x(n,M),nh,ng),v=N.querySelector("select");v?.addEventListener("change",e=>{let t=e.target;f.setRole(t.value),console.log("Set Role to "+t.value),B(t)}),r.appendChild(N),r.removeChild(g),ai(r,nh,()=>{a.removeChild(r),o.delete(u),e.removeReactant(u),n8()}),n8()}),1===g.options.length&&(g.selectedIndex=0,g.dispatchEvent(new Event("change")))})}function iS(e,t,s,n,a,d,o){let l=O(nf,s.addID(n,io.tagName,S),ng);a.appendChild(l),l.addEventListener("click",()=>{if(0===d.size){alert("Please add a molecule to the moleculeList first.");return}let r=q(void 0);a.insertBefore(r,l);let g=k(nQ(d),M,"",x(n,io.tagName,M),ng);g.classList.add(em.tagName),r.appendChild(g),g.addEventListener("click",e=>{1===g.options.length&&(alert("As there is only one molecule it will be selected."),g.selectedIndex=0,g.dispatchEvent(new Event("change")))}),g.addEventListener("change",l=>{let h=l.target,c=d.get(h.value),m=new Map,u=c.getID();if(o.has(u)){alert("Molecule already selected as a product. Please select a different molecule (you may want to add more molecules to the moleculeList)."),r.removeChild(g);return}r.id=s.addID(n,io.tagName,u),m.set(ia.s_ref,u);let f=new ia(m),p=new io(new Map,f);o.set(u,p),e.addProduct(p),t.textContent=e.getLabel(),console.log("ReactionLabel="+e.getLabel());let N=G(f.getRef()+" role",io.roleOptions,"Role",f.getRole(),x(n,M),nh,ng),v=N.querySelector("select");v?.addEventListener("change",e=>{let t=e.target;f.setRole(t.value),console.log("Set Role to "+t.value),B(t)}),r.appendChild(N),r.removeChild(g),ai(r,nh,()=>{a.removeChild(r),o.delete(u),e.removeProduct(u),n8()}),n8()}),1===g.options.length&&(g.selectedIndex=0,g.dispatchEvent(new Event("change")))})}function iM(e,t,s,n,a){let d=O(nf,e.addID(t,il.tagName,S),ng);s.appendChild(d),d.addEventListener("click",()=>{if(0===n.size){alert("Please add a molecule to the moleculeList first.");return}let o=q(void 0);s.insertBefore(o,d);let l=k(nQ(n),M,"",x(t,il.tagName,M),ng);l.classList.add(em.tagName),o.appendChild(l),l.addEventListener("click",e=>{1===l.options.length&&(alert("As there is only one molecule it will be selected."),l.selectedIndex=0,l.dispatchEvent(new Event("change")))}),l.addEventListener("change",d=>{let r=d.target,g=n.get(r.value),h=new Map,c=g.getID();if(a.has(c)){alert("Molecule already selected as a transitionState. Please select a different molecule (you may want to add more molecules to the moleculeList)."),s.removeChild(l);return}o.id=e.addID(t,il.tagName,c),h.set(ia.s_ref,c);let m=new ia(h),u=new il(new Map,m);a.set(c,u);let f=V(m.getRef()+" role "+il.role,ng);o.appendChild(f),o.removeChild(l),ai(o,nh,()=>{o.removeChild(s),a.delete(c)})}),1===l.options.length&&(l.selectedIndex=0,l.dispatchEvent(new Event("change")))})}function iT(e,t,s,n,a,d){e.removeChild(t),s.removeIDs(n),s.removeIDs(x(n,nx)),s.removeIDs(x(n,id.tagName)),a.delete(d.id),l.getReactionList().removeReaction(d.id)}function iI(e,t,s,n,a){let d=U(n.addID(t.id,em.tagName));T(n.addID(t.id,em.tagName,nx),t,null,d,em.tagName,nh,ng);let o=O(nf,n.addID(t.id,em.tagName,S),ng);if(d.appendChild(o),o.addEventListener("click",()=>{let s=new em(new Map,nS),l=e.addBathGas(s),r=q(void 0,ng),g=n.addID(t.id,em.tagName,l.toString()),h=iq(Array.from(nQ(a)),s,!0,g);h.classList.add(em.tagName),r.appendChild(h),ai(r,nh,t=>{d.removeChild(r),n.removeIDs(g),e.removeBathGas(t)}),d.insertBefore(r,o)}),null!=s){let l=Array.from(s.children).filter(e=>e.tagName===em.tagName);if(l.length>0)for(let s=0;s<l.length;s++){let r=new em(es(l[s]),Y(X(l[s]))),g=e.addBathGas(r),h=n.addID(t.id,em.tagName,g.toString()),c=q(h,ng);c.appendChild(iq(Array.from(nQ(a)),r,!1,h)),ai(c,nh,t=>{d.removeChild(c),n.removeIDs(h),e.removeBathGas(t)}),d.insertBefore(c,o)}else{let s=q(void 0,ng),l=n.addID(t.id,em.tagName,0);s.appendChild(iq(Array.from(nQ(a)),void 0,!1,l)),ai(s,nh,t=>{d.removeChild(s),n.removeIDs(l),e.removeBathGas(t)}),d.insertBefore(s,o)}}}function iz(e,t,s,n,a){let d=nQ(a),o=n.addID(t.id,ev.tagName),l=U(o);T(n.addID(t.id,o,nx),t,null,l,ev.tagName,nh,ng);let r=new ev(new Map);if(s){let n=s.getElementsByTagName(ev.tagName);if(n.length>0){if(n.length>1)throw Error("Expecting 1 "+ev.tagName+" but finding "+n.length+"!");let s=es(n[0]),a=n[0].getElementsByTagName(ex.tagName);if(0==a.length)console.warn("Expecting 1 or more "+ex.tagName+" but finding 0! Please add some PTpairs in "+eE.tagName+" "+e.id+".");else{r=new ev(s);for(let e=0;e<a.length;e++){let s=new ex(es(a[e]));r.add(s);let n=a[e].getElementsByTagName(em.tagName);n.length>0&&(n.length>1&&console.warn("xml_bathGass.length="+n.length),s.setBathGas(new em(es(n[0]),Y(X(n[0])))));let o=a[e].getElementsByTagName(eu.tagName);o.length>0&&(o.length>1&&console.warn("xml_experimentRates.length="+o.length),s.setExperimentalRate(new eu(es(o[0]),new(f(p))(Y(X(o[0])).trim()))));let g=a[e].getElementsByTagName(ef.tagName);g.length>0&&(g.length>1&&console.warn("xml_experimentalYields.length="+g.length),s.setExperimentalYield(new ef(es(g[0]),new(f(p))(Y(X(g[0])).trim()))));let h=a[e].getElementsByTagName(ep.tagName);h.length>0&&(h.length>1&&console.warn("xml_experimentalEigenvalues.length="+h.length),s.setExperimentalEigenvalue(new ep(es(h[0]),new(f(p))(Y(X(h[0])).trim())))),l.appendChild(iP(r,l,s,t.id,e,d,ng))}}}}e.setPTs(r);let g=U(void 0,ng);l.appendChild(g);let h=O(nf,void 0,nh);g.appendChild(h),h.addEventListener("click",()=>{let e=new Map;e.set("units","Torr");let s=new ex(e),n=r.add(s);console.log("Added new pTpair pTpairIndex="+n),l.insertBefore(iP(r,l,s,t.id,n,d,ng),g)});let c=O(nN,void 0,nh);g.appendChild(c),c.addEventListener("click",()=>{let e=q(void 0,ng),s=D("text",nA(ev.tagName,"addFromSpreadsheet"),ng);e.appendChild(s),l.insertBefore(e,g),s.addEventListener("change",()=>{if(console.log("inputElement.value="+s.value),console.log("inputElement.value.length="+s.value.length),s.value.length>0){let n=s.value.split(" "),a=new Map;n[0].split("	").forEach((e,t)=>{a.set(e,t)}),console.log("pTpairsArray.length="+n.length);for(let e=1;e<n.length;e++){let s=n[e].split("	"),o=a.get("P"),h=new(f(p))(s[o]),c=a.get("units"),m=new Map;if(a.has("units")){let e=s[c];m.set("units",e)}let u=new ex(m);r.add(u);let N=a.get("T"),x=new(f(p))(s[N]);if(u.setP(h),u.setT(x),a.has(ex.s_excessReactantConc)){let e=s[a.get(ex.s_excessReactantConc)];m.set(ex.s_excessReactantConc,e)}if(a.has(ex.s_percentExcessReactantConc)){let e=s[a.get(ex.s_percentExcessReactantConc)];m.set(ex.s_percentExcessReactantConc,e)}if(a.has(ex.s_precision)){console.log("index.has(PTpair.s_precision)");let e=s[a.get(ex.s_precision)];m.set(ex.s_precision,e)}if(a.has(em.tagName)){let e=s[a.get(em.tagName)];u.setBathGas(new em(new Map,e))}if(a.has(eu.tagName)){let e=s[a.get(eu.tagName)];if(e.length>0){m.set(eu.tagName,e),u.setExperimentalRate(new eu(new Map,new(f(p))(e)));let t=s[a.get(eu.tagName+"_"+eu.s_ref1)];u.getExperimentalRate()?.setRef1(t);let n=s[a.get(eu.tagName+"_"+eu.s_ref2)];u.getExperimentalRate()?.setRef2(n);let d=s[a.get(eu.tagName+"_"+eu.s_refReaction)];u.getExperimentalRate()?.setRefReaction(d);let o=s[a.get(eu.tagName+"_"+eu.s_error)];u.getExperimentalRate()?.setError(new(f(p))(o))}}if(a.has(ef.tagName)){let e=s[a.get(ef.tagName)];if(e.length>0){u.setExperimentalYield(new ef(new Map,new(f(p))(e)));let t=s[a.get(ef.tagName+"_"+ef.s_ref)];u.getExperimentalYield()?.setRef(t);let n=s[a.get(ef.tagName+"_"+ef.s_yieldTime)];u.getExperimentalYield()?.setYieldTime(new(f(p))(n));let d=s[a.get(ef.tagName+"_"+ef.s_error)];u.getExperimentalYield()?.setError(new(f(p))(d))}}if(a.has(ep.tagName)){let e=s[a.get(ep.tagName)];if(e.length>0){u.setExperimentalEigenvalue(new ep(new Map,new(f(p))(e)));let t=s[a.get(ep.tagName+"_"+ep.s_EigenvalueID)];u.getExperimentalEigenvalue()?.setEigenvalueID(t);let n=s[a.get(ep.tagName+"_"+ep.s_error)];u.getExperimentalEigenvalue()?.setError(new(f(p))(n))}}let v=r.ptps.length-1;l.insertBefore(iP(r,l,u,t.id,v,d,ng),g)}l.removeChild(e)}})});let m=O("Remove All",void 0,nh);g.appendChild(m),m.addEventListener("click",()=>{r.clear();let e=l.firstChild;for(;null!=e&&e!=g;){let t=e.nextSibling;l.removeChild(e),e=t}})}function iD(e,t,s){let n=O(nf,void 0,ng);return e.appendChild(n),n.addEventListener("click",a=>{let d,o=l.getNextConditionsID();console.log("Add Conditions "+o.toString());let r=t.addID(eE.tagName,o.toString()),g=U(r,nh),h=nA(r,nx);if(o>0){let t=document.getElementById(x(eE.tagName,(o-1).toString(),nx)).nextElementSibling;d=null!=t&&t.parentElement==e?t:n}else d=n;T(h,e,d,g,eE.tagName+" "+o.toString(),nh,ng);let c=i_(new Map,o);iI(c,g,null,t,s),iz(c,g,null,t,s),ai(g,ng,l.removeConditions.bind(l),o).addEventListener("click",e=>{nk(h),t.removeIDs(r)})}),n}function i_(e,t){let s=new eE(e,t);return l.addConditions(s),s}function iP(e,t,s,n,a,d,o){let l=q(nA(t.id,a),o);return iL(l,ex.s_P,s.getP.bind(s),s.setP.bind(s)),aa(tL.pressureUnits,s.attributes,l,null,ex.tagName,ex.tagName,nh,ng),iL(l,ex.s_T,s.getT.bind(s),s.setT.bind(s)),iA(l,s,ex.s_excessReactantConc,iO),function(e,t){let s=nA(e.id,ex.s_percentExcessReactantConc),n=U(s,nh);e.appendChild(n);let a=ex.s_percentExcessReactantConc,d=a+nu,o=a+nm,l=O(o,nA(s,S),nh);n.appendChild(l),l.classList.add(ny),l.classList.add(nw),t.attributes.get(a)?.toLowerCase()=="true"?(l.classList.toggle(nw),l.textContent=d):(l.classList.toggle(ny),l.textContent=o),l.addEventListener("click",e=>{l.classList.toggle(ny),l.classList.toggle(nw),l.textContent===o?(l.textContent=d,t.attributes.set(a,"true")):(l.textContent=o,t.attributes.delete(a))})}(l,s),iA(l,s,ex.s_precision,iG),function(e,t,s){let n=nA(e.id,em.tagName),a=U(n,nh);e.appendChild(a);let d=em.tagName,o=d+nu,l=d+nm,r=O(l,nA(n,S),nh);a.appendChild(r),r.classList.add(ny),r.classList.add(nw);let g=nA(n,nE),h=t.getBathGas();void 0==h?(r.classList.toggle(ny),r.textContent=l):(r.classList.toggle(nw),r.textContent=o,!1==s.has(h.value)&&console.warn("moleculeKeys does not contain "+h.value),a.appendChild(iU(g,t,h,!1,s))),r.addEventListener("click",e=>{r.classList.toggle(ny),r.classList.toggle(nw),r.textContent===l?(r.textContent=o,a.appendChild(iU(g,t,h,!1,s))):(r.textContent=l,nk(g))})}(l,s,d),ik(l,s,a,eu.tagName,e=>e.getExperimentalRate(),iV),ik(l,s,a,ef.tagName,e=>e.getExperimentalYield(),iF),ik(l,s,a,ep.tagName,e=>e.getExperimentalEigenvalue(),iH),ai(l,nh,(s,n,a)=>{t.removeChild(s),void 0!==n&&e.remove(n),a.removeBathGas()},l,a,s),l}function iL(e,t,s,n){let a=z("text",ex.tagName+"_"+t,nh,nr,e=>{let a=e.target;try{n(new(f(p))(a.value)),console.log(`Set ${t} to ${a.value}`)}catch(e){alert("Invalid input, resetting..."),d.value=iB(s)}L(a)},iB(s),t),d=a.querySelector("input");d.value=iB(s),L(d),e.appendChild(a)}function iB(e){let t=e();return void 0!==t?t.toString():""}function iA(e,t,s,n){let a=nA(e.id,s),d=U(a,nh);e.appendChild(d);let o=s+nu,l=s+nm,r=O(l,nA(a,S),nh);d.appendChild(r),r.classList.add(ny),r.classList.add(nw);let g=nA(a,nE);if(t.attributes.has(s)){r.classList.toggle(nw),r.textContent=o;let e=n(g,t);d.insertBefore(e,r.nextSibling)}else r.classList.toggle(ny),r.textContent=l;r.addEventListener("click",e=>{if(r.classList.toggle(ny),r.classList.toggle(nw),r.textContent===l){r.textContent=o;let e=n(g,t);d.insertBefore(e,r.nextSibling)}else r.textContent=l,nk(g)})}function ik(e,t,s,n,a,d){let o=nA(e.id,n),l=U(o,nh);e.appendChild(l);let r=n+nu,g=n+nm,h=O(g,nA(o,S),nh);l.appendChild(h),h.classList.add(ny),h.classList.add(nw);let c=nA(o,nE);void 0==a(t)?(h.classList.toggle(ny),h.textContent=g):(h.classList.toggle(nw),h.textContent=r,l.appendChild(d(c,t,s))),h.addEventListener("click",e=>{h.classList.toggle(ny),h.classList.toggle(nw),h.textContent===g?(h.textContent=r,l.appendChild(d(c,t,s))):(h.textContent=g,nk(c))})}function iG(e,t){let s;s=t.attributes.has(ex.s_precision)?t.attributes.get(ex.s_precision):tL.precisionOptions[0];let n=k(tL.precisionOptions,ex.s_precision,s,e,nh);return n.addEventListener("change",e=>{let s=e.target;t.setPrecision(s.value),console.log("Set "+ex.s_precision+" to "+s.value),B(s)}),B(n),n}function iO(e,t){let s,n=D("number",e,nh);return s=t.attributes.has(ex.s_excessReactantConc)?t.attributes.get(ex.s_excessReactantConc):NaN.toString(),console.log(ex.s_excessReactantConc+"="+s),n.value=s,n.addEventListener("change",e=>{let s=e.target;t.setExcessReactantConc(s.value),console.log("Set "+ex.s_excessReactantConc+" to "+s.value),L(s)}),L(n),n}function iU(e,t,s,n,a){let d=iq(Array.from(a),s,n,e);return d.addEventListener("change",e=>{let s=e.target;t.setBathGas(new em(new Map,s.value)),console.log("Set bathGas to "+s.value),B(s)}),B(d),d}function iq(e,t,s,n){let a;if(s)e.push(nS);else{let t=e.indexOf(nS);t>-1&&e.splice(t,1)}void 0==t?(t=new em(new Map,nS),a=nS):a=t.value;let d=k(e,em.tagName,a,nA(n,M),nh);return d.classList.add(em.tagName),ad(e,d),d.addEventListener("change",e=>{let s=e.target;t.value=s.value,console.log("Added "+s.value+" as "+em.tagName),B(s)}),d.value=a,B(d),d}function iV(e,t){return ij(t,e,e=>e.getExperimentalRate(),(e,t)=>e.setExperimentalRate(t),eu,[{tagName:eu.tagName,type:"number",eventHandler:(e,s)=>au(t.getExperimentalRate(),s),valueGetter:()=>t.getExperimentalRate().value.toString()},{tagName:eu.tagName+"_"+eu.s_ref1,type:"text",eventHandler:(e,s)=>t.getExperimentalRate()?.setRef1(s.value),valueGetter:()=>t.getExperimentalRate().getRef1()},{tagName:eu.tagName+"_"+eu.s_ref2,type:"text",eventHandler:(e,s)=>t.getExperimentalRate()?.setRef2(s.value),valueGetter:()=>t.getExperimentalRate().getRef2()},{tagName:eu.tagName+"_"+eu.s_refReaction,type:"text",eventHandler:(e,s)=>t.getExperimentalRate()?.setRefReaction(s.value),valueGetter:()=>t.getExperimentalRate().getRefReaction()},{tagName:eu.tagName+"_"+eu.s_error,type:"number",eventHandler:(e,s)=>t.getExperimentalRate()?.setError(new(f(p))(s.value)),valueGetter:()=>t.getExperimentalRate().getError().toString()}])}function iF(e,t){return ij(t,e,e=>e.getExperimentalYield(),(e,t)=>e.setExperimentalYield(t),ef,[{tagName:ef.tagName,type:"number",eventHandler:(e,s)=>au(t.getExperimentalYield(),s),valueGetter:()=>t.getExperimentalYield().value.toString()},{tagName:ef.tagName+"_"+ef.s_ref,type:"text",eventHandler:(e,s)=>t.getExperimentalYield()?.setRef(s.value),valueGetter:()=>t.getExperimentalYield().getRef()},{tagName:ef.tagName+"_"+ef.s_yieldTime,type:"number",eventHandler:(e,s)=>t.getExperimentalYield()?.setYieldTime(new(f(p))(s.value)),valueGetter:()=>t.getExperimentalYield().getYieldTime().toString()},{tagName:ef.tagName+"_"+ef.s_error,type:"number",eventHandler:(e,s)=>t.getExperimentalYield()?.setError(new(f(p))(s.value)),valueGetter:()=>t.getExperimentalYield().getError().toString()}])}function iH(e,t){return ij(t,e,e=>e.getExperimentalEigenvalue(),(e,t)=>e.setExperimentalEigenvalue(t),ep,[{tagName:ep.tagName,type:"number",eventHandler:(e,s)=>au(t.getExperimentalEigenvalue(),s),valueGetter:()=>t.getExperimentalEigenvalue().value.toString()},{tagName:ep.tagName+"_"+ep.s_EigenvalueID,type:"text",eventHandler:(e,s)=>t.getExperimentalEigenvalue()?.setEigenvalueID(s.value),valueGetter:()=>t.getExperimentalEigenvalue().getEigenvalueID()},{tagName:ep.tagName+"_"+ep.s_error,type:"number",eventHandler:(e,s)=>t.getExperimentalEigenvalue()?.setError(new(f(p))(s.value)),valueGetter:()=>t.getExperimentalEigenvalue().getError().toString()}])}function ij(e,t,s,n,a,d){let o=U(void 0,nh);o.id=t;let l=s(e);for(let s of(void 0==l&&n(e,l=new a(new Map,nK)),d)){let e=t+"_"+s.tagName;o.appendChild(z(s.type,e,nh,nr,e=>{let t=e.target;s.eventHandler(e,t),console.log("Set "+s.tagName+" to "+t.value),L(t)},s.valueGetter(),s.label||""))}return o}function iX(e,t){let s=new tM(e,t);return l.addModelParameters(s),s}function iY(e){let t,s;if(void 0!=r){let n=r.values.get(e)??"";t=""==n?nK:new(f(p))(n),s=r.attributess.get(e)??new Map}else console.log(e+" set using hardcoded default."),t=new(f(p))(101),(s=new Map).set(nD,"cm-1");return new tR(s,t)}function i$(e,t,s,n,a,d,o){let l,r,g=a.tagName,h=q(t.addID(n.id,g),ng);n.appendChild(h);let c=g+nu,m=g+nm,u=O(g,t.addID(n.id,g,S),nh);u.classList.add(ny),u.classList.add(nw),h.appendChild(u);let N=t.addID(n.id,g,nE);if(null!=s){let t=s.getElementsByTagName(g);if(1==t.length){r=Y(X(t[0]));let s=new(f(p))(r);l=new a(es(t[0]),s),u.textContent=c,iK(e,h,l,N,r,d,void 0),u.classList.toggle(nw)}else r="",l=new a(new Map,nK),u.textContent=m,u.classList.toggle(ny)}else r="",l=new a(new Map,nK),u.textContent=m,u.classList.toggle(ny);u.addEventListener("click",()=>{e.index.has(g)?(o(),nk(N),t.removeIDs(N),u.textContent=m):(iK(e,h,l,N,r,d,void 0),u.textContent=c),u.classList.toggle(ny),u.classList.toggle(nw)})}function iK(e,t,s,n,a,d,o){d.call(e,s);let l=D("text",n,nh);t.appendChild(l),l.addEventListener("change",e=>{let t=e.target;au(s,t),L(t)}),l.value=a,L(l),aa(o,s.attributes,t,l,x(n,nD),s.constructor.tagName,nh,nh)}function iW(e,t){let s=O(nf,void 0,ng),n=tM.tagName;return e.appendChild(s),s.addEventListener("click",a=>{let d,o=l.getNextModelParametersID();console.log("Add "+n+o.toString());let r=nA(n,o.toString()),g=U(r,nh),h=nA(r,nx);if(o>0){let t=document.getElementById(x(n,(o-1).toString(),nx)).nextElementSibling;d=null!=t&&t.parentElement==e?t:s}else d=s;T(h,e,d,g,n+" "+o.toString(),nh,ng);let c=iX(new Map,o);(function(e,t,s){let n,a=tR.tagName,d=q(s.addID(t.id,a),ng);t.appendChild(d);let o=a+nu,l=a+nm,r=O(a,s.addID(t.id,a,S),nh);r.classList.add(ny),r.classList.add(nw),d.appendChild(r);let g=s.addID(t.id,a,nE);r.textContent=l,r.classList.toggle(ny),r.addEventListener("click",()=>{e.index.has(tR.tagName)?(console.log("Removing GrainSize input"),e.removeGrainSize(),document.getElementById(g)?.remove(),document.getElementById(x(g,nD))?.remove(),r.textContent=l):(console.log("Adding GrainSize input"),n=iY(a),e.setGrainSize(n),iK(e,d,n,g,n.value.toString(),e.setGrainSize,tL.energyUnits),r.textContent=o),r.classList.toggle(ny),r.classList.toggle(nw)})})(c,g,t),i$(c,t,null,g,tc,c.setAutomaticallySetMaxEne,c.removeAutomaticallySetMaxEne),i$(c,t,null,g,tC,c.setEnergyAboveTheTopHill,c.removeEnergyAboveTheTopHill),i$(c,t,null,g,tS,c.setMaxTemperature,c.removeMaxTemperature),ai(g,ng,l.removeModelParameters.bind(l),o).addEventListener("click",e=>{nk(h),t.removeIDs(r)})}),s}function iZ(e){return[{class:ey,setMethod:e.setCalculateRateCoefficientsOnly,removeMethod:e.removeCalculateRateCoefficientsOnly},{class:ew,setMethod:e.setPrintCellDOS,removeMethod:e.removePrintCellDOS},{class:eR,setMethod:e.setPrintCellTransitionStateFlux,removeMethod:e.removePrintCellTransitionStateFlux},{class:eb,setMethod:e.setPrintReactionOperatorColumnSums,removeMethod:e.removePrintReactionOperatorColumnSums},{class:eC,setMethod:e.setPrintGrainBoltzmann,removeMethod:e.removePrintGrainBoltzmann},{class:eS,setMethod:e.setPrintGrainDOS,removeMethod:e.removePrintGrainDOS},{class:eM,setMethod:e.setPrintGrainkbE,removeMethod:e.removePrintGrainkbE},{class:eT,setMethod:e.setPrintGrainkfE,removeMethod:e.removePrintGrainkfE},{class:eI,setMethod:e.setPrintTSsos,removeMethod:e.removePrintTSsos},{class:ez,setMethod:e.setPrintGrainedSpeciesProfile,removeMethod:e.removePrintGrainedSpeciesProfile},{class:eD,setMethod:e.setPrintGrainTransitionStateFlux,removeMethod:e.removePrintGrainTransitionStateFlux},{class:e_,setMethod:e.setPrintReactionOperatorSize,removeMethod:e.removePrintReactionOperatorSize},{class:eP,setMethod:e.setPrintSpeciesProfile,removeMethod:e.removePrintSpeciesProfile},{class:eL,setMethod:e.setPrintPhenomenologicalEvolution,removeMethod:e.removePrintPhenomenologicalEvolution},{class:eB,setMethod:e.setPrintTunnelingCoefficients,removeMethod:e.removePrintTunnelingCoefficients},{class:eA,setMethod:e.setPrintCrossingCoefficients,removeMethod:e.removePrintCrossingCoefficients},{class:ek,setMethod:e.setTestDOS,removeMethod:e.removeTestDOS},{class:eG,setMethod:e.setTestRateConstants,removeMethod:e.removeTestRateConstants},{class:eO,setMethod:e.setUseTheSameCellNumberForAllConditions,removeMethod:e.removeUseTheSameCellNumberForAllConditions},{class:eU,setMethod:e.setForceMacroDetailedBalance,removeMethod:e.removeForceMacroDetailedBalance}]}function iQ(e){return[{class:tr,setMethod:e.setEigenvalues,removeMethod:e.removeEigenvalues},{class:tg,setMethod:e.setShortestTimeOfInterest,removeMethod:e.removeShortestTimeOfInterest},{class:th,setMethod:e.setMaximumEvolutionTime,removeMethod:e.removeMaximumEvolutionTime},{class:tc,setMethod:e.setAutomaticallySetMaxEne,removeMethod:e.removeAutomaticallySetMaxEne},{class:tm,setMethod:e.setDiagramEnergyOffset,removeMethod:e.removeDiagramEnergyOffset}]}function iJ(e,t){let s=O(nf,void 0,ng);return e.appendChild(s),s.addEventListener("click",n=>{let a,d=l.getNextControlID();console.log("Add Control "+d.toString());let o=t.addID(tf.tagName,d.toString()),r=U(o,nh);if(d>0){let t=document.getElementById(x(tf.tagName,(d-1).toString(),nx)).nextElementSibling;a=null!=t&&t.parentElement==e?t:s}else a=s;let g=t.addID(o,nx);T(g,e,a,r,tf.tagName+" "+d.toString(),nh,ng);let h=i0(new Map,d),c=new Map;iZ(h).forEach(e=>{i2(h,r,t,c,null,null,e.class,e.setMethod,e.removeMethod)});let m=q(void 0,ng);new Map([...c.entries()].sort()).forEach(e=>{m.appendChild(e)}),r.appendChild(m),i5(h,r,t,null,ng),i3(h,r,t,null,ng),iQ(h).forEach(e=>{i2(h,r,t,c,null,ng,e.class,e.setMethod,e.removeMethod,!0)}),ai(r,ng,l.removeControl.bind(l),d).addEventListener("click",e=>{nk(g),t.removeIDs(o);let s=x(o,eV.tagName);t.removeIDs(s);let n=x(s,"details");t.removeIDs(n);let a=x(n,"select");t.removeIDs(a)})}),s}function i0(e,t){let s=new tf(e,t);return l.addControl(s),s}function i1(e,t,s,n,a,d){n.call(e,s);let o=D("number",a,nh);o.addEventListener("change",e=>{let t=e.target;au(s,t),L(t)}),o.value=d,L(o),t.appendChild(o)}function i2(e,t,s,n,a,d,o,l,r,g=!1){let h,c,m,u=o.tagName,N=u+nu,x=u+nm,v=O(x,void 0,nh);if(v.classList.add(ny),v.classList.add(nw),n&&n.set(u,v),d&&(c=q(m=s.addID(t.id,u),d),t.appendChild(c),c.appendChild(v),m=s.addID(t.id,m,nE)),a){let t=a.getElementsByTagName(u);if(1==t.length){if(g){let s,n=Y(X(t[0]));s=new(f(p))("all"==n?0:n),h=new o(es(t[0]),s),i1(e,c,h,l,m,n)}else h=new o(es(t[0])),l.call(e,h);v.textContent=N,v.classList.toggle(nw)}else v.textContent=x,v.classList.toggle(ny)}else h=new o(new Map),v.textContent=x,v.classList.toggle(ny);v.addEventListener("click",t=>{e.index.has(u)?(g&&nk(m),r.call(e),v.textContent=x):(g?i1(e,c,h,l,m,""):l.call(e,h),v.textContent=N),v.classList.toggle(ny),v.classList.toggle(nw)})}function i3(e,t,s,n,a){let d,o=q(void 0,a);t.appendChild(o);let l=eV.tagName,r=l+nu,g=l+nm,h=O(g,void 0,nh);o.appendChild(h),h.classList.add(ny),h.classList.add(nw);let c=s.addID(t.id,l),m=q(c,nh);o.appendChild(m);let u=eV.options,N=s.addID(c,"details"),x=s.addID(N,"select");if(null!=n){let t=n.getElementsByTagName(l);if(t.length>0){if(t.length>1)throw Error("More than one CalcMethod element.");let n=es(t[0]),a=n.get("xsi:type");d=function e(t,s,n,a,d,o,l,r,g,h){let c;let m=ns(t,s,n,d,l,r,g,h);m.value=r,n.appendChild(m);let u=q(g,nh);if(n.appendChild(u),r==eF.xsi_type||r==eF.xsi_type2)c=new eF(o);else if(r==eH.xsi_type||r==eH.xsi_type2)c=new eH(o);else if(r==eX.xsi_type||r==eX.xsi_type2){let e=new eX(o);c=e;let t=a[0].getElementsByTagName(ej.tagName);if(t.length>0){if(1==t.length){let s=new(f(p))(Y(X(t[0]))),n=new ej(es(t[0]),s);e.setFittingIterations(n)}else throw Error("More than one FittingIterations element.")}i6(u,e)}else if(r==eW.xsi_type||r==eW.xsi_type2){let e=new eW(o);function N(e,t,s){let n=eY.tagName,a=e[0].getElementsByTagName(n);if(a.length>0){if(1==a.length){let e=new(f(p))(Y(X(a[0])));s(new t(es(a[0]),e))}else throw Error(`More than one ${n} element.`)}}c=e,N(a,eY,e.setMarquardtIterations.bind(e)),N(a,e$,e.setMarquardtTolerance.bind(e)),N(a,eK,e.setMarquardtDerivDelta.bind(e)),i8(u,e)}else if(r==e9.xsi_type||r==e9.xsi_type2){let e=new e9(o);function N(e,t,s,n){let a=t.tagName,d=e[0].getElementsByTagName(a);if(d.length>0){if(1==d.length){let e=Y(X(d[0]));n&&void 0!=e&&""!=e&&"NaN"!=e&&(e=new(f(p))(e)),s(new t(es(d[0]),e))}else throw Error(`More than one ${a} element.`)}}c=e,N(a,eQ,e.setFormat.bind(e),!1),N(a,eJ,e.setPrecision.bind(e),!1),N(a,e0,e.setChebNumTemp.bind(e),!0),N(a,e1,e.setChebNumConc.bind(e),!0),N(a,e2,e.setChebMaxTemp.bind(e),!0),N(a,e3,e.setChebMinTemp.bind(e),!0),N(a,e5,e.setChebMaxConc.bind(e),!0),N(a,e4,e.setChebMinConc.bind(e),!0),N(a,e6,e.setChebTExSize.bind(e),!0),N(a,e8,e.setChebPExSize.bind(e),!0),i9(u,e)}else if(r==ti.xsi_type||r==ti.xsi_type2){let e=new ti(o);function N(e,t,s){let n=t.tagName,a=e[0].getElementsByTagName(n);if(a.length>0){if(1==a.length){let e=new(f(p))(Y(X(a[0])));s(new t(es(a[0]),e))}else throw Error(`More than one ${n} element.`)}}c=e,N(a,e7,e.setTmin.bind(e)),N(a,te,e.setTmid.bind(e)),N(a,tt,e.setTmax.bind(e)),N(a,ts,e.setTstep.bind(e)),i7(u,e)}else if(r==tl.xsi_type||r==tl.xsi_type2){let e=new tl(o);function N(e,t,s){let n=t.tagName,a=e[0].getElementsByTagName(n);if(a.length>0){if(1==a.length){let e=Y(X(a[0]));void 0!=e&&(e=new(f(p))(e)),s(new t(es(a[0]),e))}else throw Error(`More than one ${n} element.`)}}c=e,N(a,tn,e.setSensitivityAnalysisSamples.bind(e)),N(a,ta,e.setSensitivityAnalysisOrder.bind(e)),N(a,td,e.setSensitivityNumVarRedIters.bind(e)),N(a,to,e.setSensitivityVarRedMethod.bind(e)),nt(u,e)}else{let c=o.get("name");if(void 0!=c&&c!==r)return o.set("xsi:type",c),console.warn(`Using name attribute as xsi:type: ${c}`),e(t,s,n,a,d,o,l,c,g,h);throw Error(`Unable to determine calculation method for xsi_type: ${r}`)}return c}(s,e,m,t,u,n,l,a,N,x),e.setCalcMethod(d),h.classList.toggle(nw),h.textContent=r}else h.classList.toggle(ny),h.textContent=g}else h.classList.toggle(ny),h.textContent=g;h.addEventListener("click",t=>{if(e.index.has(l))null!=e.getCalcMethod()&&(e.removeCalcMethod(),s.removeIDs(N),s.removeIDs(x),h.textContent=g,h.classList.toggle(ny),h.classList.toggle(nw));else{u[u.length-1]!=nS&&u.push(nS),s.removeIDs(N),s.removeIDs(x);let t=ns(s,e,o,u,l,nS,N,x);m.appendChild(t),h.textContent=r,h.classList.toggle(ny),h.classList.toggle(nw)}})}function i5(e,t,s,n,a){let d=tu.tagName,o=q(s.addID(t.id,d),a);t.appendChild(o);let l=d+nu,r=d+nm,g=O(d,s.addID(t.id,d,S),nh);o.appendChild(g),g.classList.add(ny),g.classList.add(nw);let h=s.addID(t.id,d,tt.tagName),c=s.addID(t.id,d,e7.tagName),m=s.addID(t.id,d,ts.tagName);if(n){let t=n.getElementsByTagName(d);1==t.length?(i4(e,o,t,h,c,m),g.classList.toggle(nw),g.textContent=l):(g.classList.toggle(ny),g.textContent=r)}else g.classList.toggle(ny),g.textContent=r;g.addEventListener("click",t=>{e.index.has(d)?(e.removeTestMicroRates(),document.getElementById(h)?.remove(),document.getElementById(c)?.remove(),document.getElementById(m)?.remove(),g.textContent=r):(i4(e,o,null,h,c,m),g.textContent=l),g.classList.toggle(ny),g.classList.toggle(nw)})}function i4(e,t,s,n,a,d){let o,l;if(null!=s&&s.length>0){if(s.length>1)throw Error("More than one TestMicroRates element.");l=new tu(o=es(s[0]))}else(o=new Map).set(tu.s_Tmax,"2000"),o.set(tu.s_Tmin,"100"),o.set(tu.s_Tstep,"100"),l=new tu(o);e.setTestMicroRates(l);let r=l.getTmax(),g=z("text",x(n,"input"),nh,nr,e=>{let t=e.target;try{l.setTmax(new(f(p))(t.value)),console.log("Set "+tu.s_Tmax+" to "+t.value)}catch(e){alert("Invalid input, resetting..."),t.value=r.toString()}L(t)},r.toString(),tu.s_Tmax);g.id=n,L(g.querySelector("input")),t.appendChild(g);let h=l.getTmin(),c=z("number",x(a+"input"),nh,nr,e=>{let t=e.target;w(t.value)?(l.setTmin(new(f(p))(t.value)),console.log("Set "+tu.s_Tmin+" to "+t.value)):(alert("Value is not numeric, resetting..."),t.value=h.toString()),L(t)},h.toString(),tu.s_Tmin);c.id=a,L(c.querySelector("input")),t.appendChild(c);let m=l.getTstep(),u=z("text",x(d+"input"),nh,nr,e=>{let t=e.target;w(t.value)?(l.setTstep(new(f(p))(t.value)),console.log("Set "+tu.s_Tstep+" to "+t.value)):(alert("Value is not numeric, resetting..."),t.value=m.toString()),L(t)},m.toString(),tu.s_Tstep);u.id=d,L(u.querySelector("input")),t.appendChild(u)}function i6(e,t){let s=t.getFittingIterations()||new ej(new Map,nK);t.setFittingIterations(s),e.appendChild(z("number",x(e.id,ej.tagName,nE),nh,nr,e=>{let t=e.target;w(t.value)?(s.value=new(f(p))(t.value),console.log("Set FittingIterations to "+t.value)):(alert("Value is not numeric, resetting..."),t.value=s.value.toString()),L(t)},s.value.toString(),ej.tagName))}function i8(e,t){function s(e,t,s,n){let a=x(t.id,e.tagName,nE),d=e.value.toString(),o=e.tagName;t.appendChild(z("number",a,s,n,t=>{let s=t.target;w(s.value)?(e.value=new(f(p))(s.value),console.log("Set "+e.tagName+" to "+s.value)):(alert("Value is not numeric, resetting..."),s.value=e.value.toString()),L(s)},d,o))}let n=t.getMarquardtIterations()||new eY(new Map,nK);t.setMarquardtIterations(n),s(n,e,nh,nr);let a=t.getMarquardtTolerance()||new e$(new Map,nK);t.setMarquardtTolerance(a),s(a,e,nh,nr);let d=t.getMarquardtDerivDelta()||new eK(new Map,nK);t.setMarquardtDerivDelta(d),s(d,e,nh,nr)}function i9(e,t){let s=t.getFormat()||new eQ(new Map,eQ.options[0]);function n(t,s,n,a,d){let o=s()||new t(new Map,d[0]);n(o);let l=G(a,d,a,o.value,e.id,nh,nh);l.querySelector("select")?.addEventListener("change",e=>{let t=e.target;o.value=t.value,console.log(`Set ${a} to `+t.value),B(t)}),e.appendChild(l)}function a(t,s,n,a){let d=s()||new t(new Map,NaN);n(d),e.appendChild(z("text",e.id+`_${a}_input`,nh,nr,ne(d,a),d.value.toString(),a))}n(eQ,t.getFormat.bind(t),t.setFormat.bind(t),eQ.tagName,eQ.options),n(eQ,()=>s.getRateUnits(),s.setRateUnits.bind(s),eQ.rateUnits,eQ.rateUnitsOptions),n(eJ,t.getPrecision.bind(t),t.setPrecision.bind(t),eJ.tagName,tL.precisionOptions),a(e0,t.getChebNumTemp.bind(t),t.setChebNumTemp.bind(t),e0.tagName),a(e1,t.getChebNumConc.bind(t),t.setChebNumConc.bind(t),e1.tagName),a(e2,t.getChebMaxTemp.bind(t),t.setChebMaxTemp.bind(t),e2.tagName),a(e3,t.getChebMinTemp.bind(t),t.setChebMinTemp.bind(t),e3.tagName),a(e5,t.getChebMaxConc.bind(t),t.setChebMaxConc.bind(t),e5.tagName),a(e4,t.getChebMinConc.bind(t),t.setChebMinConc.bind(t),e4.tagName),a(e6,t.getChebTExSize.bind(t),t.setChebTExSize.bind(t),e6.tagName),a(e8,t.getChebPExSize.bind(t),t.setChebPExSize.bind(t),e8.tagName)}function i7(e,t){function s(t,s,n,a){let d=s()||new t(new Map,NaN);n(d),e.appendChild(z("text",e.id+`_${a}_input`,nh,nr,ne(d,a),d.value.toString(),a))}s(e7,t.getTmin.bind(t),t.setTmin.bind(t),e7.tagName),s(te,t.getTmid.bind(t),t.setTmid.bind(t),te.tagName),s(tt,t.getTmax.bind(t),t.setTmax.bind(t),tt.tagName),s(ts,t.getTstep.bind(t),t.setTstep.bind(t),ts.tagName)}function ne(e,t){return t=>{let s=t.target;try{e.value=new(f(p))(s.value)}catch(t){alert("Invalid input value "+s.value+" , resetting..."),s.value=e.value.toString()}L(s)}}function nt(e,t){function s(t,s,n,a){let d=s()||new t(new Map,NaN);n(d),e.appendChild(z("text",x(e.id,a,nE),nh,nr,ne(d,a),d.value.toString(),a))}s(tn,t.getSensitivityAnalysisSamples.bind(t),t.setSensitivityAnalysisSamples.bind(t),tn.tagName),s(ta,t.getSensitivityAnalysisOrder.bind(t),t.setSensitivityAnalysisOrder.bind(t),ta.tagName),s(td,t.getSensitivityNumVarRedIters.bind(t),t.setSensitivityNumVarRedIters.bind(t),td.tagName);let n=t.getSensitivityVarRedMethod()||new to(new Map,"");t.setSensitivityVarRedMethod(n);let a=to.tagName;e.appendChild(G(a,to.options,a,to.options[0],x(e.id,a,"select"),nh,nh));let d=e.querySelector("select");d?.addEventListener("change",e=>{let t=e.target;n.value=t.value,console.log(a+" set to "+t.value),B(t)})}function ns(e,t,s,n,a,d,o,l){let r=k(n,a,d,l,nh);return s.appendChild(r),ad(n,r),r.addEventListener("change",n=>{let a=document.getElementById(o);null!=a&&(a.remove(),e.removeIDs(o)),a=q(o,nh),s.appendChild(a);let d=n.target,l=d.value,r=new Map;if(r.set("xsi:type",l),l==eF.xsi_type||l==eF.xsi_type2)t.setCalcMethod(new eF(r));else if(l==eH.xsi_type||l==eH.xsi_type2)t.setCalcMethod(new eH(r));else if(l==eX.xsi_type||l==eX.xsi_type2){let e=new eX(r);t.setCalcMethod(e),i6(a,e)}else if(l==eW.xsi_type||l==eW.xsi_type2){let e=new eW(r);t.setCalcMethod(e),i8(a,e)}else if(l==e9.xsi_type||l==e9.xsi_type2){let e=new e9(r);t.setCalcMethod(e),i9(a,e)}else if(l==ti.xsi_type||l==ti.xsi_type2){let e=new ti(r);t.setCalcMethod(e),i7(a,e)}else if(l==tl.xsi_type||l==tl.xsi_type2){let e=new tl(new Map);t.setCalcMethod(e),nt(a,e)}else throw Error("Unknown CalcMethod type.");B(d)}),r}function ni(e,t,s,n,a,d,o,l,r,g,h){let c=n+(d-n)/2;na(e,h,l,t,c-nd(e,h,l)/2,o+r),na(e,g,l,t,c-nd(e,g,l)/2,o+3*r),nn(e,t,s,n,a,d,o)}function nn(e,t,s,n,a,d,o){e.beginPath(),e.strokeStyle=t,e.lineWidth=s,e.moveTo(n,a),e.lineTo(d,o),e.stroke()}function na(e,t,s,n,a,d){e.save(),e.translate(a,d),e.scale(1,-1),e.font=s,e.fillStyle=n,e.fillText(t,0,0),e.restore()}function nd(e,t,s){return e.font=s,e.measureText(t).width}function no(e,t,s,n,a,d,o,l,r,g,h){let c=nA(e.id,S+"s"),m=U(c);e.appendChild(m);let u=nA(c,S),f="Pop into a new Window",p=O(f,u);m.appendChild(p);let N=document.createElement("canvas");N.id=t,e.appendChild(N),N.height=s,N.style.border="1px solid black",h&&nl(N,s,n,a,d,o,r,g),p.addEventListener("click",()=>{if(null==l){let e=document.createElement("canvas");e.id=t,(l=window.open("",n0,"width="+N.width+", height="+N.height)).document.body.appendChild(e),h&&nl(e,s,n,a,d,o,r,g),nk(t),p.textContent="Pop into this Window"}else(N=document.createElement("canvas")).id=t,e.appendChild(N),N.height=s,N.style.border="1px solid black",h&&nl(N,s,n,a,d,o,r,g),l.close(),l=null,p.textContent=f}),ac(N,m,null,n0)}function nl(e,t,s,n,a,d,o,l){if(console.log("drawReactionDiagram"),null!=e&&l.size>0){var r,g;let h,c,m,u,f,p,x,v,E;s?(h="lightgrey",c="lightblue",m="orange"):(h="darkgrey",c="blue",m="darkorange");let y=e.getContext("2d");y.clearRect(0,0,e.width,e.height),y.font="bold "+n;let w=(r=y.font,y.font=r,(g=y.measureText("Aj")).actualBoundingBoxAscent+g.actualBoundingBoxDescent),R=[],S=new Set,M=new Set,T=new Set,I=new Map,z=new Map,D=0;l.forEach(function(e,t){let s=e.getTransitionStates(),n=e.getReactantsLabel();if(void 0!=n){R.push(n),S.has(n)&&M.add(n);let t=e.getReactantsEnergy(nJ,o);console.log("energy="+t.toString()),u=C(u,t),f=b(f,t),z.set(n,t),!I.has(n)&&(I.set(n,D),D++)}let a=e.getProductsLabel();if(void 0!=a){S.add(a);let t=e.getProductsEnergy(nJ,o);if(console.log("energy="+t.toString()),u=C(u,t),f=b(f,t),z.set(a,t),I.has(a)){D--;let e=N(I,a);I.forEach(function(t,s){t>e&&I.set(s,t-1)}),void 0!=s&&(s.forEach(function(e,s){let n=e.getMolecule().getRef();T.add(n),I.set(n,D),console.log("energy="+(t=nJ(n,o).getEnergy()??nK).toString()),u=C(u,t),f=b(f,t),z.set(n,t),D++}),I.set(a,D),D++)}else void 0!=s&&s.forEach(function(e,s){let n=e.getMolecule().getRef();T.add(n),I.set(n,D),console.log("energy="+(t=nJ(n,o).getEnergy()??nK).toString()),u=C(u,t),f=b(f,t),z.set(n,t),D++}),I.set(a,D),D++}});let _=f.minus(u).toNumber(),P=[];I.forEach(function(e,t){P[e]=t});let L=0,B=0,A=new Map,k=new Map,G=new Map,O=new Map,U=new Map,q=new Map;P.forEach(function(e){let s=N(z,e);console.log("energy="+s.toString());let d=(s-u.toNumber())*t/(_+0)+0;E=Math.max(nd(y,s.toString(),n),nd(y,e,n)),x=L+E+5,v=p=d+a,A.set(e,[L,p]),k.set(e,[x,v]),S.has(e)&&(G.set(e,[L,p]),O.set(e,[x,v])),T.has(e)&&(U.set(e,[L,p]),q.set(e,[x,v])),L=x+10,B=x}),e.width=B;let V=t+4*w+2*a;e.height=V,y.transform(1,0,0,-1,0,V),l.forEach(function(e,t){let s=e.getTransitionStates(),n=e.getReactantsLabel(),a=e.getProductsLabel(),o=N(k,n),l=N(G,a);s.size>0?s.forEach(function(e,t){let s=N(U,t);nn(y,h,d,o[0],o[1],s[0],s[1]);let n=N(q,t);nn(y,h,d,n[0],n[1],l[0],l[1])}):nn(y,h,d,o[0],o[1],l[0],l[1])}),R.forEach(function(e){let s=N(z,e);console.log("energy="+s.toString());let d=(s-u.toNumber())*t/(_+0)+0;console.log("energyRescaled="+d.toString());let o=N(A,e)[0],l=d+a,r=N(k,e)[0],g=s.toString();ni(y,c,a,o,l,r,l,n,w,e,g)}),S.forEach(function(e){let s=N(z,e);console.log("energy="+s.toString());let d=(s-u.toNumber())*t/(_+0)+0;console.log("energyRescaled="+d.toString());let o=N(G,e)[0],l=d+a,r=N(O,e)[0],g=s.toString();M.has(e)?ni(y,m,a,o,l,r,l,n,w,e,g):ni(y,"green",a,o,l,r,l,n,w,e,g)}),T.forEach(function(e){let s=N(z,e);console.log("energy="+s.toString());let d=(s-u.toNumber())*t/(_+0)+0;console.log("energyRescaled="+d.toString());let o=N(U,e)[0],l=d+a;ni(y,"red",a,o,l,N(q,e)[0],l,n,w,e,s.toString())})}}p.Big.PE=7;let nr={marginLeft:"0px",marginTop:"1px",marginBottom:"1px",marginRight:"0px"},ng={marginLeft:"25px",marginTop:"1px",marginBottom:"1px",marginRight:"0px"},nh={marginLeft:"1px",marginTop:"1px",marginBottom:"1px",marginRight:"1px"};const nc="✎",nm=" ✗",nu=" ✓",nf="Add ＋",np="Add from library ＋",nN="Add from spreadsheet ＋",nx="container",nv="description",nE="input",ny="optionOn",nw="optionOff",nR="Products",nb="Reactants",nC="save",nS="Select an option (press a letter key to cycle through options for it)...",nM="table",nT="Transition States",nI="textarea",nz="undefined",nD="units",n_="viewer";let nP=new Set,nL=new Set;function nB(...e){let t=x(...e);if(nP.has(t))throw Error(t+" already exists!");return nP.add(t),t}function nA(...e){let t=nB(...e);return nL.add(t),t}function nk(e){let t=document.getElementById(e);null!=t&&t.remove(),nL.delete(e),nP.delete(e)}const nG=nB("menu"),nO=nB("title"),nU=nB("molecules"),nq=nB("reactions"),nV=nB("reactionsDiagram"),nF=nB("conditions"),nH=nB("modelParameters"),nj=nB("control"),nX=nB("metadata"),nY=nB("analysis"),n$=nB("xml"),nK=new p.Big(0);class nW{addID(e,...t){let s=nA(e,...t);return this.ids.has(e)||this.ids.set(e,new Set),this.ids.get(e)?.add(s),s}removeID(e){nL.delete(e),nP.delete(e)}removeIDs(e){this.ids.has(e)&&(this.ids.get(e).forEach(e=>{console.log("remove id "+e),this.removeID(e)}),this.ids.delete(e))}removeAllIDs(){this.ids.forEach((e,t)=>{this.removeIDs(t)})}constructor(){this.ids=new Map}}function nZ(e,t,s){let n;for(;void 0==(n=sP(e,t.getID(),t,s)););s.set(n,t)}function nQ(e){let t=new Set;return e.forEach((e,s)=>{let n=e.getID();t.has(n)?t.add(n+"-"+s.toString()):t.add(n)}),t}function nJ(e,t){for(let[s,n]of t)if(n.id==e)return n;return null}const n0="Reactions Diagram",n1=nA(n0),n2=nA(n1,"Canvas");let n3="1em SensSerif";function n5(){nL.forEach(e=>{nk(e)}),nL=new Set,s=new nW,n=new nW,a=new nW,d=new nW,o=new nW,r=new ii,h=new Map,c=new Map,m=[]}function n4(){n5(),n6("Example_title",new Map);let e=document.getElementById(nU),l=nA(tI.tagName),r=U(l);e.appendChild(r),T(l,e,null,r,tI.tagName,nh,nr);let g=sC(r,s,h);s_(r,g,s,h);let m=document.getElementById(nq),f=nA(tz.tagName),p=U(f);m.appendChild(p),T(f,m,null,p,tz.tagName,nh,nr),ib(n,p,c,h);let N=document.getElementById(nV),x=nA(n0),v=U(x);N.appendChild(v),T(x,N,null,v,n0,nh,nr),no(v,n2,400,t,n3,4,2,u,h,c,!0);let E=document.getElementById(nF),y=nA(eE.tagName),w=U(y);E.appendChild(w);let R=U(void 0,nh);iD(R,a,h),T(y,w,null,R,"ConditionsList",nh,nr);let b=document.getElementById(nH),C=nA(tM.tagName,"list"),S=U(C);b.appendChild(S);let M=U(void 0,nh);iW(M,d),T(C,S,null,M,"ModelParametersList",nh,nr);let I=document.getElementById(nj),z=nA(tf.tagName),D=U(z);I.appendChild(D);let _=U(void 0,nh);iJ(_,o),T(z,D,null,_,"ControlList",nh,nr)}function n6(e,t){let s=new tT(t,e);l.setTitle(s);let n=document.getElementById(nO),a=nA("titleDiv");nk(a);let d=z("text",nA(a,nE),nh,nr,e=>{let t=e.target;s.value=t.value,console.log(s.tagName+" changed to "+s.value),L(t)},e,tT.tagName);d.id=a,n.appendChild(d)}function n8(){null==u?nl(document.getElementById(n2),400,t,n3,4,2,h,c):nl(u.document.getElementById(n2),400,t,n3,4,2,h,c)}function n9(e,t){let s=document.getElementsByClassName(e);for(let e=0;e<s.length;e++)if(s[e]instanceof HTMLSelectElement){let n=s[e].options,a=s[e].value;Array.from(n).forEach(n=>{if(n.value==t&&(n.remove(),a==t)){let t=new Event("change");s[e].dispatchEvent(t)}})}}function n7(e,t){let s=document.getElementsByClassName(e);console.log("n elements with className "+e+"="+s.length);for(let e=0;e<s.length;e++){let n=s[e];if(s[e]instanceof HTMLSelectElement){let e=document.createElement("option");e.value=t,e.text=t,n.add(e)}}}function ae(e,t){if(t)e.push(nS);else{let t=e.indexOf(nS);t>-1&&e.splice(t,1)}}function at(e,t,s,n,a,d,o,l){let r=q(e,l),g=s+nu,h=s+nm,c=O(h,x(e,s,S),o);r.appendChild(c),c.classList.add(ny),c.classList.add(nw);let m=x(e,s,nE),u=n();return void 0==u?(c.textContent=h,c.classList.toggle(ny)):(as(r,m,s,u,n,a,o),c.textContent=g,c.classList.toggle(nw)),c.addEventListener("click",e=>{if(null==document.getElementById(m)){console.log("Adding "+m),as(r,m,s,u,n,a,o);let e=r.querySelector(nE);void 0!=u&&(e.value=u.toString());let t=new Event("change");e.dispatchEvent(t),c.textContent=g}else document.getElementById(m)?.remove(),d(s),console.log("Removed "+m),c.textContent=h;c.classList.toggle(ny),c.classList.toggle(nw)}),r}function as(e,t,s,n,a,d,o){let l;l=void 0==n?"":n.toString();let r=D("text",t,o);r.addEventListener("click",e=>{l=r.value}),r.addEventListener("change",e=>{let t=e.target;try{let e=t.value;""==e&&(e="0"),d(new p.Big(e)),console.log(s+" changed from "+l+" to "+t.value)}catch(s){alert("Input invalid, resetting...");let e=a();void 0!=e&&(t.value=e.toString())}L(t)}),r.value=l,L(r),e.appendChild(r)}function ai(e,t,s,...n){let a=O("Remove ✕",void 0,t);return e.appendChild(a),a.addEventListener("click",()=>{s(...n),e.remove(),nk(e.id)}),a}function an(e,t,s,n,a,d){let o;o=void 0==n?"":n.toString();let l=D("text",t,d);l.addEventListener("change",e=>{let t=e.target;a(t.value),console.log(s+" changed from "+n+" to "+t.value),L(t)}),l.value=o,L(l),e.appendChild(l)}function aa(e,t,s,n,a,d,o,l){if(void 0!=e){let r=function(e,t,s,n,a,d){let o=t.get("units");if(void 0!=o){let l=G("units",e,"units",o,s,a,d),r=l.querySelector("select");return r.value=o,B(r),r.addEventListener("change",e=>{let s=e.target;t.set("units",s.value),console.log("Set "+n+" units to "+s.value),B(s)}),l}}(e,t,a,d,o,l);void 0!=r&&s.insertBefore(r,n)}else{let e=t.get("units");if(void 0!=e){let t=V("units "+e,l);s.insertBefore(t,n)}}}function ad(e,t){t.addEventListener("click",s=>{e[e.length-1]==nS&&e.pop();let n=t.options.length-1;t.options[n].value==nS&&t.remove(n)})}document.addEventListener("DOMContentLoaded",()=>{let N,y,R,b,C,I,_,P,A,k,K,W,Z,Q,J,ee;document.body.className=t?"dark-mode":"light-mode";let et=new Map;et.set("xmlns","http://www.xml-cml.org/schema"),et.set("xmlns:me","http://www.chem.leeds.ac.uk/mesmer"),et.set("xmlns:xsi","http://www.w3.org/2001/XMLSchema-instance"),l=new tL(et),(N=document.getElementById(nG)).style.display="flex",N.style.justifyContent="center",N.style.margin="5px",N.style.padding="5px",N.style.border="1px solid black",N.style.backgroundColor="lightgrey",R=O(y="About",nB(y),nh),N.appendChild(R),R.addEventListener("click",async e=>{!function(e){if(null==e)return;e.document.title="About MXG";let t=document.createElement("div");e.document.body.appendChild(t);let s=e.document.createElement("p");t.appendChild(s),s.appendChild(e.document.createTextNode("MXG is a free and open source program to assist in creating, editing and         visualising MESMER XML data. MXG is released via the MESMER-kinetics GitHub repository: ")),s.appendChild(s1),s.appendChild(e.document.createTextNode(". Details of MESMER - the Master Equation Solver for Multi Energy-well Reactions         can be found at: ")),s.appendChild(s4),s.appendChild(e.document.createTextNode("."));let n=document.createElement("p");t.appendChild(n),n.appendChild(e.document.createTextNode("MXG development has been led by a team based at ")),n.appendChild(s8),n.appendChild(e.document.createTextNode(" and funded by ")),n.appendChild(s6),n.appendChild(e.document.createTextNode(". Please contribute to MXG development by reporting issues on GitHub."));let a=e.document.createElement("p");t.appendChild(a),a.appendChild(e.document.createTextNode("MXG should work with the latest Firefox, Chrome, Edge or Safari Web browsers.         It can be used offline after installation as a Progressive Web App (PWA). The process of installing a PWA varies by         Web browser and device. For guidance please see the MXG development repository README."));let d=e.document.createElement("p");t.appendChild(d),d.appendChild(e.document.createTextNode("The Menu contains 7 buttons:         The About button displays the about text in a new Window.         The Load MESMER File button is for loading a MESMER XML data file.         The Load Into Library button is for adding molecule data to a molecule library.         The Clear Library button clears the molecule library.         The Load Defaults button is for loading default values from a file.         The Save button is for saving a new MESMER XML data file.         The Restart button reinitialises the interface."));let o=document.createElement("p");t.appendChild(o),o.appendChild(e.document.createTextNode('A MESMER XML input data file normally has a "me:mesmer" element containing:         "me:title", "moleculeList", "reactionList", "me:conditions", "me:modelParameters", and "me:control" elements.         A MESMER XML output data usually also has "me:metadataList" and "me:analysis" elements in the "me:mesmer"         element, and additional output located in the "moleculeList" and "reactionList" elements.         The main interface below the Menu presents what is in a loaded MESMER file, or what will be in saved to a MESMER file.         It also presents visualisations of the data which can be output in PNG or CSV formats.         The "me:title" value is presented in an input after a label. The input allows for the default value,         "Example_title" to be changed. Other details are presented via buttons with descriptive names and a triangular         symbol:         A triangle orientated with a point down: ▼ can be actioned to reveal details.         A triangle orientated with a point up: ▲ can be actioned to hide those details.'));let l=e.document.createElement("p");t.appendChild(l),l.textContent='The Reaction Diagram button shows/hides a reaction well diagram which is redrawn if molecule "me:ZPE"         property values are changed. The diagram can be opened in a new Window and saved as an image in PNG format file.';let r=e.document.createElement("p");t.appendChild(r),r.textContent="MXG uses 3DMol.js under a BSD-3-Clause licence to visualise molecules with coordinates. For details         of 3DMol.js please see the GitHub repository: ",r.appendChild(s7),r.appendChild(e.document.createTextNode(". If you use the 3DMol.js visualisations, please cite: Nicholas Rego and         David Koes 3Dmol.js: molecular visualization with WebGL Bioinformatics (2015) 31 (8): 1322-1324 ")),r.appendChild(ie),r.appendChild(e.document.createTextNode("."));let g=e.document.createElement("p");t.appendChild(g),g.textContent="MXG uses Big.js under an MIT licence to handle numbers. For details of Big.js please see the GitHub         repository: ",g.appendChild(is),g.appendChild(e.document.createTextNode("."))}(window.open("","","width=600,height=400"))}),(C=O(b="Load MESMER File",nB(b),nh)).addEventListener("click",r=>{if(confirm("Any unsaved changes will be lost. Select OK to continue loading or Cancel to cancel.")){let r;n5(),(r=document.createElement("input")).type="file",r.onchange=function(){if(r.files){for(let e=0;e<r.files.length;e++)console.log("inputElement.files["+e+"]="+r.files[e]);let g=r.files[0];console.log(g.name),e=g.name;let N=new FileReader,y=0,R="";N.onload=function(r){if(null==r.target)throw Error("Event target is null");if(R+=r.target.result,null!=g){if(y<g.size){let e=g.slice(y,y+1048576);N.readAsText(e),y+=1048576}else{var b;let r,g,N,y;b=R=R.trim(),r=document.getElementById(n$),nk(g=nA(n$,2)),N=U(g,ng),T(g,r,null,N,e,nh,nr),(y=document.createElement("pre")).textContent=b,N.appendChild(y),function(r){let g,N;console.log("parse: "+r);let y=ei(r,tL.tagName);l=new tL(es(y));let R=r.getElementsByTagName(tT.tagName);R.length>0?(R.length>1&&console.warn("Multiple "+tT.tagName+" tags found, using the first."),g=R[0].childNodes[0].nodeValue.trim(),N=es(R[0])):(g=e,console.warn("No "+tT.tagName+" tag found, using the filename: "+e+" as the title."),N=new Map),n6(g,N);let b=document.getElementById(nU),C=nA(tI.tagName);nk(C),T(C,b,null,function(e,t,s){let n=U(void 0,nh),a=ei(e,tI.tagName),d=new Set;if(a.childNodes.forEach(function(e){d.add(e.nodeName)}),1==d.size||2==d.size&&d.has("#text")||(console.error("moleculeListTagNames:"),d.forEach(e=>console.error(e)),console.warn("Additional tag names in moleculeList:")),!d.has(sb.tagName)){console.warn('Expecting tags with "'+sb.tagName+'" tagName but there are none! Please add molecules to the moleculeList.');let e=n.appendChild(sC(n,t,s));return n.appendChild(s_(n,e,t,s)),n}let o=a.getElementsByTagName(sb.tagName),l=o.length;console.log("Number of molecules="+l);for(let e=0;e<l;e++){let a,d,l=t.addID(sb.tagName,e),r=U(l),g=es(o[e]),h=new sb(g,g.get(sb.s_id));nZ(!1,h,s);let c=T(t.addID(l,nx),n,null,r,h.getLabel(),nh,ng),m=new Set,u=o[e].childNodes;for(let e=0;e<u.length;e++){let t=u[e];m.has(t.nodeName)?"#text"!=t.nodeName&&console.warn("Another ChildNode with nodeName="+t.nodeName):m.add(t.nodeName)}sL(h,s,c.querySelector(S),t,r,ng),r.appendChild(sB(t.addID(l,nv),t,h.getDescription.bind(h),h.setDescription.bind(h),nh,ng));let N=o[e].getElementsByTagName(tw.tagName);if(N.length>0){N.length>1&&console.warn("Expecting 1 or 0 "+tw.tagName+" but finding "+N.length+". Loading the first of these...");let e=t.addID(l,tw.tagName),s=U(e);T(t.addID(e,nx),r,null,s,tw.tagName,nh,ng);let n=N[0].getElementsByTagName(tp.tagName),a=new tw(es(N[0]));h.setMetadataList(a);for(let d=0;d<n.length;d++){let o=new tp(es(n[d]));s.appendChild(function(e,t,s,n,a,d){s.addMetadata(t);let o=q(n,ng);return o.appendChild(V(e.getLabel(),nh)),o}(h,o,a,t.addID(e,d),0,0))}m.delete(tw.tagName)}let E=o[e].getElementsByTagName(tO.tagName),y=t.addID(l,tO.tagName),R=U(y);T(t.addID(y,nx),r,null,R,tO.tagName,nh,ng);let b=new tO(new Map);h.setAtoms(b);for(let e=0;e<E.length;e++){let t=es(E[e]);t.size>0&&console.warn("AtomArray attributes lost/ignored: "+v(t))}let C=o[e].getElementsByTagName(tG.tagName);for(let e=0;e<C.length;e++)R.appendChild(sG(!0,t,h,y,b,new tG(es(C[e]),h),nh,ng));R.appendChild(sk(t,h,R,tG.tagName,nh,ng)),m.delete(tG.tagName);let M=o[e].getElementsByTagName(tq.tagName),I=t.addID(l,tq.tagName),_=U(I);T(t.addID(I,nx),r,null,_,tq.tagName,nh,ng);let P=new tq(new Map);h.setBonds(P);for(let e=0;e<M.length;e++){let t=es(M[e]);t.size>0&&console.warn("BondArray attributes lost/ignored: "+v(t))}let B=o[e].getElementsByTagName(tU.tagName);for(let e=0;e<B.length;e++)es(B[e]).has(tU.s_id)&&_.appendChild(sq(!0,t,h,I,h.getAtoms().atoms,P,new tU(es(B[e]),h),nh,ng));for(let e=0;e<B.length;e++)es(B[e]).has(tU.s_id)||_.appendChild(sq(!0,t,h,I,h.getAtoms().atoms,P,new tU(es(B[e]),h),nh,ng));_.appendChild(sU(t,h,_,tU.tagName,nh,ng)),m.delete(tU.tagName);let A=t.addID(l,n_),k=U(A);T(t.addID(A,nx),r,null,k,n_,nh,ng),sX(t,h,k,nh,ng);let j=o[e].getElementsByTagName(st.tagName),K=t.addID(l,st.tagName),W=U(K);T(t.addID(K,nx),r,null,W,st.tagName,nh,ng),j.length>1&&console.warn("Expecting 1 or 0 "+st.tagName+" but finding "+j.length+". Loading the first of these...");let Z=new Set,Q=new Map;if(j.length>0){a=new st(es(j[0])),d=j[0].getElementsByTagName(tX.tagName);for(let e=0;e<d.length;e++){let t=new tX(es(d[e]));Z.add(t.dictRef),Q.set(t.dictRef,e)}}else a=new st(new Map);h.setPropertyList(a),m.delete(st.tagName),Z.has(tY.dictRef)?(x(W.id,tY.dictRef),sH(a,d[Q.get(tY.dictRef)],W,h,t,nh,ng)):sS(!1,h,t,W,a,tY.dictRef,tL.energyUnits),Z.has(t$.dictRef)?(x(W.id,t$.dictRef),sH(a,d[Q.get(t$.dictRef)],W,h,t,nh,ng)):sS(!0,h,t,W,a,t$.dictRef,tL.energyUnits),Z.has(tK.dictRef)?(x(W.id,tK.dictRef),sH(a,d[Q.get(tK.dictRef)],W,h,t,nh,ng)):sS(!1,h,t,W,a,tK.dictRef,tL.energyUnits),Z.has(tW.dictRef)?(x(W.id,tW.dictRef),sH(a,d[Q.get(tW.dictRef)],W,h,t,nh,ng)):sS(!1,h,t,W,a,tW.dictRef,tL.energyUnits),Z.has(tZ.dictRef)?(x(W.id,tZ.dictRef),sH(a,d[Q.get(tZ.dictRef)],W,h,t,nh,ng)):sT(!1,!1,h,t,W,a,tZ.dictRef,tL.frequencyUnits),Z.has(tQ.dictRef)?(x(W.id,tQ.dictRef),sH(a,d[Q.get(tQ.dictRef)],W,h,t,nh,ng)):sS(!1,h,t,W,a,tQ.dictRef,void 0),Z.has(tJ.dictRef)?(x(W.id,tJ.dictRef),sH(a,d[Q.get(tJ.dictRef)],W,h,t,nh,ng)):sS(!1,h,t,W,a,tJ.dictRef,void 0),Z.has(t0.dictRef)?(x(W.id,t0.dictRef),sH(a,d[Q.get(t0.dictRef)],W,h,t,nh,ng)):sS(!1,h,t,W,a,t0.dictRef,void 0),Z.has(t1.dictRef)?(x(W.id,t1.dictRef),sH(a,d[Q.get(t1.dictRef)],W,h,t,nh,ng)):sT(!1,!1,h,t,W,a,t1.dictRef,tL.frequencyUnits),Z.has(t2.dictRef)?(x(W.id,t2.dictRef),sH(a,d[Q.get(t2.dictRef)],W,h,t,nh,ng)):sS(!1,h,t,W,a,t2.dictRef,tL.massUnits),Z.has(t3.dictRef)?(x(W.id,t3.dictRef),sH(a,d[Q.get(t3.dictRef)],W,h,t,nh,ng)):(sS(!1,h,t,W,a,t3.dictRef,void 0).querySelector(S).click(),a.removeProperty(t3.dictRef)),Z.has(t5.dictRef)?(x(W.id,t5.dictRef),sH(a,d[Q.get(t5.dictRef)],W,h,t,nh,ng)):sS(!1,h,t,W,a,t5.dictRef,tL.temperatureUnits),Z.has(t4.dictRef)?(x(W.id,t4.dictRef),sH(a,d[Q.get(t4.dictRef)],W,h,t,nh,ng)):sS(!1,h,t,W,a,t4.dictRef,tL.lengthUnits),Z.has(t6.dictRef)?(x(W.id,t6.dictRef),sH(a,d[Q.get(t6.dictRef)],W,h,t,nh,ng)):sD(!1,!1,h,t,W,a,t6.dictRef,tL.hessianUnits),Z.has(t8.dictRef)?(x(W.id,t8.dictRef),sH(a,d[Q.get(t8.dictRef)],W,h,t,nh,ng)):sT(!1,!1,h,t,W,a,t8.dictRef,tL.EinsteinAUnits),Z.has(t9.dictRef)?(x(W.id,t9.dictRef),sH(a,d[Q.get(t9.dictRef)],W,h,t,nh,ng)):sT(!1,!1,h,t,W,a,t9.dictRef,tL.EinsteinBUnits),Z.has(t7.dictRef)?(x(W.id,t7.dictRef),sH(a,d[Q.get(t7.dictRef)],W,h,t,nh,ng)):sS(!1,h,t,W,a,t7.dictRef,tL.frequencyUnits),m.delete(st.tagName),m.delete(tX.tagName);let J=o[e].getElementsByTagName(sd.tagName);if(J.length>0){if(J.length>1)throw Error("Expecting 1 or 0 "+sd.tagName+" but finding "+J.length+"!");(function(e,t,s,n,a){let d=n.getElementsByTagName(ss.tagName);if(d.length>0){let n=e.addID(a.id,sd.tagName),o=document.createElement("div");T(e.addID(n,nx),a,null,o,sd.tagName,nh,ng);let l=[];for(let t=0;t<d.length;t++){let s=$(d[t]),a=new(f(p))(s),r=new ss(es(d[t]),a);l.push(r);let g=ss.tagName,h=e.addID(n,ss.tagName,t),c=z("number",h,nh,ng,e=>{let n=e.target;au(r,n),s=n.value,l[t].setValue(new(f(p))(s)),console.log("Set "+h+" to "+s),L(n)},s,g);o.appendChild(c);let m=document.createElement("label");m.textContent="units cm-1",c.appendChild(m)}t.setDeltaEDowns(l),s.setEnergyTransferModel(t)}})(t,new sd(es(J[0])),h,J[0],r),m.delete(sd.tagName)}let ee=o[e].getElementsByTagName(so.tagName);if(ee.length>0){if(ee.length>1)throw Error("Expecting 1 or 0 "+so.tagName+" but finding "+ee.length+"!");let e=new so(es(ee[0]));r.appendChild(G(so.tagName,so.xsi_typeOptions,so.tagName,e.getXsiType(),t.addID(l,so.tagName),nh,ng)),m.delete(so.tagName)}let et=o[e].getElementsByTagName(sg.tagName);if(et.length>0){if(et.length>1)throw Error("Expecting 1 or 0 "+sg.tagName+" but finding "+et.length+"!");let e=es(et[0]),s=new sg(e);h.setDistributionCalcMethod(s);let n=U(t.addID(l,sg.tagName));r.appendChild(n),n.appendChild(V(sg.tagName+" "+v(e),ng)),m.delete(sg.tagName)}let ei=o[e].getElementsByTagName(sy.tagName);if(ei.length>0){if(ei.length>1)throw Error("Expecting 1 or 0 "+sy.tagName+" but finding "+ei.length+"!");let e=new sy(es(ei[0]));h.setDensityOfStatesList(e);let s=t.addID(l,sy.tagName),n=U(s);T(t.addID(s,nx),r,null,n,sy.tagName,nh,ng);let a=ei[0].getElementsByTagName(sE.tagName),d=ei[0].getElementsByTagName(tB.tagName);if(d.length>0){if(d.length>1)throw Error("Expecting 1 or 0 "+tB.tagName+" but finding "+d.length+"!");let t=new tB(es(d[0]),Y(X(d[0])));e.setDescription(t)}if(0==a.length)throw Error("Expecting 1 or more "+sE.tagName+" but finding 0!");{let d=F(t.addID(s,nM),ng);H(d,sE.header),n.appendChild(d);for(let o=0;o<a.length;o++){let l=new sE(es(a[o]));e.addDensityOfStates(l);let r=q(t.addID(s,o),ng);n.appendChild(r);let g=a[o].getElementsByTagName(tA.tagName);if(1!=g.length)throw Error("Expecting 1 "+tA.tagName+" but finding "+g.length+"!");{let e=new tA(es(g[0]),new(f(p))(Y(X(g[0]))));l.setT(e)}let h=a[o].getElementsByTagName(sN.tagName);if(1!=h.length)throw Error("Expecting 1 "+sN.tagName+" but finding "+h.length+"!");{let e=new sN(es(h[0]),new(f(p))(Y(X(h[0]))));l.setQtot(e)}let c=a[o].getElementsByTagName(sx.tagName);if(1!=c.length)throw Error("Expecting 1 "+sx.tagName+" but finding "+c.length+"!");{let e=new sx(es(c[0]),new(f(p))(Y(X(c[0]))));l.setSumc(e)}let m=a[o].getElementsByTagName(sv.tagName);if(1!=m.length)throw Error("Expecting 1 "+sv.tagName+" but finding "+m.length+"!");{let e=new sv(es(m[0]),new(f(p))(Y(X(m[0]))));l.setSumg(e)}H(d,l.toStringArray())}am(e.toCSV,n,d,h.getID()+"_"+sy.tagName,ng)}m.delete(sy.tagName)}let en=sc.tagName,ea=o[e].getElementsByTagName(en);if(ea.length>0){let e;if(ea.length>1)throw Error("Expecting 1 or 0 "+en+" but finding "+ea.length+"!");let s=new sc(es(ea[0])),n=t.addID(l,sc.tagName),a=U(n);T(t.addID(n,nx),r,null,a,en,nh,ng);let d=sh.tagName,o=ea[0].getElementsByTagName(d);if(0==o.length)throw Error("Expecting 1 or more "+d+" but finding 0!");{e=[];let d=F(t.addID(n,nM),ng);H(d,s.getHeader());for(let t=0;t<o.length;t++){let s=new sh(es(o[t]));e.push(s),H(d,s.toStringArray())}a.appendChild(d),s.init(e),am(s.toCSV.bind(s),a,d,t.addID(h.getID(),sc.tagName),ng)}h.setThermoTable(s),m.delete(d),m.delete(en)}let ed=o[e].getElementsByTagName(sf.tagName);if(ed.length>0)for(let e=0;e<ed.length;e++){let s=new sf(es(ed[e])),n=t.addID(l,sf.tagName,e),a=U(n);T(t.addID(n,nx),r,null,a,sf.tagName,nh,ng);let d=ed[e].getElementsByTagName(sl.tagName);if(d.length>0){if(1!=d.length)throw Error("Expecting only 1 bondRef, but there are "+d.length);let e=h.getBonds().getBondIds(),s=new sl(es(d[0]),Y(X(d[0]))),o=G(sl.tagName,e,sl.tagName,s.value,t.addID(n,sl.tagName),nh,ng);o.getElementsByTagName("select")[0].classList.add(tU.tagName),a.appendChild(o)}let o=ed[e].getElementsByTagName(sm.tagName);if(o.length>0){if(1!=o.length)throw Error("Expecting only 1 HinderedRotorPotential, but there are "+o.length);let e=es(o[0]),d=new sm(e),l=t.addID(n,sm.tagName),g=U(l);T(t.addID(l,nx),a,null,g,sm.tagName,nh,ng);let h=G(sm.s_format,sm.formats,sm.tagName,d.getFormat(),t.addID(l,sm.s_format),nh,ng);g.appendChild(h),aa(tL.energyUnits,e,g,h,t.addID(l,sm.s_units),sm.tagName,nh,ng);let c=d.getExpansionSize()??nz;g.appendChild(z("text",t.addID(l,sm.s_expansionSize),nh,ng,e=>{let t=e.target;try{console.log("Setting "+sm.s_expansionSize+" to "+t.value),d.setExpansionSize(new(f(p))(t.value))}catch(e){alert("Invalid value, resetting..."),t.value=d.getExpansionSize()??nz}L(t)},c,sm.s_expansionSize)),function(e,t,s,n){e.addID(t.id,sm.s_useSineTerms);let a=sm.s_useSineTerms+nu,d=sm.s_useSineTerms+nm,o=O(d,void 0,n);t.appendChild(o),o.classList.add(ny),o.classList.add(nw),!0==s.getUseSineTerms()?(o.textContent=a,o.classList.toggle(nw)):(o.textContent=d,o.classList.toggle(ny)),o.addEventListener("click",e=>{!1==s.getUseSineTerms()?(s.setUseSineTerms(!0),o.textContent=a):(s.setUseSineTerms(!1),o.textContent=d),o.classList.toggle(ny),o.classList.toggle(nw)})}(t,g,d,ng);let m=t.addID(l,sr.tagName),u=U(m),N=T(t.addID(m,nx),r,null,u,"PotentialPoints",nh,ng);g.appendChild(N);let x=[],v=o[0].getElementsByTagName(sr.tagName);for(let e=0;e<v.length;e++){let s=new sr(es(v[e]));x.push(s);let n=t.addID(m,e),a=q(n,ng);u.appendChild(a);let d=V(sr.tagName+" "+e,nh);a.appendChild(d);let o=s.getAngle()??nz,l=z("text",t.addID(n,sr.s_angle),nh,nh,e=>{let t=e.target;if(w(t.value)){let e=new(f(p))(t.value);s.setAngle(e)}else alert("Angle input is not a number, resetting..."),t.value=s.getAngle()??nz;L(t)},o,sr.s_angle);a.appendChild(l);let r=V(sr.s_potential,nh);a.appendChild(r);let g=D("text",t.addID(n,sr.s_potential),nh);a.appendChild(g);let h=s.getPotential()??nz;g.addEventListener("change",e=>{let t=e.target;if(w(t.value)){let e=new(f(p))(t.value);s.setPotential(e),console.log("Set "+sr.tagName+" to "+e.toExponential())}else alert("Potential input is not a number, resetting..."),g.value=s.getPotential()??nz;L(g)}),g.value=h,L(g)}d.setPotentialPoints(x),s.setHinderedRotorPotential(d)}let g=ed[e].getElementsByTagName(su.tagName);if(g.length>0){if(1!=g.length)throw Error("Expecting only 1 Periodicity, but there are "+g.length);let e=Y(X(g[0])),d=new su(es(g[0]),new(f(p))(e));s.setPeriodicity(d);let o=z("text",t.addID(n,su.tagName),nh,ng,t=>{let n=t.target;if(w(e=n.value)){let t=new(f(p))(e);d.value=t,s.getPeriodicity().value=t,console.log("Set "+su.tagName+" to "+t)}else alert("Periodicity input is not a number, resetting..."),n.value=d.value.toExponential()},e,su.tagName);a.appendChild(o)}h.setExtraDOSCMethod(e,s),m.delete(sf.tagName)}m.delete(sp.tagName);let eo=o[e].getElementsByTagName(sp.tagName);if(eo.length>0){if(1!=eo.length)throw Error("Expecting only 1 reservoirSize, but there are "+eo.length);let e=Y(X(eo[0])),t=new(f(p))(e),s=new sp(es(eo[0]),t);h.setReservoirSize(s);let n=z("number",h.getID()+"_"+sp.tagName,nh,ng,e=>{let t=e.target;s.value=new(f(p))(t.value),L(t)},e,sp.tagName);r.appendChild(n)}let el=o[e].getElementsByTagName(sw.tagName),er=t.addID(l,sR.tagName),eg=U(er);if(T(t.addID(er,nx),r,null,eg,sw.tagName,nh,ng),el.length>0){if(el.length>1)throw Error("Expecting 1 or 0 "+sw.tagName+" but finding "+el.length+"!");let e=new sw(es(el[0])),t=el[0].getElementsByTagName(sR.tagName);for(let s=0;s<t.length;s++){let n=new sR(es(t[s]),s);e.addState(n)}h.setStates(e),m.delete(sR.tagName)}m.delete("#text"),m.size>0&&(console.warn("There are additional unexpected moleculeTagNames:"),m.forEach(e=>console.warn(e))),ai(r,ng,()=>{sF(n,c,t,s,l,h)})}let r=sC(n,t,s);return s_(n,r,t,s),n}(r,s,h),tI.tagName,nh,nr);let I=document.getElementById(nq),_=nA(tz.tagName);nk(_),T(_,I,null,function(e,t,s,n,a){let d=x(s,S),o=document.querySelector(d),l=U(void 0,nh),r=ei(e,tz.tagName),g=new Set;if(r.childNodes.forEach(function(e){g.add(e.nodeName)}),g.size>0){if(1!=g.size&&!(2==g.size&&g.has("#text")))throw console.error("reactionListTagNames:"),g.forEach(e=>console.error(e)),Error("Additional tag names in reactionList:");if(!g.has(iR.tagName))throw Error('Expecting tags with "'+iR.tagName+'" tagName but there are none!');let e=r.getElementsByTagName(iR.tagName);console.log("Number of reactions="+e.length);for(let s=0;s<e.length;s++){let d=new iR(es(e[s]));n.set(d.id,d);let r=new Set,g=e[s].childNodes,h=nA(iR.tagName,s),c=U(h);for(let e=0;e<g.length;e++){let t=g[e];r.has(t.nodeName)?"#text"!=t.nodeName&&console.warn("Another ChildNode with nodeName="+t.nodeName):r.add(t.nodeName)}let m=e[s].getElementsByTagName(id.tagName);r.delete(id.tagName);let u=t.addID(h,id.tagName),N=U(u);T(x(u,nx),c,null,N,nb,nh,ng);let E=new Map;if(m.length>0){for(let e=0;e<m.length;e++){let s=x(u,id.tagName,e),n=q(s);N.appendChild(n);let a=new ia(es(j(m[e],sb.tagName))),d=new id(es(m[e]),a);E.set(a.getRef(),d);let o=G(a.getRef()+" role",id.roleOptions,"Role",a.getRole(),t.addID(s,M),nh,ng);o.querySelector("select")?.addEventListener("change",e=>{let t=e.target;a.setRole(t.value),console.log("Set Role to "+t.value),B(t)}),n.appendChild(o),ai(n,nh,()=>{N.removeChild(n),t.removeIDs(s),E.delete(a.getRef())})}d.setReactants(E)}iC(d,o,t,h,N,a,E);let y=e[s].getElementsByTagName(io.tagName);r.delete(io.tagName);let w=t.addID(h,io.tagName),R=q(w);T(x(w,nx),c,null,R,nR,nh,ng);let b=new Map;if(y.length>0){for(let e=0;e<y.length;e++){let s=new ia(es(j(y[e],sb.tagName))),n=new io(es(y[e]),s);b.set(s.getRef(),n);let a=G(s.getRef()+" role",io.roleOptions,s.getRole(),s.getRef(),t.addID(w,e,"Role"),nh,ng),d=a.querySelector("select");d.value=s.getRole(),d.addEventListener("change",e=>{let t=e.target;s.setRole(t.value),console.log("Set Role to "+t.value),B(t)}),B(d),R.appendChild(a),ai(R,nh,()=>{R.removeChild(a),t.removeIDs(w),b.delete(s.getRef())})}d.setProducts(b)}iS(d,o,t,h,R,a,b);let C=T(nA(h,nx),l,null,c,d.getLabel(),nh,ng),S=e[s].getElementsByTagName(ip.tagName);if(S.length>0){if(S.length>1)throw Error("Expecting 1 "+ip.tagName+" but finding "+S.length+"!");let e=new ip(es(S[0]));d.setTunneling(e);let t=G(ip.tagName,ip.options,"Tunneling",e.getName(),nA(h,ip.tagName),nh,ng);t.querySelector("select")?.addEventListener("change",t=>{let s=t.target;e.setName(s.value),console.log("Set Tunneling to "+s.value),B(s)}),c.appendChild(t)}let I=e[s].getElementsByTagName(il.tagName),D=nA(h,il.tagName),_=U(D);T(nA(D,nx),c,null,_,nT,nh,ng);let P=new Map;if(I.length>0){for(let e=0;e<I.length;e++){let t=new ia(es(j(I[e],sb.tagName))),s=new il(es(I[e]),t);P.set(t.getRef(),s);let n=V(t.getRef()+" role "+il.role,ng);_.appendChild(n)}d.setTransitionStates(P)}iM(t,h,_,a,P);let A=e[s].getElementsByTagName(im.tagName);if(A.length>0){if(A.length>1)throw Error("Expecting 1 "+im.tagName+" but finding "+A.length+"!");{let e;let t=es(A[0]),s=t.get("xsi:type");void 0==s&&(s=t.get("name"));let n=nA(h,im.tagName),a=U(n);if(s==iu.xsiType||s==iu.xsiType2){let s=T(nA(n,nx),c,null,a,im.tagName,nh,ng);c.appendChild(s),e=new iu(t);let d=A[0].getElementsByTagName(ir.tagName);if(null!=d&&null!=d[0]){let t=$(d[0]),s=new(f(p))(t),o=es(d[0]),l=new ir(o,s);e.setPreExponential(l);let r=z("number",nA(n,ir.tagName,nE),nh,ng,e=>{au(l,e.target)},t,ir.tagName);a.appendChild(r);let g=r.querySelector("input");g.value=t,L(g),g.addEventListener("change",e=>{t=e.target.value,l.value=new(f(p))(t),console.log(ir.tagName+" changed to "+t),L(g)}),aa(void 0,o,r,null,nA(n,ir.tagName),ir.tagName,nh,nh),a.appendChild(r)}let o=A[0].getElementsByTagName(ig.tagName);if(null!=o&&null!=o[0]){let t=$(o[0]),s=new(f(p))(t),d=es(o[0]),l=new ig(d,s);e.setActivationEnergy(l);let r=z("number",nA(n,ig.tagName,nE),nh,ng,e=>{au(l,e.target)},t,ig.tagName),g=r.querySelector("input");g.value=t,L(g),g.addEventListener("change",e=>{t=e.target.value,l.value=new(f(p))(t),console.log(ig.tagName+" changed to "+t),L(g)}),aa(void 0,d,r,null,nA(n,ig.tagName),ig.tagName,nh,nh),a.appendChild(r)}let l=A[0].getElementsByTagName(ih.tagName);if(null!=l&&null!=l[0]){let t=$(l[0]),s=new(f(p))(t),d=es(l[0]),o=new ih(d,s);e.setTInfinity(o);let r=z("number",nA(n,ih.tagName,nE),nh,ng,e=>{au(o,e.target)},t,ih.tagName),g=r.querySelector("input");g.value=t,L(g),g.addEventListener("change",e=>{t=e.target.value,o.value=new(f(p))(t),console.log(ih.tagName+" changed to "+t),L(g)}),aa(void 0,d,r,null,nA(n,ih.tagName),ih.tagName,nh,nh),a.appendChild(r)}let r=A[0].getElementsByTagName(ic.tagName);if(null!=r&&null!=r[0]){let t=$(r[0]),s=new(f(p))(t),d=es(r[0]),o=new ic(d,s);e.setNInfinity(o);let l=z("number",nA(n,ic.tagName,nE),nh,ng,e=>{au(o,e.target)},t,ic.tagName);a.appendChild(l);let g=l.querySelector("input");g.value=t,L(g),g.addEventListener("change",e=>{t=e.target.value,o.value=new(f(p))(t),console.log(ic.tagName+" set to "+t),L(g)}),aa(void 0,d,l,null,nA(n,ic.tagName),ic.tagName,nh,nh),a.appendChild(l)}}else{e=new im(t);let n=document.createElement("label");n.textContent=im.tagName+": "+s,Object.assign(n.style,ng),a.appendChild(n),c.appendChild(a)}d.setMCRCMethod(e)}}let k=e[s].getElementsByTagName(iN.tagName);if(k.length>0){if(k.length>1)throw Error("Expecting 1 "+iN.tagName+" but finding "+k.length+"!");let e=new(f(p))(Y(X(k[0]))),t=new iN(es(k[0]),e);d.setExcessReactantConc(t);let s=z("number",nA(h,iN.tagName),nh,ng,e=>{au(t,e.target)},e.toExponential(),iN.tagName);c.appendChild(s)}let O=e[s].getElementsByTagName(iw.tagName);if(O.length>0){if(O.length>1)throw Error("Expecting 1 "+iw.tagName+" but finding "+O.length+"!");let e=es(O[0]),t=new iw(e);d.setCanonicalRateList(t);let s=nA(h,iw.tagName),n=U(s),a=T(nA(s,nx),c,null,n,iw.tagName,nh,ng);c.appendChild(a);let o=O[0].getElementsByTagName(tB.tagName);if(o.length>0){if(o.length>1)throw Error("Expecting 1 "+tB.tagName+" but finding "+o.length+"!");let s=Y(X(o[0]));t.setDescription(new tB(es(o[0]),s));let a=V(s+" ("+v(e)+")",nh),d=U(void 0,ng);d.appendChild(a),n.appendChild(d)}let l=O[0].getElementsByTagName(iy.tagName);if(l.length>0){let e=F(nA(s,iy.tagName,nM),ng);n.appendChild(e);for(let s=0;s<l.length;s++){let n=new iy(es(l[s]));t.addKinf(n);let a=l[s].getElementsByTagName(tA.tagName);if(a.length>0){if(a.length>1)throw Error("Expecting 1 "+tA.tagName+" but finding "+a.length+"!");let e=new(f(p))(Y(X(a[0])));n.setT(new tA(es(a[0]),e))}let d=l[s].getElementsByTagName(ix.tagName);if(d.length>0){if(d.length>1)throw Error("Expecting 1 "+ix.tagName+" but finding "+d.length+"!");let e=new(f(p))(Y(X(d[0])));n.setVal(new ix(es(d[0]),e))}let o=l[s].getElementsByTagName(iv.tagName);if(o.length>0){if(o.length>1)throw Error("Expecting 1 "+iv.tagName+" but finding "+o.length+"!");let e=new(f(p))(Y(X(o[0])));n.setRev(new iv(es(o[0]),e))}let r=l[s].getElementsByTagName(iE.tagName);if(r.length>0){if(r.length>1)throw Error("Expecting 1 "+iE.tagName+" but finding "+r.length+"!");let e=new(f(p))(Y(X(r[0])));n.setKeq(new iE(es(r[0]),e))}0==s&&H(e,n.getHeader()),H(e,n.toStringArray())}am(t.toCSV.bind(t),n,e,d.id+"_"+iw.tagName,ng)}}ai(c,ng,()=>{iT(l,C,t,h,n,d)})}}else console.warn("No reaction elements found! Please add a reaction in reactionList.");return ib(t,l,n,a),l}(r,n,_,c,h),tz.tagName,nh,nr);let P=document.getElementById(nV),A=nA(n0);null!=u&&(u.close(),u=null),nk(A);let k=U(A,ng);T(A,P,null,k,n0,nh,nr),no(k,n2,400,t,n3,4,2,u,h,c,!0);let K=document.getElementById(nF),W=nA(eE.tagName);nk(W),T(W,K,null,function(e,t,s){console.log(eE.tagName);let n=U(void 0,nh),a=e.getElementsByTagName(eE.tagName);for(let e=0;e<a.length;e++){let d=a[e],o=nA(eE.tagName,e.toString()),r=U(o,nh),g=nA(o,nx);T(g,n,null,r,eE.tagName+" "+e.toString(),nh,ng);let h=i_(es(d),e);iI(h,r,d,t,s),iz(h,r,d,t,s),ai(r,ng,l.removeConditions.bind(l),e).addEventListener("click",e=>{nk(g),t.removeIDs(o)})}return iD(n,t,s),n}(r,a,h),"ConditionsList",nh,nr);let Z=document.getElementById(nH),Q=nA(tM.tagName,"list");nk(Q),T(Q,Z,null,function(e,t){console.log(tM.tagName);let s=U(void 0,nh),n=e.getElementsByTagName(tM.tagName);for(let e=0;e<n.length;e++){let a=t.addID(tM.tagName,e.toString()),d=U(a,nh),o=t.addID(a,nx);T(o,s,null,d,tM.tagName+" "+e.toString(),nh,ng);let r=iX(es(n[e]),e);(function(e,t,s,n){let a,d,o=tR.tagName,l=q(n.addID(s.id,o),ng);s.appendChild(l);let r=o+nu,g=o+nm,h=O(o,n.addID(s.id,o,S),nh);h.classList.add(ny),h.classList.add(nw),l.appendChild(h);let c=n.addID(s.id,o,nE);if(null!=t){let s=t.getElementsByTagName(o);if(1==s.length){d=Y(X(s[0]));let t=new(f(p))(Number(d));a=new tR(es(s[0]),t),h.textContent=r,iK(e,l,a,c,d,e.setGrainSize,tL.energyUnits),h.classList.toggle(nw)}else a=iY(o),h.textContent=g,h.classList.toggle(ny)}else a=iY(o),h.textContent=g,h.classList.toggle(ny);h.addEventListener("click",()=>{e.index.has(tR.tagName)?(e.removeGrainSize(),document.getElementById(c)?.remove(),document.getElementById(x(c,nD))?.remove(),h.textContent=g):(iK(e,l,a,c,d,e.setGrainSize,tL.energyUnits),h.textContent=r),h.classList.toggle(ny),h.classList.toggle(nw)})})(r,n[e],d,t),i$(r,t,n[e],d,tc,r.setAutomaticallySetMaxEne,r.removeAutomaticallySetMaxEne.bind(r)),i$(r,t,n[e],d,tC,r.setEnergyAboveTheTopHill,r.removeEnergyAboveTheTopHill.bind(r)),i$(r,t,n[e],d,tS,r.setMaxTemperature,r.removeMaxTemperature.bind(r)),ai(d,ng,l.removeModelParameters.bind(l),e).addEventListener("click",e=>{nk(o),t.removeIDs(a)})}return iW(s,t),s}(r,d),"ModelParametersList",nh,nr);let J=document.getElementById(nj),ee=nA(tf.tagName);if(nk(ee),T(ee,J,null,function(e,t){console.log(tf.tagName);let s=U(void 0,nh),n=e.getElementsByTagName(tf.tagName);for(let e=0;e<n.length;e++){let a=n[e],d=t.addID(tf.tagName,e.toString()),o=U(d,nh);s.appendChild(o);let r=t.addID(d,nx);T(r,s,null,o,tf.tagName+" "+e.toString(),nh,ng);let g=i0(es(a),e),h=new Map;iZ(g).forEach(e=>{i2(g,o,t,h,a,null,e.class,e.setMethod,e.removeMethod)});let c=q(void 0,ng);if(new Map([...h.entries()].sort()).forEach(e=>{c.appendChild(e)}),o.appendChild(c),i5(g,o,t,null,ng),i3(g,o,t,a,ng),iQ(g).forEach(e=>{i2(g,o,t,h,a,ng,e.class,e.setMethod,e.removeMethod,!0)}),1==a.getElementsByTagName(eU.tagName).length){let e=new eU;g.setForceMacroDetailedBalance(e);let s=q(t.addID(d,eU.tagName),ng);o.appendChild(s);let n=V(eU.tagName,nh);s.appendChild(n)}ai(o,ng,l.removeControl.bind(l),e).addEventListener("click",e=>{nk(r),t.removeIDs(d);let s=x(d,eV.tagName);t.removeIDs(s);let n=x(s,"details");t.removeIDs(n);let a=x(n,"select");t.removeIDs(a)})}return iJ(s,t),s}(r,o),"ControlList",nh,nr),r.getElementsByTagName(tw.tagName).length>0){let e=document.getElementById(nX),t=nA(tw.tagName);nk(t),T(t,e,null,function(e){console.log(tw.tagName);let t=U(nA(tw.tagName,0),nh),s=e.getElementsByTagName(tw.tagName);if(s.length>0){s.length>1&&console.warn("More than one MetadataList element - showing the last.");let e=new tw(es(s[s.length-1]));function n(n,a,d){let o=s[s.length-1].getElementsByTagName(n);if(o.length>0){if(1==o.length){let s=X(o[0])?.nodeValue??"",n=new a(es(o[0]),s),l=U(void 0,ng);t.appendChild(l),l.appendChild(V(n.tagName+" "+s,nh)),d.call(e,n)}else throw Error(`More than one ${n} element.`)}}l.setMetadataList(e),n(tx.tagName,tx,e.setSource),n(tv.tagName,tv,e.setCreator),n(tE.tagName,tE,e.setDate),n(ty.tagName,ty,e.setContributor)}return t}(r),tw.tagName,nh,nr)}if(r.getElementsByTagName(ec.tagName).length>0){let e=document.getElementById(nY),t=nA(ec.tagName);nk(t),T(t,e,null,function(e){console.log(ec.tagName);let t=nA(ec.tagName,0),s=U(t,nh),n=e.getElementsByTagName(ec.tagName);if(n.length>0){if(n.length>1)throw Error("More than one Analysis element.");let e=new ec(es(n[0]));l.setAnalysis(e);let a=n[0].getElementsByTagName(tB.tagName);if(a.length>0){if(1==a.length){let n=X(a[0])?.nodeValue??"",d=new tB(es(a[0]),n),o=U(nA(t,tB.tagName),ng);s.appendChild(o),o.appendChild(V(d.tagName+" "+n,nh)),e.setDescription(d)}else throw Error("More than one Description element.")}let d=n[0].getElementsByTagName(ea.tagName),o=nA(t,ea.tagName),r=U(o,ng);if(T(o,s,null,r,ea.tagName+"s",nh,ng),d.length>0)for(let t=0;t<d.length;t++){let s=es(d[t]),n=new ea(s),a=n.tagName+" "+t.toString()+" "+v(s),l=nA(r.id,t.toString()),g=U(o,ng);T(l,r,null,g,a,nh,nr),e.addEigenvalueList(n);let h=[],c=d[t].getElementsByTagName(en.tagName);if(c.length>0)for(let e=0;e<c.length;e++){let t=new p.Big(X(c[e])?.nodeValue);h.push(t),n.addEigenvalue(new en(es(c[e]),t))}g.appendChild(V(E(h,", "),nh))}let g=n[0].getElementsByTagName(el.tagName),h=nA(t,el.tagName),c=U(h,ng);if(T(h,s,null,c,el.tagName+"s",nh,ng),g.length>0)for(let t=0;t<g.length;t++){let n=es(g[t]);void 0!=n.get("T")&&new p.Big(n.get("T")),void 0!=n.get("conc")&&new p.Big(n.get("conc"));let a=new el(n),d=a.tagName+" "+t.toString()+" "+v(n),o=nA(s.id,el.tagName,t.toString()),l=nA(o,t.toString()),r=U(o,ng);T(l,c,null,r,d,nh,nr),e.addPopulationList(a);let h=new Map,u=[];u.push("time");let f=g[t].getElementsByTagName(eo.tagName);if(f.length>0)for(let e=0;e<f.length;e++){let t=es(f[e]),s=new eo(t,[]);a.addPopulation(s);let n=void 0!=t.get("time")?new p.Big(t.get("time")):nK,d=new Map;h.set(n,d);let o=f[e].getElementsByTagName(ed.tagName);if(o.length>0)for(let t=0;t<o.length;t++){let n=es(o[t]),a=n.get("ref");0==e&&u.push(a);let l=new p.Big(X(o[t])?.nodeValue),r=new ed(n,l);s.addPop(r),d.set(a,l)}}let N=U(nA(l,"graph"),nh);r.appendChild(N);let x=document.createElement("canvas");N.appendChild(x);let E=new ao(x,h,"2em SensSerif");m.push(E),ac(x,r,N,d);let y=U(nA(l,nM),nh);r.appendChild(y);let w=F(nA(o,nM),nh);H(w,u),h.forEach((e,t)=>{let s=[];s.push(t.toString()),e.forEach((e,t)=>{s.push(e.toString())}),H(w,s)}),y.appendChild(w),am(()=>al(w),r,y,d,nh)}let u=n[0].getElementsByTagName(eh.tagName),f=nA(t,eh.tagName),N=U(f,ng);if(T(f,s,null,N,eh.tagName+"s",nh,ng),u.length>0){let t=U(nA(f,nM),nh);N.appendChild(t);let s=F(nA(h,nM),nh),n=["T","conc"];for(let t=0;t<u.length;t++){let a=es(u[t]),d=[];d.push(a.get("T")),d.push(a.get("conc"));let o=new eh(a);e.addRateList(o);let l=u[t].getElementsByTagName(eg.tagName);if(l.length>0)for(let e=0;e<l.length;e++){let s=es(l[e]);if(0==t){let e=s.get("fromRef"),t=s.get("toRef");n.push(e+"->"+t)}let a=(X(l[e])?.nodeValue??"").trim();d.push(a);let r=new eg(s,new p.Big(a));o.addFirstOrderRate(r)}let r=u[t].getElementsByTagName(er.tagName);if(r.length>0)for(let e=0;e<r.length;e++){let s=es(r[e]);0==t&&Array.from(s.values()).forEach(e=>{n.push("loss of "+e)});let a=(X(r[e])?.nodeValue??"").trim();d.push(a);let l=new er(s,new p.Big(a));o.addFirstOrderLoss(l)}0==t&&H(s,n),H(s,d)}t.appendChild(s),am(()=>al(s),N,t,"Bartis-Widom Phenomenological Rate Coefficients",nh)}}return s}(r),ec.tagName,nh,nr)}}(new DOMParser().parseFromString(R,"text/xml"))}}};let b=g.slice(y,y+1048576);N.readAsText(b),y+=1048576}},r.click()}}),N.appendChild(C),_=O(I="Load Into Library",nB(I),nh),N.appendChild(_),P=new sW,_.addEventListener("click",async e=>{let t=await P.readFile();void 0==g&&(g=new Map),t.forEach((e,t)=>{nZ(!1,e,g)})}),k=O(A="Clear Library",nB(A),nh),N.appendChild(k),k.addEventListener("click",async e=>{g=new Map}),(W=O(K="Load Defaults",nB(K),nh)).addEventListener("click",e=>{r.readFile()}),N.appendChild(W),(Q=O(Z="Save",nB(Z),nh)).addEventListener("click",ag),N.appendChild(Q),ee=O(J="Restart",nB(J),nh),N.appendChild(ee),ee.addEventListener("click",e=>{confirm("Any unsaved changes will be lost. Select OK to continue loading or Cancel to cancel.")&&n4()}),n4()});class ao{constructor(e,t,s){this.canvas=e,this.data=t,this.draw(s)}draw(e){this.canvas.width=800,this.canvas.height=400;let t=this.canvas.getContext("2d");t.font=e,t.clearRect(0,0,this.canvas.width,this.canvas.height);let s=this.canvas.width,n=this.canvas.height,a=Number.MAX_VALUE,d=Number.MIN_VALUE,o=0;this.data.forEach((e,s)=>{let n=Math.log10(s.toNumber());a=Math.min(a,n),d=Math.max(d,n),e.forEach((e,s)=>{o=Math.max(o,t.measureText(s).width)})});let l=0;for(let e=0;e<2;e++){let s=1-1*e;l=Math.max(l,t.measureText(s.toString()).width)}let r=t.measureText("0"),g=r.actualBoundingBoxAscent+r.actualBoundingBoxDescent,h=4*g,c=l+g+20,m=n-(c+3*g),u=s-(h+o+20),f=(u-c)/(d-a),p=(h-m)/1;t.beginPath(),t.moveTo(c,m),t.lineTo(u,m),t.stroke(),t.beginPath(),t.moveTo(c,m),t.lineTo(c,h),t.stroke();let N=["red","green","blue","orange","purple","grey","cyan","magenta","lightblue","lightgreen","pink","yellow","brown","black"],x=new Map;this.data.forEach((e,s)=>{let n=0;e.forEach((e,d)=>{let o=c+(Math.log10(s.toNumber())-a)*f,l=e.toNumber();if(l<1){let e=m+(l-0)*p;if(e>0){t.beginPath(),t.arc(o,e,2,0,2*Math.PI);let s=N[n%N.length];x.set(d,s),t.fillStyle=s,t.fill()}}n++})}),t.textAlign="center",t.textBaseline="top",t.fillStyle="black",t.fillText("log10(time/secs)",c+(u-c)/2,m+h/2),t.save(),t.rotate(-Math.PI/2),t.textAlign="center",t.textBaseline="top",t.fillText("fractional population",-m-(h-m)/2,c-c),t.restore();let v=d-a,E=Math.abs(Math.ceil(v/Math.pow(10,Math.floor(Math.log10(v))))),y=Math.ceil(a/E),w=y*E;for(;w<d;){let e=c+(w-a)*f;t.beginPath(),t.moveTo(e,m),t.lineTo(e,m+5),t.stroke(),t.fillText(w.toString(),e,m+5),w+=E}for(let e=0;e<2;e++){let s=m-1*e;t.beginPath(),t.moveTo(c,s),t.lineTo(c-5,s),t.stroke()}let R=0;x.forEach((e,s)=>{let n=t.measureText(s),a=n.actualBoundingBoxAscent+n.actualBoundingBoxDescent;R=Math.max(R,a)});let b=u+20,C=R;y=0,x.forEach((e,s)=>{let n=h+y*C;t.fillStyle=e,t.fillRect(b,n,R/2,R/2),t.fillStyle="black",t.fillText(s,b+g+t.measureText(s).width/2,n-R/2),y++})}}function al(e){let t="",s=e.rows;for(let e=0;e<s.length;e++){let n=s[e].cells;for(let e=0;e<n.length;e++)t+=n[e].textContent,e<n.length-1&&(t+=",");t+="\n"}return t}function ar(e,t,s,n=!1){let a=document.createElement("a");a.href=n?e:`data:${t};charset=utf-8,`+encodeURIComponent(e),a.download=s,document.body.appendChild(a),a.click(),document.body.removeChild(a)}function ag(){if(null==l){alert("No Mesmer object to save.");return}{let e=new tL(l.attributes);e.setTitle(l.getTitle()),void 0!=h&&e.setMoleculeList(new tI(new Map,Array.from(h.values()))),void 0!=c&&e.setReactionList(new tz(new Map,Array.from(c.values()))),void 0!=l.getConditionss()&&e.setConditionss(l.getConditionss()),void 0!=l.getModelParameterss()&&e.setModelParameterss(l.getModelParameterss()),void 0!=l.getControls()&&e.setControls(l.getControls());let t=l.getMetadataList();void 0!=t&&e.setMetadataList(t);let s=l.getAnalysis();void 0!=s&&e.setAnalysis(s),console.log("saveXML"),ar(tL.header+e.toXML("  ",""),"text/xml",ah(e.getTitle()?.value)+".xml")}}function ah(e){return e.replace(/[^a-z0-9]/gi,"_")}function ac(e,t,s,n){let a=O("Save as PNG",nA(t.id,"saveButton"),nh);null!=s?t.insertBefore(a,s):t.appendChild(a),a.addEventListener("click",()=>{ar(e.toDataURL(),"image/png",ah(l.getTitle()?.value+"_"+n)+".png",!0)})}function am(e,t,s,n,a){let d=O("Save as CSV",nA(t.id,S,nC),a);t.insertBefore(d,s),d.addEventListener("click",()=>{let t=e(),s=ah(l.getTitle()?.value+"_"+n)+".csv";ar(t,"text/csv",s),console.log("Saved "+s)})}function au(e,t){try{let s=new p.Big(t.value);e.value=s}catch(e){alert("Value invalid, resetting...")}t.value=e.value.toString()}
//# sourceMappingURL=index.3a5e2e60.js.map
