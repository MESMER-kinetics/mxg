let e,t,s,i,n,a,o;function d(e){return e&&e.__esModule?e.default:e}var r={};function l(e,t){if(!e.has(t))throw Error(`Key ${t} not found in map`);return e.get(t)}function g(...e){let t=e.map(e=>e.toString()).join("-").replace(/[^a-zA-Z-_0-9]/g,"_");return/^[0-9]|^--|-^[0-9]/.test(t)&&(t="_"+t),t}function h(e,t){return null==e?"":(void 0==t&&(t=", "),Array.from(e.entries()).map(([e,t])=>`${null==e?"null":e.toString()}(${null==t?"null":t.toString()})`).join(t))}function m(e,t){return void 0==t&&(t=", "),e.map(e=>null==e?"null":e.toString()).join(t)}function c(e){let t=[];for(let s=0;s<e.length;s++)t.push(new(d(r))(e[s]));return t}function u(e){try{return new(d(r))(e),!0}catch(e){return!1}}function N(e,t){return void 0==t&&(t=" "),e.map(e=>e.toString()).join(t)}function p(e,t){return null==e||e.lt(t)?t:e}function f(e,t){return null==e||e.gt(t)?t:e}!function(e){var t,s="[big.js] ",i=s+"Invalid ",n=i+"decimal places",a=i+"rounding mode",o=s+"Division by zero",d={},l=void 0,g=/^-?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i;function h(e,t,s,i){var n=e.c;if(s===l&&(s=e.constructor.RM),0!==s&&1!==s&&2!==s&&3!==s)throw Error(a);if(t<1)i=3===s&&(i||!!n[0])||0===t&&(1===s&&n[0]>=5||2===s&&(n[0]>5||5===n[0]&&(i||n[1]!==l))),n.length=1,i?(e.e=e.e-t+1,n[0]=1):n[0]=e.e=0;else if(t<n.length){if(i=1===s&&n[t]>=5||2===s&&(n[t]>5||5===n[t]&&(i||n[t+1]!==l||1&n[t-1]))||3===s&&(i||!!n[0]),n.length=t,i){for(;++n[--t]>9;)if(n[t]=0,0===t){++e.e,n.unshift(1);break}}for(t=n.length;!n[--t];)n.pop()}return e}function m(e,t,s){var i=e.e,n=e.c.join(""),a=n.length;if(t)n=n.charAt(0)+(a>1?"."+n.slice(1):"")+(i<0?"e":"e+")+i;else if(i<0){for(;++i;)n="0"+n;n="0."+n}else if(i>0){if(++i>a)for(i-=a;i--;)n+="0";else i<a&&(n=n.slice(0,i)+"."+n.slice(i))}else a>1&&(n=n.charAt(0)+"."+n.slice(1));return e.s<0&&s?"-"+n:n}d.abs=function(){var e=new this.constructor(this);return e.s=1,e},d.cmp=function(e){var t,s=this.c,i=(e=new this.constructor(e)).c,n=this.s,a=e.s,o=this.e,d=e.e;if(!s[0]||!i[0])return s[0]?n:i[0]?-a:0;if(n!=a)return n;if(t=n<0,o!=d)return o>d^t?1:-1;for(n=-1,a=(o=s.length)<(d=i.length)?o:d;++n<a;)if(s[n]!=i[n])return s[n]>i[n]^t?1:-1;return o==d?0:o>d^t?1:-1},d.div=function(e){var t=this.constructor,s=this.c,i=(e=new t(e)).c,a=this.s==e.s?1:-1,d=t.DP;if(d!==~~d||d<0||d>1e6)throw Error(n);if(!i[0])throw Error(o);if(!s[0])return e.s=a,e.c=[e.e=0],e;var r,g,m,c,u,N=i.slice(),p=r=i.length,f=s.length,x=s.slice(0,r),v=x.length,E=e,w=E.c=[],y=0,C=d+(E.e=this.e-e.e)+1;for(E.s=a,a=C<0?0:C,N.unshift(0);v++<r;)x.push(0);do{for(m=0;m<10;m++){if(r!=(v=x.length))c=r>v?1:-1;else for(u=-1,c=0;++u<r;)if(i[u]!=x[u]){c=i[u]>x[u]?1:-1;break}if(c<0){for(g=v==r?i:N;v;){if(x[--v]<g[v]){for(u=v;u&&!x[--u];)x[u]=9;--x[u],x[v]+=10}x[v]-=g[v]}for(;!x[0];)x.shift()}else break}w[y++]=c?m:++m,x[0]&&c?x[v]=s[p]||0:x=[s[p]]}while((p++<f||x[0]!==l)&&a--)return!w[0]&&1!=y&&(w.shift(),E.e--,C--),y>C&&h(E,C,t.RM,x[0]!==l),E},d.eq=function(e){return 0===this.cmp(e)},d.gt=function(e){return this.cmp(e)>0},d.gte=function(e){return this.cmp(e)>-1},d.lt=function(e){return 0>this.cmp(e)},d.lte=function(e){return 1>this.cmp(e)},d.minus=d.sub=function(e){var t,s,i,n,a=this.constructor,o=this.s,d=(e=new a(e)).s;if(o!=d)return e.s=-d,this.plus(e);var r=this.c.slice(),l=this.e,g=e.c,h=e.e;if(!r[0]||!g[0])return g[0]?e.s=-d:r[0]?e=new a(this):e.s=1,e;if(o=l-h){for((n=o<0)?(o=-o,i=r):(h=l,i=g),i.reverse(),d=o;d--;)i.push(0);i.reverse()}else for(s=((n=r.length<g.length)?r:g).length,o=d=0;d<s;d++)if(r[d]!=g[d]){n=r[d]<g[d];break}if(n&&(i=r,r=g,g=i,e.s=-e.s),(d=(s=g.length)-(t=r.length))>0)for(;d--;)r[t++]=0;for(d=t;s>o;){if(r[--s]<g[s]){for(t=s;t&&!r[--t];)r[t]=9;--r[t],r[s]+=10}r[s]-=g[s]}for(;0===r[--d];)r.pop();for(;0===r[0];)r.shift(),--h;return r[0]||(e.s=1,r=[h=0]),e.c=r,e.e=h,e},d.mod=function(e){var t,s=this,i=s.constructor,n=s.s,a=(e=new i(e)).s;if(!e.c[0])throw Error(o);return(s.s=e.s=1,t=1==e.cmp(s),s.s=n,e.s=a,t)?new i(s):(n=i.DP,a=i.RM,i.DP=i.RM=0,s=s.div(e),i.DP=n,i.RM=a,this.minus(s.times(e)))},d.neg=function(){var e=new this.constructor(this);return e.s=-e.s,e},d.plus=d.add=function(e){var t,s,i,n=this.constructor;if(e=new n(e),this.s!=e.s)return e.s=-e.s,this.minus(e);var a=this.e,o=this.c,d=e.e,r=e.c;if(!o[0]||!r[0])return r[0]||(o[0]?e=new n(this):e.s=this.s),e;if(o=o.slice(),t=a-d){for(t>0?(d=a,i=r):(t=-t,i=o),i.reverse();t--;)i.push(0);i.reverse()}for(o.length-r.length<0&&(i=r,r=o,o=i),t=r.length,s=0;t;o[t]%=10)s=(o[--t]=o[t]+r[t]+s)/10|0;for(s&&(o.unshift(s),++d),t=o.length;0===o[--t];)o.pop();return e.c=o,e.e=d,e},d.pow=function(e){var t=this,s=new t.constructor("1"),n=s,a=e<0;if(e!==~~e||e<-1e6||e>1e6)throw Error(i+"exponent");for(a&&(e=-e);1&e&&(n=n.times(t)),e>>=1;)t=t.times(t);return a?s.div(n):n},d.prec=function(e,t){if(e!==~~e||e<1||e>1e6)throw Error(i+"precision");return h(new this.constructor(this),e,t)},d.round=function(e,t){if(e===l)e=0;else if(e!==~~e||e<-1e6||e>1e6)throw Error(n);return h(new this.constructor(this),e+this.e+1,t)},d.sqrt=function(){var e,t,i,n=this.constructor,a=this.s,o=this.e,d=new n("0.5");if(!this.c[0])return new n(this);if(a<0)throw Error(s+"No square root");0===(a=Math.sqrt(this+""))||a===1/0?((t=this.c.join("")).length+o&1||(t+="0"),o=((o+1)/2|0)-(o<0||1&o),e=new n(((a=Math.sqrt(t))==1/0?"5e":(a=a.toExponential()).slice(0,a.indexOf("e")+1))+o)):e=new n(a+""),o=e.e+(n.DP+=4);do i=e,e=d.times(i.plus(this.div(i)));while(i.c.slice(0,o).join("")!==e.c.slice(0,o).join(""))return h(e,(n.DP-=4)+e.e+1,n.RM)},d.times=d.mul=function(e){var t,s=this.constructor,i=this.c,n=(e=new s(e)).c,a=i.length,o=n.length,d=this.e,r=e.e;if(e.s=this.s==e.s?1:-1,!i[0]||!n[0])return e.c=[e.e=0],e;for(e.e=d+r,a<o&&(t=i,i=n,n=t,r=a,a=o,o=r),t=Array(r=a+o);r--;)t[r]=0;for(d=o;d--;){for(o=0,r=a+d;r>d;)o=t[r]+n[d]*i[r-d-1]+o,t[r--]=o%10,o=o/10|0;t[r]=o}for(o?++e.e:t.shift(),d=t.length;!t[--d];)t.pop();return e.c=t,e},d.toExponential=function(e,t){var s=this,i=s.c[0];if(e!==l){if(e!==~~e||e<0||e>1e6)throw Error(n);for(s=h(new s.constructor(s),++e,t);s.c.length<e;)s.c.push(0)}return m(s,!0,!!i)},d.toFixed=function(e,t){var s=this,i=s.c[0];if(e!==l){if(e!==~~e||e<0||e>1e6)throw Error(n);for(s=h(new s.constructor(s),e+s.e+1,t),e=e+s.e+1;s.c.length<e;)s.c.push(0)}return m(s,!1,!!i)},d.toJSON=d.toString=function(){var e=this.constructor;return m(this,this.e<=e.NE||this.e>=e.PE,!!this.c[0])},d.toNumber=function(){var e=Number(m(this,!0,!0));if(!0===this.constructor.strict&&!this.eq(e.toString()))throw Error(s+"Imprecise conversion");return e},d.toPrecision=function(e,t){var s=this,n=s.constructor,a=s.c[0];if(e!==l){if(e!==~~e||e<1||e>1e6)throw Error(i+"precision");for(s=h(new n(s),e,t);s.c.length<e;)s.c.push(0)}return m(s,e<=s.e||s.e<=n.NE||s.e>=n.PE,!!a)},d.valueOf=function(){var e=this.constructor;if(!0===e.strict)throw Error(s+"valueOf disallowed");return m(this,this.e<=e.NE||this.e>=e.PE,!0)},(t=function e(){function t(s){if(!(this instanceof t))return s===l?e():new t(s);if(s instanceof t)this.s=s.s,this.e=s.e,this.c=s.c.slice();else{if("string"!=typeof s){if(!0===t.strict&&"bigint"!=typeof s)throw TypeError(i+"value");s=0===s&&1/s<0?"-0":String(s)}(function(e,t){var s,n,a;if(!g.test(t))throw Error(i+"number");for(e.s="-"==t.charAt(0)?(t=t.slice(1),-1):1,(s=t.indexOf("."))>-1&&(t=t.replace(".","")),(n=t.search(/e/i))>0?(s<0&&(s=n),s+=+t.slice(n+1),t=t.substring(0,n)):s<0&&(s=t.length),a=t.length,n=0;n<a&&"0"==t.charAt(n);)++n;if(n==a)e.c=[e.e=0];else{for(;a>0&&"0"==t.charAt(--a););for(e.e=s-n-1,e.c=[],s=0;n<=a;)e.c[s++]=+t.charAt(n++)}})(this,s)}this.constructor=t}return t.prototype=d,t.DP=20,t.RM=1,t.NE=-7,t.PE=21,t.strict=!1,t.roundDown=0,t.roundHalfUp=1,t.roundHalfEven=2,t.roundUp=3,t}()).default=t.Big=t,"function"==typeof define&&define.amd?define(function(){return t}):r?r=t:e.Big=t}(r);const x="button";function v(e,t){let s=document.getElementById(e);null!=s&&s.remove(),void 0!=t&&t.delete(e)}function E(e,t,s,i,n,a,o){let d=P(e,o),r=L(n+" ▼",g(e,x),a);return r.className="collapsible",r.addEventListener("click",function(){let e=r.textContent.split(" ");e[e.length-1]="▼"===e[e.length-1]?"▲":"▼",r.textContent=e.join(" ")}),d.appendChild(r),d.appendChild(i),null!=s?t.insertBefore(d,s):t.appendChild(d),r.removeEventListener("click",w),r.addEventListener("click",w),d}function w(){this.classList.toggle("active");let e=this.nextElementSibling;null!=e?e instanceof HTMLDivElement?"block"===e.style.display?e.style.display="none":e.style.display="block":console.log("toggleCollapsible: nextElementSibling is not an HTMLDivElement"):console.log("toggleCollapsible: nextElementSibling is null")}function y(e,t,s,i,n,a,o){let d;let r=I(void 0,i),l=((d=C(e,t,s)).onchange=n,d.value=a,T(d),d),g=B(o,s);return g.htmlFor=t,r.appendChild(g),r.appendChild(l),r}function C(e,t,s){let i=document.createElement("input");return i.type=e,i.id=t,Object.assign(i.style,s),i.style.fontSize="1em",i.classList.add("auto-width"),i}function b(e,t){let s=document.createElement("textarea");return s.id=e,Object.assign(s.style,t),s.style.fontSize="1em",s.classList.add("auto-width"),s}function S(e,t){let s="<"+t;if(e)for(let[t,i]of e)s+=" "+t+'="'+i+'"';return s+" />"}function T(e,t){void 0==t&&(t=4),e.style.width=e.value.length+t+"ch"}function M(e,t){void 0==t&&(t=6),e.style.width=e.value.length+t+"ch"}function z(e,t){void 0==t&&(t=6),e.style.width=e.value.length+t+"ch"}function _(e,t,s,i,n){let a=document.createElement("select");return e.forEach(e=>{a.name=t,a.id=i;let s=document.createElement("option");s.value=e,s.text=e,a.appendChild(s)}),a.value=s,a.style.fontSize="1em",a.classList.add("auto-width"),M(a),Object.assign(a.style,n),a}function R(e,t,s,i,n,a,o){let d=I(void 0,o),r=B(e,a);return r.htmlFor=n,d.appendChild(r),d.appendChild(_(t,s,i,n,a)),d}function L(e,t,s){let i=document.createElement("button");return i.textContent=e,void 0!=t&&(i.id=t),void 0!=s&&Object.assign(i.style,s),i.style.fontSize="1em",i}function P(e,t){let s=document.createElement("div");return void 0!=e&&(s.id=e),void 0!=t&&Object.assign(s.style,t),s}function I(e,t){let s=P(e,t);return s.style.display="flex",s.style.flexWrap="wrap",s}function B(e,t){let s=document.createElement("label");return Object.assign(s.style,t),s.textContent=e,s.style.fontSize="1em",s}function D(e,t){let s=document.createElement("table");return s.id=e,Object.assign(s.style,t),s}function A(e,t){let s=e.insertRow();return t.forEach(e=>{s.insertCell().textContent=e}),s}function k(e,t){let s=e.getElementsByTagName(t)[0];if(null==s)throw Error(t+" element not found");return s}function O(e){let t=e.childNodes;if(null==t)throw Error("Element has no childNodes");return t[0]}function G(e){let t=e.nodeValue;if(null==t)throw Error("nodeValue is null");return t}function F(e){let t=O(e);return t?G(t).trim():""}class q{constructor(e){this.tagName=e}toXML(e){let t=S(void 0,this.tagName);return e?"\n"+e+t:t}}class H extends q{constructor(e,t){super(t),this.attributes=e}toString(){let e=this.tagName+"(";return this.attributes&&this.attributes.forEach((t,s)=>{e+=`${s}(${t}), `}),e}toXML(e){let t="";for(let[s,i]of(void 0!=e&&(t+="\n"+e),t+="<"+this.tagName,this.attributes))t+=" "+s+'="'+i.toString()+'"';return t+" />"}}class V extends H{constructor(e,t,s){super(e,t),this.value=s}toString(){return super.toString()+`, ${this.value.toString()})`}toXML(e){return X(this.value.trim(),this.tagName,this.attributes,e,!1)}}class U extends H{constructor(e,t,s){super(e,t),this.value=s}toString(){return super.toString()+`, ${this.value.toString()})`}getValue(){return this.value}setValue(e){this.value=e}toXML(e){return X(this.value.toString(),this.tagName,this.attributes,e,!1)}}class j extends H{constructor(e,t,s,i){super(e,t),this.delimiter=" ",this.values=s,void 0!=i&&(this.delimiter=i)}getValues(){return this.values}setValues(e){this.values=e}toString(){return super.toString()+`, ${this.values.toString()})`}setDelimiter(e){this.delimiter=e}toXML(e){return X(N(this.values,this.delimiter),this.tagName,this.attributes,e,!1)}}class Y extends H{constructor(e,t){super(e,t),this.nodes=new Map}addNode(e){this.nodes.set(this.nodes.size,e)}toString(){let e=super.toString();return this.nodes.forEach((t,s)=>{e+=`, ${t.toString()}`}),e+")"}toXML(e,t){let s;void 0!=e&&void 0!=t&&(s=t+e);let i="";if(this.nodes.size>0)return this.nodes.forEach(t=>{void 0==t?console.warn("Node 0 is undefined this.nodes.size = "+this.nodes.size):t instanceof Y?i+=t.toXML(e,s):i+=t.toXML(s)}),X(i,this.tagName,this.attributes,t,!0);{let e=S(this.attributes,this.tagName);return void 0!=t?"\n"+t+e:e}}}function X(e,t,s,i,n){let a;return function(e,t,s){let i="";if(void 0!=s&&(i+="\n"+s),i+="<"+e,t)for(let[e,s]of t)i+=" "+e+'="'+s.toString()+'"';return i+">"}(t,s,i)+e+(a="",n&&void 0!=i&&(a+="\n"+i),a+"</"+t+">")}function $(e){let t=e.getAttributeNames(),s=new Map;return t.forEach(function(t){let i=e.getAttribute(t);null!=i&&s.set(t.trim(),i.trim())}),s}function K(e,t){let s=e.getElementsByTagName(t);if(1!=s.length)throw Error("Expecting 1 "+t+" but finding "+s.length);return s[0]}class W extends U{static{this.s_units="units"}static{this.s_lower="lower"}static{this.s_upper="upper"}static{this.s_stepsize="stepsize"}constructor(e,t,s){super(e,t,s)}setValue(e){this.value=e}getUnits(){return this.attributes.get(W.s_units)}setUnits(e){this.attributes.set(W.s_units,e)}removeUnits(){this.attributes.delete(W.s_units)}getLower(){let e=this.attributes.get(W.s_lower);if(void 0!=e)return new(d(r))(e)}setLower(e){this.attributes.set(W.s_lower,e.toString())}removeLower(){this.attributes.delete(W.s_lower)}getUpper(){let e=this.attributes.get(W.s_upper);if(void 0!=e)return new(d(r))(e)}setUpper(e){this.attributes.set(W.s_upper,e.toString())}removeUpper(){this.attributes.delete(W.s_upper)}getStepsize(){let e=this.attributes.get(W.s_stepsize);if(void 0!=e)return new(d(r))(e)}setStepsize(e){this.attributes.set(W.s_stepsize,e.toString())}removeStepsize(){this.attributes.delete(W.s_stepsize)}}class Z extends U{static{this.tagName="me:eigenvalue"}constructor(e,t){super(e,Z.tagName,t)}}class Q extends Y{static{this.tagName="me:eigenvalueList"}constructor(e,t){super(e,Q.tagName),t&&t.forEach(e=>{this.addNode(e)})}addEigenvalue(e){this.addNode(e)}}class J extends U{static{this.tagName="me:pop"}constructor(e,t){super(e,J.tagName,t)}}class ee extends Y{static{this.tagName="me:population"}constructor(e,t){super(e,ee.tagName)}addPop(e){this.addNode(e)}}class et extends Y{static{this.tagName="me:populationList"}constructor(e,t){super(e,et.tagName),t&&t.forEach(e=>{this.addNode(e)})}addPopulation(e){this.addNode(e)}}class es extends U{static{this.tagName="me:firstOrderLoss"}constructor(e,t){super(e,es.tagName,t)}}class ei extends U{static{this.tagName="me:firstOrderRate"}constructor(e,t){super(e,es.tagName,t)}}class en extends Y{static{this.tagName="me:rateList"}constructor(e,t,s){if(super(e,ea.tagName),this.index=new Map,this.folIndex=new Map,t){let e=0;t.forEach(t=>{this.index.set(es.tagName+e.toString(),this.nodes.size),this.folIndex.set(this.folIndex.size,this.nodes.size),this.addNode(t),e++}),this.fols=t}else this.fols=[];if(this.forIndex=new Map,s){let e=0;s.forEach(t=>{this.index.set(ei.tagName+e.toString(),this.nodes.size),this.forIndex.set(this.forIndex.size,this.nodes.size),this.addNode(t),e++}),this.fors=s}else this.fors=[]}addFirstOrderLoss(e){this.folIndex.set(this.folIndex.size,this.nodes.size),this.index.set(es.tagName+this.folIndex.size.toString(),this.nodes.size),this.fols.push(e),this.addNode(e)}addFirstOrderRate(e){this.forIndex.set(this.forIndex.size,this.nodes.size),this.index.set(ei.tagName+this.forIndex.size.toString(),this.nodes.size),this.fors.push(e),this.addNode(e)}}class ea extends Y{static{this.tagName="me:analysis"}constructor(e,t,s,i,n){super(e,ea.tagName),this.index=new Map,t&&(this.index.set(tM.tagName,this.nodes.size),this.addNode(t)),this.elIndex=new Map,s?(s.forEach(e=>{this.index.set(Q.tagName,this.nodes.size),this.elIndex.set(this.elIndex.size,this.nodes.size),this.addNode(e)}),this.els=s):this.els=[],this.plIndex=new Map,i?(i.forEach(e=>{this.index.set(et.tagName,this.nodes.size),this.plIndex.set(this.plIndex.size,this.nodes.size),this.addNode(e)}),this.pls=i):this.pls=[],this.rlIndex=new Map,n?(n.forEach(e=>{this.index.set(en.tagName,this.nodes.size),this.rlIndex.set(this.rlIndex.size,this.nodes.size),this.addNode(e)}),this.rls=n):this.rls=[]}getDescription(){if(this.index.has(tM.tagName)){let e=this.index.get(tM.tagName);return this.nodes.get(e)}}setDescription(e){if(this.index.has(tM.tagName)){let t=this.index.get(tM.tagName);this.nodes.set(t,e)}else this.index.set(tM.tagName,this.nodes.size),this.addNode(e)}addEigenvalueList(e){this.elIndex.set(this.elIndex.size,this.nodes.size),this.addNode(e),this.els.push(e)}addPopulationList(e){this.plIndex.set(this.plIndex.size,this.nodes.size),this.addNode(e),this.pls.push(e)}addRateList(e){this.rlIndex.set(this.rlIndex.size,this.nodes.size),this.addNode(e),this.rls.push(e)}}class eo extends V{static{this.tagName="me:bathGas"}constructor(e,t){super(e,eo.tagName,t)}}class ed extends U{static{this.tagName="me:experimentalRate"}static{this.s_ref1="ref1"}static{this.s_ref2="ref2"}static{this.s_refReaction="refReaction"}static{this.s_error="error"}constructor(e,t){super(e,ed.tagName,t)}getRef1(){return this.attributes.get(ed.s_ref1)}setRef1(e){this.attributes.set(ed.s_ref1,e)}getRef2(){return this.attributes.get(ed.s_ref2)}setRef2(e){this.attributes.set(ed.s_ref2,e)}getRefReaction(){return this.attributes.get(ed.s_refReaction)}setRefReaction(e){this.attributes.set(ed.s_refReaction,e)}getError(){return new(d(r))(this.attributes.get(ed.s_error))}setError(e){this.attributes.set(ed.s_error,e.toString())}}class er extends U{static{this.tagName="me:experimentalYield"}static{this.s_ref="ref"}static{this.s_error="error"}static{this.s_yieldTime="yieldTime"}constructor(e,t){super(e,er.tagName,t)}getRef(){return this.attributes.get(er.s_ref)}setRef(e){this.attributes.set(er.s_ref,e)}getError(){return new(d(r))(this.attributes.get(er.s_error))}setError(e){this.attributes.set(er.s_error,e.toString())}getYieldTime(){return new(d(r))(this.attributes.get(er.s_yieldTime))}setYieldTime(e){this.attributes.set(er.s_yieldTime,e.toString())}}class el extends U{static{this.tagName="me:experimentalEigenvalue"}static{this.s_EigenvalueID="EigenvalueID"}static{this.s_error="error"}constructor(e,t){super(e,el.tagName,t)}getEigenvalueID(){return this.attributes.get(el.s_EigenvalueID)}setEigenvalueID(e){this.attributes.set(el.s_EigenvalueID,e)}getError(){return new(d(r))(this.attributes.get(el.s_error))}setError(e){this.attributes.set(el.s_error,e.toString())}}class eg extends U{static{this.tagName="me:excessReactantConc"}static{this.s_percent="percent"}constructor(e,t){super(e,eg.tagName,t)}getPercent(){return this.attributes.get(eg.s_percent)}setPercent(e){this.attributes.set(eg.s_percent,e)}}class eh extends Y{static{this.tagName="me:PTpair"}static{this.s_P="P"}static{this.s_T="T"}static{this.s_precision="precision"}static{this.s_excessReactantConc="excessReactantConc"}static{this.s_percentExcessReactantConc="percentExcessReactantConc"}constructor(e,t,s,i,n){super(e,eh.tagName),this.index=new Map,void 0!=t&&(this.index.set(eo.tagName,this.nodes.size),this.addNode(t)),void 0!=s&&(this.index.set(ed.tagName,this.nodes.size),this.addNode(s)),void 0!=i&&(this.index.set(er.tagName,this.nodes.size),this.addNode(i)),void 0!=n&&(this.index.set(el.tagName,this.nodes.size),this.addNode(n))}getP(){let e=this.attributes.get(eh.s_P);if(void 0!==e)return new(d(r))(e)}setP(e){this.attributes.set(eh.s_P,e.toString())}getT(){let e=this.attributes.get(eh.s_T);if(void 0!==e)return new(d(r))(e)}setT(e){this.attributes.set(eh.s_T,e.toString())}getPrecision(){return this.attributes.get(eh.s_precision)}setPrecision(e){this.attributes.set(eh.s_precision,e)}getBathGas(){let e=this.index.get(eo.tagName);return void 0!=e?this.nodes.get(e):void 0}setBathGas(e){let t=this.index.get(eo.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eo.tagName,this.nodes.size),this.addNode(e))}removeBathGas(){let e=this.index.get(eo.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(eo.tagName))}getExperimentalRate(){let e=this.index.get(ed.tagName);return void 0!=e?this.nodes.get(e):void 0}setExperimentalRate(e){let t=this.index.get(ed.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(ed.tagName,this.nodes.size),this.addNode(e))}removeExperimentalRate(){let e=this.index.get(ed.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(ed.tagName))}getExperimentalYield(){let e=this.index.get(er.tagName);return void 0!=e?this.nodes.get(e):void 0}setExperimentalYield(e){let t=this.index.get(er.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(er.tagName,this.nodes.size),this.addNode(e))}removeExperimentalYield(){let e=this.index.get(er.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(er.tagName))}getExperimentalEigenvalue(){let e=this.index.get(el.tagName);return void 0!=e?this.nodes.get(e):void 0}setExperimentalEigenvalue(e){let t=this.index.get(el.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(el.tagName,this.nodes.size),this.addNode(e))}removeExperimentalEigenvalue(){let e=this.index.get(el.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(el.tagName))}getExcessReactantConc(){return this.attributes.get(eh.s_excessReactantConc)}setExcessReactantConc(e){this.attributes.set(eh.s_excessReactantConc,e)}getPercentExcessReactantConc(){return this.attributes.get(eh.s_percentExcessReactantConc)}setPercentExcessReactantConc(e){this.attributes.set(eh.s_percentExcessReactantConc,e)}}class em extends Y{static{this.tagName="me:PTs"}constructor(e,t){super(e,em.tagName),void 0!=t?(t.forEach(e=>{this.addNode(e)}),this.ptps=t):this.ptps=[]}get(e){return this.ptps[e]}set(e,t){this.nodes.set(e,t),this.ptps[e]=t}add(e){return this.addNode(e),this.ptps.push(e),this.nodes.size-1}remove(e){this.nodes.delete(e),this.ptps.splice(e,1)}init(e){this.clear(),e.forEach(e=>{this.addNode(e),this.ptps.push(e)})}clear(){this.nodes.clear(),this.ptps=[]}}class ec extends Y{static{this.tagName="me:conditions"}constructor(e,t,s,i){super(e,ec.tagName),this.id=t,this.index=new Map,this.bathGasesIndex=new Map,this.bathGases=new Map,void 0!=s&&(this.index.set(eo.tagName,this.nodes.size),s.forEach(e=>{this.bathGasesIndex.set(e.value,this.nodes.size),this.addNode(e),this.bathGases.set(e,s.size)})),void 0!=i&&(this.index.set(em.tagName,this.nodes.size),this.addNode(i))}getBathGases(){return this.bathGases}addBathGas(e){if(this.bathGases.has(e))return this.bathGases.get(e);{let t=this.bathGases.size;return this.bathGases.set(e,t),this.bathGasesIndex.set(e.value,this.nodes.size),this.addNode(e),t}}removeBathGas(e){this.bathGases.has(e)?(this.bathGases.delete(e),this.nodes.delete(this.bathGasesIndex.get(e.value))):console.warn("Conditions.removeBathGas: bathGas not found to remove.")}getPTs(){let e=this.index.get(em.tagName);if(void 0!=e)return this.nodes.get(e)}setPTs(e){let t=this.index.get(em.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(em.tagName,this.nodes.size),this.addNode(e))}}class eu extends q{static{this.tagName="me:calculateRateCoefficientsOnly"}constructor(){super(eu.tagName)}}class eN extends q{static{this.tagName="me:printCellDOS"}constructor(){super(eN.tagName)}}class ep extends q{static{this.tagName="me:printCellTransitionStateFlux"}constructor(){super(ep.tagName)}}class ef extends q{static{this.tagName="me:printReactionOperatorColumnSums"}constructor(){super(ef.tagName)}}class ex extends q{static{this.tagName="me:printGrainBoltzmann"}constructor(){super(ex.tagName)}}class ev extends q{static{this.tagName="me:printGrainDOS"}constructor(){super(ev.tagName)}}class eE extends q{static{this.tagName="me:printGrainkbE"}constructor(){super(eE.tagName)}}class ew extends q{static{this.tagName="me:printGrainkfE"}constructor(){super(ew.tagName)}}class ey extends q{static{this.tagName="me:printTSsos"}constructor(){super(ey.tagName)}}class eC extends q{static{this.tagName="me:printGrainedSpeciesProfile"}constructor(){super(eC.tagName)}}class eb extends q{static{this.tagName="me:printGrainTransitionStateFlux"}constructor(){super(eb.tagName)}}class eS extends q{static{this.tagName="me:printReactionOperatorSize"}constructor(){super(eS.tagName)}}class eT extends q{static{this.tagName="me:printSpeciesProfile"}constructor(){super(eT.tagName)}}class eM extends q{static{this.tagName="me:printPhenomenologicalEvolution"}constructor(){super(eM.tagName)}}class ez extends q{static{this.tagName="me:printTunnelingCoefficients"}constructor(){super(ez.tagName)}}class e_ extends q{static{this.tagName="me:printCrossingCoefficients"}constructor(){super(e_.tagName)}}class eR extends q{static{this.tagName="me:testDOS"}constructor(){super(eR.tagName)}}class eL extends q{static{this.tagName="me:testRateConstant"}constructor(){super(eL.tagName)}}class eP extends q{static{this.tagName="me:useTheSameCellNumberForAllConditions"}constructor(){super(eP.tagName)}}class eI extends V{static{this.tagName="me:ForceMacroDetailedBalance"}constructor(e,t){super(e,eI.tagName,t)}}class eB extends q{static{this.tagName="me:hideInactive"}constructor(){super(eB.tagName)}}class eD extends Y{static{this.tagName="me:calcMethod"}static{this.options=["simpleCalc","gridSearch","fitting","marquardt","analyticalRepresentation","ThermodynamicTable","sensitivityAnalysis","me:simpleCalc","me:gridSearch","me:fitting","me:marquardt","me:analyticalRepresentation","me:ThermodynamicTable","me:sensitivityAnalysis"]}constructor(e){super(e,eD.tagName)}}class eA extends eD{static{this.xsi_type="me:simpleCalc"}static{this.xsi_type2="simpleCalc"}constructor(e){super(e)}}class ek extends eD{static{this.xsi_type="me:gridSearch"}static{this.xsi_type2="gridSearch"}constructor(e){super(e)}}class eO extends U{static{this.tagName="me:fittingIterations"}constructor(e,t){super(e,eO.tagName,t)}}class eG extends eD{static{this.xsi_type="me:fitting"}static{this.xsi_type2="fitting"}constructor(e,t){super(e),void 0!=t&&this.addNode(t)}getFittingIterations(){return this.nodes.get(0)}setFittingIterations(e){this.nodes.set(0,e)}removeFittingIterations(){this.nodes.delete(0)}}class eF extends U{static{this.tagName="me:MarquardtIterations"}constructor(e,t){super(e,eF.tagName,t)}}class eq extends U{static{this.tagName="me:MarquardtTolerance"}constructor(e,t){super(e,eq.tagName,t)}}class eH extends U{static{this.tagName="me:MarquardtDerivDelta"}constructor(e,t){super(e,eH.tagName,t)}}class eV extends eD{static{this.xsi_type="me:marquardt"}static{this.xsi_type2="marquardt"}constructor(e,t,s,i){super(e),this.index=new Map,void 0!=t&&(this.index.set(eF.tagName,this.nodes.size),this.addNode(t)),void 0!=s&&(this.index.set(eq.tagName,this.nodes.size),this.addNode(s)),void 0!=i&&(this.index.set(eH.tagName,this.nodes.size),this.addNode(i))}getMarquardtIterations(){let e=this.index.get(eF.tagName);if(void 0!=e)return this.nodes.get(e)}setMarquardtIterations(e){let t=this.index.get(eF.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eF.tagName,this.nodes.size),this.addNode(e))}removeMarquardtIterations(){let e=this.index.get(eF.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(eF.tagName))}getMarquardtTolerance(){let e=this.index.get(eq.tagName);if(void 0!=e)return this.nodes.get(e)}setMarquardtTolerance(e){let t=this.index.get(eq.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eq.tagName,this.nodes.size),this.addNode(e))}removeMarquardtTolerance(){let e=this.index.get(eq.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(eq.tagName))}getMarquardtDerivDelta(){let e=this.index.get(eH.tagName);if(void 0!=e)return this.nodes.get(e)}setMarquardtDerivDelta(e){let t=this.index.get(eH.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eH.tagName,this.nodes.size),this.addNode(e))}removeMarquardtDerivDelta(){let e=this.index.get(eH.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(eH.tagName))}}class eU extends q{static{this.tagName="me:useTraceWeighting"}constructor(){super(eU.tagName)}}class ej extends V{static{this.tagName="me:format"}static{this.options=["cantera","chemkin"]}static{this.rateUnits="rateUnits"}static{this.rateUnitsOptions=["cm3mole-1s-1","cm3molecule-1s-1"]}constructor(e,t){super(e,ej.tagName,t)}getRateUnits(){return this.attributes.get(ej.rateUnits)}setRateUnits(e){this.attributes.set(ej.rateUnits,e)}removeRateUnits(){this.attributes.delete(ej.rateUnits)}}class eY extends V{static{this.tagName="me:precision"}constructor(e,t){super(e,eY.tagName,t)}}class eX extends U{static{this.tagName="me:chebNumTemp"}constructor(e,t){super(e,eX.tagName,t)}}class e$ extends U{static{this.tagName="me:chebNumConc"}constructor(e,t){super(e,e$.tagName,t)}}class eK extends U{static{this.tagName="me:chebMaxTemp"}constructor(e,t){super(e,eK.tagName,t)}}class eW extends U{static{this.tagName="me:chebMinTemp"}constructor(e,t){super(e,eW.tagName,t)}}class eZ extends U{static{this.tagName="me:chebMaxConc"}constructor(e,t){super(e,eZ.tagName,t)}getUnits(){return this.attributes.get("units")}setUnits(e){this.attributes.set("units",e)}}class eQ extends U{static{this.tagName="me:chebMinConc"}constructor(e,t){super(e,eQ.tagName,t)}}class eJ extends U{static{this.tagName="me:chebTExSize"}constructor(e,t){super(e,eJ.tagName,t)}}class e0 extends U{static{this.tagName="me:chebPExSize"}constructor(e,t){super(e,e0.tagName,t)}}class e1 extends eD{static{this.xsi_type="me:analyticalRepresentation"}static{this.xsi_type2="analyticalRepresentation"}constructor(e,t,s,i,n,a,o,d,r,l,g){super(e),this.index=new Map,void 0!=t&&(this.index.set(ej.tagName,this.nodes.size),this.addNode(t)),void 0!=s&&(this.index.set(eY.tagName,this.nodes.size),this.addNode(s)),void 0!=i&&(this.index.set(eX.tagName,this.nodes.size),this.addNode(i)),void 0!=n&&(this.index.set(e$.tagName,this.nodes.size),this.addNode(n)),void 0!=a&&(this.index.set(eK.tagName,this.nodes.size),this.addNode(a)),void 0!=o&&(this.index.set(eW.tagName,this.nodes.size),this.addNode(o)),void 0!=d&&(this.index.set(eZ.tagName,this.nodes.size),this.addNode(d)),void 0!=r&&(this.index.set(eQ.tagName,this.nodes.size),this.addNode(r)),void 0!=l&&(this.index.set(eJ.tagName,this.nodes.size),this.addNode(l)),void 0!=g&&(this.index.set(e0.tagName,this.nodes.size),this.addNode(g))}getFormat(){let e=this.index.get(ej.tagName);if(void 0!=e)return this.nodes.get(e)}setFormat(e){let t=this.index.get(ej.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(ej.tagName,this.nodes.size),this.addNode(e))}removeFormat(){let e=this.index.get(ej.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(ej.tagName))}getPrecision(){let e=this.index.get(eY.tagName);if(void 0!=e)return this.nodes.get(e)}setPrecision(e){let t=this.index.get(eY.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eY.tagName,this.nodes.size),this.addNode(e))}removePrecision(){let e=this.index.get(eY.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(eY.tagName))}getChebNumTemp(){let e=this.index.get(eX.tagName);if(void 0!=e)return this.nodes.get(e)}setChebNumTemp(e){let t=this.index.get(eX.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eX.tagName,this.nodes.size),this.addNode(e))}removeChebNumTemp(){let e=this.index.get(eX.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(eX.tagName))}getChebNumConc(){let e=this.index.get(e$.tagName);if(void 0!=e)return this.nodes.get(e)}setChebNumConc(e){let t=this.index.get(e$.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(e$.tagName,this.nodes.size),this.addNode(e))}removeChebNumConc(){let e=this.index.get(e$.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(e$.tagName))}getChebMaxTemp(){let e=this.index.get(eK.tagName);if(void 0!=e)return this.nodes.get(e)}setChebMaxTemp(e){let t=this.index.get(eK.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eK.tagName,this.nodes.size),this.addNode(e))}removeChebMaxTemp(){let e=this.index.get(eK.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(eK.tagName))}getChebMinTemp(){let e=this.index.get(eW.tagName);if(void 0!=e)return this.nodes.get(e)}setChebMinTemp(e){let t=this.index.get(eW.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eW.tagName,this.nodes.size),this.addNode(e))}removeChebMinTemp(){let e=this.index.get(eW.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(eW.tagName))}getChebMaxConc(){let e=this.index.get(eZ.tagName);if(void 0!=e)return this.nodes.get(e)}setChebMaxConc(e){let t=this.index.get(eZ.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eZ.tagName,this.nodes.size),this.addNode(e))}removeChebMaxConc(){let e=this.index.get(eZ.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(eZ.tagName))}getChebMinConc(){let e=this.index.get(eQ.tagName);if(void 0!=e)return this.nodes.get(e)}setChebMinConc(e){let t=this.index.get(eQ.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eQ.tagName,this.nodes.size),this.addNode(e))}removeChebMinConc(){let e=this.index.get(eQ.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(eQ.tagName))}getChebTExSize(){let e=this.index.get(eJ.tagName);if(void 0!=e)return this.nodes.get(e)}setChebTExSize(e){let t=this.index.get(eJ.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eJ.tagName,this.nodes.size),this.addNode(e))}removeChebTExSize(){let e=this.index.get(eJ.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(eJ.tagName))}getChebPExSize(){let e=this.index.get(e0.tagName);if(void 0!=e)return this.nodes.get(e)}setChebPExSize(e){let t=this.index.get(e0.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(e0.tagName,this.nodes.size),this.addNode(e))}removeChebPExSize(){let e=this.index.get(e0.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(e0.tagName))}}class e2 extends U{static{this.tagName="me:Tmin"}constructor(e,t){super(e,e2.tagName,t)}}class e3 extends U{static{this.tagName="me:Tmid"}constructor(e,t){super(e,e3.tagName,t)}}class e5 extends U{static{this.tagName="me:Tmax"}constructor(e,t){super(e,e5.tagName,t)}}class e4 extends U{static{this.tagName="me:Tstep"}constructor(e,t){super(e,e2.tagName,t)}}class e6 extends eD{static{this.xsi_type="me:ThermodynamicTable"}static{this.xsi_type2="ThermodynamicTable"}constructor(e,t,s,i,n){super(e),this.index=new Map,void 0!=t&&(this.index.set(e2.tagName,this.nodes.size),this.addNode(t)),void 0!=s&&(this.index.set(e3.tagName,this.nodes.size),this.addNode(s)),void 0!=i&&(this.index.set(e5.tagName,this.nodes.size),this.addNode(i)),void 0!=n&&(this.index.set(e4.tagName,this.nodes.size),this.addNode(n))}getTmin(){let e=this.index.get(e2.tagName);if(void 0!=e)return this.nodes.get(e)}setTmin(e){let t=this.index.get(e2.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(e2.tagName,this.nodes.size),this.addNode(e))}removeTmin(){let e=this.index.get(e2.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(e2.tagName))}getTmid(){let e=this.index.get(e3.tagName);if(void 0!=e)return this.nodes.get(e)}setTmid(e){let t=this.index.get(e3.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(e3.tagName,this.nodes.size),this.addNode(e))}removeTmid(){let e=this.index.get(e3.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(e3.tagName))}getTmax(){let e=this.index.get(e5.tagName);if(void 0!=e)return this.nodes.get(e)}setTmax(e){let t=this.index.get(e5.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(e5.tagName,this.nodes.size),this.addNode(e))}removeTmax(){let e=this.index.get(e5.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(e5.tagName))}getTstep(){let e=this.index.get(e4.tagName);if(void 0!=e)return this.nodes.get(e)}setTstep(e){let t=this.index.get(e4.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(e4.tagName,this.nodes.size),this.addNode(e))}removeTstep(){let e=this.index.get(e4.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(e4.tagName))}}class e8 extends U{static{this.tagName="me:sensitivityAnalysisSamples"}constructor(e,t){super(e,e8.tagName,t)}}class e7 extends U{static{this.tagName="me:sensitivityAnalysisOrder"}constructor(e,t){super(e,e7.tagName,t)}}class e9 extends U{static{this.tagName="me:sensitivityNumVarRedIters"}constructor(e,t){super(e,e9.tagName,t)}}class te extends V{static{this.tagName="me:sensitivityVarRedMethod"}static{this.options=["AdditiveControl","RatioControl"]}constructor(e,t){super(e,te.tagName,t)}}class tt extends eD{static{this.xsi_type="me:sensitivityAnalysis"}static{this.xsi_type2="sensitivityAnalysis"}constructor(e,t,s,i,n){super(e),this.index=new Map,void 0!=t&&(this.index.set(e8.tagName,this.nodes.size),this.addNode(t)),void 0!=s&&(this.index.set(e7.tagName,this.nodes.size),this.addNode(s)),void 0!=i&&(this.index.set(e9.tagName,this.nodes.size),this.addNode(i)),void 0!=n&&(this.index.set(te.tagName,this.nodes.size),this.addNode(n))}getSensitivityAnalysisSamples(){let e=this.index.get(e8.tagName);if(void 0!=e)return this.nodes.get(e)}setSensitivityAnalysisSamples(e){let t=this.index.get(e8.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(e8.tagName,this.nodes.size),this.addNode(e))}removeSensitivityAnalysisSamples(){let e=this.index.get(e8.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(e8.tagName))}getSensitivityAnalysisOrder(){let e=this.index.get(e7.tagName);if(void 0!=e)return this.nodes.get(e)}setSensitivityAnalysisOrder(e){let t=this.index.get(e7.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(e7.tagName,this.nodes.size),this.addNode(e))}removeSensitivityAnalysisOrder(){let e=this.index.get(e7.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(e7.tagName))}getSensitivityNumVarRedIters(){let e=this.index.get(e9.tagName);if(void 0!=e)return this.nodes.get(e)}setSensitivityNumVarRedIters(e){let t=this.index.get(e9.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(e9.tagName,this.nodes.size),this.addNode(e))}removeSensitivityNumVarRedIters(){let e=this.index.get(e9.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(e9.tagName))}getSensitivityVarRedMethod(){let e=this.index.get(te.tagName);if(void 0!=e)return this.nodes.get(e)}setSensitivityVarRedMethod(e){let t=this.index.get(te.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(te.tagName,this.nodes.size),this.addNode(e))}removeSensitivityVarRedMethod(){let e=this.index.get(te.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(te.tagName))}}class ts extends U{static{this.tagName="me:eigenvalues"}constructor(e,t){super(e,ts.tagName,t)}}class ti extends U{static{this.tagName="me:shortestTimeOfInterest"}constructor(e,t){super(e,ti.tagName,t)}}class tn extends U{static{this.tagName="me:MaximumEvolutionTime"}constructor(e,t){super(e,tn.tagName,t)}}class ta extends U{static{this.tagName="me:automaticallySetMaxEne"}constructor(e,t){super(e,ta.tagName,t)}}class to extends U{static{this.tagName="me:diagramEnergyOffset"}constructor(e,t){super(e,to.tagName,t)}}class td extends H{static{this.tagName="me:testMicroRates"}constructor(e){super(e,td.tagName),this.tMin=new(d(r))(e.get("Tmin")),this.tMax=new(d(r))(e.get("Tmax")),this.tStep=new(d(r))(e.get("Tstep"))}getTmin(){return this.tMin}setTmin(e){this.tMin=e,this.attributes?.set("Tmin",e.toString())}getTmax(){return this.tMax}setTmax(e){this.tMax=e,this.attributes?.set("Tmax",e.toString())}getTstep(){return this.tStep}setTstep(e){this.tStep=e,this.attributes?.set("Tstep",e.toString())}}class tr extends Y{static{this.tagName="me:control"}constructor(e,t){super(e,tr.tagName),this.id=t,this.index=new Map}getCalculateRateCoefficientsOnly(){let e=this.index.get(eu.tagName);if(void 0!=e)return this.nodes.get(e)}setCalculateRateCoefficientsOnly(e){let t=this.index.get(eu.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eu.tagName,this.nodes.size),this.addNode(e))}removeCalculateRateCoefficientsOnly(){let e=this.index.get(eu.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(eu.tagName))}getPrintCellDOS(){let e=this.index.get(eN.tagName);if(void 0!=e)return this.nodes.get(e)}setPrintCellDOS(e){let t=this.index.get(eN.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eN.tagName,this.nodes.size),this.addNode(e))}removePrintCellDOS(){let e=this.index.get(eN.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(eN.tagName))}getPrintCellTransitionStateFlux(){let e=this.index.get(ep.tagName);if(void 0!=e)return this.nodes.get(e)}setPrintCellTransitionStateFlux(e){let t=this.index.get(ep.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(ep.tagName,this.nodes.size),this.addNode(e))}removePrintCellTransitionStateFlux(){let e=this.index.get(ep.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(ep.tagName))}getPrintReactionOperatorColumnSums(){let e=this.index.get(ef.tagName);if(void 0!=e)return this.nodes.get(e)}setPrintReactionOperatorColumnSums(e){let t=this.index.get(ef.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(ef.tagName,this.nodes.size),this.addNode(e))}removePrintReactionOperatorColumnSums(){let e=this.index.get(ef.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(ef.tagName))}getPrintGrainBoltzmann(){let e=this.index.get(ex.tagName);if(void 0!=e)return this.nodes.get(e)}setPrintGrainBoltzmann(e){let t=this.index.get(ex.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(ex.tagName,this.nodes.size),this.addNode(e))}removePrintGrainBoltzmann(){let e=this.index.get(ex.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(ex.tagName))}getPrintGrainDOS(){let e=this.index.get(ev.tagName);if(void 0!=e)return this.nodes.get(e)}setPrintGrainDOS(e){let t=this.index.get(ev.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(ev.tagName,this.nodes.size),this.addNode(e))}removePrintGrainDOS(){let e=this.index.get(ev.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(ev.tagName))}getPrintGrainkbE(){let e=this.index.get(eE.tagName);if(void 0!=e)return this.nodes.get(e)}setPrintGrainkbE(e){let t=this.index.get(eE.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eE.tagName,this.nodes.size),this.addNode(e))}removePrintGrainkbE(){let e=this.index.get(eE.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(eE.tagName))}getPrintGrainkfE(){let e=this.index.get(ew.tagName);if(void 0!=e)return this.nodes.get(e)}setPrintGrainkfE(e){let t=this.index.get(ew.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(ew.tagName,this.nodes.size),this.addNode(e))}removePrintGrainkfE(){let e=this.index.get(ew.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(ew.tagName))}getPrintTSsos(){let e=this.index.get(ey.tagName);if(void 0!=e)return this.nodes.get(e)}setPrintTSsos(e){let t=this.index.get(ey.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(ey.tagName,this.nodes.size),this.addNode(e))}removePrintTSsos(){let e=this.index.get(ey.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(ey.tagName))}getPrintGrainedSpeciesProfile(){let e=this.index.get(eC.tagName);if(void 0!=e)return this.nodes.get(e)}setPrintGrainedSpeciesProfile(e){let t=this.index.get(eC.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eC.tagName,this.nodes.size),this.addNode(e))}removePrintGrainedSpeciesProfile(){let e=this.index.get(eC.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(eC.tagName))}getPrintGrainTransitionStateFlux(){let e=this.index.get(eb.tagName);if(void 0!=e)return this.nodes.get(e)}setPrintGrainTransitionStateFlux(e){let t=this.index.get(eb.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eb.tagName,this.nodes.size),this.addNode(e))}removePrintGrainTransitionStateFlux(){let e=this.index.get(eb.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(eb.tagName))}getPrintReactionOperatorSize(){let e=this.index.get(eS.tagName);if(void 0!=e)return this.nodes.get(e)}setPrintReactionOperatorSize(e){let t=this.index.get(eS.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eS.tagName,this.nodes.size),this.addNode(e))}removePrintReactionOperatorSize(){let e=this.index.get(eS.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(eS.tagName))}getPrintSpeciesProfile(){let e=this.index.get(eT.tagName);if(void 0!=e)return this.nodes.get(e)}setPrintSpeciesProfile(e){let t=this.index.get(eT.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eT.tagName,this.nodes.size),this.addNode(e))}removePrintSpeciesProfile(){let e=this.index.get(eT.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(eT.tagName))}getPrintPhenomenologicalEvolution(){let e=this.index.get(eM.tagName);if(void 0!=e)return this.nodes.get(e)}setPrintPhenomenologicalEvolution(e){let t=this.index.get(eM.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eM.tagName,this.nodes.size),this.addNode(e))}removePrintPhenomenologicalEvolution(){let e=this.index.get(eM.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(eM.tagName))}getPrintTunnelingCoefficients(){let e=this.index.get(ez.tagName);if(void 0!=e)return this.nodes.get(e)}setPrintTunnelingCoefficients(e){let t=this.index.get(ez.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(ez.tagName,this.nodes.size),this.addNode(e))}removePrintTunnelingCoefficients(){let e=this.index.get(ez.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(ez.tagName))}getPrintCrossingCoefficients(){let e=this.index.get(e_.tagName);if(void 0!=e)return this.nodes.get(e)}setPrintCrossingCoefficients(e){let t=this.index.get(e_.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(e_.tagName,this.nodes.size),this.addNode(e))}removePrintCrossingCoefficients(){let e=this.index.get(e_.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(e_.tagName))}getTestDOS(){let e=this.index.get(eR.tagName);if(void 0!=e)return this.nodes.get(e)}setTestDOS(e){let t=this.index.get(eR.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eR.tagName,this.nodes.size),this.addNode(e))}removeTestDOS(){let e=this.index.get(eR.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(eR.tagName))}getTestRateConstants(){let e=this.index.get(eL.tagName);if(void 0!=e)return this.nodes.get(e)}setTestRateConstants(e){let t=this.index.get(eL.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eL.tagName,this.nodes.size),this.addNode(e))}removeTestRateConstants(){let e=this.index.get(eL.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(eL.tagName))}getUseTheSameCellNumberForAllConditions(){let e=this.index.get(eP.tagName);if(void 0!=e)return this.nodes.get(e)}setUseTheSameCellNumberForAllConditions(e){let t=this.index.get(eP.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eP.tagName,this.nodes.size),this.addNode(e))}removeUseTheSameCellNumberForAllConditions(){let e=this.index.get(eP.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(eP.tagName))}getHideInactive(){let e=this.index.get(eB.tagName);if(void 0!=e)return this.nodes.get(e)}setHideInactive(e){let t=this.index.get(eB.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eB.tagName,this.nodes.size),this.addNode(e))}removeHideInactive(){let e=this.index.get(eB.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(eB.tagName))}getForceMacroDetailedBalance(){let e=this.index.get(eI.tagName);if(void 0!=e)return this.nodes.get(e)}setForceMacroDetailedBalance(e){let t=this.index.get(eI.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eI.tagName,this.nodes.size),this.addNode(e))}removeForceMacroDetailedBalance(){let e=this.index.get(eI.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(eI.tagName))}getCalcMethod(){let e=this.index.get(eD.tagName);if(void 0!=e)return this.nodes.get(e)}setCalcMethod(e){let t=this.index.get(eD.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eD.tagName,this.nodes.size),this.addNode(e))}removeCalcMethod(){let e=this.index.get(eD.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(eD.tagName))}getEigenvalues(){let e=this.index.get(ts.tagName);if(void 0!=e)return this.nodes.get(e)}setEigenvalues(e){let t=this.index.get(ts.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(ts.tagName,this.nodes.size),this.addNode(e))}removeEigenvalues(){let e=this.index.get(ts.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(ts.tagName))}getShortestTimeOfInterest(){let e=this.index.get(ti.tagName);if(void 0!=e)return this.nodes.get(e)}setShortestTimeOfInterest(e){let t=this.index.get(ti.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(ti.tagName,this.nodes.size),this.addNode(e))}removeShortestTimeOfInterest(){let e=this.index.get(ti.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(ti.tagName))}getMaximumEvolutionTime(){let e=this.index.get(tn.tagName);if(void 0!=e)return this.nodes.get(e)}setMaximumEvolutionTime(e){let t=this.index.get(tn.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(tn.tagName,this.nodes.size),this.addNode(e))}removeMaximumEvolutionTime(){let e=this.index.get(tn.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(tn.tagName))}getAutomaticallySetMaxEne(){let e=this.index.get(ta.tagName);if(void 0!=e)return this.nodes.get(e)}setAutomaticallySetMaxEne(e){let t=this.index.get(ta.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(ta.tagName,this.nodes.size),this.addNode(e))}removeAutomaticallySetMaxEne(){let e=this.index.get(ta.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(ta.tagName))}getDiagramEnergyOffset(){let e=this.index.get(to.tagName);if(void 0!=e)return this.nodes.get(e)}setDiagramEnergyOffset(e){let t=this.index.get(to.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(to.tagName,this.nodes.size),this.addNode(e))}removeDiagramEnergyOffset(){let e=this.index.get(to.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(to.tagName))}getTestMicroRates(){let e=this.index.get(td.tagName);if(void 0!=e)return this.nodes.get(e)}setTestMicroRates(e){let t=this.index.get(td.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(td.tagName,this.nodes.size),this.addNode(e))}removeTestMicroRates(){let e=this.index.get(td.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(td.tagName))}}class tl extends Y{static{this.tagName="metadata"}constructor(e){super(e,tl.tagName)}getLabelText(){let e="";return this.attributes.forEach((t,s)=>{e+=s+": "+t+" "}),e}}class tg extends V{static{this.tagName="dc:title"}constructor(e,t){super(e,tg.tagName,t)}}class th extends V{static{this.tagName="dc:source"}constructor(e,t){super(e,th.tagName,t)}}class tm extends V{static{this.tagName="dc:creator"}constructor(e,t){super(e,tm.tagName,t)}}class tc extends V{static{this.tagName="dc:date"}constructor(e,t){super(e,tc.tagName,t)}}class tu extends V{static{this.tagName="dc:contributor"}constructor(e,t){super(e,tu.tagName,t)}}class tN extends Y{static{this.tagName="metadataList"}constructor(e,t,s,i,n,a){super(e,tN.tagName),this.index=new Map,this.metadataIndex=new Map,t&&(this.index.set(tg.tagName,this.nodes.size),this.addNode(t)),s&&(this.index.set(th.tagName,this.nodes.size),this.addNode(s)),i&&(this.index.set(tm.tagName,this.nodes.size),this.addNode(i)),n&&(this.index.set(tc.tagName,this.nodes.size),this.addNode(n)),a&&(this.index.set(tu.tagName,this.nodes.size),this.addNode(a))}getTitle(){if(this.index.has(tg.tagName)){let e=this.index.get(tg.tagName);return this.nodes.get(e)}}setTitle(e){if(this.index.has(tg.tagName)){let t=this.index.get(tg.tagName);this.nodes.set(t,e)}else this.index.set(tg.tagName,this.nodes.size),this.addNode(e)}getSource(){if(this.index.has(th.tagName)){let e=this.index.get(th.tagName);return this.nodes.get(e)}}setSource(e){if(this.index.has(th.tagName)){let t=this.index.get(th.tagName);this.nodes.set(t,e)}else this.index.set(th.tagName,this.nodes.size),this.addNode(e)}getCreator(){if(this.index.has(tm.tagName)){let e=this.index.get(tm.tagName);return this.nodes.get(e)}}setCreator(e){if(this.index.has(tm.tagName)){let t=this.index.get(tm.tagName);this.nodes.set(t,e)}else this.index.set(tm.tagName,this.nodes.size),this.addNode(e)}getDate(){if(this.index.has(tc.tagName)){let e=this.index.get(tc.tagName);return this.nodes.get(e)}}setDate(e){if(this.index.has(tc.tagName)){let t=this.index.get(tc.tagName);this.nodes.set(t,e)}else this.index.set(tc.tagName,this.nodes.size),this.addNode(e)}getContributor(){if(this.index.has(tu.tagName)){let e=this.index.get(tu.tagName);return this.nodes.get(e)}}setContributor(e){if(this.index.has(tu.tagName)){let t=this.index.get(tu.tagName);this.nodes.set(t,e)}else this.index.set(tu.tagName,this.nodes.size),this.addNode(e)}addMetadata(e){this.metadataIndex.set(this.metadataIndex.size,this.nodes.size),this.addNode(e)}getMetadata(){let e=[];for(let t=0;t<this.metadataIndex.size;t++){let s=this.metadataIndex.get(t);e.push(this.nodes.get(s))}return e}}class tp extends U{static{this.tagName="me:grainSize"}constructor(e,t){super(e,tp.tagName,t)}}class tf extends U{static{this.tagName="me:automaticallySetMaxEne"}constructor(e,t){super(e,tf.tagName,t)}}class tx extends U{static{this.tagName="me:energyAboveTheTopHill"}constructor(e,t){super(e,tx.tagName,t)}}class tv extends U{static{this.tagName="me:maxTemperature"}constructor(e,t){super(e,tv.tagName,t)}}class tE extends Y{static{this.tagName="me:modelParameters"}constructor(e,t,s,i,n){super(e,tE.tagName),this.index=new Map,void 0!=t&&(this.index.set(tp.tagName,this.nodes.size),this.addNode(t)),void 0!=s&&(this.index.set(tf.tagName,this.nodes.size),this.addNode(s)),void 0!=i&&(this.index.set(tx.tagName,this.nodes.size),this.addNode(i)),void 0!=n&&(this.index.set(tv.tagName,this.nodes.size),this.addNode(n))}getGrainSize(){let e=this.index.get(tp.tagName);if(e)return this.nodes.get(e)}setGrainSize(e){let t=this.index.get(tp.tagName);t?this.nodes.set(t,e):(this.index.set(tp.tagName,this.nodes.size),this.addNode(e))}removeGrainSize(){let e=this.index.get(tp.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(tp.tagName))}getAutomaticallySetMaxEne(){let e=this.index.get(tf.tagName);if(e)return this.nodes.get(e)}setAutomaticallySetMaxEne(e){let t=this.index.get(tf.tagName);t?this.nodes.set(t,e):(this.index.set(tf.tagName,this.nodes.size),this.addNode(e))}removeAutomaticallySetMaxEne(){let e=this.index.get(tf.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(tf.tagName))}getEnergyAboveTheTopHill(){let e=this.index.get(tx.tagName);if(e)return this.nodes.get(e)}setEnergyAboveTheTopHill(e){let t=this.index.get(tx.tagName);t?this.nodes.set(t,e):(this.index.set(tx.tagName,this.nodes.size),this.addNode(e))}removeEnergyAboveTheTopHill(){let e=this.index.get(tx.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(tx.tagName))}getMaxTemperature(){let e=this.index.get(tv.tagName);if(e)return this.nodes.get(e)}setMaxTemperature(e){let t=this.index.get(tv.tagName);t?this.nodes.set(t,e):(this.index.set(tv.tagName,this.nodes.size),this.addNode(e))}removeMaxTemperature(){let e=this.index.get(tv.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(tv.tagName))}}class tw extends V{static{this.tagName="me:title"}constructor(e,t){super(e,tw.tagName,t)}}class ty extends Y{static{this.tagName="moleculeList"}constructor(e,t){super(e,ty.tagName),this.index=new Map,void 0!=t&&t.forEach(e=>{this.nodes.set(this.nodes.size,e),this.index.set(e.getID(),this.nodes.size-1)})}getMolecule(e){let t=this.index.get(e);if(void 0!=t)return this.nodes.get(t)}removeMolecule(e){let t=this.index.get(e);void 0!=t&&(this.nodes.delete(t),this.index.delete(e))}addMolecule(e){let t=e.getID(),s=this.index.get(t);void 0!==s?(this.nodes.set(s,e),console.log("Replaced molecule with id "+t)):(this.nodes.set(this.nodes.size,e),this.index.set(t,this.nodes.size-1))}}class tC extends Y{static{this.tagName="reactionList"}constructor(e,t){super(e,tC.tagName),this.index=new Map,void 0!=t&&t.forEach(e=>{this.nodes.set(this.nodes.size,e),this.index.set(e.id,this.nodes.size-1)})}getReaction(e){let t=this.index.get(e);if(void 0!=t)return this.nodes.get(t)}removeReaction(e){let t=this.index.get(e);void 0!=t&&(this.nodes.delete(t),this.index.delete(e))}addReaction(e){let t=this.index.get(e.id);void 0!==t?(this.nodes.set(t,e),console.log("Replaced reaction with id "+e.id)):(this.nodes.set(this.nodes.size,e),this.index.set(e.id,this.nodes.size-1))}}class tb extends Y{static{this.tagName="conditionsList"}constructor(e,t){super(e,tS.tagName),this.index=new Map,void 0!=t&&t.forEach(e=>{this.nodes.set(this.nodes.size,e),this.index.set(e.id,this.nodes.size-1)})}getConditions(e){let t=this.index.get(e);if(void 0!=t)return this.nodes.get(t)}removeConditions(e){let t=this.index.get(e);void 0!=t&&(this.nodes.delete(t),this.index.delete(e))}addConditions(e){let t=this.index.get(e.id);void 0!=t?(this.nodes.set(t,e),console.log("Replaced conditions with id "+e.id)):(this.nodes.set(this.nodes.size,e),this.index.set(e.id,this.nodes.size-1))}}class tS extends Y{static{this.tagName="controlList"}constructor(e,t){super(e,tS.tagName),this.index=new Map,void 0!=t&&t.forEach(e=>{this.nodes.set(this.nodes.size,e),this.index.set(e.id,this.nodes.size-1)})}getControl(e){let t=this.index.get(e);if(void 0!=t)return this.nodes.get(t)}removeControl(e){let t=this.index.get(e);void 0!=t&&(this.nodes.delete(t),this.index.delete(e))}addControl(e){let t=this.index.get(e.id);void 0!==t?(this.nodes.set(t,e),console.log("Replaced control with id "+e.id)):(this.nodes.set(this.nodes.size,e),this.index.set(e.id,this.nodes.size-1))}}class tT extends Y{static{this.tagName="me:mesmer"}static{this.precisionOptions=["d","dd","qd","double","double-double","quad-double"]}static{this.pressureUnits=["Torr","PPCC","atm","mbar","psi","mols/cc"]}static{this.energyUnits=["kJ/mol","kJ per mol","cm-1","wavenumber","kcal/mol","kcal per mol","Hartree","au"]}static{this.frequencyUnits=["cm-1","GHz","amuA^2"]}static{this.elementTypes=["H","He","Li","Be","B","C","N","O","F","Ne","Na","Mg","Al","Si","P","S","Cl","Ar","K","Ca","Sc","Ti","V","Cr","Mn","Fe","Co","Ni","Cu","Zn","Ga","Ge","As","Se","Br","Kr","Rb","Sr","Y","Zr","Nb","Mo","Tc","Ru","Rh","Pd","Ag","Cd","In","Sn","Sb","Te","I","Xe","Cs","Ba","La","Ce","Pr","Nd","Pm","Sm","Eu","Gd","Tb","Dy","Ho","Er","Tm","Yb","Lu","Hf","Ta","W","Re","Os","Ir","Pt","Au","Hg","Tl","Pb","Bi","Po","At","Rn","Fr","Ra","Ac","Th","Pa","U","Np","Pu","Am","Cm","Bk","Cf","Es","Fm","Md","No","Lr","Rf","Db","Sg","Bh","Hs","Mt","Ds","Rg","Cn","Nh","Fl","Mc","Lv","Ts","Og"]}static{this.atomMasses=new Map}static{this.atomRadii=new Map}static{this.atomColors=new Map}static{this.bondColors=new Map}static{this.header=`<?xml version="1.0" encoding="utf-8" ?>
<?xml-stylesheet type='text/xsl' href='../../mesmer2.xsl' media='other'?>
<?xml-stylesheet type='text/xsl' href='../../mesmer1.xsl' media='screen'?>`}constructor(e,t,s,i,n,a,o,d,r){super(e,tT.tagName);let l=["H","O","C","N","Cl","S","Ph","Fe"],g=["White","Red","DarkGrey","Blue","Green","Yellow","Orange","Brown"];for(let e=0;e<l.length;e++)tT.atomColors.set(l[e],g[e]);let h=[1.00784,15.999,12.011,14.007,35.453,32.06,77.845,55.845];for(let e=0;e<l.length;e++)tT.atomMasses.set(l[e],h[e]);let m=[37,66,67,56,99,102,110,124];for(let e=0;e<l.length;e++)tT.atomRadii.set(l[e],m[e]);let c=[1,1.5,2,2.5,3,3.5,4,4.5,5,5.5,6];g=["Black","Red","DarkRed","Blue","DarkBlue","Green","DarkGreen","Yellow","DarkYellow","Orange","DarkOrange"];for(let e=0;e<c.length;e++)tT.bondColors.set(c[e],g[e]);this.index=new Map,void 0!=t&&(this.index.set(tw.tagName,this.nodes.size),this.addNode(t)),void 0!=s&&(this.index.set(ty.tagName,this.nodes.size),this.addNode(s)),void 0!=i&&(this.index.set(tC.tagName,this.nodes.size),this.addNode(i)),this.conditionsIndex=new Map,void 0!=n&&n.forEach(e=>{this.index.set(ec.tagName+e.id,this.nodes.size),this.conditionsIndex.set(e.id,this.nodes.size),this.addNode(e)}),void 0!=a&&(this.index.set(tE.tagName,this.nodes.size),this.addNode(a)),this.controlIndex=new Map,void 0!=o&&o.forEach(e=>{this.index.set(tr.tagName+e.id,this.nodes.size),this.controlIndex.set(e.id,this.nodes.size),this.addNode(e)}),void 0!=d&&(this.index.set(tN.tagName,this.nodes.size),this.addNode(d)),void 0!=r&&(this.index.set(ea.tagName,this.nodes.size),this.addNode(r))}getTitle(){let e=this.index.get(tw.tagName);if(void 0!=e)return this.nodes.get(e)}setTitle(e){let t=this.index.get(tw.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(tw.tagName,this.nodes.size),this.addNode(e))}getMoleculeList(){let e=this.index.get(ty.tagName);if(void 0!=e)return this.nodes.get(e)}setMoleculeList(e){let t=this.index.get(ty.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(ty.tagName,this.nodes.size),this.addNode(e))}getReactionList(){let e=this.index.get(tC.tagName);if(void 0!=e)return this.nodes.get(e)}setReactionList(e){let t=this.index.get(tC.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(tC.tagName,this.nodes.size),this.addNode(e))}addConditions(e){let t=ec.tagName+e.id,s=this.index.get(t);void 0!=s?this.nodes.set(s,e):(this.index.set(t,this.nodes.size),this.conditionsIndex.set(e.id,this.nodes.size),this.addNode(e))}getConditions(e){let t=this.conditionsIndex.get(e);if(void 0!=t)return this.nodes.get(t)}getConditionss(){let e=[];return this.conditionsIndex.forEach((t,s)=>{e.push(this.nodes.get(t))}),e}setConditionss(e){e.forEach(e=>{this.addConditions(e)})}getNextConditionsID(){let e=0,t=Array.from(this.conditionsIndex.keys()).sort((e,t)=>e-t);return console.log("sortedKeys "+m(t)),t.forEach(t=>{if(t>e)return e;e++}),e}removeConditions(e){let t=this.conditionsIndex.get(e);void 0!=t&&(this.nodes.delete(t),this.index.delete(ec.tagName+e),this.conditionsIndex.delete(e))}getModelParameters(){let e=this.index.get(tE.tagName);if(void 0!=e)return this.nodes.get(e)}setModelParameters(e){let t=this.index.get(tE.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(tE.tagName,this.nodes.size),this.addNode(e))}addControl(e){let t=tr.tagName+e.id,s=this.index.get(t);void 0!=s?this.nodes.set(s,e):(this.index.set(t,this.nodes.size),this.controlIndex.set(e.id,this.nodes.size),this.addNode(e))}getControl(e){let t=this.controlIndex.get(e);if(void 0!=t)return this.nodes.get(t)}getControls(){let e=[];return this.controlIndex.forEach((t,s)=>{e.push(this.nodes.get(t))}),e}setControls(e){e.forEach(e=>{this.addControl(e)})}getNextControlID(){let e=0,t=Array.from(this.controlIndex.keys()).sort((e,t)=>e-t);return console.log("sortedKeys "+m(t)),t.forEach(t=>{if(t>e)return e;e++}),e}removeControl(e){let t=this.controlIndex.get(e);console.log("removeControl "+e+" "+t),console.log("controlIndex "+m(Array.from(this.controlIndex.keys()))),void 0!=t&&(this.nodes.delete(t),this.index.delete(tr.tagName+e),this.controlIndex.delete(e))}getMetadataList(){let e=this.index.get(tN.tagName);if(void 0!=e)return this.nodes.get(e)}setMetadataList(e){let t=this.index.get(tN.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(tN.tagName,this.nodes.size),this.addNode(e))}getAnalysis(){let e=this.index.get(ea.tagName);if(void 0!=e)return this.nodes.get(e)}setAnalysis(e){let t=this.index.get(ea.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(ea.tagName,this.nodes.size),this.addNode(e))}}class tM extends V{static{this.tagName="me:description"}constructor(e,t){super(e,tM.tagName,t)}}class tz extends U{static{this.tagName="me:T"}constructor(e,t){super(e,tz.tagName,t)}}class t_ extends H{static{this.tagName="atom"}static{this.s_id="id"}static{this.s_elementType="elementType"}static{this.s_x3="x3"}static{this.s_y3="y3"}static{this.s_z3="z3"}constructor(e,t){super(e,t_.tagName),this.molecule=t}hasCoordinates(){return void 0!=this.attributes.get(t_.s_x3)&&void 0!=this.attributes.get(t_.s_y3)&&void 0!=this.attributes.get(t_.s_z3)}getID(){return this.attributes.get(t_.s_id)}setID(e){this.attributes.set(t_.s_id,e)}getElementType(){return this.attributes.get(t_.s_elementType)}setElementType(e){this.attributes.set(t_.s_elementType,e)}getX3(){let e=this.attributes.get(t_.s_x3);if(void 0!=e)return new(d(r))(e)}setX3(e){this.attributes.set(t_.s_x3,e.toString())}removeX3(){this.attributes.delete(t_.s_x3)}getY3(){let e=this.attributes.get(t_.s_y3);if(void 0!=e)return new(d(r))(e)}setY3(e){this.attributes.set(t_.s_y3,e.toString())}removeY3(){this.attributes.delete(t_.s_y3)}getZ3(){let e=this.attributes.get(t_.s_z3);if(void 0!=e)return new(d(r))(e)}setZ3(e){this.attributes.set("z3",e.toString())}removeZ3(){this.attributes.delete("z3")}}class tR extends Y{static{this.tagName="atomArray"}constructor(e,t){super(e,tR.tagName),this.index=new Map,this.reverseIndex=new Map,void 0==t?this.atoms=new Map:(this.atoms=t,t.forEach((e,t)=>{this.index.set(t,this.nodes.size),this.reverseIndex.set(this.nodes.size,t),this.nodes.set(this.nodes.size,e)}))}getAtom(e){return this.atoms.get(e)}addAtom(e,t){if(void 0==t){let s=e.getID();if(void 0==s)s=this.getNextAtomID(),e.setID(s);else if(this.atoms.has(s)){let t=this.getNextAtomID();console.warn("Atom with id "+s+" already exists, adding with id "+t),e.setID(t),s=t}t=s}return this.index.set(t,this.nodes.size),this.reverseIndex.set(this.nodes.size,t),this.nodes.set(this.nodes.size,e),this.atoms.set(t,e),t}getNextAtomID(){let e=1,t="a1";if(this.atoms.has(t))for(;this.atoms.has(t);)e++,t="a"+e.toString();return t}removeAtom(e){let t=this.index.get(e);if(void 0==t)throw Error("Atom with id "+e+" does not exist!");console.log("Removing atom with id "+e),this.atoms.delete(e),this.deleteNodeAndReindex(t,e)}deleteNodeAndReindex(e,t){this.nodes.delete(e),this.index.delete(t),this.reverseIndex.delete(e);let s=new Map,i=new Map,n=new Map;this.index.forEach((t,a)=>{t>e?(s.set(t-1,this.nodes.get(t)),i.set(a,t-1),n.set(t-1,a)):(s.set(t,this.nodes.get(t)),i.set(a,t),n.set(t,a))}),this.nodes=s,this.index=i,this.reverseIndex=n}}class tL extends H{static{this.tagName="bond"}static{this.s_atomRefs2="atomRefs2"}static{this.s_id="id"}static{this.s_order="order"}static{this.orderOptions=["1","1.5","2","2.5","3","3.5","4","4.5","5","5.5","6"]}constructor(e,t){super(e,tL.tagName),this.molecule=t}getAtomRefs2(){let e=this.attributes.get(tL.s_atomRefs2);return(e?.split(" "),void 0==e)?"a1 a1":e}setAtomRefs2(e){this.attributes.set(tL.s_atomRefs2,e)}getID(){return this.attributes.get(tL.s_id)}setID(e){this.attributes.set(tL.s_id,e)}getOrder(){let e=this.attributes.get(tL.s_order);if(void 0!=e)return parseFloat(e)}setOrder(e){this.attributes.set(tL.s_order,e.toString())}}class tP extends Y{static{this.tagName="bondArray"}constructor(e,t){super(e,tP.tagName),this.index=new Map,this.reverseIndex=new Map,void 0==t?this.bonds=new Map:(this.bonds=t,t.forEach((e,t)=>{this.index.set(t,this.nodes.size),this.reverseIndex.set(this.nodes.size,t),this.nodes.set(this.nodes.size,e)}))}getBondIds(){return Array.from(this.bonds.keys())}getBond(e){return this.bonds.get(e)}addBond(e,t){if(void 0==t){let s=e.getID();if(void 0==s)s=this.getNextBondID(),e.setID(s);else if(this.bonds.has(s)){let t=this.getNextBondID();console.log("Bond with id "+s+" already exists, adding with id "+t),e.setID(t),s=t}t=s}return this.index.set(t,this.nodes.size),this.reverseIndex.set(this.nodes.size,t),this.nodes.set(this.nodes.size,e),this.bonds.set(t,e),t}getNextBondID(){let e=1,t="b1";for(;this.bonds.has(t);)e++,t="b"+e.toString();return t}removeBond(e){let t=this.index.get(e);if(void 0==t)throw Error("Bond with id "+e+" does not exist!");console.log("Removing bond with id "+e),this.bonds.delete(e),this.deleteNodeAndReindex(t,e)}deleteNodeAndReindex(e,t){this.nodes.delete(e),this.index.delete(t),this.reverseIndex.delete(e);let s=new Map,i=new Map,n=new Map;this.index.forEach((t,a)=>{t>e?(s.set(t-1,this.nodes.get(t)),i.set(a,t-1),n.set(t-1,a)):(s.set(t,this.nodes.get(t)),i.set(a,t),n.set(t,a))}),this.nodes=s,this.index=i,this.reverseIndex=n}}class tI extends U{static{this.tagName="scalar"}static{this.s_units="units"}constructor(e,t){super(e,tI.tagName,t)}updateUnits(e){if(e){let t=this.attributes.get(tI.s_units);void 0!=t&&t!=e&&this.attributes.set(tI.s_units,e)}}}class tB extends j{static{this.tagName="array"}static{this.s_units="units"}static{this.propertyDictRefs=new Set(["me:ZPE","me:Hf0","me:HfAT0","me:Hf298","me:rotConsts","me:symmetryNumber","me:TSOpticalSymmetryNumber","me:frequenciesScaleFactor","me:vibFreqs","me:MW","me:spinMultiplicity","me:epsilon","me:sigma","me:hessian","me:EinsteinAij","me:EinsteinBij"])}constructor(e,t,s){super(e,tB.tagName,t,s)}updateUnits(e){if(e){let t=this.attributes.get(tB.s_units);void 0!=t&&t!=e&&(this.attributes.set(tB.s_units,e),console.log("Units changed from "+t+" to "+e))}}}class tD extends j{static{this.tagName="matrix"}static{this.s_rows="rows"}static{this.s_matrixType="matrixType"}static{this.s_units="units"}constructor(e,t,s){super(e,tB.tagName,t,s)}updateUnits(e){if(e){let t=this.attributes.get(tB.s_units);void 0!=t&&t!=e&&(this.attributes.set(tB.s_units,e),console.log("Units changed from "+t+" to "+e))}}}class tA extends Y{static{this.tagName="property"}static{this.s_dictRef="dictRef"}constructor(e,t){super(e,tA.tagName);let s=e.get(tA.s_dictRef);if(void 0==s){let t=e.get("title");if(void 0==t)throw Error(tA.s_dictRef+" and title are undefined!");if("MW"==t)s="me:MW";else if("Hf298"==t)s="me:Hf298";else if("Hf0"==t)s="me:Hf0";else throw Error("Title not recognised!")}this.dictRef=s,t&&this.nodes.set(0,t)}getProperty(){return this.nodes.get(0)}setProperty(e){this.nodes.set(0,e)}}class tk extends tA{static{this.dictRef="me:ZPE"}constructor(e,t){super(e,t)}setUnits(e){this.getProperty().updateUnits(e)}}class tO extends tA{static{this.dictRef="me:Hf0"}constructor(e,t){super(e,t)}setUnits(e){this.getProperty().updateUnits(e)}}class tG extends tA{static{this.dictRef="me:Hf298"}constructor(e,t){super(e,t)}setUnits(e){this.getProperty().updateUnits(e)}}class tF extends tA{static{this.dictRef="me:frequenciesScaleFactor"}constructor(e,t){super(e,t)}}class tq extends tA{static{this.dictRef="me:vibFreqs"}constructor(e,t){super(e,t)}}class tH extends tA{static{this.dictRef="me:rotConsts"}static{this.unitOptions=["cm-1","GHz","amuA^2"]}constructor(e,t){super(e,t)}}class tV extends tA{static{this.dictRef="me:MW"}constructor(e,t){super(e,t)}}class tU extends tA{static{this.dictRef="me:imFreqs"}constructor(e,t){super(e,t)}}class tj extends Y{static{this.tagName="propertyList"}constructor(e,t){super(e,tj.tagName),this.index=new Map,void 0!=t&&t.forEach(e=>{this.nodes.set(this.nodes.size,e),this.index.set(e.dictRef,this.nodes.size-1)})}getProperty(e){let t=this.index.get(e);if(void 0!=t)return this.nodes.get(t);throw Error("Property "+e+" does not exist")}setProperty(e){let t=this.index.get(e.dictRef);void 0==t?(this.nodes.set(this.nodes.size,e),this.index.set(e.dictRef,this.nodes.size-1)):(console.log("Property "+e.dictRef+" already exists, updating..."),this.nodes.set(t,e))}removeProperty(e){let t=this.index.get(e);if(void 0!=t){this.nodes.delete(t),this.index.delete(e);let s=new Map;this.index.forEach((e,i)=>{e>t?s.set(i,e-1):s.set(i,e)}),this.index=s}}}class tY extends W{static{this.tagName="me:deltaEDown"}static{this.s_bathGas="bathGas"}constructor(e,t){super(e,tY.tagName,t)}getBathGas(){return this.attributes.get(tY.s_bathGas)}setBathGas(e){this.attributes.set(tY.s_bathGas,e)}}class tX extends tY{static{this.tagName="me:deltaEDown2"}constructor(e,t){super(e,t)}}class t$ extends W{static{this.tagName="me:deltaEDownTExponent"}static{this.s_referenceTemperature="referenceTemperature"}constructor(e,t){super(e,t$.tagName,t)}getReferenceTemperature(){return parseFloat(l(this.attributes,t$.s_referenceTemperature))}setReferenceTemperature(e){this.attributes.set(t$.s_referenceTemperature,e.toString())}}class tK extends W{static{this.tagName="me:deltaEDownLinEne"}constructor(e,t){super(e,tK.tagName,t)}}class tW extends Y{static{this.tagName="me:energyTransferModel"}constructor(e,t){super(e,tW.tagName),void 0!=t&&t.forEach(e=>{this.nodes.set(this.nodes.size,e)})}getDeltaEDowns(){let e=[];return this.nodes.forEach(t=>{t instanceof tY&&e.push(t)}),e}setDeltaEDowns(e){this.nodes.clear(),e.forEach(e=>{this.nodes.set(this.nodes.size,e)})}getDeltaEDown(e){if(e<0||e>=this.nodes.size)throw Error("index out of range");return this.nodes.get(e)}setDeltaEDown(e,t){this.nodes.set(e,t)}addDeltaEDown(e){return this.nodes.set(this.nodes.size,e),this.nodes.size-1}}class tZ extends H{static{this.tagName="me:DOSCMethod"}static{this.xsi_typeOptions=["ClassicalRotors","QMRotors","me:ClassicalRotors","me:QMRotors"]}static{this.s_xsi_type="xsi:type"}constructor(e){if(super(e,tZ.tagName),void 0==e.get(tZ.s_xsi_type)){let t=e.get("name");if(void 0==t)throw Error("Neither xsi:type or name are defined.");e.set(tZ.s_xsi_type,t)}}getXsiType(){return this.attributes.get(tZ.s_xsi_type)}setXsiType(e){this.attributes.set(tZ.s_xsi_type,e)}}class tQ extends V{static{this.tagName="me:bondRef"}constructor(e,t){super(e,tQ.tagName,t)}}class tJ extends H{static{this.tagName="me:PotentialPoint"}static{this.s_angle="angle"}static{this.s_potential="potential"}constructor(e){super(e,tJ.tagName)}getAngle(){return this.attributes.get(tJ.s_angle)}setAngle(e){this.attributes.set(tJ.s_angle,e.toString())}getPotential(){return this.attributes.get(tJ.s_potential)}setPotential(e){this.attributes.set(tJ.s_potential,e.toString())}}class t0 extends H{static{this.tagName="me:DistributionCalcMethod"}static{this.s_default="default"}static{this.s_name="name"}constructor(e){super(e,t0.tagName)}getDefault(){return this.attributes.get(t0.s_default)}getName(){return this.attributes.get(t0.s_name)}}class t1 extends H{static{this.tagName="me:thermoValue"}static{this.s_T="T"}static{this.s_H="H"}static{this.s_S="S"}static{this.s_G="G"}static{this.s_Cp="Cp"}constructor(e){super(e,t_.tagName)}getT(){return new(d(r))(this.attributes.get(t1.s_T))}getH(){return new(d(r))(this.attributes.get(t1.s_H))}getS(){return new(d(r))(this.attributes.get(t1.s_S))}getG(){return new(d(r))(this.attributes.get(t1.s_G))}getCp(){return new(d(r))(this.attributes.get(t1.s_Cp))}toStringArray(){return[this.getT().toString(),this.getH().toString(),this.getS().toString(),this.getG().toString(),this.getCp().toString()]}toCSV(){return this.toStringArray().join(",")}}class t2 extends Y{static{this.tagName="me:thermoTable"}static{this.s_unitsT="unitsT"}static{this.s_unitsH="unitsH"}static{this.s_unitsS="unitsS"}static{this.s_unitsG="unitsG"}static{this.s_unitsCp="unitsCp"}constructor(e,t){super(e,t2.tagName),void 0!=t?(t.forEach(e=>{this.addNode(e)}),this.tvs=t):this.tvs=[]}get(e){return this.tvs[e]}set(e,t){this.nodes.set(e,t),this.tvs[e]=t}add(e){return this.addNode(e),this.tvs.push(e),this.nodes.size-1}remove(e){this.nodes.delete(e),this.tvs.splice(e,1)}init(e){this.clear(),e.forEach(e=>{this.addNode(e),this.tvs.push(e)})}clear(){this.nodes.clear(),this.tvs=[]}getHeader(){return["T ("+this.attributes.get(t2.s_unitsT)+")","H(T)-H(0) ("+this.attributes.get(t2.s_unitsH)+")","S(T) ("+this.attributes.get(t2.s_unitsS)+")","G(T) ("+this.attributes.get(t2.s_unitsG)+")","Cp(T) ("+this.attributes.get(t2.s_unitsCp)+")"]}toCSV(){let e=this.getHeader().join(",")+"\n";return this.tvs.forEach(t=>{e+=t.toCSV()+"\n"}),e}}class t3 extends Y{static{this.tagName="me:HinderedRotorPotential"}static{this.formats=new Set(["numerical","analytical"])}static{this.s_format="format"}static{this.s_units="units"}static{this.s_expansionSize="expansionSize"}static{this.s_useSineTerms="useSineTerms"}constructor(e,t){super(e,t3.tagName);let s=e.get(t3.s_format);if(void 0==s)throw Error(t3.s_format+" is undefined!");this.format=s;let i=e.get(t3.s_units);if(void 0==i)throw Error(t3.s_units+" is undefined!");this.units=i,void 0!=t&&t.forEach(e=>{this.nodes.set(this.nodes.size,e)}),void 0==e.get(t3.s_useSineTerms)?this.useSineTerms=!1:this.useSineTerms=!0}getFormat(){return this.format}setFormat(e){this.format=e,this.attributes.set(t3.s_format,e)}getUnits(){return this.units}setUnits(e){this.units=e,this.attributes.set(t3.s_units,e)}getExpansionSize(){return this.attributes.get(t3.s_expansionSize)}setExpansionSize(e){this.attributes.set(t3.s_expansionSize,e.toString())}getUseSineTerms(){return this.useSineTerms}setUseSineTerms(e){this.useSineTerms=e,this.attributes.set(t3.s_useSineTerms,e?"yes":"no")}getPotentialPoint(e){return this.nodes.get(e)}setPotentialPoint(e,t){this.nodes.set(e,t)}setPotentialPoints(e){this.nodes.clear(),e.forEach(e=>{this.nodes.set(this.nodes.size,e)})}addPotentialPoint(e){return this.nodes.set(this.nodes.size,e),this.nodes.size-1}removePotentialPoint(e){this.nodes.delete(e)}}class t5 extends U{static{this.tagName="me:periodicity"}constructor(e,t){super(e,t5.tagName,t)}}class t4 extends Y{static{this.tagName="me:ExtraDOSCMethod"}constructor(e,t,s,i){super(e,t4.tagName),this.index=new Map,t&&(this.nodes.set(this.nodes.size,t),this.index.set(tQ.tagName,this.nodes.size-1)),s&&(this.nodes.set(this.nodes.size,s),this.index.set(t3.tagName,this.nodes.size-1)),i&&(this.nodes.set(this.nodes.size,i),this.index.set(t5.tagName,this.nodes.size-1))}getBondRef(){let e=this.index.get(tQ.tagName);if(void 0!=e)return this.nodes.get(e)}setBondRef(e){let t=this.index.get(tQ.tagName);void 0!=t?this.nodes.set(t,e):(this.nodes.set(this.nodes.size,e),this.index.set(tQ.tagName,this.nodes.size-1))}getHinderedRotorPotential(){let e=this.index.get(t3.tagName);if(void 0!=e)return this.nodes.get(e)}setHinderedRotorPotential(e){let t=this.index.get(t3.tagName);void 0!=t?this.nodes.set(t,e):(this.nodes.set(this.nodes.size,e),this.index.set(t3.tagName,this.nodes.size-1))}getPeriodicity(){let e=this.index.get(t5.tagName);if(void 0!=e)return this.nodes.get(e)}setPeriodicity(e){let t=this.index.get(t5.tagName);void 0!=t?this.nodes.set(t,e):(this.nodes.set(this.nodes.size,e),this.index.set(t5.tagName,this.nodes.size-1))}}class t6 extends U{static{this.tagName="me:reservoirSize"}constructor(e,t){super(e,t6.tagName,t)}}class t8 extends U{static{this.tagName="me:qtot"}constructor(e,t){super(e,t8.tagName,t)}}class t7 extends U{static{this.tagName="me:sumc"}constructor(e,t){super(e,t7.tagName,t)}}class t9 extends U{static{this.tagName="me:sumg"}constructor(e,t){super(e,t9.tagName,t)}}class se extends Y{static{this.tagName="me:densityOfStates"}static{this.header=[tz.tagName,t8.tagName,t7.tagName,t9.tagName]}constructor(e){super(e,se.tagName),this.index=new Map}getT(){let e=this.index.get(tz.tagName);if(void 0!=e)return this.nodes.get(e)}setT(e){let t=this.index.get(e.tagName);void 0!=t?this.nodes.set(t,e):(this.nodes.set(this.nodes.size,e),this.index.set(e.tagName,this.nodes.size-1))}getQtot(){let e=this.index.get(t8.tagName);if(void 0!=e)return this.nodes.get(e)}setQtot(e){let t=this.index.get(e.tagName);void 0!=t?this.nodes.set(t,e):(this.nodes.set(this.nodes.size,e),this.index.set(e.tagName,this.nodes.size-1))}getSumc(){let e=this.index.get(t7.tagName);if(void 0!=e)return this.nodes.get(e)}setSumc(e){let t=this.index.get(e.tagName);void 0!=t?this.nodes.set(t,e):(this.nodes.set(this.nodes.size,e),this.index.set(e.tagName,this.nodes.size-1))}getSumg(){let e=this.index.get(t9.tagName);if(void 0!=e)return this.nodes.get(e)}setSumg(e){let t=this.index.get(e.tagName);void 0!=t?this.nodes.set(t,e):(this.nodes.set(this.nodes.size,e),this.index.set(e.tagName,this.nodes.size-1))}toStringArray(){return[this.getT().getValue().toString(),this.getQtot().getValue().toString(),this.getSumc().getValue().toString(),this.getSumg().getValue().toString()]}}class st extends Y{static{this.tagName="me:densityOfStatesList"}constructor(e,t,s){if(super(e,st.tagName),this.index=new Map,this.dosIndex=new Map,t&&(this.nodes.set(this.nodes.size,t),this.index.set(tM.tagName,this.nodes.size-1)),s){let e=0;s.forEach(t=>{this.dosIndex.set(e,this.nodes.size),this.nodes.set(this.nodes.size,t),e++})}}getDescription(){let e=this.index.get(tM.tagName);if(void 0!=e)return this.nodes.get(e)}setDescription(e){let t=this.index.get(tM.tagName);void 0!=t?this.nodes.set(t,e):(this.nodes.set(this.nodes.size,e),this.index.set(tM.tagName,this.nodes.size-1))}getDensityOfStates(e){let t=this.dosIndex.get(e);if(void 0!=t)return this.nodes.get(t)}setDensityOfStates(e,t){let s=this.dosIndex.get(e);void 0!=s?this.nodes.set(s,t):(this.nodes.set(this.nodes.size,t),this.dosIndex.set(e,this.nodes.size-1))}addDensityOfStates(e){this.nodes.set(this.nodes.size,e);let t=this.nodes.size-1;return this.dosIndex.set(t,this.nodes.size-1),t}removeDensityOfStates(e){let t=this.dosIndex.get(e);void 0!=t&&this.nodes.delete(t)}toCSV(){let e="",t=se.header;return e+=t.join(",")+"\n",this.nodes.forEach(t=>{e+=t.toStringArray().join(",")+"\n"}),e}}class ss extends Y{static{this.tagName="molecule"}static{this.s_id="id"}static{this.s_description="description"}static{this.s_active="active"}constructor(e,t,s,i,n,a,o,d,r,l,g,h){super(e,ss.tagName),this.index=new Map,this.setID(t);let m=0;s&&(this.nodes.set(m,s),this.index.set(tN.tagName,m),m++),i&&(this.nodes.set(m,i),this.index.set(tR.tagName,m),m++),n&&(this.nodes.set(m,n),this.index.set(tP.tagName,m),m++),a&&(this.nodes.set(m,a),this.index.set(tj.tagName,m),m++),o&&(this.nodes.set(m,o),this.index.set(tW.tagName,m),m++),d&&(this.nodes.set(m,d),this.index.set(tZ.tagName,m)),r&&(this.nodes.set(m,r),this.index.set(t0.tagName,m)),l&&(this.nodes.set(m,l),this.index.set(t4.tagName,m)),g&&(this.nodes.set(m,g),this.index.set(t6.tagName,m)),h&&(this.nodes.set(m,h),this.index.set(t2.tagName,m))}getID(){return this.attributes.get(ss.s_id)}setID(e){this.attributes.set(ss.s_id,e)}getDescription(){let e=this.attributes.get(ss.s_description);return void 0!=e?e:this.getID()}setDescription(e){this.attributes.set(ss.s_description,e)}getActive(){let e=this.attributes.get(ss.s_active);if(void 0!=e)return"true"==e}setActive(e){this.attributes.set(ss.s_active,e.toString())}getLabel(){let e=this.getID(),t=this.getDescription();return void 0!=t&&(e+=" ("+t+")"),this.getActive()&&(e+=" ("+ss.s_active+")"),e}getMetadataList(){let e=this.index.get(tN.tagName);if(void 0!=e)return this.nodes.get(e)}setMetadataList(e){let t=this.index.get(tN.tagName);void 0==t?(this.index.set(tN.tagName,this.nodes.size),this.addNode(e)):this.nodes.set(t,e)}getPropertyList(){let e=this.index.get(tj.tagName);if(void 0!=e)return this.nodes.get(e)}setPropertyList(e){let t=this.index.get(tj.tagName);void 0==t?(this.index.set(tj.tagName,this.nodes.size),this.addNode(e)):this.nodes.set(t,e)}getProperty(e){let t=this.getPropertyList();if(void 0!=t)return t.getProperty(e)}setProperty(e){this.getPropertyList().setProperty(e)}getAtom(e){return this.getAtoms().getAtom(e)}getAtoms(){let e=this.index.get(tR.tagName);return this.nodes.get(e)}setAtoms(e){this.index.set(tR.tagName,this.nodes.size),this.nodes.set(this.nodes.size,e)}getBond(e){return this.getBonds().getBond(e)}getBonds(){let e=this.index.get(tP.tagName);return this.nodes.get(e)}setBonds(e){this.index.set(tP.tagName,this.nodes.size),this.nodes.set(this.nodes.size,e)}getEnergyTransferModel(){let e=this.index.get(tW.tagName);if(void 0!=e)return this.nodes.get(e)}setEnergyTransferModel(e){let t=this.index.get(tW.tagName);void 0==t?(this.index.set(tW.tagName,this.nodes.size),this.addNode(e)):this.nodes.set(t,e)}getDOSCMethod(){let e=this.index.get(tZ.tagName);if(void 0!=e)return this.nodes.get(e)}setDOSCMethod(e){let t=this.index.get(tZ.tagName);void 0==t?(this.index.set(tZ.tagName,this.nodes.size),this.addNode(e)):this.nodes.set(t,e)}getDistributionCalcMethod(){let e=this.index.get(t0.tagName);if(void 0!=e)return this.nodes.get(e)}setDistributionCalcMethod(e){let t=this.index.get(t0.tagName);void 0==t?(this.index.set(t0.tagName,this.nodes.size),this.addNode(e)):this.nodes.set(t,e)}getExtraDOSCMethod(){let e=this.index.get(t4.tagName);if(void 0!=e)return this.nodes.get(e)}setExtraDOSCMethod(e){let t=this.index.get(t4.tagName);void 0==t?(this.index.set(t4.tagName,this.nodes.size),this.addNode(e)):this.nodes.set(t,e)}getReservoirSize(){let e=this.index.get(t6.tagName);if(void 0!=e)return this.nodes.get(e)}setReservoirSize(e){let t=this.index.get(t6.tagName);void 0==t?(this.index.set(t6.tagName,this.nodes.size),this.addNode(e)):this.nodes.set(t,e)}getDensityOfStatesList(){let e=this.index.get(st.tagName);if(void 0!=e)return this.nodes.get(e)}setDensityOfStatesList(e){let t=this.index.get(st.tagName);void 0==t?(this.index.set(st.tagName,this.nodes.size),this.addNode(e)):this.nodes.set(t,e)}getThermoTable(){let e=this.index.get(t2.tagName);if(void 0!=e)return this.nodes.get(e)}setThermoTable(e){let t=this.index.get(t2.tagName);void 0==t?(this.index.set(t2.tagName,this.nodes.size),this.addNode(e)):this.nodes.set(t,e)}getEnergy(){let e=this.getProperty(tk.dictRef);if(void 0==e)throw console.log(this.toString()),Error(tk.dictRef+" property not found!");return e.getProperty().value}}class si extends H{static{this.tagName="molecule"}constructor(e){super(e,si.tagName),this.ref=e.get("ref"),this.role=e.get("role")}setRole(e){this.role=e}}class sn extends Y{static{this.tagName="reactant"}static{this.roleOptions=["deficientReactant","excessReactant","modelled"]}constructor(e,t){super(e,sn.tagName),this.addNode(t)}getMolecule(){return this.nodes.get(0)}}class sa extends Y{static{this.tagName="product"}static{this.roleOptions=["modelled","sink"]}constructor(e,t){super(e,sa.tagName),this.addNode(t)}getMolecule(){return this.nodes.get(0)}}class so extends Y{static{this.tagName="me:transitionState"}constructor(e,t){super(e,so.tagName),this.addNode(t)}getMolecule(){return this.nodes.get(0)}}class sd extends U{static{this.tagName="me:preExponential"}constructor(e,t){super(e,sd.tagName,t)}}class sr extends U{static{this.tagName="me:activationEnergy"}constructor(e,t){super(e,sr.tagName,t)}}class sl extends U{static{this.tagName="me:TInfinity"}constructor(e,t){super(e,sl.tagName,t)}}class sg extends U{static{this.tagName="me:nInfinity"}constructor(e,t){super(e,sg.tagName,t)}}class sh extends Y{static{this.tagName="me:MCRCMethod"}constructor(e){super(e,sh.tagName)}}class sm extends sh{static{this.xsiType="me:MesmerILT"}static{this.xsiType2="MesmerILT"}constructor(e,t,s,i,n){super(e),this.index=new Map,void 0!=t&&(this.index.set(sd.tagName,this.index.size),this.addNode(t)),void 0!=s&&(this.index.set(sr.tagName,this.index.size),this.addNode(s)),void 0!=i&&(this.index.set(sl.tagName,this.index.size),this.addNode(i)),void 0!=n&&(this.index.set(sg.tagName,this.index.size),this.addNode(n))}getPreExponential(){let e=this.index.get(sd.tagName);if(void 0!=e)return this.nodes.get(e)}setPreExponential(e){let t=this.index.get(sd.tagName);void 0==t?(this.index.set(sd.tagName,this.nodes.size),this.addNode(e)):this.nodes.set(t,e)}getActivationEnergy(){let e=this.index.get(sr.tagName);if(void 0!=e)return this.nodes.get(e)}setActivationEnergy(e){let t=this.index.get(sr.tagName);void 0==t?(this.index.set(sr.tagName,this.nodes.size),this.addNode(e)):this.nodes.set(t,e)}getTInfinity(){let e=this.index.get(sl.tagName);if(void 0!=e)return this.nodes.get(e)}setTInfinity(e){let t=this.index.get(sl.tagName);void 0==t?(this.index.set(sl.tagName,this.nodes.size),this.addNode(e)):this.nodes.set(t,e)}getNInfinity(){let e=this.index.get(sg.tagName);if(void 0!=e)return this.nodes.get(e)}setNInfinity(e){let t=this.index.get(sg.tagName);void 0==t?(this.index.set(sg.tagName,this.nodes.size),this.addNode(e)):this.nodes.set(t,e)}}class sc extends H{static{this.tagName="me:tunneling"}static{this.options=["Eckart","WKB"]}static{this.s_name="name"}constructor(e){super(e,sc.tagName)}getName(){return this.attributes.get(sc.s_name)}setName(e){this.attributes.set(sc.s_name,e)}}class su extends U{static{this.tagName="me:excessReactantConc"}constructor(e,t){super(e,su.tagName,t)}}class sN extends U{static{this.tagName="me:val"}constructor(e,t){super(e,sN.tagName,t)}}class sp extends U{static{this.tagName="me:rev"}constructor(e,t){super(e,sp.tagName,t)}}class sf extends U{static{this.tagName="me:Keq"}constructor(e,t){super(e,sf.tagName,t)}}class sx extends Y{static{this.tagName="me:kinf"}constructor(e,t,s,i,n){super(e,sx.tagName),this.index=new Map,void 0!=t&&(this.index.set(tz.tagName,this.nodes.size),this.addNode(t)),void 0!=s&&(this.index.set(sN.tagName,this.nodes.size),this.addNode(s)),void 0!=i&&(this.index.set(sp.tagName,this.nodes.size),this.addNode(i)),void 0!=n&&(this.index.set(sf.tagName,this.nodes.size),this.addNode(n))}getT(){let e=this.index.get(tz.tagName);if(void 0!=e)return this.nodes.get(e)}setT(e){let t=this.index.get(tz.tagName);void 0==t?(this.index.set(tz.tagName,this.nodes.size),this.addNode(e)):this.nodes.set(t,e)}getVal(){let e=this.index.get(sN.tagName);if(void 0!=e)return this.nodes.get(e)}setVal(e){let t=this.index.get(sN.tagName);void 0==t?(this.index.set(sN.tagName,this.nodes.size),this.addNode(e)):this.nodes.set(t,e)}getRev(){let e=this.index.get(sp.tagName);if(void 0!=e)return this.nodes.get(e)}setRev(e){let t=this.index.get(sp.tagName);void 0==t?(this.index.set(sp.tagName,this.nodes.size),this.addNode(e)):this.nodes.set(t,e)}getKeq(){let e=this.index.get(sf.tagName);if(void 0!=e)return this.nodes.get(e)}setKeq(e){let t=this.index.get(sf.tagName);void 0==t?(this.index.set(sf.tagName,this.nodes.size),this.addNode(e)):this.nodes.set(t,e)}getHeader(){let e=[];return e.push("T ("+this.getT()?.attributes.get("units")+")"),e.push("kf ("+this.getVal()?.attributes.get("units")+")"),e.push("krev ("+this.getRev()?.attributes.get("units")+")"),e.push("Keq ("+this.getKeq()?.attributes.get("units")+")"),e}toStringArray(){let e=this.getT(),t=this.getVal(),s=this.getRev(),i=this.getKeq();return[e.getValue().toString(),t.getValue().toString(),s.getValue().toString(),i.getValue().toString()]}toCSV(){return this.toStringArray().join(",")}}class sv extends Y{static{this.tagName="me:canonicalRateList"}constructor(e,t,s){super(e,sv.tagName),this.index=new Map,this.kinfIndex=new Map,void 0!=t&&(this.index.set(tM.tagName,this.nodes.size),this.addNode(t)),void 0!=s&&s.forEach(e=>{this.kinfIndex.set(this.nodes.size,this.nodes.size),this.addNode(e)})}getDescription(){let e=this.index.get(tM.tagName);if(void 0!=e)return this.nodes.get(e)}setDescription(e){let t=this.index.get(tM.tagName);void 0==t?(this.index.set(tM.tagName,this.nodes.size),this.addNode(e)):this.nodes.set(t,e)}getKinfs(){return Array.from(this.kinfIndex.values()).map(e=>this.nodes.get(e))}addKinf(e){this.kinfIndex.set(this.kinfIndex.size,this.nodes.size),this.addNode(e)}toCSV(){let e="",t=!0;return this.getKinfs().forEach(s=>{t&&(t=!1,e+=s.getHeader().join(",")+"\n"),e+=s.toCSV()+"\n"}),e}}class sE extends Y{static{this.tagName="reaction"}static{this.s_id="id"}constructor(e,t,s,i,n,a,o,d){super(e,sE.tagName),this.index=new Map,this.reactantsIndex=new Map,this.productsIndex=new Map,this.transitionStatesIndex=new Map;let r=e.get(sE.s_id);if(void 0==r)throw Error(sE.s_id+" is undefined!");this.id=r,void 0!=t&&(t.forEach(e=>{this.reactantsIndex.set(e.getMolecule().ref,this.nodes.size),this.addNode(e)}),this.index.set(sn.tagName,this.reactantsIndex)),void 0!=s&&(s.forEach(e=>{this.productsIndex.set(e.getMolecule().ref,this.nodes.size),this.addNode(e)}),this.index.set(sa.tagName,this.productsIndex)),void 0!=i&&(this.index.set(sc.tagName,this.nodes.size),this.addNode(i)),void 0!=n&&(n.forEach(e=>{this.transitionStatesIndex.set(e.getMolecule().ref,this.nodes.size),this.addNode(e)}),this.index.set(so.tagName,this.transitionStatesIndex)),void 0!=a&&(this.index.set(sh.tagName,this.nodes.size),this.addNode(a)),void 0!=o&&(this.index.set(su.tagName,this.nodes.size),this.addNode(o)),void 0!=d&&(this.index.set(sv.tagName,this.nodes.size),this.addNode(d))}addToIndex(e,t){let s=this.index.get(e);if(void 0==s)this.index.set(e,this.nodes.size);else if(s instanceof Map)s.set(t.tagName,this.nodes.size);else{let i=new Map;i.set(this.nodes.get(s).ref,s),i.set(t.tagName,this.nodes.size),this.index.set(e,i)}}getReactants(){let e=this.index.get(sn.tagName);return void 0==e?[]:e instanceof Map?Array.from(e.values()).map(e=>this.nodes.get(e)):[this.nodes.get(e)]}setReactants(e){e.forEach(e=>{this.reactantsIndex.set(e.getMolecule().ref,this.nodes.size),this.addNode(e)}),this.index.set(sn.tagName,this.reactantsIndex)}getReactant(e){let t=this.reactantsIndex.get(e);if(void 0==t)throw Error(`Reactant with ref ${e} not found`);return this.nodes.get(t)}addReactant(e){this.reactantsIndex.set(e.getMolecule().ref,this.nodes.size),this.addNode(e)}removeReactant(e){let t=this.reactantsIndex.get(e);if(void 0==t)throw Error(`Reactant with ref ${e} not found`);this.nodes.delete(t),this.reactantsIndex.delete(e)}getProducts(){let e=this.index.get(sa.tagName);return void 0==e?[]:e instanceof Map?Array.from(e.values()).map(e=>this.nodes.get(e)):[this.nodes.get(e)]}setProducts(e){e.forEach(e=>{this.productsIndex.set(e.getMolecule().ref,this.nodes.size),this.addNode(e)}),this.index.set(sa.tagName,this.productsIndex)}getProduct(e){let t=this.productsIndex.get(e);if(void 0==t)throw Error(`Product with ref ${e} not found`);return this.nodes.get(t)}addProduct(e){this.productsIndex.set(e.getMolecule().ref,this.nodes.size),this.addNode(e)}removeProduct(e){let t=this.productsIndex.get(e);if(void 0==t)throw Error(`Product with ref ${e} not found`);this.nodes.delete(t),this.productsIndex.delete(e)}getTunneling(){let e=this.index.get(sc.tagName);if(void 0!=e)return this.nodes.get(e)}setTunneling(e){let t=this.index.get(sc.tagName);if(void 0==t)this.index.set(sc.tagName,this.nodes.size),this.addNode(e);else{if(t instanceof Map)throw Error("Tunneling is a map and it is assumed there would be only 1!");this.nodes.set(t,e)}}getTransitionStates(){let e=this.index.get(so.tagName);return void 0==e?[]:e instanceof Map?Array.from(e.values()).map(e=>this.nodes.get(e)):[this.nodes.get(e)]}setTransitionStates(e){e.forEach(e=>{this.transitionStatesIndex.set(e.getMolecule().ref,this.nodes.size),this.addNode(e)}),this.index.set(so.tagName,this.transitionStatesIndex)}getTransitionState(e){let t=this.transitionStatesIndex.get(e);if(void 0==t)throw Error(`Transition state with ref ${e} not found`);return this.nodes.get(t)}addTransitionState(e){this.transitionStatesIndex.set(e.getMolecule().ref,this.nodes.size),this.addNode(e)}removeTransitionState(e){let t=this.transitionStatesIndex.get(e);if(void 0==t)throw Error(`Transition State with ref ${e} not found`);this.nodes.delete(t),this.transitionStatesIndex.delete(e)}getMCRCMethod(){let e=this.index.get(sh.tagName);if(void 0!=e)return this.nodes.get(e)}setMCRCMethod(e){let t=this.index.get(sh.tagName);if(void 0==t)this.index.set(sh.tagName,this.nodes.size),this.addNode(e);else{if(t instanceof Map)throw Error("MCRCMethod is a map and it is assumed there would be only 1!");this.nodes.set(t,e)}}getExcessReactantConc(){let e=this.index.get(su.tagName);if(void 0!=e)return this.nodes.get(e)}setExcessReactantConc(e){let t=this.index.get(su.tagName);if(void 0==t)this.index.set(su.tagName,this.nodes.size),this.addNode(e);else{if(t instanceof Map)throw Error("ExcessReactantConc is a map and it is assumed there would be only 1!");this.nodes.set(t,e)}}getCanonicalRateList(){let e=this.index.get(sv.tagName);if(void 0!=e)return this.nodes.get(e)}setCanonicalRateList(e){let t=this.index.get(sv.tagName);if(void 0==t)this.index.set(sv.tagName,this.nodes.size),this.addNode(e);else{if(t instanceof Map)throw Error("CanonicalRateList is a map and it is assumed there would be only 1!");this.nodes.set(t,e)}}getReactantsLabel(){return this.getReactants().map(e=>e.getMolecule().ref).join(" + ")}getProductsLabel(){return this.getProducts().map(e=>e.getMolecule().ref).join(" + ")}getLabel(){return this.getReactantsLabel()+" -> "+this.getProductsLabel()}getReactantsEnergy(e){return Array.from(this.getReactants()).map(t=>{let s=e.get(t.getMolecule().ref);if(void 0==s)throw Error(`Molecule with ref ${t.getMolecule().ref} not found`);return s.getEnergy()}).reduce((e,t)=>e.add(t),new(d(r))(0))}getProductsEnergy(e){return Array.from(this.getProducts()).map(t=>{let s=e.get(t.getMolecule().ref);if(void 0==s)throw Error(`Molecule with ref ${t.getMolecule().ref} not found`);return s.getEnergy()}).reduce((e,t)=>e.add(t),new(d(r))(0))}get(e,t){if(this.index.has(e)){let s=this.index.get(e);if(void 0!=s){if(!(s instanceof Map))return this.nodes.get(s);{let e=s.get(t);if(void 0!=e)return this.nodes.get(e)}}}}}function sw(e,t,s,i,n,a,o,d,r,l,g){let h=i+(a-i)/2;sC(e,g,d,t,h-sb(e,g,d)/2,o+r),sC(e,l,d,t,h-sb(e,l,d)/2,o+3*r),sy(e,t,s,i,n,a,o)}function sy(e,t,s,i,n,a,o){e.beginPath(),e.strokeStyle=t,e.lineWidth=s,e.moveTo(i,n),e.lineTo(a,o),e.stroke()}function sC(e,t,s,i,n,a){e.save(),e.translate(n,a),e.scale(1,-1),e.font=s,e.fillStyle=i,e.fillText(t,0,0),e.restore()}function sb(e,t,s){return e.font=s,e.measureText(t).width}class sS{static{this.tagName="defaults"}constructor(){let e=document.createElement("input");e.type="file",e.onchange=function(){if(e.files){for(let t=0;t<e.files.length;t++)console.log("inputElement.files["+t+"]="+e.files[t]);let t=e.files[0];console.log(t.name),t.name;let s=new FileReader,i=0,n="";s.onload=function(e){if(null==e.target)throw Error("Event target is null");if(n+=e.target.result,null!=t){if(i<t.size){let e=t.slice(i,i+1048576);s.readAsText(e),i+=1048576}else console.log("contents "+(n=n.trim())),console.log(h($(K(new DOMParser().parseFromString(n,"text/xml"),sS.tagName))))}};let a=t.slice(i,i+1048576);s.readAsText(a),i+=1048576}},e.click()}}class sT{constructor(){this.alias=new Map,this.molecules=new Map,this.readFile()}readFile(){let e=document.createElement("input");e.type="file";let t=this;e.onchange=function(){if(e.files){for(let t=0;t<e.files.length;t++)console.log("inputElement.files["+t+"]="+e.files[t]);let s=e.files[0];console.log(s.name),s.name;let i=new FileReader,n=0,a="";i.onload=function(e){if(null==e.target)throw Error("Event target is null");if(a+=e.target.result,null!=s){if(n<s.size){let e=s.slice(n,n+1048576);i.readAsText(e),n+=1048576}else{a=a.trim();let e=new DOMParser().parseFromString(a,"text/xml");t.parse(e)}}};let o=s.slice(n,n+1048576);i.readAsText(o),n+=1048576}},e.click()}parse(e){let t=K(e,ty.tagName),s=new Set;if(t.childNodes.forEach(function(e){s.add(e.nodeName)}),1!=s.size&&(!(s.size>=2&&s.has("#text"))||!(3==s.size&&s.has("#comment"))))throw console.error("moleculeListTagNames:"),s.forEach(e=>console.error(e)),Error("Additional tag names in moleculeList:");if(!s.has(ss.tagName))throw Error('Expecting tags with "'+ss.tagName+'" tagName but there are none!');let i=t.getElementsByTagName(ss.tagName),n=i.length;console.log("Number of molecules="+n);let a=0;for(let e=0;e<n;e++){let t=$(i[e]),s=t.get(ss.s_id);if(void 0==s)throw Error(ss.s_id+" is undefined");let n=i[e].childNodes;if(0==n.length){a++;let e=t.get("ref");if(void 0==e)throw Error("ref is undefined");this.alias.set(e,s);continue}let o=new ss(t,s);this.molecules.set(s,o);let l=new Set;for(let e=0;e<n.length;e++){let t=n[e];l.has(t.nodeName)?"#text"!=t.nodeName&&console.warn("Another ChildNode with nodeName="+t.nodeName):l.add(t.nodeName)}let g=i[e].getElementsByTagName(tN.tagName);if(g.length>0){if(g.length>1)throw Error("Expecting 1 or 0 "+tN.tagName+" but finding "+g.length+"!");let e=new tN($(g[0]));o.setMetadataList(e);let t=g[0].getElementsByTagName(tl.tagName);for(let s=0;s<t.length;s++){let i=new tl($(t[s]));e.addMetadata(i)}l.delete(tN.tagName)}let h=i[e].getElementsByTagName(tR.tagName);if(h.length>1)throw Error("Expecting 1 or 0 "+tR.tagName+" but finding "+h.length+"!");if(1==h.length){let e=h[0],t=e.getElementsByTagName(t_.tagName);if(0==t.length)throw Error("Expecting 1 or more atoms in "+tR.tagName+", but finding 0!");let s=new tR($(e));o.setAtoms(s);for(let e=0;e<t.length;e++)s.addAtom(new t_($(t[e]),o));l.delete(tR.tagName)}else{let t=i[e].getElementsByTagName(t_.tagName);if(1==t.length){let e=new tR(new Map);e.addAtom(new t_($(t[0]),o)),o.setAtoms(e)}else if(t.length>1)throw Error("Expecting 1 "+t_.tagName+" but finding "+t.length+". Should these be in an "+tR.tagName+"?")}l.delete(t_.tagName);let m=i[e].getElementsByTagName(tP.tagName);if(m.length>0){if(m.length>1)throw Error("Expecting 1 or 0 "+tP.tagName+" but finding "+m.length+"!");let e=m[0].getElementsByTagName(tL.tagName),t=new tP($(m[0]));for(let s=0;s<e.length;s++)t.addBond(new tL($(e[s]),o));o.setBonds(t),l.delete(tP.tagName)}else{let t=i[e].getElementsByTagName(tL.tagName);if(t.length>0){if(t.length>1)throw Error("Expecting 1 "+tL.tagName+" but finding "+t.length+". Should these be in a "+tP.tagName+"?");let e=new tP(new Map);e.addBond(new tL($(t[0]),o)),o.setBonds(e)}}l.delete(tL.tagName);let c=i[e].getElementsByTagName(tj.tagName);if(c.length>1)throw Error("Expecting 1 or 0 "+tj.tagName+" but finding "+c.length+"!");if(1==c.length){let e=new tj($(c[0]));o.setPropertyList(e);let t=c[0].getElementsByTagName(tA.tagName);for(let s=0;s<t.length;s++)e.setProperty(new tA($(t[s])));l.delete(tj.tagName)}else{let t=new tj(new Map);o.setPropertyList(t);let s=i[e].getElementsByTagName(tA.tagName);if(1!=s.length)throw Error("Expecting 1 "+tA.tagName+" but finding "+s.length+". Should these be in a "+tj.tagName+"?");t.setProperty(new tA($(s[0]))),l.delete(tA.tagName)}let u=i[e].getElementsByTagName(tW.tagName);if(u.length>0){if(u.length>1)throw Error("Expecting 1 or 0 "+tW.tagName+" but finding "+u.length+"!");let e=new tW($(u[0]));o.setEnergyTransferModel(e),l.delete(tW.tagName)}let N=i[e].getElementsByTagName(tZ.tagName);if(N.length>0){if(N.length>1)throw Error("Expecting 1 or 0 "+tZ.tagName+" but finding "+N.length+"!");let e=new tZ($(N[0]));o.setDOSCMethod(e),l.delete(tZ.tagName)}let p=i[e].getElementsByTagName(t0.tagName);if(p.length>0){if(p.length>1)throw Error("Expecting 1 or 0 "+t0.tagName+" but finding "+p.length+"!");let e=new t0($(p[0]));o.setDistributionCalcMethod(e),l.delete(t0.tagName)}let f=i[e].getElementsByTagName(st.tagName);if(f.length>0){if(f.length>1)throw Error("Expecting 1 or 0 "+st.tagName+" but finding "+f.length+"!");let e=new st($(f[0]));o.setDensityOfStatesList(e);let t=f[0].getElementsByTagName(se.tagName),s=f[0].getElementsByTagName(tM.tagName);if(s.length>0){if(s.length>1)throw Error("Expecting 1 or 0 "+tM.tagName+" but finding "+s.length+"!");let t=new tM($(s[0]),G(O(s[0])));e.setDescription(t)}if(0==t.length)throw Error("Expecting 1 or more "+se.tagName+" but finding 0!");for(let s=0;s<t.length;s++){let i=new se($(t[s]));e.addDensityOfStates(i);let n=t[s].getElementsByTagName(tz.tagName);if(1!=n.length)throw Error("Expecting 1 "+tz.tagName+" but finding "+n.length+"!");{let e=new tz($(n[0]),new(d(r))(G(O(n[0]))));i.setT(e)}let a=t[s].getElementsByTagName(t8.tagName);if(1!=a.length)throw Error("Expecting 1 "+t8.tagName+" but finding "+a.length+"!");{let e=new t8($(a[0]),new(d(r))(G(O(a[0]))));i.setQtot(e)}let o=t[s].getElementsByTagName(t7.tagName);if(1!=o.length)throw Error("Expecting 1 "+t7.tagName+" but finding "+o.length+"!");{let e=new t7($(o[0]),new(d(r))(G(O(o[0]))));i.setSumc(e)}let l=t[s].getElementsByTagName(t9.tagName);if(1!=l.length)throw Error("Expecting 1 "+t9.tagName+" but finding "+l.length+"!");{let e=new t9($(l[0]),new(d(r))(G(O(l[0]))));i.setSumg(e)}}l.delete(st.tagName)}l.delete("#text"),l.size>0&&(console.warn("There are additional unexpected moleculeTagNames:"),l.forEach(e=>console.warn(e)))}console.log("Number of alias molecules="+a.toString())}}let sM="https://github.com/agdturner/mxg-pwa",sz=document.createElement("a");sz.href=sM,sz.textContent=sM;let s_="https://github.com/agdturner/mxg-pwa/tree/main/data/examples",sR=document.createElement("a");sR.href=s_,sR.textContent=s_;let sL="https://github.com/MESMER-kinetics/MESMER-code",sP=document.createElement("a");sP.href=sL,sP.textContent=sL;let sI=document.createElement("a");sI.href="https://epsrc.ukri.org/",sI.textContent="The UK Engineering and Physical Sciences Research Council (EPSRC)";let sB=document.createElement("a");sB.href="https://www.leeds.ac.uk/",sB.textContent="The University of Leeds";let sD="https://github.com/3dmol/3Dmol.js",sA=document.createElement("a");sA.href=sD,sA.textContent=sD;let sk=document.createElement("a");sk.href="http://doi.org/10.1093/bioinformatics/btu829",sk.textContent="doi:10.1093/bioinformatics/btu829";let sO="https://mikemcl.github.io/big.js/",sG=document.createElement("a");sG.href=sO,sG.textContent=sO,d(r).PE=7;let sF={marginLeft:"0px",marginTop:"1px",marginBottom:"1px",marginRight:"0px"},sq={marginLeft:"25px",marginTop:"1px",marginBottom:"1px",marginRight:"0px"},sH={marginLeft:"1px",marginTop:"1px",marginBottom:"1px",marginRight:"1px"};const sV=" ✓",sU=" ✗",sj="Add ＋",sY="container",sX="description",s$="input",sK="optionOn",sW="optionOff",sZ="save",sQ="select",sJ="Select an option (use keys to cycle through options)...",s0="table",s1="undefined",s2=new(d(r))(0);let s3=new Set;function s5(...e){let t=g(...e);if(s3.has(t))throw Error(t+" already exists!");return s3.add(t),t}const s4="Reactions Diagram",s6=g(s4),s8=g(s6,"Canvas");let s7="1em SensSerif",s9="2em SensSerif";function ie(){null==o?i7(document.getElementById(s8),e,s7,4,2):i7(o.document.getElementById(s8),e,s7,4,2)}function it(){a.forEach(e=>{e.draw(s9)})}function is(e,t,s,n){let a="✎ Edit id",o=g(s.id,a,x),d=L(a,o,n);s.appendChild(d),d.addEventListener("click",()=>{let n=prompt("Please enter a name for the molecule:",e.getID());if(null!=n){let a=g(n);ig(eo.tagName,a);let o=e.getID();il(eo.tagName,o),i.set(a,e),i.delete(e.getID()),e.setID(a),s.id=a,t.textContent=n+" ▲"}})}function ii(e,t,s,i,n){let a=I(void 0,n),o=sX+sV,d=sX+sU,r=L(d,g(e,x),i);a.appendChild(r),r.classList.add(sK),r.classList.add(sW);let l=g(e,sX,s$),h=t();return void 0==h?(r.textContent=d,r.classList.toggle(sK)):(ia(a,l,h,s,i),r.textContent=o,r.classList.toggle(sW)),r.addEventListener("click",e=>{null==document.getElementById(l)?(ia(a,l,h,s,i),r.textContent=o):(document.getElementById(l)?.remove(),console.log("Removed "+l),r.textContent=d),r.classList.toggle(sK),r.classList.toggle(sW)}),a}function ia(e,t,s,i,n){let a;a=void 0==s?"":s;let o=C("text",t,n);o.addEventListener("change",e=>{let n=e.target;i(n.value),console.log(t+" changed from "+s+" to "+n.value),T(n)}),o.value=a,T(o),e.appendChild(o)}function io(e,t,s,i,n){let a=L(sj,g(e.getID(),"Add"+s+"Button"),n);return a.addEventListener("click",()=>{let s=new t_(new Map,e);t.insertBefore(id(e,e.getAtoms(),s,i,n),a)}),a}function id(e,t,s,i,n){let a,o,d,r,l=t.addAtom(s,s.getID()),h=I(g(e.getID(),l),n);return h.appendChild(B(l,i)),a=s.getElementType(),o=tT.elementTypes,void 0==a&&(a=sJ,iu(o,!0)),(r=(d=R(t_.s_elementType,o,t_.s_elementType,a,g(h.id,t_.s_elementType),i,i)).querySelector("select")).addEventListener("change",e=>{let t=e.target;s.setElementType(t.value),M(t)}),r.value=a,M(r),i5(o,r),h.appendChild(d),h.appendChild(iN(g(h.id,t_.s_x3),t_.s_x3,s.getX3.bind(s),s.setX3.bind(s),s.removeX3,i,i)),h.appendChild(iN(g(h.id,t_.s_y3),t_.s_y3,s.getY3.bind(s),s.setY3.bind(s),s.removeY3,i,i)),h.appendChild(iN(g(h.id,t_.s_z3),t_.s_z3,s.getZ3.bind(s),s.setZ3.bind(s),s.removeZ3,i,i)),iv(h,i,ir,e,l),ig(tL.s_atomRefs2,l),h}function ir(e,t){e.getAtoms().removeAtom(t),e.getBonds().bonds.forEach(s=>{let i=s.getAtomRefs2().split(" ");if(i[0]==t||i[1]==t){let i=s.getID();e.getBonds().removeBond(i);let n=document.getElementsByClassName(t);for(let e=0;e<n.length;e++)n[e].remove()}}),il(tL.s_atomRefs2,t)}function il(e,t){let s=document.getElementsByClassName(e);for(let e=0;e<s.length;e++)s[e]instanceof HTMLSelectElement&&Array.from(s[e].options).forEach(e=>{e.value==t&&e.remove()})}function ig(e,t){let s=document.getElementsByClassName(e);for(let e=0;e<s.length;e++){let i=s[e];if(s[e]instanceof HTMLSelectElement){let e=document.createElement("option");e.value=t,e.text=t,i.add(e)}}}function ih(e,t,s,i,n,a){let o=L(sj,g(t,"Add"+i+"Button"),a);return o.addEventListener("click",()=>{let t=e.getAtoms().atoms;if(t.size<2){alert("There must be at least 2 atoms to create a bond.");return}let i=new Map,d=Array.from(t.keys()).slice(0,2).join(" ");i.set(tL.s_atomRefs2,d);let r=new tL(i,e);s.insertBefore(im(e,t,e.getBonds(),r,n,a),o)}),s.appendChild(o),o}function im(e,t,s,i,n,a){let o,d,r,l,h,m,c,u=s.addBond(i,i.getID()),N=I(g(e.getID(),u),a);return N.appendChild(B(u,n)),o=g(N.id,tL.s_atomRefs2),d=i.getAtomRefs2().split(" "),r=Array.from(e.getAtoms().atoms.keys()),(h=(l=R(tL.s_atomRefs2+"[0]",r,t_.tagName,d[0],g(o,0),n,n)).querySelector("select")).classList.add(tL.s_atomRefs2),h.addEventListener("change",e=>{let t=e.target,s=t.value+" "+d[1];console.log(tL.s_atomRefs2+" changed to "+s),i.setAtomRefs2(s),M(t)}),h.value=d[0],M(h),N.appendChild(l),(c=(m=R(tL.s_atomRefs2+"[1]",r,t_.tagName,d[1],g(o,1),n,n)).querySelector("select")).classList.add(tL.s_atomRefs2),c.addEventListener("change",e=>{let t=e.target,s=d[0]+" "+t.value;console.log(tL.s_atomRefs2+" changed to "+s),i.setAtomRefs2(s),M(t)}),c.value=d[1],M(c),N.appendChild(m),function(e,t,s){let i=g(e.id,tL.s_order),n=I(void 0,s);e.appendChild(n);let a=tL.s_order+sV,o=tL.s_order+sU,d=L(o,void 0,s);n.appendChild(d),d.classList.add(sK),d.classList.add(sW);let r=t.getOrder();void 0==r?(d.textContent=o,d.classList.toggle(sK)):(iE(n,t,i,r,s),d.textContent=a,d.classList.toggle(sW)),d.addEventListener("click",e=>{null==document.getElementById(i)?(void 0==r&&(r=1),iE(n,t,i,r,s),d.textContent=a):(document.getElementById(i)?.remove(),console.log("Removed "+i),d.textContent=o),d.classList.toggle(sK),d.classList.toggle(sW)})}(N,i,n),Array.from(t.keys()).forEach(e=>{N.classList.add(e)}),iv(N,n,t=>e.getBonds().removeBond(t),u),ig(tL.tagName,u),N}function ic(e,t,s,i,n,a,o){let d=new tA($(s));return e.delete(d.dictRef),d.dictRef==tk.dictRef?iy(t,d,tT.energyUnits,n,s,i,a,o):d.dictRef==tH.dictRef?iy(t,d,tT.frequencyUnits,n,s,i,a,o):(d.dictRef,tq.dictRef,iy(t,d,void 0,n,s,i,a,o)),d}function iu(e,t){if(t)e.push(sJ);else{let t=e.indexOf(sJ);t>-1&&e.splice(t,1)}}function iN(e,t,s,i,n,a,o){let d=I(e,o),r=t+sV,l=t+sU,h=L(l,g(e,x),a);d.appendChild(h),h.classList.add(sK),h.classList.add(sW);let m=g(e,t,s$),c=s();return void 0==c?(h.textContent=l,h.classList.toggle(sK)):(ip(d,m,t,c,i,a),h.textContent=r,h.classList.toggle(sW)),h.addEventListener("click",e=>{null==document.getElementById(m)?(ip(d,m,t,c,i,a),h.textContent=r):(document.getElementById(m)?.remove(),n(),console.log("Removed "+m),h.textContent=l),h.classList.toggle(sK),h.classList.toggle(sW)}),d}function ip(e,t,s,i,n,a){let o;o=void 0==i?"":i.toString();let l=C("text",t,a);l.addEventListener("change",e=>{let t=e.target;try{n(new(d(r))(t.value)),console.log(s+" changed from "+i+" to "+t.value)}catch(e){alert("Input invalid, resetting..."),t.value=o}T(t)}),l.value=o,T(l),e.appendChild(l)}function ix(e,t,s,i,n,a,o,d){let r;r=void 0==i?"":N(i);let l=b(t,d);l.addEventListener("change",e=>{let t=e.target;ib(n,l),z(t)}),l.value=r,z(l),e.appendChild(l)}function iv(e,t,s,...i){let n=L("Remove ✕",void 0,t);return e.appendChild(n),n.addEventListener("click",()=>{s(...i),e.remove()}),n}function iE(e,t,s,i,n){let a=i.toString(),o=_(tL.orderOptions,tL.s_order,a,s,n);o.addEventListener("change",e=>{let s=e.target;t.setOrder(parseFloat(s.value)),console.log(tL.s_order+" changed from "+a+" to "+s.value),M(s)}),o.value=a,M(o),o.id=s,e.appendChild(o)}function iw(e,s,i,n){let a;let o=P(g(e.getID(),"viewerContainer"),n);s.appendChild(o);let d=g(e.getID(),"viewer"),r=!1,l=!1;function h(t,s){let n=P(d,i);n.className="mol-container",o.appendChild(n);let a=$3Dmol.createViewer(n,{backgroundColor:"grey"});return a.setStyle({stick:{}}),e.getAtoms().atoms.forEach(function(e){let s,i,n=e.getElementType();s=void 0==n?"Purple":tT.atomColors.get(n)||"Purple",i=void 0==n?100:tT.atomRadii.get(e.getElementType())||100;let o=e.getX3()?.toNumber()||0,d=e.getY3()?.toNumber()||0,r=e.getZ3()?.toNumber()||0;a.addSphere({center:{x:o,y:d,z:r},radius:i/110,color:s}),t&&a.addLabel(e.getID(),{position:{x:o,y:d,z:r}})}),e.getBonds().bonds.forEach(function(t){let i=t.getAtomRefs2().split(" "),n=e.getAtoms(),o=n.getAtom(i[0]),d=n.getAtom(i[1]),r=t.getOrder()||1,l=tT.bondColors.get(r)||"Purple",g=o.getX3()?.toNumber()||0,h=o.getY3()?.toNumber()||0,m=o.getZ3()?.toNumber()||0,c=d.getX3()?.toNumber()||0,u=d.getY3()?.toNumber()||0,N=d.getZ3()?.toNumber()||0;a.addCylinder({start:{x:g,y:h,z:m},end:{x:c,y:u,z:N},radius:.06*r,color:l}),s&&a.addLabel(t.getID(),{position:{x:(g+c)/2,y:(h+u)/2,z:(m+N)/2}})}),a.zoomTo(),a.render(),a.zoom(.8,2e3),a}let m=L("Draw/Redraw",void 0);function c(e,t,s,n){let o=L((s?"Hide ":"Show ")+e,t,i);return o.addEventListener("click",()=>{s?(o.textContent="Show "+e,s=!1):(o.textContent="Hide "+e,s=!0),n(s),v(d,s3),a=h(r,l)}),o}m.addEventListener("click",()=>{v(d,s3),a=h(r,l)}),o.appendChild(m);let u="Atom Labels",N=c(u,g(e.getID(),u),r,e=>r=e);o.appendChild(N);let p="Bond Labels",f=c(p,g(e.getID(),p),l,e=>l=e);o.appendChild(f);let x=L("Save as PNG",g(e.getID(),sZ),sH);x.addEventListener("click",()=>{let e=a.pngURI(),s=document.createElement("a");s.href=e;let i=t.getTitle()?.value;s.download=i.replace(/[^a-z0-9]/gi,"_")+"mol.png",document.body.appendChild(s),s.click(),document.body.removeChild(s),console.log("Save Image")}),o.appendChild(x)}function iy(e,t,s,i,n,a,o,l){let h=n.getElementsByTagName(tI.tagName);if(h.length>0){if(1!=h.length)throw Error("Expecting 1 "+tI.tagName+" but finding "+h.length+"!");let i=F(h[0]),n=new(d(r))(i),l=$(h[0]),m=new tI(l,n);t.setProperty(m),m.setValue=(function(e){m.value=e,t.dictRef==tk.dictRef&&ie()}).bind(m);let c=iN(g(a.id,t.dictRef),t.dictRef,m.getValue.bind(m),m.setValue,()=>e.removeProperty(t.dictRef),sH,sq);iC(s,l,c,c.querySelector(s$),g(a.id,t.dictRef,tI.s_units),t.dictRef,o,o),a.appendChild(c)}else{var m,u,N,p,f,v,E,w;let d=n.getElementsByTagName(tB.tagName);if(d.length>0){if(1!=d.length)throw Error("Expecting 1 "+tB.tagName+" but finding "+d.length+"!");let i=F(d[0]);if(""!=i){let n,r,l,h,v,E,w=c(i.split(/\s+/)),y=$(d[0]),C=new tB(y,w);t.setProperty(C);let b=(m=g(a.id,t.dictRef),u=t.dictRef,N=C.getValues.bind(C),p=C.setValues,f=()=>e.removeProperty(t.dictRef),n=I(void 0,sq),r=u+sV,h=L(l=u+sU,g(m,x),sH),n.appendChild(h),h.classList.add(sK),h.classList.add(sW),v=g(m,u,s$),void 0==(E=N())?(h.textContent=l,h.classList.toggle(sK)):(ix(n,v,u,E,C,N,p,sH),h.textContent=r,h.classList.toggle(sW)),h.addEventListener("click",e=>{null==document.getElementById(v)?(ix(n,v,u,E,C,N,p,sH),h.textContent=r):(document.getElementById(v)?.remove(),f(),console.log("Removed "+v),h.textContent=l),h.classList.toggle(sK),h.classList.toggle(sW)}),n);iC(s,y,b,b.querySelector("textarea"),g(a.id,t.dictRef,tI.s_units),t.dictRef,o,o),a.appendChild(b)}}else{let e=n.getElementsByTagName(tD.tagName);if(e.length>0){let n,d,r;if(1!=e.length)throw Error("Expecting 1 "+tD.tagName+" but finding "+e.length+"!");let h=F(e[0]),m=c(h.split(/\s+/)),u=$(e[0]),N=new tD(u,m);t.setProperty(N);let p=t.dictRef,f=(v=g(a.id,t.dictRef),E=e=>{let t=e.target;ib(N,t)},w=h,n=I(void 0,l),(r=b(v,o)).onchange=E,r.value=w,z(r),(d=B(p,o)).htmlFor=v,n.appendChild(d),n.appendChild(r),n),x=f.querySelector("textarea");x.value=h,z(x),x.addEventListener("change",e=>{h=e.target.value,N=t.getProperty(),m=c(h.split(/\s+/)),N.values=m,console.log("Set "+t.dictRef+" of "+i.getID()+" to "+h),z(x)}),iC(s,u,f,x,g(a.id,t.dictRef,sQ,"Units"),t.dictRef,o,o),a.appendChild(f)}else throw Error("Expecting "+tI.tagName+", "+tB.tagName+" or "+tD.tagName+" but finding none!")}}}function iC(e,t,s,i,n,a,o,d){if(void 0!=e){let r=function(e,t,s,i,n,a){let o=t.get("units");if(void 0!=o){let d=R("units",e,"units",o,s,n,a),r=d.querySelector("select");return r.value=o,M(r),r.addEventListener("change",e=>{let s=e.target;t.set("units",s.value),console.log("Set "+i+" units to "+s.value),M(s)}),d}}(e,t,n,a,o,d);void 0!=r&&s.insertBefore(r,i)}else{let e=t.get("units");if(void 0!=e){let t=B("units "+e,d);s.insertBefore(t,i)}}}function ib(e,t){let s=t.value.trim(),i=m(e.values," ");if(""==s){alert("Empty input resetting..."),t.value=i;return}let n=s.split(/\s+/),a=[],o=!0;if(n.forEach(function(e){u(e)?a.push(new(d(r))(e)):o=!1}),!o){alert("An input is not a number, resetting..."),t.value=i;return}a.length==e.values.length?(e.setValues(a),console.log("Changed "+e.tagName+' from: "'+i+'" to: "'+m(e.values," ")+'"')):(alert("Expecting "+e.values.length+" values for, but finding "+a.length+" resetting..."),t.value=i)}function iS(e,t){try{let s=new(d(r))(t.value);e.setValue(s)}catch(e){alert("Value invalid, resetting...")}t.value=e.value.toString()}function iT(e,t,s,n){let a=g(ec.tagName,s.toString(),eo.tagName),o=P(a);E(g(a,sY),t,null,o,eo.tagName,sH,sq);let d=L(sj,void 0,sq);if(o.appendChild(d),d.addEventListener("click",()=>{let t=new eo(new Map,sJ),s=e.addBathGas(t),n=I(void 0,sq),r=g(a,s.toString()),l=ik(Array.from(new Set(i.keys())),t,!0,r);l.classList.add(eo.tagName),n.appendChild(l),iv(n,sH,t=>{o.removeChild(n),e.removeBathGas(t)}),o.insertBefore(n,d)}),null!=n){let t=Array.from(n.children).filter(e=>e.tagName===eo.tagName);if(t.length>0)for(let s=0;s<t.length;s++){let n=new eo($(t[s]),G(O(t[s]))),r=g(a,e.addBathGas(n).toString()),l=I(r,sq);l.appendChild(ik(Array.from(new Set(i.keys())),n,!1,r)),iv(l,sH,t=>{o.removeChild(l),e.removeBathGas(t)}),o.insertBefore(l,d)}else{let t=g(a,"0"),s=I(g(a,0),sq);s.appendChild(ik(Array.from(new Set(i.keys())),void 0,!1,t)),iv(s,sH,t=>{o.removeChild(s),e.removeBathGas(t)}),o.insertBefore(s,d)}}}function iM(e,t,s,n){let a,o=new Set(i.keys()),l=g(t.id,s.toString(),em.tagName),h=P(l);if(E(g(l,sY),t,null,h,em.tagName,sH,sq),n){let e=n.getElementsByTagName(em.tagName);if(e.length>0){if(e.length>1)throw Error("Expecting 1 "+em.tagName+" but finding "+e.length+"!");let i=$(e[0]),n=e[0].getElementsByTagName(eh.tagName);if(0==n.length)throw Error("Expecting 1 or more "+eh.tagName+" but finding 0!");a=new em(i);for(let e=0;e<n.length;e++){let i=new eh($(n[e]));a.add(i);let l=n[e].getElementsByTagName(eo.tagName);l.length>0&&(l.length>1&&console.warn("xml_bathGass.length="+l.length),i.setBathGas(new eo($(l[0]),G(O(l[0])))));let g=n[e].getElementsByTagName(ed.tagName);g.length>0&&(g.length>1&&console.warn("xml_experimentRates.length="+g.length),i.setExperimentalRate(new ed($(g[0]),new(d(r))(G(O(g[0])).trim()))));let m=n[e].getElementsByTagName(er.tagName);m.length>0&&(m.length>1&&console.warn("xml_experimentalYields.length="+m.length),i.setExperimentalYield(new er($(m[0]),new(d(r))(G(O(m[0])).trim()))));let c=n[e].getElementsByTagName(el.tagName);c.length>0&&(c.length>1&&console.warn("xml_experimentalEigenvalues.length="+c.length),i.setExperimentalEigenvalue(new el($(c[0]),new(d(r))(G(O(c[0])).trim())))),h.appendChild(i_(a,h,i,t.id,s,e,o,sq))}}else a=new em(new Map)}else a=new em(new Map);e.setPTs(a);let m=P(void 0,sq);h.appendChild(m);let c=L(sj,void 0,sH);m.appendChild(c),c.addEventListener("click",()=>{let e=new Map;e.set("units","Torr");let i=new eh(e),n=a.add(i);console.log("Added new pTpair pTpairIndex="+n),h.insertBefore(i_(a,h,i,t.id,s,n,o,sq),m)});let u=L("Add from spreadsheet ＋",void 0,sH);m.appendChild(u),u.addEventListener("click",()=>{let e=I(void 0,sq),i=C("text",g(em.tagName,"addFromSpreadsheet"),sq);e.appendChild(i),h.insertBefore(e,m),i.addEventListener("change",()=>{if(console.log("inputElement.value="+i.value),console.log("inputElement.value.length="+i.value.length),i.value.length>0){let n=i.value.split(" "),l=new Map;n[0].split("	").forEach((e,t)=>{l.set(e,t)}),console.log("pTpairsArray.length="+n.length);for(let e=1;e<n.length;e++){let i=n[e].split("	"),g=l.get("P"),c=new(d(r))(i[g]),u=l.get("units"),N=new Map;if(l.has("units")){let e=i[u];N.set("units",e)}let p=new eh(N);a.add(p);let f=l.get("T"),x=new(d(r))(i[f]);if(p.setP(c),p.setT(x),l.has(eh.s_excessReactantConc)){let e=i[l.get(eh.s_excessReactantConc)];N.set(eh.s_excessReactantConc,e)}if(l.has(eh.s_percentExcessReactantConc)){let e=i[l.get(eh.s_percentExcessReactantConc)];N.set(eh.s_percentExcessReactantConc,e)}if(l.has(eh.s_precision)){console.log("index.has(PTpair.s_precision)");let e=i[l.get(eh.s_precision)];N.set(eh.s_precision,e)}if(l.has(eo.tagName)){let e=i[l.get(eo.tagName)];p.setBathGas(new eo(new Map,e))}if(l.has(ed.tagName)){let e=i[l.get(ed.tagName)];if(e.length>0){N.set(ed.tagName,e),p.setExperimentalRate(new ed(new Map,new(d(r))(e)));let t=i[l.get(ed.tagName+"_"+ed.s_ref1)];p.getExperimentalRate()?.setRef1(t);let s=i[l.get(ed.tagName+"_"+ed.s_ref2)];p.getExperimentalRate()?.setRef2(s);let n=i[l.get(ed.tagName+"_"+ed.s_refReaction)];p.getExperimentalRate()?.setRefReaction(n);let a=i[l.get(ed.tagName+"_"+ed.s_error)];p.getExperimentalRate()?.setError(new(d(r))(a))}}if(l.has(er.tagName)){let e=i[l.get(er.tagName)];if(e.length>0){p.setExperimentalYield(new er(new Map,new(d(r))(e)));let t=i[l.get(er.tagName+"_"+er.s_ref)];p.getExperimentalYield()?.setRef(t);let s=i[l.get(er.tagName+"_"+er.s_yieldTime)];p.getExperimentalYield()?.setYieldTime(new(d(r))(s));let n=i[l.get(er.tagName+"_"+er.s_error)];p.getExperimentalYield()?.setError(new(d(r))(n))}}if(l.has(el.tagName)){let e=i[l.get(el.tagName)];if(e.length>0){p.setExperimentalEigenvalue(new el(new Map,new(d(r))(e)));let t=i[l.get(el.tagName+"_"+el.s_EigenvalueID)];p.getExperimentalEigenvalue()?.setEigenvalueID(t);let s=i[l.get(el.tagName+"_"+el.s_error)];p.getExperimentalEigenvalue()?.setError(new(d(r))(s))}}let v=a.ptps.length-1;h.insertBefore(i_(a,h,p,t.id,s,v,o,sq),m)}h.removeChild(e)}})});let N=L("Remove All",void 0,sH);m.appendChild(N),N.addEventListener("click",()=>{a.clear();let e=h.firstChild;for(;null!=e&&e!=m;){let t=e.nextSibling;h.removeChild(e),e=t}})}function iz(e,s){let i=new ec(e,s);return t.addConditions(i),i}function i_(e,t,s,i,n,a,o,d){let r=I(void 0,d);return iR(r,eh.s_P,s.getP.bind(s),s.setP.bind(s)),iC(tT.pressureUnits,s.attributes,r,null,eh.tagName,eh.tagName,sH,sq),iR(r,eh.s_T,s.getT.bind(s),s.setT.bind(s)),g(i,eh.tagName,a.toString()),iP(r,s,n,a,eh.s_excessReactantConc,iD),function(e,t,s,i){let n=g(s.toString(),i.toString(),eh.s_percentExcessReactantConc),a=P(n,sH);e.appendChild(a);let o=eh.s_percentExcessReactantConc,d=o+sV,r=o+sU,l=L(r,g(n,x),sH);a.appendChild(l),l.classList.add(sK),l.classList.add(sW),t.attributes.get(o)?.toLowerCase()=="true"?(l.classList.toggle(sW),l.textContent=d):(l.classList.toggle(sK),l.textContent=r),l.addEventListener("click",e=>{l.classList.toggle(sK),l.classList.toggle(sW),l.textContent===r?(l.textContent=d,t.attributes.set(o,"true")):(l.textContent=r,t.attributes.delete(o))})}(r,s,n,a),iP(r,s,n,a,eh.s_precision,iB),function(e,t,s,i,n){let a=g(s.toString(),i.toString(),eo.tagName),o=P(a,sH);e.appendChild(o);let d=eo.tagName,r=d+sV,l=d+sU,h=L(l,g(a,x),sH);o.appendChild(h),h.classList.add(sK),h.classList.add(sW);let m=g(a,s$),c=t.getBathGas();void 0==c?(h.classList.toggle(sK),h.textContent=l):(h.classList.toggle(sW),h.textContent=r,!1==n.has(c.value)&&console.warn("moleculeKeys does not contain "+c.value),o.appendChild(iA(m,t,c,!1))),h.addEventListener("click",e=>{h.classList.toggle(sK),h.classList.toggle(sW),h.textContent===l?(h.textContent=r,o.appendChild(iA(m,t,c,!1))):(h.textContent=l,v(m))})}(r,s,n,a,o),iI(r,s,n,a,ed.tagName,e=>e.getExperimentalRate(),iO),iI(r,s,n,a,er.tagName,e=>e.getExperimentalYield(),iG),iI(r,s,n,a,er.tagName,e=>e.getExperimentalEigenvalue(),iF),iv(r,sH,(s,i,n)=>{t.removeChild(s),void 0!==i&&e.remove(i),n.removeBathGas()},r,a,s),r}function iR(e,t,s,i){let n=y("text",eh.tagName+"_"+t,sH,sF,e=>{let n=e.target;try{i(new(d(r))(n.value)),console.log(`Set ${t} to ${n.value}`)}catch(e){alert("Invalid input, resetting..."),a.value=iL(s)}T(n)},iL(s),t),a=n.querySelector("input");a.value=iL(s),T(a),e.appendChild(n)}function iL(e){let t=e();return void 0!==t?t.toString():""}function iP(e,t,s,i,n,a){let o=g(s.toString(),i.toString(),n),d=P(o,sH);e.appendChild(d);let r=n+sV,l=n+sU,h=L(l,g(o,x),sH);d.appendChild(h),h.classList.add(sK),h.classList.add(sW);let m=g(o,s$);if(t.attributes.has(n)){h.classList.toggle(sW),h.textContent=r;let e=a(m,t);d.insertBefore(e,h.nextSibling)}else h.classList.toggle(sK),h.textContent=l;h.addEventListener("click",e=>{if(h.classList.toggle(sK),h.classList.toggle(sW),h.textContent===l){h.textContent=r;let e=a(m,t);d.insertBefore(e,h.nextSibling)}else h.textContent=l,v(m)})}function iI(e,t,s,i,n,a,o){let d=g(s.toString(),i.toString(),n),r=P(d,sH);e.appendChild(r);let l=n+sV,h=n+sU,m=L(h,g(d,x),sH);r.appendChild(m),m.classList.add(sK),m.classList.add(sW);let c=g(d,s$);void 0==a(t)?(m.classList.toggle(sK),m.textContent=h):(m.classList.toggle(sW),m.textContent=l,r.appendChild(o(c,t,i))),m.addEventListener("click",e=>{m.classList.toggle(sK),m.classList.toggle(sW),m.textContent===h?(m.textContent=l,r.appendChild(o(c,t,i))):(m.textContent=h,v(c))})}function iB(e,t){let s;s=t.attributes.has(eh.s_precision)?t.attributes.get(eh.s_precision):tT.precisionOptions[0];let i=_(tT.precisionOptions,eh.s_precision,s,e,sH);return i.addEventListener("change",e=>{let s=e.target;t.setPrecision(s.value),console.log("Set "+eh.s_precision+" to "+s.value),M(s)}),M(i),i}function iD(e,t){let s,i=C("number",e,sH);return s=t.attributes.has(eh.s_excessReactantConc)?t.attributes.get(eh.s_excessReactantConc):NaN.toString(),console.log(eh.s_excessReactantConc+"="+s),i.value=s,i.addEventListener("change",e=>{let s=e.target;t.setExcessReactantConc(s.value),console.log("Set "+eh.s_excessReactantConc+" to "+s.value),T(s)}),T(i),i}function iA(e,t,s,n){let a=ik(Array.from(new Set(i.keys())),s,n,e);return a.id=e,a.addEventListener("change",e=>{let s=e.target;t.setBathGas(new eo(new Map,s.value)),console.log("Set bathGas to "+s.value),M(s)}),M(a),a}function ik(e,t,s,i){let n;if(s)e.push(sJ);else{let t=e.indexOf(sJ);t>-1&&e.splice(t,1)}void 0==t?(t=new eo(new Map,sJ),n=sJ):n=t.value;let a=_(e,eo.tagName,n,g(i,sQ),sH);return a.classList.add(eo.tagName),i5(e,a),a.addEventListener("change",e=>{let s=e.target;t.value=s.value,console.log("Added "+s.value+" as "+eo.tagName),M(s)}),a.value=n,M(a),a}function iO(e,t){return iq(t,e,e=>e.getExperimentalRate(),(e,t)=>e.setExperimentalRate(t),ed,[{tagName:ed.tagName,type:"number",eventHandler:(e,s)=>iS(t.getExperimentalRate(),s),valueGetter:()=>t.getExperimentalRate().value.toString()},{tagName:ed.tagName+"_"+ed.s_ref1,type:"text",eventHandler:(e,s)=>t.getExperimentalRate()?.setRef1(s.value),valueGetter:()=>t.getExperimentalRate().getRef1()},{tagName:ed.tagName+"_"+ed.s_ref2,type:"text",eventHandler:(e,s)=>t.getExperimentalRate()?.setRef2(s.value),valueGetter:()=>t.getExperimentalRate().getRef2()},{tagName:ed.tagName+"_"+ed.s_refReaction,type:"text",eventHandler:(e,s)=>t.getExperimentalRate()?.setRefReaction(s.value),valueGetter:()=>t.getExperimentalRate().getRefReaction()},{tagName:ed.tagName+"_"+ed.s_error,type:"number",eventHandler:(e,s)=>t.getExperimentalRate()?.setError(new(d(r))(s.value)),valueGetter:()=>t.getExperimentalRate().getError().toString()}])}function iG(e,t){return iq(t,e,e=>e.getExperimentalYield(),(e,t)=>e.setExperimentalYield(t),er,[{tagName:er.tagName,type:"number",eventHandler:(e,s)=>iS(t.getExperimentalYield(),s),valueGetter:()=>t.getExperimentalYield().value.toString()},{tagName:er.tagName+"_"+er.s_ref,type:"text",eventHandler:(e,s)=>t.getExperimentalYield()?.setRef(s.value),valueGetter:()=>t.getExperimentalYield().getRef()},{tagName:er.tagName+"_"+er.s_yieldTime,type:"number",eventHandler:(e,s)=>t.getExperimentalYield()?.setYieldTime(new(d(r))(s.value)),valueGetter:()=>t.getExperimentalYield().getYieldTime().toString()},{tagName:er.tagName+"_"+er.s_error,type:"number",eventHandler:(e,s)=>t.getExperimentalYield()?.setError(new(d(r))(s.value)),valueGetter:()=>t.getExperimentalYield().getError().toString()}])}function iF(e,t){return iq(t,e,e=>e.getExperimentalEigenvalue(),(e,t)=>e.setExperimentalEigenvalue(t),el,[{tagName:el.tagName,type:"number",eventHandler:(e,s)=>iS(t.getExperimentalEigenvalue(),s),valueGetter:()=>t.getExperimentalEigenvalue().value.toString()},{tagName:el.tagName+"_"+el.s_EigenvalueID,type:"text",eventHandler:(e,s)=>t.getExperimentalEigenvalue()?.setEigenvalueID(s.value),valueGetter:()=>t.getExperimentalEigenvalue().getEigenvalueID()},{tagName:el.tagName+"_"+el.s_error,type:"number",eventHandler:(e,s)=>t.getExperimentalEigenvalue()?.setError(new(d(r))(s.value)),valueGetter:()=>t.getExperimentalEigenvalue().getError().toString()}])}function iq(e,t,s,i,n,a){let o=P(void 0,sH);o.id=t;let d=s(e);for(let s of(void 0==d&&i(e,d=new n(new Map,s2)),a)){let e=t+"_"+s.tagName;o.appendChild(y(s.type,e,sH,sF,e=>{let t=e.target;s.eventHandler(e,t),console.log("Set "+s.tagName+" to "+t.value),T(t)},s.valueGetter(),s.label||""))}return o}function iH(e,t,s,i,n,a){let o,l,h=i.tagName,m=g(tE.tagName,h),c=I(m,sq);s.appendChild(c);let u=h+sV,N=h+sU,p=t.getElementsByTagName(h),f=L(h,g(m,x),sH);f.classList.add(sK),f.classList.add(sW),c.appendChild(f);let v=g(m,s$),E=g(m,sQ);if(1==p.length){l=G(O(p[0]));let t=new(d(r))(l);o=new i($(p[0]),t),f.textContent=u,iV(e,c,o,v,E,l,n,void 0),f.classList.toggle(sW)}else l="",o=new i(new Map,s2),f.textContent=N,f.classList.toggle(sK);f.addEventListener("click",()=>{e.index.has(h)?(l=o.value.toExponential(),a(),document.getElementById(v)?.remove(),f.textContent=N):(iV(e,c,o,v,E,l,n,void 0),f.textContent=u),f.classList.toggle(sK),f.classList.toggle(sW)})}function iV(e,t,s,i,n,a,o,d){o.call(e,s);let r=C("number",i,sH);r.addEventListener("change",e=>{let t=e.target;iS(s,t),T(t)}),r.value=a,T(r),t.appendChild(r),iC(d,s.attributes,t,null,n,s.constructor.tagName,sH,sq)}function iU(e){return[{class:eu,setMethod:e.setCalculateRateCoefficientsOnly,removeMethod:e.removeCalculateRateCoefficientsOnly},{class:eN,setMethod:e.setPrintCellDOS,removeMethod:e.removePrintCellDOS},{class:ep,setMethod:e.setPrintCellTransitionStateFlux,removeMethod:e.removePrintCellTransitionStateFlux},{class:ef,setMethod:e.setPrintReactionOperatorColumnSums,removeMethod:e.removePrintReactionOperatorColumnSums},{class:ex,setMethod:e.setPrintGrainBoltzmann,removeMethod:e.removePrintGrainBoltzmann},{class:ev,setMethod:e.setPrintGrainDOS,removeMethod:e.removePrintGrainDOS},{class:eE,setMethod:e.setPrintGrainkbE,removeMethod:e.removePrintGrainkbE},{class:ew,setMethod:e.setPrintGrainkfE,removeMethod:e.removePrintGrainkfE},{class:ey,setMethod:e.setPrintTSsos,removeMethod:e.removePrintTSsos},{class:eC,setMethod:e.setPrintGrainedSpeciesProfile,removeMethod:e.removePrintGrainedSpeciesProfile},{class:eb,setMethod:e.setPrintGrainTransitionStateFlux,removeMethod:e.removePrintGrainTransitionStateFlux},{class:eS,setMethod:e.setPrintReactionOperatorSize,removeMethod:e.removePrintReactionOperatorSize},{class:eT,setMethod:e.setPrintSpeciesProfile,removeMethod:e.removePrintSpeciesProfile},{class:eM,setMethod:e.setPrintPhenomenologicalEvolution,removeMethod:e.removePrintPhenomenologicalEvolution},{class:ez,setMethod:e.setPrintTunnelingCoefficients,removeMethod:e.removePrintTunnelingCoefficients},{class:e_,setMethod:e.setPrintCrossingCoefficients,removeMethod:e.removePrintCrossingCoefficients},{class:eR,setMethod:e.setTestDOS,removeMethod:e.removeTestDOS},{class:eL,setMethod:e.setTestRateConstants,removeMethod:e.removeTestRateConstants},{class:eP,setMethod:e.setUseTheSameCellNumberForAllConditions,removeMethod:e.removeUseTheSameCellNumberForAllConditions},{class:eI,setMethod:e.setForceMacroDetailedBalance,removeMethod:e.removeForceMacroDetailedBalance}]}function ij(e){return[{class:ts,setMethod:e.setEigenvalues,removeMethod:e.removeEigenvalues},{class:ti,setMethod:e.setShortestTimeOfInterest,removeMethod:e.removeShortestTimeOfInterest},{class:tn,setMethod:e.setMaximumEvolutionTime,removeMethod:e.removeMaximumEvolutionTime},{class:ta,setMethod:e.setAutomaticallySetMaxEne,removeMethod:e.removeAutomaticallySetMaxEne},{class:to,setMethod:e.setDiagramEnergyOffset,removeMethod:e.removeDiagramEnergyOffset}]}function iY(e,s){let i=new tr(e,s);return t.addControl(i),i}function iX(e,t,s,i,n,a){i.call(e,s);let o=C("number",n,sH);o.addEventListener("change",e=>{let t=e.target;iS(s,t),T(t)}),o.value=a,T(o),t.appendChild(o)}function i$(e,t,s,i,n,a,o,l,h,m=!1){let c,u,N,p=o.tagName,f=p+sV,x=p+sU,E=L(x,void 0,sH);if(E.classList.add(sK),E.classList.add(sW),i&&i.set(p,E),a&&(u=I(void 0,a),t.appendChild(u),u.appendChild(E),N=g(tr.tagName,p,s$)),n){let t=n.getElementsByTagName(p);if(1==t.length){if(m){let s=G(O(t[0])),i=new(d(r))(s);c=new o($(t[0]),i),iX(e,u,c,l,N,s)}else l.call(e,c);E.textContent=f,E.classList.toggle(sW)}else E.textContent=x,E.classList.toggle(sK)}else c=new o(new Map),E.textContent=x,E.classList.toggle(sK);E.addEventListener("click",t=>{e.index.has(p)?(m&&v(N),h.call(e),E.textContent=x):(m?iX(e,u,c,l,N,""):l.call(e,c),E.textContent=f),E.classList.toggle(sK),E.classList.toggle(sW)})}function iK(e,t,s,i,n){let a,o=I(void 0,n);t.appendChild(o);let l=eD.tagName,h=l+sV,m=l+sU,c=L(m,void 0,sH);o.appendChild(c),c.classList.add(sK),c.classList.add(sW);let u=g(tr.tagName,l,s.toString()),N=I(u,sH);o.appendChild(N);let p=eD.options,f=g(u,"details"),x=g(f,"select");if(null!=i){let t=i.getElementsByTagName(l);if(t.length>0){if(t.length>1)throw Error("More than one CalcMethod element.");let s=$(t[0]),i=s.get("xsi:type");a=function e(t,s,i,n,a,o,l,g,h){let m;let c=i4(t,s,n,o,l,g,h);c.value=l,s.appendChild(c);let u=I(void 0,sH);if(u.id=g,s.appendChild(u),l==eA.xsi_type||l==eA.xsi_type2)m=new eA(a);else if(l==ek.xsi_type||l==ek.xsi_type2)m=new ek(a);else if(l==eG.xsi_type||l==eG.xsi_type2){let e=new eG(a);m=e;let t=i[0].getElementsByTagName(eO.tagName);if(t.length>0){if(1==t.length){let s=new(d(r))(G(O(t[0]))),i=new eO($(t[0]),s);e.setFittingIterations(i)}else throw Error("More than one FittingIterations element.")}iQ(u,e)}else if(l==eV.xsi_type||l==eV.xsi_type2){let e=new eV(a);function N(e,t,s){let i=eF.tagName,n=e[0].getElementsByTagName(i);if(n.length>0){if(1==n.length){let e=new(d(r))(G(O(n[0])));s(new t($(n[0]),e))}else throw Error(`More than one ${i} element.`)}}m=e,N(i,eF,e.setMarquardtIterations.bind(e)),N(i,eq,e.setMarquardtTolerance.bind(e)),N(i,eH,e.setMarquardtDerivDelta.bind(e)),iJ(u,e)}else if(l==e1.xsi_type||l==e1.xsi_type2){let e=new e1(a);function N(e,t,s,i){let n=t.tagName,a=e[0].getElementsByTagName(n);if(a.length>0){if(1==a.length){let e=G(O(a[0]));i&&void 0!=e&&(e=new(d(r))(e)),s(new t($(a[0]),e))}else throw Error(`More than one ${n} element.`)}}m=e,N(i,ej,e.setFormat.bind(e),!0),N(i,eY,e.setPrecision.bind(e),!1),N(i,eX,e.setChebNumTemp.bind(e),!0),N(i,e$,e.setChebNumConc.bind(e),!0),N(i,eK,e.setChebMaxTemp.bind(e),!0),N(i,eW,e.setChebMinTemp.bind(e),!0),N(i,eZ,e.setChebMaxConc.bind(e),!0),N(i,eQ,e.setChebMinConc.bind(e),!0),N(i,eJ,e.setChebTExSize.bind(e),!0),N(i,e0,e.setChebPExSize.bind(e),!0),i0(u,e)}else if(l==e6.xsi_type||l==e6.xsi_type2){let e=new e6(a);function N(e,t,s){let i=t.tagName,n=e[0].getElementsByTagName(i);if(n.length>0){if(1==n.length){let e=new(d(r))(G(O(n[0])));s(new t($(n[0]),e))}else throw Error(`More than one ${i} element.`)}}m=e,N(i,e2,e.setTmin.bind(e)),N(i,e3,e.setTmid.bind(e)),N(i,e5,e.setTmax.bind(e)),N(i,e4,e.setTstep.bind(e)),i1(u,e)}else if(l==tt.xsi_type||l==tt.xsi_type2){let e=new tt(a);function N(e,t,s){let i=t.tagName,n=e[0].getElementsByTagName(i);if(n.length>0){if(1==n.length){let e=G(O(n[0]));void 0!=e&&(e=new(d(r))(e)),s(new t($(n[0]),e))}else throw Error(`More than one ${i} element.`)}}m=e,N(i,e8,e.setSensitivityAnalysisSamples.bind(e)),N(i,e7,e.setSensitivityAnalysisOrder.bind(e)),N(i,e9,e.setSensitivityNumVarRedIters.bind(e)),N(i,te,e.setSensitivityVarRedMethod.bind(e)),i3(u,e)}else{let d=a.get("name");if(void 0!=d&&d!==l)return a.set("xsi:type",d),console.warn(`Using name attribute as xsi:type: ${d}`),e(t,s,i,n,a,o,d,g,h);throw Error(`Unable to determine calculation method for xsi_type: ${l}`)}return m}(e,N,t,p,s,l,i,f,x),e.setCalcMethod(a),c.classList.toggle(sW),c.textContent=h}else c.classList.toggle(sK),c.textContent=m}else c.classList.toggle(sK),c.textContent=m;c.addEventListener("click",t=>{if(e.index.has(l))null!=e.getCalcMethod()&&(e.removeCalcMethod(),v(f),v(x),c.textContent=m,c.classList.toggle(sK),c.classList.toggle(sW));else{p[p.length-1]!=sJ&&p.push(sJ),v(f),v(x);let t=i4(e,o,p,l,sJ,f,x);N.appendChild(t),c.textContent=h,c.classList.toggle(sK),c.classList.toggle(sW)}})}function iW(e,t,s,i){let n=I(void 0,i);t.appendChild(n);let a=td.tagName,o=a+sV,d=a+sU,r=L(a,void 0,sH);r.id=tr.tagName+"_"+a,n.appendChild(r),r.classList.add(sK),r.classList.add(sW);let l=tr.tagName+"_"+a+"_Tmax",g=tr.tagName+"_"+a+"_Tmin",h=tr.tagName+"_"+a+"_Tstep";if(s){let t=s.getElementsByTagName(a);1==t.length?(iZ(e,n,t,l,g,h),r.classList.toggle(sW),r.textContent=o):(r.classList.toggle(sK),r.textContent=d)}else r.classList.toggle(sK),r.textContent=d;r.addEventListener("click",t=>{e.index.has(a)?(e.removeTestMicroRates(),document.getElementById(l)?.remove(),document.getElementById(g)?.remove(),document.getElementById(h)?.remove(),r.textContent=d):(iZ(e,n,null,l,g,h),r.textContent=o),r.classList.toggle(sK),r.classList.toggle(sW)})}function iZ(e,t,s,i,n,a){let o,l;if(null!=s&&s.length>0){if(s.length>1)throw Error("More than one TestMicroRates element.");l=new td(o=$(s[0]))}else(o=new Map).set("Tmax",""),o.set("Tmin",""),o.set("Tstep",""),l=new td(o);e.setTestMicroRates(l);let g=l.getTmax(),h=y("text",i+"_input",sH,sF,e=>{let t=e.target;try{l.setTmax(new(d(r))(t.value)),console.log("Set Tmax to "+t.value)}catch(e){alert("Invalid input, resetting..."),t.value=g.toString()}T(t)},g.toString(),"Tmax");h.id=i,T(h.querySelector("input")),t.appendChild(h);let m=l.getTmin(),c=y("number",n+"_input",sH,sF,e=>{let t=e.target;u(t.value)?(l.setTmin(new(d(r))(t.value)),console.log("Set Tmin to "+t.value)):(alert("Value is not numeric, resetting..."),t.value=m.toString()),T(t)},m.toString(),"Tmin");c.id=n,T(c.querySelector("input")),t.appendChild(c);let N=l.getTstep(),p=y("text",a+"_input",sH,sF,e=>{let t=e.target;u(t.value)?(l.setTstep(new(d(r))(t.value)),console.log("Set Tstep to "+t.value)):(alert("Value is not numeric, resetting..."),t.value=N.toString()),T(t)},N.toString(),"Tstep");p.id=a,T(p.querySelector("input")),t.appendChild(p)}function iQ(e,t){let s=t.getFittingIterations()||new eO(new Map,s2);t.setFittingIterations(s),e.appendChild(y("number",e.id+"_FittingIterations_input",sH,sF,e=>{let t=e.target;u(t.value)?(s.value=new(d(r))(t.value),console.log("Set FittingIterations to "+t.value)):(alert("Value is not numeric, resetting..."),t.value=s.value.toString()),T(t)},s.value.toString(),eO.tagName))}function iJ(e,t){function s(e,t,s,i){let n=g(t.id,e.tagName,"Input"),a=e.value.toString(),o=e.tagName;t.appendChild(y("number",n,s,i,t=>{let s=t.target;u(s.value)?(e.value=new(d(r))(s.value),console.log("Set "+e.tagName+" to "+s.value)):(alert("Value is not numeric, resetting..."),s.value=e.value.toString()),T(s)},a,o))}let i=t.getMarquardtIterations()||new eF(new Map,s2);t.setMarquardtIterations(i),s(i,e,sH,sF);let n=t.getMarquardtTolerance()||new eq(new Map,s2);t.setMarquardtTolerance(n),s(n,e,sH,sF);let a=t.getMarquardtDerivDelta()||new eH(new Map,s2);t.setMarquardtDerivDelta(a),s(a,e,sH,sF)}function i0(e,t){let s=t.getFormat()||new ej(new Map,ej.options[0]);function i(t,s,i,n,a){let o=s()||new t(new Map,a[0]);i(o);let d=R(n,a,n,o.value,e.id,sH,sH);d.querySelector("select")?.addEventListener("change",e=>{let t=e.target;o.value=t.value,console.log(`Set ${n} to `+t.value),M(t)}),e.appendChild(d)}function n(t,s,i,n){let a=s()||new t(new Map,NaN);i(a),e.appendChild(y("text",e.id+`_${n}_input`,sH,sF,i2(a,n),a.value.toString(),n))}i(ej,t.getFormat.bind(t),t.setFormat.bind(t),ej.tagName,ej.options),i(ej,()=>s.getRateUnits(),s.setRateUnits.bind(s),ej.rateUnits,ej.rateUnitsOptions),i(eY,t.getPrecision.bind(t),t.setPrecision.bind(t),eY.tagName,tT.precisionOptions),n(eX,t.getChebNumTemp.bind(t),t.setChebNumTemp.bind(t),eX.tagName),n(e$,t.getChebNumConc.bind(t),t.setChebNumConc.bind(t),e$.tagName),n(eK,t.getChebMaxTemp.bind(t),t.setChebMaxTemp.bind(t),eK.tagName),n(eW,t.getChebMinTemp.bind(t),t.setChebMinTemp.bind(t),eW.tagName),n(eZ,t.getChebMaxConc.bind(t),t.setChebMaxConc.bind(t),eZ.tagName),n(eQ,t.getChebMinConc.bind(t),t.setChebMinConc.bind(t),eQ.tagName),n(eJ,t.getChebTExSize.bind(t),t.setChebTExSize.bind(t),eJ.tagName),n(e0,t.getChebPExSize.bind(t),t.setChebPExSize.bind(t),e0.tagName)}function i1(e,t){function s(t,s,i,n){let a=s()||new t(new Map,NaN);i(a),e.appendChild(y("text",e.id+`_${n}_input`,sH,sF,i2(a,n),a.value.toString(),n))}s(e2,t.getTmin.bind(t),t.setTmin.bind(t),e2.tagName),s(e3,t.getTmid.bind(t),t.setTmid.bind(t),e3.tagName),s(e5,t.getTmax.bind(t),t.setTmax.bind(t),e5.tagName),s(e4,t.getTstep.bind(t),t.setTstep.bind(t),e4.tagName)}function i2(e,t){return t=>{let s=t.target;try{e.value=new(d(r))(s.value)}catch(t){alert("Invalid input value "+s.value+" , resetting..."),s.value=e.value.toString()}T(s)}}function i3(e,t){function s(t,s,i,n){let a=s()||new t(new Map,NaN);i(a),e.appendChild(y("text",g(e.id,n,s$),sH,sF,i2(a,n),a.value.toString(),n))}s(e8,t.getSensitivityAnalysisSamples.bind(t),t.setSensitivityAnalysisSamples.bind(t),e8.tagName),s(e7,t.getSensitivityAnalysisOrder.bind(t),t.setSensitivityAnalysisOrder.bind(t),e7.tagName),s(e9,t.getSensitivityNumVarRedIters.bind(t),t.setSensitivityNumVarRedIters.bind(t),e9.tagName);let i=t.getSensitivityVarRedMethod()||new te(new Map,"");t.setSensitivityVarRedMethod(i);let n=te.tagName;e.appendChild(R(n,te.options,n,te.options[0],g(e.id,n,"select"),sH,sH));let a=e.querySelector("select");a?.addEventListener("change",e=>{let t=e.target;i.value=t.value,console.log(n+" set to "+t.value),M(t)})}function i5(e,t){t.addEventListener("click",s=>{e[e.length-1]==sJ&&e.pop();let i=t.options.length-1;t.options[i].value==sJ&&t.remove(i)})}function i4(e,t,s,i,n,a,o){let d=_(s,i,n,o,sH);return t.appendChild(d),i5(s,d),d.addEventListener("change",s=>{let i=document.getElementById(a);null!=i&&i.remove(),i=I(a,sH),t.appendChild(i);let n=s.target,o=n.value,d=new Map;if(d.set("xsi:type",o),o==eA.xsi_type||o==eA.xsi_type2)e.setCalcMethod(new eA(d));else if(o==ek.xsi_type||o==ek.xsi_type2)e.setCalcMethod(new ek(d));else if(o==eG.xsi_type||o==eG.xsi_type2){let t=new eG(d);e.setCalcMethod(t),iQ(i,t)}else if(o==eV.xsi_type||o==eV.xsi_type2){let t=new eV(d);e.setCalcMethod(t),iJ(i,t)}else if(o==e1.xsi_type||o==e1.xsi_type2){let t=new e1(d);e.setCalcMethod(t),i0(i,t)}else if(o==e6.xsi_type||o==e6.xsi_type2){let t=new e6(d);e.setCalcMethod(t),i1(i,t)}else if(o==tt.xsi_type||o==tt.xsi_type2){let t=new tt(new Map);e.setCalcMethod(t),i3(i,t)}else throw Error("Unknown CalcMethod type.");M(n)}),d}document.addEventListener("DOMContentLoaded",()=>{document.body.className=e?"dark-mode":"light-mode",document.body.className=e?"dark-mode":"light-mode";let l=document.getElementById("menu");l.style.display="flex",l.style.justifyContent="center",l.style.margin="5px",l.style.padding="5px",l.style.border="1px solid black",l.style.backgroundColor="lightgrey";let c="Load Molecule Library (librarymols.xml)",N=L(c,g(c),sH);N.addEventListener("click",e=>{s=new sT}),l.appendChild(N);let p="Load Defaults (defaults.xml)";console.log(p);let f=L(p,g(p),sH);f.addEventListener("click",e=>{new sS}),l.appendChild(f);let w="Load MESMER File",b=L(w,g(w),sH);b.addEventListener("click",l=>{let c;s3.forEach(e=>{v(e,s3)}),null!=i&&i.clear(),null!=n&&n.clear(),a=[],(c=document.createElement("input")).type="file",c.onchange=function(){if(c.files){for(let e=0;e<c.files.length;e++)console.log("inputElement.files["+e+"]="+c.files[e]);let l=c.files[0];console.log(l.name);let N=l.name,p=new FileReader,f=0,w="";p.onload=function(c){if(null==c.target)throw Error("Event target is null");if(w+=c.target.result,null!=l){if(f<l.size){let e=l.slice(f,f+1048576);p.readAsText(e),f+=1048576}else{var b;let l,c,p,f;b=w=w.trim(),l=document.getElementById("xml"),v(c=s5("xml",2),s3),p=P(c,sq),E(c,l,null,p,N,sH,sF),(f=document.createElement("pre")).textContent=b,p.appendChild(f),function(l){console.log("parse: "+l);let c=K(l,tT.tagName);t=new tT($(c));let N=l.getElementsByTagName(tw.tagName);if(1!=N.length)throw Error("Multiple "+tw.tagName+" tags found");{let e=N[0].childNodes[0].nodeValue.trim(),s=new tw($(N[0]),e);t.setTitle(s);let i=document.getElementById("title"),n=s5("titleDiv");v(n,s3);let a=y("text",g(n,s$),sH,sF,e=>{let t=e.target;s.value=t.value,console.log(s.tagName+" changed to "+s.value),T(t)},e,tw.tagName);a.id=n,i.appendChild(a)}let p=document.getElementById("molecules"),f=s5(ty.tagName);v(f,s3),E(f,p,null,function(e){i=new Map;let t=P(void 0,sH),n=K(e,ty.tagName),a=new Set;if(n.childNodes.forEach(function(e){a.add(e.nodeName)}),1!=a.size&&!(2==a.size&&a.has("#text")))throw console.error("moleculeListTagNames:"),a.forEach(e=>console.error(e)),Error("Additional tag names in moleculeList:");if(!a.has(ss.tagName))throw Error('Expecting tags with "'+ss.tagName+'" tagName but there are none!');let o=n.getElementsByTagName(ss.tagName),l=o.length;console.log("Number of molecules="+l);for(let e=0;e<l;e++){let s=g(ss.tagName,e),n=P(s),a=$(o[e]),l=a.get(ss.s_id);if(void 0==l)throw Error(ss.s_id+" is undefined");let m=new ss(a,l);i.set(l,m);let c=E(g(s,sY),t,null,n,l,sH,sq),N=new Set,p=o[e].childNodes;for(let e=0;e<p.length;e++){let t=p[e];N.has(t.nodeName)?"#text"!=t.nodeName&&console.warn("Another ChildNode with nodeName="+t.nodeName):N.add(t.nodeName)}is(m,c.querySelector(x),n,sq),n.appendChild(ii(g(m.getID(),sX),m.getDescription.bind(m),m.setDescription.bind(m),sH,sq));let f=o[e].getElementsByTagName(tN.tagName);if(f.length>0){f.length>1&&console.warn("Expecting 1 or 0 "+tN.tagName+" but finding "+f.length+". Loading the first of these...");let e=g(s,tN.tagName),t=P(e);E(g(e,sY),n,null,t,tN.tagName,sH,sq);let i=f[0].getElementsByTagName(tl.tagName),a=new tN($(f[0]));m.setMetadataList(a);for(let s=0;s<i.length;s++){let n=new tl($(i[s]));t.appendChild(function(e,t,s,i,n,a){s.addMetadata(t);let o=I(i,sq);return o.appendChild(B(e.getID(),sH)),o}(m,n,a,g(e,s),0,0))}N.delete(tN.tagName)}let v=o[e].getElementsByTagName(tR.tagName),w=g(s,tR.tagName),b=P(w);E(g(w,sY),n,null,b,tR.tagName,sH,sq);let S=new tR(new Map);m.setAtoms(S);for(let e=0;e<v.length;e++){let t=$(v[e]);t.size>0&&console.warn("AtomArray has attributes but these get lost/ignored: "+h(t))}let M=o[e].getElementsByTagName(t_.tagName);m.setAtoms(S);for(let e=0;e<M.length;e++)b.appendChild(id(m,S,new t_($(M[e]),m),sH,sq));b.appendChild(io(m,b,t_.tagName,sH,sq)),N.delete(t_.tagName);let z=o[e].getElementsByTagName(tP.tagName),_=g(s,tP.tagName),k=P(_);E(g(_,sY),n,null,k,tP.tagName,sH,sq);let q=new tP(new Map);m.setBonds(q);for(let e=0;e<z.length;e++){let t=$(z[e]);t.size>0&&console.warn("BondArray has attributes but these get lost/ignored: "+h(t))}let H=o[e].getElementsByTagName(tL.tagName);for(let e=0;e<H.length;e++)k.appendChild(im(m,m.getAtoms().atoms,q,new tL($(H[e]),m),sH,sq));k.appendChild(ih(m,l,k,tL.tagName,sH,sq)),N.delete(tL.tagName);let V=g(s,"viewer"),U=P(V);E(g(V,sY),n,null,U,"viewer",sH,sq),iw(m,U,sH,sq);let j=o[e].getElementsByTagName(tj.tagName);if(j.length>1)throw Error("Expecting 1 or 0 "+tj.tagName+" but finding "+j.length+"!");let Y=new Set(tB.propertyDictRefs);if(1==j.length){let e=g(s,tj.tagName),t=P(e);E(g(e,sY),n,null,t,tj.tagName,sH,sq);let i=new tj($(j[0]));m.setPropertyList(i);let a=j[0].getElementsByTagName(tA.tagName);for(let e=0;e<a.length;e++){let s=ic(Y,i,a[e],t,m,sH,sq);i.setProperty(s)}console.log("Molecule "+m.getDescription()),console.log("pap.size="+Y.size),Y.forEach(function(e){console.log("dictRef="+e);let s=new Map;if(s.set(tA.s_dictRef,e),"me:Hf0"==e){let e=new(d(r))("0"),n=new Map;n.set("units","kJ/mol");let a=new tO(s,new tI(n,e));(function(e,t,s,i,n,a,o){let d=n.getProperty();d.setValue=(function(e){d.value=e,n.dictRef==tk.dictRef&&ie()}).bind(d);let r=g(a.id,n.dictRef);console.log("div ID "+r);let l=iN(r,n.dictRef,d.getValue.bind(d),d.setValue,()=>i.removeProperty(n.dictRef),sH,sq);console.log("unitsID "+g(r,tI.s_units)),iC(s,e,l,l.querySelector(s$),g(r,tI.s_units),n.dictRef,o,o),a.appendChild(l)})(n,0,tT.energyUnits,i,a,t,sH),i.setProperty(a)}}),N.delete(tj.tagName)}else{let t=new tj(new Map);m.setPropertyList(t);let s=o[e].getElementsByTagName(tA.tagName);if(1!=s.length)throw Error("Expecting 1 "+tA.tagName+" but finding "+s.length+". Should these be in a "+tj.tagName+"?");let i=ic(Y,t,s[0],n,m,sH,sq);t.setProperty(i),Y.forEach(function(e){console.log("dictRef="+e)}),N.delete(tA.tagName)}let X=o[e].getElementsByTagName(tW.tagName);if(X.length>0){if(X.length>1)throw Error("Expecting 1 or 0 "+tW.tagName+" but finding "+X.length+"!");(function(e,t,s,i){let n=s.getElementsByTagName(tY.tagName);if(n.length>0){let s=g(t.getID(),tW.tagName),a=document.createElement("div");E(g(s,sY),i,null,a,tW.tagName,sH,sq);let o=[];for(let e=0;e<n.length;e++){let t=F(n[e]),i=new(d(r))(t),l=new tY($(n[e]),i);o.push(l);let h=tY.tagName,m=g(s,tY.tagName,e),c=y("number",m,sH,sq,s=>{let i=s.target;iS(l,i),t=i.value,o[e].setValue(new(d(r))(t)),console.log("Set "+m+" to "+t),T(i)},t,h);a.appendChild(c);let u=document.createElement("label");u.textContent="units cm-1",c.appendChild(u)}e.setDeltaEDowns(o),t.setEnergyTransferModel(e)}})(new tW($(X[0])),m,X[0],n),N.delete(tW.tagName)}let K=o[e].getElementsByTagName(tZ.tagName);if(K.length>0){if(K.length>1)throw Error("Expecting 1 or 0 "+tZ.tagName+" but finding "+K.length+"!");let e=new tZ($(K[0]));n.appendChild(R(tZ.tagName,tZ.xsi_typeOptions,tZ.tagName,e.getXsiType(),m.getID(),sH,sq)),N.delete(tZ.tagName)}let W=o[e].getElementsByTagName(t0.tagName);if(W.length>0){if(W.length>1)throw Error("Expecting 1 or 0 "+t0.tagName+" but finding "+W.length+"!");let e=$(W[0]),t=new t0(e);m.setDistributionCalcMethod(t),g(s,t0.tagName);let i=P(g(s,t0.tagName));n.appendChild(i),i.appendChild(B(t0.tagName+" "+h(e),sq)),N.delete(t0.tagName)}let Z=o[e].getElementsByTagName(st.tagName);if(Z.length>0){if(Z.length>1)throw Error("Expecting 1 or 0 "+st.tagName+" but finding "+Z.length+"!");let e=new st($(Z[0]));m.setDensityOfStatesList(e);let t=g(s,st.tagName),i=P(t);E(g(t,sY),n,null,i,st.tagName,sH,sq);let a=Z[0].getElementsByTagName(se.tagName),o=Z[0].getElementsByTagName(tM.tagName);if(o.length>0){if(o.length>1)throw Error("Expecting 1 or 0 "+tM.tagName+" but finding "+o.length+"!");let t=new tM($(o[0]),G(O(o[0])));e.setDescription(t)}if(0==a.length)throw Error("Expecting 1 or more "+se.tagName+" but finding 0!");{let s=D(g(t,s0),sq);A(s,se.header),i.appendChild(s);for(let n=0;n<a.length;n++){let o=new se($(a[n]));e.addDensityOfStates(o);let l=I(g(t,n),sq);i.appendChild(l);let h=a[n].getElementsByTagName(tz.tagName);if(1!=h.length)throw Error("Expecting 1 "+tz.tagName+" but finding "+h.length+"!");{let e=new tz($(h[0]),new(d(r))(G(O(h[0]))));o.setT(e)}let m=a[n].getElementsByTagName(t8.tagName);if(1!=m.length)throw Error("Expecting 1 "+t8.tagName+" but finding "+m.length+"!");{let e=new t8($(m[0]),new(d(r))(G(O(m[0]))));o.setQtot(e)}let c=a[n].getElementsByTagName(t7.tagName);if(1!=c.length)throw Error("Expecting 1 "+t7.tagName+" but finding "+c.length+"!");{let e=new t7($(c[0]),new(d(r))(G(O(c[0]))));o.setSumc(e)}let u=a[n].getElementsByTagName(t9.tagName);if(1!=u.length)throw Error("Expecting 1 "+t9.tagName+" but finding "+u.length+"!");{let e=new t9($(u[0]),new(d(r))(G(O(u[0]))));o.setSumg(e)}A(s,o.toStringArray())}ni(e.toCSV,i,s,l+"_"+st.tagName,sq)}N.delete(st.tagName)}let Q=t2.tagName,J=o[e].getElementsByTagName(Q);if(J.length>0){let e;if(J.length>1)throw Error("Expecting 1 or 0 "+Q+" but finding "+J.length+"!");let t=new t2($(J[0])),i=g(s,t2.tagName),a=P(i);E(g(i,sY),n,null,a,Q,sH,sq);let o=t1.tagName,d=J[0].getElementsByTagName(o);if(0==d.length)throw Error("Expecting 1 or more "+o+" but finding 0!");{e=[];let s=D(g(i,s0),sq);A(s,t.getHeader());for(let t=0;t<d.length;t++){let i=new t1($(d[t]));e.push(i),A(s,i.toStringArray())}a.appendChild(s),t.init(e),ni(t.toCSV.bind(t),a,s,l+"_"+t2.tagName,sq)}m.setThermoTable(t),N.delete(o),N.delete(Q)}let ee=o[e].getElementsByTagName(t4.tagName);if(ee.length>0)for(let e=0;e<ee.length;e++){let t=new t4($(ee[e])),i=g(s,t4.tagName,e),a=P(i);E(g(i,sY),n,null,a,t4.tagName,sH,sq);let o=ee[0].getElementsByTagName(tQ.tagName);if(o.length>0){if(1!=o.length)throw Error("Expecting only 1 bondRef, but there are "+o.length);let e=m.getBonds().getBondIds(),t=new tQ($(o[0]),G(O(o[0]))),s=R(tQ.tagName,e,tQ.tagName,t.value,m.getID(),sH,sq);s.getElementsByTagName("select")[0].classList.add(tL.tagName),a.appendChild(s)}let l=ee[0].getElementsByTagName(t3.tagName);if(l.length>0){if(1!=l.length)throw Error("Expecting only 1 HinderedRotorPotential, but there are "+l.length);let e=$(l[0]),o=new t3(e),h=g(i,t3.tagName),m=P(h);E(g(h,sY),a,null,m,t3.tagName,sH,sq);let c=R(t3.s_format,t3.formats,t3.tagName,o.getFormat(),g(h,t3.s_format),sH,sq);m.appendChild(c),iC(tT.energyUnits,e,m,c,g(h,t3.s_units),t3.tagName,sH,sq);let N=o.getExpansionSize()??s1;m.appendChild(y("text",g(h,t3.s_expansionSize),sH,sq,e=>{let t=e.target;try{o.setExpansionSize(new(d(r))(t.value))}catch(e){alert("Invalid value, resetting..."),t.value=o.getExpansionSize()??s1}T(t)},N,t3.s_expansionSize)),function(e,t,s){g(e.id,t3.s_useSineTerms);let i=t3.s_useSineTerms+sV,n=t3.s_useSineTerms+sU,a=L(n,void 0,s);e.appendChild(a),a.classList.add(sK),a.classList.add(sW),!0==t.getUseSineTerms()?(a.textContent=i,a.classList.toggle(sW)):(a.textContent=n,a.classList.toggle(sK)),a.addEventListener("click",e=>{!1==t.getUseSineTerms()?(t.setUseSineTerms(!0),a.textContent=i):(t.setUseSineTerms(!1),a.textContent=n),a.classList.toggle(sK),a.classList.toggle(sW)})}(m,o,sq);let p=g(s,t3.tagName,tJ.tagName),f=P(p),x=E(g(p,sY),n,null,f,"PotentialPoints",sH,sq);m.appendChild(x);let v=[],w=l[0].getElementsByTagName(tJ.tagName);for(let e=0;e<w.length;e++){let t=new tJ($(w[e]));v.push(t);let s=g(p,tJ.tagName,e),i=I(s,sq);f.appendChild(i);let n=B(tJ.tagName+" "+e,sH);i.appendChild(n);let a=t.getAngle()??s1,o=y("text",g(s,tJ.s_angle),sH,sH,e=>{let s=e.target;if(u(s.value)){let e=new(d(r))(s.value);t.setAngle(e)}else alert("Angle input is not a number, resetting..."),s.value=t.getAngle()??s1;T(s)},a,tJ.s_angle);i.appendChild(o);let l=B(tJ.s_potential,sH);i.appendChild(l);let h=C("text",g(s,tJ.s_potential),sH);i.appendChild(h);let m=t.getPotential()??s1;h.addEventListener("change",e=>{let s=e.target;if(u(s.value)){let e=new(d(r))(s.value);t.setPotential(e),console.log("Set "+tJ.tagName+" to "+e.toExponential())}else alert("Potential input is not a number, resetting..."),h.value=t.getPotential()??s1;T(h)}),h.value=m,T(h)}o.setPotentialPoints(v),t.setHinderedRotorPotential(o)}let h=ee[e].getElementsByTagName(t5.tagName);if(h.length>0){if(1!=h.length)throw Error("Expecting only 1 Periodicity, but there are "+h.length);let e=G(O(h[0])),s=new t5($(h[0]),new(d(r))(e));t.setPeriodicity(s);let n=y("text",g(i,t5.tagName),sH,sq,i=>{let n=i.target;if(u(e=n.value)){let i=new(d(r))(e);s.value=i,t.getPeriodicity().value=i,console.log("Set "+t5.tagName+" to "+i)}else alert("Periodicity input is not a number, resetting..."),n.value=s.value.toExponential()},e,t5.tagName);a.appendChild(n)}m.setExtraDOSCMethod(t),N.delete(t4.tagName)}N.delete(t6.tagName);let et=o[e].getElementsByTagName(t6.tagName);if(et.length>0){if(1!=et.length)throw Error("Expecting only 1 reservoirSize, but there are "+et.length);let e=G(O(et[0])),t=new(d(r))(e),s=new t6($(et[0]),t);m.setReservoirSize(s);let i=y("number",m.getID()+"_"+t6.tagName,sH,sq,e=>{let t=e.target;s.value=new(d(r))(t.value),T(t)},e,t6.tagName);n.appendChild(i)}N.delete("#text"),N.size>0&&(console.warn("There are additional unexpected moleculeTagNames:"),N.forEach(e=>console.warn(e)));let es=document.createElement("div");es.id=g(m.getID(),"molstar"),n.appendChild(es)}let m=L(sj,void 0,sq);t.appendChild(m),m.addEventListener("click",()=>{let e=prompt("Please enter a name for the molecule","Kr");if(null==e)return;let s=new ss(new Map,e);s.setAtoms(new tR(new Map)),s.setBonds(new tP(new Map)),i.set(e,s);let n=g(ss.tagName,i.size),a=P(n),o=E(g(n,sY),t,m,a,e,sH,sq);ig(eo.tagName,s.getID()),is(s,o.querySelector(x),a,sq),a.appendChild(ii(g(s.getID(),sX),s.getDescription.bind(s),s.setDescription.bind(s),sH,sq));let d=g(n,tR.tagName),r=P(d);E(g(d,sY),a,null,r,tR.tagName,sH,sq),r.appendChild(io(s,r,t_.tagName,sH,sq));let l=g(n,tP.tagName),h=P(l);E(g(l,sY),a,null,h,tP.tagName,sH,sq),h.appendChild(ih(s,e,h,tL.tagName,sH,sq)),iw(s,a,sH,sq);let c=g(n,tj.tagName),u=P(c);E(g(c,sY),a,null,u,tj.tagName,sH,sq)});let c=L("Add from library ＋",void 0,sH);return c.addEventListener("click",()=>{if(void 0==s){alert("Use the menu to load a molecule library, then try again...");return}let e=P(g(ss.tagName,"div"),sq),n=Array.from(s.molecules.keys());iu(n,!0);let a=_(n,"Select molecule",sJ,g(ss.tagName,sQ),sH);a.classList.add(ss.tagName),e.appendChild(a),t.insertBefore(e,m),i5(n,a),a.addEventListener("change",n=>{let a=n.target,o=a.options[a.selectedIndex].value,d=s.molecules.get(o);i.set(o,d);let r=g(ss.tagName,i.size),l=P(r),h=E(g(r,sY),t,m,l,d.getID(),sH,sq);ig(eo.tagName,d.getID()),is(d,h.querySelector(x),l,sq),l.appendChild(ii(g(d.getID(),sX),d.getDescription.bind(d),d.setDescription.bind(d),sH,sq));let c=g(r,tN.tagName),u=P(c,sq);E(g(c,sY),l,null,u,tN.tagName,sH,sq);let N=d.getMetadataList();void 0!=N&&N.getMetadata().forEach(e=>{let t=P();u.appendChild(t),t.appendChild(B(e.getLabelText(),sH))});let p=g(r,tR.tagName),f=P(p);E(g(p,sY),l,null,f,tR.tagName,sH,sq);let v=d.getAtoms();void 0!=v&&v.atoms.forEach(e=>{f.appendChild(id(d,d.getAtoms(),e,sH,sq))}),f.appendChild(io(d,f,t_.tagName,sH,sq));let w=g(r,tP.tagName),y=P(w);E(g(w,sY),l,null,y,tP.tagName,sH,sq),void 0!=d.getBonds()&&d.getBonds().bonds.forEach(e=>{if(void 0==v)throw Error("Atoms are not defined for molecule "+d.getID());y.appendChild(im(d,v.atoms,d.getBonds(),e,sH,sq))}),y.appendChild(ih(d,d.getID(),y,tL.tagName,sH,sq)),iw(d,l,sH,sq);let C=g(r,tj.tagName),b=P(C);E(g(C,sY),l,null,b,tj.tagName,sH,sq),e.remove()})}),t.appendChild(c),t}(l),ty.tagName,sH,sF);let w=document.getElementById("reactions"),b=s5(tC.tagName);v(b,s3),E(b,w,null,function(e){n=new Map;let t=P(void 0,sH),s=K(e,tC.tagName),i=new Set;if(s.childNodes.forEach(function(e){i.add(e.nodeName)}),1!=i.size&&!(2==i.size&&i.has("#text")))throw console.error("reactionListTagNames:"),i.forEach(e=>console.error(e)),Error("Additional tag names in reactionList:");if(!i.has(sE.tagName))throw Error('Expecting tags with "'+sE.tagName+'" tagName but there are none!');let a=s.getElementsByTagName(sE.tagName);console.log("Number of reactions="+a.length);for(let e=0;e<a.length;e++){let s=new sE($(a[e]));n.set(s.id,s);let i=new Set,o=a[e].childNodes,l=g(sE.tagName,e),m=P(l);for(let e=0;e<o.length;e++){let t=o[e];i.has(t.nodeName)?"#text"!=t.nodeName&&console.warn("Another ChildNode with nodeName="+t.nodeName):i.add(t.nodeName)}let c=a[e].getElementsByTagName(sn.tagName);if(i.delete(sn.tagName),c.length>0){let e=g(s.id,sn.tagName),t=P(e);E(g(e,sY),m,null,t,"Reactants",sH,sq);let i=[];for(let e=0;e<c.length;e++){let n=g(s.id,sn.tagName,e),a=new si($(k(c[e],ss.tagName))),o=new sn($(c[e]),a);i.push(o);let d=R(a.ref+" role",sn.roleOptions,"Role",a.role,g(n,sQ),sH,sq);d.querySelector("select")?.addEventListener("change",e=>{let t=e.target;a.setRole(t.value),console.log("Set Role to "+t.value),M(t)}),t.appendChild(d)}s.setReactants(i)}let u=a[e].getElementsByTagName(sa.tagName);if(i.delete(sa.tagName),u.length>0){let e=g(l,sa.tagName),t=P(e);E(g(e,sY),m,null,t,"Products",sH,sq);let i=[];for(let e=0;e<u.length;e++){let s=new si($(k(u[e],ss.tagName))),n=new sa($(u[e]),s);i.push(n);let a=R(s.ref+" role",sa.roleOptions,s.role,s.ref,"Role",sH,sq),o=a.querySelector("select");o.value=s.role,o.addEventListener("change",e=>{let t=e.target;s.setRole(t.value),console.log("Set Role to "+t.value),M(t)}),M(o),t.appendChild(a)}s.setProducts(i)}E(g(l,sY),t,null,m,s.id+" ("+s.getLabel()+")",sH,sq);let N=a[e].getElementsByTagName(sc.tagName);if(N.length>0){if(N.length>1)throw Error("Expecting 1 "+sc.tagName+" but finding "+N.length+"!");let e=new sc($(N[0]));s.setTunneling(e);let t=R(sc.tagName,sc.options,"Tunneling",e.getName(),s.id,sH,sq);t.querySelector("select")?.addEventListener("change",t=>{let s=t.target;e.setName(s.value),console.log("Set Tunneling to "+s.value),M(s)}),m.appendChild(t)}let p=a[e].getElementsByTagName(so.tagName);if(p.length>0){let e=g(l,sa.tagName),t=P(e);E(g(e,sY),m,null,t,"Transition States",sH,sq);let i=[];for(let e=0;e<p.length;e++){let s=new si($(k(p[e],ss.tagName))),n=new so($(p[e]),s);i.push(n);let a=B(s.ref+" role transitionState",sq);t.appendChild(a)}s.setTransitionStates(i)}let f=a[e].getElementsByTagName(sh.tagName);if(f.length>0){if(f.length>1)throw Error("Expecting 1 "+sh.tagName+" but finding "+f.length+"!");{let e;let t=$(f[0]),i=t.get("name"),n=g(s.id,sh.tagName),a=P(n);if(void 0==i||i==sm.xsiType2){let s=E(g(n,sY),m,null,a,sh.tagName,sH,sq);m.appendChild(s);let i=t.get("xsi:type");if(e=new sm(t),i==sm.xsiType||i==sm.xsiType2){let t=f[0].getElementsByTagName(sd.tagName);if(null!=t&&null!=t[0]){let s=F(t[0]),i=new(d(r))(s),o=$(t[0]),l=new sd(o,i);e.setPreExponential(l);let h=y("number",g(n,sd.tagName,s$),sH,sq,e=>{iS(l,e.target)},s,sd.tagName);a.appendChild(h);let m=h.querySelector("input");m.value=s,T(m),m.addEventListener("change",e=>{s=e.target.value,l.value=new(d(r))(s),console.log(sd.tagName+" changed to "+s),T(m)}),iC(void 0,o,h,null,g(n,sd.tagName),sd.tagName,sH,sH),a.appendChild(h)}let s=f[0].getElementsByTagName(sr.tagName);if(null!=s&&null!=s[0]){let t=F(s[0]),i=new(d(r))(t),o=$(s[0]),l=new sr(o,i);e.setActivationEnergy(l);let h=y("number",g(n,sr.tagName,s$),sH,sq,e=>{iS(l,e.target)},t,sr.tagName),m=h.querySelector("input");m.value=t,T(m),m.addEventListener("change",e=>{t=e.target.value,l.value=new(d(r))(t),console.log(sr.tagName+" changed to "+t),T(m)}),iC(void 0,o,h,null,g(n,sr.tagName),sr.tagName,sH,sH),a.appendChild(h)}let i=f[0].getElementsByTagName(sl.tagName);if(null!=i&&null!=i[0]){let t=F(i[0]),s=new(d(r))(t),o=$(i[0]),l=new sl(o,s);e.setTInfinity(l);let h=y("number",g(n,sl.tagName,s$),sH,sq,e=>{iS(l,e.target)},t,sl.tagName),m=h.querySelector("input");m.value=t,T(m),m.addEventListener("change",e=>{t=e.target.value,l.value=new(d(r))(t),console.log(sl.tagName+" changed to "+t),T(m)}),iC(void 0,o,h,null,g(n,sl.tagName),sl.tagName,sH,sH),a.appendChild(h)}let o=f[0].getElementsByTagName(sg.tagName);if(null!=o&&null!=o[0]){let t=F(o[0]),s=new(d(r))(t),i=$(o[0]),l=new sg(i,s);e.setNInfinity(l);let h=y("number",g(n,sg.tagName,s$),sH,sq,e=>{iS(l,e.target)},t,sg.tagName);a.appendChild(h);let m=h.querySelector("input");m.value=t,T(m),m.addEventListener("change",e=>{t=e.target.value,l.value=new(d(r))(t),console.log(sg.tagName+" set to "+t),T(m)}),iC(void 0,i,h,null,g(n,sg.tagName),sg.tagName,sH,sH),a.appendChild(h)}}else throw Error("Unexpected xsi:type="+i)}else{e=new sh(t);let s=document.createElement("label");s.textContent=sh.tagName+": "+t.get("name"),Object.assign(s.style,sq),a.appendChild(s),m.appendChild(a)}s.setMCRCMethod(e)}}let x=a[e].getElementsByTagName(su.tagName);if(x.length>0){if(x.length>1)throw Error("Expecting 1 "+su.tagName+" but finding "+x.length+"!");let e=new(d(r))(G(O(x[0]))),t=new su($(x[0]),e);s.setExcessReactantConc(t);let i=y("number",g(s.id,su.tagName),sH,sq,e=>{iS(t,e.target)},e.toExponential(),su.tagName);m.appendChild(i)}let v=a[e].getElementsByTagName(sv.tagName);if(v.length>0){if(v.length>1)throw Error("Expecting 1 "+sv.tagName+" but finding "+v.length+"!");let e=$(v[0]),t=new sv(e);s.setCanonicalRateList(t);let i=g(s.id,sv.tagName),n=P(i),a=E(g(i,sY),m,null,n,sv.tagName,sH,sq);m.appendChild(a);let o=v[0].getElementsByTagName(tM.tagName);if(o.length>0){if(o.length>1)throw Error("Expecting 1 "+tM.tagName+" but finding "+o.length+"!");let s=G(O(o[0]));t.setDescription(new tM($(o[0]),s));let i=B(s+" ("+h(e)+")",sH),a=P(void 0,sq);a.appendChild(i),n.appendChild(a)}let l=v[0].getElementsByTagName(sx.tagName);if(l.length>0){let e=D(g(n,s0),sq);n.appendChild(e);for(let s=0;s<l.length;s++){let i=new sx($(l[s]));t.addKinf(i);let n=l[s].getElementsByTagName(tz.tagName);if(n.length>0){if(n.length>1)throw Error("Expecting 1 "+tz.tagName+" but finding "+n.length+"!");let e=new(d(r))(G(O(n[0])));i.setT(new tz($(n[0]),e))}let a=l[s].getElementsByTagName(sN.tagName);if(a.length>0){if(a.length>1)throw Error("Expecting 1 "+sN.tagName+" but finding "+a.length+"!");let e=new(d(r))(G(O(a[0])));i.setVal(new sN($(a[0]),e))}let o=l[s].getElementsByTagName(sp.tagName);if(o.length>0){if(o.length>1)throw Error("Expecting 1 "+sp.tagName+" but finding "+o.length+"!");let e=new(d(r))(G(O(o[0])));i.setRev(new sp($(o[0]),e))}let g=l[s].getElementsByTagName(sf.tagName);if(g.length>0){if(g.length>1)throw Error("Expecting 1 "+sf.tagName+" but finding "+g.length+"!");let e=new(d(r))(G(O(g[0])));i.setKeq(new sf($(g[0]),e))}0==s&&A(e,i.getHeader()),A(e,i.toStringArray())}ni(t.toCSV.bind(t),n,e,s.id+"_"+sv.tagName,sq)}}}return t}(l),tC.tagName,sH,sF);let S=document.getElementById("reactionsDiagram"),z=s5(s4);null!=o&&(o.close(),o=null),v(z,s3);let q=P(void 0,sq);E(z,S,null,q,s4,sH,sF);let H=g(z,x+"s"),V=P(H);q.appendChild(V);let U=g(H,x),j="Pop into a new Window",Y=L(j,U);V.appendChild(Y);let X=document.createElement("canvas");X.id=s8,q.appendChild(X),X.height=400,X.style.border="1px solid black",i7(X,e,s7,4,2),Y.addEventListener("click",()=>{if(null==o){let t=document.createElement("canvas");t.id=s8,(o=window.open("",s4,"width="+X.width+", height="+X.height)).document.body.appendChild(t),i7(t,e,s7,4,2),v(s8,s3),Y.textContent="Pop into this Window"}else(X=document.createElement("canvas")).id=s8,q.appendChild(X),i7(X,e,s7,4,2),o.close(),o=null,Y.textContent=j}),ns(X,V,null,s4);let W=document.getElementById("conditions"),ed=s5(ec.tagName);v(ed,s3),E(ed,W,null,function(e){let s;console.log(ec.tagName);let i=P(void 0,sH),n=e.getElementsByTagName(ec.tagName);for(let e=0;e<n.length;e++){let s=n[e],a=g(ec.tagName,e.toString()),o=P(a,sH),d=g(a,sY);E(d,i,null,o,ec.tagName+" "+e.toString(),sH,sq);let r=iz($(s),e);iT(r,o,e,s),iM(r,o,e,s),iv(o,sq,t.removeConditions.bind(t),e).addEventListener("click",e=>{v(d,s3)})}return s=L(sj,void 0,sq),i.appendChild(s),s.addEventListener("click",e=>{let n,a=t.getNextConditionsID();console.log("Add Conditions "+a.toString());let o=g(ec.tagName,a.toString()),d=P(o,sH),r=g(o,sY);if(a>0){let e=document.getElementById(g(ec.tagName,(a-1).toString(),sY)).nextElementSibling;n=null!=e&&e.parentElement==i?e:s}else n=s;E(r,i,n,d,ec.tagName+" "+a.toString(),sH,sq);let l=iz(new Map,a);iT(l,d,a,null),iM(l,d,a,null),iv(d,sq,t.removeConditions.bind(t),a).addEventListener("click",e=>{v(r,s3)})}),i}(l),"ConditionsList",sH,sF);let er=document.getElementById("modelParameters"),el=s5(tE.tagName,"list");v(el,s3),E(el,er,null,function(e){console.log(tE.tagName);let s=P(g(tE.tagName),sH),i=e.getElementsByTagName(tE.tagName);for(let e=0;e<i.length;e++){let n=g(tE.tagName,e.toString()),a=P(n,sH);E(g(n,sY),s,null,a,tE.tagName+" "+e.toString(),sH,sq);let o=new tE($(i[e]));t.setModelParameters(o),function(e,t,s){let i,n,a=tp.tagName,o=g(tE.tagName,a),l=I(o,sq);s.appendChild(l);let h=a+sV,m=a+sU,c=t.getElementsByTagName(a),u=L(a,g(o,x),sH);u.classList.add(sK),u.classList.add(sW),l.appendChild(u);let N=g(o,s$),p=g(o,sQ);if(1==c.length){n=G(O(c[0]));let t=new(d(r))(n);i=new tp($(c[0]),t),u.textContent=h,iV(e,l,i,N,p,n,e.setGrainSize,tT.energyUnits),u.classList.toggle(sW)}else n="",i=new tp(new Map,s2),u.textContent=m,u.classList.toggle(sK);u.addEventListener("click",()=>{e.index.has(tp.tagName)?(n=i.value.toExponential(),e.removeGrainSize(),document.getElementById(N)?.remove(),document.getElementById(p)?.remove(),u.textContent=m):(iV(e,l,i,N,p,n,e.setGrainSize,tT.energyUnits),u.textContent=h),u.classList.toggle(sK),u.classList.toggle(sW)})}(o,i[e],a),iH(o,i[e],a,ta,o.setAutomaticallySetMaxEne,o.removeAutomaticallySetMaxEne),iH(o,i[e],a,tx,o.setEnergyAboveTheTopHill,o.removeEnergyAboveTheTopHill),iH(o,i[e],a,tv,o.setMaxTemperature,o.removeMaxTemperature)}return s}(l),tE.tagName,sH,sF);let eg=document.getElementById("control"),eh=s5(tr.tagName);v(eh,s3),E(eh,eg,null,function(e){let s;console.log(tr.tagName);let i=P(void 0,sH),n=e.getElementsByTagName(tr.tagName);for(let e=0;e<n.length;e++){let s=n[e],a=g(tr.tagName,e.toString()),o=P(a,sH);i.appendChild(o);let d=g(a,sY);E(d,i,null,o,tr.tagName+" "+e.toString(),sH,sq);let r=iY($(s),e),l=new Map;iU(r).forEach(t=>{i$(r,o,e,l,s,null,t.class,t.setMethod,t.removeMethod)});let m=I(void 0,sq);new Map([...l.entries()].sort()).forEach(e=>{m.appendChild(e)}),o.appendChild(m),iW(r,o,null,sq),iK(r,o,e,s,sq),ij(r).forEach(t=>{i$(r,o,e,l,s,sq,t.class,t.setMethod,t.removeMethod,!0)});let c=s.getElementsByTagName(eI.tagName);if(1==c.length){let e=$(c[0]),t=G(O(c[0])),s=new eI(e,t);r.setForceMacroDetailedBalance(s);let i=I(void 0,sq);o.appendChild(i);let n=B(eI.tagName+" "+h(e)+" "+t,sH);i.appendChild(n)}iv(o,sq,t.removeControl.bind(t),e).addEventListener("click",e=>{v(d,s3)})}return s=L(sj,void 0,sq),i.appendChild(s),s.addEventListener("click",e=>{let n,a=t.getNextControlID();console.log("Add Control "+a.toString());let o=g(tr.tagName,a.toString()),d=P(o,sH);if(a>0){let e=document.getElementById(g(tr.tagName,(a-1).toString(),sY)).nextElementSibling;n=null!=e&&e.parentElement==i?e:s}else n=s;let r=g(o,sY);E(r,i,n,d,tr.tagName+" "+a.toString(),sH,sq);let l=iY(new Map,a),h=new Map;iU(l).forEach(e=>{i$(l,d,a,h,null,null,e.class,e.setMethod,e.removeMethod)});let m=I(void 0,sq);new Map([...h.entries()].sort()).forEach(e=>{m.appendChild(e)}),d.appendChild(m),iW(l,d,null,sq),iK(l,d,a,null,sq),ij(l).forEach(e=>{i$(l,d,a,h,null,sq,e.class,e.setMethod,e.removeMethod,!0)}),iv(d,sq,t.removeControl.bind(t),a).addEventListener("click",e=>{v(r,s3)})}),i}(l),"ControlList",sH,sF);let em=document.getElementById("metadata"),eu=s5(tN.tagName);v(eu,s3),E(eu,em,null,function(e){console.log(tN.tagName);let s=P(void 0,sH),i=e.getElementsByTagName(tN.tagName);if(i.length>0){if(i.length>1)throw Error("More than one MetadataList element.");let e=new tN($(i[0]));function n(t,n,a){let o=i[0].getElementsByTagName(t);if(o.length>0){if(1==o.length){let t=O(o[0])?.nodeValue??"",i=new n($(o[0]),t),d=P(void 0,sq);s.appendChild(d),d.appendChild(B(i.tagName+" "+t,sH)),a.call(e,i)}else throw Error(`More than one ${t} element.`)}}t.setMetadataList(e),n(th.tagName,th,e.setSource),n(tm.tagName,tm,e.setCreator),n(tc.tagName,tc,e.setDate),n(tu.tagName,tu,e.setContributor)}return s}(l),tN.tagName,sH,sF);let eN=document.getElementById("analysis"),ep=s5(ea.tagName);v(ep,s3),E(ep,eN,null,function(e){console.log(ea.tagName);let s=g(ea.tagName),i=P(s,sH),n=e.getElementsByTagName(ea.tagName);if(n.length>0){if(n.length>1)throw Error("More than one Analysis element.");let e=new ea($(n[0]));t.setAnalysis(e);let o=n[0].getElementsByTagName(tM.tagName);if(o.length>0){if(1==o.length){let t=O(o[0])?.nodeValue??"",n=new tM($(o[0]),t),a=P(g(s,tM.tagName),sq);i.appendChild(a),a.appendChild(B(n.tagName+" "+t,sH)),e.setDescription(n)}else throw Error("More than one Description element.")}let l=n[0].getElementsByTagName(Q.tagName),c=g(i,Q.tagName),u=P(c,sq);if(E(c,i,null,u,Q.tagName+"s",sH,sq),l.length>0)for(let t=0;t<l.length;t++){let s=$(l[t]),i=new Q(s),n=i.tagName+" "+t.toString()+" "+h(s),a=g(u.id,t.toString()),o=P(c,sq);E(a,u,null,o,n,sH,sF),e.addEigenvalueList(i);let N=[],p=l[t].getElementsByTagName(Z.tagName);if(p.length>0)for(let e=0;e<p.length;e++){let t=new(d(r))(O(p[e])?.nodeValue);N.push(t),i.addEigenvalue(new Z($(p[e]),t))}o.appendChild(B(m(N,", "),sH))}let N=n[0].getElementsByTagName(et.tagName),p=g(i,et.tagName),f=P(p,sq);if(E(p,i,null,f,et.tagName+"s",sH,sq),N.length>0)for(let t=0;t<N.length;t++){let s=$(N[t]);void 0!=s.get("T")&&new(d(r))(s.get("T")),void 0!=s.get("conc")&&new(d(r))(s.get("conc"));let n=new et(s),o=n.tagName+" "+t.toString()+" "+h(s),l=g(i.id,et.tagName,t.toString()),m=g(l,t.toString()),c=P(l,sq);E(m,f,null,c,o,sH,sF),e.addPopulationList(n);let u=new Map,p=[];p.push("time");let x=N[t].getElementsByTagName(ee.tagName);if(x.length>0)for(let e=0;e<x.length;e++){let t=$(x[e]),s=new ee(t,[]);n.addPopulation(s);let i=void 0!=t.get("time")?new(d(r))(t.get("time")):s2,a=new Map;u.set(i,a);let o=x[e].getElementsByTagName(J.tagName);if(o.length>0)for(let t=0;t<o.length;t++){let i=$(o[t]),n=i.get("ref");0==e&&p.push(n);let l=new(d(r))(O(o[t])?.nodeValue),g=new J(i,l);s.addPop(g),a.set(n,l)}}let v=P(g(m,"graph"),sH);c.appendChild(v);let w=document.createElement("canvas");v.appendChild(w);let y=new i6(w,u,s9);a.push(y),ns(w,c,v,o);let C=P(g(m,s0),sH);c.appendChild(C);let b=D(g(l,s0),sH);A(b,p),u.forEach((e,t)=>{let s=[];s.push(t.toString()),e.forEach((e,t)=>{s.push(e.toString())}),A(b,s)}),C.appendChild(b),ni(()=>i8(b),c,C,o,sH)}let x=n[0].getElementsByTagName(en.tagName),v=g(i,en.tagName),w=P(v,sq);if(E(v,i,null,w,en.tagName+"s",sH,sq),x.length>0){let t=P(g(v,s0),sH);w.appendChild(t);let s=D(g(p,s0),sH),i=["T","conc"];for(let t=0;t<x.length;t++){let n=$(x[t]),a=[];a.push(n.get("T")),a.push(n.get("conc"));let o=new en(n);e.addRateList(o);let l=x[t].getElementsByTagName(ei.tagName);if(l.length>0)for(let e=0;e<l.length;e++){let s=$(l[e]);if(0==t){let e=s.get("fromRef"),t=s.get("toRef");i.push(e+"->"+t)}let n=(O(l[e])?.nodeValue??"").trim();a.push(n);let g=new ei(s,new(d(r))(n));o.addFirstOrderRate(g)}let g=x[t].getElementsByTagName(es.tagName);if(g.length>0)for(let e=0;e<g.length;e++){let s=$(g[e]);0==t&&Array.from(s.values()).forEach(e=>{i.push("loss of "+e)});let n=(O(g[e])?.nodeValue??"").trim();a.push(n);let l=new es(s,new(d(r))(n));o.addFirstOrderLoss(l)}0==t&&A(s,i),A(s,a)}t.appendChild(s),ni(()=>i8(s),w,t,"Bartis-Widom Phenomenological Rate Coefficients",sH)}}return i}(l),ea.tagName,sH,sF)}(new DOMParser().parseFromString(w,"text/xml"))}}};let b=l.slice(f,f+1048576);p.readAsText(b),f+=1048576}},c.click()}),l.appendChild(b);let S="Increase fontsize",z=L(S,g(S),sH);z.addEventListener("click",()=>{let e=parseInt(getComputedStyle(document.body).fontSize);document.body.style.fontSize=e+1+"px",null!=o&&(o.document.body.style.fontSize=e+1+"px"),ie(),it()}),l.appendChild(z);let q="Decrease fontsize",H=L(q,g(q),sH);H.addEventListener("click",()=>{let e=parseInt(getComputedStyle(document.body).fontSize);document.body.style.fontSize=e-1+"px",null!=o&&(o.document.body.style.fontSize=e-1+"px"),ie(),it()}),l.appendChild(H);let V="Light/Dark Mode",U=L(V,g(V),sH);U.addEventListener("click",()=>{(e=!e)?document.body.className="dark-mode":document.body.className="light-mode",ie()}),l.appendChild(U);let j="Save To MESMER File",Y=L(j,g(j),sH);Y.addEventListener("click",ne),l.appendChild(Y);let X=document.getElementById("welcome");document.body.appendChild(X);let W=document.createElement("p");X.appendChild(W),W.appendChild(document.createTextNode("Welcome to MXG - a free and open source program to assist in creating, editing and         visualising MESMER program data. The current MXG development repository is: ")),W.appendChild(sz),W.appendChild(document.createTextNode(". Details of MESMER - the Master Equation Solver for Multi Energy-well Reactions         can be found at: ")),W.appendChild(sP),W.appendChild(document.createTextNode("."));let ed=document.createElement("p");X.appendChild(ed),ed.appendChild(document.createTextNode("MXG was originally developed by a team based at ")),ed.appendChild(sB),ed.appendChild(document.createTextNode(" funded by ")),ed.appendChild(sI),ed.appendChild(document.createTextNode(" from January to April 2024."));let er=document.createElement("p");X.appendChild(er),er.textContent="The Menu contains 7 buttons. The Load MESMER File button is for loading an existing MESMER data file. If the loaded         file is a MESMER output file, output components will be presented as well as the input components. The Save To MESMER File button         is for saving a new MESMER data file. The saved file should have the same content as any loaded file except: it will contain no         comments or extra white space, values will be trimmed of white space, and some numbers may be output in a different style (albeit         with no loss of precision). The saved file should also reflect any changes made via the interface. There are two additional Load         buttons. The LoadMolecule Library button allows for loading an XML file containing molecules which can then be selected for         inclusion via the interface moleculeList Add from library button. The Load Defaults button is for loading a defaults file which is         for initialising variables with specific default values. Between the Load and Save buttons are buttons to increase or decrease the         font size and to change between a light and dark theme. In addition to increasing or decreasing the font size of text elements,         the fontsize buttons also redraws the reaction diagram and any species plots with a larger or smaller fontsize respectively.";let el=document.createElement("p");X.appendChild(el),el.appendChild(document.createTextNode("MXG can be used online and installed locally and used offline as a Progressive Web App (PWA).         PWA installation varies by Web browser/device. For guidance please see the MXG main development repository README: ")),el.appendChild(sz.cloneNode(!0)),el.appendChild(document.createTextNode("."));let eg=document.createElement("p");X.appendChild(eg),eg.appendChild(document.createTextNode('A MESMER data file is expected to contain the following child elements of the parent         "me:mesmer" element: "me:title", "moleculeList", "reactionList", "me:conditions", "me:modelParameters", and "me:control". If a         child element is missing or there are multiple "me:title", "moleculeList", "reactionList", or "me:modelParameters" elements, a         warning alert message should appear. If the file is a MESMER output data file, there should also be "me:metadataList"         and "me:analysis" child elements.'));let eh=document.createElement("p");X.appendChild(eh),eh.appendChild(document.createTextNode('The "me:title" value is presented in an input alongside an associated label. The input         can be used to change the value which is also used to compose filenames for files saved from MXG. Other elements are         presented via buttons which contain a triangular symbol. A triangle orientated with a point down: ▼ can be actioned to show more elements. A triangle orientated with a point up: ▲ can be actioned to         hide those elements.'));let em=document.createElement("p");X.appendChild(em),eh.textContent=' The Reaction Diagram button shows/hides a well diagram which is redrawn if any molecule "me:ZPE" property value         is changed. The diagram can be opened in a new Window and saved to a PNG format file.';let eu=document.createElement("p");X.appendChild(eu),eu.textContent="MXG uses 3DMol.js under a BSD-3-Clause licence to visualise molecules with coordinates. For details of         3DMol.js please see the GitHub repository: ",eu.appendChild(sA),eu.appendChild(document.createTextNode(". If you use the 3DMol.js visualisations, please cite: Nicholas Rego and David Koes         3Dmol.js: molecular visualization with WebGL Bioinformatics (2015) 31 (8): 1322-1324 ")),eu.appendChild(sk),eu.appendChild(document.createTextNode("."));let eN=document.createElement("p");X.appendChild(eN),eN.textContent="MXG uses Big.js under an MIT licence to handle numbers. For details of Big.js please see the GitHub repository: ",eN.appendChild(sG),eN.appendChild(document.createTextNode("."));let ep=document.createElement("p");X.appendChild(ep),ep.textContent="MXG is a work in progress and not currently recommended for general use, a community release is scheduled at the end of April.         The intention is to allow users to create MESMER files from scratch, but currently the only user pathway is to begin by loading an         existing MESMER file."});class i6{constructor(e,t,s){this.canvas=e,this.data=t,this.draw(s)}draw(e){this.canvas.width=800,this.canvas.height=400;let t=this.canvas.getContext("2d");t.font=e,t.clearRect(0,0,this.canvas.width,this.canvas.height);let s=this.canvas.width,i=this.canvas.height,n=Number.MAX_VALUE,a=Number.MIN_VALUE,o=0;this.data.forEach((e,s)=>{let i=Math.log10(s.toNumber());n=Math.min(n,i),a=Math.max(a,i),e.forEach((e,s)=>{o=Math.max(o,t.measureText(s).width)})});let d=0;for(let e=0;e<2;e++){let s=1-1*e;d=Math.max(d,t.measureText(s.toString()).width)}let r=t.measureText("0"),l=r.actualBoundingBoxAscent+r.actualBoundingBoxDescent,g=4*l,h=d+l+20,m=i-(h+3*l),c=s-(g+o+20),u=(c-h)/(a-n),N=(g-m)/1;t.beginPath(),t.moveTo(h,m),t.lineTo(c,m),t.stroke(),t.beginPath(),t.moveTo(h,m),t.lineTo(h,g),t.stroke();let p=["red","green","blue","orange","purple","grey","cyan","magenta","lightblue","lightgreen","pink","yellow","brown","black"],f=new Map;this.data.forEach((e,s)=>{let i=0;e.forEach((e,a)=>{let o=h+(Math.log10(s.toNumber())-n)*u,d=e.toNumber();if(d<1){let e=m+(d-0)*N;if(e>0){t.beginPath(),t.arc(o,e,2,0,2*Math.PI);let s=p[i%p.length];f.set(a,s),t.fillStyle=s,t.fill()}}i++})}),t.textAlign="center",t.textBaseline="top",t.fillStyle="black",t.fillText("log10(time/secs)",h+(c-h)/2,m+g/2),t.save(),t.rotate(-Math.PI/2),t.textAlign="center",t.textBaseline="top",t.fillText("fractional population",-m-(g-m)/2,h-h),t.restore();let x=a-n,v=Math.abs(Math.ceil(x/Math.pow(10,Math.floor(Math.log10(x))))),E=Math.ceil(n/v),w=E*v;for(;w<a;){let e=h+(w-n)*u;t.beginPath(),t.moveTo(e,m),t.lineTo(e,m+5),t.stroke(),t.fillText(w.toString(),e,m+5),w+=v}for(let e=0;e<2;e++){let s=m-1*e;t.beginPath(),t.moveTo(h,s),t.lineTo(h-5,s),t.stroke()}let y=0;f.forEach((e,s)=>{let i=t.measureText(s),n=i.actualBoundingBoxAscent+i.actualBoundingBoxDescent;y=Math.max(y,n)});let C=c+20,b=y;E=0,f.forEach((e,s)=>{let i=g+E*b;t.fillStyle=e,t.fillRect(C,i,y/2,y/2),t.fillStyle="black",t.fillText(s,C+l+t.measureText(s).width/2,i-y/2),E++})}}function i8(e){let t="",s=e.rows;for(let e=0;e<s.length;e++){let i=s[e].cells;for(let e=0;e<i.length;e++)t+=i[e].textContent,e<i.length-1&&(t+=",");t+="\n"}return t}function i7(e,t,s,a,o){if(console.log("drawReactionDiagram"),null!=e){var d,r;let g,h,m,c,u,N,x,v,E;t?(g="lightgrey",h="lightblue",m="orange"):(g="darkgrey",h="blue",m="darkorange");let w=e.getContext("2d");w.clearRect(0,0,e.width,e.height),w.font="bold "+s;let y=(d=w.font,w.font=d,(r=w.measureText("Aj")).actualBoundingBoxAscent+r.actualBoundingBoxDescent),C=[],b=new Set,S=new Set,T=new Set,M=new Map,z=new Map,_=0;n.forEach(function(e,t){let s=e.getTransitionStates(),n=e.getReactantsLabel();if(void 0!=n){C.push(n),b.has(n)&&S.add(n);let t=e.getReactantsEnergy(i);c=f(c,t),u=p(u,t),z.set(n,t),!M.has(n)&&(M.set(n,_),_++)}let a=e.getProductsLabel();if(void 0!=a){b.add(a);let t=e.getProductsEnergy(i);if(c=f(c,t),u=p(u,t),z.set(a,t),M.has(a)){_--;let e=l(M,a);M.forEach(function(t,s){t>e&&M.set(s,t-1)}),void 0!=s&&(s.forEach(function(e){let s=e.getMolecule().ref;T.add(s),M.set(s,_),t=i.get(s)?.getEnergy()??s2,c=f(c,t),u=p(u,t),z.set(s,t),_++}),M.set(a,_),_++)}else void 0!=s&&s.forEach(function(e){let s=e.getMolecule().ref;T.add(s),M.set(s,_),t=i.get(s)?.getEnergy()??s2,c=f(c,t),u=p(u,t),z.set(s,t),_++}),M.set(a,_),_++}});let R=u.minus(c).toNumber(),L=[];M.forEach(function(e,t){L[e]=t});let P=0,I=0,B=new Map,D=new Map,A=new Map,k=new Map,O=new Map,G=new Map;L.forEach(function(e){let t=l(z,e),i=(t-c.toNumber())*400/(R+0)+0;E=Math.max(sb(w,t.toString(),s),sb(w,e,s)),x=P+E+5,v=N=i+a,B.set(e,[P,N]),D.set(e,[x,v]),b.has(e)&&(A.set(e,[P,N]),k.set(e,[x,v])),T.has(e)&&(O.set(e,[P,N]),G.set(e,[x,v])),P=x+10,I=x}),e.width=I;let F=400+4*y+2*a;e.height=F,w.transform(1,0,0,-1,0,F),n.forEach(function(e,t){let s=e.getTransitionStates(),i=e.getReactantsLabel(),n=e.getProductsLabel(),a=l(D,i),d=l(A,n);s.length>0?s.forEach(function(e){let t=e.getMolecule().ref,s=l(O,t);sy(w,g,o,a[0],a[1],s[0],s[1]);let i=l(G,t);sy(w,g,o,i[0],i[1],d[0],d[1])}):sy(w,g,o,a[0],a[1],d[0],d[1])}),C.forEach(function(e){let t=l(z,e),i=(t-c.toNumber())*400/(R+0)+0,n=l(B,e)[0],o=i+a,d=l(D,e)[0],r=t.toString();sw(w,h,a,n,o,d,o,s,y,e,r)}),b.forEach(function(e){let t=l(z,e),i=(t-c.toNumber())*400/(R+0)+0,n=l(A,e)[0],o=i+a,d=l(k,e)[0],r=t.toString();S.has(e)?sw(w,m,a,n,o,d,o,s,y,e,r):sw(w,"green",a,n,o,d,o,s,y,e,r)}),T.forEach(function(e){let t=l(z,e),i=(t-c.toNumber())*400/(R+0)+0,n=l(O,e)[0],o=i+a;sw(w,"red",a,n,o,l(G,e)[0],o,s,y,e,t.toString())})}}function i9(e,t,s,i=!1){let n=document.createElement("a");n.href=i?e:`data:${t};charset=utf-8,`+encodeURIComponent(e),n.download=s,document.body.appendChild(n),n.click(),document.body.removeChild(n)}function ne(){if(null==t){alert("No Mesmer object to save.");return}{let e=new tT(t.attributes);e.setTitle(t.getTitle()),e.setMoleculeList(new ty(new Map,Array.from(i.values()))),e.setReactionList(new tC(new Map,Array.from(n.values()))),e.setConditionss(t.getConditionss()),e.setModelParameters(t.getModelParameters()),e.setControls(t.getControls());let s=t.getMetadataList();void 0!=s&&e.setMetadataList(s);let a=t.getAnalysis();void 0!=a&&e.setAnalysis(a),console.log("saveXML"),i9(tT.header+e.toXML("  ",""),"text/xml",nt(e.getTitle()?.value)+".xml")}}function nt(e){return e.replace(/[^a-z0-9]/gi,"_")}function ns(e,s,i,n){let a=L("Save as PNG",g("saveButton"),sH);null!=i?s.insertBefore(a,i):s.appendChild(a),a.addEventListener("click",()=>{i9(e.toDataURL(),"image/png",nt(t.getTitle()?.value+"_"+n)+".png",!0)})}function ni(e,s,i,n,a){let o=L("Save as CSV",g(s.id,x,sZ),a);s.insertBefore(o,i),o.addEventListener("click",()=>{let s=e(),i=nt(t.getTitle()?.value+"_"+n)+".csv";i9(s,"text/csv",i),console.log("Saved "+i)})}
//# sourceMappingURL=index.01310632.js.map
