let e,t,s,i,n,a;function o(e){return e&&e.__esModule?e.default:e}var d={};function r(e,t){if(!e.has(t))throw Error(`Key ${t} not found in map`);return e.get(t)}function l(...e){let t=e.map(e=>e.toString()).join("-").replace(/[^a-zA-Z-_0-9]/g,"_");return/^[0-9]|^--|-^[0-9]/.test(t)&&(t="_"+t),t}function g(e,t){return null==e?"":(void 0==t&&(t=", "),Array.from(e.entries()).map(([e,t])=>`${null==e?"null":e.toString()}(${null==t?"null":t.toString()})`).join(t))}function h(e,t){return void 0==t&&(t=", "),e.map(e=>null==e?"null":e.toString()).join(t)}function m(e){let t=[];for(let s=0;s<e.length;s++)t.push(new(o(d))(e[s]));return t}function c(e){try{return new(o(d))(e),!0}catch(e){return!1}}function u(e,t){return void 0==t&&(t=" "),e.map(e=>e.toString()).join(t)}function N(e,t){return null==e||e.lt(t)?t:e}function p(e,t){return null==e||e.gt(t)?t:e}!function(e){var t,s="[big.js] ",i=s+"Invalid ",n=i+"decimal places",a=i+"rounding mode",o=s+"Division by zero",r={},l=void 0,g=/^-?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i;function h(e,t,s,i){var n=e.c;if(s===l&&(s=e.constructor.RM),0!==s&&1!==s&&2!==s&&3!==s)throw Error(a);if(t<1)i=3===s&&(i||!!n[0])||0===t&&(1===s&&n[0]>=5||2===s&&(n[0]>5||5===n[0]&&(i||n[1]!==l))),n.length=1,i?(e.e=e.e-t+1,n[0]=1):n[0]=e.e=0;else if(t<n.length){if(i=1===s&&n[t]>=5||2===s&&(n[t]>5||5===n[t]&&(i||n[t+1]!==l||1&n[t-1]))||3===s&&(i||!!n[0]),n.length=t,i){for(;++n[--t]>9;)if(n[t]=0,0===t){++e.e,n.unshift(1);break}}for(t=n.length;!n[--t];)n.pop()}return e}function m(e,t,s){var i=e.e,n=e.c.join(""),a=n.length;if(t)n=n.charAt(0)+(a>1?"."+n.slice(1):"")+(i<0?"e":"e+")+i;else if(i<0){for(;++i;)n="0"+n;n="0."+n}else if(i>0){if(++i>a)for(i-=a;i--;)n+="0";else i<a&&(n=n.slice(0,i)+"."+n.slice(i))}else a>1&&(n=n.charAt(0)+"."+n.slice(1));return e.s<0&&s?"-"+n:n}r.abs=function(){var e=new this.constructor(this);return e.s=1,e},r.cmp=function(e){var t,s=this.c,i=(e=new this.constructor(e)).c,n=this.s,a=e.s,o=this.e,d=e.e;if(!s[0]||!i[0])return s[0]?n:i[0]?-a:0;if(n!=a)return n;if(t=n<0,o!=d)return o>d^t?1:-1;for(n=-1,a=(o=s.length)<(d=i.length)?o:d;++n<a;)if(s[n]!=i[n])return s[n]>i[n]^t?1:-1;return o==d?0:o>d^t?1:-1},r.div=function(e){var t=this.constructor,s=this.c,i=(e=new t(e)).c,a=this.s==e.s?1:-1,d=t.DP;if(d!==~~d||d<0||d>1e6)throw Error(n);if(!i[0])throw Error(o);if(!s[0])return e.s=a,e.c=[e.e=0],e;var r,g,m,c,u,N=i.slice(),p=r=i.length,x=s.length,f=s.slice(0,r),v=f.length,E=e,w=E.c=[],y=0,C=d+(E.e=this.e-e.e)+1;for(E.s=a,a=C<0?0:C,N.unshift(0);v++<r;)f.push(0);do{for(m=0;m<10;m++){if(r!=(v=f.length))c=r>v?1:-1;else for(u=-1,c=0;++u<r;)if(i[u]!=f[u]){c=i[u]>f[u]?1:-1;break}if(c<0){for(g=v==r?i:N;v;){if(f[--v]<g[v]){for(u=v;u&&!f[--u];)f[u]=9;--f[u],f[v]+=10}f[v]-=g[v]}for(;!f[0];)f.shift()}else break}w[y++]=c?m:++m,f[0]&&c?f[v]=s[p]||0:f=[s[p]]}while((p++<x||f[0]!==l)&&a--)return!w[0]&&1!=y&&(w.shift(),E.e--,C--),y>C&&h(E,C,t.RM,f[0]!==l),E},r.eq=function(e){return 0===this.cmp(e)},r.gt=function(e){return this.cmp(e)>0},r.gte=function(e){return this.cmp(e)>-1},r.lt=function(e){return 0>this.cmp(e)},r.lte=function(e){return 1>this.cmp(e)},r.minus=r.sub=function(e){var t,s,i,n,a=this.constructor,o=this.s,d=(e=new a(e)).s;if(o!=d)return e.s=-d,this.plus(e);var r=this.c.slice(),l=this.e,g=e.c,h=e.e;if(!r[0]||!g[0])return g[0]?e.s=-d:r[0]?e=new a(this):e.s=1,e;if(o=l-h){for((n=o<0)?(o=-o,i=r):(h=l,i=g),i.reverse(),d=o;d--;)i.push(0);i.reverse()}else for(s=((n=r.length<g.length)?r:g).length,o=d=0;d<s;d++)if(r[d]!=g[d]){n=r[d]<g[d];break}if(n&&(i=r,r=g,g=i,e.s=-e.s),(d=(s=g.length)-(t=r.length))>0)for(;d--;)r[t++]=0;for(d=t;s>o;){if(r[--s]<g[s]){for(t=s;t&&!r[--t];)r[t]=9;--r[t],r[s]+=10}r[s]-=g[s]}for(;0===r[--d];)r.pop();for(;0===r[0];)r.shift(),--h;return r[0]||(e.s=1,r=[h=0]),e.c=r,e.e=h,e},r.mod=function(e){var t,s=this,i=s.constructor,n=s.s,a=(e=new i(e)).s;if(!e.c[0])throw Error(o);return(s.s=e.s=1,t=1==e.cmp(s),s.s=n,e.s=a,t)?new i(s):(n=i.DP,a=i.RM,i.DP=i.RM=0,s=s.div(e),i.DP=n,i.RM=a,this.minus(s.times(e)))},r.neg=function(){var e=new this.constructor(this);return e.s=-e.s,e},r.plus=r.add=function(e){var t,s,i,n=this.constructor;if(e=new n(e),this.s!=e.s)return e.s=-e.s,this.minus(e);var a=this.e,o=this.c,d=e.e,r=e.c;if(!o[0]||!r[0])return r[0]||(o[0]?e=new n(this):e.s=this.s),e;if(o=o.slice(),t=a-d){for(t>0?(d=a,i=r):(t=-t,i=o),i.reverse();t--;)i.push(0);i.reverse()}for(o.length-r.length<0&&(i=r,r=o,o=i),t=r.length,s=0;t;o[t]%=10)s=(o[--t]=o[t]+r[t]+s)/10|0;for(s&&(o.unshift(s),++d),t=o.length;0===o[--t];)o.pop();return e.c=o,e.e=d,e},r.pow=function(e){var t=this,s=new t.constructor("1"),n=s,a=e<0;if(e!==~~e||e<-1e6||e>1e6)throw Error(i+"exponent");for(a&&(e=-e);1&e&&(n=n.times(t)),e>>=1;)t=t.times(t);return a?s.div(n):n},r.prec=function(e,t){if(e!==~~e||e<1||e>1e6)throw Error(i+"precision");return h(new this.constructor(this),e,t)},r.round=function(e,t){if(e===l)e=0;else if(e!==~~e||e<-1e6||e>1e6)throw Error(n);return h(new this.constructor(this),e+this.e+1,t)},r.sqrt=function(){var e,t,i,n=this.constructor,a=this.s,o=this.e,d=new n("0.5");if(!this.c[0])return new n(this);if(a<0)throw Error(s+"No square root");0===(a=Math.sqrt(this+""))||a===1/0?((t=this.c.join("")).length+o&1||(t+="0"),o=((o+1)/2|0)-(o<0||1&o),e=new n(((a=Math.sqrt(t))==1/0?"5e":(a=a.toExponential()).slice(0,a.indexOf("e")+1))+o)):e=new n(a+""),o=e.e+(n.DP+=4);do i=e,e=d.times(i.plus(this.div(i)));while(i.c.slice(0,o).join("")!==e.c.slice(0,o).join(""))return h(e,(n.DP-=4)+e.e+1,n.RM)},r.times=r.mul=function(e){var t,s=this.constructor,i=this.c,n=(e=new s(e)).c,a=i.length,o=n.length,d=this.e,r=e.e;if(e.s=this.s==e.s?1:-1,!i[0]||!n[0])return e.c=[e.e=0],e;for(e.e=d+r,a<o&&(t=i,i=n,n=t,r=a,a=o,o=r),t=Array(r=a+o);r--;)t[r]=0;for(d=o;d--;){for(o=0,r=a+d;r>d;)o=t[r]+n[d]*i[r-d-1]+o,t[r--]=o%10,o=o/10|0;t[r]=o}for(o?++e.e:t.shift(),d=t.length;!t[--d];)t.pop();return e.c=t,e},r.toExponential=function(e,t){var s=this,i=s.c[0];if(e!==l){if(e!==~~e||e<0||e>1e6)throw Error(n);for(s=h(new s.constructor(s),++e,t);s.c.length<e;)s.c.push(0)}return m(s,!0,!!i)},r.toFixed=function(e,t){var s=this,i=s.c[0];if(e!==l){if(e!==~~e||e<0||e>1e6)throw Error(n);for(s=h(new s.constructor(s),e+s.e+1,t),e=e+s.e+1;s.c.length<e;)s.c.push(0)}return m(s,!1,!!i)},r.toJSON=r.toString=function(){var e=this.constructor;return m(this,this.e<=e.NE||this.e>=e.PE,!!this.c[0])},r.toNumber=function(){var e=Number(m(this,!0,!0));if(!0===this.constructor.strict&&!this.eq(e.toString()))throw Error(s+"Imprecise conversion");return e},r.toPrecision=function(e,t){var s=this,n=s.constructor,a=s.c[0];if(e!==l){if(e!==~~e||e<1||e>1e6)throw Error(i+"precision");for(s=h(new n(s),e,t);s.c.length<e;)s.c.push(0)}return m(s,e<=s.e||s.e<=n.NE||s.e>=n.PE,!!a)},r.valueOf=function(){var e=this.constructor;if(!0===e.strict)throw Error(s+"valueOf disallowed");return m(this,this.e<=e.NE||this.e>=e.PE,!0)},(t=function e(){function t(s){if(!(this instanceof t))return s===l?e():new t(s);if(s instanceof t)this.s=s.s,this.e=s.e,this.c=s.c.slice();else{if("string"!=typeof s){if(!0===t.strict&&"bigint"!=typeof s)throw TypeError(i+"value");s=0===s&&1/s<0?"-0":String(s)}(function(e,t){var s,n,a;if(!g.test(t))throw Error(i+"number");for(e.s="-"==t.charAt(0)?(t=t.slice(1),-1):1,(s=t.indexOf("."))>-1&&(t=t.replace(".","")),(n=t.search(/e/i))>0?(s<0&&(s=n),s+=+t.slice(n+1),t=t.substring(0,n)):s<0&&(s=t.length),a=t.length,n=0;n<a&&"0"==t.charAt(n);)++n;if(n==a)e.c=[e.e=0];else{for(;a>0&&"0"==t.charAt(--a););for(e.e=s-n-1,e.c=[],s=0;n<=a;)e.c[s++]=+t.charAt(n++)}})(this,s)}this.constructor=t}return t.prototype=r,t.DP=20,t.RM=1,t.NE=-7,t.PE=21,t.strict=!1,t.roundDown=0,t.roundHalfUp=1,t.roundHalfEven=2,t.roundUp=3,t}()).default=t.Big=t,"function"==typeof define&&define.amd?define(function(){return t}):d?d=t:e.Big=t}(d);const x="button";function f(e,t){let s=document.getElementById(e);null!=s&&s.remove(),void 0!=t&&t.delete(e)}function v(e,t,s,i,n,a,o){let d=P(e,o),r=R(n+" ▼",l(e,x),a);return r.className="collapsible",r.addEventListener("click",function(){let e=r.textContent.split(" ");e[e.length-1]="▼"===e[e.length-1]?"▲":"▼",r.textContent=e.join(" ")}),d.appendChild(r),d.appendChild(i),null!=s?t.insertBefore(d,s):t.appendChild(d),r.removeEventListener("click",E),r.addEventListener("click",E),d}function E(){this.classList.toggle("active");let e=this.nextElementSibling;null!=e?e instanceof HTMLDivElement?"block"===e.style.display?e.style.display="none":e.style.display="block":console.log("toggleCollapsible: nextElementSibling is not an HTMLDivElement"):console.log("toggleCollapsible: nextElementSibling is null")}function w(e,t,s,i,n,a,o){let d;let r=L(void 0,i),l=((d=y(e,t,s)).onchange=n,d.value=a,S(d),d),g=I(o,s);return g.htmlFor=t,r.appendChild(g),r.appendChild(l),r}function y(e,t,s){let i=document.createElement("input");return i.type=e,i.id=t,Object.assign(i.style,s),i.style.fontSize="1em",i.classList.add("auto-width"),i}function C(e,t){let s=document.createElement("textarea");return s.id=e,Object.assign(s.style,t),s.style.fontSize="1em",s.classList.add("auto-width"),s}function b(e,t){let s="<"+t;if(e)for(let[t,i]of e)s+=" "+t+'="'+i+'"';return s+" />"}function S(e,t){void 0==t&&(t=4),e.style.width=e.value.length+t+"ch"}function T(e,t){void 0==t&&(t=6),e.style.width=e.value.length+t+"ch"}function M(e,t){void 0==t&&(t=6),e.style.width=e.value.length+t+"ch"}function _(e,t,s,i,n){let a=document.createElement("select");return e.forEach(e=>{a.name=t,a.id=i;let s=document.createElement("option");s.value=e,s.text=e,a.appendChild(s)}),a.value=s,a.style.fontSize="1em",a.classList.add("auto-width"),T(a),Object.assign(a.style,n),a}function z(e,t,s,i,n,a,o){let d=L(void 0,o),r=I(e,a);return r.htmlFor=n,d.appendChild(r),d.appendChild(_(t,s,i,n,a)),d}function R(e,t,s){let i=document.createElement("button");return i.textContent=e,void 0!=t&&(i.id=t),void 0!=s&&Object.assign(i.style,s),i.style.fontSize="1em",i}function P(e,t){let s=document.createElement("div");return void 0!=e&&(s.id=e),void 0!=t&&Object.assign(s.style,t),s}function L(e,t){let s=P(e,t);return s.style.display="flex",s.style.flexWrap="wrap",s}function I(e,t){let s=document.createElement("label");return Object.assign(s.style,t),s.textContent=e,s.style.fontSize="1em",s}function B(e,t){let s=document.createElement("table");return s.id=e,Object.assign(s.style,t),s}function D(e,t){let s=e.insertRow();return t.forEach(e=>{s.insertCell().textContent=e}),s}function A(e,t){let s=e.getElementsByTagName(t)[0];if(null==s)throw Error(t+" element not found");return s}function k(e){let t=e.childNodes;if(null==t)throw Error("Element has no childNodes");return t[0]}function G(e){let t=e.nodeValue;if(null==t)throw Error("nodeValue is null");return t}function O(e){let t=k(e);return t?G(t).trim():""}class F{constructor(e){this.tagName=e}toXML(e){let t=b(void 0,this.tagName);return e?"\n"+e+t:t}}class U extends F{constructor(e,t){super(t),this.attributes=e}toString(){let e=this.tagName+"(";return this.attributes&&this.attributes.forEach((t,s)=>{e+=`${s}(${t}), `}),e}toXML(e){let t="";for(let[s,i]of(void 0!=e&&(t+="\n"+e),t+="<"+this.tagName,this.attributes))t+=" "+s+'="'+i.toString()+'"';return t+" />"}}class V extends U{constructor(e,t,s){super(e,t),this.value=s}toString(){return super.toString()+`, ${this.value.toString()})`}toXML(e){return Y(this.value.trim(),this.tagName,this.attributes,e,!1)}}class q extends U{constructor(e,t,s){super(e,t),this.value=s}toString(){return super.toString()+`, ${this.value.toString()})`}getValue(){return this.value}setValue(e){this.value=e}toXML(e){return Y(this.value.toString(),this.tagName,this.attributes,e,!1)}}class H extends U{constructor(e,t,s,i){super(e,t),this.delimiter=" ",this.values=s,void 0!=i&&(this.delimiter=i)}getValues(){return this.values}setValues(e){this.values=e}toString(){return super.toString()+`, ${this.values.toString()})`}setDelimiter(e){this.delimiter=e}toXML(e){return Y(u(this.values,this.delimiter),this.tagName,this.attributes,e,!1)}}class j extends U{constructor(e,t){super(e,t),this.nodes=new Map}addNode(e){this.nodes.set(this.nodes.size,e)}toString(){let e=super.toString();return this.nodes.forEach((t,s)=>{e+=`, ${t.toString()}`}),e+")"}toXML(e,t){let s;void 0!=e&&void 0!=t&&(s=t+e);let i="";if(this.nodes.size>0)return this.nodes.forEach(t=>{void 0==t?console.warn("Node 0 is undefined this.nodes.size = "+this.nodes.size):t instanceof j?i+=t.toXML(e,s):i+=t.toXML(s)}),Y(i,this.tagName,this.attributes,t,!0);{let e=b(this.attributes,this.tagName);return void 0!=t?"\n"+t+e:e}}}function Y(e,t,s,i,n){let a;return function(e,t,s){let i="";if(void 0!=s&&(i+="\n"+s),i+="<"+e,t)for(let[e,s]of t)i+=" "+e+'="'+s.toString()+'"';return i+">"}(t,s,i)+e+(a="",n&&void 0!=i&&(a+="\n"+i),a+"</"+t+">")}function $(e){let t=e.getAttributeNames(),s=new Map;return t.forEach(function(t){let i=e.getAttribute(t);null!=i&&s.set(t,i)}),s}function X(e,t){let s=e.getElementsByTagName(t);if(1!=s.length)throw Error("Expecting 1 "+t+" but finding "+s.length);return s[0]}class K extends q{static{this.s_units="units"}static{this.s_lower="lower"}static{this.s_upper="upper"}static{this.s_stepsize="stepsize"}constructor(e,t,s){super(e,t,s)}setValue(e){this.value=e}getUnits(){return this.attributes.get(K.s_units)}setUnits(e){this.attributes.set(K.s_units,e)}removeUnits(){this.attributes.delete(K.s_units)}getLower(){let e=this.attributes.get(K.s_lower);if(void 0!=e)return new(o(d))(e)}setLower(e){this.attributes.set(K.s_lower,e.toString())}removeLower(){this.attributes.delete(K.s_lower)}getUpper(){let e=this.attributes.get(K.s_upper);if(void 0!=e)return new(o(d))(e)}setUpper(e){this.attributes.set(K.s_upper,e.toString())}removeUpper(){this.attributes.delete(K.s_upper)}getStepsize(){let e=this.attributes.get(K.s_stepsize);if(void 0!=e)return new(o(d))(e)}setStepsize(e){this.attributes.set(K.s_stepsize,e.toString())}removeStepsize(){this.attributes.delete(K.s_stepsize)}}class W extends q{static{this.tagName="me:eigenvalue"}constructor(e,t){super(e,W.tagName,t)}}class Z extends j{static{this.tagName="me:eigenvalueList"}constructor(e,t){super(e,Z.tagName),t&&t.forEach(e=>{this.addNode(e)})}addEigenvalue(e){this.addNode(e)}}class Q extends q{static{this.tagName="me:pop"}constructor(e,t){super(e,Q.tagName,t)}}class J extends j{static{this.tagName="me:population"}constructor(e,t){super(e,J.tagName)}addPop(e){this.addNode(e)}}class ee extends j{static{this.tagName="me:populationList"}constructor(e,t){super(e,ee.tagName),t&&t.forEach(e=>{this.addNode(e)})}addPopulation(e){this.addNode(e)}}class et extends q{static{this.tagName="me:firstOrderLoss"}constructor(e,t){super(e,et.tagName,t)}}class es extends q{static{this.tagName="me:firstOrderRate"}constructor(e,t){super(e,et.tagName,t)}}class ei extends j{static{this.tagName="me:rateList"}constructor(e,t,s){super(e,en.tagName)}}class en extends j{static{this.tagName="me:analysis"}constructor(e,t,s,i,n){super(e,en.tagName),this.index=new Map,t&&(this.index.set(tS.tagName,this.nodes.size),this.addNode(t)),this.elIndex=new Map,s?(s.forEach(e=>{this.index.set(Z.tagName,this.nodes.size),this.elIndex.set(this.elIndex.size,this.nodes.size),this.addNode(e)}),this.els=s):this.els=[],this.plIndex=new Map,i?(i.forEach(e=>{this.index.set(ee.tagName,this.nodes.size),this.plIndex.set(this.plIndex.size,this.nodes.size),this.addNode(e)}),this.pls=i):this.pls=[],this.rlIndex=new Map,n?(n.forEach(e=>{this.index.set(ei.tagName,this.nodes.size),this.rlIndex.set(this.rlIndex.size,this.nodes.size),this.addNode(e)}),this.rls=n):this.rls=[]}getDescription(){if(this.index.has(tS.tagName)){let e=this.index.get(tS.tagName);return this.nodes.get(e)}}setDescription(e){if(this.index.has(tS.tagName)){let t=this.index.get(tS.tagName);this.nodes.set(t,e)}else this.index.set(tS.tagName,this.nodes.size),this.addNode(e)}addEigenvalueList(e){this.elIndex.set(this.elIndex.size,this.nodes.size),this.addNode(e),this.els.push(e)}addPopulationList(e){this.plIndex.set(this.plIndex.size,this.nodes.size),this.addNode(e),this.pls.push(e)}addRateList(e){this.rlIndex.set(this.rlIndex.size,this.nodes.size),this.addNode(e),this.rls.push(e)}}class ea extends V{static{this.tagName="me:bathGas"}constructor(e,t){super(e,ea.tagName,t)}}class eo extends q{static{this.tagName="me:experimentalRate"}static{this.s_ref1="ref1"}static{this.s_ref2="ref2"}static{this.s_refReaction="refReaction"}static{this.s_error="error"}constructor(e,t){super(e,eo.tagName,t)}getRef1(){return this.attributes.get(eo.s_ref1)}setRef1(e){this.attributes.set(eo.s_ref1,e)}getRef2(){return this.attributes.get(eo.s_ref2)}setRef2(e){this.attributes.set(eo.s_ref2,e)}getRefReaction(){return this.attributes.get(eo.s_refReaction)}setRefReaction(e){this.attributes.set(eo.s_refReaction,e)}getError(){return new(o(d))(this.attributes.get(eo.s_error))}setError(e){this.attributes.set(eo.s_error,e.toString())}}class ed extends q{static{this.tagName="me:experimentalYield"}static{this.s_ref="ref"}static{this.s_error="error"}static{this.s_yieldTime="yieldTime"}constructor(e,t){super(e,ed.tagName,t)}getRef(){return this.attributes.get(ed.s_ref)}setRef(e){this.attributes.set(ed.s_ref,e)}getError(){return new(o(d))(this.attributes.get(ed.s_error))}setError(e){this.attributes.set(ed.s_error,e.toString())}getYieldTime(){return new(o(d))(this.attributes.get(ed.s_yieldTime))}setYieldTime(e){this.attributes.set(ed.s_yieldTime,e.toString())}}class er extends q{static{this.tagName="me:experimentalEigenvalue"}static{this.s_EigenvalueID="EigenvalueID"}static{this.s_error="error"}constructor(e,t){super(e,er.tagName,t)}getEigenvalueID(){return this.attributes.get(er.s_EigenvalueID)}setEigenvalueID(e){this.attributes.set(er.s_EigenvalueID,e)}getError(){return new(o(d))(this.attributes.get(er.s_error))}setError(e){this.attributes.set(er.s_error,e.toString())}}class el extends q{static{this.tagName="me:excessReactantConc"}static{this.s_percent="percent"}constructor(e,t){super(e,el.tagName,t)}getPercent(){return this.attributes.get(el.s_percent)}setPercent(e){this.attributes.set(el.s_percent,e)}}class eg extends j{static{this.tagName="me:PTpair"}static{this.s_P="P"}static{this.s_T="T"}static{this.s_precision="precision"}static{this.s_excessReactantConc="excessReactantConc"}static{this.s_percentExcessReactantConc="percentExcessReactantConc"}constructor(e,t,s,i,n){super(e,eg.tagName),this.index=new Map,void 0!=t&&(this.index.set(ea.tagName,this.nodes.size),this.addNode(t)),void 0!=s&&(this.index.set(eo.tagName,this.nodes.size),this.addNode(s)),void 0!=i&&(this.index.set(ed.tagName,this.nodes.size),this.addNode(i)),void 0!=n&&(this.index.set(er.tagName,this.nodes.size),this.addNode(n))}getP(){let e=this.attributes.get(eg.s_P);if(void 0!==e)return new(o(d))(e)}setP(e){this.attributes.set(eg.s_P,e.toString())}getT(){let e=this.attributes.get(eg.s_T);if(void 0!==e)return new(o(d))(e)}setT(e){this.attributes.set(eg.s_T,e.toString())}getPrecision(){return this.attributes.get(eg.s_precision)}setPrecision(e){this.attributes.set(eg.s_precision,e)}getBathGas(){let e=this.index.get(ea.tagName);return void 0!=e?this.nodes.get(e):void 0}setBathGas(e){let t=this.index.get(ea.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(ea.tagName,this.nodes.size),this.addNode(e))}removeBathGas(){let e=this.index.get(ea.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(ea.tagName))}getExperimentalRate(){let e=this.index.get(eo.tagName);return void 0!=e?this.nodes.get(e):void 0}setExperimentalRate(e){let t=this.index.get(eo.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eo.tagName,this.nodes.size),this.addNode(e))}removeExperimentalRate(){let e=this.index.get(eo.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(eo.tagName))}getExperimentalYield(){let e=this.index.get(ed.tagName);return void 0!=e?this.nodes.get(e):void 0}setExperimentalYield(e){let t=this.index.get(ed.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(ed.tagName,this.nodes.size),this.addNode(e))}removeExperimentalYield(){let e=this.index.get(ed.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(ed.tagName))}getExperimentalEigenvalue(){let e=this.index.get(er.tagName);return void 0!=e?this.nodes.get(e):void 0}setExperimentalEigenvalue(e){let t=this.index.get(er.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(er.tagName,this.nodes.size),this.addNode(e))}removeExperimentalEigenvalue(){let e=this.index.get(er.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(er.tagName))}getExcessReactantConc(){return this.attributes.get(eg.s_excessReactantConc)}setExcessReactantConc(e){this.attributes.set(eg.s_excessReactantConc,e)}getPercentExcessReactantConc(){return this.attributes.get(eg.s_percentExcessReactantConc)}setPercentExcessReactantConc(e){this.attributes.set(eg.s_percentExcessReactantConc,e)}}class eh extends j{static{this.tagName="me:PTs"}constructor(e,t){super(e,eh.tagName),void 0!=t?(t.forEach(e=>{this.addNode(e)}),this.ptps=t):this.ptps=[]}get(e){return this.ptps[e]}set(e,t){this.nodes.set(e,t),this.ptps[e]=t}add(e){return this.addNode(e),this.ptps.push(e),this.nodes.size-1}remove(e){this.nodes.delete(e),this.ptps.splice(e,1)}init(e){this.clear(),e.forEach(e=>{this.addNode(e),this.ptps.push(e)})}clear(){this.nodes.clear(),this.ptps=[]}}class em extends j{static{this.tagName="me:conditions"}constructor(e,t,s,i){super(e,em.tagName),this.id=t,this.index=new Map,this.bathGasesIndex=new Map,this.bathGases=new Map,void 0!=s&&(this.index.set(ea.tagName,this.nodes.size),s.forEach(e=>{this.bathGasesIndex.set(e.value,this.nodes.size),this.addNode(e),this.bathGases.set(e,s.size)})),void 0!=i&&(this.index.set(eh.tagName,this.nodes.size),this.addNode(i))}getBathGases(){return this.bathGases}addBathGas(e){if(this.bathGases.has(e))return this.bathGases.get(e);{let t=this.bathGases.size;return this.bathGases.set(e,t),this.bathGasesIndex.set(e.value,this.nodes.size),this.addNode(e),t}}removeBathGas(e){this.bathGases.has(e)?(this.bathGases.delete(e),this.nodes.delete(this.bathGasesIndex.get(e.value))):console.warn("Conditions.removeBathGas: bathGas not found to remove.")}getPTs(){let e=this.index.get(eh.tagName);if(void 0!=e)return this.nodes.get(e)}setPTs(e){let t=this.index.get(eh.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eh.tagName,this.nodes.size),this.addNode(e))}}class ec extends F{static{this.tagName="me:calculateRateCoefficientsOnly"}constructor(){super(ec.tagName)}}class eu extends F{static{this.tagName="me:printCellDOS"}constructor(){super(eu.tagName)}}class eN extends F{static{this.tagName="me:printCellTransitionStateFlux"}constructor(){super(eN.tagName)}}class ep extends F{static{this.tagName="me:printReactionOperatorColumnSums"}constructor(){super(ep.tagName)}}class ex extends F{static{this.tagName="me:printGrainBoltzmann"}constructor(){super(ex.tagName)}}class ef extends F{static{this.tagName="me:printGrainDOS"}constructor(){super(ef.tagName)}}class ev extends F{static{this.tagName="me:printGrainkbE"}constructor(){super(ev.tagName)}}class eE extends F{static{this.tagName="me:printGrainkfE"}constructor(){super(eE.tagName)}}class ew extends F{static{this.tagName="me:printTSsos"}constructor(){super(ew.tagName)}}class ey extends F{static{this.tagName="me:printGrainedSpeciesProfile"}constructor(){super(ey.tagName)}}class eC extends F{static{this.tagName="me:printGrainTransitionStateFlux"}constructor(){super(eC.tagName)}}class eb extends F{static{this.tagName="me:printReactionOperatorSize"}constructor(){super(eb.tagName)}}class eS extends F{static{this.tagName="me:printSpeciesProfile"}constructor(){super(eS.tagName)}}class eT extends F{static{this.tagName="me:printPhenomenologicalEvolution"}constructor(){super(eT.tagName)}}class eM extends F{static{this.tagName="me:printTunnelingCoefficients"}constructor(){super(eM.tagName)}}class e_ extends F{static{this.tagName="me:printCrossingCoefficients"}constructor(){super(e_.tagName)}}class ez extends F{static{this.tagName="me:testDOS"}constructor(){super(ez.tagName)}}class eR extends F{static{this.tagName="me:testRateConstant"}constructor(){super(eR.tagName)}}class eP extends F{static{this.tagName="me:useTheSameCellNumberForAllConditions"}constructor(){super(eP.tagName)}}class eL extends V{static{this.tagName="me:ForceMacroDetailedBalance"}constructor(e,t){super(e,eL.tagName,t)}}class eI extends F{static{this.tagName="me:hideInactive"}constructor(){super(eI.tagName)}}class eB extends j{static{this.tagName="me:calcMethod"}static{this.options=["simpleCalc","gridSearch","fitting","marquardt","analyticalRepresentation","ThermodynamicTable","sensitivityAnalysis","me:simpleCalc","me:gridSearch","me:fitting","me:marquardt","me:analyticalRepresentation","me:ThermodynamicTable","me:sensitivityAnalysis"]}constructor(e){super(e,eB.tagName)}}class eD extends eB{static{this.xsi_type="me:simpleCalc"}static{this.xsi_type2="simpleCalc"}constructor(e){super(e)}}class eA extends eB{static{this.xsi_type="me:gridSearch"}static{this.xsi_type2="gridSearch"}constructor(e){super(e)}}class ek extends q{static{this.tagName="me:fittingIterations"}constructor(e,t){super(e,ek.tagName,t)}}class eG extends eB{static{this.xsi_type="me:fitting"}static{this.xsi_type2="fitting"}constructor(e,t){super(e),void 0!=t&&this.addNode(t)}getFittingIterations(){return this.nodes.get(0)}setFittingIterations(e){this.nodes.set(0,e)}removeFittingIterations(){this.nodes.delete(0)}}class eO extends q{static{this.tagName="me:MarquardtIterations"}constructor(e,t){super(e,eO.tagName,t)}}class eF extends q{static{this.tagName="me:MarquardtTolerance"}constructor(e,t){super(e,eF.tagName,t)}}class eU extends q{static{this.tagName="me:MarquardtDerivDelta"}constructor(e,t){super(e,eU.tagName,t)}}class eV extends eB{static{this.xsi_type="me:marquardt"}static{this.xsi_type2="marquardt"}constructor(e,t,s,i){super(e),this.index=new Map,void 0!=t&&(this.index.set(eO.tagName,this.nodes.size),this.addNode(t)),void 0!=s&&(this.index.set(eF.tagName,this.nodes.size),this.addNode(s)),void 0!=i&&(this.index.set(eU.tagName,this.nodes.size),this.addNode(i))}getMarquardtIterations(){let e=this.index.get(eO.tagName);if(void 0!=e)return this.nodes.get(e)}setMarquardtIterations(e){let t=this.index.get(eO.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eO.tagName,this.nodes.size),this.addNode(e))}removeMarquardtIterations(){let e=this.index.get(eO.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(eO.tagName))}getMarquardtTolerance(){let e=this.index.get(eF.tagName);if(void 0!=e)return this.nodes.get(e)}setMarquardtTolerance(e){let t=this.index.get(eF.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eF.tagName,this.nodes.size),this.addNode(e))}removeMarquardtTolerance(){let e=this.index.get(eF.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(eF.tagName))}getMarquardtDerivDelta(){let e=this.index.get(eU.tagName);if(void 0!=e)return this.nodes.get(e)}setMarquardtDerivDelta(e){let t=this.index.get(eU.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eU.tagName,this.nodes.size),this.addNode(e))}removeMarquardtDerivDelta(){let e=this.index.get(eU.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(eU.tagName))}}class eq extends F{static{this.tagName="me:useTraceWeighting"}constructor(){super(eq.tagName)}}class eH extends V{static{this.tagName="me:format"}static{this.options=["cantera","chemkin"]}static{this.rateUnits="rateUnits"}static{this.rateUnitsOptions=["cm3mole-1s-1","cm3molecule-1s-1"]}constructor(e,t){super(e,eH.tagName,t)}getRateUnits(){return this.attributes.get(eH.rateUnits)}setRateUnits(e){this.attributes.set(eH.rateUnits,e)}removeRateUnits(){this.attributes.delete(eH.rateUnits)}}class ej extends V{static{this.tagName="me:precision"}constructor(e,t){super(e,ej.tagName,t)}}class eY extends q{static{this.tagName="me:chebNumTemp"}constructor(e,t){super(e,eY.tagName,t)}}class e$ extends q{static{this.tagName="me:chebNumConc"}constructor(e,t){super(e,e$.tagName,t)}}class eX extends q{static{this.tagName="me:chebMaxTemp"}constructor(e,t){super(e,eX.tagName,t)}}class eK extends q{static{this.tagName="me:chebMinTemp"}constructor(e,t){super(e,eK.tagName,t)}}class eW extends q{static{this.tagName="me:chebMaxConc"}constructor(e,t){super(e,eW.tagName,t)}getUnits(){return this.attributes.get("units")}setUnits(e){this.attributes.set("units",e)}}class eZ extends q{static{this.tagName="me:chebMinConc"}constructor(e,t){super(e,eZ.tagName,t)}}class eQ extends q{static{this.tagName="me:chebTExSize"}constructor(e,t){super(e,eQ.tagName,t)}}class eJ extends q{static{this.tagName="me:chebPExSize"}constructor(e,t){super(e,eJ.tagName,t)}}class e0 extends eB{static{this.xsi_type="me:analyticalRepresentation"}static{this.xsi_type2="analyticalRepresentation"}constructor(e,t,s,i,n,a,o,d,r,l,g){super(e),this.index=new Map,void 0!=t&&(this.index.set(eH.tagName,this.nodes.size),this.addNode(t)),void 0!=s&&(this.index.set(ej.tagName,this.nodes.size),this.addNode(s)),void 0!=i&&(this.index.set(eY.tagName,this.nodes.size),this.addNode(i)),void 0!=n&&(this.index.set(e$.tagName,this.nodes.size),this.addNode(n)),void 0!=a&&(this.index.set(eX.tagName,this.nodes.size),this.addNode(a)),void 0!=o&&(this.index.set(eK.tagName,this.nodes.size),this.addNode(o)),void 0!=d&&(this.index.set(eW.tagName,this.nodes.size),this.addNode(d)),void 0!=r&&(this.index.set(eZ.tagName,this.nodes.size),this.addNode(r)),void 0!=l&&(this.index.set(eQ.tagName,this.nodes.size),this.addNode(l)),void 0!=g&&(this.index.set(eJ.tagName,this.nodes.size),this.addNode(g))}getFormat(){let e=this.index.get(eH.tagName);if(void 0!=e)return this.nodes.get(e)}setFormat(e){let t=this.index.get(eH.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eH.tagName,this.nodes.size),this.addNode(e))}removeFormat(){let e=this.index.get(eH.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(eH.tagName))}getPrecision(){let e=this.index.get(ej.tagName);if(void 0!=e)return this.nodes.get(e)}setPrecision(e){let t=this.index.get(ej.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(ej.tagName,this.nodes.size),this.addNode(e))}removePrecision(){let e=this.index.get(ej.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(ej.tagName))}getChebNumTemp(){let e=this.index.get(eY.tagName);if(void 0!=e)return this.nodes.get(e)}setChebNumTemp(e){let t=this.index.get(eY.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eY.tagName,this.nodes.size),this.addNode(e))}removeChebNumTemp(){let e=this.index.get(eY.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(eY.tagName))}getChebNumConc(){let e=this.index.get(e$.tagName);if(void 0!=e)return this.nodes.get(e)}setChebNumConc(e){let t=this.index.get(e$.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(e$.tagName,this.nodes.size),this.addNode(e))}removeChebNumConc(){let e=this.index.get(e$.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(e$.tagName))}getChebMaxTemp(){let e=this.index.get(eX.tagName);if(void 0!=e)return this.nodes.get(e)}setChebMaxTemp(e){let t=this.index.get(eX.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eX.tagName,this.nodes.size),this.addNode(e))}removeChebMaxTemp(){let e=this.index.get(eX.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(eX.tagName))}getChebMinTemp(){let e=this.index.get(eK.tagName);if(void 0!=e)return this.nodes.get(e)}setChebMinTemp(e){let t=this.index.get(eK.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eK.tagName,this.nodes.size),this.addNode(e))}removeChebMinTemp(){let e=this.index.get(eK.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(eK.tagName))}getChebMaxConc(){let e=this.index.get(eW.tagName);if(void 0!=e)return this.nodes.get(e)}setChebMaxConc(e){let t=this.index.get(eW.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eW.tagName,this.nodes.size),this.addNode(e))}removeChebMaxConc(){let e=this.index.get(eW.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(eW.tagName))}getChebMinConc(){let e=this.index.get(eZ.tagName);if(void 0!=e)return this.nodes.get(e)}setChebMinConc(e){let t=this.index.get(eZ.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eZ.tagName,this.nodes.size),this.addNode(e))}removeChebMinConc(){let e=this.index.get(eZ.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(eZ.tagName))}getChebTExSize(){let e=this.index.get(eQ.tagName);if(void 0!=e)return this.nodes.get(e)}setChebTExSize(e){let t=this.index.get(eQ.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eQ.tagName,this.nodes.size),this.addNode(e))}removeChebTExSize(){let e=this.index.get(eQ.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(eQ.tagName))}getChebPExSize(){let e=this.index.get(eJ.tagName);if(void 0!=e)return this.nodes.get(e)}setChebPExSize(e){let t=this.index.get(eJ.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eJ.tagName,this.nodes.size),this.addNode(e))}removeChebPExSize(){let e=this.index.get(eJ.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(eJ.tagName))}}class e1 extends q{static{this.tagName="me:Tmin"}constructor(e,t){super(e,e1.tagName,t)}}class e2 extends q{static{this.tagName="me:Tmid"}constructor(e,t){super(e,e2.tagName,t)}}class e3 extends q{static{this.tagName="me:Tmax"}constructor(e,t){super(e,e3.tagName,t)}}class e5 extends q{static{this.tagName="me:Tstep"}constructor(e,t){super(e,e1.tagName,t)}}class e4 extends eB{static{this.xsi_type="me:ThermodynamicTable"}static{this.xsi_type2="ThermodynamicTable"}constructor(e,t,s,i,n){super(e),this.index=new Map,void 0!=t&&(this.index.set(e1.tagName,this.nodes.size),this.addNode(t)),void 0!=s&&(this.index.set(e2.tagName,this.nodes.size),this.addNode(s)),void 0!=i&&(this.index.set(e3.tagName,this.nodes.size),this.addNode(i)),void 0!=n&&(this.index.set(e5.tagName,this.nodes.size),this.addNode(n))}getTmin(){let e=this.index.get(e1.tagName);if(void 0!=e)return this.nodes.get(e)}setTmin(e){let t=this.index.get(e1.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(e1.tagName,this.nodes.size),this.addNode(e))}removeTmin(){let e=this.index.get(e1.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(e1.tagName))}getTmid(){let e=this.index.get(e2.tagName);if(void 0!=e)return this.nodes.get(e)}setTmid(e){let t=this.index.get(e2.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(e2.tagName,this.nodes.size),this.addNode(e))}removeTmid(){let e=this.index.get(e2.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(e2.tagName))}getTmax(){let e=this.index.get(e3.tagName);if(void 0!=e)return this.nodes.get(e)}setTmax(e){let t=this.index.get(e3.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(e3.tagName,this.nodes.size),this.addNode(e))}removeTmax(){let e=this.index.get(e3.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(e3.tagName))}getTstep(){let e=this.index.get(e5.tagName);if(void 0!=e)return this.nodes.get(e)}setTstep(e){let t=this.index.get(e5.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(e5.tagName,this.nodes.size),this.addNode(e))}removeTstep(){let e=this.index.get(e5.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(e5.tagName))}}class e6 extends q{static{this.tagName="me:sensitivityAnalysisSamples"}constructor(e,t){super(e,e6.tagName,t)}}class e8 extends q{static{this.tagName="me:sensitivityAnalysisOrder"}constructor(e,t){super(e,e8.tagName,t)}}class e9 extends q{static{this.tagName="me:sensitivityNumVarRedIters"}constructor(e,t){super(e,e9.tagName,t)}}class e7 extends V{static{this.tagName="me:sensitivityVarRedMethod"}static{this.options=["AdditiveControl","RatioControl"]}constructor(e,t){super(e,e7.tagName,t)}}class te extends eB{static{this.xsi_type="me:sensitivityAnalysis"}static{this.xsi_type2="sensitivityAnalysis"}constructor(e,t,s,i,n){super(e),this.index=new Map,void 0!=t&&(this.index.set(e6.tagName,this.nodes.size),this.addNode(t)),void 0!=s&&(this.index.set(e8.tagName,this.nodes.size),this.addNode(s)),void 0!=i&&(this.index.set(e9.tagName,this.nodes.size),this.addNode(i)),void 0!=n&&(this.index.set(e7.tagName,this.nodes.size),this.addNode(n))}getSensitivityAnalysisSamples(){let e=this.index.get(e6.tagName);if(void 0!=e)return this.nodes.get(e)}setSensitivityAnalysisSamples(e){let t=this.index.get(e6.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(e6.tagName,this.nodes.size),this.addNode(e))}removeSensitivityAnalysisSamples(){let e=this.index.get(e6.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(e6.tagName))}getSensitivityAnalysisOrder(){let e=this.index.get(e8.tagName);if(void 0!=e)return this.nodes.get(e)}setSensitivityAnalysisOrder(e){let t=this.index.get(e8.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(e8.tagName,this.nodes.size),this.addNode(e))}removeSensitivityAnalysisOrder(){let e=this.index.get(e8.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(e8.tagName))}getSensitivityNumVarRedIters(){let e=this.index.get(e9.tagName);if(void 0!=e)return this.nodes.get(e)}setSensitivityNumVarRedIters(e){let t=this.index.get(e9.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(e9.tagName,this.nodes.size),this.addNode(e))}removeSensitivityNumVarRedIters(){let e=this.index.get(e9.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(e9.tagName))}getSensitivityVarRedMethod(){let e=this.index.get(e7.tagName);if(void 0!=e)return this.nodes.get(e)}setSensitivityVarRedMethod(e){let t=this.index.get(e7.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(e7.tagName,this.nodes.size),this.addNode(e))}removeSensitivityVarRedMethod(){let e=this.index.get(e7.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(e7.tagName))}}class tt extends q{static{this.tagName="me:eigenvalues"}constructor(e,t){super(e,tt.tagName,t)}}class ts extends q{static{this.tagName="me:shortestTimeOfInterest"}constructor(e,t){super(e,ts.tagName,t)}}class ti extends q{static{this.tagName="me:MaximumEvolutionTime"}constructor(e,t){super(e,ti.tagName,t)}}class tn extends q{static{this.tagName="me:automaticallySetMaxEne"}constructor(e,t){super(e,tn.tagName,t)}}class ta extends q{static{this.tagName="me:diagramEnergyOffset"}constructor(e,t){super(e,ta.tagName,t)}}class to extends U{static{this.tagName="me:testMicroRates"}constructor(e){super(e,to.tagName),this.tMin=new(o(d))(e.get("Tmin")),this.tMax=new(o(d))(e.get("Tmax")),this.tStep=new(o(d))(e.get("Tstep"))}getTmin(){return this.tMin}setTmin(e){this.tMin=e,this.attributes?.set("Tmin",e.toString())}getTmax(){return this.tMax}setTmax(e){this.tMax=e,this.attributes?.set("Tmax",e.toString())}getTstep(){return this.tStep}setTstep(e){this.tStep=e,this.attributes?.set("Tstep",e.toString())}}class td extends j{static{this.tagName="me:control"}constructor(e,t){super(e,td.tagName),this.id=t,this.index=new Map}getCalculateRateCoefficientsOnly(){let e=this.index.get(ec.tagName);if(void 0!=e)return this.nodes.get(e)}setCalculateRateCoefficientsOnly(e){let t=this.index.get(ec.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(ec.tagName,this.nodes.size),this.addNode(e))}removeCalculateRateCoefficientsOnly(){let e=this.index.get(ec.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(ec.tagName))}getPrintCellDOS(){let e=this.index.get(eu.tagName);if(void 0!=e)return this.nodes.get(e)}setPrintCellDOS(e){let t=this.index.get(eu.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eu.tagName,this.nodes.size),this.addNode(e))}removePrintCellDOS(){let e=this.index.get(eu.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(eu.tagName))}getPrintCellTransitionStateFlux(){let e=this.index.get(eN.tagName);if(void 0!=e)return this.nodes.get(e)}setPrintCellTransitionStateFlux(e){let t=this.index.get(eN.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eN.tagName,this.nodes.size),this.addNode(e))}removePrintCellTransitionStateFlux(){let e=this.index.get(eN.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(eN.tagName))}getPrintReactionOperatorColumnSums(){let e=this.index.get(ep.tagName);if(void 0!=e)return this.nodes.get(e)}setPrintReactionOperatorColumnSums(e){let t=this.index.get(ep.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(ep.tagName,this.nodes.size),this.addNode(e))}removePrintReactionOperatorColumnSums(){let e=this.index.get(ep.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(ep.tagName))}getPrintGrainBoltzmann(){let e=this.index.get(ex.tagName);if(void 0!=e)return this.nodes.get(e)}setPrintGrainBoltzmann(e){let t=this.index.get(ex.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(ex.tagName,this.nodes.size),this.addNode(e))}removePrintGrainBoltzmann(){let e=this.index.get(ex.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(ex.tagName))}getPrintGrainDOS(){let e=this.index.get(ef.tagName);if(void 0!=e)return this.nodes.get(e)}setPrintGrainDOS(e){let t=this.index.get(ef.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(ef.tagName,this.nodes.size),this.addNode(e))}removePrintGrainDOS(){let e=this.index.get(ef.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(ef.tagName))}getPrintGrainkbE(){let e=this.index.get(ev.tagName);if(void 0!=e)return this.nodes.get(e)}setPrintGrainkbE(e){let t=this.index.get(ev.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(ev.tagName,this.nodes.size),this.addNode(e))}removePrintGrainkbE(){let e=this.index.get(ev.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(ev.tagName))}getPrintGrainkfE(){let e=this.index.get(eE.tagName);if(void 0!=e)return this.nodes.get(e)}setPrintGrainkfE(e){let t=this.index.get(eE.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eE.tagName,this.nodes.size),this.addNode(e))}removePrintGrainkfE(){let e=this.index.get(eE.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(eE.tagName))}getPrintTSsos(){let e=this.index.get(ew.tagName);if(void 0!=e)return this.nodes.get(e)}setPrintTSsos(e){let t=this.index.get(ew.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(ew.tagName,this.nodes.size),this.addNode(e))}removePrintTSsos(){let e=this.index.get(ew.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(ew.tagName))}getPrintGrainedSpeciesProfile(){let e=this.index.get(ey.tagName);if(void 0!=e)return this.nodes.get(e)}setPrintGrainedSpeciesProfile(e){let t=this.index.get(ey.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(ey.tagName,this.nodes.size),this.addNode(e))}removePrintGrainedSpeciesProfile(){let e=this.index.get(ey.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(ey.tagName))}getPrintGrainTransitionStateFlux(){let e=this.index.get(eC.tagName);if(void 0!=e)return this.nodes.get(e)}setPrintGrainTransitionStateFlux(e){let t=this.index.get(eC.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eC.tagName,this.nodes.size),this.addNode(e))}removePrintGrainTransitionStateFlux(){let e=this.index.get(eC.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(eC.tagName))}getPrintReactionOperatorSize(){let e=this.index.get(eb.tagName);if(void 0!=e)return this.nodes.get(e)}setPrintReactionOperatorSize(e){let t=this.index.get(eb.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eb.tagName,this.nodes.size),this.addNode(e))}removePrintReactionOperatorSize(){let e=this.index.get(eb.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(eb.tagName))}getPrintSpeciesProfile(){let e=this.index.get(eS.tagName);if(void 0!=e)return this.nodes.get(e)}setPrintSpeciesProfile(e){let t=this.index.get(eS.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eS.tagName,this.nodes.size),this.addNode(e))}removePrintSpeciesProfile(){let e=this.index.get(eS.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(eS.tagName))}getPrintPhenomenologicalEvolution(){let e=this.index.get(eT.tagName);if(void 0!=e)return this.nodes.get(e)}setPrintPhenomenologicalEvolution(e){let t=this.index.get(eT.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eT.tagName,this.nodes.size),this.addNode(e))}removePrintPhenomenologicalEvolution(){let e=this.index.get(eT.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(eT.tagName))}getPrintTunnelingCoefficients(){let e=this.index.get(eM.tagName);if(void 0!=e)return this.nodes.get(e)}setPrintTunnelingCoefficients(e){let t=this.index.get(eM.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eM.tagName,this.nodes.size),this.addNode(e))}removePrintTunnelingCoefficients(){let e=this.index.get(eM.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(eM.tagName))}getPrintCrossingCoefficients(){let e=this.index.get(e_.tagName);if(void 0!=e)return this.nodes.get(e)}setPrintCrossingCoefficients(e){let t=this.index.get(e_.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(e_.tagName,this.nodes.size),this.addNode(e))}removePrintCrossingCoefficients(){let e=this.index.get(e_.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(e_.tagName))}getTestDOS(){let e=this.index.get(ez.tagName);if(void 0!=e)return this.nodes.get(e)}setTestDOS(e){let t=this.index.get(ez.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(ez.tagName,this.nodes.size),this.addNode(e))}removeTestDOS(){let e=this.index.get(ez.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(ez.tagName))}getTestRateConstants(){let e=this.index.get(eR.tagName);if(void 0!=e)return this.nodes.get(e)}setTestRateConstants(e){let t=this.index.get(eR.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eR.tagName,this.nodes.size),this.addNode(e))}removeTestRateConstants(){let e=this.index.get(eR.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(eR.tagName))}getUseTheSameCellNumberForAllConditions(){let e=this.index.get(eP.tagName);if(void 0!=e)return this.nodes.get(e)}setUseTheSameCellNumberForAllConditions(e){let t=this.index.get(eP.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eP.tagName,this.nodes.size),this.addNode(e))}removeUseTheSameCellNumberForAllConditions(){let e=this.index.get(eP.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(eP.tagName))}getHideInactive(){let e=this.index.get(eI.tagName);if(void 0!=e)return this.nodes.get(e)}setHideInactive(e){let t=this.index.get(eI.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eI.tagName,this.nodes.size),this.addNode(e))}removeHideInactive(){let e=this.index.get(eI.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(eI.tagName))}getForceMacroDetailedBalance(){let e=this.index.get(eL.tagName);if(void 0!=e)return this.nodes.get(e)}setForceMacroDetailedBalance(e){let t=this.index.get(eL.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eL.tagName,this.nodes.size),this.addNode(e))}removeForceMacroDetailedBalance(){let e=this.index.get(eL.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(eL.tagName))}getCalcMethod(){let e=this.index.get(eB.tagName);if(void 0!=e)return this.nodes.get(e)}setCalcMethod(e){let t=this.index.get(eB.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eB.tagName,this.nodes.size),this.addNode(e))}removeCalcMethod(){let e=this.index.get(eB.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(eB.tagName))}getEigenvalues(){let e=this.index.get(tt.tagName);if(void 0!=e)return this.nodes.get(e)}setEigenvalues(e){let t=this.index.get(tt.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(tt.tagName,this.nodes.size),this.addNode(e))}removeEigenvalues(){let e=this.index.get(tt.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(tt.tagName))}getShortestTimeOfInterest(){let e=this.index.get(ts.tagName);if(void 0!=e)return this.nodes.get(e)}setShortestTimeOfInterest(e){let t=this.index.get(ts.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(ts.tagName,this.nodes.size),this.addNode(e))}removeShortestTimeOfInterest(){let e=this.index.get(ts.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(ts.tagName))}getMaximumEvolutionTime(){let e=this.index.get(ti.tagName);if(void 0!=e)return this.nodes.get(e)}setMaximumEvolutionTime(e){let t=this.index.get(ti.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(ti.tagName,this.nodes.size),this.addNode(e))}removeMaximumEvolutionTime(){let e=this.index.get(ti.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(ti.tagName))}getAutomaticallySetMaxEne(){let e=this.index.get(tn.tagName);if(void 0!=e)return this.nodes.get(e)}setAutomaticallySetMaxEne(e){let t=this.index.get(tn.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(tn.tagName,this.nodes.size),this.addNode(e))}removeAutomaticallySetMaxEne(){let e=this.index.get(tn.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(tn.tagName))}getDiagramEnergyOffset(){let e=this.index.get(ta.tagName);if(void 0!=e)return this.nodes.get(e)}setDiagramEnergyOffset(e){let t=this.index.get(ta.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(ta.tagName,this.nodes.size),this.addNode(e))}removeDiagramEnergyOffset(){let e=this.index.get(ta.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(ta.tagName))}getTestMicroRates(){let e=this.index.get(to.tagName);if(void 0!=e)return this.nodes.get(e)}setTestMicroRates(e){let t=this.index.get(to.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(to.tagName,this.nodes.size),this.addNode(e))}removeTestMicroRates(){let e=this.index.get(to.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(to.tagName))}}class tr extends V{static{this.tagName="dc:title"}constructor(e,t){super(e,tr.tagName,t)}}class tl extends V{static{this.tagName="dc:source"}constructor(e,t){super(e,tl.tagName,t)}}class tg extends V{static{this.tagName="dc:creator"}constructor(e,t){super(e,tg.tagName,t)}}class th extends V{static{this.tagName="dc:date"}constructor(e,t){super(e,th.tagName,t)}}class tm extends V{static{this.tagName="dc:contributor"}constructor(e,t){super(e,tm.tagName,t)}}class tc extends j{static{this.tagName="metadataList"}constructor(e,t,s,i,n,a){super(e,tc.tagName),this.index=new Map,t&&(this.index.set(tr.tagName,this.nodes.size),this.addNode(t)),s&&(this.index.set(tl.tagName,this.nodes.size),this.addNode(s)),i&&(this.index.set(tg.tagName,this.nodes.size),this.addNode(i)),n&&(this.index.set(th.tagName,this.nodes.size),this.addNode(n)),a&&(this.index.set(tm.tagName,this.nodes.size),this.addNode(a))}getTitle(){if(this.index.has(tr.tagName)){let e=this.index.get(tr.tagName);return this.nodes.get(e)}}setTitle(e){if(this.index.has(tr.tagName)){let t=this.index.get(tr.tagName);this.nodes.set(t,e)}else this.index.set(tr.tagName,this.nodes.size),this.addNode(e)}getSource(){if(this.index.has(tl.tagName)){let e=this.index.get(tl.tagName);return this.nodes.get(e)}}setSource(e){if(this.index.has(tl.tagName)){let t=this.index.get(tl.tagName);this.nodes.set(t,e)}else this.index.set(tl.tagName,this.nodes.size),this.addNode(e)}getCreator(){if(this.index.has(tg.tagName)){let e=this.index.get(tg.tagName);return this.nodes.get(e)}}setCreator(e){if(this.index.has(tg.tagName)){let t=this.index.get(tg.tagName);this.nodes.set(t,e)}else this.index.set(tg.tagName,this.nodes.size),this.addNode(e)}getDate(){if(this.index.has(th.tagName)){let e=this.index.get(th.tagName);return this.nodes.get(e)}}setDate(e){if(this.index.has(th.tagName)){let t=this.index.get(th.tagName);this.nodes.set(t,e)}else this.index.set(th.tagName,this.nodes.size),this.addNode(e)}getContributor(){if(this.index.has(tm.tagName)){let e=this.index.get(tm.tagName);return this.nodes.get(e)}}setContributor(e){if(this.index.has(tm.tagName)){let t=this.index.get(tm.tagName);this.nodes.set(t,e)}else this.index.set(tm.tagName,this.nodes.size),this.addNode(e)}}class tu extends q{static{this.tagName="me:grainSize"}constructor(e,t){super(e,tu.tagName,t)}}class tN extends q{static{this.tagName="me:automaticallySetMaxEne"}constructor(e,t){super(e,tN.tagName,t)}}class tp extends q{static{this.tagName="me:energyAboveTheTopHill"}constructor(e,t){super(e,tp.tagName,t)}}class tx extends q{static{this.tagName="me:maxTemperature"}constructor(e,t){super(e,tx.tagName,t)}}class tf extends j{static{this.tagName="me:modelParameters"}constructor(e,t,s,i,n){super(e,tf.tagName),this.index=new Map,void 0!=t&&(this.index.set(tu.tagName,this.nodes.size),this.addNode(t)),void 0!=s&&(this.index.set(tN.tagName,this.nodes.size),this.addNode(s)),void 0!=i&&(this.index.set(tp.tagName,this.nodes.size),this.addNode(i)),void 0!=n&&(this.index.set(tx.tagName,this.nodes.size),this.addNode(n))}getGrainSize(){let e=this.index.get(tu.tagName);if(e)return this.nodes.get(e)}setGrainSize(e){let t=this.index.get(tu.tagName);t?this.nodes.set(t,e):(this.index.set(tu.tagName,this.nodes.size),this.addNode(e))}removeGrainSize(){let e=this.index.get(tu.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(tu.tagName))}getAutomaticallySetMaxEne(){let e=this.index.get(tN.tagName);if(e)return this.nodes.get(e)}setAutomaticallySetMaxEne(e){let t=this.index.get(tN.tagName);t?this.nodes.set(t,e):(this.index.set(tN.tagName,this.nodes.size),this.addNode(e))}removeAutomaticallySetMaxEne(){let e=this.index.get(tN.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(tN.tagName))}getEnergyAboveTheTopHill(){let e=this.index.get(tp.tagName);if(e)return this.nodes.get(e)}setEnergyAboveTheTopHill(e){let t=this.index.get(tp.tagName);t?this.nodes.set(t,e):(this.index.set(tp.tagName,this.nodes.size),this.addNode(e))}removeEnergyAboveTheTopHill(){let e=this.index.get(tp.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(tp.tagName))}getMaxTemperature(){let e=this.index.get(tx.tagName);if(e)return this.nodes.get(e)}setMaxTemperature(e){let t=this.index.get(tx.tagName);t?this.nodes.set(t,e):(this.index.set(tx.tagName,this.nodes.size),this.addNode(e))}removeMaxTemperature(){let e=this.index.get(tx.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(tx.tagName))}}class tv extends V{static{this.tagName="me:title"}constructor(e,t){super(e,tv.tagName,t)}}class tE extends j{static{this.tagName="moleculeList"}constructor(e,t){super(e,tE.tagName),this.index=new Map,void 0!=t&&t.forEach(e=>{this.nodes.set(this.nodes.size,e),this.index.set(e.getID(),this.nodes.size-1)})}getMolecule(e){let t=this.index.get(e);if(void 0!=t)return this.nodes.get(t)}removeMolecule(e){let t=this.index.get(e);void 0!=t&&(this.nodes.delete(t),this.index.delete(e))}addMolecule(e){let t=e.getID(),s=this.index.get(t);void 0!==s?(this.nodes.set(s,e),console.log("Replaced molecule with id "+t)):(this.nodes.set(this.nodes.size,e),this.index.set(t,this.nodes.size-1))}}class tw extends j{static{this.tagName="reactionList"}constructor(e,t){super(e,tw.tagName),this.index=new Map,void 0!=t&&t.forEach(e=>{this.nodes.set(this.nodes.size,e),this.index.set(e.id,this.nodes.size-1)})}getReaction(e){let t=this.index.get(e);if(void 0!=t)return this.nodes.get(t)}removeReaction(e){let t=this.index.get(e);void 0!=t&&(this.nodes.delete(t),this.index.delete(e))}addReaction(e){let t=this.index.get(e.id);void 0!==t?(this.nodes.set(t,e),console.log("Replaced reaction with id "+e.id)):(this.nodes.set(this.nodes.size,e),this.index.set(e.id,this.nodes.size-1))}}class ty extends j{static{this.tagName="conditionsList"}constructor(e,t){super(e,tC.tagName),this.index=new Map,void 0!=t&&t.forEach(e=>{this.nodes.set(this.nodes.size,e),this.index.set(e.id,this.nodes.size-1)})}getConditions(e){let t=this.index.get(e);if(void 0!=t)return this.nodes.get(t)}removeConditions(e){let t=this.index.get(e);void 0!=t&&(this.nodes.delete(t),this.index.delete(e))}addConditions(e){let t=this.index.get(e.id);void 0!=t?(this.nodes.set(t,e),console.log("Replaced conditions with id "+e.id)):(this.nodes.set(this.nodes.size,e),this.index.set(e.id,this.nodes.size-1))}}class tC extends j{static{this.tagName="controlList"}constructor(e,t){super(e,tC.tagName),this.index=new Map,void 0!=t&&t.forEach(e=>{this.nodes.set(this.nodes.size,e),this.index.set(e.id,this.nodes.size-1)})}getControl(e){let t=this.index.get(e);if(void 0!=t)return this.nodes.get(t)}removeControl(e){let t=this.index.get(e);void 0!=t&&(this.nodes.delete(t),this.index.delete(e))}addControl(e){let t=this.index.get(e.id);void 0!==t?(this.nodes.set(t,e),console.log("Replaced control with id "+e.id)):(this.nodes.set(this.nodes.size,e),this.index.set(e.id,this.nodes.size-1))}}class tb extends j{static{this.tagName="me:mesmer"}static{this.precisionOptions=["d","dd","qd","double","double-double","quad-double"]}static{this.pressureUnits=["Torr","PPCC","atm","mbar","psi","mols/cc"]}static{this.energyUnits=["kJ/mol","kJ per mol","cm-1","wavenumber","kcal/mol","kcal per mol","Hartree","au"]}static{this.frequencyUnits=["cm-1","GHz","amuA^2"]}static{this.elementTypes=["H","He","Li","Be","B","C","N","O","F","Ne","Na","Mg","Al","Si","P","S","Cl","Ar","K","Ca","Sc","Ti","V","Cr","Mn","Fe","Co","Ni","Cu","Zn","Ga","Ge","As","Se","Br","Kr","Rb","Sr","Y","Zr","Nb","Mo","Tc","Ru","Rh","Pd","Ag","Cd","In","Sn","Sb","Te","I","Xe","Cs","Ba","La","Ce","Pr","Nd","Pm","Sm","Eu","Gd","Tb","Dy","Ho","Er","Tm","Yb","Lu","Hf","Ta","W","Re","Os","Ir","Pt","Au","Hg","Tl","Pb","Bi","Po","At","Rn","Fr","Ra","Ac","Th","Pa","U","Np","Pu","Am","Cm","Bk","Cf","Es","Fm","Md","No","Lr","Rf","Db","Sg","Bh","Hs","Mt","Ds","Rg","Cn","Nh","Fl","Mc","Lv","Ts","Og"]}static{this.atomMasses=new Map}static{this.atomRadii=new Map}static{this.atomColors=new Map}static{this.bondColors=new Map}static{this.header=`<?xml version="1.0" encoding="utf-8" ?>
<?xml-stylesheet type='text/xsl' href='../../mesmer2.xsl' media='other'?>
<?xml-stylesheet type='text/xsl' href='../../mesmer1.xsl' media='screen'?>`}constructor(e,t,s,i,n,a,o,d,r){super(e,tb.tagName);let l=["H","O","C","N","Cl","S","Ph","Fe"],g=["White","Red","DarkGrey","Blue","Green","Yellow","Orange","Brown"];for(let e=0;e<l.length;e++)tb.atomColors.set(l[e],g[e]);let h=[1.00784,15.999,12.011,14.007,35.453,32.06,77.845,55.845];for(let e=0;e<l.length;e++)tb.atomMasses.set(l[e],h[e]);let m=[37,66,67,56,99,102,110,124];for(let e=0;e<l.length;e++)tb.atomRadii.set(l[e],m[e]);let c=[1,1.5,2,2.5,3,3.5,4,4.5,5,5.5,6];g=["Black","Red","DarkRed","Blue","DarkBlue","Green","DarkGreen","Yellow","DarkYellow","Orange","DarkOrange"];for(let e=0;e<c.length;e++)tb.bondColors.set(c[e],g[e]);this.index=new Map,void 0!=t&&(this.index.set(tv.tagName,this.nodes.size),this.addNode(t)),void 0!=s&&(this.index.set(tE.tagName,this.nodes.size),this.addNode(s)),void 0!=i&&(this.index.set(tw.tagName,this.nodes.size),this.addNode(i)),this.conditionsIndex=new Map,void 0!=n&&n.forEach(e=>{this.index.set(em.tagName+e.id,this.nodes.size),this.conditionsIndex.set(e.id,this.nodes.size),this.addNode(e)}),void 0!=a&&(this.index.set(tf.tagName,this.nodes.size),this.addNode(a)),this.controlIndex=new Map,void 0!=o&&o.forEach(e=>{this.index.set(td.tagName+e.id,this.nodes.size),this.controlIndex.set(e.id,this.nodes.size),this.addNode(e)}),void 0!=d&&(this.index.set(tc.tagName,this.nodes.size),this.addNode(d)),void 0!=r&&(this.index.set(en.tagName,this.nodes.size),this.addNode(r))}getTitle(){let e=this.index.get(tv.tagName);if(void 0!=e)return this.nodes.get(e)}setTitle(e){let t=this.index.get(tv.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(tv.tagName,this.nodes.size),this.addNode(e))}getMoleculeList(){let e=this.index.get(tE.tagName);if(void 0!=e)return this.nodes.get(e)}setMoleculeList(e){let t=this.index.get(tE.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(tE.tagName,this.nodes.size),this.addNode(e))}getReactionList(){let e=this.index.get(tw.tagName);if(void 0!=e)return this.nodes.get(e)}setReactionList(e){let t=this.index.get(tw.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(tw.tagName,this.nodes.size),this.addNode(e))}addConditions(e){let t=em.tagName+e.id,s=this.index.get(t);void 0!=s?this.nodes.set(s,e):(this.index.set(t,this.nodes.size),this.conditionsIndex.set(e.id,this.nodes.size),this.addNode(e))}getConditions(e){let t=this.conditionsIndex.get(e);if(void 0!=t)return this.nodes.get(t)}getNextConditionsID(){let e=0,t=Array.from(this.conditionsIndex.keys()).sort((e,t)=>e-t);return console.log("sortedKeys "+h(t)),t.forEach(t=>{if(t>e)return e;e++}),e}removeConditions(e){let t=this.conditionsIndex.get(e);void 0!=t&&(this.nodes.delete(t),this.index.delete(em.tagName+e),this.conditionsIndex.delete(e))}getModelParameters(){let e=this.index.get(tf.tagName);if(void 0!=e)return this.nodes.get(e)}setModelParameters(e){let t=this.index.get(tf.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(tf.tagName,this.nodes.size),this.addNode(e))}addControl(e){let t=td.tagName+e.id,s=this.index.get(t);void 0!=s?this.nodes.set(s,e):(this.index.set(t,this.nodes.size),this.controlIndex.set(e.id,this.nodes.size),this.addNode(e))}getControl(e){let t=this.controlIndex.get(e);if(void 0!=t)return this.nodes.get(t)}getNextControlID(){let e=0,t=Array.from(this.controlIndex.keys()).sort((e,t)=>e-t);return console.log("sortedKeys "+h(t)),t.forEach(t=>{if(t>e)return e;e++}),e}removeControl(e){let t=this.controlIndex.get(e);console.log("removeControl "+e+" "+t),console.log("controlIndex "+h(Array.from(this.controlIndex.keys()))),void 0!=t&&(this.nodes.delete(t),this.index.delete(td.tagName+e),this.controlIndex.delete(e))}setMetadataList(e){let t=this.index.get(tc.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(tc.tagName,this.nodes.size),this.addNode(e))}setAnalysis(e){let t=this.index.get(en.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(en.tagName,this.nodes.size),this.addNode(e))}}class tS extends V{static{this.tagName="me:description"}constructor(e,t){super(e,tS.tagName,t)}}class tT extends q{static{this.tagName="me:T"}constructor(e,t){super(e,tT.tagName,t)}}class tM extends U{static{this.tagName="atom"}static{this.s_id="id"}static{this.s_elementType="elementType"}static{this.s_x3="x3"}static{this.s_y3="y3"}static{this.s_z3="z3"}constructor(e,t){super(e,tM.tagName),this.molecule=t}hasCoordinates(){return void 0!=this.attributes.get(tM.s_x3)&&void 0!=this.attributes.get(tM.s_y3)&&void 0!=this.attributes.get(tM.s_z3)}getId(){return this.attributes.get(tM.s_id)}setId(e){this.attributes.set(tM.s_id,e)}getElementType(){return this.attributes.get(tM.s_elementType)}setElementType(e){this.attributes.set(tM.s_elementType,e)}getX3(){let e=this.attributes.get(tM.s_x3);if(void 0!=e)return new(o(d))(e)}setX3(e){this.attributes.set(tM.s_x3,e.toString())}removeX3(){this.attributes.delete(tM.s_x3)}getY3(){let e=this.attributes.get(tM.s_y3);if(void 0!=e)return new(o(d))(e)}setY3(e){this.attributes.set(tM.s_y3,e.toString())}removeY3(){this.attributes.delete(tM.s_y3)}getZ3(){let e=this.attributes.get(tM.s_z3);if(void 0!=e)return new(o(d))(e)}setZ3(e){this.attributes.set("z3",e.toString())}removeZ3(){this.attributes.delete("z3")}}class t_ extends j{static{this.tagName="atomArray"}constructor(e,t){super(e,t_.tagName),this.index=new Map,this.reverseIndex=new Map,void 0==t?this.atoms=new Map:(this.atoms=t,t.forEach((e,t)=>{this.index.set(t,this.nodes.size),this.reverseIndex.set(this.nodes.size,t),this.nodes.set(this.nodes.size,e)}))}getAtom(e){return this.atoms.get(e)}addAtom(e){let t=e.getId();if(void 0==t)t=this.getNextAtomID(),e.setId(t);else if(this.atoms.has(t)){let s=this.getNextAtomID();console.warn("Atom with id "+t+" already exists, adding with id "+s),e.setId(s),t=s}return this.index.set(t,this.nodes.size),this.reverseIndex.set(this.nodes.size,t),this.nodes.set(this.nodes.size,e),this.atoms.set(t,e),t}getNextAtomID(){let e=1,t="a1";if(this.atoms.has(t))for(;this.atoms.has(t);)e++,t="a"+e.toString();return t}removeAtom(e){let t=this.index.get(e);if(void 0==t)throw Error("Atom with id "+e+" does not exist!");console.log("Removing atom with id "+e),this.atoms.delete(e),this.deleteNodeAndReindex(t,e)}deleteNodeAndReindex(e,t){this.nodes.delete(e),this.index.delete(t),this.reverseIndex.delete(e);let s=new Map,i=new Map,n=new Map;this.index.forEach((t,a)=>{t>e?(s.set(t-1,this.nodes.get(t)),i.set(a,t-1),n.set(t-1,a)):(s.set(t,this.nodes.get(t)),i.set(a,t),n.set(t,a))}),this.nodes=s,this.index=i,this.reverseIndex=n}}class tz extends U{static{this.tagName="bond"}static{this.s_atomRefs2="atomRefs2"}static{this.s_id="id"}static{this.s_order="order"}static{this.orderOptions=["1","1.5","2","2.5","3","3.5","4","4.5","5","5.5","6"]}constructor(e,t){super(e,tz.tagName),this.molecule=t}getAtomRefs2(){let e=this.attributes.get(tz.s_atomRefs2);return(e?.split(" "),void 0==e)?"a1 a1":e}setAtomRefs2(e){this.attributes.set(tz.s_atomRefs2,e)}getId(){return this.attributes.get(tz.s_id)}setId(e){this.attributes.set(tz.s_id,e)}getOrder(){let e=this.attributes.get(tz.s_order);if(void 0!=e)return parseFloat(e)}setOrder(e){this.attributes.set(tz.s_order,e.toString())}}class tR extends j{static{this.tagName="bondArray"}constructor(e,t){super(e,tR.tagName),this.index=new Map,this.reverseIndex=new Map,void 0==t?this.bonds=new Map:(this.bonds=t,t.forEach((e,t)=>{this.index.set(t,this.nodes.size),this.reverseIndex.set(this.nodes.size,t),this.nodes.set(this.nodes.size,e)}))}getBondIds(){return Array.from(this.bonds.keys())}getBond(e){return this.bonds.get(e)}addBond(e){let t=e.getId();if(void 0==t)t=this.getNextBondID(),e.setId(t);else if(this.bonds.has(t)){let s=this.getNextBondID();console.log("Bond with id "+t+" already exists, adding with id "+s),e.setId(s),t=s}return this.index.set(t,this.nodes.size),this.reverseIndex.set(this.nodes.size,t),this.nodes.set(this.nodes.size,e),this.bonds.set(t,e),t}getNextBondID(){let e=1,t="b1";for(;this.bonds.has(t);)e++,t="b"+e.toString();return t}removeBond(e){let t=this.index.get(e);if(void 0==t)throw Error("Bond with id "+e+" does not exist!");console.log("Removing bond with id "+e),this.bonds.delete(e),this.deleteNodeAndReindex(t,e)}deleteNodeAndReindex(e,t){this.nodes.delete(e),this.index.delete(t),this.reverseIndex.delete(e);let s=new Map,i=new Map,n=new Map;this.index.forEach((t,a)=>{t>e?(s.set(t-1,this.nodes.get(t)),i.set(a,t-1),n.set(t-1,a)):(s.set(t,this.nodes.get(t)),i.set(a,t),n.set(t,a))}),this.nodes=s,this.index=i,this.reverseIndex=n}}class tP extends q{static{this.tagName="scalar"}static{this.s_units="units"}constructor(e,t){super(e,tP.tagName,t)}updateUnits(e){if(e){let t=this.attributes.get(tP.s_units);void 0!=t&&t!=e&&this.attributes.set(tP.s_units,e)}}}class tL extends H{static{this.tagName="array"}static{this.s_units="units"}constructor(e,t,s){super(e,tL.tagName,t,s)}updateUnits(e){if(e){let t=this.attributes.get(tL.s_units);void 0!=t&&t!=e&&(this.attributes.set(tL.s_units,e),console.log("Units changed from "+t+" to "+e))}}}class tI extends H{static{this.tagName="matrix"}static{this.s_rows="rows"}static{this.s_matrixType="matrixType"}static{this.s_units="units"}constructor(e,t,s){super(e,tL.tagName,t,s)}updateUnits(e){if(e){let t=this.attributes.get(tL.s_units);void 0!=t&&t!=e&&(this.attributes.set(tL.s_units,e),console.log("Units changed from "+t+" to "+e))}}}class tB extends j{static{this.tagName="property"}static{this.s_dictRef="dictRef"}constructor(e,t){super(e,tB.tagName);let s=e.get(tB.s_dictRef);if(void 0==s)throw Error(tB.s_dictRef+" is undefined!");this.dictRef=s,t&&this.nodes.set(0,t)}getProperty(){return this.nodes.get(0)}setProperty(e){this.nodes.set(0,e)}}class tD extends tB{static{this.dictRef="me:ZPE"}constructor(e,t){super(e,t)}setUnits(e){this.getProperty().updateUnits(e)}}class tA extends tB{static{this.dictRef="me:Hf0"}constructor(e,t){super(e,t)}setUnits(e){this.getProperty().updateUnits(e)}}class tk extends tB{static{this.dictRef="me:Hf298"}constructor(e,t){super(e,t)}setUnits(e){this.getProperty().updateUnits(e)}}class tG extends tB{static{this.dictRef="me:frequenciesScaleFactor"}constructor(e,t){super(e,t)}}class tO extends tB{static{this.dictRef="me:vibFreqs"}constructor(e,t){super(e,t)}}class tF extends tB{static{this.dictRef="me:rotConsts"}static{this.unitOptions=["cm-1","GHz","amuA^2"]}constructor(e,t){super(e,t)}}class tU extends tB{static{this.dictRef="me:MW"}constructor(e,t){super(e,t)}}class tV extends tB{static{this.dictRef="me:imFreqs"}constructor(e,t){super(e,t)}}class tq extends j{static{this.tagName="propertyList"}constructor(e,t){super(e,tq.tagName),this.index=new Map,void 0!=t&&t.forEach(e=>{this.nodes.set(this.nodes.size,e),this.index.set(e.dictRef,this.nodes.size-1)})}getProperty(e){let t=this.index.get(e);if(void 0!=t)return this.nodes.get(t);throw Error("Property "+e+" does not exist")}setProperty(e){let t=this.index.get(e.dictRef);void 0==t?(this.nodes.set(this.nodes.size,e),this.index.set(e.dictRef,this.nodes.size-1)):(console.log("Property "+e.dictRef+" already exists, updating..."),this.nodes.set(t,e))}removeProperty(e){let t=this.index.get(e);if(void 0!=t){this.nodes.delete(t),this.index.delete(e);let s=new Map;this.index.forEach((e,i)=>{e>t?s.set(i,e-1):s.set(i,e)}),this.index=s}}}class tH extends K{static{this.tagName="me:deltaEDown"}static{this.s_bathGas="bathGas"}constructor(e,t){super(e,tH.tagName,t)}getBathGas(){return this.attributes.get(tH.s_bathGas)}setBathGas(e){this.attributes.set(tH.s_bathGas,e)}}class tj extends tH{static{this.tagName="me:deltaEDown2"}constructor(e,t){super(e,t)}}class tY extends K{static{this.tagName="me:deltaEDownTExponent"}static{this.s_referenceTemperature="referenceTemperature"}constructor(e,t){super(e,tY.tagName,t)}getReferenceTemperature(){return parseFloat(r(this.attributes,tY.s_referenceTemperature))}setReferenceTemperature(e){this.attributes.set(tY.s_referenceTemperature,e.toString())}}class t$ extends K{static{this.tagName="me:deltaEDownLinEne"}constructor(e,t){super(e,t$.tagName,t)}}class tX extends j{static{this.tagName="me:energyTransferModel"}constructor(e,t){super(e,tX.tagName),void 0!=t&&t.forEach(e=>{this.nodes.set(this.nodes.size,e)})}getDeltaEDowns(){let e=[];return this.nodes.forEach(t=>{t instanceof tH&&e.push(t)}),e}setDeltaEDowns(e){this.nodes.clear(),e.forEach(e=>{this.nodes.set(this.nodes.size,e)})}getDeltaEDown(e){if(e<0||e>=this.nodes.size)throw Error("index out of range");return this.nodes.get(e)}setDeltaEDown(e,t){this.nodes.set(e,t)}addDeltaEDown(e){return this.nodes.set(this.nodes.size,e),this.nodes.size-1}}class tK extends U{static{this.tagName="me:DOSCMethod"}static{this.xsi_typeOptions=["ClassicalRotors","QMRotors","me:ClassicalRotors","me:QMRotors"]}static{this.s_xsi_type="xsi:type"}constructor(e){if(super(e,tK.tagName),void 0==e.get(tK.s_xsi_type)){let t=e.get("name");if(void 0==t)throw Error("Neither xsi:type or name are defined.");e.set(tK.s_xsi_type,t)}}getXsiType(){return this.attributes.get(tK.s_xsi_type)}setXsiType(e){this.attributes.set(tK.s_xsi_type,e)}}class tW extends V{static{this.tagName="me:bondRef"}constructor(e,t){super(e,tW.tagName,t)}}class tZ extends U{static{this.tagName="me:PotentialPoint"}static{this.s_angle="angle"}static{this.s_potential="potential"}constructor(e){super(e,tZ.tagName);let t=e.get(tZ.s_angle);if(void 0==t)throw Error(tZ.s_potential+" is undefined!");this.angle=new(o(d))(t);let s=e.get(tZ.s_potential);if(void 0==s)throw Error(tZ.s_potential+" is undefined!");this.potential=new(o(d))(s)}getAngle(){return this.angle}setAngle(e){this.angle=e,this.attributes.set(tZ.s_angle,e.toString())}getPotential(){return this.potential}setPotential(e){this.potential=e,this.attributes.set(tZ.s_potential,e.toString())}}class tQ extends U{static{this.tagName="me:DistributionCalcMethod"}static{this.s_default="default"}static{this.s_name="name"}constructor(e){super(e,tQ.tagName)}getDefault(){return this.attributes.get(tQ.s_default)}getName(){return this.attributes.get(tQ.s_name)}}class tJ extends U{static{this.tagName="me:thermoValue"}static{this.s_T="T"}static{this.s_H="H"}static{this.s_S="S"}static{this.s_G="G"}static{this.s_Cp="Cp"}constructor(e){super(e,tM.tagName)}getT(){return new(o(d))(this.attributes.get(tJ.s_T))}getH(){return new(o(d))(this.attributes.get(tJ.s_H))}getS(){return new(o(d))(this.attributes.get(tJ.s_S))}getG(){return new(o(d))(this.attributes.get(tJ.s_G))}getCp(){return new(o(d))(this.attributes.get(tJ.s_Cp))}toStringArray(){return[this.getT().toString(),this.getH().toString(),this.getS().toString(),this.getG().toString(),this.getCp().toString()]}toCSV(){return this.toStringArray().join(",")}}class t0 extends j{static{this.tagName="me:thermoTable"}static{this.s_unitsT="unitsT"}static{this.s_unitsH="unitsH"}static{this.s_unitsS="unitsS"}static{this.s_unitsG="unitsG"}static{this.s_unitsCp="unitsCp"}constructor(e,t){super(e,t0.tagName),void 0!=t?(t.forEach(e=>{this.addNode(e)}),this.tvs=t):this.tvs=[]}get(e){return this.tvs[e]}set(e,t){this.nodes.set(e,t),this.tvs[e]=t}add(e){return this.addNode(e),this.tvs.push(e),this.nodes.size-1}remove(e){this.nodes.delete(e),this.tvs.splice(e,1)}init(e){this.clear(),e.forEach(e=>{this.addNode(e),this.tvs.push(e)})}clear(){this.nodes.clear(),this.tvs=[]}getHeader(){return["T ("+this.attributes.get(t0.s_unitsT)+")","H(T)-H(0) ("+this.attributes.get(t0.s_unitsH)+")","S(T) ("+this.attributes.get(t0.s_unitsS)+")","G(T) ("+this.attributes.get(t0.s_unitsG)+")","Cp(T) ("+this.attributes.get(t0.s_unitsCp)+")"]}toCSV(){let e=this.getHeader().join(",")+"\n";return this.tvs.forEach(t=>{e+=t.toCSV()+"\n"}),e}}class t1 extends j{static{this.tagName="me:HinderedRotorPotential"}static{this.formats=new Set(["numerical","analytical"])}static{this.s_format="format"}static{this.s_units="units"}static{this.s_expansionSize="expansionSize"}static{this.s_useSineTerms="useSineTerms"}constructor(e,t){super(e,t1.tagName);let s=e.get(t1.s_format);if(void 0==s)throw Error(t1.s_format+" is undefined!");this.format=s;let i=e.get(t1.s_units);if(void 0==i)throw Error(t1.s_units+" is undefined!");this.units=i,void 0!=t&&t.forEach(e=>{this.nodes.set(this.nodes.size,e)});let n=e.get(t1.s_expansionSize);if(void 0==n)throw Error(t1.s_expansionSize+" is undefined!");this.expansionSize=new(o(d))(n),void 0==e.get(t1.s_useSineTerms)?this.useSineTerms=!1:this.useSineTerms=!0}getFormat(){return this.format}setFormat(e){this.format=e,this.attributes.set(t1.s_format,e)}getUnits(){return this.units}setUnits(e){this.units=e,this.attributes.set(t1.s_units,e)}getExpansionSize(){return this.expansionSize}setExpansionSize(e){this.expansionSize=e,this.attributes.set(t1.s_expansionSize,e.toString())}getUseSineTerms(){return this.useSineTerms}setUseSineTerms(e){this.useSineTerms=e,this.attributes.set(t1.s_useSineTerms,e?"yes":"no")}getPotentialPoint(e){return this.nodes.get(e)}setPotentialPoint(e,t){this.nodes.set(e,t)}setPotentialPoints(e){this.nodes.clear(),e.forEach(e=>{this.nodes.set(this.nodes.size,e)})}addPotentialPoint(e){return this.nodes.set(this.nodes.size,e),this.nodes.size-1}removePotentialPoint(e){this.nodes.delete(e)}}class t2 extends q{static{this.tagName="me:periodicity"}constructor(e,t){super(e,t2.tagName,t)}}class t3 extends j{static{this.tagName="me:ExtraDOSCMethod"}constructor(e,t,s,i){super(e,t3.tagName),this.index=new Map,t&&(this.nodes.set(this.nodes.size,t),this.index.set(tW.tagName,this.nodes.size-1)),s&&(this.nodes.set(this.nodes.size,s),this.index.set(t1.tagName,this.nodes.size-1)),i&&(this.nodes.set(this.nodes.size,i),this.index.set(t2.tagName,this.nodes.size-1))}getBondRef(){let e=this.index.get(tW.tagName);if(void 0!=e)return this.nodes.get(e)}setBondRef(e){let t=this.index.get(tW.tagName);void 0!=t?this.nodes.set(t,e):(this.nodes.set(this.nodes.size,e),this.index.set(tW.tagName,this.nodes.size-1))}getHinderedRotorPotential(){let e=this.index.get(t1.tagName);if(void 0!=e)return this.nodes.get(e)}setHinderedRotorPotential(e){let t=this.index.get(t1.tagName);void 0!=t?this.nodes.set(t,e):(this.nodes.set(this.nodes.size,e),this.index.set(t1.tagName,this.nodes.size-1))}getPeriodicity(){let e=this.index.get(t2.tagName);if(void 0!=e)return this.nodes.get(e)}setPeriodicity(e){let t=this.index.get(t2.tagName);void 0!=t?this.nodes.set(t,e):(this.nodes.set(this.nodes.size,e),this.index.set(t2.tagName,this.nodes.size-1))}}class t5 extends q{static{this.tagName="me:reservoirSize"}constructor(e,t){super(e,t5.tagName,t)}}class t4 extends q{static{this.tagName="me:qtot"}constructor(e,t){super(e,t4.tagName,t)}}class t6 extends q{static{this.tagName="me:sumc"}constructor(e,t){super(e,t6.tagName,t)}}class t8 extends q{static{this.tagName="me:sumg"}constructor(e,t){super(e,t8.tagName,t)}}class t9 extends j{static{this.tagName="me:densityOfStates"}static{this.header=[tT.tagName,t4.tagName,t6.tagName,t8.tagName]}constructor(e){super(e,t9.tagName),this.index=new Map}getT(){let e=this.index.get(tT.tagName);if(void 0!=e)return this.nodes.get(e)}setT(e){let t=this.index.get(e.tagName);void 0!=t?this.nodes.set(t,e):(this.nodes.set(this.nodes.size,e),this.index.set(e.tagName,this.nodes.size-1))}getQtot(){let e=this.index.get(t4.tagName);if(void 0!=e)return this.nodes.get(e)}setQtot(e){let t=this.index.get(e.tagName);void 0!=t?this.nodes.set(t,e):(this.nodes.set(this.nodes.size,e),this.index.set(e.tagName,this.nodes.size-1))}getSumc(){let e=this.index.get(t6.tagName);if(void 0!=e)return this.nodes.get(e)}setSumc(e){let t=this.index.get(e.tagName);void 0!=t?this.nodes.set(t,e):(this.nodes.set(this.nodes.size,e),this.index.set(e.tagName,this.nodes.size-1))}getSumg(){let e=this.index.get(t8.tagName);if(void 0!=e)return this.nodes.get(e)}setSumg(e){let t=this.index.get(e.tagName);void 0!=t?this.nodes.set(t,e):(this.nodes.set(this.nodes.size,e),this.index.set(e.tagName,this.nodes.size-1))}toStringArray(){return[this.getT().getValue().toString(),this.getQtot().getValue().toString(),this.getSumc().getValue().toString(),this.getSumg().getValue().toString()]}}class t7 extends j{static{this.tagName="me:densityOfStatesList"}constructor(e,t,s){if(super(e,t7.tagName),this.index=new Map,this.dosIndex=new Map,t&&(this.nodes.set(this.nodes.size,t),this.index.set(tS.tagName,this.nodes.size-1)),s){let e=0;s.forEach(t=>{this.dosIndex.set(e,this.nodes.size),this.nodes.set(this.nodes.size,t),e++})}}getDescription(){let e=this.index.get(tS.tagName);if(void 0!=e)return this.nodes.get(e)}setDescription(e){let t=this.index.get(tS.tagName);void 0!=t?this.nodes.set(t,e):(this.nodes.set(this.nodes.size,e),this.index.set(tS.tagName,this.nodes.size-1))}getDensityOfStates(e){let t=this.dosIndex.get(e);if(void 0!=t)return this.nodes.get(t)}setDensityOfStates(e,t){let s=this.dosIndex.get(e);void 0!=s?this.nodes.set(s,t):(this.nodes.set(this.nodes.size,t),this.dosIndex.set(e,this.nodes.size-1))}addDensityOfStates(e){this.nodes.set(this.nodes.size,e);let t=this.nodes.size-1;return this.dosIndex.set(t,this.nodes.size-1),t}removeDensityOfStates(e){let t=this.dosIndex.get(e);void 0!=t&&this.nodes.delete(t)}toCSV(){let e="",t=t9.header;return e+=t.join(",")+"\n",this.nodes.forEach(t=>{e+=t.toStringArray().join(",")+"\n"}),e}}class se extends j{static{this.tagName="molecule"}static{this.s_id="id"}static{this.s_description="description"}static{this.s_active="active"}constructor(e,t,s,i,n,a,o,d,r,l,g){super(e,se.tagName),this.index=new Map,this.setID(t);let h=0;s&&(this.nodes.set(h,s),this.index.set(t_.tagName,h),h++),i&&(this.nodes.set(h,i),this.index.set(tR.tagName,h),h++),n&&(this.nodes.set(h,n),this.index.set(tq.tagName,h),h++),a&&(this.nodes.set(h,a),this.index.set(tX.tagName,h),h++),o&&(this.nodes.set(h,o),this.index.set(tK.tagName,h)),d&&(this.nodes.set(h,d),this.index.set(tQ.tagName,h)),r&&(this.nodes.set(h,r),this.index.set(t3.tagName,h)),l&&(this.nodes.set(h,l),this.index.set(t5.tagName,h)),g&&(this.nodes.set(h,g),this.index.set(t0.tagName,h))}getID(){return this.attributes.get(se.s_id)}setID(e){this.attributes.set(se.s_id,e)}getDescription(){let e=this.attributes.get(se.s_description);return void 0!=e?e:this.getID()}setDescription(e){this.attributes.set(se.s_description,e)}getActive(){let e=this.attributes.get(se.s_active);if(void 0!=e)return"true"==e}setActive(e){this.attributes.set(se.s_active,e.toString())}getLabel(){let e=this.getID(),t=this.getDescription();return void 0!=t&&(e+=" ("+t+")"),this.getActive()&&(e+=" ("+se.s_active+")"),e}getAttributesAsString(){return Array.from(this.attributes,([e,t])=>`${e}="${t}"`).join(", ")}getPropertyList(){let e=this.index.get(tq.tagName);if(void 0!=e)return this.nodes.get(e)}setPropertyList(e){let t=this.index.get(tq.tagName);void 0==t?(this.index.set(tq.tagName,this.nodes.size),this.addNode(e)):this.nodes.set(t,e)}getProperty(e){let t=this.getPropertyList();if(void 0!=t)return t.getProperty(e)}setProperty(e){this.getPropertyList().setProperty(e)}getAtom(e){return this.getAtoms().getAtom(e)}getAtoms(){let e=this.index.get(t_.tagName);return this.nodes.get(e)}setAtoms(e){this.index.set(t_.tagName,this.nodes.size),this.nodes.set(this.nodes.size,e)}getBond(e){return this.getBonds().getBond(e)}getBonds(){let e=this.index.get(tR.tagName);return this.nodes.get(e)}setBonds(e){this.index.set(tR.tagName,this.nodes.size),this.nodes.set(this.nodes.size,e)}getEnergyTransferModel(){let e=this.index.get(tX.tagName);if(void 0!=e)return this.nodes.get(e)}setEnergyTransferModel(e){let t=this.index.get(tX.tagName);void 0==t?(this.index.set(tX.tagName,this.nodes.size),this.addNode(e)):this.nodes.set(t,e)}getDOSCMethod(){let e=this.index.get(tK.tagName);if(void 0!=e)return this.nodes.get(e)}setDOSCMethod(e){let t=this.index.get(tK.tagName);void 0==t?(this.index.set(tK.tagName,this.nodes.size),this.addNode(e)):this.nodes.set(t,e)}getDistributionCalcMethod(){let e=this.index.get(tQ.tagName);if(void 0!=e)return this.nodes.get(e)}setDistributionCalcMethod(e){let t=this.index.get(tQ.tagName);void 0==t?(this.index.set(tQ.tagName,this.nodes.size),this.addNode(e)):this.nodes.set(t,e)}getExtraDOSCMethod(){let e=this.index.get(t3.tagName);if(void 0!=e)return this.nodes.get(e)}setExtraDOSCMethod(e){let t=this.index.get(t3.tagName);void 0==t?(this.index.set(t3.tagName,this.nodes.size),this.addNode(e)):this.nodes.set(t,e)}getReservoirSize(){let e=this.index.get(t5.tagName);if(void 0!=e)return this.nodes.get(e)}setReservoirSize(e){let t=this.index.get(t5.tagName);void 0==t?(this.index.set(t5.tagName,this.nodes.size),this.addNode(e)):this.nodes.set(t,e)}getDensityOfStatesList(){let e=this.index.get(t7.tagName);if(void 0!=e)return this.nodes.get(e)}setDensityOfStatesList(e){let t=this.index.get(t7.tagName);void 0==t?(this.index.set(t7.tagName,this.nodes.size),this.addNode(e)):this.nodes.set(t,e)}getThermoTable(){let e=this.index.get(t0.tagName);if(void 0!=e)return this.nodes.get(e)}setThermoTable(e){let t=this.index.get(t0.tagName);void 0==t?(this.index.set(t0.tagName,this.nodes.size),this.addNode(e)):this.nodes.set(t,e)}getEnergy(){let e=this.getProperty(tD.dictRef);if(void 0==e)throw console.log(this.toString()),Error(tD.dictRef+" property not found!");return e.getProperty().value}}class st extends U{static{this.tagName="molecule"}constructor(e){super(e,st.tagName),this.ref=e.get("ref"),this.role=e.get("role")}setRole(e){this.role=e}}class ss extends j{static{this.tagName="reactant"}static{this.roleOptions=["deficientReactant","excessReactant","modelled"]}constructor(e,t){super(e,ss.tagName),this.addNode(t)}getMolecule(){return this.nodes.get(0)}}class si extends j{static{this.tagName="product"}static{this.roleOptions=["modelled","sink"]}constructor(e,t){super(e,si.tagName),this.addNode(t)}getMolecule(){return this.nodes.get(0)}}class sn extends j{static{this.tagName="me:transitionState"}constructor(e,t){super(e,sn.tagName),this.addNode(t)}getMolecule(){return this.nodes.get(0)}}class sa extends q{static{this.tagName="me:preExponential"}constructor(e,t){super(e,sa.tagName,t)}}class so extends q{static{this.tagName="me:activationEnergy"}constructor(e,t){super(e,so.tagName,t)}}class sd extends q{static{this.tagName="me:TInfinity"}constructor(e,t){super(e,sd.tagName,t)}}class sr extends q{static{this.tagName="me:nInfinity"}constructor(e,t){super(e,sr.tagName,t)}}class sl extends j{static{this.tagName="me:MCRCMethod"}constructor(e){super(e,sl.tagName)}}class sg extends sl{static{this.xsiType="me:MesmerILT"}static{this.xsiType2="MesmerILT"}constructor(e,t,s,i,n){super(e),this.index=new Map,void 0!=t&&(this.index.set(sa.tagName,this.index.size),this.addNode(t)),void 0!=s&&(this.index.set(so.tagName,this.index.size),this.addNode(s)),void 0!=i&&(this.index.set(sd.tagName,this.index.size),this.addNode(i)),void 0!=n&&(this.index.set(sr.tagName,this.index.size),this.addNode(n))}getPreExponential(){let e=this.index.get(sa.tagName);if(void 0!=e)return this.nodes.get(e)}setPreExponential(e){let t=this.index.get(sa.tagName);void 0==t?(this.index.set(sa.tagName,this.nodes.size),this.addNode(e)):this.nodes.set(t,e)}getActivationEnergy(){let e=this.index.get(so.tagName);if(void 0!=e)return this.nodes.get(e)}setActivationEnergy(e){let t=this.index.get(so.tagName);void 0==t?(this.index.set(so.tagName,this.nodes.size),this.addNode(e)):this.nodes.set(t,e)}getTInfinity(){let e=this.index.get(sd.tagName);if(void 0!=e)return this.nodes.get(e)}setTInfinity(e){let t=this.index.get(sd.tagName);void 0==t?(this.index.set(sd.tagName,this.nodes.size),this.addNode(e)):this.nodes.set(t,e)}getNInfinity(){let e=this.index.get(sr.tagName);if(void 0!=e)return this.nodes.get(e)}setNInfinity(e){let t=this.index.get(sr.tagName);void 0==t?(this.index.set(sr.tagName,this.nodes.size),this.addNode(e)):this.nodes.set(t,e)}}class sh extends U{static{this.tagName="me:tunneling"}static{this.options=["Eckart","WKB"]}static{this.s_name="name"}constructor(e){super(e,sh.tagName)}getName(){return this.attributes.get(sh.s_name)}setName(e){this.attributes.set(sh.s_name,e)}}class sm extends q{static{this.tagName="me:excessReactantConc"}constructor(e,t){super(e,sm.tagName,t)}}class sc extends q{static{this.tagName="me:val"}constructor(e,t){super(e,sc.tagName,t)}}class su extends q{static{this.tagName="me:rev"}constructor(e,t){super(e,su.tagName,t)}}class sN extends q{static{this.tagName="me:Keq"}constructor(e,t){super(e,sN.tagName,t)}}class sp extends j{static{this.tagName="me:kinf"}constructor(e,t,s,i,n){super(e,sp.tagName),this.index=new Map,void 0!=t&&(this.index.set(tT.tagName,this.nodes.size),this.addNode(t)),void 0!=s&&(this.index.set(sc.tagName,this.nodes.size),this.addNode(s)),void 0!=i&&(this.index.set(su.tagName,this.nodes.size),this.addNode(i)),void 0!=n&&(this.index.set(sN.tagName,this.nodes.size),this.addNode(n))}getT(){let e=this.index.get(tT.tagName);if(void 0!=e)return this.nodes.get(e)}setT(e){let t=this.index.get(tT.tagName);void 0==t?(this.index.set(tT.tagName,this.nodes.size),this.addNode(e)):this.nodes.set(t,e)}getVal(){let e=this.index.get(sc.tagName);if(void 0!=e)return this.nodes.get(e)}setVal(e){let t=this.index.get(sc.tagName);void 0==t?(this.index.set(sc.tagName,this.nodes.size),this.addNode(e)):this.nodes.set(t,e)}getRev(){let e=this.index.get(su.tagName);if(void 0!=e)return this.nodes.get(e)}setRev(e){let t=this.index.get(su.tagName);void 0==t?(this.index.set(su.tagName,this.nodes.size),this.addNode(e)):this.nodes.set(t,e)}getKeq(){let e=this.index.get(sN.tagName);if(void 0!=e)return this.nodes.get(e)}setKeq(e){let t=this.index.get(sN.tagName);void 0==t?(this.index.set(sN.tagName,this.nodes.size),this.addNode(e)):this.nodes.set(t,e)}getHeader(){let e=[];return e.push("T ("+this.getT()?.attributes.get("units")+")"),e.push("kf ("+this.getVal()?.attributes.get("units")+")"),e.push("krev ("+this.getRev()?.attributes.get("units")+")"),e.push("Keq ("+this.getKeq()?.attributes.get("units")+")"),e}toStringArray(){let e=this.getT(),t=this.getVal(),s=this.getRev(),i=this.getKeq();return[e.getValue().toString(),t.getValue().toString(),s.getValue().toString(),i.getValue().toString()]}toCSV(){return this.toStringArray().join(",")}}class sx extends j{static{this.tagName="me:canonicalRateList"}constructor(e,t,s){super(e,sx.tagName),this.index=new Map,this.kinfIndex=new Map,void 0!=t&&(this.index.set(tS.tagName,this.nodes.size),this.addNode(t)),void 0!=s&&s.forEach(e=>{this.kinfIndex.set(this.nodes.size,this.nodes.size),this.addNode(e)})}getDescription(){let e=this.index.get(tS.tagName);if(void 0!=e)return this.nodes.get(e)}setDescription(e){let t=this.index.get(tS.tagName);void 0==t?(this.index.set(tS.tagName,this.nodes.size),this.addNode(e)):this.nodes.set(t,e)}getKinfs(){return Array.from(this.kinfIndex.values()).map(e=>this.nodes.get(e))}addKinf(e){this.kinfIndex.set(this.kinfIndex.size,this.nodes.size),this.addNode(e)}toCSV(){let e="",t=!0;return this.getKinfs().forEach(s=>{t&&(t=!1,e+=s.getHeader().join(",")+"\n"),e+=s.toCSV()+"\n"}),e}}class sf extends j{static{this.tagName="reaction"}static{this.s_id="id"}constructor(e,t,s,i,n,a,o,d){super(e,sf.tagName),this.index=new Map,this.reactantsIndex=new Map,this.productsIndex=new Map,this.transitionStatesIndex=new Map;let r=e.get(sf.s_id);if(void 0==r)throw Error(sf.s_id+" is undefined!");this.id=r,void 0!=t&&(t.forEach(e=>{this.reactantsIndex.set(e.getMolecule().ref,this.nodes.size),this.addNode(e)}),this.index.set(ss.tagName,this.reactantsIndex)),void 0!=s&&(s.forEach(e=>{this.productsIndex.set(e.getMolecule().ref,this.nodes.size),this.addNode(e)}),this.index.set(si.tagName,this.productsIndex)),void 0!=i&&(this.index.set(sh.tagName,this.nodes.size),this.addNode(i)),void 0!=n&&(n.forEach(e=>{this.transitionStatesIndex.set(e.getMolecule().ref,this.nodes.size),this.addNode(e)}),this.index.set(sn.tagName,this.transitionStatesIndex)),void 0!=a&&(this.index.set(sl.tagName,this.nodes.size),this.addNode(a)),void 0!=o&&(this.index.set(sm.tagName,this.nodes.size),this.addNode(o)),void 0!=d&&(this.index.set(sx.tagName,this.nodes.size),this.addNode(d))}addToIndex(e,t){let s=this.index.get(e);if(void 0==s)this.index.set(e,this.nodes.size);else if(s instanceof Map)s.set(t.tagName,this.nodes.size);else{let i=new Map;i.set(this.nodes.get(s).ref,s),i.set(t.tagName,this.nodes.size),this.index.set(e,i)}}getReactants(){let e=this.index.get(ss.tagName);return void 0==e?[]:e instanceof Map?Array.from(e.values()).map(e=>this.nodes.get(e)):[this.nodes.get(e)]}setReactants(e){e.forEach(e=>{this.reactantsIndex.set(e.getMolecule().ref,this.nodes.size),this.addNode(e)}),this.index.set(ss.tagName,this.reactantsIndex)}getReactant(e){let t=this.reactantsIndex.get(e);if(void 0==t)throw Error(`Reactant with ref ${e} not found`);return this.nodes.get(t)}addReactant(e){this.reactantsIndex.set(e.getMolecule().ref,this.nodes.size),this.addNode(e)}removeReactant(e){let t=this.reactantsIndex.get(e);if(void 0==t)throw Error(`Reactant with ref ${e} not found`);this.nodes.delete(t),this.reactantsIndex.delete(e)}getProducts(){let e=this.index.get(si.tagName);return void 0==e?[]:e instanceof Map?Array.from(e.values()).map(e=>this.nodes.get(e)):[this.nodes.get(e)]}setProducts(e){e.forEach(e=>{this.productsIndex.set(e.getMolecule().ref,this.nodes.size),this.addNode(e)}),this.index.set(si.tagName,this.productsIndex)}getProduct(e){let t=this.productsIndex.get(e);if(void 0==t)throw Error(`Product with ref ${e} not found`);return this.nodes.get(t)}addProduct(e){this.productsIndex.set(e.getMolecule().ref,this.nodes.size),this.addNode(e)}removeProduct(e){let t=this.productsIndex.get(e);if(void 0==t)throw Error(`Product with ref ${e} not found`);this.nodes.delete(t),this.productsIndex.delete(e)}getTunneling(){let e=this.index.get(sh.tagName);if(void 0!=e)return this.nodes.get(e)}setTunneling(e){let t=this.index.get(sh.tagName);if(void 0==t)this.index.set(sh.tagName,this.nodes.size),this.addNode(e);else{if(t instanceof Map)throw Error("Tunneling is a map and it is assumed there would be only 1!");this.nodes.set(t,e)}}getTransitionStates(){let e=this.index.get(sn.tagName);return void 0==e?[]:e instanceof Map?Array.from(e.values()).map(e=>this.nodes.get(e)):[this.nodes.get(e)]}setTransitionStates(e){e.forEach(e=>{this.transitionStatesIndex.set(e.getMolecule().ref,this.nodes.size),this.addNode(e)}),this.index.set(sn.tagName,this.transitionStatesIndex)}getTransitionState(e){let t=this.transitionStatesIndex.get(e);if(void 0==t)throw Error(`Transition state with ref ${e} not found`);return this.nodes.get(t)}addTransitionState(e){this.transitionStatesIndex.set(e.getMolecule().ref,this.nodes.size),this.addNode(e)}removeTransitionState(e){let t=this.transitionStatesIndex.get(e);if(void 0==t)throw Error(`Transition State with ref ${e} not found`);this.nodes.delete(t),this.transitionStatesIndex.delete(e)}getMCRCMethod(){let e=this.index.get(sl.tagName);if(void 0!=e)return this.nodes.get(e)}setMCRCMethod(e){let t=this.index.get(sl.tagName);if(void 0==t)this.index.set(sl.tagName,this.nodes.size),this.addNode(e);else{if(t instanceof Map)throw Error("MCRCMethod is a map and it is assumed there would be only 1!");this.nodes.set(t,e)}}getExcessReactantConc(){let e=this.index.get(sm.tagName);if(void 0!=e)return this.nodes.get(e)}setExcessReactantConc(e){let t=this.index.get(sm.tagName);if(void 0==t)this.index.set(sm.tagName,this.nodes.size),this.addNode(e);else{if(t instanceof Map)throw Error("ExcessReactantConc is a map and it is assumed there would be only 1!");this.nodes.set(t,e)}}getCanonicalRateList(){let e=this.index.get(sx.tagName);if(void 0!=e)return this.nodes.get(e)}setCanonicalRateList(e){let t=this.index.get(sx.tagName);if(void 0==t)this.index.set(sx.tagName,this.nodes.size),this.addNode(e);else{if(t instanceof Map)throw Error("CanonicalRateList is a map and it is assumed there would be only 1!");this.nodes.set(t,e)}}getReactantsLabel(){return this.getReactants().map(e=>e.getMolecule().ref).join(" + ")}getProductsLabel(){return this.getProducts().map(e=>e.getMolecule().ref).join(" + ")}getLabel(){return this.getReactantsLabel()+" -> "+this.getProductsLabel()}getReactantsEnergy(e){return Array.from(this.getReactants()).map(t=>{let s=e.get(t.getMolecule().ref);if(void 0==s)throw Error(`Molecule with ref ${t.getMolecule().ref} not found`);return s.getEnergy()}).reduce((e,t)=>e.add(t),new(o(d))(0))}getProductsEnergy(e){return Array.from(this.getProducts()).map(t=>{let s=e.get(t.getMolecule().ref);if(void 0==s)throw Error(`Molecule with ref ${t.getMolecule().ref} not found`);return s.getEnergy()}).reduce((e,t)=>e.add(t),new(o(d))(0))}get(e,t){if(this.index.has(e)){let s=this.index.get(e);if(void 0!=s){if(!(s instanceof Map))return this.nodes.get(s);{let e=s.get(t);if(void 0!=e)return this.nodes.get(e)}}}}}function sv(e,t,s,i,n,a,o,d,r,l,g){let h=i+(a-i)/2;sw(e,g,d,t,h-sy(e,g,d)/2,o+r),sw(e,l,d,t,h-sy(e,l,d)/2,o+3*r),sE(e,t,s,i,n,a,o)}function sE(e,t,s,i,n,a,o){e.beginPath(),e.strokeStyle=t,e.lineWidth=s,e.moveTo(i,n),e.lineTo(a,o),e.stroke()}function sw(e,t,s,i,n,a){e.save(),e.translate(n,a),e.scale(1,-1),e.font=s,e.fillStyle=i,e.fillText(t,0,0),e.restore()}function sy(e,t,s){return e.font=s,e.measureText(t).width}var sC={};class sb{static{this.tagName="me:defaults"}constructor(){let e="data/defaults.xml";(0,sC.existsSync)(e)?console.log("File exists"):console.log("File does not exist");let t=new File([e],e,{type:"text/xml"}),s=new FileReader,i=0,n="";s.onload=function(e){if(null==e.target)throw Error("Event target is null");if(n+=e.target.result,null!=t){if(i<t.size){let e=t.slice(i,i+1048576);s.readAsText(e),i+=1048576}else{n=n.trim();let e=new DOMParser().parseFromString(n,"text/xml");console.log("xml "+n),console.log(g($(X(e,sb.tagName))))}}};let a=t.slice(i,i+1048576);s.readAsText(a),i+=1048576}}let sS="https://github.com/agdturner/mxg-pwa",sT=document.createElement("a");sT.href=sS,sT.textContent=sS;let sM="https://github.com/agdturner/mxg-pwa/tree/main/data/examples",s_=document.createElement("a");s_.href=sM,s_.textContent=sM;let sz="https://sourceforge.net/projects/mesmer/",sR=document.createElement("a");sR.href=sz,sR.textContent=sz;let sP=document.createElement("a");sP.href="https://epsrc.ukri.org/",sP.textContent="The UK Engineering and Physical Sciences Research Council (EPSRC)";let sL=document.createElement("a");sL.href="https://www.leeds.ac.uk/",sL.textContent="The University of Leeds";let sI="https://github.com/3dmol/3Dmol.js",sB=document.createElement("a");sB.href=sI,sB.textContent=sI;let sD=document.createElement("a");sD.href="http://doi.org/10.1093/bioinformatics/btu829",sD.textContent="doi:10.1093/bioinformatics/btu829";let sA="https://mikemcl.github.io/big.js/",sk=document.createElement("a");sk.href=sA,sk.textContent=sA,o(d).PE=7;let sG={marginLeft:"0px",marginTop:"1px",marginBottom:"1px",marginRight:"0px"},sO={marginLeft:"25px",marginTop:"1px",marginBottom:"1px",marginRight:"0px"},sF={marginLeft:"1px",marginTop:"1px",marginBottom:"1px",marginRight:"1px"};const sU=" ✓",sV=" ✗",sq="Add ＋",sH="s_container",sj="description",sY="Input",s$="optionOn",sX="optionOff",sK="save",sW="Select",sZ="Select an option (use keys to cycle through options)...",sQ="table",sJ=new(o(d))(0);let s0=new Set;function s1(...e){let t=l(...e);if(s0.has(t))throw Error(t+" already exists!");return s0.add(t),t}const s2="Reactions Diagram",s3=l(s2),s5=l(s3,"Canvas");let s4="1em SensSerif",s6="2em SensSerif";function s8(){null==a?i5(document.getElementById(s5),e,s4,4,2):i5(a.document.getElementById(s5),e,s4,4,2)}function s9(e,t,i,n){let a="✎ Edit id",o=l(i.id,a,x),d=R(a,o,n);i.appendChild(d),d.addEventListener("click",()=>{let n=prompt("Please enter a name for the molecule:",e.getID());if(null!=n){let a=l(n);ia(ea.tagName,a),ii(ea.tagName,e.getID()),s.set(a,e),s.delete(e.getID()),e.setID(a),i.id=a,t.textContent=n+" ▲"}})}function s7(e,t,s,i,n){let a=L(void 0,n),o=sj+sU,d=sj+sV,r=R(d,l(e,x),i);a.appendChild(r),r.classList.add(s$),r.classList.add(sX);let g=l(e,sj,sY),h=t();return void 0==h?(r.textContent=d,r.classList.toggle(s$)):(ie(a,g,h,s,i),r.textContent=o,r.classList.toggle(sX)),r.addEventListener("click",e=>{null==document.getElementById(g)?(ie(a,g,h,s,i),r.textContent=o):(document.getElementById(g)?.remove(),console.log("Removed "+g),r.textContent=d),r.classList.toggle(s$),r.classList.toggle(sX)}),a}function ie(e,t,s,i,n){let a;a=void 0==s?"":s;let o=y("text",t,n);o.addEventListener("change",e=>{let n=e.target;i(n.value),console.log(t+" changed from "+s+" to "+n.value),S(n)}),o.value=a,S(o),e.appendChild(o)}function it(e,t,s,i,n){let a=R(sq,l(e.getID(),"Add"+s+"Button"),n);return a.addEventListener("click",()=>{let s=new tM(new Map,e),o=e.getAtoms().addAtom(s),d=L(l(e.getID(),o),n);d.appendChild(I(o,i)),il(s,d,!0,i),ig(s,d,i,i),iu(d,i,is,e,o),t.insertBefore(d,a),ia(tz.s_atomRefs2,o)}),a}function is(e,t){e.getAtoms().removeAtom(t),e.getBonds().bonds.forEach(s=>{let i=s.getAtomRefs2().split(" ");if(i[0]==t||i[1]==t){let i=s.getId();e.getBonds().removeBond(i);let n=document.getElementsByClassName(t);for(let e=0;e<n.length;e++)n[e].remove()}}),ii(tz.s_atomRefs2,t)}function ii(e,t){let s=document.getElementsByClassName(e);for(let e=0;e<s.length;e++)s[e]instanceof HTMLSelectElement&&Array.from(s[e].options).forEach(e=>{e.value==t&&e.remove()})}function ia(e,t){let s=document.getElementsByClassName(e);for(let e=0;e<s.length;e++){let i=s[e];if(s[e]instanceof HTMLSelectElement){let e=document.createElement("option");e.value=t,e.text=t,i.add(e)}}}function io(e,t,s,i,n,a){let o=R(sq,l(t,"Add"+i+"Button"),a);return o.addEventListener("click",()=>{let i=e.getAtoms().atoms;if(i.size<2){alert("There must be at least 2 atoms to create a bond.");return}let d=new Map,r=Array.from(i.keys()).slice(0,2).join(" ");d.set(tz.s_atomRefs2,r);let g=new tz(d,e),h=e.getBonds().addBond(g),m=L(l(t,h),a);Array.from(i.keys()).forEach(e=>{m.classList.add(e)}),s.insertBefore(m,o),m.appendChild(I(h,n)),id(e,m,g,n),iN(m,g,n),iu(m,n,t=>e.getBonds().removeBond(t),h),ia(tz.tagName,h)}),s.appendChild(o),o}function id(e,t,s,i){let n=l(t.id,tz.s_atomRefs2),a=s.getAtomRefs2().split(" "),o=Array.from(e.getAtoms().atoms.keys()),d=z(tz.s_atomRefs2+"[0]",o,tM.tagName,a[0],l(n,0),i,i),r=d.querySelector("select");r.classList.add(tz.s_atomRefs2),r.addEventListener("change",e=>{let t=e.target,i=t.value+" "+a[1];console.log(tz.s_atomRefs2+" changed to "+i),s.setAtomRefs2(i),T(t)}),r.value=a[0],T(r),t.appendChild(d);let g=z(tz.s_atomRefs2+"[1]",o,tM.tagName,a[1],l(n,1),i,i),h=g.querySelector("select");h.classList.add(tz.s_atomRefs2),h.addEventListener("change",e=>{let t=e.target,i=a[0]+" "+t.value;console.log(tz.s_atomRefs2+" changed to "+i),s.setAtomRefs2(i),T(t)}),h.value=a[1],T(h),t.appendChild(g)}function ir(e,t,s,i,n,a){let o=new tB($(t));return o.dictRef==tD.dictRef?iv(e,o,tb.energyUnits,i,t,s,n,a):o.dictRef==tF.dictRef?iv(e,o,tb.frequencyUnits,i,t,s,n,a):(o.dictRef,tO.dictRef,iv(e,o,void 0,i,t,s,n,a)),o}function il(e,t,s,i){let n=e.getElementType(),a=tb.elementTypes;void 0==n&&(n=sZ,function(e,t){if(t)e.push(sZ);else{let t=e.indexOf(sZ);t>-1&&e.splice(t,1)}}(a,s));let o=z(tM.s_elementType,a,tM.s_elementType,n,l(t.id,tM.s_elementType),i,i),d=o.querySelector("select");return d.addEventListener("change",t=>{let s=t.target;e.setElementType(s.value),T(s)}),d.value=n,T(d),i1(a,d),t.appendChild(o),o}function ig(e,t,s,i){t.appendChild(ih(l(t.id,tM.s_x3),tM.s_x3,e.getX3.bind(e),e.setX3.bind(e),e.removeX3,s,i)),t.appendChild(ih(l(t.id,tM.s_y3),tM.s_y3,e.getY3.bind(e),e.setY3.bind(e),e.removeY3,s,i)),t.appendChild(ih(l(t.id,tM.s_z3),tM.s_z3,e.getZ3.bind(e),e.setZ3.bind(e),e.removeZ3,s,i))}function ih(e,t,s,i,n,a,o){let d=L(void 0,o),r=t+sU,g=t+sV,h=R(g,l(e,x),a);d.appendChild(h),h.classList.add(s$),h.classList.add(sX);let m=l(e,t,sY),c=s();return void 0==c?(h.textContent=g,h.classList.toggle(s$)):(im(d,m,t,c,i,a),h.textContent=r,h.classList.toggle(sX)),h.addEventListener("click",e=>{null==document.getElementById(m)?(im(d,m,t,c,i,a),h.textContent=r):(document.getElementById(m)?.remove(),n(),console.log("Removed "+m),h.textContent=g),h.classList.toggle(s$),h.classList.toggle(sX)}),d}function im(e,t,s,i,n,a){let r;r=void 0==i?"":i.toString();let l=y("number",t,a);l.addEventListener("change",e=>{let t=e.target;try{n(new(o(d))(t.value)),console.log(s+" changed from "+i+" to "+t.value)}catch(e){alert("Input invalid, resetting..."),t.value=r}S(t)}),l.value=r,S(l),e.appendChild(l)}function ic(e,t,s,i,n,a,o,d){let r;r=void 0==i?"":u(i);let l=C(t,d);l.addEventListener("change",e=>{let t=e.target;iw(n,l),M(t)}),l.value=r,M(l),e.appendChild(l)}function iu(e,t,s,...i){let n=R("Remove ✕",void 0,t);return e.appendChild(n),n.addEventListener("click",()=>{s(...i),e.remove()}),n}function iN(e,t,s){let i=l(e.id,tz.s_order),n=L(void 0,s);e.appendChild(n);let a=tz.s_order+sU,o=tz.s_order+sV,d=R(o,void 0,s);n.appendChild(d),d.classList.add(s$),d.classList.add(sX);let r=t.getOrder();void 0==r?(d.textContent=o,d.classList.toggle(s$)):(ip(n,t,i,r,s),d.textContent=a,d.classList.toggle(sX)),d.addEventListener("click",e=>{null==document.getElementById(i)?(void 0==r&&(r=1),ip(n,t,i,r,s),d.textContent=a):(document.getElementById(i)?.remove(),console.log("Removed "+i),d.textContent=o),d.classList.toggle(s$),d.classList.toggle(sX)})}function ip(e,t,s,i,n){let a=i.toString(),o=_(tz.orderOptions,tz.s_order,a,s,n);o.addEventListener("change",e=>{let s=e.target;t.setOrder(parseFloat(s.value)),console.log(tz.s_order+" changed from "+a+" to "+s.value),T(s)}),o.value=a,T(o),o.id=s,e.appendChild(o)}function ix(e,s,i,n){let a;let o=P(l(e.getID(),"viewerContainer"),n);s.appendChild(o);let d=l(e.getID(),"viewer"),r=!1,g=!1;function h(t,s){let n=P(d,i);n.className="mol-container",o.appendChild(n);let a=$3Dmol.createViewer(n,{backgroundColor:"grey"});return a.setStyle({stick:{}}),e.getAtoms().atoms.forEach(function(e){let s,i,n=e.getElementType();s=void 0==n?"Purple":tb.atomColors.get(n)||"Purple",i=void 0==n?100:tb.atomRadii.get(e.getElementType())||100;let o=e.getX3()?.toNumber()||0,d=e.getY3()?.toNumber()||0,r=e.getZ3()?.toNumber()||0;a.addSphere({center:{x:o,y:d,z:r},radius:i/110,color:s}),t&&a.addLabel(e.getId(),{position:{x:o,y:d,z:r}})}),console.log("molecule.getBonds().bonds.size "+e.getBonds().bonds.size),e.getBonds().bonds.forEach(function(t){console.log("bond.atomRefs2 "+t.getAtomRefs2());let i=t.getAtomRefs2().split(" "),n=e.getAtoms(),o=n.getAtom(i[0]),d=n.getAtom(i[1]),r=t.getOrder()||1,l=tb.bondColors.get(r)||"Purple",g=o.getX3()?.toNumber()||0,h=o.getY3()?.toNumber()||0,m=o.getZ3()?.toNumber()||0,c=d.getX3()?.toNumber()||0,u=d.getY3()?.toNumber()||0,N=d.getZ3()?.toNumber()||0;a.addCylinder({start:{x:g,y:h,z:m},end:{x:c,y:u,z:N},radius:.06*r,color:l}),s&&a.addLabel(t.getId(),{position:{x:(g+c)/2,y:(h+u)/2,z:(m+N)/2}})}),a.zoomTo(),a.render(),a.zoom(.8,2e3),a}let m=R("Draw/Redraw",void 0);function c(e,t,s,n){let o=R((s?"Hide ":"Show ")+e,t,i);return o.addEventListener("click",()=>{s?(o.textContent="Show "+e,s=!1):(o.textContent="Hide "+e,s=!0),n(s),f(d,s0),a=h(r,g)}),o}m.addEventListener("click",()=>{f(d,s0),a=h(r,g)}),o.appendChild(m);let u="Atom Labels",N=c(u,l(e.getID(),u),r,e=>r=e);o.appendChild(N);let p="Bond Labels",x=c(p,l(e.getID(),p),g,e=>g=e);o.appendChild(x);let v=R("Save as PNG",l(e.getID(),sK),sF);v.addEventListener("click",()=>{let e=a.pngURI(),s=document.createElement("a");s.href=e;let i=t.getTitle()?.value;s.download=i.replace(/[^a-z0-9]/gi,"_")+"mol.png",document.body.appendChild(s),s.click(),document.body.removeChild(s),console.log("Save Image")}),o.appendChild(v)}function iv(e,t,s,i,n,a,r,g){let h=n.getElementsByTagName(tP.tagName);if(h.length>0){if(1!=h.length)throw Error("Expecting 1 "+tP.tagName+" but finding "+h.length+"!");let i=O(h[0]),n=new(o(d))(i),g=$(h[0]),m=new tP(g,n);t.setProperty(m),m.setValue=(function(e){m.value=e,t.dictRef==tD.dictRef&&s8()}).bind(m);let c=ih(l(a.id,t.dictRef),t.dictRef,m.getValue.bind(m),m.setValue,()=>e.removeProperty(t.dictRef),sF,sO);iE(s,g,c,l(a.id,t.dictRef,tP.s_units),t.dictRef,r,r),a.appendChild(c)}else{var c,u,N,p,f,v,E,w;let o=n.getElementsByTagName(tL.tagName);if(o.length>0){if(1!=o.length)throw Error("Expecting 1 "+tL.tagName+" but finding "+o.length+"!");let i=O(o[0]);if(""!=i){let n,d,g,h,v,E,w=m(i.split(/\s+/)),y=$(o[0]),C=new tL(y,w);t.setProperty(C);let b=(c=l(a.id,t.dictRef),u=t.dictRef,N=C.getValues.bind(C),p=C.setValues,f=()=>e.removeProperty(t.dictRef),n=L(void 0,sO),d=u+sU,h=R(g=u+sV,l(c,x),sF),n.appendChild(h),h.classList.add(s$),h.classList.add(sX),v=l(c,u,sY),void 0==(E=N())?(h.textContent=g,h.classList.toggle(s$)):(ic(n,v,u,E,C,N,p,sF),h.textContent=d,h.classList.toggle(sX)),h.addEventListener("click",e=>{null==document.getElementById(v)?(ic(n,v,u,E,C,N,p,sF),h.textContent=d):(document.getElementById(v)?.remove(),f(),console.log("Removed "+v),h.textContent=g),h.classList.toggle(s$),h.classList.toggle(sX)}),n);iE(s,y,b,l(a.id,t.dictRef,tP.s_units),t.dictRef,r,r),a.appendChild(b)}}else{let e=n.getElementsByTagName(tI.tagName);if(e.length>0){let n,o,d;if(1!=e.length)throw Error("Expecting 1 "+tI.tagName+" but finding "+e.length+"!");let h=O(e[0]),c=m(h.split(/\s+/)),u=$(e[0]),N=new tI(u,c);t.setProperty(N);let p=t.dictRef,x=(v=l(a.id,t.dictRef),E=e=>{let t=e.target;iw(N,t)},w=h,n=L(void 0,g),(d=C(v,r)).onchange=E,d.value=w,M(d),(o=I(p,r)).htmlFor=v,n.appendChild(o),n.appendChild(d),n),f=x.querySelector("textarea");f.value=h,M(f),f.addEventListener("change",e=>{h=e.target.value,N=t.getProperty(),c=m(h.split(/\s+/)),N.values=c,console.log("Set "+t.dictRef+" of "+i.getID()+" to "+h),M(f)}),iE(s,u,x,l(a.id,t.dictRef,sW,"Units"),t.dictRef,r,r),a.appendChild(x)}else throw Error("Expecting "+tP.tagName+", "+tL.tagName+" or "+tI.tagName+" but finding none!")}}}function iE(e,t,s,i,n,a,o){if(void 0!=e){let d=function(e,t,s,i,n,a){let o=t.get("units");if(void 0!=o){let d=z("units",e,"units",o,s,n,a),r=d.querySelector("select");return r.value=o,T(r),r.addEventListener("change",e=>{let s=e.target;t.set("units",s.value),console.log("Set "+i+" units to "+s.value),T(s)}),d}}(e,t,i,n,a,o);void 0!=d&&s.appendChild(d)}else{let e=t.get("units");if(void 0!=e){let t=I("units "+e,o);s.appendChild(t)}}}function iw(e,t){let s=t.value.trim(),i=h(e.values," ");if(""==s){alert("Empty input resetting..."),t.value=i;return}let n=s.split(/\s+/),a=[],r=!0;if(n.forEach(function(e){c(e)?a.push(new(o(d))(e)):r=!1}),!r){alert("An input is not a number, resetting..."),t.value=i;return}a.length==e.values.length?(e.setValues(a),console.log("Changed "+e.tagName+' from: "'+i+'" to: "'+h(e.values," ")+'"')):(alert("Expecting "+e.values.length+" values for, but finding "+a.length+" resetting..."),t.value=i)}function iy(e,t){try{let s=new(o(d))(t.value);e.setValue(s)}catch(e){alert("Value invalid, resetting...")}t.value=e.value.toString()}function iC(e,t,i,n){let a=l(em.tagName,i.toString(),ea.tagName),o=P(a);v(l(a,sH),t,null,o,ea.tagName,sF,sO);let d=R(sq,void 0,sO);if(o.appendChild(d),d.addEventListener("click",()=>{let t=new ea(new Map,sZ),i=e.addBathGas(t),n=L(void 0,sO),r=l(a,i.toString()),g=iB(Array.from(new Set(s.keys())),t,!0,r);g.classList.add(ea.tagName),n.appendChild(g),iu(n,sF,t=>{o.removeChild(n),e.removeBathGas(t)}),o.insertBefore(n,d)}),null!=n){let t=Array.from(n.children).filter(e=>e.tagName===ea.tagName);if(t.length>0)for(let i=0;i<t.length;i++){let n=new ea($(t[i]),G(k(t[i])));console.log("bathGas"+n.toString());let r=l(a,e.addBathGas(n).toString()),g=L(r,sO);g.appendChild(iB(Array.from(new Set(s.keys())),n,!1,r)),iu(g,sF,t=>{o.removeChild(g),e.removeBathGas(t)}),o.insertBefore(g,d)}else{let t=l(a,"0"),i=L(l(a,0),sO);i.appendChild(iB(Array.from(new Set(s.keys())),void 0,!1,t)),iu(i,sF,t=>{o.removeChild(i),e.removeBathGas(t)}),o.insertBefore(i,d)}}}function ib(e,t,i,n){let a,r=new Set(s.keys()),h=l(t.id,i.toString(),eh.tagName),m=P(h);if(v(l(h,sH),t,null,m,eh.tagName,sF,sO),n){let e=n.getElementsByTagName(eh.tagName);if(e.length>0){if(e.length>1)throw Error("Expecting 1 "+eh.tagName+" but finding "+e.length+"!");let s=$(e[0]),n=e[0].getElementsByTagName(eg.tagName);if(0==n.length)throw Error("Expecting 1 or more "+eg.tagName+" but finding 0!");a=new eh(s);for(let e=0;e<n.length;e++){let s=$(n[e]);console.log("pTpairAttributes="+g(s));let l=new eg(s);a.add(l);let h=n[e].getElementsByTagName(ea.tagName);h.length>0&&(h.length>1&&console.warn("xml_bathGass.length="+h.length),l.setBathGas(new ea($(h[0]),G(k(h[0])))));let c=n[e].getElementsByTagName(eo.tagName);c.length>0&&(c.length>1&&console.warn("xml_experimentRates.length="+c.length),l.setExperimentalRate(new eo($(c[0]),new(o(d))(G(k(c[0])).trim()))));let u=n[e].getElementsByTagName(ed.tagName);u.length>0&&(u.length>1&&console.warn("xml_experimentalYields.length="+u.length),l.setExperimentalYield(new ed($(u[0]),new(o(d))(G(k(u[0])).trim()))));let N=n[e].getElementsByTagName(er.tagName);N.length>0&&(N.length>1&&console.warn("xml_experimentalEigenvalues.length="+N.length),l.setExperimentalEigenvalue(new er($(N[0]),new(o(d))(G(k(N[0])).trim())))),m.append(iT(a,m,l,t.id,i,e,r,sO))}}else a=new eh(new Map)}else a=new eh(new Map);e.setPTs(a);let c=P(void 0,sO);m.appendChild(c);let u=R(sq,void 0,sF);c.appendChild(u),u.addEventListener("click",()=>{let e=new Map;e.set("units","Torr");let s=new eg(e),n=a.add(s);console.log("Added new pTpair pTpairIndex="+n),m.insertBefore(iT(a,m,s,t.id,i,n,r,sO),c)});let N=R("Add from spreadsheet ＋",void 0,sF);c.appendChild(N),N.addEventListener("click",()=>{let e=L(void 0,sO),s=y("text",l(eh.tagName,"addFromSpreadsheet"),sO);e.appendChild(s),m.insertBefore(e,c),s.addEventListener("change",()=>{if(console.log("inputElement.value="+s.value),console.log("inputElement.value.length="+s.value.length),s.value.length>0){let n=s.value.split(" "),l=new Map;n[0].split("	").forEach((e,t)=>{l.set(e,t)}),console.log("pTpairsArray.length="+n.length);for(let e=1;e<n.length;e++){let s=n[e].split("	"),g=l.get("P"),h=new(o(d))(s[g]),u=l.get("units"),N=new Map;if(l.has("units")){let e=s[u];N.set("units",e)}let p=new eg(N);a.add(p);let x=l.get("T"),f=new(o(d))(s[x]);if(p.setP(h),p.setT(f),l.has(eg.s_excessReactantConc)){let e=s[l.get(eg.s_excessReactantConc)];N.set(eg.s_excessReactantConc,e)}if(l.has(eg.s_percentExcessReactantConc)){let e=s[l.get(eg.s_percentExcessReactantConc)];N.set(eg.s_percentExcessReactantConc,e)}if(l.has(eg.s_precision)){console.log("index.has(PTpair.s_precision)");let e=s[l.get(eg.s_precision)];N.set(eg.s_precision,e)}if(l.has(ea.tagName)){let e=s[l.get(ea.tagName)];p.setBathGas(new ea(new Map,e))}if(l.has(eo.tagName)){let e=s[l.get(eo.tagName)];if(e.length>0){N.set(eo.tagName,e),p.setExperimentalRate(new eo(new Map,new(o(d))(e)));let t=s[l.get(eo.tagName+"_"+eo.s_ref1)];p.getExperimentalRate()?.setRef1(t);let i=s[l.get(eo.tagName+"_"+eo.s_ref2)];p.getExperimentalRate()?.setRef2(i);let n=s[l.get(eo.tagName+"_"+eo.s_refReaction)];p.getExperimentalRate()?.setRefReaction(n);let a=s[l.get(eo.tagName+"_"+eo.s_error)];p.getExperimentalRate()?.setError(new(o(d))(a))}}if(l.has(ed.tagName)){let e=s[l.get(ed.tagName)];if(e.length>0){p.setExperimentalYield(new ed(new Map,new(o(d))(e)));let t=s[l.get(ed.tagName+"_"+ed.s_ref)];p.getExperimentalYield()?.setRef(t);let i=s[l.get(ed.tagName+"_"+ed.s_yieldTime)];p.getExperimentalYield()?.setYieldTime(new(o(d))(i));let n=s[l.get(ed.tagName+"_"+ed.s_error)];p.getExperimentalYield()?.setError(new(o(d))(n))}}if(l.has(er.tagName)){let e=s[l.get(er.tagName)];if(e.length>0){p.setExperimentalEigenvalue(new er(new Map,new(o(d))(e)));let t=s[l.get(er.tagName+"_"+er.s_EigenvalueID)];p.getExperimentalEigenvalue()?.setEigenvalueID(t);let i=s[l.get(er.tagName+"_"+er.s_error)];p.getExperimentalEigenvalue()?.setError(new(o(d))(i))}}let v=a.ptps.length-1;m.insertBefore(iT(a,m,p,t.id,i,v,r,sO),c)}m.removeChild(e)}})});let p=R("Remove All",void 0,sF);c.appendChild(p),p.addEventListener("click",()=>{a.clear();let e=m.firstChild;for(;null!=e&&e!=c;){let t=e.nextSibling;m.removeChild(e),e=t}})}function iS(e,s){let i=new em(e,s);return t.addConditions(i),i}function iT(e,t,s,i,n,a,o,d){let r=L(void 0,d);return iM(r,eg.s_P,s.getP.bind(s),s.setP.bind(s)),iE(tb.pressureUnits,s.attributes,r,eg.tagName,eg.tagName,sF,sO),iM(r,eg.s_T,s.getT.bind(s),s.setT.bind(s)),l(i,eg.tagName,a.toString()),iz(r,s,n,a,eg.s_excessReactantConc,iL),function(e,t,s,i){let n=l(s.toString(),i.toString(),eg.s_percentExcessReactantConc),a=P(n,sF);e.append(a);let o=eg.s_percentExcessReactantConc,d=o+sU,r=o+sV,g=R(r,l(n,x),sF);a.appendChild(g),g.classList.add(s$),g.classList.add(sX),t.attributes.get(o)?.toLowerCase()=="true"?(g.classList.toggle(sX),g.textContent=d):(g.classList.toggle(s$),g.textContent=r),g.addEventListener("click",e=>{g.classList.toggle(s$),g.classList.toggle(sX),g.textContent===r?(g.textContent=d,t.attributes.set(o,"true")):(g.textContent=r,t.attributes.delete(o))})}(r,s,n,a),iz(r,s,n,a,eg.s_precision,iP),function(e,t,s,i,n){let a=l(s.toString(),i.toString(),ea.tagName),o=P(a,sF);e.append(o);let d=ea.tagName,r=d+sU,g=d+sV,h=R(g,l(a,x),sF);o.appendChild(h),h.classList.add(s$),h.classList.add(sX);let m=l(a,sY),c=t.getBathGas();void 0==c?(h.classList.toggle(s$),h.textContent=g):(h.classList.toggle(sX),h.textContent=r,!1==n.has(c.value)&&console.warn("moleculeKeys does not contain "+c.value),o.appendChild(iI(m,t,c,!1))),h.addEventListener("click",e=>{h.classList.toggle(s$),h.classList.toggle(sX),h.textContent===g?(h.textContent=r,o.appendChild(iI(m,t,c,!1))):(h.textContent=g,f(m))})}(r,s,n,a,o),iR(r,s,n,a,eo.tagName,e=>e.getExperimentalRate(),iD),iR(r,s,n,a,ed.tagName,e=>e.getExperimentalYield(),iA),iR(r,s,n,a,ed.tagName,e=>e.getExperimentalEigenvalue(),ik),iu(r,sF,(s,i,n)=>{t.removeChild(s),void 0!==i&&e.remove(i),n.removeBathGas()},r,a,s),r}function iM(e,t,s,i){let n=w("text",eg.tagName+"_"+t,sF,sG,e=>{let n=e.target;try{i(new(o(d))(n.value)),console.log(`Set ${t} to ${n.value}`)}catch(e){alert("Invalid input, resetting..."),a.value=i_(s)}S(n)},i_(s),t),a=n.querySelector("input");a.value=i_(s),S(a),e.appendChild(n)}function i_(e){let t=e();return void 0!==t?t.toString():""}function iz(e,t,s,i,n,a){let o=l(s.toString(),i.toString(),n),d=P(o,sF);e.append(d);let r=n+sU,g=n+sV,h=R(g,l(o,x),sF);d.appendChild(h),h.classList.add(s$),h.classList.add(sX);let m=l(o,sY);if(t.attributes.has(n)){h.classList.toggle(sX),h.textContent=r;let e=a(m,t);d.insertBefore(e,h.nextSibling)}else h.classList.toggle(s$),h.textContent=g;h.addEventListener("click",e=>{if(h.classList.toggle(s$),h.classList.toggle(sX),h.textContent===g){h.textContent=r;let e=a(m,t);d.insertBefore(e,h.nextSibling)}else h.textContent=g,f(m)})}function iR(e,t,s,i,n,a,o){let d=l(s.toString(),i.toString(),n),r=P(d,sF);e.append(r);let g=n+sU,h=n+sV,m=R(h,l(d,x),sF);r.appendChild(m),m.classList.add(s$),m.classList.add(sX);let c=l(d,sY);void 0==a(t)?(m.classList.toggle(s$),m.textContent=h):(m.classList.toggle(sX),m.textContent=g,r.appendChild(o(c,t,i))),m.addEventListener("click",e=>{m.classList.toggle(s$),m.classList.toggle(sX),m.textContent===h?(m.textContent=g,r.appendChild(o(c,t,i))):(m.textContent=h,f(c))})}function iP(e,t){let s;s=t.attributes.has(eg.s_precision)?t.attributes.get(eg.s_precision):tb.precisionOptions[0];let i=_(tb.precisionOptions,eg.s_precision,s,e,sF);return i.addEventListener("change",e=>{let s=e.target;t.setPrecision(s.value),console.log("Set "+eg.s_precision+" to "+s.value),T(s)}),T(i),i}function iL(e,t){let s,i=y("number",e,sF);return s=t.attributes.has(eg.s_excessReactantConc)?t.attributes.get(eg.s_excessReactantConc):NaN.toString(),console.log(eg.s_excessReactantConc+"="+s),i.value=s,i.addEventListener("change",e=>{let s=e.target;t.setExcessReactantConc(s.value),console.log("Set "+eg.s_excessReactantConc+" to "+s.value),S(s)}),S(i),i}function iI(e,t,i,n){let a=iB(Array.from(new Set(s.keys())),i,n,e);return a.id=e,a.addEventListener("change",e=>{let s=e.target;t.setBathGas(new ea(new Map,s.value)),console.log("Set bathGas to "+s.value),T(s)}),T(a),a}function iB(e,t,s,i){let n;if(s)e.push(sZ);else{let t=e.indexOf(sZ);t>-1&&e.splice(t,1)}void 0==t?(t=new ea(new Map,sZ),n=sZ):n=t.value;let a=_(e,ea.tagName,n,l(i,sW),sF);return a.classList.add(ea.tagName),i1(e,a),a.addEventListener("change",e=>{let s=e.target;t.value=s.value,console.log("Added "+s.value+" as "+ea.tagName),T(s)}),a.value=n,T(a),a}function iD(e,t){return iG(t,e,e=>e.getExperimentalRate(),(e,t)=>e.setExperimentalRate(t),eo,[{tagName:eo.tagName,type:"number",eventHandler:(e,s)=>iy(t.getExperimentalRate(),s),valueGetter:()=>t.getExperimentalRate().value.toString()},{tagName:eo.tagName+"_"+eo.s_ref1,type:"text",eventHandler:(e,s)=>t.getExperimentalRate()?.setRef1(s.value),valueGetter:()=>t.getExperimentalRate().getRef1()},{tagName:eo.tagName+"_"+eo.s_ref2,type:"text",eventHandler:(e,s)=>t.getExperimentalRate()?.setRef2(s.value),valueGetter:()=>t.getExperimentalRate().getRef2()},{tagName:eo.tagName+"_"+eo.s_refReaction,type:"text",eventHandler:(e,s)=>t.getExperimentalRate()?.setRefReaction(s.value),valueGetter:()=>t.getExperimentalRate().getRefReaction()},{tagName:eo.tagName+"_"+eo.s_error,type:"number",eventHandler:(e,s)=>t.getExperimentalRate()?.setError(new(o(d))(s.value)),valueGetter:()=>t.getExperimentalRate().getError().toString()}])}function iA(e,t){return iG(t,e,e=>e.getExperimentalYield(),(e,t)=>e.setExperimentalYield(t),ed,[{tagName:ed.tagName,type:"number",eventHandler:(e,s)=>iy(t.getExperimentalYield(),s),valueGetter:()=>t.getExperimentalYield().value.toString()},{tagName:ed.tagName+"_"+ed.s_ref,type:"text",eventHandler:(e,s)=>t.getExperimentalYield()?.setRef(s.value),valueGetter:()=>t.getExperimentalYield().getRef()},{tagName:ed.tagName+"_"+ed.s_yieldTime,type:"number",eventHandler:(e,s)=>t.getExperimentalYield()?.setYieldTime(new(o(d))(s.value)),valueGetter:()=>t.getExperimentalYield().getYieldTime().toString()},{tagName:ed.tagName+"_"+ed.s_error,type:"number",eventHandler:(e,s)=>t.getExperimentalYield()?.setError(new(o(d))(s.value)),valueGetter:()=>t.getExperimentalYield().getError().toString()}])}function ik(e,t){return iG(t,e,e=>e.getExperimentalEigenvalue(),(e,t)=>e.setExperimentalEigenvalue(t),er,[{tagName:er.tagName,type:"number",eventHandler:(e,s)=>iy(t.getExperimentalEigenvalue(),s),valueGetter:()=>t.getExperimentalEigenvalue().value.toString()},{tagName:er.tagName+"_"+er.s_EigenvalueID,type:"text",eventHandler:(e,s)=>t.getExperimentalEigenvalue()?.setEigenvalueID(s.value),valueGetter:()=>t.getExperimentalEigenvalue().getEigenvalueID()},{tagName:er.tagName+"_"+er.s_error,type:"number",eventHandler:(e,s)=>t.getExperimentalEigenvalue()?.setError(new(o(d))(s.value)),valueGetter:()=>t.getExperimentalEigenvalue().getError().toString()}])}function iG(e,t,s,i,n,a){let o=P(void 0,sF);o.id=t;let d=s(e);for(let s of(void 0==d&&i(e,d=new n(new Map,sJ)),a)){let e=t+"_"+s.tagName;o.appendChild(w(s.type,e,sF,sG,e=>{let t=e.target;s.eventHandler(e,t),console.log("Set "+s.tagName+" to "+t.value),S(t)},s.valueGetter(),s.label||""))}return o}function iO(e,t,s,i,n,a){let r,l,g=L(void 0,sO);s.appendChild(g);let h=i.tagName,m=h+sU,c=h+sV,u=t.getElementsByTagName(h),N=R(h,void 0,sF);N.classList.add(s$),N.classList.add(sX),g.appendChild(N);let p=tf.tagName+"_"+h+"_input",x=tf.tagName+"_"+h+"_select";if(1==u.length){l=G(k(u[0]));let t=new(o(d))(l);r=new i($(u[0]),t),N.textContent=m,iF(e,g,r,p,x,l,n,void 0),N.classList.toggle(sX)}else l="",r=new i(new Map,sJ),N.textContent=c,N.classList.toggle(s$);N.addEventListener("click",()=>{e.index.has(h)?(l=r.value.toExponential(),a(),document.getElementById(p)?.remove(),N.textContent=c):(iF(e,g,r,p,x,l,n,void 0),N.textContent=m),N.classList.toggle(s$),N.classList.toggle(sX)})}function iF(e,t,s,i,n,a,o,d){o.call(e,s);let r=y("number",i,sF);r.addEventListener("change",e=>{let t=e.target;iy(s,t),S(t)}),r.value=a,S(r),t.appendChild(r),iE(d,s.attributes,t,n,s.constructor.tagName,sF,sO)}function iU(e){return[{class:ec,setMethod:e.setCalculateRateCoefficientsOnly,removeMethod:e.removeCalculateRateCoefficientsOnly},{class:eu,setMethod:e.setPrintCellDOS,removeMethod:e.removePrintCellDOS},{class:eN,setMethod:e.setPrintCellTransitionStateFlux,removeMethod:e.removePrintCellTransitionStateFlux},{class:ep,setMethod:e.setPrintReactionOperatorColumnSums,removeMethod:e.removePrintReactionOperatorColumnSums},{class:ex,setMethod:e.setPrintGrainBoltzmann,removeMethod:e.removePrintGrainBoltzmann},{class:ef,setMethod:e.setPrintGrainDOS,removeMethod:e.removePrintGrainDOS},{class:ev,setMethod:e.setPrintGrainkbE,removeMethod:e.removePrintGrainkbE},{class:eE,setMethod:e.setPrintGrainkfE,removeMethod:e.removePrintGrainkfE},{class:ew,setMethod:e.setPrintTSsos,removeMethod:e.removePrintTSsos},{class:ey,setMethod:e.setPrintGrainedSpeciesProfile,removeMethod:e.removePrintGrainedSpeciesProfile},{class:eC,setMethod:e.setPrintGrainTransitionStateFlux,removeMethod:e.removePrintGrainTransitionStateFlux},{class:eb,setMethod:e.setPrintReactionOperatorSize,removeMethod:e.removePrintReactionOperatorSize},{class:eS,setMethod:e.setPrintSpeciesProfile,removeMethod:e.removePrintSpeciesProfile},{class:eT,setMethod:e.setPrintPhenomenologicalEvolution,removeMethod:e.removePrintPhenomenologicalEvolution},{class:eM,setMethod:e.setPrintTunnelingCoefficients,removeMethod:e.removePrintTunnelingCoefficients},{class:e_,setMethod:e.setPrintCrossingCoefficients,removeMethod:e.removePrintCrossingCoefficients},{class:ez,setMethod:e.setTestDOS,removeMethod:e.removeTestDOS},{class:eR,setMethod:e.setTestRateConstants,removeMethod:e.removeTestRateConstants},{class:eP,setMethod:e.setUseTheSameCellNumberForAllConditions,removeMethod:e.removeUseTheSameCellNumberForAllConditions},{class:eL,setMethod:e.setForceMacroDetailedBalance,removeMethod:e.removeForceMacroDetailedBalance}]}function iV(e){return[{class:tt,setMethod:e.setEigenvalues,removeMethod:e.removeEigenvalues},{class:ts,setMethod:e.setShortestTimeOfInterest,removeMethod:e.removeShortestTimeOfInterest},{class:ti,setMethod:e.setMaximumEvolutionTime,removeMethod:e.removeMaximumEvolutionTime},{class:tn,setMethod:e.setAutomaticallySetMaxEne,removeMethod:e.removeAutomaticallySetMaxEne},{class:ta,setMethod:e.setDiagramEnergyOffset,removeMethod:e.removeDiagramEnergyOffset}]}function iq(e,s){let i=new td(e,s);return t.addControl(i),i}function iH(e,t,s,i,n,a){i.call(e,s);let o=y("number",n,sF);o.addEventListener("change",e=>{let t=e.target;iy(s,t),S(t)}),o.value=a,S(o),t.appendChild(o)}function ij(e,t,s,i,n,a,r,g,h,m=!1){let c,u,N,p=r.tagName,x=p+sU,v=p+sV,E=R(v,void 0,sF);if(E.classList.add(s$),E.classList.add(sX),i&&i.set(p,E),a&&(u=L(void 0,a),t.appendChild(u),u.appendChild(E),N=l(td.tagName,p,sY)),n){let t=n.getElementsByTagName(p);if(1==t.length){if(m){let s=G(k(t[0])),i=new(o(d))(s);c=new r($(t[0]),i),iH(e,u,c,g,N,s)}else g.call(e,c);E.textContent=x,E.classList.toggle(sX)}else E.textContent=v,E.classList.toggle(s$)}else c=new r(new Map),E.textContent=v,E.classList.toggle(s$);E.addEventListener("click",t=>{e.index.has(p)?(m&&f(N),h.call(e),E.textContent=v):(m?iH(e,u,c,g,N,""):g.call(e,c),E.textContent=x),E.classList.toggle(s$),E.classList.toggle(sX)})}function iY(e,t,s,i,n){let a,r=L(void 0,n);t.appendChild(r);let g=eB.tagName,h=g+sU,m=g+sV,c=R(m,void 0,sF);r.appendChild(c),c.classList.add(s$),c.classList.add(sX);let u=l(td.tagName,g,s.toString()),N=L(u,sF);r.appendChild(N);let p=eB.options,x=l(u,"details"),v=l(x,"select");if(null!=i){let t=i.getElementsByTagName(g);if(t.length>0){if(t.length>1)throw Error("More than one CalcMethod element.");let s=$(t[0]),i=s.get("xsi:type");a=function e(t,s,i,n,a,r,l,g,h){let m;let c=i2(t,s,n,r,l,g,h);c.value=l,s.appendChild(c);let u=L(void 0,sF);if(u.id=g,s.appendChild(u),l==eD.xsi_type||l==eD.xsi_type2)m=new eD(a);else if(l==eA.xsi_type||l==eA.xsi_type2)m=new eA(a);else if(l==eG.xsi_type||l==eG.xsi_type2){let e=new eG(a);m=e;let t=i[0].getElementsByTagName(ek.tagName);if(t.length>0){if(1==t.length){let s=new(o(d))(G(k(t[0]))),i=new ek($(t[0]),s);e.setFittingIterations(i)}else throw Error("More than one FittingIterations element.")}iK(u,e)}else if(l==eV.xsi_type||l==eV.xsi_type2){let e=new eV(a);function N(e,t,s){let i=eO.tagName,n=e[0].getElementsByTagName(i);if(n.length>0){if(1==n.length){let e=new(o(d))(G(k(n[0])));s(new t($(n[0]),e))}else throw Error(`More than one ${i} element.`)}}m=e,N(i,eO,e.setMarquardtIterations.bind(e)),N(i,eF,e.setMarquardtTolerance.bind(e)),N(i,eU,e.setMarquardtDerivDelta.bind(e)),iW(u,e)}else if(l==e0.xsi_type||l==e0.xsi_type2){let e=new e0(a);function N(e,t,s,i){let n=t.tagName,a=e[0].getElementsByTagName(n);if(a.length>0){if(1==a.length){let e=G(k(a[0]));i&&void 0!=e&&(e=new(o(d))(e)),s(new t($(a[0]),e))}else throw Error(`More than one ${n} element.`)}}m=e,N(i,eH,e.setFormat.bind(e),!0),N(i,ej,e.setPrecision.bind(e),!1),N(i,eY,e.setChebNumTemp.bind(e),!0),N(i,e$,e.setChebNumConc.bind(e),!0),N(i,eX,e.setChebMaxTemp.bind(e),!0),N(i,eK,e.setChebMinTemp.bind(e),!0),N(i,eW,e.setChebMaxConc.bind(e),!0),N(i,eZ,e.setChebMinConc.bind(e),!0),N(i,eQ,e.setChebTExSize.bind(e),!0),N(i,eJ,e.setChebPExSize.bind(e),!0),iZ(u,e)}else if(l==e4.xsi_type||l==e4.xsi_type2){let e=new e4(a);function N(e,t,s){let i=t.tagName,n=e[0].getElementsByTagName(i);if(n.length>0){if(1==n.length){let e=new(o(d))(G(k(n[0])));s(new t($(n[0]),e))}else throw Error(`More than one ${i} element.`)}}m=e,N(i,e1,e.setTmin.bind(e)),N(i,e2,e.setTmid.bind(e)),N(i,e3,e.setTmax.bind(e)),N(i,e5,e.setTstep.bind(e)),iQ(u,e)}else if(l==te.xsi_type||l==te.xsi_type2){let e=new te(a);function N(e,t,s){let i=t.tagName,n=e[0].getElementsByTagName(i);if(n.length>0){if(1==n.length){let e=G(k(n[0]));void 0!=e&&(e=new(o(d))(e)),s(new t($(n[0]),e))}else throw Error(`More than one ${i} element.`)}}m=e,N(i,e6,e.setSensitivityAnalysisSamples.bind(e)),N(i,e8,e.setSensitivityAnalysisOrder.bind(e)),N(i,e9,e.setSensitivityNumVarRedIters.bind(e)),N(i,e7,e.setSensitivityVarRedMethod.bind(e)),i0(u,e)}else{let o=a.get("name");if(void 0!=o&&o!==l)return a.set("xsi:type",o),console.warn(`Using name attribute as xsi:type: ${o}`),e(t,s,i,n,a,r,o,g,h);throw Error(`Unable to determine calculation method for xsi_type: ${l}`)}return m}(e,N,t,p,s,g,i,x,v),e.setCalcMethod(a),c.classList.toggle(sX),c.textContent=h}else c.classList.toggle(s$),c.textContent=m}else c.classList.toggle(s$),c.textContent=m;c.addEventListener("click",t=>{if(e.index.has(g))null!=e.getCalcMethod()&&(e.removeCalcMethod(),f(x),console.log("remove(divCmDetailsSelectId) "+v),console.log("button.textContent "+c.textContent),f(v),c.textContent=m,c.classList.toggle(s$),c.classList.toggle(sX));else{p[p.length-1]!=sZ&&p.push(sZ),f(x),f(v);let t=i2(e,r,p,g,sZ,x,v);N.appendChild(t),c.textContent=h,c.classList.toggle(s$),c.classList.toggle(sX)}})}function i$(e,t,s,i){let n=L(void 0,i);t.appendChild(n);let a=to.tagName,o=a+sU,d=a+sV,r=R(a,void 0,sF);r.id=td.tagName+"_"+a,n.appendChild(r),r.classList.add(s$),r.classList.add(sX);let l=td.tagName+"_"+a+"_Tmax",g=td.tagName+"_"+a+"_Tmin",h=td.tagName+"_"+a+"_Tstep";if(s){let t=s.getElementsByTagName(a);1==t.length?(iX(e,n,t,l,g,h),r.classList.toggle(sX),r.textContent=o):(r.classList.toggle(s$),r.textContent=d)}else r.classList.toggle(s$),r.textContent=d;r.addEventListener("click",t=>{e.index.has(a)?(e.removeTestMicroRates(),document.getElementById(l)?.remove(),document.getElementById(g)?.remove(),document.getElementById(h)?.remove(),r.textContent=d):(iX(e,n,null,l,g,h),r.textContent=o),r.classList.toggle(s$),r.classList.toggle(sX)})}function iX(e,t,s,i,n,a){let r,l;if(null!=s&&s.length>0){if(s.length>1)throw Error("More than one TestMicroRates element.");l=new to(r=$(s[0]))}else(r=new Map).set("Tmax",""),r.set("Tmin",""),r.set("Tstep",""),l=new to(r);e.setTestMicroRates(l);let g=l.getTmax(),h=w("text",i+"_input",sF,sG,e=>{let t=e.target;try{l.setTmax(new(o(d))(t.value)),console.log("Set Tmax to "+t.value)}catch(e){alert("Invalid input, resetting..."),t.value=g.toString()}S(t)},g.toString(),"Tmax");h.id=i,S(h.querySelector("input")),t.appendChild(h);let m=l.getTmin(),u=w("number",n+"_input",sF,sG,e=>{let t=e.target;c(t.value)?(l.setTmin(new(o(d))(t.value)),console.log("Set Tmin to "+t.value)):(alert("Value is not numeric, resetting..."),t.value=m.toString()),S(t)},m.toString(),"Tmin");u.id=n,S(u.querySelector("input")),t.appendChild(u);let N=l.getTstep(),p=w("text",a+"_input",sF,sG,e=>{let t=e.target;c(t.value)?(l.setTstep(new(o(d))(t.value)),console.log("Set Tstep to "+t.value)):(alert("Value is not numeric, resetting..."),t.value=N.toString()),S(t)},N.toString(),"Tstep");p.id=a,S(p.querySelector("input")),t.appendChild(p)}function iK(e,t){let s=t.getFittingIterations()||new ek(new Map,sJ);t.setFittingIterations(s),e.appendChild(w("number",e.id+"_FittingIterations_input",sF,sG,e=>{let t=e.target;c(t.value)?(s.value=new(o(d))(t.value),console.log("Set FittingIterations to "+t.value)):(alert("Value is not numeric, resetting..."),t.value=s.value.toString()),S(t)},s.value.toString(),ek.tagName))}function iW(e,t){function s(e,t,s,i){let n=l(t.id,e.tagName,"Input"),a=e.value.toString(),r=e.tagName;t.appendChild(w("number",n,s,i,t=>{let s=t.target;c(s.value)?(e.value=new(o(d))(s.value),console.log("Set "+e.tagName+" to "+s.value)):(alert("Value is not numeric, resetting..."),s.value=e.value.toString()),S(s)},a,r))}let i=t.getMarquardtIterations()||new eO(new Map,sJ);t.setMarquardtIterations(i),s(i,e,sF,sG);let n=t.getMarquardtTolerance()||new eF(new Map,sJ);t.setMarquardtTolerance(n),s(n,e,sF,sG);let a=t.getMarquardtDerivDelta()||new eU(new Map,sJ);t.setMarquardtDerivDelta(a),s(a,e,sF,sG)}function iZ(e,t){let s=t.getFormat()||new eH(new Map,eH.options[0]);function i(t,s,i,n,a){let o=s()||new t(new Map,a[0]);i(o);let d=z(n,a,n,o.value,e.id,sF,sF);d.querySelector("select")?.addEventListener("change",e=>{let t=e.target;o.value=t.value,console.log(`Set ${n} to `+t.value),T(t)}),e.appendChild(d)}function n(t,s,i,n){let a=s()||new t(new Map,NaN);i(a),e.appendChild(w("text",e.id+`_${n}_input`,sF,sG,iJ(a,n),a.value.toString(),n))}i(eH,t.getFormat.bind(t),t.setFormat.bind(t),eH.tagName,eH.options),i(eH,()=>s.getRateUnits(),s.setRateUnits.bind(s),eH.rateUnits,eH.rateUnitsOptions),i(ej,t.getPrecision.bind(t),t.setPrecision.bind(t),ej.tagName,tb.precisionOptions),n(eY,t.getChebNumTemp.bind(t),t.setChebNumTemp.bind(t),eY.tagName),n(e$,t.getChebNumConc.bind(t),t.setChebNumConc.bind(t),e$.tagName),n(eX,t.getChebMaxTemp.bind(t),t.setChebMaxTemp.bind(t),eX.tagName),n(eK,t.getChebMinTemp.bind(t),t.setChebMinTemp.bind(t),eK.tagName),n(eW,t.getChebMaxConc.bind(t),t.setChebMaxConc.bind(t),eW.tagName),n(eZ,t.getChebMinConc.bind(t),t.setChebMinConc.bind(t),eZ.tagName),n(eQ,t.getChebTExSize.bind(t),t.setChebTExSize.bind(t),eQ.tagName),n(eJ,t.getChebPExSize.bind(t),t.setChebPExSize.bind(t),eJ.tagName)}function iQ(e,t){function s(t,s,i,n){let a=s()||new t(new Map,NaN);i(a),e.appendChild(w("text",e.id+`_${n}_input`,sF,sG,iJ(a,n),a.value.toString(),n))}s(e1,t.getTmin.bind(t),t.setTmin.bind(t),e1.tagName),s(e2,t.getTmid.bind(t),t.setTmid.bind(t),e2.tagName),s(e3,t.getTmax.bind(t),t.setTmax.bind(t),e3.tagName),s(e5,t.getTstep.bind(t),t.setTstep.bind(t),e5.tagName)}function iJ(e,t){return t=>{let s=t.target;try{e.value=new(o(d))(s.value)}catch(t){alert("Invalid input value "+s.value+" , resetting..."),s.value=e.value.toString()}S(s)}}function i0(e,t){function s(t,s,i,n){let a=s()||new t(new Map,NaN);i(a),e.appendChild(w("text",l(e.id,n,sY),sF,sG,iJ(a,n),a.value.toString(),n))}s(e6,t.getSensitivityAnalysisSamples.bind(t),t.setSensitivityAnalysisSamples.bind(t),e6.tagName),s(e8,t.getSensitivityAnalysisOrder.bind(t),t.setSensitivityAnalysisOrder.bind(t),e8.tagName),s(e9,t.getSensitivityNumVarRedIters.bind(t),t.setSensitivityNumVarRedIters.bind(t),e9.tagName);let i=t.getSensitivityVarRedMethod()||new e7(new Map,"");t.setSensitivityVarRedMethod(i);let n=e7.tagName;e.appendChild(z(n,e7.options,n,e7.options[0],l(e.id,n,"select"),sF,sF));let a=e.querySelector("select");a?.addEventListener("change",e=>{let t=e.target;i.value=t.value,console.log(n+" set to "+t.value),T(t)})}function i1(e,t){t.addEventListener("click",s=>{e[e.length-1]==sZ&&e.pop();let i=t.options.length-1;t.options[i].value==sZ&&t.remove(i)})}function i2(e,t,s,i,n,a,o){let d=_(s,i,n,o,sF);return t.appendChild(d),i1(s,d),d.addEventListener("change",s=>{let i=document.getElementById(a);null!=i&&i.remove(),i=L(a,sF),t.appendChild(i);let n=s.target,o=n.value,d=new Map;if(d.set("xsi:type",o),o==eD.xsi_type||o==eD.xsi_type2)e.setCalcMethod(new eD(d));else if(o==eA.xsi_type||o==eA.xsi_type2)e.setCalcMethod(new eA(d));else if(o==eG.xsi_type||o==eG.xsi_type2){let t=new eG(d);e.setCalcMethod(t),iK(i,t)}else if(o==eV.xsi_type||o==eV.xsi_type2){let t=new eV(d);e.setCalcMethod(t),iW(i,t)}else if(o==e0.xsi_type||o==e0.xsi_type2){let t=new e0(d);e.setCalcMethod(t),iZ(i,t)}else if(o==e4.xsi_type||o==e4.xsi_type2){let t=new e4(d);e.setCalcMethod(t),iQ(i,t)}else if(o==te.xsi_type||o==te.xsi_type2){let t=new te(new Map);e.setCalcMethod(t),i0(i,t)}else throw Error("Unknown CalcMethod type.");T(n)}),d}document.addEventListener("DOMContentLoaded",()=>{document.body.className=e?"dark-mode":"light-mode",document.body.className=e?"dark-mode":"light-mode";let r=document.getElementById("menu");r.style.display="flex",r.style.justifyContent="center",r.style.margin="5px",r.style.padding="5px",r.style.border="1px solid black",r.style.backgroundColor="lightgrey",console.log("Load defaults"),new sb;let m="Load",u=R(m,l(m),sF);u.addEventListener("click",r=>{let N;s0.forEach(e=>{f(e,s0)}),null!=s&&s.clear(),null!=i&&i.clear(),n=[],(N=document.createElement("input")).type="file",N.onchange=function(){if(N.files){for(let e=0;e<N.files.length;e++)console.log("inputElement.files["+e+"]="+N.files[e]);let r=N.files[0];console.log(r.name);let m=r.name,u=new FileReader,p=0,E="";u.onload=function(N){if(null==N.target)throw Error("Event target is null");if(E+=N.target.result,null!=r){if(p<r.size){let e=r.slice(p,p+1048576);u.readAsText(e),p+=1048576}else{var C;let r,u,N,p;C=E=E.trim(),r=document.getElementById("xml"),f(u=s1("xml",2),s0),N=P(u,sO),v(u,r,null,N,m,sF,sG),(p=document.createElement("pre")).textContent=C,N.appendChild(p),function(r){let m,u,N;console.log("parse: "+r);let p=X(r,tb.tagName);t=new tb($(p));let E=r.getElementsByTagName(tv.tagName);if(1!=E.length)throw Error("Multiple "+tv.tagName+" tags found");{let e=E[0].childNodes[0].nodeValue.trim(),s=new tv($(E[0]),e);t.setTitle(s);let i=document.getElementById("title"),n=s1("titleDiv");f(n,s0);let a=w("text",l(n,sY),sF,sG,e=>{let t=e.target;s.value=t.value,console.log(s.tagName+" changed to "+s.value),S(t)},e,tv.tagName);a.id=n,i.appendChild(a)}let C=document.getElementById("molecules"),b=s1(tE.tagName);f(b,s0),v(b,C,null,function(e){s=new Map;let t=P(void 0,sF),i=X(e,tE.tagName),n=new Set;if(i.childNodes.forEach(function(e){n.add(e.nodeName)}),1!=n.size&&!(2==n.size&&n.has("#text")))throw console.error("moleculeListTagNames:"),n.forEach(e=>console.error(e)),Error("Additional tag names in moleculeList:");if(!n.has(se.tagName))throw Error('Expecting tags with "'+se.tagName+'" tagName but there are none!');let a=i.getElementsByTagName(se.tagName),r=a.length;console.log("Number of molecules="+r);for(let e=0;e<r;e++){let i=l(se.tagName,e),n=P(i),r=$(a[e]),h=r.get(se.s_id);if(void 0==h)throw Error(se.s_id+" is undefined");let m=new se(r,h);s.set(h,m);let u=v(l(i,sH),t,null,n,h,sF,sO),N=new Set,p=a[e].childNodes;for(let e=0;e<p.length;e++){let t=p[e];N.has(t.nodeName)?"#text"!=t.nodeName&&console.warn("Another ChildNode with nodeName="+t.nodeName):N.add(t.nodeName)}s9(m,u.querySelector(x),n,sO),n.appendChild(s7(l(m.getID(),sj),m.getDescription.bind(m),m.setDescription.bind(m),sF,sO));let f=a[e].getElementsByTagName(t_.tagName);if(f.length>1)throw Error("Expecting 1 or 0 "+t_.tagName+" but finding "+f.length+"!");let E=l(i,t_.tagName),C=P(E);if(v(l(E,sH),n,null,C,t_.tagName,sF,sO),1==f.length){let e=f[0],t=e.getElementsByTagName(tM.tagName);if(t.length<2)throw Error("Expecting 2 or more atoms in "+t_.tagName+", but finding "+t.length+"!");let s=new t_($(e));m.setAtoms(s);for(let e=0;e<t.length;e++){let i=new tM($(t[e]),m),n=s.addAtom(i),a=L(l(E,e),sO);C.appendChild(a),a.appendChild(I(n,sF)),il(i,a,!1,sF),ig(i,a,sF,sF),iu(a,sF,is,m,n)}N.delete(t_.tagName)}else{let t=a[e].getElementsByTagName(tM.tagName);if(1==t.length){let e=new t_(new Map);e.addAtom(new tM($(t[0]),m)),m.setAtoms(e)}else if(t.length>1)throw Error("Expecting 1 "+tM.tagName+" but finding "+t.length+". Should these be in an "+t_.tagName+"?")}C.appendChild(it(m,C,tM.tagName,sF,sO)),N.delete(tM.tagName);let b=new tR(new Map),T=e=>m.getBonds().removeBond(e),M=a[e].getElementsByTagName(tR.tagName),_=l(i,tR.tagName),A=P(_);if(v(l(_,sH),n,null,A,tR.tagName,sF,sO),M.length>0){if(M.length>1)throw Error("Expecting 1 or 0 "+tR.tagName+" but finding "+M.length+"!");let e=M[0].getElementsByTagName(tz.tagName);b=new tR($(M[0]));for(let t=0;t<e.length;t++){let s=new tz($(e[t]),m),i=b.addBond(s),n=L(l(_,t),sO);A.appendChild(n),n.appendChild(I(i,sF)),id(m,n,s,sF),iN(n,s,sF),iu(n,sF,T,i)}m.setBonds(b),N.delete(tR.tagName)}else{let t=a[e].getElementsByTagName(tz.tagName);if(t.length>0){if(t.length>1)throw Error("Expecting 1 "+tz.tagName+" but finding "+t.length+". Should these be in a "+tR.tagName+"?");(b=new tR(new Map)).addBond(new tz($(t[0]),m)),m.setBonds(b)}}A.appendChild(io(m,h,A,tz.tagName,sF,sO)),N.delete(tz.tagName);let F=l(i,"viewer"),U=P(F);v(l(F,sH),n,null,U,"viewer",sF,sO),ix(m,U,sF,sO);let V=a[e].getElementsByTagName(tq.tagName);if(V.length>1)throw Error("Expecting 1 or 0 "+tq.tagName+" but finding "+V.length+"!");if(1==V.length){let e=l(i,tq.tagName),t=P(e);v(l(e,sH),n,null,t,tq.tagName,sF,sO);let s=new tq($(V[0]));m.setPropertyList(s);let a=V[0].getElementsByTagName(tB.tagName);for(let e=0;e<a.length;e++){let i=ir(s,a[e],t,m,sF,sO);s.setProperty(i)}N.delete(tq.tagName)}else{let t=new tq(new Map);m.setPropertyList(t);let s=a[e].getElementsByTagName(tB.tagName);if(1!=s.length)throw Error("Expecting 1 "+tB.tagName+" but finding "+s.length+". Should these be in a "+tq.tagName+"?");let i=ir(t,s[0],n,m,sF,sO);t.setProperty(i),N.delete(tB.tagName)}let q=a[e].getElementsByTagName(tX.tagName);if(q.length>0){if(q.length>1)throw Error("Expecting 1 or 0 "+tX.tagName+" but finding "+q.length+"!");(function(e,t,s,i){let n=s.getElementsByTagName(tH.tagName);if(n.length>0){let s=l(t.getID(),tX.tagName),a=document.createElement("div");v(l(s,sH),i,null,a,tX.tagName,sF,sO);let r=[];for(let e=0;e<n.length;e++){let t=O(n[e]),i=new(o(d))(t),g=new tH($(n[e]),i);r.push(g);let h=tH.tagName,m=l(s,tH.tagName,e),c=w("number",m,sF,sO,s=>{let i=s.target;iy(g,i),t=i.value,r[e].setValue(new(o(d))(t)),console.log("Set "+m+" to "+t),S(i)},t,h);a.appendChild(c);let u=document.createElement("label");u.textContent="units cm-1",c.appendChild(u)}e.setDeltaEDowns(r),t.setEnergyTransferModel(e)}})(new tX($(q[0])),m,q[0],n),N.delete(tX.tagName)}let H=a[e].getElementsByTagName(tK.tagName);if(H.length>0){if(H.length>1)throw Error("Expecting 1 or 0 "+tK.tagName+" but finding "+H.length+"!");let e=new tK($(H[0]));n.appendChild(z(tK.tagName,tK.xsi_typeOptions,tK.tagName,e.getXsiType(),m.getID(),sF,sO)),N.delete(tK.tagName)}let j=a[e].getElementsByTagName(tQ.tagName);if(j.length>0){if(j.length>1)throw Error("Expecting 1 or 0 "+tQ.tagName+" but finding "+j.length+"!");let e=$(j[0]),t=new tQ(e);m.setDistributionCalcMethod(t),l(i,tQ.tagName);let s=P(l(i,tQ.tagName));n.appendChild(s),s.appendChild(I(tQ.tagName+" "+g(e),sO)),N.delete(tQ.tagName)}let Y=a[e].getElementsByTagName(t7.tagName);if(Y.length>0){if(Y.length>1)throw Error("Expecting 1 or 0 "+t7.tagName+" but finding "+Y.length+"!");let e=new t7($(Y[0]));m.setDensityOfStatesList(e);let t=l(i,t7.tagName),s=P(t);v(l(t,sH),n,null,s,t7.tagName,sF,sO);let a=Y[0].getElementsByTagName(t9.tagName),r=Y[0].getElementsByTagName(tS.tagName);if(r.length>0){if(r.length>1)throw Error("Expecting 1 or 0 "+tS.tagName+" but finding "+r.length+"!");let t=new tS($(r[0]),G(k(r[0])));e.setDescription(t)}if(0==a.length)throw Error("Expecting 1 or more "+t9.tagName+" but finding 0!");{let i=B(l(t,sQ),sO);D(i,t9.header),s.appendChild(i);for(let n=0;n<a.length;n++){let r=new t9($(a[n]));e.addDensityOfStates(r);let g=L(l(t,n),sO);s.appendChild(g);let m=a[n].getElementsByTagName(tT.tagName);if(1!=m.length)throw Error("Expecting 1 "+tT.tagName+" but finding "+m.length+"!");{let e=new tT($(m[0]),new(o(d))(G(k(m[0]))));r.setT(e)}let c=a[n].getElementsByTagName(t4.tagName);if(1!=c.length)throw Error("Expecting 1 "+t4.tagName+" but finding "+c.length+"!");{let e=new t4($(c[0]),new(o(d))(G(k(c[0]))));r.setQtot(e)}let u=a[n].getElementsByTagName(t6.tagName);if(1!=u.length)throw Error("Expecting 1 "+t6.tagName+" but finding "+u.length+"!");{let e=new t6($(u[0]),new(o(d))(G(k(u[0]))));r.setSumc(e)}let N=a[n].getElementsByTagName(t8.tagName);if(1!=N.length)throw Error("Expecting 1 "+t8.tagName+" but finding "+N.length+"!");{let e=new t8($(N[0]),new(o(d))(G(k(N[0]))));r.setSumg(e)}D(i,r.toStringArray()),i7(e.toCSV,s,i,h+"_"+t7.tagName,sO)}}N.delete(t7.tagName)}let X=t0.tagName,K=a[e].getElementsByTagName(X);if(K.length>0){let e;if(K.length>1)throw Error("Expecting 1 or 0 "+X+" but finding "+K.length+"!");let t=new t0($(K[0])),s=l(i,t0.tagName),a=P(s);v(l(s,sH),n,null,a,X,sF,sO);let o=tJ.tagName,d=K[0].getElementsByTagName(o);if(0==d.length)throw Error("Expecting 1 or more "+o+" but finding 0!");{e=[];let i=B(l(s,sQ),sO);D(i,t.getHeader());for(let t=0;t<d.length;t++){let s=new tJ($(d[t]));e.push(s),D(i,s.toStringArray())}a.appendChild(i),t.init(e),i7(t.toCSV.bind(t),a,i,h+"_"+t0.tagName,sO)}m.setThermoTable(t),N.delete(o),N.delete(X)}let W=a[e].getElementsByTagName(t3.tagName);if(W.length>0){if(1!=W.length)throw Error("Expecting only 1 extra DOSCMethod, but there are "+W.length);let e=new t3($(H[0])),t=l(i,t3.tagName),s=P(t);v(l(t,sH),n,null,s,t3.tagName,sF,sO);let a=W[0].getElementsByTagName(tW.tagName);if(a.length>0){if(1!=a.length)throw Error("Expecting only 1 bondRef, but there are "+a.length);let e=m.getBonds().getBondIds(),t=new tW($(a[0]),G(k(a[0]))),i=z(tW.tagName,e,tW.tagName,t.value,m.getID(),sF,sO);i.getElementsByTagName("select")[0].classList.add(tz.tagName),s.appendChild(i)}let r=W[0].getElementsByTagName(t1.tagName);if(r.length>0){if(1!=r.length)throw Error("Expecting only 1 HinderedRotorPotential, but there are "+r.length);let a=$(r[0]),g=new t1(a),h=l(t,t1.tagName),m=P(h);v(l(h,sH),s,null,m,t1.tagName,sF,sO),m.appendChild(z(t1.s_format,t1.formats,t1.tagName,g.getFormat(),l(h,t1.s_format),sF,sO)),iE(tb.energyUnits,a,m,l(h,t1.s_units),t1.tagName,sF,sO),m.appendChild(w("text",l(h,t1.s_expansionSize),sF,sO,e=>{let t=e.target;try{g.setExpansionSize(new(o(d))(t.value))}catch(e){alert("Invalid value, resetting..."),t.value=g.getExpansionSize().toString()}S(t)},g.getExpansionSize().toString(),t1.s_expansionSize)),function(e,t,s){l(e.id,t1.s_useSineTerms);let i=t1.s_useSineTerms+sU,n=t1.s_useSineTerms+sV,a=R(n,void 0,s);e.appendChild(a),a.classList.add(s$),a.classList.add(sX),!0==t.getUseSineTerms()?(a.textContent=i,a.classList.toggle(sX)):(a.textContent=n,a.classList.toggle(s$)),a.addEventListener("click",e=>{!1==t.getUseSineTerms()?(t.setUseSineTerms(!0),a.textContent=i):(t.setUseSineTerms(!1),a.textContent=n),a.classList.toggle(s$),a.classList.toggle(sX)})}(m,g,sO);let u=l(i,t1.tagName,tZ.tagName),N=P(u),p=v(l(u,sH),n,null,N,"PotentialPoints",sF,sO);m.appendChild(p);let x=[],f=r[0].getElementsByTagName(tZ.tagName);for(let e=0;e<f.length;e++){let t=new tZ($(f[e]));x.push(t);let s=l(u,tZ.tagName,e),i=L(s,sO);N.appendChild(i);let n=I(tZ.tagName+" "+e,sF);i.appendChild(n);let a=w("text",l(s,tZ.s_angle),sF,sF,e=>{let s=e.target;if(c(s.value)){let e=new(o(d))(s.value);t.setAngle(e)}else alert("Angle input is not a number, resetting..."),s.value=t.getAngle().toExponential();S(s)},t.getAngle().toExponential(),tZ.s_angle);i.appendChild(a);let r=I(tZ.s_potential,sF);i.appendChild(r);let g=y("text",l(s,tZ.s_potential),sF);i.appendChild(g),g.addEventListener("change",e=>{let s=e.target;if(c(s.value)){let e=new(o(d))(s.value);t.setPotential(e),console.log("Set "+tZ.tagName+" to "+e.toExponential())}else alert("Potential input is not a number, resetting..."),g.value=t.getPotential().toExponential();S(g)}),g.value=t.getPotential().toExponential(),S(g)}g.setPotentialPoints(x),e.setHinderedRotorPotential(g)}let g=H[0].getElementsByTagName(t2.tagName);if(g.length>0){if(1!=g.length)throw Error("Expecting only 1 Periodicity, but there are "+g.length);let t=G(k(g[0])),i=new t2($(g[0]),new(o(d))(t));e.setPeriodicity(i);let n=w("text",m.getID()+"_"+t2.tagName,sF,sO,s=>{let n=s.target;if(c(t=n.value)){let s=new(o(d))(t);i.value=s,e.getPeriodicity().value=s,console.log("Set "+t2.tagName+" to "+s)}else alert("Periodicity input is not a number, resetting..."),n.value=i.value.toExponential()},t,t2.tagName);s.appendChild(n)}m.setExtraDOSCMethod(e),N.delete(t3.tagName)}N.delete(t5.tagName);let Z=a[e].getElementsByTagName(t5.tagName);if(Z.length>0){if(1!=Z.length)throw Error("Expecting only 1 reservoirSize, but there are "+Z.length);let e=G(k(Z[0])),t=new(o(d))(e),s=new t5($(Z[0]),t);m.setReservoirSize(s);let i=w("number",m.getID()+"_"+t5.tagName,sF,sO,e=>{let t=e.target;s.value=new(o(d))(t.value),S(t)},e,t5.tagName);n.appendChild(i)}N.delete("#text"),N.size>0&&(console.warn("There are additional unexpected moleculeTagNames:"),N.forEach(e=>console.warn(e)));let Q=document.createElement("div");Q.id=l(m.getID(),"molstar"),n.appendChild(Q)}let h=R(sq,void 0,sO);return t.appendChild(h),h.addEventListener("click",()=>{let e=prompt("Please enter a name for the molecule","Kr");if(null==e)return;let i=new se(new Map,e);i.setAtoms(new t_(new Map)),i.setBonds(new tR(new Map)),s.set(e,i);let n=l(se.tagName,s.size),a=P(n),o=v(l(n,sH),t,h,a,e,sF,sO);ia(ea.tagName,i.getID()),s9(i,o.querySelector(x),a,sO),a.appendChild(s7(l(i.getID(),sj),i.getDescription.bind(i),i.setDescription.bind(i),sF,sO));let d=l(n,t_.tagName),r=P(d);v(l(d,sH),a,null,r,t_.tagName,sF,sO),r.appendChild(it(i,r,tM.tagName,sF,sO));let g=l(n,tR.tagName),m=P(g);v(l(g,sH),a,null,m,tR.tagName,sF,sO),m.appendChild(io(i,e,m,tz.tagName,sF,sO)),ix(i,a,sF,sO);let c=l(n,tq.tagName),u=P(c);v(l(c,sH),a,null,u,tq.tagName,sF,sO)}),t}(r),tE.tagName,sF,sG),t.setMoleculeList(new tE(new Map,Array.from(s.values())));let M=document.getElementById("reactions"),_=s1(tw.tagName);f(_,s0),v(_,M,null,function(e){i=new Map;let t=P(void 0,sF),s=X(e,tw.tagName),n=new Set;if(s.childNodes.forEach(function(e){n.add(e.nodeName)}),1!=n.size&&!(2==n.size&&n.has("#text")))throw console.error("reactionListTagNames:"),n.forEach(e=>console.error(e)),Error("Additional tag names in reactionList:");if(!n.has(sf.tagName))throw Error('Expecting tags with "'+sf.tagName+'" tagName but there are none!');let a=s.getElementsByTagName(sf.tagName);console.log("Number of reactions="+a.length);for(let e=0;e<a.length;e++){let s=new sf($(a[e]));i.set(s.id,s);let n=new Set,r=a[e].childNodes,h=l(sf.tagName,e),m=P(h);for(let e=0;e<r.length;e++){let t=r[e];n.has(t.nodeName)?"#text"!=t.nodeName&&console.warn("Another ChildNode with nodeName="+t.nodeName):n.add(t.nodeName)}let c=a[e].getElementsByTagName(ss.tagName);if(n.delete(ss.tagName),c.length>0){let e=l(s.id,ss.tagName),t=P(e);v(l(e,sH),m,null,t,"Reactants",sF,sO);let i=[];for(let e=0;e<c.length;e++){let n=l(s.id,ss.tagName,e),a=new st($(A(c[e],se.tagName))),o=new ss($(c[e]),a);i.push(o);let d=z(a.ref+" role",ss.roleOptions,"Role",a.role,l(n,sW),sF,sO);d.querySelector("select")?.addEventListener("change",e=>{let t=e.target;a.setRole(t.value),console.log("Set Role to "+t.value),T(t)}),t.appendChild(d)}s.setReactants(i)}let u=a[e].getElementsByTagName(si.tagName);if(n.delete(si.tagName),u.length>0){let e=l(h,si.tagName),t=P(e);v(l(e,sH),m,null,t,"Products",sF,sO);let i=[];for(let e=0;e<u.length;e++){let s=new st($(A(u[e],se.tagName))),n=new si($(u[e]),s);i.push(n);let a=z(s.ref+" role",si.roleOptions,s.role,s.ref,"Role",sF,sO),o=a.querySelector("select");o.value=s.role,o.addEventListener("change",e=>{let t=e.target;s.setRole(t.value),console.log("Set Role to "+t.value),T(t)}),T(o),t.appendChild(a)}s.setProducts(i)}v(l(h,sH),t,null,m,s.id+" ("+s.getLabel()+")",sF,sO);let N=a[e].getElementsByTagName(sh.tagName);if(N.length>0){if(N.length>1)throw Error("Expecting 1 "+sh.tagName+" but finding "+N.length+"!");let e=new sh($(N[0]));s.setTunneling(e);let t=z(sh.tagName,sh.options,"Tunneling",e.getName(),s.id,sF,sO);t.querySelector("select")?.addEventListener("change",t=>{let s=t.target;e.setName(s.value),console.log("Set Tunneling to "+s.value),T(s)}),m.appendChild(t)}let p=a[e].getElementsByTagName(sn.tagName);if(p.length>0){let e=l(h,si.tagName),t=P(e);v(l(e,sH),m,null,t,"Transition States",sF,sO);let i=[];for(let e=0;e<p.length;e++){let s=new st($(A(p[e],se.tagName))),n=new sn($(p[e]),s);i.push(n);let a=I(s.ref+" role transitionState",sO);t.appendChild(a)}s.setTransitionStates(i)}let x=a[e].getElementsByTagName(sl.tagName);if(x.length>0){if(x.length>1)throw Error("Expecting 1 "+sl.tagName+" but finding "+x.length+"!");{let e,t=document.createElement("div"),i=$(x[0]),n=i.get("name");if(void 0==n||n==sg.xsiType2){let n=i.get("xsi:type");if(e=new sg(i),n==sg.xsiType||n==sg.xsiType2){let i=l(s.id,sl.tagName),n=P(i),a=v(l(i,sH),m,null,n,sl.tagName,sF,sO);m.appendChild(a);let r=x[0].getElementsByTagName(sa.tagName);if(null!=r&&null!=r[0]){let i=O(r[0]),n=new(o(d))(i),a=$(r[0]),l=new sa(a,n);e.setPreExponential(l);let g=sa.tagName,h=s.id+"_"+sg.tagName+"_"+sa.tagName,m=w("number",h,sF,sO,e=>{iy(l,e.target)},i,g);t.appendChild(m);let c=m.querySelector("input");c.value=i,S(c),c.addEventListener("change",e=>{i=e.target.value,l.value=new(o(d))(i),console.log("Set "+h+" to "+i),S(c)}),iE(void 0,a,m,s.id+"_"+sg.xsiType+"_"+sa.tagName,sa.tagName,sF,sO),t.appendChild(m)}let g=x[0].getElementsByTagName(so.tagName);if(null!=g&&null!=g[0]){let i=O(g[0]),n=new(o(d))(i),a=$(g[0]),r=new so(a,n);e.setActivationEnergy(r);let l=so.tagName,h=s.id+"_"+sg.tagName+"_"+so.tagName,m=w("number",h,sF,sO,e=>{iy(r,e.target)},i,l),c=m.querySelector("input");c.value=i,S(c),c.addEventListener("change",e=>{i=e.target.value,r.value=new(o(d))(i),console.log("Set "+h+" to "+i),S(c)}),iE(void 0,a,m,s.id+"_"+sg.xsiType+"_"+so.tagName,so.tagName,sF,sO),t.appendChild(m)}let h=x[0].getElementsByTagName(sd.tagName);if(null!=h&&null!=h[0]){let i=O(h[0]),n=new(o(d))(i),a=$(h[0]),r=new sd(a,n);e.setTInfinity(r);let l=sd.tagName,g=s.id+"_"+sg.tagName+"_"+sd.tagName,m=w("number",g,sF,sO,e=>{iy(r,e.target)},i,l),c=m.querySelector("input");c.value=i,S(c),c.addEventListener("change",e=>{i=e.target.value,r.value=new(o(d))(i),console.log("Set "+g+" to "+i),S(c)}),iE(void 0,a,m,s.id+"_"+sg.xsiType+"_"+sd.tagName,sd.tagName,sF,sO),t.appendChild(m)}let c=x[0].getElementsByTagName(sr.tagName);if(null!=c&&null!=c[0]){let i=O(c[0]),n=new(o(d))(i),a=$(c[0]),r=new sr(a,n);e.setNInfinity(r);let l=sr.tagName,g=s.id+"_"+sg.tagName+"_"+sr.tagName,h=w("number",g,sF,sO,e=>{iy(r,e.target)},i,l);t.appendChild(h);let m=h.querySelector("input");m.value=i,S(m),m.addEventListener("change",e=>{i=e.target.value,r.value=new(o(d))(i),console.log("Set "+g+" to "+i),S(m)}),iE(void 0,a,h,s.id+"_"+sg.xsiType+"_"+sr.tagName,sr.tagName,sF,sO),t.appendChild(h)}}else throw Error("Unexpected xsi:type="+n)}else{e=new sl(i);let s=document.createElement("label");s.textContent=sl.tagName+": "+i.get("name"),Object.assign(s.style,sO),t.appendChild(s),m.appendChild(t)}s.setMCRCMethod(e)}}let f=a[e].getElementsByTagName(sm.tagName);if(f.length>0){if(f.length>1)throw Error("Expecting 1 "+sm.tagName+" but finding "+f.length+"!");let e=new(o(d))(G(k(f[0]))),t=new sm($(f[0]),e);s.setExcessReactantConc(t);let i=w("number",l(s.id,sm.tagName),sF,sO,e=>{iy(t,e.target)},e.toExponential(),sm.tagName);m.appendChild(i)}let E=a[e].getElementsByTagName(sx.tagName);if(E.length>0){if(E.length>1)throw Error("Expecting 1 "+sx.tagName+" but finding "+E.length+"!");let e=$(E[0]),t=new sx(e);s.setCanonicalRateList(t);let i=l(s.id,sx.tagName),n=P(i),a=v(l(i,sH),m,null,n,sx.tagName,sF,sO);m.appendChild(a);let r=E[0].getElementsByTagName(tS.tagName);if(r.length>0){if(r.length>1)throw Error("Expecting 1 "+tS.tagName+" but finding "+r.length+"!");let s=G(k(r[0]));t.setDescription(new tS($(r[0]),s));let i=I(s+" ("+g(e)+")",sO);n.appendChild(i)}let h=E[0].getElementsByTagName(sp.tagName);if(h.length>0){let e=B(l(n,sQ),sO);n.appendChild(e);for(let s=0;s<h.length;s++){let i=new sp($(h[s]));t.addKinf(i);let n=h[s].getElementsByTagName(tT.tagName);if(n.length>0){if(n.length>1)throw Error("Expecting 1 "+tT.tagName+" but finding "+n.length+"!");let e=new(o(d))(G(k(n[0])));i.setT(new tT($(n[0]),e))}let a=h[s].getElementsByTagName(sc.tagName);if(a.length>0){if(a.length>1)throw Error("Expecting 1 "+sc.tagName+" but finding "+a.length+"!");let e=new(o(d))(G(k(a[0])));i.setVal(new sc($(a[0]),e))}let r=h[s].getElementsByTagName(su.tagName);if(r.length>0){if(r.length>1)throw Error("Expecting 1 "+su.tagName+" but finding "+r.length+"!");let e=new(o(d))(G(k(r[0])));i.setRev(new su($(r[0]),e))}let l=h[s].getElementsByTagName(sN.tagName);if(l.length>0){if(l.length>1)throw Error("Expecting 1 "+sN.tagName+" but finding "+l.length+"!");let e=new(o(d))(G(k(l[0])));i.setKeq(new sN($(l[0]),e))}0==s&&D(e,i.getHeader()),D(e,i.toStringArray())}i7(t.toCSV.bind(t),n,e,s.id+"_"+sx.tagName,sF)}}}return t}(r),tw.tagName,sF,sG),t.setReactionList(new tw(new Map,Array.from(i.values())));let F=document.getElementById("reactionsDiagram"),U=s1(s2);null!=a&&(a.close(),a=null),f(U,s0);let V=P(void 0,sO);v(U,F,null,V,s2,sF,sG);let q=l(U,x+"s"),H=P(q);V.appendChild(H);let j=l(q,x),Y="Pop into a new Window",K=R(Y,j);H.appendChild(K);let et=document.createElement("canvas");et.id=s5,V.appendChild(et),et.height=400,et.style.border="1px solid black",i5(et,e,s4,4,2),K.addEventListener("click",()=>{if(null==a){let t=document.createElement("canvas");t.id=s5,(a=window.open("",s2,"width="+et.width+", height="+et.height)).document.body.appendChild(t),i5(t,e,s4,4,2),f(s5,s0),K.textContent="Pop into this Window"}else(et=document.createElement("canvas")).id=s5,V.appendChild(et),i5(et,e,s4,4,2),a.close(),a=null,K.textContent=Y}),i9(et,H,null,s2);let es=document.getElementById("conditions"),ei=s1(em.tagName);f(ei,s0),v(ei,es,null,function(e){let s;console.log(em.tagName);let i=P(void 0,sF),n=e.getElementsByTagName(em.tagName);for(let e=0;e<n.length;e++){let s=n[e],a=l(em.tagName,e.toString()),o=P(a,sF),d=l(a,sH);v(d,i,null,o,em.tagName+" "+e.toString(),sF,sO);let r=iS($(s),e);iC(r,o,e,s),ib(r,o,e,s),iu(o,sO,t.removeConditions.bind(t),e).addEventListener("click",e=>{f(d,s0)})}return s=R(sq,void 0,sO),i.appendChild(s),s.addEventListener("click",e=>{let n,a=t.getNextConditionsID();console.log("Add Conditions "+a.toString());let o=l(em.tagName,a.toString()),d=P(o,sF),r=l(o,sH);if(a>0){let e=document.getElementById(l(em.tagName,(a-1).toString(),sH)).nextElementSibling;n=null!=e&&e.parentElement==i?e:s}else n=s;v(r,i,n,d,em.tagName+" "+a.toString(),sF,sO);let g=iS(new Map,a);iC(g,d,a,null),ib(g,d,a,null),iu(d,sO,t.removeConditions.bind(t),a).addEventListener("click",e=>{f(r,s0)})}),i}(r),"ConditionsList",sF,sG);let eo=document.getElementById("modelParameters"),ed=s1(tf.tagName);f(ed,s0),v(ed,eo,null,(console.log(tf.tagName),m=P(void 0,sF),u=X(r,tf.tagName),N=new tf($(u)),t.setModelParameters(N),function(e,t,s){let i,n,a=L(void 0,sO);s.appendChild(a);let r=tu.tagName,l=r+sU,g=r+sV,h=t.getElementsByTagName(r),m=R(r,void 0,sF);m.classList.add(s$),m.classList.add(sX),a.appendChild(m);let c=tf.tagName+"_"+r+"_input",u=tf.tagName+"_"+r+"_select";if(1==h.length){n=G(k(h[0]));let t=new(o(d))(n);i=new tu($(h[0]),t),m.textContent=l,iF(e,a,i,c,u,n,e.setGrainSize,tb.energyUnits),m.classList.toggle(sX)}else n="",i=new tu(new Map,sJ),m.textContent=g,m.classList.toggle(s$);m.addEventListener("click",()=>{e.index.has(tu.tagName)?(n=i.value.toExponential(),e.removeGrainSize(),document.getElementById(c)?.remove(),document.getElementById(u)?.remove(),m.textContent=g):(iF(e,a,i,c,u,n,e.setGrainSize,tb.energyUnits),m.textContent=l),m.classList.toggle(s$),m.classList.toggle(sX)})}(N,u,m),iO(N,u,m,tn,N.setAutomaticallySetMaxEne,N.removeAutomaticallySetMaxEne),iO(N,u,m,tp,N.setEnergyAboveTheTopHill,N.removeEnergyAboveTheTopHill),iO(N,u,m,tx,N.setMaxTemperature,N.removeMaxTemperature),m),tf.tagName,sF,sG);let er=document.getElementById("control"),el=s1(td.tagName);f(el,s0),v(el,er,null,function(e){let s;console.log(td.tagName);let i=P(void 0,sF),n=e.getElementsByTagName(td.tagName);for(let e=0;e<n.length;e++){let s=n[e],a=l(td.tagName,e.toString()),o=P(a,sF);i.appendChild(o);let d=l(a,sH);v(d,i,null,o,td.tagName+" "+e.toString(),sF,sO);let r=iq($(s),e),h=new Map;iU(r).forEach(t=>{ij(r,o,e,h,s,null,t.class,t.setMethod,t.removeMethod)});let m=L(void 0,sO);new Map([...h.entries()].sort()).forEach(e=>{m.appendChild(e)}),o.appendChild(m),i$(r,o,null,sO),iY(r,o,e,s,sO),iV(r).forEach(t=>{ij(r,o,e,h,s,sO,t.class,t.setMethod,t.removeMethod,!0)});let c=s.getElementsByTagName(eL.tagName);if(1==c.length){let e=$(c[0]),t=G(k(c[0])),s=new eL(e,t);r.setForceMacroDetailedBalance(s);let i=L(void 0,sO);o.appendChild(i);let n=I(eL.tagName+" "+g(e)+" "+t,sF);i.appendChild(n)}iu(o,sO,t.removeControl.bind(t),e).addEventListener("click",e=>{f(d,s0)})}return s=R(sq,void 0,sO),i.appendChild(s),s.addEventListener("click",e=>{let n,a=t.getNextControlID();console.log("Add Control "+a.toString());let o=l(td.tagName,a.toString()),d=P(o,sF);if(a>0){let e=document.getElementById(l(td.tagName,(a-1).toString(),sH)).nextElementSibling;n=null!=e&&e.parentElement==i?e:s}else n=s;let r=l(o,sH);v(r,i,n,d,td.tagName+" "+a.toString(),sF,sO);let g=iq(new Map,a),h=new Map;iU(g).forEach(e=>{ij(g,d,a,h,null,null,e.class,e.setMethod,e.removeMethod)});let m=L(void 0,sO);new Map([...h.entries()].sort()).forEach(e=>{m.appendChild(e)}),d.appendChild(m),i$(g,d,null,sO),iY(g,d,a,null,sO),iV(g).forEach(e=>{ij(g,d,a,h,null,sO,e.class,e.setMethod,e.removeMethod,!0)}),iu(d,sO,t.removeControl.bind(t),a).addEventListener("click",e=>{f(r,s0)})}),i}(r),"ControlList",sF,sG);let eg=document.getElementById("metadata"),eh=s1(tc.tagName);f(eh,s0),v(eh,eg,null,function(e){console.log(tc.tagName);let s=P(void 0,sF),i=e.getElementsByTagName(tc.tagName);if(i.length>0){if(i.length>1)throw Error("More than one MetadataList element.");let e=new tc($(i[0]));function n(t,n,a){let o=i[0].getElementsByTagName(t);if(o.length>0){if(1==o.length){let t=k(o[0])?.nodeValue??"",i=new n($(o[0]),t),d=P(void 0,sO);s.appendChild(d),d.appendChild(I(i.tagName+" "+t,sF)),a.call(e,i)}else throw Error(`More than one ${t} element.`)}}t.setMetadataList(e),n(tl.tagName,tl,e.setSource),n(tg.tagName,tg,e.setCreator),n(th.tagName,th,e.setDate),n(tm.tagName,tm,e.setContributor)}return s}(r),tc.tagName,sF,sG);let ec=document.getElementById("analysis"),eu=s1(en.tagName);f(eu,s0),v(eu,ec,null,function(e){console.log(en.tagName);let s=l(en.tagName),i=P(s,sF),a=e.getElementsByTagName(en.tagName);if(a.length>0){if(a.length>1)throw Error("More than one Analysis element.");let e=new en($(a[0]));t.setAnalysis(e);let r=a[0].getElementsByTagName(tS.tagName);if(r.length>0){if(1==r.length){let t=k(r[0])?.nodeValue??"",n=new tS($(r[0]),t),a=P(l(s,tS.tagName),sO);i.appendChild(a),a.appendChild(I(n.tagName+" "+t,sF)),e.setDescription(n)}else throw Error("More than one Description element.")}let m=a[0].getElementsByTagName(Z.tagName),c=l(i,Z.tagName),u=P(c,sO);if(v(c,i,null,u,Z.tagName+"s",sF,sO),m.length>0)for(let t=0;t<m.length;t++){let s=$(m[t]),i=new Z(s),n=i.tagName+" "+t.toString()+" "+g(s),a=l(u.id,t.toString()),r=P(c,sO);v(a,u,null,r,n,sF,sG),e.addEigenvalueList(i);let N=[],p=m[t].getElementsByTagName(W.tagName);if(p.length>0)for(let e=0;e<p.length;e++){let t=new(o(d))(k(p[e])?.nodeValue);N.push(t),i.addEigenvalue(new W($(p[e]),t))}r.appendChild(I(h(N,", "),sF))}let N=a[0].getElementsByTagName(ee.tagName),p=l(i,ee.tagName),x=P(p,sO);if(v(p,i,null,x,ee.tagName+"s",sF,sO),N.length>0)for(let t=0;t<N.length;t++){let s=$(N[t]);void 0!=s.get("T")&&new(o(d))(s.get("T")),void 0!=s.get("conc")&&new(o(d))(s.get("conc"));let a=new ee(s),r=a.tagName+" "+t.toString()+" "+g(s),h=l(i.id,ee.tagName,t.toString()),m=l(h,t.toString()),c=P(h,sO);v(m,x,null,c,r,sF,sG),e.addPopulationList(a);let u=new Map,p=[];p.push("time");let f=N[t].getElementsByTagName(J.tagName);if(f.length>0)for(let e=0;e<f.length;e++){let t=$(f[e]),s=new J(t,[]);a.addPopulation(s);let i=void 0!=t.get("time")?new(o(d))(t.get("time")):sJ,n=new Map;u.set(i,n);let r=f[e].getElementsByTagName(Q.tagName);if(r.length>0)for(let t=0;t<r.length;t++){let i=$(r[t]),a=i.get("ref");0==e&&p.push(a);let l=new(o(d))(k(r[t])?.nodeValue),g=new Q(i,l);s.addPop(g),n.set(a,l)}}let E=P(l(m,"graph"),sF);c.appendChild(E);let w=document.createElement("canvas");E.appendChild(w);let y=new i3(w,u,s6);n.push(y),i9(w,c,E,r);let C=P(l(m,sQ),sF);c.appendChild(C);let b=B(l(h,sQ),sF);D(b,p),u.forEach((e,t)=>{let s=[];s.push(t.toString()),e.forEach((e,t)=>{s.push(e.toString())}),D(b,s)}),C.appendChild(b),i7(()=>(function(e){let t="",s=e.rows;for(let e=0;e<s.length;e++){let i=s[e].cells;for(let e=0;e<i.length;e++)t+=i[e].textContent,e<i.length-1&&(t+=",");t+="\n"}return t})(b),c,C,r,sF)}}return i}(r),en.tagName,sF,sG)}(new DOMParser().parseFromString(E,"text/xml"))}}};let C=r.slice(p,p+1048576);u.readAsText(C),p+=1048576}},N.click(),u.textContent=m}),r.appendChild(u);let N="Increase fontsize",p=R(N,l(N),sF);p.addEventListener("click",()=>{let e=parseInt(getComputedStyle(document.body).fontSize);document.body.style.fontSize=e+1+"px",null!=a&&(a.document.body.style.fontSize=e+1+"px"),s8(),n.forEach(e=>{e.draw(s6)})}),r.appendChild(p);let E="Decrease fontsize",C=R(E,l(E),sF);C.addEventListener("click",()=>{let e=parseInt(getComputedStyle(document.body).fontSize);document.body.style.fontSize=e-1+"px",null!=a&&(a.document.body.style.fontSize=e-1+"px"),s8()}),r.appendChild(C);let b="Light/Dark Mode",M=R(b,l(b),sF);M.addEventListener("click",()=>{(e=!e)?document.body.className="dark-mode":document.body.className="light-mode",s8()}),r.appendChild(M);let _="Save",F=R(_,l(_),sF);F.addEventListener("click",i6),r.appendChild(F);let U=document.getElementById("welcome");document.body.appendChild(U);let V=document.createElement("p");U.appendChild(V),V.appendChild(document.createTextNode("Welcome to MXG - a free and open source program to assist in creating, editing and         visualising MESMER program data. The main MXG development repository is: ")),V.appendChild(sT),V.appendChild(document.createTextNode(". Details of MESMER - the Master Equation Solver for Multi Energy-well Reactions         can be found at: ")),V.appendChild(sR),V.appendChild(document.createTextNode("."));let q=document.createElement("p");U.appendChild(q),q.appendChild(document.createTextNode("MXG was originally developed by a team based at ")),q.appendChild(sL),q.appendChild(document.createTextNode(" funded by ")),q.appendChild(sP),q.appendChild(document.createTextNode(" from January to April 2024."));let H=document.createElement("p");U.appendChild(H),H.textContent="The Menu contains 6 buttons including the Create and Load buttons which are the two ways to begin. The Create button         is to start afresh and allows you to specify the title and input components for a MESMER data input file. Buttons for doing this         will appear below the Menu. The Load button is for loading an existing MESMER data file.  If the loaded file is a MESMER output         file, output components will be presented after the input components. The Save button is for saving a new MESMER data file. The         saved file should have the same content as any loaded file except: it will contain no comments or blank lines, values will be         trimmed of white space, and some numbers may be output in a different style (there should be no loss of precision). The saved file         should reflect any changes made via the interface. Between the Load and Save buttons are buttons to increase or decrease the         font size and to change between a light and dark theme. In addition to increasing or decreasing the font size of text elements,         the fontsize buttons will also redraw diagrams with a larger or smaller fontsize respectively.";let j=document.createElement("p");U.appendChild(j),j.appendChild(document.createTextNode("MXG can be used online and installed locally and used offline as a Progressive Web App (PWA).         PWA installation varies by Web browser/device. For guidance please see the MXG main development repository README: ")),j.appendChild(sT.cloneNode(!0)),j.appendChild(document.createTextNode("."));let Y=document.createElement("p");U.appendChild(Y),Y.appendChild(document.createTextNode('A MESMER data file is expected to contain the following child elements of the parent         "me:mesmer" element: "me:title", "moleculeList", "reactionList", "me:conditions", "me:modelParameters", and "me:control". If a         child element is missing or there are multiple "me:title", "moleculeList", "reactionList", or "me:modelParameters" elements, a         warning alert message should appear. If the file is a MESMER output data file, it is expected to also contain         "me:metadataList" and "me:analysis" child elements.'));let K=document.createElement("p");U.appendChild(K),K.appendChild(document.createTextNode('The "me:title" value is presented in an input alongside an associated label. The input         can be used to change the value which is also used to compose filenames for files saved from MXG. Other elements are         presented via buttons which contain a triangular symbol. A triangle orientated with a point down: ▼ can be actioned to show more elements. A triangle orientated with a point up: ▲ can be actioned to         hide those elements.'));let et=document.createElement("p");U.appendChild(et),K.textContent=' The Reaction Diagram button expands/collapses a well diagram for the reactions. This diagram should redraw if         any "me:ZPE" property value of a molecule is changed. The diagram can be opened in a new Window and saved to a PNG format file.';let es=document.createElement("p");U.appendChild(es),es.textContent="MXG uses 3DMol.js under a BSD-3-Clause licence to visualise molecules with coordinates. For details of     3DMol.js please see the GitHub repository: ",es.appendChild(sB),es.appendChild(document.createTextNode(". If you use the 3DMol.js visualisations, please cite: Nicholas Rego and David Koes     3Dmol.js: molecular visualization with WebGL Bioinformatics (2015) 31 (8): 1322-1324 ")),es.appendChild(sD),es.appendChild(document.createTextNode("."));let ei=document.createElement("p");U.appendChild(ei),ei.textContent="MXG uses Big.js under an MIT licence to handle numbers. For details of Big.js please see the GitHub repository: ",ei.appendChild(sk),ei.appendChild(document.createTextNode("."))});class i3{constructor(e,t,s){this.canvas=e,this.data=t,this.draw(s)}draw(e){this.canvas.width=800,this.canvas.height=400;let t=this.canvas.getContext("2d");t.font=e,t.clearRect(0,0,this.canvas.width,this.canvas.height);let s=this.canvas.width,i=this.canvas.height,n=Number.MAX_VALUE,a=Number.MIN_VALUE,o=0;this.data.forEach((e,s)=>{let i=Math.log10(s.toNumber());n=Math.min(n,i),a=Math.max(a,i),e.forEach((e,s)=>{o=Math.max(o,t.measureText(s).width)})});let d=0;for(let e=0;e<2;e++){let s=1-1*e;d=Math.max(d,t.measureText(s.toString()).width)}let r=t.measureText("0"),l=r.actualBoundingBoxAscent+r.actualBoundingBoxDescent,g=4*l,h=d+l+20,m=i-(h+3*l),c=s-(g+o+20),u=(c-h)/(a-n),N=(g-m)/1;t.beginPath(),t.moveTo(h,m),t.lineTo(c,m),t.stroke(),t.beginPath(),t.moveTo(h,m),t.lineTo(h,g),t.stroke();let p=["red","green","blue","orange","purple","grey","cyan","magenta","lightblue","lightgreen","pink","yellow","brown","black"],x=new Map;this.data.forEach((e,s)=>{let i=0;e.forEach((e,a)=>{let o=h+(Math.log10(s.toNumber())-n)*u,d=e.toNumber();if(d<1){let e=m+(d-0)*N;if(e>0){t.beginPath(),t.arc(o,e,2,0,2*Math.PI);let s=p[i%p.length];x.set(a,s),t.fillStyle=s,t.fill()}}i++})}),t.textAlign="center",t.textBaseline="top",t.fillStyle="black",t.fillText("log10(time/secs)",h+(c-h)/2,m+g/2),t.save(),t.rotate(-Math.PI/2),t.textAlign="center",t.textBaseline="top",t.fillText("fractional population",-m-(g-m)/2,h-h),t.restore();let f=a-n,v=Math.abs(Math.ceil(f/Math.pow(10,Math.floor(Math.log10(f)))));console.log("xTickSpacing="+v);let E=Math.ceil(n/v),w=E*v;for(;w<a;){console.log("xTick="+w);let e=h+(w-n)*u;t.beginPath(),t.moveTo(e,m),t.lineTo(e,m+5),t.stroke(),t.fillText(w.toString(),e,m+5),w+=v}for(let e=0;e<2;e++){let s=m-1*e;t.beginPath(),t.moveTo(h,s),t.lineTo(h-5,s),t.stroke()}let y=0;x.forEach((e,s)=>{let i=t.measureText(s),n=i.actualBoundingBoxAscent+i.actualBoundingBoxDescent;y=Math.max(y,n)});let C=c+20,b=y;E=0,x.forEach((e,s)=>{let i=g+E*b;t.fillStyle=e,t.fillRect(C,i,y/2,y/2),t.fillStyle="black",t.fillText(s,C+l+t.measureText(s).width/2,i-y/2),E++})}}function i5(e,t,n,a,o){if(console.log("drawReactionDiagram"),null!=e){var d,l;let g,h,m,c,u,x,f,v,E;t?(g="lightgrey",h="lightblue",m="orange"):(g="darkgrey",h="blue",m="darkorange");let w=e.getContext("2d");w.clearRect(0,0,e.width,e.height),w.font="bold "+n;let y=(d=w.font,w.font=d,(l=w.measureText("Aj")).actualBoundingBoxAscent+l.actualBoundingBoxDescent),C=[],b=new Set,S=new Set,T=new Set,M=new Map,_=new Map,z=0;i.forEach(function(e,t){let i=e.getTransitionStates(),n=e.getReactantsLabel();if(void 0!=n){C.push(n),b.has(n)&&S.add(n);let t=e.getReactantsEnergy(s);c=p(c,t),u=N(u,t),_.set(n,t),!M.has(n)&&(M.set(n,z),z++)}let a=e.getProductsLabel();if(void 0!=a){b.add(a);let t=e.getProductsEnergy(s);if(c=p(c,t),u=N(u,t),_.set(a,t),M.has(a)){z--;let e=r(M,a);M.forEach(function(t,s){t>e&&M.set(s,t-1)}),void 0!=i&&(i.forEach(function(e){let i=e.getMolecule().ref;T.add(i),M.set(i,z),t=s.get(i)?.getEnergy()??sJ,c=p(c,t),u=N(u,t),_.set(i,t),z++}),M.set(a,z),z++)}else void 0!=i&&i.forEach(function(e){let i=e.getMolecule().ref;T.add(i),M.set(i,z),t=s.get(i)?.getEnergy()??sJ,c=p(c,t),u=N(u,t),_.set(i,t),z++}),M.set(a,z),z++}});let R=u.minus(c).toNumber(),P=[];M.forEach(function(e,t){P[e]=t});let L=0,I=0,B=new Map,D=new Map,A=new Map,k=new Map,G=new Map,O=new Map;P.forEach(function(e){let t=r(_,e),s=(t-c.toNumber())*400/(R+0)+0;E=Math.max(sy(w,t.toString(),n),sy(w,e,n)),f=L+E+5,v=x=s+a,B.set(e,[L,x]),D.set(e,[f,v]),b.has(e)&&(A.set(e,[L,x]),k.set(e,[f,v])),T.has(e)&&(G.set(e,[L,x]),O.set(e,[f,v])),L=f+10,I=f}),e.width=I;let F=400+4*y+2*a;e.height=F,w.transform(1,0,0,-1,0,F),i.forEach(function(e,t){let s=e.getTransitionStates(),i=e.getReactantsLabel(),n=e.getProductsLabel(),a=r(D,i),d=r(A,n);s.length>0?s.forEach(function(e){let t=e.getMolecule().ref,s=r(G,t);sE(w,g,o,a[0],a[1],s[0],s[1]);let i=r(O,t);sE(w,g,o,i[0],i[1],d[0],d[1])}):sE(w,g,o,a[0],a[1],d[0],d[1])}),C.forEach(function(e){let t=r(_,e),s=(t-c.toNumber())*400/(R+0)+0,i=r(B,e)[0],o=s+a,d=r(D,e)[0],l=t.toString();sv(w,h,a,i,o,d,o,n,y,e,l)}),b.forEach(function(e){let t=r(_,e),s=(t-c.toNumber())*400/(R+0)+0,i=r(A,e)[0],o=s+a,d=r(k,e)[0],l=t.toString();S.has(e)?sv(w,m,a,i,o,d,o,n,y,e,l):sv(w,"green",a,i,o,d,o,n,y,e,l)}),T.forEach(function(e){let t=r(_,e),s=(t-c.toNumber())*400/(R+0)+0,i=r(G,e)[0],o=s+a;sv(w,"red",a,i,o,r(O,e)[0],o,n,y,e,t.toString())})}}function i4(e,t,s,i=!1){let n=document.createElement("a");n.href=i?e:`data:${t};charset=utf-8,`+encodeURIComponent(e),n.download=s,document.body.appendChild(n),n.click(),document.body.removeChild(n)}function i6(){if(null==t){alert("No Mesmer object to save.");return}console.log("saveXML"),i4(tb.header+t.toXML("  ",""),"text/xml",i8(t.getTitle()?.value)+".xml")}function i8(e){return e.replace(/[^a-z0-9]/gi,"_")}function i9(e,s,i,n){let a=R("Save as PNG",l("saveButton"),sF);null!=i?s.insertBefore(a,i):s.appendChild(a),a.addEventListener("click",()=>{i4(e.toDataURL(),"image/png",i8(t.getTitle()?.value+"_"+n)+".png",!0)})}function i7(e,s,i,n,a){let o=R("Save as CSV",l(s.id,x,sK),a);s.insertBefore(o,i),o.addEventListener("click",()=>{let s=e(),i=i8(t.getTitle()?.value+"_"+n)+".csv";i4(s,"text/csv",i),console.log("Saved "+i)})}
//# sourceMappingURL=index.1f84f3be.js.map
