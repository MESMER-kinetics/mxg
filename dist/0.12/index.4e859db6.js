let e,t,s,i,n,a,o,d,l,r,g,h,m,c;function u(e){return e&&e.__esModule?e.default:e}var p={};function N(e,t){if(!e.has(t))throw Error(`Key ${t} not found in map`);return e.get(t)}function f(...e){let t=e.map(e=>e.toString()).join("-").replace(/[^a-zA-Z-_0-9]/g,"_");return/^[0-9]|^--|-^[0-9]/.test(t)&&(t="_"+t),t}function x(e,t){return null==e?"":(void 0==t&&(t=", "),Array.from(e.entries()).map(([e,t])=>`${null==e?"null":e.toString()}(${null==t?"null":t.toString()})`).join(t))}function v(e,t){return void 0==t&&(t=", "),e.map(e=>null==e?"null":e.toString()).join(t)}function E(e){let t=[];for(let s=0;s<e.length;s++)t.push(new(u(p))(e[s]));return t}function w(e){try{return new(u(p))(e),!0}catch(e){return!1}}function y(e,t){return void 0==t&&(t=" "),e.map(e=>e.toString()).join(t)}function C(e,t){return null==e||e.lt(t)?t:e}function b(e,t){return null==e||e.gt(t)?t:e}!function(e){var t,s="[big.js] ",i=s+"Invalid ",n=i+"decimal places",a=i+"rounding mode",o=s+"Division by zero",d={},l=void 0,r=/^-?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i;function g(e,t,s,i){var n=e.c;if(s===l&&(s=e.constructor.RM),0!==s&&1!==s&&2!==s&&3!==s)throw Error(a);if(t<1)i=3===s&&(i||!!n[0])||0===t&&(1===s&&n[0]>=5||2===s&&(n[0]>5||5===n[0]&&(i||n[1]!==l))),n.length=1,i?(e.e=e.e-t+1,n[0]=1):n[0]=e.e=0;else if(t<n.length){if(i=1===s&&n[t]>=5||2===s&&(n[t]>5||5===n[t]&&(i||n[t+1]!==l||1&n[t-1]))||3===s&&(i||!!n[0]),n.length=t,i){for(;++n[--t]>9;)if(n[t]=0,0===t){++e.e,n.unshift(1);break}}for(t=n.length;!n[--t];)n.pop()}return e}function h(e,t,s){var i=e.e,n=e.c.join(""),a=n.length;if(t)n=n.charAt(0)+(a>1?"."+n.slice(1):"")+(i<0?"e":"e+")+i;else if(i<0){for(;++i;)n="0"+n;n="0."+n}else if(i>0){if(++i>a)for(i-=a;i--;)n+="0";else i<a&&(n=n.slice(0,i)+"."+n.slice(i))}else a>1&&(n=n.charAt(0)+"."+n.slice(1));return e.s<0&&s?"-"+n:n}d.abs=function(){var e=new this.constructor(this);return e.s=1,e},d.cmp=function(e){var t,s=this.c,i=(e=new this.constructor(e)).c,n=this.s,a=e.s,o=this.e,d=e.e;if(!s[0]||!i[0])return s[0]?n:i[0]?-a:0;if(n!=a)return n;if(t=n<0,o!=d)return o>d^t?1:-1;for(n=-1,a=(o=s.length)<(d=i.length)?o:d;++n<a;)if(s[n]!=i[n])return s[n]>i[n]^t?1:-1;return o==d?0:o>d^t?1:-1},d.div=function(e){var t=this.constructor,s=this.c,i=(e=new t(e)).c,a=this.s==e.s?1:-1,d=t.DP;if(d!==~~d||d<0||d>1e6)throw Error(n);if(!i[0])throw Error(o);if(!s[0])return e.s=a,e.c=[e.e=0],e;var r,h,m,c,u,p=i.slice(),N=r=i.length,f=s.length,x=s.slice(0,r),v=x.length,E=e,w=E.c=[],y=0,C=d+(E.e=this.e-e.e)+1;for(E.s=a,a=C<0?0:C,p.unshift(0);v++<r;)x.push(0);do{for(m=0;m<10;m++){if(r!=(v=x.length))c=r>v?1:-1;else for(u=-1,c=0;++u<r;)if(i[u]!=x[u]){c=i[u]>x[u]?1:-1;break}if(c<0){for(h=v==r?i:p;v;){if(x[--v]<h[v]){for(u=v;u&&!x[--u];)x[u]=9;--x[u],x[v]+=10}x[v]-=h[v]}for(;!x[0];)x.shift()}else break}w[y++]=c?m:++m,x[0]&&c?x[v]=s[N]||0:x=[s[N]]}while((N++<f||x[0]!==l)&&a--)return!w[0]&&1!=y&&(w.shift(),E.e--,C--),y>C&&g(E,C,t.RM,x[0]!==l),E},d.eq=function(e){return 0===this.cmp(e)},d.gt=function(e){return this.cmp(e)>0},d.gte=function(e){return this.cmp(e)>-1},d.lt=function(e){return 0>this.cmp(e)},d.lte=function(e){return 1>this.cmp(e)},d.minus=d.sub=function(e){var t,s,i,n,a=this.constructor,o=this.s,d=(e=new a(e)).s;if(o!=d)return e.s=-d,this.plus(e);var l=this.c.slice(),r=this.e,g=e.c,h=e.e;if(!l[0]||!g[0])return g[0]?e.s=-d:l[0]?e=new a(this):e.s=1,e;if(o=r-h){for((n=o<0)?(o=-o,i=l):(h=r,i=g),i.reverse(),d=o;d--;)i.push(0);i.reverse()}else for(s=((n=l.length<g.length)?l:g).length,o=d=0;d<s;d++)if(l[d]!=g[d]){n=l[d]<g[d];break}if(n&&(i=l,l=g,g=i,e.s=-e.s),(d=(s=g.length)-(t=l.length))>0)for(;d--;)l[t++]=0;for(d=t;s>o;){if(l[--s]<g[s]){for(t=s;t&&!l[--t];)l[t]=9;--l[t],l[s]+=10}l[s]-=g[s]}for(;0===l[--d];)l.pop();for(;0===l[0];)l.shift(),--h;return l[0]||(e.s=1,l=[h=0]),e.c=l,e.e=h,e},d.mod=function(e){var t,s=this,i=s.constructor,n=s.s,a=(e=new i(e)).s;if(!e.c[0])throw Error(o);return(s.s=e.s=1,t=1==e.cmp(s),s.s=n,e.s=a,t)?new i(s):(n=i.DP,a=i.RM,i.DP=i.RM=0,s=s.div(e),i.DP=n,i.RM=a,this.minus(s.times(e)))},d.neg=function(){var e=new this.constructor(this);return e.s=-e.s,e},d.plus=d.add=function(e){var t,s,i,n=this.constructor;if(e=new n(e),this.s!=e.s)return e.s=-e.s,this.minus(e);var a=this.e,o=this.c,d=e.e,l=e.c;if(!o[0]||!l[0])return l[0]||(o[0]?e=new n(this):e.s=this.s),e;if(o=o.slice(),t=a-d){for(t>0?(d=a,i=l):(t=-t,i=o),i.reverse();t--;)i.push(0);i.reverse()}for(o.length-l.length<0&&(i=l,l=o,o=i),t=l.length,s=0;t;o[t]%=10)s=(o[--t]=o[t]+l[t]+s)/10|0;for(s&&(o.unshift(s),++d),t=o.length;0===o[--t];)o.pop();return e.c=o,e.e=d,e},d.pow=function(e){var t=this,s=new t.constructor("1"),n=s,a=e<0;if(e!==~~e||e<-1e6||e>1e6)throw Error(i+"exponent");for(a&&(e=-e);1&e&&(n=n.times(t)),e>>=1;)t=t.times(t);return a?s.div(n):n},d.prec=function(e,t){if(e!==~~e||e<1||e>1e6)throw Error(i+"precision");return g(new this.constructor(this),e,t)},d.round=function(e,t){if(e===l)e=0;else if(e!==~~e||e<-1e6||e>1e6)throw Error(n);return g(new this.constructor(this),e+this.e+1,t)},d.sqrt=function(){var e,t,i,n=this.constructor,a=this.s,o=this.e,d=new n("0.5");if(!this.c[0])return new n(this);if(a<0)throw Error(s+"No square root");0===(a=Math.sqrt(this+""))||a===1/0?((t=this.c.join("")).length+o&1||(t+="0"),o=((o+1)/2|0)-(o<0||1&o),e=new n(((a=Math.sqrt(t))==1/0?"5e":(a=a.toExponential()).slice(0,a.indexOf("e")+1))+o)):e=new n(a+""),o=e.e+(n.DP+=4);do i=e,e=d.times(i.plus(this.div(i)));while(i.c.slice(0,o).join("")!==e.c.slice(0,o).join(""))return g(e,(n.DP-=4)+e.e+1,n.RM)},d.times=d.mul=function(e){var t,s=this.constructor,i=this.c,n=(e=new s(e)).c,a=i.length,o=n.length,d=this.e,l=e.e;if(e.s=this.s==e.s?1:-1,!i[0]||!n[0])return e.c=[e.e=0],e;for(e.e=d+l,a<o&&(t=i,i=n,n=t,l=a,a=o,o=l),t=Array(l=a+o);l--;)t[l]=0;for(d=o;d--;){for(o=0,l=a+d;l>d;)o=t[l]+n[d]*i[l-d-1]+o,t[l--]=o%10,o=o/10|0;t[l]=o}for(o?++e.e:t.shift(),d=t.length;!t[--d];)t.pop();return e.c=t,e},d.toExponential=function(e,t){var s=this,i=s.c[0];if(e!==l){if(e!==~~e||e<0||e>1e6)throw Error(n);for(s=g(new s.constructor(s),++e,t);s.c.length<e;)s.c.push(0)}return h(s,!0,!!i)},d.toFixed=function(e,t){var s=this,i=s.c[0];if(e!==l){if(e!==~~e||e<0||e>1e6)throw Error(n);for(s=g(new s.constructor(s),e+s.e+1,t),e=e+s.e+1;s.c.length<e;)s.c.push(0)}return h(s,!1,!!i)},d.toJSON=d.toString=function(){var e=this.constructor;return h(this,this.e<=e.NE||this.e>=e.PE,!!this.c[0])},d.toNumber=function(){var e=Number(h(this,!0,!0));if(!0===this.constructor.strict&&!this.eq(e.toString()))throw Error(s+"Imprecise conversion");return e},d.toPrecision=function(e,t){var s=this,n=s.constructor,a=s.c[0];if(e!==l){if(e!==~~e||e<1||e>1e6)throw Error(i+"precision");for(s=g(new n(s),e,t);s.c.length<e;)s.c.push(0)}return h(s,e<=s.e||s.e<=n.NE||s.e>=n.PE,!!a)},d.valueOf=function(){var e=this.constructor;if(!0===e.strict)throw Error(s+"valueOf disallowed");return h(this,this.e<=e.NE||this.e>=e.PE,!0)},(t=function e(){function t(s){if(!(this instanceof t))return s===l?e():new t(s);if(s instanceof t)this.s=s.s,this.e=s.e,this.c=s.c.slice();else{if("string"!=typeof s){if(!0===t.strict&&"bigint"!=typeof s)throw TypeError(i+"value");s=0===s&&1/s<0?"-0":String(s)}(function(e,t){var s,n,a;if(!r.test(t))throw Error(i+"number");for(e.s="-"==t.charAt(0)?(t=t.slice(1),-1):1,(s=t.indexOf("."))>-1&&(t=t.replace(".","")),(n=t.search(/e/i))>0?(s<0&&(s=n),s+=+t.slice(n+1),t=t.substring(0,n)):s<0&&(s=t.length),a=t.length,n=0;n<a&&"0"==t.charAt(n);)++n;if(n==a)e.c=[e.e=0];else{for(;a>0&&"0"==t.charAt(--a););for(e.e=s-n-1,e.c=[],s=0;n<=a;)e.c[s++]=+t.charAt(n++)}})(this,s)}this.constructor=t}return t.prototype=d,t.DP=20,t.RM=1,t.NE=-7,t.PE=21,t.strict=!1,t.roundDown=0,t.roundHalfUp=1,t.roundHalfEven=2,t.roundUp=3,t}()).default=t.Big=t,"function"==typeof define&&define.amd?define(function(){return t}):p?p=t:e.Big=t}(p);const M="button",S="select";function T(e,t,s,i,n,a,o){let d=O(e,o),l=G(n+" ▼",f(e,M),a);return l.className="collapsible",l.addEventListener("click",function(){let e=l.textContent.split(" ");e[e.length-1]="▼"===e[e.length-1]?"▲":"▼",l.textContent=e.join(" ")}),d.appendChild(l),d.appendChild(i),null!=s?t.insertBefore(d,s):t.appendChild(d),l.removeEventListener("click",R),l.addEventListener("click",R),d}function R(){this.classList.toggle("active");let e=this.nextElementSibling;null!=e?e instanceof HTMLDivElement?"block"===e.style.display?e.style.display="none":e.style.display="block":console.log("toggleCollapsible: nextElementSibling is not an HTMLDivElement"):console.log("toggleCollapsible: nextElementSibling is null")}function I(e,t,s,i,n,a,o){let d;let l=U(void 0,i),r=((d=z(e,t,s)).onchange=n,d.value=a,L(d),d),g=q(o,s);return g.htmlFor=t,l.appendChild(g),l.appendChild(r),l}function z(e,t,s){let i=document.createElement("input");return i.type=e,i.id=t,Object.assign(i.style,s),i.style.fontSize="1em",i.classList.add("auto-width"),i}function D(e,t){let s=document.createElement("textarea");return s.id=e,Object.assign(s.style,t),s.style.fontSize="1em",s.classList.add("auto-width"),s}function _(e,t){let s="<"+t;if(e)for(let[t,i]of e)s+=" "+t+'="'+i+'"';return s+" />"}function L(e,t){void 0==t&&(t=4),e.style.width=e.value.length+t+"ch"}function P(e,t){void 0==t&&(t=6),e.style.width=e.value.length+t+"ch"}function B(e,t){void 0==t&&(t=6),e.style.width=e.value.length+t+"ch"}function A(e,t,s,i,n){let a=document.createElement("select");return e.forEach(e=>{a.name=t,a.id=i;let s=document.createElement("option");s.value=e,s.text=e,a.appendChild(s)}),a.value=s,a.style.fontSize="1em",a.classList.add("auto-width"),P(a),Object.assign(a.style,n),a}function k(e,t,s,i,n,a,o){let d=U(n,o),l=q(e,a);return d.appendChild(l),d.appendChild(A(t,s,i,f(n,S),a)),d}function G(e,t,s){let i=document.createElement("button");return i.textContent=e,void 0!=t&&(i.id=t),void 0!=s&&Object.assign(i.style,s),i.style.fontSize="1em",i}function O(e,t){let s=document.createElement("div");return void 0!=e&&(s.id=e),void 0!=t&&Object.assign(s.style,t),s}function U(e,t){let s=O(e,t);return s.style.display="flex",s.style.flexWrap="wrap",s}function q(e,t){let s=document.createElement("label");return Object.assign(s.style,t),s.textContent=e,s.style.fontSize="1em",s}function F(e,t){let s=document.createElement("table");return s.id=e,Object.assign(s.style,t),s}function H(e,t){let s=e.insertRow();return t.forEach(e=>{s.insertCell().textContent=e}),s}function V(e,t){let s=e.getElementsByTagName(t)[0];if(null==s)throw Error(t+" element not found");return s}function j(e){let t=e.childNodes;if(null==t)throw Error("Element has no childNodes");return t[0]}function X(e){let t=e.nodeValue;if(null==t)throw Error("nodeValue is null");return t}function Y(e){let t=j(e);return t?X(t).trim():""}class ${constructor(e){this.tagName=e}toXML(e){let t=_(void 0,this.tagName);return e?"\n"+e+t:t}}class K extends ${constructor(e,t){super(t),this.attributes=e}toString(){let e=this.tagName+"(";return this.attributes&&this.attributes.forEach((t,s)=>{e+=`${s}(${t}), `}),e}toXML(e){let t="";for(let[s,i]of(void 0!=e&&(t+="\n"+e),t+="<"+this.tagName,this.attributes))t+=" "+s+'="'+i.toString()+'"';return t+" />"}}class W extends K{constructor(e,t,s){super(e,t),this.value=s}toString(){return super.toString()+`, ${this.value.toString()})`}toXML(e){return ee(this.value.trim(),this.tagName,this.attributes,e,!1)}}class Z extends K{constructor(e,t,s){super(e,t),this.value=s}toString(){return super.toString()+`, ${this.value.toString()})`}toXML(e){return ee(this.value.toString(),this.tagName,this.attributes,e,!1)}}class Q extends K{constructor(e,t,s,i){super(e,t),this.delimiter=" ",this.values=s,void 0!=i&&(this.delimiter=i)}getValues(){return this.values}setValues(e){this.values=e}toString(){return super.toString()+`, ${this.values.toString()})`}setDelimiter(e){this.delimiter=e}toXML(e){return ee(y(this.values,this.delimiter),this.tagName,this.attributes,e,!1)}}class J extends K{constructor(e,t){super(e,t),this.nodes=new Map}addNode(e){this.nodes.set(this.nodes.size,e)}toString(){let e=super.toString();return this.nodes.forEach((t,s)=>{e+=`, ${t.toString()}`}),e+")"}toXML(e,t){let s;void 0!=e&&void 0!=t&&(s=t+e);let i="";if(this.nodes.size>0)return this.nodes.forEach(t=>{void 0==t?console.warn("Node 0 is undefined this.nodes.size = "+this.nodes.size):t instanceof J?i+=t.toXML(e,s):i+=t.toXML(s)}),ee(i,this.tagName,this.attributes,t,!0);{let e=_(this.attributes,this.tagName);return void 0!=t?"\n"+t+e:e}}}function ee(e,t,s,i,n){let a;return function(e,t,s){let i="";if(void 0!=s&&(i+="\n"+s),i+="<"+e,t)for(let[e,s]of t)i+=" "+e+'="'+s.toString()+'"';return i+">"}(t,s,i)+e+(a="",n&&void 0!=i&&(a+="\n"+i),a+"</"+t+">")}function et(e){let t=e.getAttributeNames(),s=new Map;return t.forEach(function(t){let i=e.getAttribute(t);null!=i&&s.set(t.trim(),i.trim())}),s}function es(e,t){let s=e.getElementsByTagName(t);if(1!=s.length)throw Error("Expecting 1 "+t+" but finding "+s.length);return s[0]}class ei extends Z{static{this.tagName="me:eigenvalue"}constructor(e,t){super(e,ei.tagName,t)}}class en extends J{static{this.tagName="me:eigenvalueList"}constructor(e,t){super(e,en.tagName),t&&t.forEach(e=>{this.addNode(e)})}addEigenvalue(e){this.addNode(e)}}class ea extends Z{static{this.tagName="me:pop"}constructor(e,t){super(e,ea.tagName,t)}}class eo extends J{static{this.tagName="me:population"}constructor(e,t){super(e,eo.tagName)}addPop(e){this.addNode(e)}}class ed extends J{static{this.tagName="me:populationList"}constructor(e,t){super(e,ed.tagName),t&&t.forEach(e=>{this.addNode(e)})}addPopulation(e){this.addNode(e)}}class el extends Z{static{this.tagName="me:firstOrderLoss"}constructor(e,t){super(e,el.tagName,t)}}class er extends Z{static{this.tagName="me:firstOrderRate"}constructor(e,t){super(e,el.tagName,t)}}class eg extends J{static{this.tagName="me:rateList"}constructor(e,t,s){if(super(e,eh.tagName),this.index=new Map,this.folIndex=new Map,t){let e=0;t.forEach(t=>{this.index.set(el.tagName+e.toString(),this.nodes.size),this.folIndex.set(this.folIndex.size,this.nodes.size),this.addNode(t),e++}),this.fols=t}else this.fols=[];if(this.forIndex=new Map,s){let e=0;s.forEach(t=>{this.index.set(er.tagName+e.toString(),this.nodes.size),this.forIndex.set(this.forIndex.size,this.nodes.size),this.addNode(t),e++}),this.fors=s}else this.fors=[]}addFirstOrderLoss(e){this.folIndex.set(this.folIndex.size,this.nodes.size),this.index.set(el.tagName+this.folIndex.size.toString(),this.nodes.size),this.fols.push(e),this.addNode(e)}addFirstOrderRate(e){this.forIndex.set(this.forIndex.size,this.nodes.size),this.index.set(er.tagName+this.forIndex.size.toString(),this.nodes.size),this.fors.push(e),this.addNode(e)}}class eh extends J{static{this.tagName="me:analysis"}constructor(e,t,s,i,n){super(e,eh.tagName),this.index=new Map,t&&(this.index.set(tP.tagName,this.nodes.size),this.addNode(t)),this.elIndex=new Map,s?(s.forEach(e=>{this.index.set(en.tagName,this.nodes.size),this.elIndex.set(this.elIndex.size,this.nodes.size),this.addNode(e)}),this.els=s):this.els=[],this.plIndex=new Map,i?(i.forEach(e=>{this.index.set(ed.tagName,this.nodes.size),this.plIndex.set(this.plIndex.size,this.nodes.size),this.addNode(e)}),this.pls=i):this.pls=[],this.rlIndex=new Map,n?(n.forEach(e=>{this.index.set(eg.tagName,this.nodes.size),this.rlIndex.set(this.rlIndex.size,this.nodes.size),this.addNode(e)}),this.rls=n):this.rls=[]}getDescription(){if(this.index.has(tP.tagName)){let e=this.index.get(tP.tagName);return this.nodes.get(e)}}setDescription(e){if(this.index.has(tP.tagName)){let t=this.index.get(tP.tagName);this.nodes.set(t,e)}else this.index.set(tP.tagName,this.nodes.size),this.addNode(e)}addEigenvalueList(e){this.elIndex.set(this.elIndex.size,this.nodes.size),this.addNode(e),this.els.push(e)}addPopulationList(e){this.plIndex.set(this.plIndex.size,this.nodes.size),this.addNode(e),this.pls.push(e)}addRateList(e){this.rlIndex.set(this.rlIndex.size,this.nodes.size),this.addNode(e),this.rls.push(e)}}class em extends W{static{this.tagName="me:bathGas"}constructor(e,t){super(e,em.tagName,t)}}class ec extends Z{static{this.tagName="me:experimentalRate"}static{this.s_ref1="ref1"}static{this.s_ref2="ref2"}static{this.s_refReaction="refReaction"}static{this.s_error="error"}constructor(e,t){super(e,ec.tagName,t)}getRef1(){return this.attributes.get(ec.s_ref1)}setRef1(e){this.attributes.set(ec.s_ref1,e)}getRef2(){return this.attributes.get(ec.s_ref2)}setRef2(e){this.attributes.set(ec.s_ref2,e)}getRefReaction(){return this.attributes.get(ec.s_refReaction)}setRefReaction(e){this.attributes.set(ec.s_refReaction,e)}getError(){return new(u(p))(this.attributes.get(ec.s_error))}setError(e){this.attributes.set(ec.s_error,e.toString())}}class eu extends Z{static{this.tagName="me:experimentalYield"}static{this.s_ref="ref"}static{this.s_error="error"}static{this.s_yieldTime="yieldTime"}constructor(e,t){super(e,eu.tagName,t)}getRef(){return this.attributes.get(eu.s_ref)}setRef(e){this.attributes.set(eu.s_ref,e)}getError(){return new(u(p))(this.attributes.get(eu.s_error))}setError(e){this.attributes.set(eu.s_error,e.toString())}getYieldTime(){return new(u(p))(this.attributes.get(eu.s_yieldTime))}setYieldTime(e){this.attributes.set(eu.s_yieldTime,e.toString())}}class ep extends Z{static{this.tagName="me:experimentalEigenvalue"}static{this.s_EigenvalueID="EigenvalueID"}static{this.s_error="error"}constructor(e,t){super(e,ep.tagName,t)}getEigenvalueID(){return this.attributes.get(ep.s_EigenvalueID)}setEigenvalueID(e){this.attributes.set(ep.s_EigenvalueID,e)}getError(){return new(u(p))(this.attributes.get(ep.s_error))}setError(e){this.attributes.set(ep.s_error,e.toString())}}class eN extends Z{static{this.tagName="me:excessReactantConc"}static{this.s_percent="percent"}constructor(e,t){super(e,eN.tagName,t)}getPercent(){return this.attributes.get(eN.s_percent)}setPercent(e){this.attributes.set(eN.s_percent,e)}}class ef extends J{static{this.tagName="me:PTpair"}static{this.s_P="P"}static{this.s_T="T"}static{this.s_precision="precision"}static{this.s_excessReactantConc="excessReactantConc"}static{this.s_percentExcessReactantConc="percentExcessReactantConc"}constructor(e,t,s,i,n){super(e,ef.tagName),this.index=new Map,void 0!=t&&(this.index.set(em.tagName,this.nodes.size),this.addNode(t)),void 0!=s&&(this.index.set(ec.tagName,this.nodes.size),this.addNode(s)),void 0!=i&&(this.index.set(eu.tagName,this.nodes.size),this.addNode(i)),void 0!=n&&(this.index.set(ep.tagName,this.nodes.size),this.addNode(n))}getP(){let e=this.attributes.get(ef.s_P);if(void 0!==e)return new(u(p))(e)}setP(e){this.attributes.set(ef.s_P,e.toString())}getT(){let e=this.attributes.get(ef.s_T);if(void 0!==e)return new(u(p))(e)}setT(e){this.attributes.set(ef.s_T,e.toString())}getPrecision(){return this.attributes.get(ef.s_precision)}setPrecision(e){this.attributes.set(ef.s_precision,e)}getBathGas(){let e=this.index.get(em.tagName);return void 0!=e?this.nodes.get(e):void 0}setBathGas(e){let t=this.index.get(em.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(em.tagName,this.nodes.size),this.addNode(e))}removeBathGas(){let e=this.index.get(em.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(em.tagName))}getExperimentalRate(){let e=this.index.get(ec.tagName);return void 0!=e?this.nodes.get(e):void 0}setExperimentalRate(e){let t=this.index.get(ec.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(ec.tagName,this.nodes.size),this.addNode(e))}removeExperimentalRate(){let e=this.index.get(ec.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(ec.tagName))}getExperimentalYield(){let e=this.index.get(eu.tagName);return void 0!=e?this.nodes.get(e):void 0}setExperimentalYield(e){let t=this.index.get(eu.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eu.tagName,this.nodes.size),this.addNode(e))}removeExperimentalYield(){let e=this.index.get(eu.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(eu.tagName))}getExperimentalEigenvalue(){let e=this.index.get(ep.tagName);return void 0!=e?this.nodes.get(e):void 0}setExperimentalEigenvalue(e){let t=this.index.get(ep.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(ep.tagName,this.nodes.size),this.addNode(e))}removeExperimentalEigenvalue(){let e=this.index.get(ep.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(ep.tagName))}getExcessReactantConc(){return this.attributes.get(ef.s_excessReactantConc)}setExcessReactantConc(e){this.attributes.set(ef.s_excessReactantConc,e)}getPercentExcessReactantConc(){return this.attributes.get(ef.s_percentExcessReactantConc)}setPercentExcessReactantConc(e){this.attributes.set(ef.s_percentExcessReactantConc,e)}}class ex extends J{static{this.tagName="me:PTs"}constructor(e,t){super(e,ex.tagName),void 0!=t?(t.forEach(e=>{this.addNode(e)}),this.ptps=t):this.ptps=[]}get(e){return this.ptps[e]}set(e,t){this.nodes.set(e,t),this.ptps[e]=t}add(e){return this.addNode(e),this.ptps.push(e),this.nodes.size-1}remove(e){this.nodes.delete(e),this.ptps.splice(e,1)}init(e){this.clear(),e.forEach(e=>{this.addNode(e),this.ptps.push(e)})}clear(){this.nodes.clear(),this.ptps=[]}}class ev extends J{static{this.tagName="me:conditions"}constructor(e,t,s,i){super(e,ev.tagName),this.id=t,this.index=new Map,this.bathGasesIndex=new Map,this.bathGases=new Map,void 0!=s&&(this.index.set(em.tagName,this.nodes.size),s.forEach(e=>{this.bathGasesIndex.set(e.value,this.nodes.size),this.addNode(e),this.bathGases.set(e,s.size)})),void 0!=i&&(this.index.set(ex.tagName,this.nodes.size),this.addNode(i))}getBathGases(){return this.bathGases}addBathGas(e){if(this.bathGases.has(e))return this.bathGases.get(e);{let t=this.bathGases.size;return this.bathGases.set(e,t),this.bathGasesIndex.set(e.value,this.nodes.size),this.addNode(e),t}}removeBathGas(e){this.bathGases.has(e)?(this.bathGases.delete(e),this.nodes.delete(this.bathGasesIndex.get(e.value))):console.warn("Conditions.removeBathGas: bathGas not found to remove.")}getPTs(){let e=this.index.get(ex.tagName);if(void 0!=e)return this.nodes.get(e)}setPTs(e){let t=this.index.get(ex.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(ex.tagName,this.nodes.size),this.addNode(e))}}class eE extends ${static{this.tagName="me:calculateRateCoefficientsOnly"}constructor(){super(eE.tagName)}}class ew extends ${static{this.tagName="me:printCellDOS"}constructor(){super(ew.tagName)}}class ey extends ${static{this.tagName="me:printCellTransitionStateFlux"}constructor(){super(ey.tagName)}}class eC extends ${static{this.tagName="me:printReactionOperatorColumnSums"}constructor(){super(eC.tagName)}}class eb extends ${static{this.tagName="me:printGrainBoltzmann"}constructor(){super(eb.tagName)}}class eM extends ${static{this.tagName="me:printGrainDOS"}constructor(){super(eM.tagName)}}class eS extends ${static{this.tagName="me:printGrainkbE"}constructor(){super(eS.tagName)}}class eT extends ${static{this.tagName="me:printGrainkfE"}constructor(){super(eT.tagName)}}class eR extends ${static{this.tagName="me:printTSsos"}constructor(){super(eR.tagName)}}class eI extends ${static{this.tagName="me:printGrainedSpeciesProfile"}constructor(){super(eI.tagName)}}class ez extends ${static{this.tagName="me:printGrainTransitionStateFlux"}constructor(){super(ez.tagName)}}class eD extends ${static{this.tagName="me:printReactionOperatorSize"}constructor(){super(eD.tagName)}}class e_ extends ${static{this.tagName="me:printSpeciesProfile"}constructor(){super(e_.tagName)}}class eL extends ${static{this.tagName="me:printPhenomenologicalEvolution"}constructor(){super(eL.tagName)}}class eP extends ${static{this.tagName="me:printTunnelingCoefficients"}constructor(){super(eP.tagName)}}class eB extends ${static{this.tagName="me:printCrossingCoefficients"}constructor(){super(eB.tagName)}}class eA extends ${static{this.tagName="me:testDOS"}constructor(){super(eA.tagName)}}class ek extends ${static{this.tagName="me:testRateConstant"}constructor(){super(ek.tagName)}}class eG extends ${static{this.tagName="me:useTheSameCellNumberForAllConditions"}constructor(){super(eG.tagName)}}class eO extends ${static{this.tagName="me:ForceMacroDetailedBalance"}constructor(){super(eO.tagName)}}class eU extends ${static{this.tagName="me:hideInactive"}constructor(){super(eU.tagName)}}class eq extends J{static{this.tagName="me:calcMethod"}static{this.options=["simpleCalc","gridSearch","fitting","marquardt","analyticalRepresentation","ThermodynamicTable","sensitivityAnalysis","me:simpleCalc","me:gridSearch","me:fitting","me:marquardt","me:analyticalRepresentation","me:ThermodynamicTable","me:sensitivityAnalysis"]}constructor(e){super(e,eq.tagName)}}class eF extends eq{static{this.xsi_type="me:simpleCalc"}static{this.xsi_type2="simpleCalc"}constructor(e){super(e)}}class eH extends eq{static{this.xsi_type="me:gridSearch"}static{this.xsi_type2="gridSearch"}constructor(e){super(e)}}class eV extends Z{static{this.tagName="me:fittingIterations"}constructor(e,t){super(e,eV.tagName,t)}}class ej extends eq{static{this.xsi_type="me:fitting"}static{this.xsi_type2="fitting"}constructor(e,t){super(e),void 0!=t&&this.addNode(t)}getFittingIterations(){return this.nodes.get(0)}setFittingIterations(e){this.nodes.set(0,e)}removeFittingIterations(){this.nodes.delete(0)}}class eX extends Z{static{this.tagName="me:MarquardtIterations"}constructor(e,t){super(e,eX.tagName,t)}}class eY extends Z{static{this.tagName="me:MarquardtTolerance"}constructor(e,t){super(e,eY.tagName,t)}}class e$ extends Z{static{this.tagName="me:MarquardtDerivDelta"}constructor(e,t){super(e,e$.tagName,t)}}class eK extends eq{static{this.xsi_type="me:marquardt"}static{this.xsi_type2="marquardt"}constructor(e,t,s,i){super(e),this.index=new Map,void 0!=t&&(this.index.set(eX.tagName,this.nodes.size),this.addNode(t)),void 0!=s&&(this.index.set(eY.tagName,this.nodes.size),this.addNode(s)),void 0!=i&&(this.index.set(e$.tagName,this.nodes.size),this.addNode(i))}getMarquardtIterations(){let e=this.index.get(eX.tagName);if(void 0!=e)return this.nodes.get(e)}setMarquardtIterations(e){let t=this.index.get(eX.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eX.tagName,this.nodes.size),this.addNode(e))}removeMarquardtIterations(){let e=this.index.get(eX.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(eX.tagName))}getMarquardtTolerance(){let e=this.index.get(eY.tagName);if(void 0!=e)return this.nodes.get(e)}setMarquardtTolerance(e){let t=this.index.get(eY.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eY.tagName,this.nodes.size),this.addNode(e))}removeMarquardtTolerance(){let e=this.index.get(eY.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(eY.tagName))}getMarquardtDerivDelta(){let e=this.index.get(e$.tagName);if(void 0!=e)return this.nodes.get(e)}setMarquardtDerivDelta(e){let t=this.index.get(e$.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(e$.tagName,this.nodes.size),this.addNode(e))}removeMarquardtDerivDelta(){let e=this.index.get(e$.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(e$.tagName))}}class eW extends ${static{this.tagName="me:useTraceWeighting"}constructor(){super(eW.tagName)}}class eZ extends W{static{this.tagName="me:format"}static{this.options=["cantera","chemkin"]}static{this.rateUnits="rateUnits"}static{this.rateUnitsOptions=["cm3mole-1s-1","cm3molecule-1s-1"]}constructor(e,t){super(e,eZ.tagName,t)}getRateUnits(){return this.attributes.get(eZ.rateUnits)}setRateUnits(e){this.attributes.set(eZ.rateUnits,e)}removeRateUnits(){this.attributes.delete(eZ.rateUnits)}}class eQ extends W{static{this.tagName="me:precision"}constructor(e,t){super(e,eQ.tagName,t)}}class eJ extends Z{static{this.tagName="me:chebNumTemp"}constructor(e,t){super(e,eJ.tagName,t)}}class e0 extends Z{static{this.tagName="me:chebNumConc"}constructor(e,t){super(e,e0.tagName,t)}}class e1 extends Z{static{this.tagName="me:chebMaxTemp"}constructor(e,t){super(e,e1.tagName,t)}}class e2 extends Z{static{this.tagName="me:chebMinTemp"}constructor(e,t){super(e,e2.tagName,t)}}class e3 extends Z{static{this.tagName="me:chebMaxConc"}constructor(e,t){super(e,e3.tagName,t)}getUnits(){return this.attributes.get("units")}setUnits(e){this.attributes.set("units",e)}}class e5 extends Z{static{this.tagName="me:chebMinConc"}constructor(e,t){super(e,e5.tagName,t)}}class e4 extends Z{static{this.tagName="me:chebTExSize"}constructor(e,t){super(e,e4.tagName,t)}}class e6 extends Z{static{this.tagName="me:chebPExSize"}constructor(e,t){super(e,e6.tagName,t)}}class e8 extends eq{static{this.xsi_type="me:analyticalRepresentation"}static{this.xsi_type2="analyticalRepresentation"}constructor(e,t,s,i,n,a,o,d,l,r,g){super(e),this.index=new Map,void 0!=t&&(this.index.set(eZ.tagName,this.nodes.size),this.addNode(t)),void 0!=s&&(this.index.set(eQ.tagName,this.nodes.size),this.addNode(s)),void 0!=i&&(this.index.set(eJ.tagName,this.nodes.size),this.addNode(i)),void 0!=n&&(this.index.set(e0.tagName,this.nodes.size),this.addNode(n)),void 0!=a&&(this.index.set(e1.tagName,this.nodes.size),this.addNode(a)),void 0!=o&&(this.index.set(e2.tagName,this.nodes.size),this.addNode(o)),void 0!=d&&(this.index.set(e3.tagName,this.nodes.size),this.addNode(d)),void 0!=l&&(this.index.set(e5.tagName,this.nodes.size),this.addNode(l)),void 0!=r&&(this.index.set(e4.tagName,this.nodes.size),this.addNode(r)),void 0!=g&&(this.index.set(e6.tagName,this.nodes.size),this.addNode(g))}getFormat(){let e=this.index.get(eZ.tagName);if(void 0!=e)return this.nodes.get(e)}setFormat(e){let t=this.index.get(eZ.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eZ.tagName,this.nodes.size),this.addNode(e))}removeFormat(){let e=this.index.get(eZ.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(eZ.tagName))}getPrecision(){let e=this.index.get(eQ.tagName);if(void 0!=e)return this.nodes.get(e)}setPrecision(e){let t=this.index.get(eQ.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eQ.tagName,this.nodes.size),this.addNode(e))}removePrecision(){let e=this.index.get(eQ.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(eQ.tagName))}getChebNumTemp(){let e=this.index.get(eJ.tagName);if(void 0!=e)return this.nodes.get(e)}setChebNumTemp(e){let t=this.index.get(eJ.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eJ.tagName,this.nodes.size),this.addNode(e))}removeChebNumTemp(){let e=this.index.get(eJ.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(eJ.tagName))}getChebNumConc(){let e=this.index.get(e0.tagName);if(void 0!=e)return this.nodes.get(e)}setChebNumConc(e){let t=this.index.get(e0.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(e0.tagName,this.nodes.size),this.addNode(e))}removeChebNumConc(){let e=this.index.get(e0.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(e0.tagName))}getChebMaxTemp(){let e=this.index.get(e1.tagName);if(void 0!=e)return this.nodes.get(e)}setChebMaxTemp(e){let t=this.index.get(e1.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(e1.tagName,this.nodes.size),this.addNode(e))}removeChebMaxTemp(){let e=this.index.get(e1.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(e1.tagName))}getChebMinTemp(){let e=this.index.get(e2.tagName);if(void 0!=e)return this.nodes.get(e)}setChebMinTemp(e){let t=this.index.get(e2.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(e2.tagName,this.nodes.size),this.addNode(e))}removeChebMinTemp(){let e=this.index.get(e2.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(e2.tagName))}getChebMaxConc(){let e=this.index.get(e3.tagName);if(void 0!=e)return this.nodes.get(e)}setChebMaxConc(e){let t=this.index.get(e3.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(e3.tagName,this.nodes.size),this.addNode(e))}removeChebMaxConc(){let e=this.index.get(e3.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(e3.tagName))}getChebMinConc(){let e=this.index.get(e5.tagName);if(void 0!=e)return this.nodes.get(e)}setChebMinConc(e){let t=this.index.get(e5.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(e5.tagName,this.nodes.size),this.addNode(e))}removeChebMinConc(){let e=this.index.get(e5.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(e5.tagName))}getChebTExSize(){let e=this.index.get(e4.tagName);if(void 0!=e)return this.nodes.get(e)}setChebTExSize(e){let t=this.index.get(e4.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(e4.tagName,this.nodes.size),this.addNode(e))}removeChebTExSize(){let e=this.index.get(e4.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(e4.tagName))}getChebPExSize(){let e=this.index.get(e6.tagName);if(void 0!=e)return this.nodes.get(e)}setChebPExSize(e){let t=this.index.get(e6.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(e6.tagName,this.nodes.size),this.addNode(e))}removeChebPExSize(){let e=this.index.get(e6.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(e6.tagName))}}class e9 extends Z{static{this.tagName="me:Tmin"}constructor(e,t){super(e,e9.tagName,t)}}class e7 extends Z{static{this.tagName="me:Tmid"}constructor(e,t){super(e,e7.tagName,t)}}class te extends Z{static{this.tagName="me:Tmax"}constructor(e,t){super(e,te.tagName,t)}}class tt extends Z{static{this.tagName="me:Tstep"}constructor(e,t){super(e,e9.tagName,t)}}class ts extends eq{static{this.xsi_type="me:ThermodynamicTable"}static{this.xsi_type2="ThermodynamicTable"}constructor(e,t,s,i,n){super(e),this.index=new Map,void 0!=t&&(this.index.set(e9.tagName,this.nodes.size),this.addNode(t)),void 0!=s&&(this.index.set(e7.tagName,this.nodes.size),this.addNode(s)),void 0!=i&&(this.index.set(te.tagName,this.nodes.size),this.addNode(i)),void 0!=n&&(this.index.set(tt.tagName,this.nodes.size),this.addNode(n))}getTmin(){let e=this.index.get(e9.tagName);if(void 0!=e)return this.nodes.get(e)}setTmin(e){let t=this.index.get(e9.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(e9.tagName,this.nodes.size),this.addNode(e))}removeTmin(){let e=this.index.get(e9.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(e9.tagName))}getTmid(){let e=this.index.get(e7.tagName);if(void 0!=e)return this.nodes.get(e)}setTmid(e){let t=this.index.get(e7.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(e7.tagName,this.nodes.size),this.addNode(e))}removeTmid(){let e=this.index.get(e7.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(e7.tagName))}getTmax(){let e=this.index.get(te.tagName);if(void 0!=e)return this.nodes.get(e)}setTmax(e){let t=this.index.get(te.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(te.tagName,this.nodes.size),this.addNode(e))}removeTmax(){let e=this.index.get(te.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(te.tagName))}getTstep(){let e=this.index.get(tt.tagName);if(void 0!=e)return this.nodes.get(e)}setTstep(e){let t=this.index.get(tt.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(tt.tagName,this.nodes.size),this.addNode(e))}removeTstep(){let e=this.index.get(tt.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(tt.tagName))}}class ti extends Z{static{this.tagName="me:sensitivityAnalysisSamples"}constructor(e,t){super(e,ti.tagName,t)}}class tn extends Z{static{this.tagName="me:sensitivityAnalysisOrder"}constructor(e,t){super(e,tn.tagName,t)}}class ta extends Z{static{this.tagName="me:sensitivityNumVarRedIters"}constructor(e,t){super(e,ta.tagName,t)}}class to extends W{static{this.tagName="me:sensitivityVarRedMethod"}static{this.options=["AdditiveControl","RatioControl"]}constructor(e,t){super(e,to.tagName,t)}}class td extends eq{static{this.xsi_type="me:sensitivityAnalysis"}static{this.xsi_type2="sensitivityAnalysis"}constructor(e,t,s,i,n){super(e),this.index=new Map,void 0!=t&&(this.index.set(ti.tagName,this.nodes.size),this.addNode(t)),void 0!=s&&(this.index.set(tn.tagName,this.nodes.size),this.addNode(s)),void 0!=i&&(this.index.set(ta.tagName,this.nodes.size),this.addNode(i)),void 0!=n&&(this.index.set(to.tagName,this.nodes.size),this.addNode(n))}getSensitivityAnalysisSamples(){let e=this.index.get(ti.tagName);if(void 0!=e)return this.nodes.get(e)}setSensitivityAnalysisSamples(e){let t=this.index.get(ti.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(ti.tagName,this.nodes.size),this.addNode(e))}removeSensitivityAnalysisSamples(){let e=this.index.get(ti.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(ti.tagName))}getSensitivityAnalysisOrder(){let e=this.index.get(tn.tagName);if(void 0!=e)return this.nodes.get(e)}setSensitivityAnalysisOrder(e){let t=this.index.get(tn.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(tn.tagName,this.nodes.size),this.addNode(e))}removeSensitivityAnalysisOrder(){let e=this.index.get(tn.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(tn.tagName))}getSensitivityNumVarRedIters(){let e=this.index.get(ta.tagName);if(void 0!=e)return this.nodes.get(e)}setSensitivityNumVarRedIters(e){let t=this.index.get(ta.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(ta.tagName,this.nodes.size),this.addNode(e))}removeSensitivityNumVarRedIters(){let e=this.index.get(ta.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(ta.tagName))}getSensitivityVarRedMethod(){let e=this.index.get(to.tagName);if(void 0!=e)return this.nodes.get(e)}setSensitivityVarRedMethod(e){let t=this.index.get(to.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(to.tagName,this.nodes.size),this.addNode(e))}removeSensitivityVarRedMethod(){let e=this.index.get(to.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(to.tagName))}}class tl extends Z{static{this.tagName="me:eigenvalues"}constructor(e,t){super(e,tl.tagName,t)}}class tr extends Z{static{this.tagName="me:shortestTimeOfInterest"}constructor(e,t){super(e,tr.tagName,t)}}class tg extends Z{static{this.tagName="me:MaximumEvolutionTime"}constructor(e,t){super(e,tg.tagName,t)}}class th extends Z{static{this.tagName="me:automaticallySetMaxEne"}constructor(e,t){super(e,th.tagName,t)}}class tm extends Z{static{this.tagName="me:diagramEnergyOffset"}constructor(e,t){super(e,tm.tagName,t)}}class tc extends K{static{this.tagName="me:testMicroRates"}constructor(e){super(e,tc.tagName),this.tMin=new(u(p))(e.get("Tmin")),this.tMax=new(u(p))(e.get("Tmax")),this.tStep=new(u(p))(e.get("Tstep"))}getTmin(){return this.tMin}setTmin(e){this.tMin=e,this.attributes?.set("Tmin",e.toString())}getTmax(){return this.tMax}setTmax(e){this.tMax=e,this.attributes?.set("Tmax",e.toString())}getTstep(){return this.tStep}setTstep(e){this.tStep=e,this.attributes?.set("Tstep",e.toString())}}class tu extends J{static{this.tagName="me:control"}constructor(e,t){super(e,tu.tagName),this.id=t,this.index=new Map}getCalculateRateCoefficientsOnly(){let e=this.index.get(eE.tagName);if(void 0!=e)return this.nodes.get(e)}setCalculateRateCoefficientsOnly(e){let t=this.index.get(eE.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eE.tagName,this.nodes.size),this.addNode(e))}removeCalculateRateCoefficientsOnly(){let e=this.index.get(eE.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(eE.tagName))}getPrintCellDOS(){let e=this.index.get(ew.tagName);if(void 0!=e)return this.nodes.get(e)}setPrintCellDOS(e){let t=this.index.get(ew.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(ew.tagName,this.nodes.size),this.addNode(e))}removePrintCellDOS(){let e=this.index.get(ew.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(ew.tagName))}getPrintCellTransitionStateFlux(){let e=this.index.get(ey.tagName);if(void 0!=e)return this.nodes.get(e)}setPrintCellTransitionStateFlux(e){let t=this.index.get(ey.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(ey.tagName,this.nodes.size),this.addNode(e))}removePrintCellTransitionStateFlux(){let e=this.index.get(ey.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(ey.tagName))}getPrintReactionOperatorColumnSums(){let e=this.index.get(eC.tagName);if(void 0!=e)return this.nodes.get(e)}setPrintReactionOperatorColumnSums(e){let t=this.index.get(eC.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eC.tagName,this.nodes.size),this.addNode(e))}removePrintReactionOperatorColumnSums(){let e=this.index.get(eC.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(eC.tagName))}getPrintGrainBoltzmann(){let e=this.index.get(eb.tagName);if(void 0!=e)return this.nodes.get(e)}setPrintGrainBoltzmann(e){let t=this.index.get(eb.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eb.tagName,this.nodes.size),this.addNode(e))}removePrintGrainBoltzmann(){let e=this.index.get(eb.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(eb.tagName))}getPrintGrainDOS(){let e=this.index.get(eM.tagName);if(void 0!=e)return this.nodes.get(e)}setPrintGrainDOS(e){let t=this.index.get(eM.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eM.tagName,this.nodes.size),this.addNode(e))}removePrintGrainDOS(){let e=this.index.get(eM.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(eM.tagName))}getPrintGrainkbE(){let e=this.index.get(eS.tagName);if(void 0!=e)return this.nodes.get(e)}setPrintGrainkbE(e){let t=this.index.get(eS.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eS.tagName,this.nodes.size),this.addNode(e))}removePrintGrainkbE(){let e=this.index.get(eS.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(eS.tagName))}getPrintGrainkfE(){let e=this.index.get(eT.tagName);if(void 0!=e)return this.nodes.get(e)}setPrintGrainkfE(e){let t=this.index.get(eT.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eT.tagName,this.nodes.size),this.addNode(e))}removePrintGrainkfE(){let e=this.index.get(eT.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(eT.tagName))}getPrintTSsos(){let e=this.index.get(eR.tagName);if(void 0!=e)return this.nodes.get(e)}setPrintTSsos(e){let t=this.index.get(eR.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eR.tagName,this.nodes.size),this.addNode(e))}removePrintTSsos(){let e=this.index.get(eR.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(eR.tagName))}getPrintGrainedSpeciesProfile(){let e=this.index.get(eI.tagName);if(void 0!=e)return this.nodes.get(e)}setPrintGrainedSpeciesProfile(e){let t=this.index.get(eI.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eI.tagName,this.nodes.size),this.addNode(e))}removePrintGrainedSpeciesProfile(){let e=this.index.get(eI.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(eI.tagName))}getPrintGrainTransitionStateFlux(){let e=this.index.get(ez.tagName);if(void 0!=e)return this.nodes.get(e)}setPrintGrainTransitionStateFlux(e){let t=this.index.get(ez.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(ez.tagName,this.nodes.size),this.addNode(e))}removePrintGrainTransitionStateFlux(){let e=this.index.get(ez.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(ez.tagName))}getPrintReactionOperatorSize(){let e=this.index.get(eD.tagName);if(void 0!=e)return this.nodes.get(e)}setPrintReactionOperatorSize(e){let t=this.index.get(eD.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eD.tagName,this.nodes.size),this.addNode(e))}removePrintReactionOperatorSize(){let e=this.index.get(eD.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(eD.tagName))}getPrintSpeciesProfile(){let e=this.index.get(e_.tagName);if(void 0!=e)return this.nodes.get(e)}setPrintSpeciesProfile(e){let t=this.index.get(e_.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(e_.tagName,this.nodes.size),this.addNode(e))}removePrintSpeciesProfile(){let e=this.index.get(e_.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(e_.tagName))}getPrintPhenomenologicalEvolution(){let e=this.index.get(eL.tagName);if(void 0!=e)return this.nodes.get(e)}setPrintPhenomenologicalEvolution(e){let t=this.index.get(eL.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eL.tagName,this.nodes.size),this.addNode(e))}removePrintPhenomenologicalEvolution(){let e=this.index.get(eL.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(eL.tagName))}getPrintTunnelingCoefficients(){let e=this.index.get(eP.tagName);if(void 0!=e)return this.nodes.get(e)}setPrintTunnelingCoefficients(e){let t=this.index.get(eP.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eP.tagName,this.nodes.size),this.addNode(e))}removePrintTunnelingCoefficients(){let e=this.index.get(eP.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(eP.tagName))}getPrintCrossingCoefficients(){let e=this.index.get(eB.tagName);if(void 0!=e)return this.nodes.get(e)}setPrintCrossingCoefficients(e){let t=this.index.get(eB.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eB.tagName,this.nodes.size),this.addNode(e))}removePrintCrossingCoefficients(){let e=this.index.get(eB.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(eB.tagName))}getTestDOS(){let e=this.index.get(eA.tagName);if(void 0!=e)return this.nodes.get(e)}setTestDOS(e){let t=this.index.get(eA.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eA.tagName,this.nodes.size),this.addNode(e))}removeTestDOS(){let e=this.index.get(eA.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(eA.tagName))}getTestRateConstants(){let e=this.index.get(ek.tagName);if(void 0!=e)return this.nodes.get(e)}setTestRateConstants(e){let t=this.index.get(ek.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(ek.tagName,this.nodes.size),this.addNode(e))}removeTestRateConstants(){let e=this.index.get(ek.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(ek.tagName))}getUseTheSameCellNumberForAllConditions(){let e=this.index.get(eG.tagName);if(void 0!=e)return this.nodes.get(e)}setUseTheSameCellNumberForAllConditions(e){let t=this.index.get(eG.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eG.tagName,this.nodes.size),this.addNode(e))}removeUseTheSameCellNumberForAllConditions(){let e=this.index.get(eG.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(eG.tagName))}getHideInactive(){let e=this.index.get(eU.tagName);if(void 0!=e)return this.nodes.get(e)}setHideInactive(e){let t=this.index.get(eU.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eU.tagName,this.nodes.size),this.addNode(e))}removeHideInactive(){let e=this.index.get(eU.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(eU.tagName))}getForceMacroDetailedBalance(){let e=this.index.get(eO.tagName);if(void 0!=e)return this.nodes.get(e)}setForceMacroDetailedBalance(e){let t=this.index.get(eO.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eO.tagName,this.nodes.size),this.addNode(e))}removeForceMacroDetailedBalance(){let e=this.index.get(eO.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(eO.tagName))}getCalcMethod(){let e=this.index.get(eq.tagName);if(void 0!=e)return this.nodes.get(e)}setCalcMethod(e){let t=this.index.get(eq.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eq.tagName,this.nodes.size),this.addNode(e))}removeCalcMethod(){let e=this.index.get(eq.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(eq.tagName))}getEigenvalues(){let e=this.index.get(tl.tagName);if(void 0!=e)return this.nodes.get(e)}setEigenvalues(e){let t=this.index.get(tl.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(tl.tagName,this.nodes.size),this.addNode(e))}removeEigenvalues(){let e=this.index.get(tl.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(tl.tagName))}getShortestTimeOfInterest(){let e=this.index.get(tr.tagName);if(void 0!=e)return this.nodes.get(e)}setShortestTimeOfInterest(e){let t=this.index.get(tr.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(tr.tagName,this.nodes.size),this.addNode(e))}removeShortestTimeOfInterest(){let e=this.index.get(tr.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(tr.tagName))}getMaximumEvolutionTime(){let e=this.index.get(tg.tagName);if(void 0!=e)return this.nodes.get(e)}setMaximumEvolutionTime(e){let t=this.index.get(tg.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(tg.tagName,this.nodes.size),this.addNode(e))}removeMaximumEvolutionTime(){let e=this.index.get(tg.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(tg.tagName))}getAutomaticallySetMaxEne(){let e=this.index.get(th.tagName);if(void 0!=e)return this.nodes.get(e)}setAutomaticallySetMaxEne(e){let t=this.index.get(th.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(th.tagName,this.nodes.size),this.addNode(e))}removeAutomaticallySetMaxEne(){let e=this.index.get(th.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(th.tagName))}getDiagramEnergyOffset(){let e=this.index.get(tm.tagName);if(void 0!=e)return this.nodes.get(e)}setDiagramEnergyOffset(e){let t=this.index.get(tm.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(tm.tagName,this.nodes.size),this.addNode(e))}removeDiagramEnergyOffset(){let e=this.index.get(tm.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(tm.tagName))}getTestMicroRates(){let e=this.index.get(tc.tagName);if(void 0!=e)return this.nodes.get(e)}setTestMicroRates(e){let t=this.index.get(tc.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(tc.tagName,this.nodes.size),this.addNode(e))}removeTestMicroRates(){let e=this.index.get(tc.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(tc.tagName))}}class tp extends J{static{this.tagName="metadata"}constructor(e){super(e,tp.tagName)}getLabelText(){let e="";return this.attributes.forEach((t,s)=>{e+=s+": "+t+" "}),e}}class tN extends W{static{this.tagName="dc:title"}constructor(e,t){super(e,tN.tagName,t)}}class tf extends W{static{this.tagName="dc:source"}constructor(e,t){super(e,tf.tagName,t)}}class tx extends W{static{this.tagName="dc:creator"}constructor(e,t){super(e,tx.tagName,t)}}class tv extends W{static{this.tagName="dc:date"}constructor(e,t){super(e,tv.tagName,t)}}class tE extends W{static{this.tagName="dc:contributor"}constructor(e,t){super(e,tE.tagName,t)}}class tw extends J{static{this.tagName="metadataList"}constructor(e,t,s,i,n,a){super(e,tw.tagName),this.index=new Map,this.metadataIndex=new Map,t&&(this.index.set(tN.tagName,this.nodes.size),this.addNode(t)),s&&(this.index.set(tf.tagName,this.nodes.size),this.addNode(s)),i&&(this.index.set(tx.tagName,this.nodes.size),this.addNode(i)),n&&(this.index.set(tv.tagName,this.nodes.size),this.addNode(n)),a&&(this.index.set(tE.tagName,this.nodes.size),this.addNode(a))}getTitle(){if(this.index.has(tN.tagName)){let e=this.index.get(tN.tagName);return this.nodes.get(e)}}setTitle(e){if(this.index.has(tN.tagName)){let t=this.index.get(tN.tagName);this.nodes.set(t,e)}else this.index.set(tN.tagName,this.nodes.size),this.addNode(e)}getSource(){if(this.index.has(tf.tagName)){let e=this.index.get(tf.tagName);return this.nodes.get(e)}}setSource(e){if(this.index.has(tf.tagName)){let t=this.index.get(tf.tagName);this.nodes.set(t,e)}else this.index.set(tf.tagName,this.nodes.size),this.addNode(e)}getCreator(){if(this.index.has(tx.tagName)){let e=this.index.get(tx.tagName);return this.nodes.get(e)}}setCreator(e){if(this.index.has(tx.tagName)){let t=this.index.get(tx.tagName);this.nodes.set(t,e)}else this.index.set(tx.tagName,this.nodes.size),this.addNode(e)}getDate(){if(this.index.has(tv.tagName)){let e=this.index.get(tv.tagName);return this.nodes.get(e)}}setDate(e){if(this.index.has(tv.tagName)){let t=this.index.get(tv.tagName);this.nodes.set(t,e)}else this.index.set(tv.tagName,this.nodes.size),this.addNode(e)}getContributor(){if(this.index.has(tE.tagName)){let e=this.index.get(tE.tagName);return this.nodes.get(e)}}setContributor(e){if(this.index.has(tE.tagName)){let t=this.index.get(tE.tagName);this.nodes.set(t,e)}else this.index.set(tE.tagName,this.nodes.size),this.addNode(e)}addMetadata(e){this.metadataIndex.set(this.metadataIndex.size,this.nodes.size),this.addNode(e)}getMetadata(){let e=[];for(let t=0;t<this.metadataIndex.size;t++){let s=this.metadataIndex.get(t);e.push(this.nodes.get(s))}return e}}class ty extends Z{static{this.tagName="me:grainSize"}constructor(e,t){super(e,ty.tagName,t)}}class tC extends Z{static{this.tagName="me:automaticallySetMaxEne"}constructor(e,t){super(e,tC.tagName,t)}}class tb extends Z{static{this.tagName="me:energyAboveTheTopHill"}constructor(e,t){super(e,tb.tagName,t)}}class tM extends Z{static{this.tagName="me:maxTemperature"}constructor(e,t){super(e,tM.tagName,t)}}class tS extends J{static{this.tagName="me:modelParameters"}constructor(e,t,s,i,n,a){super(e,tS.tagName),this.id=t,this.index=new Map,void 0!=s&&(this.index.set(ty.tagName,this.nodes.size),this.addNode(s)),void 0!=i&&(this.index.set(tC.tagName,this.nodes.size),this.addNode(i)),void 0!=n&&(this.index.set(tb.tagName,this.nodes.size),this.addNode(n)),void 0!=a&&(this.index.set(tM.tagName,this.nodes.size),this.addNode(a))}getGrainSize(){console.log("getGrainSize");let e=this.index.get(ty.tagName);if(void 0!=e)return this.nodes.get(e);console.log("XgetGrainSize")}setGrainSize(e){console.log("setGrainSize");let t=this.index.get(ty.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(ty.tagName,this.nodes.size),this.addNode(e))}removeGrainSize(){let e=this.index.get(ty.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(ty.tagName))}getAutomaticallySetMaxEne(){let e=this.index.get(tC.tagName);if(e)return this.nodes.get(e)}setAutomaticallySetMaxEne(e){let t=this.index.get(tC.tagName);t?this.nodes.set(t,e):(this.index.set(tC.tagName,this.nodes.size),this.addNode(e))}removeAutomaticallySetMaxEne(){let e=this.index.get(tC.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(tC.tagName))}getEnergyAboveTheTopHill(){let e=this.index.get(tb.tagName);if(e)return this.nodes.get(e)}setEnergyAboveTheTopHill(e){let t=this.index.get(tb.tagName);t?this.nodes.set(t,e):(this.index.set(tb.tagName,this.nodes.size),this.addNode(e))}removeEnergyAboveTheTopHill(){let e=this.index.get(tb.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(tb.tagName))}getMaxTemperature(){let e=this.index.get(tM.tagName);if(e)return this.nodes.get(e)}setMaxTemperature(e){let t=this.index.get(tM.tagName);t?this.nodes.set(t,e):(this.index.set(tM.tagName,this.nodes.size),this.addNode(e))}removeMaxTemperature(){let e=this.index.get(tM.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(tM.tagName))}}class tT extends W{static{this.tagName="me:title"}constructor(e,t){super(e,tT.tagName,t)}}class tR extends J{static{this.tagName="moleculeList"}constructor(e,t){super(e,tR.tagName),this.index=new Map,void 0!=t&&t.forEach(e=>{this.nodes.set(this.nodes.size,e),this.index.set(e.getID(),this.nodes.size-1)})}getMolecule(e){let t=this.index.get(e);if(void 0!=t)return this.nodes.get(t)}removeMolecule(e){let t=this.index.get(e);void 0!=t&&(this.nodes.delete(t),this.index.delete(e))}addMolecule(e){let t=e.getID(),s=this.index.get(t);void 0!==s?(this.nodes.set(s,e),console.log("Replaced molecule with id "+t)):(this.nodes.set(this.nodes.size,e),this.index.set(t,this.nodes.size-1))}}class tI extends J{static{this.tagName="reactionList"}constructor(e,t){super(e,tI.tagName),this.index=new Map,void 0!=t&&t.forEach(e=>{this.nodes.set(this.nodes.size,e),this.index.set(e.id,this.nodes.size-1)})}getReaction(e){let t=this.index.get(e);if(void 0!=t)return this.nodes.get(t)}removeReaction(e){let t=this.index.get(e);void 0!=t&&(this.nodes.delete(t),this.index.delete(e))}addReaction(e){let t=this.index.get(e.id);void 0!==t?(this.nodes.set(t,e),console.log("Replaced reaction with id "+e.id)):(this.nodes.set(this.nodes.size,e),this.index.set(e.id,this.nodes.size-1))}getNextReactionID(){let e=1;return Array.from(this.index.keys()).sort((e,t)=>{let s=e.match(/\d+/),i=t.match(/\d+/);return(s?parseInt(s[0]):0)-(i?parseInt(i[0]):0)}).forEach(t=>{if(parseInt(t.match(/\d+/)[0])>e)return e;e++}),e}}class tz extends J{static{this.tagName="conditionsList"}constructor(e,t){super(e,t_.tagName),this.index=new Map,void 0!=t&&t.forEach(e=>{this.nodes.set(this.nodes.size,e),this.index.set(e.id,this.nodes.size-1)})}getConditions(e){let t=this.index.get(e);if(void 0!=t)return this.nodes.get(t)}removeConditions(e){let t=this.index.get(e);void 0!=t&&(this.nodes.delete(t),this.index.delete(e))}addConditions(e){let t=this.index.get(e.id);void 0!=t?(this.nodes.set(t,e),console.log("Replaced conditions with id "+e.id)):(this.nodes.set(this.nodes.size,e),this.index.set(e.id,this.nodes.size-1))}}class tD extends J{static{this.tagName="modelParametersList"}constructor(e,t){super(e,tD.tagName),this.index=new Map,void 0!=t&&t.forEach(e=>{this.nodes.set(this.nodes.size,e),this.index.set(e.id,this.nodes.size-1)})}getModelParameters(e){let t=this.index.get(e);if(void 0!=t)return this.nodes.get(t)}removeModelParameters(e){let t=this.index.get(e);void 0!=t&&(this.nodes.delete(t),this.index.delete(e))}addModelParameters(e){let t=this.index.get(e.id);void 0!=t?(this.nodes.set(t,e),console.log("Replaced modelParameters with id "+e.id)):(this.nodes.set(this.nodes.size,e),this.index.set(e.id,this.nodes.size-1))}}class t_ extends J{static{this.tagName="controlList"}constructor(e,t){super(e,t_.tagName),this.index=new Map,void 0!=t&&t.forEach(e=>{this.nodes.set(this.nodes.size,e),this.index.set(e.id,this.nodes.size-1)})}getControl(e){let t=this.index.get(e);if(void 0!=t)return this.nodes.get(t)}removeControl(e){let t=this.index.get(e);void 0!=t&&(this.nodes.delete(t),this.index.delete(e))}addControl(e){let t=this.index.get(e.id);void 0!==t?(this.nodes.set(t,e),console.log("Replaced control with id "+e.id)):(this.nodes.set(this.nodes.size,e),this.index.set(e.id,this.nodes.size-1))}}class tL extends J{static{this.tagName="me:mesmer"}static{this.precisionOptions=["d","dd","qd","double","double-double","quad-double"]}static{this.pressureUnits=["Torr","PPCC","atm","mbar","psi","mols/cc"]}static{this.energyUnits=["kJ/mol","kJ per mol","cm-1","wavenumber","kcal/mol","kcal per mol","Hartree","au"]}static{this.frequencyUnits=["cm-1","GHz","amuA^2"]}static{this.massUnits=["amu","g/mol","kg/mol"]}static{this.temperatureUnits=["K"]}static{this.timeUnits=["fs","ps","ns","s"]}static{this.lengthUnits=["Å","nm","um","mm","cm","m"]}static{this.hessianUnits=["kJ/mol/Å2","kcal/mol/Å2","Hartree/Å2"]}static{this.EinsteinAUnits=["s-1"]}static{this.EinsteinBUnits=["m3/J/s2"]}static{this.elementTypes=["H","He","Li","Be","B","C","N","O","F","Ne","Na","Mg","Al","Si","P","S","Cl","Ar","K","Ca","Sc","Ti","V","Cr","Mn","Fe","Co","Ni","Cu","Zn","Ga","Ge","As","Se","Br","Kr","Rb","Sr","Y","Zr","Nb","Mo","Tc","Ru","Rh","Pd","Ag","Cd","In","Sn","Sb","Te","I","Xe","Cs","Ba","La","Ce","Pr","Nd","Pm","Sm","Eu","Gd","Tb","Dy","Ho","Er","Tm","Yb","Lu","Hf","Ta","W","Re","Os","Ir","Pt","Au","Hg","Tl","Pb","Bi","Po","At","Rn","Fr","Ra","Ac","Th","Pa","U","Np","Pu","Am","Cm","Bk","Cf","Es","Fm","Md","No","Lr","Rf","Db","Sg","Bh","Hs","Mt","Ds","Rg","Cn","Nh","Fl","Mc","Lv","Ts","Og"]}static{this.atomMasses=new Map}static{this.atomRadii=new Map}static{this.atomColors=new Map}static{this.bondColors=new Map}static{this.header=`<?xml version="1.0" encoding="utf-8" ?>
<?xml-stylesheet type='text/xsl' href='../../mesmer2.xsl' media='other'?>
<?xml-stylesheet type='text/xsl' href='../../mesmer1.xsl' media='screen'?>`}constructor(e,t,s,i,n,a,o,d,l){super(e,tL.tagName);let r=["H","O","C","N","Cl","S","Ph","Fe"],g=["White","Red","DarkGrey","Blue","Green","Yellow","Orange","Brown"];for(let e=0;e<r.length;e++)tL.atomColors.set(r[e],g[e]);let h=[1.00784,15.999,12.011,14.007,35.453,32.06,77.845,55.845];for(let e=0;e<r.length;e++)tL.atomMasses.set(r[e],h[e]);let m=[37,66,67,56,99,102,110,124];for(let e=0;e<r.length;e++)tL.atomRadii.set(r[e],m[e]);let c=[1,1.5,2,2.5,3,3.5,4,4.5,5,5.5,6];g=["Black","Red","DarkRed","Blue","DarkBlue","Green","DarkGreen","Yellow","DarkYellow","Orange","DarkOrange"];for(let e=0;e<c.length;e++)tL.bondColors.set(c[e],g[e]);this.index=new Map,void 0!=t&&(this.index.set(tT.tagName,this.nodes.size),this.addNode(t)),void 0!=s&&(this.index.set(tR.tagName,this.nodes.size),this.addNode(s)),void 0!=i&&(this.index.set(tI.tagName,this.nodes.size),this.addNode(i)),this.conditionsIndex=new Map,void 0!=n&&n.forEach(e=>{this.index.set(ev.tagName+e.id,this.nodes.size),this.conditionsIndex.set(e.id,this.nodes.size),this.addNode(e)}),this.modelParametersIndex=new Map,void 0!=a&&a.forEach(e=>{this.index.set(tS.tagName+e.id,this.nodes.size),this.modelParametersIndex.set(e.id,this.nodes.size),this.addNode(e)}),this.controlIndex=new Map,void 0!=o&&o.forEach(e=>{this.index.set(tu.tagName+e.id,this.nodes.size),this.controlIndex.set(e.id,this.nodes.size),this.addNode(e)}),void 0!=d&&(this.index.set(tw.tagName,this.nodes.size),this.addNode(d)),void 0!=l&&(this.index.set(eh.tagName,this.nodes.size),this.addNode(l))}getTitle(){let e=this.index.get(tT.tagName);if(void 0!=e)return this.nodes.get(e)}setTitle(e){let t=this.index.get(tT.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(tT.tagName,this.nodes.size),this.addNode(e))}getMoleculeList(){let e=this.index.get(tR.tagName);if(void 0!=e)return this.nodes.get(e);{let e=new tR(new Map);return this.index.set(tR.tagName,this.nodes.size),this.addNode(e),e}}setMoleculeList(e){let t=this.index.get(tR.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(tR.tagName,this.nodes.size),this.addNode(e))}getReactionList(){let e=this.index.get(tI.tagName);if(void 0!=e)return this.nodes.get(e);{let e=new tI(new Map);return this.index.set(tI.tagName,this.nodes.size),this.addNode(e),e}}setReactionList(e){let t=this.index.get(tI.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(tI.tagName,this.nodes.size),this.addNode(e))}addConditions(e){let t=ev.tagName+e.id,s=this.index.get(t);void 0!=s?this.nodes.set(s,e):(this.index.set(t,this.nodes.size),this.conditionsIndex.set(e.id,this.nodes.size),this.addNode(e))}getConditions(e){let t=this.conditionsIndex.get(e);if(void 0!=t)return this.nodes.get(t)}getConditionss(){let e=[];return this.conditionsIndex.forEach((t,s)=>{e.push(this.nodes.get(t))}),e}setConditionss(e){e.forEach(e=>{this.addConditions(e)})}getNextConditionsID(){let e=0;return Array.from(this.conditionsIndex.keys()).sort((e,t)=>e-t).forEach(t=>{if(t>e)return e;e++}),e}removeConditions(e){let t=this.conditionsIndex.get(e);void 0!=t&&(this.nodes.delete(t),this.index.delete(ev.tagName+e),this.conditionsIndex.delete(e))}addModelParameters(e){let t=tS.tagName+e.id,s=this.index.get(t);void 0!=s?this.nodes.set(s,e):(this.index.set(t,this.nodes.size),this.modelParametersIndex.set(e.id,this.nodes.size),this.addNode(e))}getModelParameters(e){let t=this.modelParametersIndex.get(e);if(void 0!=t)return this.nodes.get(t)}getModelParameterss(){let e=[];return this.modelParametersIndex.forEach((t,s)=>{e.push(this.nodes.get(t))}),e}setModelParameterss(e){e.forEach(e=>{this.addModelParameters(e)})}getNextModelParametersID(){let e=0;return Array.from(this.modelParametersIndex.keys()).sort((e,t)=>e-t).forEach(t=>{if(t>e)return e;e++}),e}removeModelParameters(e){let t=this.modelParametersIndex.get(e);void 0!=t&&(this.nodes.delete(t),this.index.delete(tS.tagName+e),this.modelParametersIndex.delete(e))}addControl(e){let t=tu.tagName+e.id,s=this.index.get(t);void 0!=s?this.nodes.set(s,e):(this.index.set(t,this.nodes.size),this.controlIndex.set(e.id,this.nodes.size),this.addNode(e))}getControl(e){let t=this.controlIndex.get(e);if(void 0!=t)return this.nodes.get(t)}getControls(){let e=[];return this.controlIndex.forEach((t,s)=>{e.push(this.nodes.get(t))}),e}setControls(e){e.forEach(e=>{this.addControl(e)})}getNextControlID(){let e=0;return Array.from(this.controlIndex.keys()).sort((e,t)=>e-t).forEach(t=>{if(t>e)return e;e++}),e}removeControl(e){let t=this.controlIndex.get(e);void 0!=t&&(this.nodes.delete(t),this.index.delete(tu.tagName+e),this.controlIndex.delete(e))}getMetadataList(){let e=this.index.get(tw.tagName);if(void 0!=e)return this.nodes.get(e)}setMetadataList(e){let t=this.index.get(tw.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(tw.tagName,this.nodes.size),this.addNode(e))}getAnalysis(){let e=this.index.get(eh.tagName);if(void 0!=e)return this.nodes.get(e)}setAnalysis(e){let t=this.index.get(eh.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eh.tagName,this.nodes.size),this.addNode(e))}}class tP extends W{static{this.tagName="me:description"}constructor(e,t){super(e,tP.tagName,t)}}class tB extends Z{static{this.tagName="me:T"}constructor(e,t){super(e,tB.tagName,t)}}class tA extends Z{static{this.s_units="units"}static{this.s_lower="lower"}static{this.s_upper="upper"}static{this.s_stepsize="stepsize"}constructor(e,t,s){super(e,t,s)}setValue(e){this.value=e}getUnits(){return this.attributes.get(tA.s_units)}setUnits(e){this.attributes.set(tA.s_units,e)}removeUnits(){this.attributes.delete(tA.s_units)}getLower(){let e=this.attributes.get(tA.s_lower);if(void 0!=e)return new p.Big(e)}setLower(e){this.attributes.set(tA.s_lower,e.toString())}removeLower(){this.attributes.delete(tA.s_lower)}getUpper(){let e=this.attributes.get(tA.s_upper);if(void 0!=e)return new p.Big(e)}setUpper(e){this.attributes.set(tA.s_upper,e.toString())}removeUpper(){this.attributes.delete(tA.s_upper)}getStepsize(){let e=this.attributes.get(tA.s_stepsize);if(void 0!=e)return new p.Big(e)}setStepsize(e){this.attributes.set(tA.s_stepsize,e.toString())}removeStepsize(){this.attributes.delete(tA.s_stepsize)}}class tk extends K{static{this.tagName="atom"}static{this.s_id="id"}static{this.s_elementType="elementType"}static{this.s_x3="x3"}static{this.s_y3="y3"}static{this.s_z3="z3"}constructor(e,t){super(e,tk.tagName),this.molecule=t}hasCoordinates(){return void 0!=this.attributes.get(tk.s_x3)&&void 0!=this.attributes.get(tk.s_y3)&&void 0!=this.attributes.get(tk.s_z3)}getID(){return this.attributes.get(tk.s_id)}setID(e){this.attributes.set(tk.s_id,e)}getElementType(){return this.attributes.get(tk.s_elementType)}setElementType(e){this.attributes.set(tk.s_elementType,e)}getX3(){let e=this.attributes.get(tk.s_x3);if(void 0!=e)return new p.Big(e)}setX3(e){this.attributes.set(tk.s_x3,e.toString())}removeX3(){this.attributes.delete(tk.s_x3)}getY3(){let e=this.attributes.get(tk.s_y3);if(void 0!=e)return new p.Big(e)}setY3(e){this.attributes.set(tk.s_y3,e.toString())}removeY3(){this.attributes.delete(tk.s_y3)}getZ3(){let e=this.attributes.get(tk.s_z3);if(void 0!=e)return new p.Big(e)}setZ3(e){this.attributes.set("z3",e.toString())}removeZ3(){this.attributes.delete("z3")}}class tG extends J{static{this.tagName="atomArray"}constructor(e,t){super(e,tG.tagName),this.index=new Map,this.reverseIndex=new Map,void 0==t?this.atoms=new Map:(this.atoms=t,t.forEach((e,t)=>{this.index.set(t,this.nodes.size),this.reverseIndex.set(this.nodes.size,t),this.nodes.set(this.nodes.size,e)}))}getAtom(e){return this.atoms.get(e)}addAtom(e,t){if(void 0==t){let s=e.getID();if(void 0==s)s=this.getNextAtomID(),e.setID(s);else if(this.atoms.has(s)){let t=this.getNextAtomID();console.warn("Atom with id "+s+" already exists, adding with id "+t),e.setID(t),s=t}t=s}return this.index.set(t,this.nodes.size),this.reverseIndex.set(this.nodes.size,t),this.nodes.set(this.nodes.size,e),this.atoms.set(t,e),t}getNextAtomID(){let e=1,t="a1";if(this.atoms.has(t))for(;this.atoms.has(t);)e++,t="a"+e.toString();return t}removeAtom(e){let t=this.index.get(e);if(void 0==t)throw Error("Atom with id "+e+" does not exist!");console.log("Removing atom with id "+e),this.atoms.delete(e),this.deleteNodeAndReindex(t,e)}deleteNodeAndReindex(e,t){this.nodes.delete(e),this.index.delete(t),this.reverseIndex.delete(e);let s=new Map,i=new Map,n=new Map;this.index.forEach((t,a)=>{t>e?(s.set(t-1,this.nodes.get(t)),i.set(a,t-1),n.set(t-1,a)):(s.set(t,this.nodes.get(t)),i.set(a,t),n.set(t,a))}),this.nodes=s,this.index=i,this.reverseIndex=n}}class tO extends K{static{this.tagName="bond"}static{this.s_atomRefs2="atomRefs2"}static{this.s_id="id"}static{this.s_order="order"}static{this.orderOptions=["1","1.5","2","2.5","3","3.5","4","4.5","5","5.5","6"]}constructor(e,t){super(e,tO.tagName),this.molecule=t}getAtomRefs2(){let e=this.attributes.get(tO.s_atomRefs2);return(e?.split(" "),void 0==e)?"a1 a1":e}setAtomRefs2(e){this.attributes.set(tO.s_atomRefs2,e)}getID(){return this.attributes.get(tO.s_id)}setID(e){this.attributes.set(tO.s_id,e)}getOrder(){let e=this.attributes.get(tO.s_order);if(void 0!=e)return parseFloat(e)}setOrder(e){this.attributes.set(tO.s_order,e.toString())}}class tU extends J{static{this.tagName="bondArray"}constructor(e,t){super(e,tU.tagName),this.index=new Map,this.reverseIndex=new Map,void 0==t?this.bonds=new Map:(this.bonds=t,t.forEach((e,t)=>{this.index.set(t,this.nodes.size),this.reverseIndex.set(this.nodes.size,t),this.nodes.set(this.nodes.size,e)}))}getBondIds(){return Array.from(this.bonds.keys())}getBond(e){return this.bonds.get(e)}addBond(e,t){if(void 0==t){let s=e.getID();if(void 0==s)s=this.getNextBondID(),e.setID(s);else if(this.bonds.has(s)){let t=this.getNextBondID();console.log("Bond with id "+s+" already exists, adding with id "+t),e.setID(t),s=t}t=s}return this.index.set(t,this.nodes.size),this.reverseIndex.set(this.nodes.size,t),this.nodes.set(this.nodes.size,e),this.bonds.set(t,e),t}getNextBondID(){let e=1,t="b1";for(;this.bonds.has(t);)e++,t="b"+e.toString();return t}removeBond(e){let t=this.index.get(e);if(void 0==t)throw Error("Bond with id "+e+" does not exist!");console.log("Removing bond with id "+e),this.bonds.delete(e),this.deleteNodeAndReindex(t,e)}deleteNodeAndReindex(e,t){this.nodes.delete(e),this.index.delete(t),this.reverseIndex.delete(e);let s=new Map,i=new Map,n=new Map;this.index.forEach((t,a)=>{t>e?(s.set(t-1,this.nodes.get(t)),i.set(a,t-1),n.set(t-1,a)):(s.set(t,this.nodes.get(t)),i.set(a,t),n.set(t,a))}),this.nodes=s,this.index=i,this.reverseIndex=n}}class tq extends W{static{this.tagName="scalar"}constructor(e,t){super(e,tq.tagName,t)}getValue(){return this.value}setValue(e){this.value=e}}class tF extends Z{static{this.tagName="scalar"}static{this.s_units="units"}static{this.propertyDictRefs=new Set(["me:ZPE","me:Hf0","me:HfAT0","me:Hf298","me:symmetryNumber","me:TSOpticalSymmetryNumber","me:frequenciesScaleFactor","me:MW","me:spinMultiplicity","me:epsilon","me:sigma"])}constructor(e,t){super(e,tF.tagName,t)}updateUnits(e){if(e){let t=this.attributes.get(tF.s_units);void 0!=t&&t!=e&&this.attributes.set(tF.s_units,e)}}getValue(){return this.value}setValue(e){this.value=e}}class tH extends Q{static{this.tagName="array"}static{this.s_units="units"}static{this.propertyDictRefs=new Set(["me:rotConsts","me:vibFreqs","me:EinsteinAij","me:EinsteinBij"])}constructor(e,t,s){super(e,tH.tagName,t,s)}updateUnits(e){if(e){let t=this.attributes.get(tH.s_units);void 0!=t&&t!=e&&(this.attributes.set(tH.s_units,e),console.log("Units changed from "+t+" to "+e))}}setSize(e){let t=[];for(let s=0;s<e;s++)t.push(new p.Big(0));this.setValues(t)}}class tV extends Q{static{this.tagName="matrix"}static{this.s_rows="rows"}static{this.s_matrixType="matrixType"}static{this.s_units="units"}static{this.propertyDictRefs=new Set(["me:hessian"])}constructor(e,t,s){super(e,tH.tagName,t,s)}updateUnits(e){if(e){let t=this.attributes.get(tH.s_units);void 0!=t&&t!=e&&(this.attributes.set(tH.s_units,e),console.log("Units changed from "+t+" to "+e))}}setSize(e,t){let s=[];for(let i=0;i<e;i++)for(let e=0;e<t;e++)s.push(new p.Big(0));this.setValues(s)}}class tj extends J{static{this.tagName="property"}static{this.s_dictRef="dictRef"}constructor(e,t){super(e,tj.tagName);let s=e.get(tj.s_dictRef);if(void 0==s){let t=e.get("title");if(void 0==t)throw Error(tj.s_dictRef+" and title are undefined!");if("MW"==t)s="me:MW";else if("Hf298"==t)s="me:Hf298";else if("Hf0"==t)s="me:Hf0";else if("program"==t)s="program";else if("basis"==t)s="basis";else if("method"==t)s="method";else if("File Format"==t)s="method";else throw Error("Title "+t+"not recognised!")}this.dictRef=s,t&&this.nodes.set(0,t)}getProperty(){return this.nodes.get(0)}setProperty(e){this.nodes.set(0,e)}}class tX extends tj{static{this.dictRef="me:ZPE"}constructor(e,t){super(e,t)}setUnits(e){this.getProperty().updateUnits(e)}}class tY extends tj{static{this.dictRef="me:Hf0"}constructor(e,t){super(e,t)}setUnits(e){this.getProperty().updateUnits(e)}}class t$ extends tj{static{this.dictRef="me:HfAT0"}constructor(e,t){super(e,t)}setUnits(e){this.getProperty().updateUnits(e)}}class tK extends tj{static{this.dictRef="me:Hf298"}constructor(e,t){super(e,t)}setUnits(e){this.getProperty().updateUnits(e)}}class tW extends tj{static{this.dictRef="me:rotConsts"}static{this.unitOptions=["cm-1","GHz","amuA^2"]}constructor(e,t){super(e,t)}}class tZ extends tj{static{this.dictRef="me:symmetryNumber"}constructor(e,t){super(e,t)}}class tQ extends tj{static{this.dictRef="me:TSOpticalSymmetryNumber"}constructor(e,t){super(e,t)}}class tJ extends tj{static{this.dictRef="me:frequenciesScaleFactor"}constructor(e,t){super(e,t)}}class t0 extends tj{static{this.dictRef="me:vibFreqs"}constructor(e,t){super(e,t)}}class t1 extends tj{static{this.dictRef="me:MW"}constructor(e,t){super(e,t)}}class t2 extends tj{static{this.dictRef="me:spinMultiplicity"}constructor(e,t){super(e,t)}}class t3 extends tj{static{this.dictRef="me:epsilon"}constructor(e,t){super(e,t)}}class t5 extends tj{static{this.dictRef="me:sigma"}constructor(e,t){super(e,t)}}class t4 extends tj{static{this.dictRef="me:hessian"}static{this.unitOptions=["kJ/mol/Å2","kcal/mol/Å2","Hartree/Å2"]}constructor(e,t){super(e,t)}}class t6 extends tj{static{this.dictRef="me:EinsteinAij"}constructor(e,t){super(e,t)}}class t8 extends tj{static{this.dictRef="me:EinsteinBij"}constructor(e,t){super(e,t)}}class t9 extends tj{static{this.dictRef="me:imFreqs"}constructor(e,t){super(e,t)}}class t7 extends J{static{this.tagName="propertyList"}constructor(e,t){super(e,t7.tagName),this.index=new Map,void 0!=t&&t.forEach(e=>{this.nodes.set(this.nodes.size,e),this.index.set(e.dictRef,this.nodes.size-1)})}getProperty(e){let t=this.index.get(e);return void 0!=t?this.nodes.get(t):void 0}setProperty(e){let t=this.index.get(e.dictRef);void 0==t?(console.log("Property "+e.dictRef+" does not exist, adding..."),this.nodes.set(this.nodes.size,e),this.index.set(e.dictRef,this.nodes.size-1)):(console.log("Property "+e.dictRef+" already exists, updating..."),this.nodes.set(t,e))}removeProperty(e){let t=this.index.get(e);if(void 0!=t){this.nodes.delete(t),this.index.delete(e);let s=new Map;this.index.forEach((e,i)=>{e>t?s.set(i,e-1):s.set(i,e)}),this.index=s}}}class se extends tA{static{this.tagName="me:deltaEDown"}static{this.s_bathGas="bathGas"}constructor(e,t){super(e,se.tagName,t)}getBathGas(){return this.attributes.get(se.s_bathGas)}setBathGas(e){this.attributes.set(se.s_bathGas,e)}}class st extends se{static{this.tagName="me:deltaEDown2"}constructor(e,t){super(e,t)}}class ss extends tA{static{this.tagName="me:deltaEDownTExponent"}static{this.s_referenceTemperature="referenceTemperature"}constructor(e,t){super(e,ss.tagName,t)}getReferenceTemperature(){return parseFloat(N(this.attributes,ss.s_referenceTemperature))}setReferenceTemperature(e){this.attributes.set(ss.s_referenceTemperature,e.toString())}}class si extends tA{static{this.tagName="me:deltaEDownLinEne"}constructor(e,t){super(e,si.tagName,t)}}class sn extends J{static{this.tagName="me:energyTransferModel"}constructor(e,t){super(e,sn.tagName),void 0!=t&&t.forEach(e=>{this.nodes.set(this.nodes.size,e)})}getDeltaEDowns(){let e=[];return this.nodes.forEach(t=>{t instanceof se&&e.push(t)}),e}setDeltaEDowns(e){this.nodes.clear(),e.forEach(e=>{this.nodes.set(this.nodes.size,e)})}getDeltaEDown(e){if(e<0||e>=this.nodes.size)throw Error("index out of range");return this.nodes.get(e)}setDeltaEDown(e,t){this.nodes.set(e,t)}addDeltaEDown(e){return this.nodes.set(this.nodes.size,e),this.nodes.size-1}}class sa extends K{static{this.tagName="me:DOSCMethod"}static{this.xsi_typeOptions=["ClassicalRotors","QMRotors","me:ClassicalRotors","me:QMRotors"]}static{this.s_xsi_type="xsi:type"}constructor(e){if(super(e,sa.tagName),void 0==e.get(sa.s_xsi_type)){let t=e.get("name");if(void 0==t)throw Error("Neither xsi:type or name are defined.");e.set(sa.s_xsi_type,t)}}getXsiType(){return this.attributes.get(sa.s_xsi_type)}setXsiType(e){this.attributes.set(sa.s_xsi_type,e)}}class so extends W{static{this.tagName="me:bondRef"}constructor(e,t){super(e,so.tagName,t)}}class sd extends K{static{this.tagName="me:PotentialPoint"}static{this.s_angle="angle"}static{this.s_potential="potential"}constructor(e){super(e,sd.tagName)}getAngle(){return this.attributes.get(sd.s_angle)}setAngle(e){this.attributes.set(sd.s_angle,e.toString())}getPotential(){return this.attributes.get(sd.s_potential)}setPotential(e){this.attributes.set(sd.s_potential,e.toString())}}class sl extends K{static{this.tagName="me:DistributionCalcMethod"}static{this.s_default="default"}static{this.s_name="name"}constructor(e){super(e,sl.tagName)}getDefault(){return this.attributes.get(sl.s_default)}getName(){return this.attributes.get(sl.s_name)}}class sr extends K{static{this.tagName="me:thermoValue"}static{this.s_T="T"}static{this.s_H="H"}static{this.s_S="S"}static{this.s_G="G"}static{this.s_Cp="Cp"}constructor(e){super(e,tk.tagName)}getT(){return new p.Big(this.attributes.get(sr.s_T))}getH(){return new p.Big(this.attributes.get(sr.s_H))}getS(){return new p.Big(this.attributes.get(sr.s_S))}getG(){return new p.Big(this.attributes.get(sr.s_G))}getCp(){return new p.Big(this.attributes.get(sr.s_Cp))}toStringArray(){return[this.getT().toString(),this.getH().toString(),this.getS().toString(),this.getG().toString(),this.getCp().toString()]}toCSV(){return this.toStringArray().join(",")}}class sg extends J{static{this.tagName="me:thermoTable"}static{this.s_unitsT="unitsT"}static{this.s_unitsH="unitsH"}static{this.s_unitsS="unitsS"}static{this.s_unitsG="unitsG"}static{this.s_unitsCp="unitsCp"}constructor(e,t){super(e,sg.tagName),void 0!=t?(t.forEach(e=>{this.addNode(e)}),this.tvs=t):this.tvs=[]}get(e){return this.tvs[e]}set(e,t){this.nodes.set(e,t),this.tvs[e]=t}add(e){return this.addNode(e),this.tvs.push(e),this.nodes.size-1}remove(e){this.nodes.delete(e),this.tvs.splice(e,1)}init(e){this.clear(),e.forEach(e=>{this.addNode(e),this.tvs.push(e)})}clear(){this.nodes.clear(),this.tvs=[]}getHeader(){return["T ("+this.attributes.get(sg.s_unitsT)+")","H(T)-H(0) ("+this.attributes.get(sg.s_unitsH)+")","S(T) ("+this.attributes.get(sg.s_unitsS)+")","G(T) ("+this.attributes.get(sg.s_unitsG)+")","Cp(T) ("+this.attributes.get(sg.s_unitsCp)+")"]}toCSV(){let e=this.getHeader().join(",")+"\n";return this.tvs.forEach(t=>{e+=t.toCSV()+"\n"}),e}}class sh extends J{static{this.tagName="me:HinderedRotorPotential"}static{this.formats=new Set(["numerical","analytical"])}static{this.s_format="format"}static{this.s_units="units"}static{this.s_expansionSize="expansionSize"}static{this.s_useSineTerms="useSineTerms"}constructor(e,t){super(e,sh.tagName);let s=e.get(sh.s_format);if(void 0==s)throw Error(sh.s_format+" is undefined!");this.format=s;let i=e.get(sh.s_units);if(void 0==i)throw Error(sh.s_units+" is undefined!");this.units=i,void 0!=t&&t.forEach(e=>{this.nodes.set(this.nodes.size,e)}),void 0==e.get(sh.s_useSineTerms)?this.useSineTerms=!1:this.useSineTerms=!0}getFormat(){return this.format}setFormat(e){this.format=e,this.attributes.set(sh.s_format,e)}getUnits(){return this.units}setUnits(e){this.units=e,this.attributes.set(sh.s_units,e)}getExpansionSize(){return this.attributes.get(sh.s_expansionSize)}setExpansionSize(e){console.log(e.toString()),this.attributes.set(sh.s_expansionSize,e.toString())}getUseSineTerms(){return this.useSineTerms}setUseSineTerms(e){this.useSineTerms=e,this.attributes.set(sh.s_useSineTerms,e?"yes":"no")}getPotentialPoint(e){return this.nodes.get(e)}setPotentialPoint(e,t){this.nodes.set(e,t)}setPotentialPoints(e){this.nodes.clear(),e.forEach(e=>{this.nodes.set(this.nodes.size,e)})}addPotentialPoint(e){return this.nodes.set(this.nodes.size,e),this.nodes.size-1}removePotentialPoint(e){this.nodes.delete(e)}}class sm extends Z{static{this.tagName="me:periodicity"}constructor(e,t){super(e,sm.tagName,t)}}class sc extends J{static{this.tagName="me:ExtraDOSCMethod"}constructor(e,t,s,i){super(e,sc.tagName),this.index=new Map,t&&(this.nodes.set(this.nodes.size,t),this.index.set(so.tagName,this.nodes.size-1)),s&&(this.nodes.set(this.nodes.size,s),this.index.set(sh.tagName,this.nodes.size-1)),i&&(this.nodes.set(this.nodes.size,i),this.index.set(sm.tagName,this.nodes.size-1))}getBondRef(){let e=this.index.get(so.tagName);if(void 0!=e)return this.nodes.get(e)}setBondRef(e){let t=this.index.get(so.tagName);void 0!=t?this.nodes.set(t,e):(this.nodes.set(this.nodes.size,e),this.index.set(so.tagName,this.nodes.size-1))}getHinderedRotorPotential(){let e=this.index.get(sh.tagName);if(void 0!=e)return this.nodes.get(e)}setHinderedRotorPotential(e){let t=this.index.get(sh.tagName);void 0!=t?this.nodes.set(t,e):(this.nodes.set(this.nodes.size,e),this.index.set(sh.tagName,this.nodes.size-1))}getPeriodicity(){let e=this.index.get(sm.tagName);if(void 0!=e)return this.nodes.get(e)}setPeriodicity(e){let t=this.index.get(sm.tagName);void 0!=t?this.nodes.set(t,e):(this.nodes.set(this.nodes.size,e),this.index.set(sm.tagName,this.nodes.size-1))}}class su extends Z{static{this.tagName="me:reservoirSize"}constructor(e,t){super(e,su.tagName,t)}}class sp extends Z{static{this.tagName="me:qtot"}constructor(e,t){super(e,sp.tagName,t)}}class sN extends Z{static{this.tagName="me:sumc"}constructor(e,t){super(e,sN.tagName,t)}}class sf extends Z{static{this.tagName="me:sumg"}constructor(e,t){super(e,sf.tagName,t)}}class sx extends J{static{this.tagName="me:densityOfStates"}static{this.header=[tB.tagName,sp.tagName,sN.tagName,sf.tagName]}constructor(e){super(e,sx.tagName),this.index=new Map}getT(){let e=this.index.get(tB.tagName);if(void 0!=e)return this.nodes.get(e)}setT(e){let t=this.index.get(e.tagName);void 0!=t?this.nodes.set(t,e):(this.nodes.set(this.nodes.size,e),this.index.set(e.tagName,this.nodes.size-1))}getQtot(){let e=this.index.get(sp.tagName);if(void 0!=e)return this.nodes.get(e)}setQtot(e){let t=this.index.get(e.tagName);void 0!=t?this.nodes.set(t,e):(this.nodes.set(this.nodes.size,e),this.index.set(e.tagName,this.nodes.size-1))}getSumc(){let e=this.index.get(sN.tagName);if(void 0!=e)return this.nodes.get(e)}setSumc(e){let t=this.index.get(e.tagName);void 0!=t?this.nodes.set(t,e):(this.nodes.set(this.nodes.size,e),this.index.set(e.tagName,this.nodes.size-1))}getSumg(){let e=this.index.get(sf.tagName);if(void 0!=e)return this.nodes.get(e)}setSumg(e){let t=this.index.get(e.tagName);void 0!=t?this.nodes.set(t,e):(this.nodes.set(this.nodes.size,e),this.index.set(e.tagName,this.nodes.size-1))}toStringArray(){return[this.getT().value.toString(),this.getQtot().value.toString(),this.getSumc().value.toString(),this.getSumg().value.toString()]}}class sv extends J{static{this.tagName="me:densityOfStatesList"}constructor(e,t,s){if(super(e,sv.tagName),this.index=new Map,this.dosIndex=new Map,t&&(this.nodes.set(this.nodes.size,t),this.index.set(tP.tagName,this.nodes.size-1)),s){let e=0;s.forEach(t=>{this.dosIndex.set(e,this.nodes.size),this.nodes.set(this.nodes.size,t),e++})}}getDescription(){let e=this.index.get(tP.tagName);if(void 0!=e)return this.nodes.get(e)}setDescription(e){let t=this.index.get(tP.tagName);void 0!=t?this.nodes.set(t,e):(this.nodes.set(this.nodes.size,e),this.index.set(tP.tagName,this.nodes.size-1))}getDensityOfStates(e){let t=this.dosIndex.get(e);if(void 0!=t)return this.nodes.get(t)}setDensityOfStates(e,t){let s=this.dosIndex.get(e);void 0!=s?this.nodes.set(s,t):(this.nodes.set(this.nodes.size,t),this.dosIndex.set(e,this.nodes.size-1))}addDensityOfStates(e){this.nodes.set(this.nodes.size,e);let t=this.nodes.size-1;return this.dosIndex.set(t,this.nodes.size-1),t}removeDensityOfStates(e){let t=this.dosIndex.get(e);void 0!=t&&this.nodes.delete(t)}toCSV(){let e="",t=sx.header;return e+=t.join(",")+"\n",this.nodes.forEach(t=>{e+=t.toStringArray().join(",")+"\n"}),e}}class sE extends J{static{this.tagName="molecule"}static{this.s_id="id"}static{this.s_description="description"}static{this.s_active="active"}constructor(e,t,s,i,n,a,o,d,l,r,g,h){super(e,sE.tagName),this.label=this.getID(),this.index=new Map,this.edmindex=new Map,this.id=t;let m=0;s&&(this.nodes.set(m,s),this.index.set(tw.tagName,m),m++),i&&(this.nodes.set(m,i),this.index.set(tG.tagName,m),m++),n&&(this.nodes.set(m,n),this.index.set(tU.tagName,m),m++),a&&(this.nodes.set(m,a),this.index.set(t7.tagName,m),m++),o&&(this.nodes.set(m,o),this.index.set(sn.tagName,m),m++),d&&(this.nodes.set(m,d),this.index.set(sa.tagName,m),m++),l&&(this.nodes.set(m,l),this.index.set(sl.tagName,m),m++),r&&r.forEach(e=>{this.nodes.set(m,e),this.edmindex.set(m,m),m++}),g&&(this.nodes.set(m,g),this.index.set(su.tagName,m),m++),h&&(this.nodes.set(m,h),this.index.set(sg.tagName,m))}getLabel(){return this.getID()}getID(){return this.attributes.get(sE.s_id)}setID(e){this.attributes.set(sE.s_id,e)}getDescription(){let e=this.attributes.get(sE.s_description);return void 0!=e?e:this.getID()}setDescription(e){this.attributes.set(sE.s_description,e)}getActive(){let e=this.attributes.get(sE.s_active);if(void 0!=e)return"true"==e}setActive(e){this.attributes.set(sE.s_active,e.toString())}getMetadataList(){let e=this.index.get(tw.tagName);if(void 0!=e)return this.nodes.get(e)}setMetadataList(e){let t=this.index.get(tw.tagName);void 0==t?(this.index.set(tw.tagName,this.nodes.size),this.addNode(e)):this.nodes.set(t,e)}getPropertyList(){let e=this.index.get(t7.tagName);if(void 0!=e)return this.nodes.get(e)}setPropertyList(e){let t=this.index.get(t7.tagName);void 0==t?(this.index.set(t7.tagName,this.nodes.size),this.addNode(e)):this.nodes.set(t,e)}getProperty(e){let t=this.getPropertyList();if(void 0!=t)return t.getProperty(e)}getAtom(e){return this.getAtoms().getAtom(e)}getAtoms(){let e=this.index.get(tG.tagName);return this.nodes.get(e)}setAtoms(e){this.index.set(tG.tagName,this.nodes.size),this.nodes.set(this.nodes.size,e)}getBond(e){return this.getBonds().getBond(e)}getBonds(){let e=this.index.get(tU.tagName);return this.nodes.get(e)}setBonds(e){this.index.set(tU.tagName,this.nodes.size),this.nodes.set(this.nodes.size,e)}getEnergyTransferModel(){let e=this.index.get(sn.tagName);if(void 0!=e)return this.nodes.get(e)}setEnergyTransferModel(e){let t=this.index.get(sn.tagName);void 0==t?(this.index.set(sn.tagName,this.nodes.size),this.addNode(e)):this.nodes.set(t,e)}getDOSCMethod(){let e=this.index.get(sa.tagName);if(void 0!=e)return this.nodes.get(e)}setDOSCMethod(e){let t=this.index.get(sa.tagName);void 0==t?(this.index.set(sa.tagName,this.nodes.size),this.addNode(e)):this.nodes.set(t,e)}getDistributionCalcMethod(){let e=this.index.get(sl.tagName);if(void 0!=e)return this.nodes.get(e)}setDistributionCalcMethod(e){let t=this.index.get(sl.tagName);void 0==t?(this.index.set(sl.tagName,this.nodes.size),this.addNode(e)):this.nodes.set(t,e)}getExtraDOSCMethod(e){let t=this.edmindex.get(e);if(void 0!=t)return this.nodes.get(t)}setExtraDOSCMethod(e,t){let s=this.edmindex.get(e);void 0==s?(this.edmindex.set(e,this.nodes.size),this.nodes.set(this.nodes.size,t)):this.nodes.set(s,t)}getReservoirSize(){let e=this.index.get(su.tagName);if(void 0!=e)return this.nodes.get(e)}setReservoirSize(e){let t=this.index.get(su.tagName);void 0==t?(this.index.set(su.tagName,this.nodes.size),this.addNode(e)):this.nodes.set(t,e)}getDensityOfStatesList(){let e=this.index.get(sv.tagName);if(void 0!=e)return this.nodes.get(e)}setDensityOfStatesList(e){let t=this.index.get(sv.tagName);void 0==t?(this.index.set(sv.tagName,this.nodes.size),this.addNode(e)):this.nodes.set(t,e)}getThermoTable(){let e=this.index.get(sg.tagName);if(void 0!=e)return this.nodes.get(e)}setThermoTable(e){let t=this.index.get(sg.tagName);void 0==t?(this.index.set(sg.tagName,this.nodes.size),this.addNode(e)):this.nodes.set(t,e)}getEnergy(){let e;try{e=this.getProperty(tX.dictRef)}catch(t){try{e=this.getProperty(tY.dictRef)}catch(t){try{e=this.getProperty(tK.dictRef)}catch(t){try{e=this.getProperty(t$.dictRef)}catch(t){e=void 0}}}}return void 0==e?(0,p.Big)(0):e instanceof tF?e.value:(0,p.Big)(0)}}function sw(e,t,s){let i=G(nr,void 0,nn);return e.appendChild(i),i.addEventListener("click",()=>{let n=sz(!0,void 0,void 0,s);console.log("mid="+n);let a=new sE(new Map,n);a.setID(n),nj(a,s),a.setAtoms(new tG(new Map)),a.setBonds(new tU(new Map));let o=t.addID(sE.tagName,n),d=O(o),l=T(t.addID(o,nm),e,i,d,n,na,nn);n3(em.tagName,n),sD(a,s,l.querySelector(M),t,d,nn),d.appendChild(s_(t.addID(o,nc),t,a.getDescription.bind(a),a.setDescription.bind(a),na,nn));let r=t.addID(o,tG.tagName),g=O(r);T(t.addID(r,nm),d,null,g,tG.tagName,na,nn),g.appendChild(sP(t,a,g,tk.tagName,na,nn));let h=t.addID(o,tU.tagName),m=O(h);T(t.addID(h,nm),d,null,m,tU.tagName,na,nn),m.appendChild(sk(t,a,m,tO.tagName,na,nn)),sF(t,a,d,na,nn);let c=t.addID(o,t7.tagName),u=O(c);T(t.addID(c,nm),d,null,u,t7.tagName,na,nn);let p=a.getPropertyList();void 0==p&&(console.log("PropertyList is undefined for molecule "+a.getLabel()),p=new t7(new Map),a.setPropertyList(p)),console.log("pl.index.size"+p.index.size),sy(a,t,u,p),n8(d,nn,()=>{sU(e,l,t,s,o,a)})}),i}function sy(e,t,s,i){sC(e,t,s,i,tX.dictRef,tL.energyUnits),sC(e,t,s,i,tY.dictRef,tL.energyUnits),sC(e,t,s,i,t$.dictRef,tL.energyUnits),sC(e,t,s,i,tK.dictRef,tL.energyUnits),sM(!1,e,t,s,i,tW.dictRef,tL.frequencyUnits),sC(e,t,s,i,tZ.dictRef,void 0),sC(e,t,s,i,tQ.dictRef,void 0),sC(e,t,s,i,tJ.dictRef,void 0),sM(!1,e,t,s,i,t0.dictRef,tL.frequencyUnits),sC(e,t,s,i,t1.dictRef,tL.massUnits),sC(e,t,s,i,t2.dictRef,void 0),sC(e,t,s,i,t3.dictRef,tL.temperatureUnits),sC(e,t,s,i,t5.dictRef,tL.lengthUnits),sR(!1,e,t,s,i,t4.dictRef,tL.hessianUnits),sM(!1,e,t,s,i,t6.dictRef,tL.EinsteinAUnits),sM(!1,e,t,s,i,t8.dictRef,tL.EinsteinBUnits)}function sC(e,t,s,i,n,a){let o,d,l,r,g;(o=new Map).set(tj.s_dictRef,n),d=new Map,void 0!=a&&d.set(tF.s_units,a[0]),r=new tj(o,l=new tF(d,nH)),e.getPropertyList().setProperty(r),console.log("pl.index.size"+i.index.size),n7(a,d,g=n4(s.id,t,n,l.getValue.bind(l),e=>sb(n,i,l,e),()=>i.removeProperty(r.dictRef),na,nn),g.querySelector(nu),nz(s.id,n,tF.s_units),n,na,na),s.appendChild(g),g.querySelector(M).click(),i.removeProperty(n)}function sb(e,t,s,i){if(void 0==t.getProperty(e)){let i,n;(i=new Map).set(tj.s_dictRef,e),n=new tj(i,s),t.setProperty(n),console.log("Set property "+e)}else console.log("Property "+e+" already exists.");s.setValue.bind(s)(i)}function sM(e,t,s,i,n,a,o){let d,l,r,g,h;(d=new Map).set(tj.s_dictRef,a),l=new Map,void 0!=o&&l.set(tF.s_units,o[0]);let m=[];e&&sS(a,m),g=new tj(d,r=new tH(l,m)),t.getPropertyList().setProperty(g),console.log("pl.index.size"+n.index.size),n7(o,l,h=sH(i.id,s,a,r,r.getValues.bind(r),e=>sT(a,n,r,e),()=>n.removeProperty(g.dictRef),na,nn),h.querySelector(nu),nz(i.id,a,tF.s_units),a,na,na),i.appendChild(h),h.querySelector(M).click(),n.removeProperty(a)}function sS(e,t){let s=function(e){let t=0,s=!1;for(;!s;){let i=prompt(e,"0");null!=i&&w(i)&&(t=parseInt(i))>0&&(s=!0)}return t}("Please enter the number of elements in the "+e+" array");for(let e=0;e<s;e++)t.push(nH)}function sT(e,t,s,i){if(void 0==t.getProperty(e)){let i,n;(i=new Map).set(tj.s_dictRef,e),n=new tj(i,s),t.setProperty(n),console.log("Set property "+e)}else console.log("Property "+e+" already exists.");console.log("Value "+s.getValues()),s.setValues.bind(s)(i),console.log("Value "+s.getValues())}function sR(e,t,s,i,n,a,o){let d,l,r,g,h;(d=new Map).set(tj.s_dictRef,a),l=new Map,void 0!=o&&l.set(tF.s_units,o[0]);let m=[];e&&sS(a,m),g=new tj(d,r=new tV(l,m)),t.getPropertyList().setProperty(g),console.log("pl.index.size"+n.index.size),n7(o,l,h=sH(i.id,s,a,r,r.getValues.bind(r),e=>sT(a,n,r,e),()=>n.removeProperty(g.dictRef),na,nn),h.querySelector(nu),nz(i.id,a,tF.s_units),a,na,na),i.appendChild(h),h.querySelector(M).click(),n.removeProperty(a)}function sI(e,t,s,i){let n=G(ng,void 0,na);return e.appendChild(n),n.addEventListener("click",()=>{let n=f(sE.tagName,"div");nD(n);let a=O(s.addID(n),nn),o=Array.from(nX(r));if(0==o.length){alert("There are no additional molecules to add, please load data...");return}console.log("options.length="+o.length),n5(o,!0);let d=f(n,S);nD(d);let l=A(o,"Select molecule",nE,s.addID(d),na);l.classList.add(sE.tagName),a.appendChild(l),e.insertBefore(a,t),ae(o,l),l.addEventListener("change",n=>{let o=n.target,d=nY(o.options[o.selectedIndex].value,r),l=d.getID();l=sz(!0,l,d,i),i.set(l,d);let g=s.addID(sE.tagName,i.size),h=O(g),m=T(s.addID(g,nm),e,t,h,d.getLabel(),na,nn);n3(em.tagName,d.getID()),sD(d,i,m.querySelector(M),s,h,nn),h.appendChild(s_(s.addID(g,nc),s,d.getDescription.bind(d),d.setDescription.bind(d),na,nn));let c=s.addID(g,tw.tagName),u=O(c,nn);T(s.addID(c,nm),h,null,u,tw.tagName,na,nn);let p=d.getMetadataList();void 0!=p&&p.getMetadata().forEach(e=>{let t=O();u.appendChild(t),t.appendChild(q(e.getLabelText(),na))});let N=s.addID(g,tG.tagName),f=O(N);T(s.addID(N,nm),h,null,f,tG.tagName,na,nn);let x=d.getAtoms();void 0!=x&&x.atoms.forEach(e=>{f.appendChild(sB(s,d,N,d.getAtoms(),e,na,nn))}),f.appendChild(sP(s,d,f,tk.tagName,na,nn));let v=s.addID(g,tU.tagName),E=O(v);T(s.addID(v,nm),h,null,E,tU.tagName,na,nn),void 0!=d.getBonds()&&d.getBonds().bonds.forEach(e=>{if(void 0==x)throw Error("Atoms are not defined for molecule "+d.getLabel());E.appendChild(sG(s,d,v,x.atoms,d.getBonds(),e,na,nn))}),E.appendChild(sk(s,d,E,tO.tagName,na,nn)),sF(s,d,h,na,nn);let w=s.addID(g,t7.tagName),y=O(w);T(s.addID(w,nm),h,null,y,t7.tagName,na,nn);let C=d.getPropertyList();console.log("Molecule "+d.getDescription()),tF.propertyDictRefs.forEach(function(e){console.log("dictRef="+e),sC(d,s,y,C,e,tL.energyUnits)}),tH.propertyDictRefs.forEach(function(e){console.log("dictRef="+e),sM(!1,d,s,y,C,e,tL.frequencyUnits)}),tV.propertyDictRefs.forEach(function(e){console.log("dictRef="+e),sR(!1,d,s,y,C,e,tL.hessianUnits)}),a.remove(),n8(h,nn,()=>{sU(e,m,s,i,g,d)})})}),n}function sz(e,t,s,i){for(;;){let n;if(null==(n=e?prompt("Please enter a name for the molecule",t):t))alert("The molecule ID cannot be null.");else if(""==n)alert("The molecule ID cannot be empty.");else{if(!i.has(n))return t=n,void 0!=s&&(s.setID(t),i.set(t,s)),t;if(t==n)return void 0!=s&&(s.setID(t),i.set(t,s)),t;alert("The molecule ID "+n+" is already in use.")}}}function sD(e,t,s,i,n,a){let o=no+" Edit id",d=i.addID(n.id,o,M),l=G(o,d,a);n.appendChild(l),l.addEventListener("click",()=>{let i=e.getID();n2(em.tagName,e.getID()),i=sz(!0,i,e,t),n3(em.tagName,i),s.textContent=e.getLabel()+" ▲"})}function s_(e,t,s,i,n,a){let o=U(void 0,a),d=nc+nl,l=nc+nd,r=G(l,t.addID(e,M),n);o.appendChild(r),r.classList.add(np),r.classList.add(nN);let g=t.addID(e,nc,nu),h=s();return void 0==h?(r.textContent=l,r.classList.toggle(np)):(sL(o,g,h,i,n),r.textContent=d,r.classList.toggle(nN)),r.addEventListener("click",e=>{null==document.getElementById(g)?(sL(o,g,h,i,n),r.textContent=d):(document.getElementById(g)?.remove(),console.log("Removed "+g),r.textContent=l),r.classList.toggle(np),r.classList.toggle(nN)}),o}function sL(e,t,s,i,n){let a;a=void 0==s?"":s;let o=z("text",t,n);o.addEventListener("change",e=>{let n=e.target;i(n.value),console.log(t+" changed from "+s+" to "+n.value),L(n)}),o.value=a,L(o),e.appendChild(o)}function sP(e,t,s,i,n,a){let o=G(nr,e.addID(s.id,"Add"+i+"Button"),a);return o.addEventListener("click",()=>{let i=new tk(new Map,t);s.insertBefore(sB(e,t,s.id,t.getAtoms(),i,n,a),o)}),o}function sB(e,t,s,i,n,a,o){let d,l,r,g,h,m,c=i.addAtom(n,n.getID()),u=U(e.addID(s,c),o);return u.appendChild(q(c,a)),d=n.getElementType(),l=tL.elementTypes,void 0==d&&(d=nE,n5(l,!0)),r=e.addID(u.id,tk.s_elementType),(h=(g=k(tk.s_elementType,l,tk.s_elementType,d,r,a,a)).querySelector("select")).addEventListener("change",e=>{let t=e.target;n.setElementType(t.value),P(t)}),h.value=d,P(h),ae(l,h),u.appendChild(g),m=e.addID(u.id,tk.s_x3),u.appendChild(n4(m,e,tk.s_x3,n.getX3.bind(n),n.setX3.bind(n),n.removeX3,a,a)),m=e.addID(u.id,tk.s_y3),u.appendChild(n4(m,e,tk.s_y3,n.getY3.bind(n),n.setY3.bind(n),n.removeY3,a,a)),m=e.addID(u.id,tk.s_z3),u.appendChild(n4(m,e,tk.s_z3,n.getZ3.bind(n),n.setZ3.bind(n),n.removeZ3,a,a)),n8(u,a,sA,t,c,e),n3(tO.s_atomRefs2,c),u}function sA(e,t,s){e.getAtoms().removeAtom(t),s.forEach(e=>{console.log("Removing "+e),nD(e)}),n2(tO.s_atomRefs2,t),e.getBonds().bonds.forEach(t=>{let s=t.getAtomRefs2().split(" ");if(s[0]==s[1]){let s=t.getID();e.getBonds().removeBond(s),n2(tO.tagName,s);let i=f(sE.tagName,e.id,tU.tagName,s),n=document.getElementById(i);if(null==n)throw Error("Bond div with id "+i+" not found.");n.remove()}})}function sk(e,t,s,i,n,a){let o=G(nr,e.addID(s.id,i,M),a);return o.addEventListener("click",()=>{let i=t.getAtoms().atoms;if(i.size<2){alert("There must be at least 2 atoms to create a bond.");return}let d=new Map,l=Array.from(i.keys()).slice(0,2).join(" ");d.set(tO.s_atomRefs2,l);let r=new tO(d,t);s.insertBefore(sG(e,t,s.id,i,t.getBonds(),r,n,a),o)}),s.appendChild(o),o}function sG(e,t,s,i,n,a,o,d){let l,r,g,h,m,c,u,p,N,x=n.addBond(a,a.getID()),v=U(f(s,x),d);return v.appendChild(q(x,o)),l=e.addID(v.id,tO.s_atomRefs2),r=a.getAtomRefs2().split(" "),g=Array.from(t.getAtoms().atoms.keys()),h=e.addID(l,0),(c=(m=k(tO.s_atomRefs2+"[0]",g,tk.tagName,r[0],h,o,o)).querySelector("select")).classList.add(tO.s_atomRefs2),c.addEventListener("change",e=>{let t=e.target,s=t.value+" "+r[1];console.log(tO.s_atomRefs2+" changed to "+s),a.setAtomRefs2(s),P(t)}),c.value=r[0],P(c),v.appendChild(m),u=e.addID(l,1),(N=(p=k(tO.s_atomRefs2+"[1]",g,tk.tagName,r[1],u,o,o)).querySelector("select")).classList.add(tO.s_atomRefs2),N.addEventListener("change",e=>{let t=e.target,s=r[0]+" "+t.value;console.log(tO.s_atomRefs2+" changed to "+s),a.setAtomRefs2(s),P(t)}),N.value=r[1],P(N),v.appendChild(p),function(e,t,s,i){let n=e.addID(t.id,tO.s_order),a=U(void 0,i);t.appendChild(a);let o=tO.s_order+nl,d=tO.s_order+nd,l=G(d,void 0,i);a.appendChild(l),l.classList.add(np),l.classList.add(nN);let r=s.getOrder();void 0==r?(l.textContent=d,l.classList.toggle(np)):(sO(a,s,n,r,i),l.textContent=o,l.classList.toggle(nN)),l.addEventListener("click",e=>{null==document.getElementById(n)?(void 0==r&&(r=1),sO(a,s,n,r,i),l.textContent=o):(document.getElementById(n)?.remove(),console.log("Removed "+n),l.textContent=d),l.classList.toggle(np),l.classList.toggle(nN)})}(e,v,a,o),Array.from(i.keys()).forEach(e=>{v.classList.add(e)}),n8(v,o,e=>t.getBonds().removeBond(e),x),n3(tO.tagName,x),v}function sO(e,t,s,i,n){let a=i.toString(),o=A(tO.orderOptions,tO.s_order,a,s,n);o.addEventListener("change",e=>{let s=e.target;t.setOrder(parseFloat(s.value)),console.log(tO.s_order+" changed from "+a+" to "+s.value),P(s)}),o.value=a,P(o),o.id=s,e.appendChild(o)}function sU(e,t,s,i,n,a){e.removeChild(t),s.removeIDs(n),s.removeIDs(f(n,nc)),s.removeIDs(f(n,tG.tagName)),s.removeIDs(f(n,tU.tagName)),s.removeIDs(f(n,nS)),s.removeIDs(f(n,t7.tagName)),i.delete(a.getID())}function sq(e,t,s,i,n,a,o,d,l){let r=f(o.id,t.dictRef),g=a.getElementsByTagName(tF.tagName);if(g.length>0){if(1!=g.length)throw Error("Expecting 1 "+tF.tagName+" but finding "+g.length+"!");let i=Y(g[0]),a=new(u(p))(i),l=et(g[0]),h=new tF(l,a);t.setProperty(h),h.setValue=(function(e){h.value=e,t.dictRef==tX.dictRef&&n1()}).bind(h);let m=n4(r,n,t.dictRef,h.getValue.bind(h),s=>sb(t.dictRef,e,h,s),()=>e.removeProperty(t.dictRef),na,nn);n7(s,l,m,m.querySelector(nu),n.addID(r,tF.s_units),t.dictRef,d,d),o.appendChild(m)}else{let g=a.getElementsByTagName(tH.tagName);if(g.length>0){if(1!=g.length)throw Error("Expecting 1 "+tH.tagName+" but finding "+g.length+"!");let i=Y(g[0]);if(""!=i){let a=E(i.split(/\s+/)),l=et(g[0]),h=new tH(l,a);t.setProperty(h);let m=sH(r,n,t.dictRef,h,h.getValues.bind(h),h.setValues,()=>e.removeProperty(t.dictRef),na,nn);n7(s,l,m,m.querySelector(nC),n.addID(r,tH.s_units),t.dictRef,d,d),o.appendChild(m)}}else{let e=a.getElementsByTagName(tV.tagName);if(e.length>0){var h,m;let a,g,c;if(1!=e.length)throw Error("Expecting 1 "+tV.tagName+" but finding "+e.length+"!");let u=Y(e[0]),p=E(u.split(/\s+/)),N=et(e[0]),f=new tV(N,p);t.setProperty(f);let x=t.dictRef,v=(h=e=>{let s=e.target;sj(!1,t.dictRef,f,s)},m=u,a=U(void 0,l),(c=D(r,d)).onchange=h,c.value=m,B(c),(g=q(x,d)).htmlFor=r,a.appendChild(g),a.appendChild(c),a),w=v.querySelector("textarea");w.value=u,B(w),w.addEventListener("change",e=>{u=e.target.value,f=t.getProperty(),p=E(u.split(/\s+/)),f.values=p,console.log("Set "+t.dictRef+" of "+i.getLabel()+" to "+u),B(w)}),n7(s,N,v,w,n.addID(r,tH.s_units),t.dictRef,d,d),o.appendChild(v)}else throw Error("Expecting "+tF.tagName+", "+tH.tagName+" or "+tV.tagName+" but finding none!")}}}function sF(e,t,s,i,n){let a;let o=O(e.addID(s.id,nS,nm),n);s.appendChild(o);let l=e.addID(s.id,nS),r=!1,g=!1;function h(e,s){let n=O(l,i);n.className="mol-container",o.appendChild(n);let a=$3Dmol.createViewer(n,{backgroundColor:"grey"});return a.setStyle({stick:{}}),t.getAtoms().atoms.forEach(function(t){let s,i,n=t.getElementType();s=void 0==n?"Purple":tL.atomColors.get(n)||"Purple",i=void 0==n?100:tL.atomRadii.get(t.getElementType())||100;let o=t.getX3()?.toNumber()||0,d=t.getY3()?.toNumber()||0,l=t.getZ3()?.toNumber()||0;a.addSphere({center:{x:o,y:d,z:l},radius:i/110,color:s}),e&&a.addLabel(t.getID(),{position:{x:o,y:d,z:l}})}),t.getBonds().bonds.forEach(function(e){let i=e.getAtomRefs2().split(" "),n=t.getAtoms(),o=n.getAtom(i[0]),d=n.getAtom(i[1]),l=e.getOrder()||1,r=tL.bondColors.get(l)||"Purple",g=o.getX3()?.toNumber()||0,h=o.getY3()?.toNumber()||0,m=o.getZ3()?.toNumber()||0,c=d.getX3()?.toNumber()||0,u=d.getY3()?.toNumber()||0,p=d.getZ3()?.toNumber()||0;a.addCylinder({start:{x:g,y:h,z:m},end:{x:c,y:u,z:p},radius:.06*l,color:r}),s&&a.addLabel(e.getID(),{position:{x:(g+c)/2,y:(h+u)/2,z:(m+p)/2}})}),a.zoomTo(),a.render(),a.zoom(.8,2e3),a}let m=G("Draw/Redraw",void 0);function c(e,t,s,n){let o=G((s?"Hide ":"Show ")+e,t,i);return o.addEventListener("click",()=>{s?(o.textContent="Show "+e,s=!1):(o.textContent="Hide "+e,s=!0),n(s),nD(l),a=h(r,g)}),o}m.addEventListener("click",()=>{nD(l),a=h(r,g)}),o.appendChild(m);let u="Atom Labels",p=c(u,e.addID(l,u),r,e=>r=e);o.appendChild(p);let N="Bond Labels",f=c(N,e.addID(l,N),g,e=>g=e);o.appendChild(f);let x=G("Save as PNG",e.addID(l,nv),na);x.addEventListener("click",()=>{let e=a.pngURI(),t=document.createElement("a");t.href=e;let s=d.getTitle()?.value;t.download=s.replace(/[^a-z0-9]/gi,"_")+"mol.png",document.body.appendChild(t),t.click(),document.body.removeChild(t),console.log("Save Image")}),o.appendChild(x)}function sH(e,t,s,i,n,a,o,d,l){let r=U(void 0,l),g=s+nl,h=s+nd,m=G(h,t.addID(e,s,M),d);r.appendChild(m),m.classList.add(np),m.classList.add(nN);let c=t.addID(e,s,nu),u=n();return void 0==u?(m.textContent=h,m.classList.toggle(np)):(sV(r,c,s,u,i,n,a,d),m.textContent=g,m.classList.toggle(nN)),m.addEventListener("click",e=>{null==document.getElementById(c)?(sV(r,c,s,u,i,n,a,d),m.textContent=g):(document.getElementById(c)?.remove(),o(),console.log("Removed "+c),m.textContent=h),m.classList.toggle(np),m.classList.toggle(nN)}),r}function sV(e,t,s,i,n,a,o,d){let l;l=void 0==i?"":y(i);let r=D(t,d);r.addEventListener("change",e=>{let t=e.target,i=sj(!0,s,n,r);try{o(i),console.log(s+" changed from "+l+" to "+t.value)}catch(e){alert("Input invalid, resetting..."),t.value=a().toString()}B(t)}),r.value=l,B(r),e.appendChild(r)}function sj(e,t,s,i){var n;let a,o,d,l=i.value.trim(),r=v(s.values," ");if(""==l)return alert("Empty input resetting..."),i.value=r,s.values;let g=(n=s.values,a=l.split(/\s+/),o=[],d=!0,(a.forEach(function(e){w(e)?o.push(new(u(p))(e)):d=!1}),d)?o:(alert("An input is not a number, resetting..."),n));return g.length==s.values.length?(s.setValues(g),console.log("Changed "+s.tagName+' from: "'+r+'" to: "'+v(s.values," ")+'"')):e?(s.setValues(g),console.log("Changed "+s.tagName+' from: "'+r+'" to: "'+v(s.values," ")+'"')):(alert("Expecting "+s.values.length+" values for, but finding "+g.length+" resetting..."),i.value=r),s.values}class sX{constructor(){}readFile(){return new Promise((e,t)=>{let s=document.createElement("input");s.type="file";let i=this;s.onchange=function(){if(s.files){let n=s.files[0];n.name;let a=new FileReader,o=0,d="";a.onload=function(s){if(null==s.target){t(Error("Event target is null"));return}if(d+=s.target.result,null!=n){if(o<n.size){let e=n.slice(o,o+1048576);a.readAsText(e),o+=1048576}else{d=d.trim();let t=new DOMParser().parseFromString(d,"text/xml");e(i.parse(t))}}};let l=n.slice(o,o+1048576);a.readAsText(l),o+=1048576}},s.click()})}parse(e){let t=new Map,s=es(e,tR.tagName),i=new Set;s.childNodes.forEach(function(e){i.add(e.nodeName)});let n=s.getElementsByTagName(sE.tagName),a=n.length;console.log("Number of molecules="+a);let o=0;for(let e=0;e<a;e++){let s=et(n[e]),i=s.get(sE.s_id);if(void 0==i)throw Error(sE.s_id+" is undefined");let a=n[e].childNodes;if(0==a.length){if(o++,void 0==s.get("ref"))throw Error("ref is undefined");continue}let d=sz(!1,i,void 0,t),l=new sE(s,d);t.set(d,l);let r=new Set;for(let e=0;e<a.length;e++){let t=a[e];r.has(t.nodeName)?"#text"!=t.nodeName&&console.warn("Another ChildNode with nodeName="+t.nodeName):r.add(t.nodeName)}let g=n[e].getElementsByTagName(tw.tagName);if(g.length>0){if(g.length>1)throw Error("Expecting 1 or 0 "+tw.tagName+" but finding "+g.length+"!");let e=new tw(et(g[0]));l.setMetadataList(e);let t=g[0].getElementsByTagName(tp.tagName);for(let s=0;s<t.length;s++){let i=new tp(et(t[s]));e.addMetadata(i)}r.delete(tw.tagName)}let h=n[e].getElementsByTagName(tG.tagName);if(h.length>1)throw Error("Expecting 1 or 0 "+tG.tagName+" but finding "+h.length+"!");if(1==h.length){let e=h[0],t=e.getElementsByTagName(tk.tagName);if(0==t.length)throw Error("Expecting 1 or more atoms in "+tG.tagName+", but finding 0!");let s=new tG(et(e));l.setAtoms(s);for(let e=0;e<t.length;e++)s.addAtom(new tk(et(t[e]),l));r.delete(tG.tagName)}else{let t=n[e].getElementsByTagName(tk.tagName);if(1==t.length){let e=new tG(new Map);e.addAtom(new tk(et(t[0]),l)),l.setAtoms(e)}else if(t.length>1)throw Error("Expecting 1 "+tk.tagName+" but finding "+t.length+". Should these be in an "+tG.tagName+"?")}r.delete(tk.tagName);let m=n[e].getElementsByTagName(tU.tagName);if(m.length>0){if(m.length>1)throw Error("Expecting 1 or 0 "+tU.tagName+" but finding "+m.length+"!");let e=m[0].getElementsByTagName(tO.tagName),t=new tU(et(m[0]));for(let s=0;s<e.length;s++)t.addBond(new tO(et(e[s]),l));l.setBonds(t),r.delete(tU.tagName)}else{let t=n[e].getElementsByTagName(tO.tagName);if(t.length>0){if(t.length>1)throw Error("Expecting 1 "+tO.tagName+" but finding "+t.length+". Should these be in a "+tU.tagName+"?");let e=new tU(new Map);e.addBond(new tO(et(t[0]),l)),l.setBonds(e)}}r.delete(tO.tagName);let c=n[e].getElementsByTagName(t7.tagName);if(c.length>1)throw Error("Expecting 1 or 0 "+t7.tagName+" but finding "+c.length+"!");if(1==c.length){let e=new t7(et(c[0]));l.setPropertyList(e);let t=c[0].getElementsByTagName(tj.tagName);for(let s=0;s<t.length;s++)e.setProperty(new tj(et(t[s])));r.delete(t7.tagName)}else{let t=new t7(new Map);l.setPropertyList(t);let s=n[e].getElementsByTagName(tj.tagName);if(1!=s.length)throw Error("Expecting 1 "+tj.tagName+" but finding "+s.length+". Should these be in a "+t7.tagName+"?");t.setProperty(new tj(et(s[0]))),r.delete(tj.tagName)}let N=n[e].getElementsByTagName(sn.tagName);if(N.length>0){if(N.length>1)throw Error("Expecting 1 or 0 "+sn.tagName+" but finding "+N.length+"!");let e=new sn(et(N[0]));l.setEnergyTransferModel(e),r.delete(sn.tagName)}let f=n[e].getElementsByTagName(sa.tagName);if(f.length>0){if(f.length>1)throw Error("Expecting 1 or 0 "+sa.tagName+" but finding "+f.length+"!");let e=new sa(et(f[0]));l.setDOSCMethod(e),r.delete(sa.tagName)}let x=n[e].getElementsByTagName(sl.tagName);if(x.length>0){if(x.length>1)throw Error("Expecting 1 or 0 "+sl.tagName+" but finding "+x.length+"!");let e=new sl(et(x[0]));l.setDistributionCalcMethod(e),r.delete(sl.tagName)}let v=n[e].getElementsByTagName(sv.tagName);if(v.length>0){if(v.length>1)throw Error("Expecting 1 or 0 "+sv.tagName+" but finding "+v.length+"!");let e=new sv(et(v[0]));l.setDensityOfStatesList(e);let t=v[0].getElementsByTagName(sx.tagName),s=v[0].getElementsByTagName(tP.tagName);if(s.length>0){if(s.length>1)throw Error("Expecting 1 or 0 "+tP.tagName+" but finding "+s.length+"!");let t=new tP(et(s[0]),X(j(s[0])));e.setDescription(t)}if(0==t.length)throw Error("Expecting 1 or more "+sx.tagName+" but finding 0!");for(let s=0;s<t.length;s++){let i=new sx(et(t[s]));e.addDensityOfStates(i);let n=t[s].getElementsByTagName(tB.tagName);if(1!=n.length)throw Error("Expecting 1 "+tB.tagName+" but finding "+n.length+"!");{let e=new tB(et(n[0]),new(u(p))(X(j(n[0]))));i.setT(e)}let a=t[s].getElementsByTagName(sp.tagName);if(1!=a.length)throw Error("Expecting 1 "+sp.tagName+" but finding "+a.length+"!");{let e=new sp(et(a[0]),new(u(p))(X(j(a[0]))));i.setQtot(e)}let o=t[s].getElementsByTagName(sN.tagName);if(1!=o.length)throw Error("Expecting 1 "+sN.tagName+" but finding "+o.length+"!");{let e=new sN(et(o[0]),new(u(p))(X(j(o[0]))));i.setSumc(e)}let d=t[s].getElementsByTagName(sf.tagName);if(1!=d.length)throw Error("Expecting 1 "+sf.tagName+" but finding "+d.length+"!");{let e=new sf(et(d[0]),new(u(p))(X(j(d[0]))));i.setSumg(e)}}r.delete(sv.tagName)}r.delete("#text"),r.size>0&&(console.warn("There are additional unexpected moleculeTagNames:"),r.forEach(e=>console.warn(e)))}return console.log("Number of molecules="+t.size),console.log("Number of alias molecules="+o.toString()),t}}let sY="https://github.com/MESMER-kinetics",s$=sY+"/mxg",sK=document.createElement("a");sK.href=s$,sK.textContent=s$;let sW=s$+"/tree/main/data/examples",sZ=document.createElement("a");sZ.href=sW,sZ.textContent=sW;let sQ=sY+"/MESMER-code",sJ=document.createElement("a");sJ.href=sQ,sJ.textContent=sQ;let s0=document.createElement("a");s0.href="https://epsrc.ukri.org/",s0.textContent="The UK Engineering and Physical Sciences Research Council (EPSRC)";let s1=document.createElement("a");s1.href="https://www.leeds.ac.uk/",s1.textContent="The University of Leeds";let s2="https://github.com/3dmol/3Dmol.js",s3=document.createElement("a");s3.href=s2,s3.textContent=s2;let s5=document.createElement("a");s5.href="http://doi.org/10.1093/bioinformatics/btu829",s5.textContent="doi:10.1093/bioinformatics/btu829";let s4="https://mikemcl.github.io/big.js/",s6=document.createElement("a");s6.href=s4,s6.textContent=s4;class s8{constructor(){this.tagName="defaults",this.values=new Map,this.attributess=new Map}readFile(){let e=document.createElement("input");e.type="file";let t=this;e.onchange=function(){if(e.files){for(let t=0;t<e.files.length;t++)console.log("inputElement.files["+t+"]="+e.files[t]);let s=e.files[0];console.log(s.name),s.name;let i=new FileReader,n=0,a="";i.onload=function(e){if(null==e.target)throw Error("Event target is null");if(a+=e.target.result,null!=s){if(n<s.size){let e=s.slice(n,n+1048576);i.readAsText(e),n+=1048576}else{a=a.trim();let e=new DOMParser().parseFromString(a,"text/xml");t.parse(e)}}};let o=s.slice(n,n+1048576);i.readAsText(o),n+=1048576}},e.click()}parse(e){let t=es(e,this.tagName);console.log("Default attributes: "+x(et(t)));let s=t.children;console.log("children.length="+s.length);for(let e=0;e<s.length;e++){let t=s[e],i=t.tagName;console.log("tagName="+i);let n=et(t);if(this.attributess.set(i,n),console.log("Attributes: "+x(n)),"property"==i){let e=t.getAttribute("dictRef");try{let s=es(t,"scalar").innerHTML;null!=s?(console.log("v="+s),this.values.set(e,s)):console.log("v is null")}catch(e){console.log("Error: "+e)}}else{let e=t.innerHTML;null!=e?(console.log("v="+e),this.values.set(i,e)):console.log("v is null")}}console.log("values: "+x(this.values)),this.attributess.forEach((e,t)=>{console.log("key="+t+" value="+x(e))})}}class s9 extends K{static{this.tagName="molecule"}static{this.s_ref="ref"}static{this.s_role="role"}constructor(e){super(e,s9.tagName),this.ref=e.get(s9.s_ref),this.role=e.get(s9.s_role)}getRef(){return this.ref}setRef(e){this.ref=e,this.attributes.set("ref",e)}getRole(){return this.role}setRole(e){this.role=e,this.attributes.set("role",e)}}class s7 extends J{static{this.tagName="reactant"}static{this.s_deficientReactant="deficientReactant"}static{this.s_excessReactant="excessReactant"}static{this.s_modelled="modelled"}static{this.roleOptions=[s7.s_deficientReactant,s7.s_excessReactant,s7.s_modelled]}constructor(e,t){super(e,s7.tagName),this.addNode(t)}getMolecule(){return this.nodes.get(0)}}class ie extends J{static{this.tagName="product"}static{this.roleOptions=["modelled","sink"]}constructor(e,t){super(e,ie.tagName),this.addNode(t)}getMolecule(){return this.nodes.get(0)}}class it extends J{static{this.tagName="me:transitionState"}static{this.role="transitionState"}constructor(e,t){super(e,it.tagName),this.addNode(t)}getMolecule(){return this.nodes.get(0)}}class is extends Z{static{this.tagName="me:preExponential"}constructor(e,t){super(e,is.tagName,t)}}class ii extends Z{static{this.tagName="me:activationEnergy"}constructor(e,t){super(e,ii.tagName,t)}}class ia extends Z{static{this.tagName="me:TInfinity"}constructor(e,t){super(e,ia.tagName,t)}}class io extends Z{static{this.tagName="me:nInfinity"}constructor(e,t){super(e,io.tagName,t)}}class id extends J{static{this.tagName="me:MCRCMethod"}constructor(e){super(e,id.tagName)}}class il extends id{static{this.xsiType="me:MesmerILT"}static{this.xsiType2="MesmerILT"}constructor(e,t,s,i,n){super(e),this.index=new Map,void 0!=t&&(this.index.set(is.tagName,this.index.size),this.addNode(t)),void 0!=s&&(this.index.set(ii.tagName,this.index.size),this.addNode(s)),void 0!=i&&(this.index.set(ia.tagName,this.index.size),this.addNode(i)),void 0!=n&&(this.index.set(io.tagName,this.index.size),this.addNode(n))}getPreExponential(){let e=this.index.get(is.tagName);if(void 0!=e)return this.nodes.get(e)}setPreExponential(e){let t=this.index.get(is.tagName);void 0==t?(this.index.set(is.tagName,this.nodes.size),this.addNode(e)):this.nodes.set(t,e)}getActivationEnergy(){let e=this.index.get(ii.tagName);if(void 0!=e)return this.nodes.get(e)}setActivationEnergy(e){let t=this.index.get(ii.tagName);void 0==t?(this.index.set(ii.tagName,this.nodes.size),this.addNode(e)):this.nodes.set(t,e)}getTInfinity(){let e=this.index.get(ia.tagName);if(void 0!=e)return this.nodes.get(e)}setTInfinity(e){let t=this.index.get(ia.tagName);void 0==t?(this.index.set(ia.tagName,this.nodes.size),this.addNode(e)):this.nodes.set(t,e)}getNInfinity(){let e=this.index.get(io.tagName);if(void 0!=e)return this.nodes.get(e)}setNInfinity(e){let t=this.index.get(io.tagName);void 0==t?(this.index.set(io.tagName,this.nodes.size),this.addNode(e)):this.nodes.set(t,e)}}class ir extends K{static{this.tagName="me:tunneling"}static{this.options=["Eckart","WKB"]}static{this.s_name="name"}constructor(e){super(e,ir.tagName)}getName(){return this.attributes.get(ir.s_name)}setName(e){this.attributes.set(ir.s_name,e)}}class ig extends Z{static{this.tagName="me:excessReactantConc"}constructor(e,t){super(e,ig.tagName,t)}}class ih extends Z{static{this.tagName="me:val"}constructor(e,t){super(e,ih.tagName,t)}}class im extends Z{static{this.tagName="me:rev"}constructor(e,t){super(e,im.tagName,t)}}class ic extends Z{static{this.tagName="me:Keq"}constructor(e,t){super(e,ic.tagName,t)}}class iu extends J{static{this.tagName="me:kinf"}constructor(e,t,s,i,n){super(e,iu.tagName),this.index=new Map,void 0!=t&&(this.index.set(tB.tagName,this.nodes.size),this.addNode(t)),void 0!=s&&(this.index.set(ih.tagName,this.nodes.size),this.addNode(s)),void 0!=i&&(this.index.set(im.tagName,this.nodes.size),this.addNode(i)),void 0!=n&&(this.index.set(ic.tagName,this.nodes.size),this.addNode(n))}getT(){let e=this.index.get(tB.tagName);if(void 0!=e)return this.nodes.get(e)}setT(e){let t=this.index.get(tB.tagName);void 0==t?(this.index.set(tB.tagName,this.nodes.size),this.addNode(e)):this.nodes.set(t,e)}getVal(){let e=this.index.get(ih.tagName);if(void 0!=e)return this.nodes.get(e)}setVal(e){let t=this.index.get(ih.tagName);void 0==t?(this.index.set(ih.tagName,this.nodes.size),this.addNode(e)):this.nodes.set(t,e)}getRev(){let e=this.index.get(im.tagName);if(void 0!=e)return this.nodes.get(e)}setRev(e){let t=this.index.get(im.tagName);void 0==t?(this.index.set(im.tagName,this.nodes.size),this.addNode(e)):this.nodes.set(t,e)}getKeq(){let e=this.index.get(ic.tagName);if(void 0!=e)return this.nodes.get(e)}setKeq(e){let t=this.index.get(ic.tagName);void 0==t?(this.index.set(ic.tagName,this.nodes.size),this.addNode(e)):this.nodes.set(t,e)}getHeader(){let e=[];return e.push("T ("+this.getT()?.attributes.get("units")+")"),e.push("kf ("+this.getVal()?.attributes.get("units")+")"),e.push("krev ("+this.getRev()?.attributes.get("units")+")"),e.push("Keq ("+this.getKeq()?.attributes.get("units")+")"),e}toStringArray(){let e=this.getT(),t=this.getVal(),s=this.getRev(),i=this.getKeq();return[e.value.toString(),t.value.toString(),s.value.toString(),i.value.toString()]}toCSV(){return this.toStringArray().join(",")}}class ip extends J{static{this.tagName="me:canonicalRateList"}constructor(e,t,s){super(e,ip.tagName),this.index=new Map,this.kinfIndex=new Map,void 0!=t&&(this.index.set(tP.tagName,this.nodes.size),this.addNode(t)),void 0!=s&&s.forEach(e=>{this.kinfIndex.set(this.nodes.size,this.nodes.size),this.addNode(e)})}getDescription(){let e=this.index.get(tP.tagName);if(void 0!=e)return this.nodes.get(e)}setDescription(e){let t=this.index.get(tP.tagName);void 0==t?(this.index.set(tP.tagName,this.nodes.size),this.addNode(e)):this.nodes.set(t,e)}getKinfs(){return Array.from(this.kinfIndex.values()).map(e=>this.nodes.get(e))}addKinf(e){this.kinfIndex.set(this.kinfIndex.size,this.nodes.size),this.addNode(e)}toCSV(){let e="",t=!0;return this.getKinfs().forEach(s=>{t&&(t=!1,e+=s.getHeader().join(",")+"\n"),e+=s.toCSV()+"\n"}),e}}class iN extends J{static{this.tagName="reaction"}static{this.s_id="id"}constructor(e,t,s,i,n,a,o,d){super(e,iN.tagName),this.index=new Map,this.reactantsIndex=new Map,this.productsIndex=new Map,this.transitionStatesIndex=new Map;let l=e.get(iN.s_id);if(void 0==l)throw Error(iN.s_id+" is undefined!");this.id=l,void 0!=t&&(t.forEach((e,t)=>{this.reactantsIndex.set(e.getMolecule().getRef(),this.nodes.size),this.addNode(e)}),this.index.set(s7.tagName,this.reactantsIndex)),void 0!=s&&(s.forEach((e,t)=>{this.productsIndex.set(e.getMolecule().getRef(),this.nodes.size),this.addNode(e)}),this.index.set(ie.tagName,this.productsIndex)),void 0!=i&&(this.index.set(ir.tagName,this.nodes.size),this.addNode(i)),void 0!=n&&(n.forEach((e,t)=>{this.transitionStatesIndex.set(e.getMolecule().getRef(),this.nodes.size),this.addNode(e)}),this.index.set(it.tagName,this.transitionStatesIndex)),void 0!=a&&(this.index.set(id.tagName,this.nodes.size),this.addNode(a)),void 0!=o&&(this.index.set(ig.tagName,this.nodes.size),this.addNode(o)),void 0!=d&&(this.index.set(ip.tagName,this.nodes.size),this.addNode(d))}addToIndex(e,t){let s=this.index.get(e);if(void 0==s)this.index.set(e,this.nodes.size);else if(s instanceof Map)s.set(t.tagName,this.nodes.size);else{let i=new Map;i.set(this.nodes.get(s).getRef(),s),i.set(t.tagName,this.nodes.size),this.index.set(e,i)}}getReactants(){let e=this.index.get(s7.tagName);if(void 0==e)return new Map;let t=new Map;if(e instanceof Map)e.forEach((e,s)=>{t.set(s,this.nodes.get(e))});else{let s=this.nodes.get(e);t.set(s.getMolecule().getRef(),s)}return t}setReactants(e){e.forEach((e,t)=>{this.reactantsIndex.set(e.getMolecule().getRef(),this.nodes.size),this.addNode(e)}),this.index.set(s7.tagName,this.reactantsIndex)}getReactant(e){let t=this.reactantsIndex.get(e);if(void 0==t)throw Error(`Reactant with ref ${e} not found`);return this.nodes.get(t)}addReactant(e){this.reactantsIndex.set(e.getMolecule().getRef(),this.nodes.size),this.addNode(e)}removeReactant(e){let t=this.reactantsIndex.get(e);if(void 0==t)throw Error(`Reactant with ref ${e} not found`);this.nodes.delete(t),this.reactantsIndex.delete(e)}getProducts(){let e=this.index.get(ie.tagName);if(void 0==e)return new Map;let t=new Map;if(e instanceof Map)e.forEach((e,s)=>{t.set(s,this.nodes.get(e))});else{let s=this.nodes.get(e);t.set(s.getMolecule().getRef(),s)}return t}setProducts(e){e.forEach((e,t)=>{this.productsIndex.set(e.getMolecule().getRef(),this.nodes.size),this.addNode(e)}),this.index.set(ie.tagName,this.productsIndex)}getProduct(e){let t=this.productsIndex.get(e);if(void 0==t)throw Error(`Product with ref ${e} not found`);return this.nodes.get(t)}addProduct(e){this.productsIndex.set(e.getMolecule().getRef(),this.nodes.size),this.addNode(e)}removeProduct(e){let t=this.productsIndex.get(e);if(void 0==t)throw Error(`Product with ref ${e} not found`);this.nodes.delete(t),this.productsIndex.delete(e)}getTunneling(){let e=this.index.get(ir.tagName);if(void 0!=e)return this.nodes.get(e)}setTunneling(e){let t=this.index.get(ir.tagName);if(void 0==t)this.index.set(ir.tagName,this.nodes.size),this.addNode(e);else{if(t instanceof Map)throw Error("Tunneling is a map and it is assumed there would be only 1!");this.nodes.set(t,e)}}getTransitionStates(){let e=this.index.get(it.tagName);if(void 0==e)return new Map;let t=new Map;if(e instanceof Map)e.forEach((e,s)=>{t.set(s,this.nodes.get(e))});else{let s=this.nodes.get(e);t.set(s.getMolecule().getRef(),s)}return t}setTransitionStates(e){e.forEach((e,t)=>{this.transitionStatesIndex.set(e.getMolecule().getRef(),this.nodes.size),this.addNode(e)}),this.index.set(it.tagName,this.transitionStatesIndex)}getTransitionState(e){let t=this.transitionStatesIndex.get(e);if(void 0==t)throw Error(`Transition state with ref ${e} not found`);return this.nodes.get(t)}addTransitionState(e){this.transitionStatesIndex.set(e.getMolecule().getRef(),this.nodes.size),this.addNode(e)}removeTransitionState(e){let t=this.transitionStatesIndex.get(e);if(void 0==t)throw Error(`Transition State with ref ${e} not found`);this.nodes.delete(t),this.transitionStatesIndex.delete(e)}getMCRCMethod(){let e=this.index.get(id.tagName);if(void 0!=e)return this.nodes.get(e)}setMCRCMethod(e){let t=this.index.get(id.tagName);if(void 0==t)this.index.set(id.tagName,this.nodes.size),this.addNode(e);else{if(t instanceof Map)throw Error("MCRCMethod is a map and it is assumed there would be only 1!");this.nodes.set(t,e)}}getExcessReactantConc(){let e=this.index.get(ig.tagName);if(void 0!=e)return this.nodes.get(e)}setExcessReactantConc(e){let t=this.index.get(ig.tagName);if(void 0==t)this.index.set(ig.tagName,this.nodes.size),this.addNode(e);else{if(t instanceof Map)throw Error("ExcessReactantConc is a map and it is assumed there would be only 1!");this.nodes.set(t,e)}}getCanonicalRateList(){let e=this.index.get(ip.tagName);if(void 0!=e)return this.nodes.get(e)}setCanonicalRateList(e){let t=this.index.get(ip.tagName);if(void 0==t)this.index.set(ip.tagName,this.nodes.size),this.addNode(e);else{if(t instanceof Map)throw Error("CanonicalRateList is a map and it is assumed there would be only 1!");this.nodes.set(t,e)}}getReactantsLabel(){return Array.from(this.getReactants().values()).map(e=>e.getMolecule().getRef()).join(" + ")}getProductsLabel(){return Array.from(this.getProducts().values()).map(e=>e.getMolecule().getRef()).join(" + ")}getLabel(){return this.id+" ("+this.getReactantsLabel()+" -> "+this.getProductsLabel()+")"}getReactantsEnergy(e,t){return Array.from(this.getReactants().values()).map(s=>{let i=s.getMolecule().getRef(),n=e(i,t);return void 0==n?(console.log("molecule with ref "+i+" not found"),alert("Molecule with ref "+i+" not found. Please add it to the list of molecules.                  In the meantime it will be treated ashaving an energy of 0."),nH):n.getEnergy()}).reduce((e,t)=>e.add(t),new p.Big(0))}getProductsEnergy(e,t){return Array.from(this.getProducts().values()).map(s=>{let i=s.getMolecule().getRef(),n=e(i,t);if(void 0==n)throw Error(`Molecule with ref ${i} not found`);return n.getEnergy()}).reduce((e,t)=>e.add(t),new p.Big(0))}get(e,t){if(this.index.has(e)){let s=this.index.get(e);if(void 0!=s){if(!(s instanceof Map))return this.nodes.get(s);{let e=s.get(t);if(void 0!=e)return this.nodes.get(e)}}}}}function ix(e,t,s,i){let n=G(nr,nz(iN.tagName,"add",M),nn);return t.appendChild(n),n.addEventListener("click",()=>{let a=new Map,o=d.getReactionList(),l=o.getNextReactionID();console.log("Next Reaction ID="+l),a.set(iN.s_id,"R"+l);let r=new iN(a);s.set(r.id,r),o.addReaction(r);let g=e.addID(iN.tagName,r.id),h=O(g);t.appendChild(h);let m=T(e.addID(g,nm),t,n,h,r.getLabel(),na,nn),c=m.querySelector("button"),u=e.addID(g,s7.tagName),p=O(u);T(e.addID(u,nm),h,null,p,nx,na,nn);let N=new Map;r.setReactants(N),iv(r,c,e,g,p,i,N);let f=e.addID(g,ie.tagName),x=O(f);T(e.addID(f,nm),h,null,x,nf,na,nn);let v=new Map;r.setProducts(v),iE(r,c,e,g,x,i,v);let E=e.addID(g,it.tagName),w=O(E);T(e.addID(E,nm),h,null,w,ny,na,nn);let y=new Map;r.setTransitionStates(y),iw(e,g,w,i,y),n8(h,nn,()=>{iy(t,m,e,g,s,r)})}),n}function iv(e,t,s,i,n,a,o){let d=G(nr,s.addID(i,s7.tagName,M),nn);n.appendChild(d),d.addEventListener("click",()=>{if(0===a.size){alert("Please add a molecule to the moleculeList first.");return}let l=U(void 0);n.insertBefore(l,d);let r=A(nX(a),S,"",f(i,s7.tagName,S),nn);r.classList.add(em.tagName),l.appendChild(r),r.addEventListener("click",e=>{1===r.options.length&&(alert("As there is only one molecule it will be selected."),r.selectedIndex=0,r.dispatchEvent(new Event("change")))}),r.addEventListener("change",d=>{let g=d.target,h=a.get(g.value),m=new Map,c=h.getID();if(o.has(c)){alert("Molecule already selected as a reactant. Please select a different molecule                 (you may want to add more molecules to the moleculeList)."),l.removeChild(r);return}l.id=s.addID(i,s7.tagName,c),m.set(s9.s_ref,c);let u=new s9(m),p=new s7(new Map,u);o.set(c,p),e.addReactant(p),t.textContent=e.getLabel(),console.log("ReactionLabel="+e.getLabel());let N=k(u.getRef()+" role",s7.roleOptions,"Role",u.getRole(),f(i,S),na,nn),x=N.querySelector("select");x?.addEventListener("change",e=>{let t=e.target;u.setRole(t.value),console.log("Set Role to "+t.value),P(t)}),l.appendChild(N),l.removeChild(r),n8(l,na,()=>{n.removeChild(l),o.delete(c)})}),1===r.options.length&&(r.selectedIndex=0,r.dispatchEvent(new Event("change")))})}function iE(e,t,s,i,n,a,o){let d=G(nr,s.addID(i,ie.tagName,M),nn);n.appendChild(d),d.addEventListener("click",()=>{if(0===a.size){alert("Please add a molecule to the moleculeList first.");return}let l=U(void 0);n.insertBefore(l,d);let r=A(nX(a),S,"",f(i,ie.tagName,S),nn);r.classList.add(em.tagName),l.appendChild(r),r.addEventListener("click",e=>{1===r.options.length&&(alert("As there is only one molecule it will be selected."),r.selectedIndex=0,r.dispatchEvent(new Event("change")))}),r.addEventListener("change",d=>{let g=d.target,h=a.get(g.value),m=new Map,c=h.getID();if(o.has(c)){alert("Molecule already selected as a product. Please select a different molecule (you may want to add more molecules to the moleculeList)."),l.removeChild(r);return}l.id=s.addID(i,ie.tagName,c),m.set(s9.s_ref,c);let u=new s9(m),p=new ie(new Map,u);o.set(c,p),e.addProduct(p),t.textContent=e.getLabel(),console.log("ReactionLabel="+e.getLabel());let N=k(u.getRef()+" role",ie.roleOptions,"Role",u.getRole(),f(i,S),na,nn),x=N.querySelector("select");x?.addEventListener("change",e=>{let t=e.target;u.setRole(t.value),console.log("Set Role to "+t.value),P(t)}),l.appendChild(N),l.removeChild(r),n8(l,na,()=>{n.removeChild(l),o.delete(c)})}),1===r.options.length&&(r.selectedIndex=0,r.dispatchEvent(new Event("change")))})}function iw(e,t,s,i,n){let a=G(nr,e.addID(t,it.tagName,M),nn);s.appendChild(a),a.addEventListener("click",()=>{if(0===i.size){alert("Please add a molecule to the moleculeList first.");return}let o=U(void 0);s.insertBefore(o,a);let d=A(nX(i),S,"",f(t,it.tagName,S),nn);d.classList.add(em.tagName),o.appendChild(d),d.addEventListener("click",e=>{1===d.options.length&&(alert("As there is only one molecule it will be selected."),d.selectedIndex=0,d.dispatchEvent(new Event("change")))}),d.addEventListener("change",a=>{let l=a.target,r=i.get(l.value),g=new Map,h=r.getID();if(n.has(h)){alert("Molecule already selected as a transitionState. Please select a different molecule (you may want to add more molecules to the moleculeList)."),s.removeChild(d);return}o.id=e.addID(t,it.tagName,h),g.set(s9.s_ref,h);let m=new s9(g),c=new it(new Map,m);n.set(h,c);let u=q(m.getRef()+" role "+it.role,nn);o.appendChild(u),o.removeChild(d),n8(o,na,()=>{o.removeChild(s),n.delete(h)})}),1===d.options.length&&(d.selectedIndex=0,d.dispatchEvent(new Event("change")))})}function iy(e,t,s,i,n,a){e.removeChild(t),s.removeIDs(i),s.removeIDs(f(i,nm)),s.removeIDs(f(i,s7.tagName)),n.delete(a.id),d.getReactionList().removeReaction(a.id)}function iC(e,t,s,i,n){let a=O(i.addID(t.id,em.tagName));T(i.addID(t.id,em.tagName,nm),t,null,a,em.tagName,na,nn);let o=G(nr,i.addID(t.id,em.tagName,M),nn);if(a.appendChild(o),o.addEventListener("click",()=>{let s=new em(new Map,nE),d=e.addBathGas(s),l=U(void 0,nn),r=i.addID(t.id,em.tagName,d.toString()),g=iB(Array.from(nX(n)),s,!0,r);g.classList.add(em.tagName),l.appendChild(g),n8(l,na,t=>{a.removeChild(l),i.removeIDs(r),e.removeBathGas(t)}),a.insertBefore(l,o)}),null!=s){let d=Array.from(s.children).filter(e=>e.tagName===em.tagName);if(d.length>0)for(let s=0;s<d.length;s++){let l=new em(et(d[s]),X(j(d[s]))),r=e.addBathGas(l),g=i.addID(t.id,em.tagName,r.toString()),h=U(g,nn);h.appendChild(iB(Array.from(nX(n)),l,!1,g)),n8(h,na,t=>{a.removeChild(h),i.removeIDs(g),e.removeBathGas(t)}),a.insertBefore(h,o)}else{let s=U(void 0,nn),d=i.addID(t.id,em.tagName,0);s.appendChild(iB(Array.from(nX(n)),void 0,!1,d)),n8(s,na,t=>{a.removeChild(s),i.removeIDs(d),e.removeBathGas(t)}),a.insertBefore(s,o)}}}function ib(e,t,s,i,n){let a=nX(n),o=i.addID(t.id,ex.tagName),d=O(o);T(i.addID(t.id,o,nm),t,null,d,ex.tagName,na,nn);let l=new ex(new Map);if(s){let i=s.getElementsByTagName(ex.tagName);if(i.length>0){if(i.length>1)throw Error("Expecting 1 "+ex.tagName+" but finding "+i.length+"!");let s=et(i[0]),n=i[0].getElementsByTagName(ef.tagName);if(0==n.length)console.warn("Expecting 1 or more "+ef.tagName+" but finding 0! Please add some PTpairs in "+ev.tagName+" "+e.id+".");else{l=new ex(s);for(let e=0;e<n.length;e++){let s=new ef(et(n[e]));l.add(s);let i=n[e].getElementsByTagName(em.tagName);i.length>0&&(i.length>1&&console.warn("xml_bathGass.length="+i.length),s.setBathGas(new em(et(i[0]),X(j(i[0])))));let o=n[e].getElementsByTagName(ec.tagName);o.length>0&&(o.length>1&&console.warn("xml_experimentRates.length="+o.length),s.setExperimentalRate(new ec(et(o[0]),new(u(p))(X(j(o[0])).trim()))));let r=n[e].getElementsByTagName(eu.tagName);r.length>0&&(r.length>1&&console.warn("xml_experimentalYields.length="+r.length),s.setExperimentalYield(new eu(et(r[0]),new(u(p))(X(j(r[0])).trim()))));let g=n[e].getElementsByTagName(ep.tagName);g.length>0&&(g.length>1&&console.warn("xml_experimentalEigenvalues.length="+g.length),s.setExperimentalEigenvalue(new ep(et(g[0]),new(u(p))(X(j(g[0])).trim())))),d.appendChild(iT(l,d,s,t.id,e,a,nn))}}}}e.setPTs(l);let r=O(void 0,nn);d.appendChild(r);let g=G(nr,void 0,na);r.appendChild(g),g.addEventListener("click",()=>{let e=new Map;e.set("units","Torr");let s=new ef(e),i=l.add(s);console.log("Added new pTpair pTpairIndex="+i),d.insertBefore(iT(l,d,s,t.id,i,a,nn),r)});let h=G(nh,void 0,na);r.appendChild(h),h.addEventListener("click",()=>{let e=U(void 0,nn),s=z("text",nz(ex.tagName,"addFromSpreadsheet"),nn);e.appendChild(s),d.insertBefore(e,r),s.addEventListener("change",()=>{if(console.log("inputElement.value="+s.value),console.log("inputElement.value.length="+s.value.length),s.value.length>0){let i=s.value.split(" "),n=new Map;i[0].split("	").forEach((e,t)=>{n.set(e,t)}),console.log("pTpairsArray.length="+i.length);for(let e=1;e<i.length;e++){let s=i[e].split("	"),o=n.get("P"),g=new(u(p))(s[o]),h=n.get("units"),m=new Map;if(n.has("units")){let e=s[h];m.set("units",e)}let c=new ef(m);l.add(c);let N=n.get("T"),f=new(u(p))(s[N]);if(c.setP(g),c.setT(f),n.has(ef.s_excessReactantConc)){let e=s[n.get(ef.s_excessReactantConc)];m.set(ef.s_excessReactantConc,e)}if(n.has(ef.s_percentExcessReactantConc)){let e=s[n.get(ef.s_percentExcessReactantConc)];m.set(ef.s_percentExcessReactantConc,e)}if(n.has(ef.s_precision)){console.log("index.has(PTpair.s_precision)");let e=s[n.get(ef.s_precision)];m.set(ef.s_precision,e)}if(n.has(em.tagName)){let e=s[n.get(em.tagName)];c.setBathGas(new em(new Map,e))}if(n.has(ec.tagName)){let e=s[n.get(ec.tagName)];if(e.length>0){m.set(ec.tagName,e),c.setExperimentalRate(new ec(new Map,new(u(p))(e)));let t=s[n.get(ec.tagName+"_"+ec.s_ref1)];c.getExperimentalRate()?.setRef1(t);let i=s[n.get(ec.tagName+"_"+ec.s_ref2)];c.getExperimentalRate()?.setRef2(i);let a=s[n.get(ec.tagName+"_"+ec.s_refReaction)];c.getExperimentalRate()?.setRefReaction(a);let o=s[n.get(ec.tagName+"_"+ec.s_error)];c.getExperimentalRate()?.setError(new(u(p))(o))}}if(n.has(eu.tagName)){let e=s[n.get(eu.tagName)];if(e.length>0){c.setExperimentalYield(new eu(new Map,new(u(p))(e)));let t=s[n.get(eu.tagName+"_"+eu.s_ref)];c.getExperimentalYield()?.setRef(t);let i=s[n.get(eu.tagName+"_"+eu.s_yieldTime)];c.getExperimentalYield()?.setYieldTime(new(u(p))(i));let a=s[n.get(eu.tagName+"_"+eu.s_error)];c.getExperimentalYield()?.setError(new(u(p))(a))}}if(n.has(ep.tagName)){let e=s[n.get(ep.tagName)];if(e.length>0){c.setExperimentalEigenvalue(new ep(new Map,new(u(p))(e)));let t=s[n.get(ep.tagName+"_"+ep.s_EigenvalueID)];c.getExperimentalEigenvalue()?.setEigenvalueID(t);let i=s[n.get(ep.tagName+"_"+ep.s_error)];c.getExperimentalEigenvalue()?.setError(new(u(p))(i))}}let x=l.ptps.length-1;d.insertBefore(iT(l,d,c,t.id,x,a,nn),r)}d.removeChild(e)}})});let m=G("Remove All",void 0,na);r.appendChild(m),m.addEventListener("click",()=>{l.clear();let e=d.firstChild;for(;null!=e&&e!=r;){let t=e.nextSibling;d.removeChild(e),e=t}})}function iM(e,t,s){let i=G(nr,void 0,nn);return e.appendChild(i),i.addEventListener("click",n=>{let a,o=d.getNextConditionsID();console.log("Add Conditions "+o.toString());let l=t.addID(ev.tagName,o.toString()),r=O(l,na),g=nz(l,nm);if(o>0){let t=document.getElementById(f(ev.tagName,(o-1).toString(),nm)).nextElementSibling;a=null!=t&&t.parentElement==e?t:i}else a=i;T(g,e,a,r,ev.tagName+" "+o.toString(),na,nn);let h=iS(new Map,o);iC(h,r,null,t,s),ib(h,r,null,t,s),n8(r,nn,d.removeConditions.bind(d),o).addEventListener("click",e=>{nD(g),t.removeIDs(l)})}),i}function iS(e,t){let s=new ev(e,t);return d.addConditions(s),s}function iT(e,t,s,i,n,a,o){let d=U(nz(t.id,n),o);return iR(d,ef.s_P,s.getP.bind(s),s.setP.bind(s)),n7(tL.pressureUnits,s.attributes,d,null,ef.tagName,ef.tagName,na,nn),iR(d,ef.s_T,s.getT.bind(s),s.setT.bind(s)),iz(d,s,ef.s_excessReactantConc,iL),function(e,t){let s=nz(e.id,ef.s_percentExcessReactantConc),i=O(s,na);e.appendChild(i);let n=ef.s_percentExcessReactantConc,a=n+nl,o=n+nd,d=G(o,nz(s,M),na);i.appendChild(d),d.classList.add(np),d.classList.add(nN),t.attributes.get(n)?.toLowerCase()=="true"?(d.classList.toggle(nN),d.textContent=a):(d.classList.toggle(np),d.textContent=o),d.addEventListener("click",e=>{d.classList.toggle(np),d.classList.toggle(nN),d.textContent===o?(d.textContent=a,t.attributes.set(n,"true")):(d.textContent=o,t.attributes.delete(n))})}(d,s),iz(d,s,ef.s_precision,i_),function(e,t,s){let i=nz(e.id,em.tagName),n=O(i,na);e.appendChild(n);let a=em.tagName,o=a+nl,d=a+nd,l=G(d,nz(i,M),na);n.appendChild(l),l.classList.add(np),l.classList.add(nN);let r=nz(i,nu),g=t.getBathGas();void 0==g?(l.classList.toggle(np),l.textContent=d):(l.classList.toggle(nN),l.textContent=o,!1==s.has(g.value)&&console.warn("moleculeKeys does not contain "+g.value),n.appendChild(iP(r,t,g,!1,s))),l.addEventListener("click",e=>{l.classList.toggle(np),l.classList.toggle(nN),l.textContent===d?(l.textContent=o,n.appendChild(iP(r,t,g,!1,s))):(l.textContent=d,nD(r))})}(d,s,a),iD(d,s,n,ec.tagName,e=>e.getExperimentalRate(),iA),iD(d,s,n,eu.tagName,e=>e.getExperimentalYield(),ik),iD(d,s,n,ep.tagName,e=>e.getExperimentalEigenvalue(),iG),n8(d,na,(s,i,n)=>{t.removeChild(s),void 0!==i&&e.remove(i),n.removeBathGas()},d,n,s),d}function iR(e,t,s,i){let n=I("text",ef.tagName+"_"+t,na,ni,e=>{let n=e.target;try{i(new(u(p))(n.value)),console.log(`Set ${t} to ${n.value}`)}catch(e){alert("Invalid input, resetting..."),a.value=iI(s)}L(n)},iI(s),t),a=n.querySelector("input");a.value=iI(s),L(a),e.appendChild(n)}function iI(e){let t=e();return void 0!==t?t.toString():""}function iz(e,t,s,i){let n=nz(e.id,s),a=O(n,na);e.appendChild(a);let o=s+nl,d=s+nd,l=G(d,nz(n,M),na);a.appendChild(l),l.classList.add(np),l.classList.add(nN);let r=nz(n,nu);if(t.attributes.has(s)){l.classList.toggle(nN),l.textContent=o;let e=i(r,t);a.insertBefore(e,l.nextSibling)}else l.classList.toggle(np),l.textContent=d;l.addEventListener("click",e=>{if(l.classList.toggle(np),l.classList.toggle(nN),l.textContent===d){l.textContent=o;let e=i(r,t);a.insertBefore(e,l.nextSibling)}else l.textContent=d,nD(r)})}function iD(e,t,s,i,n,a){let o=nz(e.id,i),d=O(o,na);e.appendChild(d);let l=i+nl,r=i+nd,g=G(r,nz(o,M),na);d.appendChild(g),g.classList.add(np),g.classList.add(nN);let h=nz(o,nu);void 0==n(t)?(g.classList.toggle(np),g.textContent=r):(g.classList.toggle(nN),g.textContent=l,d.appendChild(a(h,t,s))),g.addEventListener("click",e=>{g.classList.toggle(np),g.classList.toggle(nN),g.textContent===r?(g.textContent=l,d.appendChild(a(h,t,s))):(g.textContent=r,nD(h))})}function i_(e,t){let s;s=t.attributes.has(ef.s_precision)?t.attributes.get(ef.s_precision):tL.precisionOptions[0];let i=A(tL.precisionOptions,ef.s_precision,s,e,na);return i.addEventListener("change",e=>{let s=e.target;t.setPrecision(s.value),console.log("Set "+ef.s_precision+" to "+s.value),P(s)}),P(i),i}function iL(e,t){let s,i=z("number",e,na);return s=t.attributes.has(ef.s_excessReactantConc)?t.attributes.get(ef.s_excessReactantConc):NaN.toString(),console.log(ef.s_excessReactantConc+"="+s),i.value=s,i.addEventListener("change",e=>{let s=e.target;t.setExcessReactantConc(s.value),console.log("Set "+ef.s_excessReactantConc+" to "+s.value),L(s)}),L(i),i}function iP(e,t,s,i,n){let a=iB(Array.from(n),s,i,e);return a.addEventListener("change",e=>{let s=e.target;t.setBathGas(new em(new Map,s.value)),console.log("Set bathGas to "+s.value),P(s)}),P(a),a}function iB(e,t,s,i){let n;if(s)e.push(nE);else{let t=e.indexOf(nE);t>-1&&e.splice(t,1)}void 0==t?(t=new em(new Map,nE),n=nE):n=t.value;let a=A(e,em.tagName,n,nz(i,S),na);return a.classList.add(em.tagName),ae(e,a),a.addEventListener("change",e=>{let s=e.target;t.value=s.value,console.log("Added "+s.value+" as "+em.tagName),P(s)}),a.value=n,P(a),a}function iA(e,t){return iO(t,e,e=>e.getExperimentalRate(),(e,t)=>e.setExperimentalRate(t),ec,[{tagName:ec.tagName,type:"number",eventHandler:(e,s)=>al(t.getExperimentalRate(),s),valueGetter:()=>t.getExperimentalRate().value.toString()},{tagName:ec.tagName+"_"+ec.s_ref1,type:"text",eventHandler:(e,s)=>t.getExperimentalRate()?.setRef1(s.value),valueGetter:()=>t.getExperimentalRate().getRef1()},{tagName:ec.tagName+"_"+ec.s_ref2,type:"text",eventHandler:(e,s)=>t.getExperimentalRate()?.setRef2(s.value),valueGetter:()=>t.getExperimentalRate().getRef2()},{tagName:ec.tagName+"_"+ec.s_refReaction,type:"text",eventHandler:(e,s)=>t.getExperimentalRate()?.setRefReaction(s.value),valueGetter:()=>t.getExperimentalRate().getRefReaction()},{tagName:ec.tagName+"_"+ec.s_error,type:"number",eventHandler:(e,s)=>t.getExperimentalRate()?.setError(new(u(p))(s.value)),valueGetter:()=>t.getExperimentalRate().getError().toString()}])}function ik(e,t){return iO(t,e,e=>e.getExperimentalYield(),(e,t)=>e.setExperimentalYield(t),eu,[{tagName:eu.tagName,type:"number",eventHandler:(e,s)=>al(t.getExperimentalYield(),s),valueGetter:()=>t.getExperimentalYield().value.toString()},{tagName:eu.tagName+"_"+eu.s_ref,type:"text",eventHandler:(e,s)=>t.getExperimentalYield()?.setRef(s.value),valueGetter:()=>t.getExperimentalYield().getRef()},{tagName:eu.tagName+"_"+eu.s_yieldTime,type:"number",eventHandler:(e,s)=>t.getExperimentalYield()?.setYieldTime(new(u(p))(s.value)),valueGetter:()=>t.getExperimentalYield().getYieldTime().toString()},{tagName:eu.tagName+"_"+eu.s_error,type:"number",eventHandler:(e,s)=>t.getExperimentalYield()?.setError(new(u(p))(s.value)),valueGetter:()=>t.getExperimentalYield().getError().toString()}])}function iG(e,t){return iO(t,e,e=>e.getExperimentalEigenvalue(),(e,t)=>e.setExperimentalEigenvalue(t),ep,[{tagName:ep.tagName,type:"number",eventHandler:(e,s)=>al(t.getExperimentalEigenvalue(),s),valueGetter:()=>t.getExperimentalEigenvalue().value.toString()},{tagName:ep.tagName+"_"+ep.s_EigenvalueID,type:"text",eventHandler:(e,s)=>t.getExperimentalEigenvalue()?.setEigenvalueID(s.value),valueGetter:()=>t.getExperimentalEigenvalue().getEigenvalueID()},{tagName:ep.tagName+"_"+ep.s_error,type:"number",eventHandler:(e,s)=>t.getExperimentalEigenvalue()?.setError(new(u(p))(s.value)),valueGetter:()=>t.getExperimentalEigenvalue().getError().toString()}])}function iO(e,t,s,i,n,a){let o=O(void 0,na);o.id=t;let d=s(e);for(let s of(void 0==d&&i(e,d=new n(new Map,nH)),a)){let e=t+"_"+s.tagName;o.appendChild(I(s.type,e,na,ni,e=>{let t=e.target;s.eventHandler(e,t),console.log("Set "+s.tagName+" to "+t.value),L(t)},s.valueGetter(),s.label||""))}return o}function iU(e,t){let s=new tS(e,t);return d.addModelParameters(s),s}function iq(e){let t,s;if(void 0!=l){let i=l.values.get(e)??"";t=""==i?nH:new(u(p))(i),s=l.attributess.get(e)??new Map}else console.log(e+" set using hardcoded default."),t=new(u(p))(101),(s=new Map).set(nM,"cm-1");return new ty(s,t)}function iF(e,t,s,i,n,a,o){let d,l,r=n.tagName,g=U(t.addID(i.id,r),nn);i.appendChild(g);let h=r+nl,m=r+nd,c=G(r,t.addID(i.id,r,M),na);c.classList.add(np),c.classList.add(nN),g.appendChild(c);let N=t.addID(i.id,r,nu);if(null!=s){let t=s.getElementsByTagName(r);if(1==t.length){l=X(j(t[0]));let s=new(u(p))(l);d=new n(et(t[0]),s),c.textContent=h,iH(e,g,d,N,l,a,void 0),c.classList.toggle(nN)}else l="",d=new n(new Map,nH),c.textContent=m,c.classList.toggle(np)}else l="",d=new n(new Map,nH),c.textContent=m,c.classList.toggle(np);c.addEventListener("click",()=>{e.index.has(r)?(o(),nD(N),t.removeIDs(N),c.textContent=m):(iH(e,g,d,N,l,a,void 0),c.textContent=h),c.classList.toggle(np),c.classList.toggle(nN)})}function iH(e,t,s,i,n,a,o){a.call(e,s);let d=z("text",i,na);t.appendChild(d),d.addEventListener("change",e=>{let t=e.target;al(s,t),L(t)}),d.value=n,L(d),n7(o,s.attributes,t,d,f(i,nM),s.constructor.tagName,na,na)}function iV(e,t){let s=G(nr,void 0,nn),i=tS.tagName;return e.appendChild(s),s.addEventListener("click",n=>{let a,o=d.getNextModelParametersID();console.log("Add "+i+o.toString());let l=nz(i,o.toString()),r=O(l,na),g=nz(l,nm);if(o>0){let t=document.getElementById(f(i,(o-1).toString(),nm)).nextElementSibling;a=null!=t&&t.parentElement==e?t:s}else a=s;T(g,e,a,r,i+" "+o.toString(),na,nn);let h=iU(new Map,o);(function(e,t,s){let i,n=ty.tagName,a=U(s.addID(t.id,n),nn);t.appendChild(a);let o=n+nl,d=n+nd,l=G(n,s.addID(t.id,n,M),na);l.classList.add(np),l.classList.add(nN),a.appendChild(l);let r=s.addID(t.id,n,nu);l.textContent=d,l.classList.toggle(np),l.addEventListener("click",()=>{e.index.has(ty.tagName)?(console.log("Removing GrainSize input"),e.removeGrainSize(),document.getElementById(r)?.remove(),document.getElementById(f(r,nM))?.remove(),l.textContent=d):(console.log("Adding GrainSize input"),i=iq(n),e.setGrainSize(i),iH(e,a,i,r,i.value.toString(),e.setGrainSize,tL.energyUnits),l.textContent=o),l.classList.toggle(np),l.classList.toggle(nN)})})(h,r,t),iF(h,t,null,r,th,h.setAutomaticallySetMaxEne,h.removeAutomaticallySetMaxEne),iF(h,t,null,r,tb,h.setEnergyAboveTheTopHill,h.removeEnergyAboveTheTopHill),iF(h,t,null,r,tM,h.setMaxTemperature,h.removeMaxTemperature),n8(r,nn,d.removeModelParameters.bind(d),o).addEventListener("click",e=>{nD(g),t.removeIDs(l)})}),s}function ij(e){return[{class:eE,setMethod:e.setCalculateRateCoefficientsOnly,removeMethod:e.removeCalculateRateCoefficientsOnly},{class:ew,setMethod:e.setPrintCellDOS,removeMethod:e.removePrintCellDOS},{class:ey,setMethod:e.setPrintCellTransitionStateFlux,removeMethod:e.removePrintCellTransitionStateFlux},{class:eC,setMethod:e.setPrintReactionOperatorColumnSums,removeMethod:e.removePrintReactionOperatorColumnSums},{class:eb,setMethod:e.setPrintGrainBoltzmann,removeMethod:e.removePrintGrainBoltzmann},{class:eM,setMethod:e.setPrintGrainDOS,removeMethod:e.removePrintGrainDOS},{class:eS,setMethod:e.setPrintGrainkbE,removeMethod:e.removePrintGrainkbE},{class:eT,setMethod:e.setPrintGrainkfE,removeMethod:e.removePrintGrainkfE},{class:eR,setMethod:e.setPrintTSsos,removeMethod:e.removePrintTSsos},{class:eI,setMethod:e.setPrintGrainedSpeciesProfile,removeMethod:e.removePrintGrainedSpeciesProfile},{class:ez,setMethod:e.setPrintGrainTransitionStateFlux,removeMethod:e.removePrintGrainTransitionStateFlux},{class:eD,setMethod:e.setPrintReactionOperatorSize,removeMethod:e.removePrintReactionOperatorSize},{class:e_,setMethod:e.setPrintSpeciesProfile,removeMethod:e.removePrintSpeciesProfile},{class:eL,setMethod:e.setPrintPhenomenologicalEvolution,removeMethod:e.removePrintPhenomenologicalEvolution},{class:eP,setMethod:e.setPrintTunnelingCoefficients,removeMethod:e.removePrintTunnelingCoefficients},{class:eB,setMethod:e.setPrintCrossingCoefficients,removeMethod:e.removePrintCrossingCoefficients},{class:eA,setMethod:e.setTestDOS,removeMethod:e.removeTestDOS},{class:ek,setMethod:e.setTestRateConstants,removeMethod:e.removeTestRateConstants},{class:eG,setMethod:e.setUseTheSameCellNumberForAllConditions,removeMethod:e.removeUseTheSameCellNumberForAllConditions},{class:eO,setMethod:e.setForceMacroDetailedBalance,removeMethod:e.removeForceMacroDetailedBalance}]}function iX(e){return[{class:tl,setMethod:e.setEigenvalues,removeMethod:e.removeEigenvalues},{class:tr,setMethod:e.setShortestTimeOfInterest,removeMethod:e.removeShortestTimeOfInterest},{class:tg,setMethod:e.setMaximumEvolutionTime,removeMethod:e.removeMaximumEvolutionTime},{class:th,setMethod:e.setAutomaticallySetMaxEne,removeMethod:e.removeAutomaticallySetMaxEne},{class:tm,setMethod:e.setDiagramEnergyOffset,removeMethod:e.removeDiagramEnergyOffset}]}function iY(e,t){let s=G(nr,void 0,nn);return e.appendChild(s),s.addEventListener("click",i=>{let n,a=d.getNextControlID();console.log("Add Control "+a.toString());let o=t.addID(tu.tagName,a.toString()),l=O(o,na);if(a>0){let t=document.getElementById(f(tu.tagName,(a-1).toString(),nm)).nextElementSibling;n=null!=t&&t.parentElement==e?t:s}else n=s;let r=t.addID(o,nm);T(r,e,n,l,tu.tagName+" "+a.toString(),na,nn);let g=i$(new Map,a),h=new Map;ij(g).forEach(e=>{iW(g,l,t,h,null,null,e.class,e.setMethod,e.removeMethod)});let m=U(void 0,nn);new Map([...h.entries()].sort()).forEach(e=>{m.appendChild(e)}),l.appendChild(m),iQ(g,l,t,null,nn),iZ(g,l,t,null,nn),iX(g).forEach(e=>{iW(g,l,t,h,null,nn,e.class,e.setMethod,e.removeMethod,!0)}),n8(l,nn,d.removeControl.bind(d),a).addEventListener("click",e=>{nD(r),t.removeIDs(o);let s=f(o,eq.tagName);t.removeIDs(s);let i=f(s,"details");t.removeIDs(i);let n=f(i,"select");t.removeIDs(n)})}),s}function i$(e,t){let s=new tu(e,t);return d.addControl(s),s}function iK(e,t,s,i,n,a){i.call(e,s);let o=z("number",n,na);o.addEventListener("change",e=>{let t=e.target;al(s,t),L(t)}),o.value=a,L(o),t.appendChild(o)}function iW(e,t,s,i,n,a,o,d,l,r=!1){let g,h,m,c=o.tagName,N=c+nl,f=c+nd,x=G(f,void 0,na);if(x.classList.add(np),x.classList.add(nN),i&&i.set(c,x),a&&(h=U(m=s.addID(t.id,c),a),t.appendChild(h),h.appendChild(x),m=s.addID(t.id,m,nu)),n){let t=n.getElementsByTagName(c);if(1==t.length){if(r){let s,i=X(j(t[0]));s=new(u(p))("all"==i?0:i),g=new o(et(t[0]),s),iK(e,h,g,d,m,i)}else g=new o(et(t[0])),d.call(e,g);x.textContent=N,x.classList.toggle(nN)}else x.textContent=f,x.classList.toggle(np)}else g=new o(new Map),x.textContent=f,x.classList.toggle(np);x.addEventListener("click",t=>{e.index.has(c)?(r&&nD(m),l.call(e),x.textContent=f):(r?iK(e,h,g,d,m,""):d.call(e,g),x.textContent=N),x.classList.toggle(np),x.classList.toggle(nN)})}function iZ(e,t,s,i,n){let a,o=U(void 0,n);t.appendChild(o);let d=eq.tagName,l=d+nl,r=d+nd,g=G(r,void 0,na);o.appendChild(g),g.classList.add(np),g.classList.add(nN);let h=s.addID(t.id,d),m=U(h,na);o.appendChild(m);let c=eq.options,N=s.addID(h,"details"),f=s.addID(N,"select");if(null!=i){let t=i.getElementsByTagName(d);if(t.length>0){if(t.length>1)throw Error("More than one CalcMethod element.");let i=et(t[0]),n=i.get("xsi:type");a=function e(t,s,i,n,a,o,d,l,r,g){let h;let m=i6(t,s,i,a,d,l,r,g);m.value=l,i.appendChild(m);let c=U(r,na);if(i.appendChild(c),l==eF.xsi_type||l==eF.xsi_type2)h=new eF(o);else if(l==eH.xsi_type||l==eH.xsi_type2)h=new eH(o);else if(l==ej.xsi_type||l==ej.xsi_type2){let e=new ej(o);h=e;let t=n[0].getElementsByTagName(eV.tagName);if(t.length>0){if(1==t.length){let s=new(u(p))(X(j(t[0]))),i=new eV(et(t[0]),s);e.setFittingIterations(i)}else throw Error("More than one FittingIterations element.")}i0(c,e)}else if(l==eK.xsi_type||l==eK.xsi_type2){let e=new eK(o);function N(e,t,s){let i=eX.tagName,n=e[0].getElementsByTagName(i);if(n.length>0){if(1==n.length){let e=new(u(p))(X(j(n[0])));s(new t(et(n[0]),e))}else throw Error(`More than one ${i} element.`)}}h=e,N(n,eX,e.setMarquardtIterations.bind(e)),N(n,eY,e.setMarquardtTolerance.bind(e)),N(n,e$,e.setMarquardtDerivDelta.bind(e)),i1(c,e)}else if(l==e8.xsi_type||l==e8.xsi_type2){let e=new e8(o);function N(e,t,s,i){let n=t.tagName,a=e[0].getElementsByTagName(n);if(a.length>0){if(1==a.length){let e=X(j(a[0]));i&&void 0!=e&&""!=e&&"NaN"!=e&&(e=new(u(p))(e)),s(new t(et(a[0]),e))}else throw Error(`More than one ${n} element.`)}}h=e,N(n,eZ,e.setFormat.bind(e),!1),N(n,eQ,e.setPrecision.bind(e),!1),N(n,eJ,e.setChebNumTemp.bind(e),!0),N(n,e0,e.setChebNumConc.bind(e),!0),N(n,e1,e.setChebMaxTemp.bind(e),!0),N(n,e2,e.setChebMinTemp.bind(e),!0),N(n,e3,e.setChebMaxConc.bind(e),!0),N(n,e5,e.setChebMinConc.bind(e),!0),N(n,e4,e.setChebTExSize.bind(e),!0),N(n,e6,e.setChebPExSize.bind(e),!0),i2(c,e)}else if(l==ts.xsi_type||l==ts.xsi_type2){let e=new ts(o);function N(e,t,s){let i=t.tagName,n=e[0].getElementsByTagName(i);if(n.length>0){if(1==n.length){let e=new(u(p))(X(j(n[0])));s(new t(et(n[0]),e))}else throw Error(`More than one ${i} element.`)}}h=e,N(n,e9,e.setTmin.bind(e)),N(n,e7,e.setTmid.bind(e)),N(n,te,e.setTmax.bind(e)),N(n,tt,e.setTstep.bind(e)),i3(c,e)}else if(l==td.xsi_type||l==td.xsi_type2){let e=new td(o);function N(e,t,s){let i=t.tagName,n=e[0].getElementsByTagName(i);if(n.length>0){if(1==n.length){let e=X(j(n[0]));void 0!=e&&(e=new(u(p))(e)),s(new t(et(n[0]),e))}else throw Error(`More than one ${i} element.`)}}h=e,N(n,ti,e.setSensitivityAnalysisSamples.bind(e)),N(n,tn,e.setSensitivityAnalysisOrder.bind(e)),N(n,ta,e.setSensitivityNumVarRedIters.bind(e)),N(n,to,e.setSensitivityVarRedMethod.bind(e)),i4(c,e)}else{let h=o.get("name");if(void 0!=h&&h!==l)return o.set("xsi:type",h),console.warn(`Using name attribute as xsi:type: ${h}`),e(t,s,i,n,a,o,d,h,r,g);throw Error(`Unable to determine calculation method for xsi_type: ${l}`)}return h}(s,e,m,t,c,i,d,n,N,f),e.setCalcMethod(a),g.classList.toggle(nN),g.textContent=l}else g.classList.toggle(np),g.textContent=r}else g.classList.toggle(np),g.textContent=r;g.addEventListener("click",t=>{if(e.index.has(d))null!=e.getCalcMethod()&&(e.removeCalcMethod(),s.removeIDs(N),s.removeIDs(f),g.textContent=r,g.classList.toggle(np),g.classList.toggle(nN));else{c[c.length-1]!=nE&&c.push(nE),s.removeIDs(N),s.removeIDs(f);let t=i6(s,e,o,c,d,nE,N,f);m.appendChild(t),g.textContent=l,g.classList.toggle(np),g.classList.toggle(nN)}})}function iQ(e,t,s,i,n){let a=tc.tagName,o=U(s.addID(t.id,a),n);t.appendChild(o);let d=a+nl,l=a+nd,r=G(a,s.addID(t.id,a,M),na);o.appendChild(r),r.classList.add(np),r.classList.add(nN);let g=s.addID(t.id,a,te.tagName),h=s.addID(t.id,a,e9.tagName),m=s.addID(t.id,a,tt.tagName);if(i){let t=i.getElementsByTagName(a);1==t.length?(iJ(e,o,t,g,h,m),r.classList.toggle(nN),r.textContent=d):(r.classList.toggle(np),r.textContent=l)}else r.classList.toggle(np),r.textContent=l;r.addEventListener("click",t=>{e.index.has(a)?(e.removeTestMicroRates(),document.getElementById(g)?.remove(),document.getElementById(h)?.remove(),document.getElementById(m)?.remove(),r.textContent=l):(iJ(e,o,null,g,h,m),r.textContent=d),r.classList.toggle(np),r.classList.toggle(nN)})}function iJ(e,t,s,i,n,a){let o,d;if(null!=s&&s.length>0){if(s.length>1)throw Error("More than one TestMicroRates element.");d=new tc(o=et(s[0]))}else(o=new Map).set("Tmax","0"),o.set("Tmin","0"),o.set("Tstep","0"),d=new tc(o);e.setTestMicroRates(d);let l=d.getTmax(),r=I("text",i+"_input",na,ni,e=>{let t=e.target;try{d.setTmax(new(u(p))(t.value)),console.log("Set Tmax to "+t.value)}catch(e){alert("Invalid input, resetting..."),t.value=l.toString()}L(t)},l.toString(),"Tmax");r.id=i,L(r.querySelector("input")),t.appendChild(r);let g=d.getTmin(),h=I("number",n+"_input",na,ni,e=>{let t=e.target;w(t.value)?(d.setTmin(new(u(p))(t.value)),console.log("Set Tmin to "+t.value)):(alert("Value is not numeric, resetting..."),t.value=g.toString()),L(t)},g.toString(),"Tmin");h.id=n,L(h.querySelector("input")),t.appendChild(h);let m=d.getTstep(),c=I("text",a+"_input",na,ni,e=>{let t=e.target;w(t.value)?(d.setTstep(new(u(p))(t.value)),console.log("Set Tstep to "+t.value)):(alert("Value is not numeric, resetting..."),t.value=m.toString()),L(t)},m.toString(),"Tstep");c.id=a,L(c.querySelector("input")),t.appendChild(c)}function i0(e,t){let s=t.getFittingIterations()||new eV(new Map,nH);t.setFittingIterations(s),e.appendChild(I("number",f(e.id,eV.tagName,nu),na,ni,e=>{let t=e.target;w(t.value)?(s.value=new(u(p))(t.value),console.log("Set FittingIterations to "+t.value)):(alert("Value is not numeric, resetting..."),t.value=s.value.toString()),L(t)},s.value.toString(),eV.tagName))}function i1(e,t){function s(e,t,s,i){let n=f(t.id,e.tagName,nu),a=e.value.toString(),o=e.tagName;t.appendChild(I("number",n,s,i,t=>{let s=t.target;w(s.value)?(e.value=new(u(p))(s.value),console.log("Set "+e.tagName+" to "+s.value)):(alert("Value is not numeric, resetting..."),s.value=e.value.toString()),L(s)},a,o))}let i=t.getMarquardtIterations()||new eX(new Map,nH);t.setMarquardtIterations(i),s(i,e,na,ni);let n=t.getMarquardtTolerance()||new eY(new Map,nH);t.setMarquardtTolerance(n),s(n,e,na,ni);let a=t.getMarquardtDerivDelta()||new e$(new Map,nH);t.setMarquardtDerivDelta(a),s(a,e,na,ni)}function i2(e,t){let s=t.getFormat()||new eZ(new Map,eZ.options[0]);function i(t,s,i,n,a){let o=s()||new t(new Map,a[0]);i(o);let d=k(n,a,n,o.value,e.id,na,na);d.querySelector("select")?.addEventListener("change",e=>{let t=e.target;o.value=t.value,console.log(`Set ${n} to `+t.value),P(t)}),e.appendChild(d)}function n(t,s,i,n){let a=s()||new t(new Map,NaN);i(a),e.appendChild(I("text",e.id+`_${n}_input`,na,ni,i5(a,n),a.value.toString(),n))}i(eZ,t.getFormat.bind(t),t.setFormat.bind(t),eZ.tagName,eZ.options),i(eZ,()=>s.getRateUnits(),s.setRateUnits.bind(s),eZ.rateUnits,eZ.rateUnitsOptions),i(eQ,t.getPrecision.bind(t),t.setPrecision.bind(t),eQ.tagName,tL.precisionOptions),n(eJ,t.getChebNumTemp.bind(t),t.setChebNumTemp.bind(t),eJ.tagName),n(e0,t.getChebNumConc.bind(t),t.setChebNumConc.bind(t),e0.tagName),n(e1,t.getChebMaxTemp.bind(t),t.setChebMaxTemp.bind(t),e1.tagName),n(e2,t.getChebMinTemp.bind(t),t.setChebMinTemp.bind(t),e2.tagName),n(e3,t.getChebMaxConc.bind(t),t.setChebMaxConc.bind(t),e3.tagName),n(e5,t.getChebMinConc.bind(t),t.setChebMinConc.bind(t),e5.tagName),n(e4,t.getChebTExSize.bind(t),t.setChebTExSize.bind(t),e4.tagName),n(e6,t.getChebPExSize.bind(t),t.setChebPExSize.bind(t),e6.tagName)}function i3(e,t){function s(t,s,i,n){let a=s()||new t(new Map,NaN);i(a),e.appendChild(I("text",e.id+`_${n}_input`,na,ni,i5(a,n),a.value.toString(),n))}s(e9,t.getTmin.bind(t),t.setTmin.bind(t),e9.tagName),s(e7,t.getTmid.bind(t),t.setTmid.bind(t),e7.tagName),s(te,t.getTmax.bind(t),t.setTmax.bind(t),te.tagName),s(tt,t.getTstep.bind(t),t.setTstep.bind(t),tt.tagName)}function i5(e,t){return t=>{let s=t.target;try{e.value=new(u(p))(s.value)}catch(t){alert("Invalid input value "+s.value+" , resetting..."),s.value=e.value.toString()}L(s)}}function i4(e,t){function s(t,s,i,n){let a=s()||new t(new Map,NaN);i(a),e.appendChild(I("text",f(e.id,n,nu),na,ni,i5(a,n),a.value.toString(),n))}s(ti,t.getSensitivityAnalysisSamples.bind(t),t.setSensitivityAnalysisSamples.bind(t),ti.tagName),s(tn,t.getSensitivityAnalysisOrder.bind(t),t.setSensitivityAnalysisOrder.bind(t),tn.tagName),s(ta,t.getSensitivityNumVarRedIters.bind(t),t.setSensitivityNumVarRedIters.bind(t),ta.tagName);let i=t.getSensitivityVarRedMethod()||new to(new Map,"");t.setSensitivityVarRedMethod(i);let n=to.tagName;e.appendChild(k(n,to.options,n,to.options[0],f(e.id,n,"select"),na,na));let a=e.querySelector("select");a?.addEventListener("change",e=>{let t=e.target;i.value=t.value,console.log(n+" set to "+t.value),P(t)})}function i6(e,t,s,i,n,a,o,d){let l=A(i,n,a,d,na);return s.appendChild(l),ae(i,l),l.addEventListener("change",i=>{let n=document.getElementById(o);null!=n&&(n.remove(),e.removeIDs(o)),n=U(o,na),s.appendChild(n);let a=i.target,d=a.value,l=new Map;if(l.set("xsi:type",d),d==eF.xsi_type||d==eF.xsi_type2)t.setCalcMethod(new eF(l));else if(d==eH.xsi_type||d==eH.xsi_type2)t.setCalcMethod(new eH(l));else if(d==ej.xsi_type||d==ej.xsi_type2){let e=new ej(l);t.setCalcMethod(e),i0(n,e)}else if(d==eK.xsi_type||d==eK.xsi_type2){let e=new eK(l);t.setCalcMethod(e),i1(n,e)}else if(d==e8.xsi_type||d==e8.xsi_type2){let e=new e8(l);t.setCalcMethod(e),i2(n,e)}else if(d==ts.xsi_type||d==ts.xsi_type2){let e=new ts(l);t.setCalcMethod(e),i3(n,e)}else if(d==td.xsi_type||d==td.xsi_type2){let e=new td(new Map);t.setCalcMethod(e),i4(n,e)}else throw Error("Unknown CalcMethod type.");P(a)}),l}function i8(e,t,s,i,n,a,o,d,l,r,g){let h=i+(a-i)/2;i7(e,g,d,t,h-ne(e,g,d)/2,o+l),i7(e,r,d,t,h-ne(e,r,d)/2,o+3*l),i9(e,t,s,i,n,a,o)}function i9(e,t,s,i,n,a,o){e.beginPath(),e.strokeStyle=t,e.lineWidth=s,e.moveTo(i,n),e.lineTo(a,o),e.stroke()}function i7(e,t,s,i,n,a){e.save(),e.translate(n,a),e.scale(1,-1),e.font=s,e.fillStyle=i,e.fillText(t,0,0),e.restore()}function ne(e,t,s){return e.font=s,e.measureText(t).width}function nt(e,t,s,i,n,a,o,d,l,r,g){let h=nz(e.id,M+"s"),m=O(h);e.appendChild(m);let c=nz(h,M),u="Pop into a new Window",p=G(u,c);m.appendChild(p);let N=document.createElement("canvas");N.id=t,e.appendChild(N),N.height=s,N.style.border="1px solid black",g&&ns(N,s,i,n,a,o,l,r),p.addEventListener("click",()=>{if(null==d){let e=document.createElement("canvas");e.id=t,(d=window.open("",n$,"width="+N.width+", height="+N.height)).document.body.appendChild(e),g&&ns(e,s,i,n,a,o,l,r),nD(t),p.textContent="Pop into this Window"}else(N=document.createElement("canvas")).id=t,e.appendChild(N),N.height=s,N.style.border="1px solid black",g&&ns(N,s,i,n,a,o,l,r),d.close(),d=null,p.textContent=u}),ao(N,m,null,n$)}function ns(e,t,s,i,n,a,o,d){if(console.log("drawReactionDiagram"),null!=e&&d.size>0){var l,r;let g,h,m,c,u,p,f,x,v;s?(g="lightgrey",h="lightblue",m="orange"):(g="darkgrey",h="blue",m="darkorange");let E=e.getContext("2d");E.clearRect(0,0,e.width,e.height),E.font="bold "+i;let w=(l=E.font,E.font=l,(r=E.measureText("Aj")).actualBoundingBoxAscent+r.actualBoundingBoxDescent),y=[],M=new Set,S=new Set,T=new Set,R=new Map,I=new Map,z=0;d.forEach(function(e,t){let s=e.getTransitionStates(),i=e.getReactantsLabel();if(void 0!=i){y.push(i),M.has(i)&&S.add(i);let t=e.getReactantsEnergy(nY,o);c=b(c,t),u=C(u,t),I.set(i,t),!R.has(i)&&(R.set(i,z),z++)}let n=e.getProductsLabel();if(void 0!=n){M.add(n);let t=e.getProductsEnergy(nY,o);if(c=b(c,t),u=C(u,t),I.set(n,t),R.has(n)){z--;let e=N(R,n);R.forEach(function(t,s){t>e&&R.set(s,t-1)}),void 0!=s&&(s.forEach(function(e,s){let i=e.getMolecule().getRef();T.add(i),R.set(i,z),t=nY(i,o).getEnergy()??nH,c=b(c,t),u=C(u,t),I.set(i,t),z++}),R.set(n,z),z++)}else void 0!=s&&s.forEach(function(e,s){let i=e.getMolecule().getRef();T.add(i),R.set(i,z),t=nY(i,o).getEnergy()??nH,c=b(c,t),u=C(u,t),I.set(i,t),z++}),R.set(n,z),z++}});let D=u.minus(c).toNumber(),_=[];R.forEach(function(e,t){_[e]=t});let L=0,P=0,B=new Map,A=new Map,k=new Map,G=new Map,O=new Map,U=new Map;_.forEach(function(e){let s=N(I,e),a=(s-c.toNumber())*t/(D+0)+0;v=Math.max(ne(E,s.toString(),i),ne(E,e,i)),f=L+v+5,x=p=a+n,B.set(e,[L,p]),A.set(e,[f,x]),M.has(e)&&(k.set(e,[L,p]),G.set(e,[f,x])),T.has(e)&&(O.set(e,[L,p]),U.set(e,[f,x])),L=f+10,P=f}),e.width=P;let q=t+4*w+2*n;e.height=q,E.transform(1,0,0,-1,0,q),d.forEach(function(e,t){let s=e.getTransitionStates(),i=e.getReactantsLabel(),n=e.getProductsLabel(),o=N(A,i),d=N(k,n);s.size>0?s.forEach(function(e,t){let s=N(O,t);i9(E,g,a,o[0],o[1],s[0],s[1]);let i=N(U,t);i9(E,g,a,i[0],i[1],d[0],d[1])}):i9(E,g,a,o[0],o[1],d[0],d[1])}),y.forEach(function(e){let s=N(I,e),a=(s-c.toNumber())*t/(D+0)+0,o=N(B,e)[0],d=a+n,l=N(A,e)[0],r=s.toString();i8(E,h,n,o,d,l,d,i,w,e,r)}),M.forEach(function(e){let s=N(I,e),a=(s-c.toNumber())*t/(D+0)+0,o=N(k,e)[0],d=a+n,l=N(G,e)[0],r=s.toString();S.has(e)?i8(E,m,n,o,d,l,d,i,w,e,r):i8(E,"green",n,o,d,l,d,i,w,e,r)}),T.forEach(function(e){let s=N(I,e),a=(s-c.toNumber())*t/(D+0)+0,o=N(O,e)[0],d=a+n;i8(E,"red",n,o,d,N(U,e)[0],d,i,w,e,s.toString())})}}p.Big.PE=7;let ni={marginLeft:"0px",marginTop:"1px",marginBottom:"1px",marginRight:"0px"},nn={marginLeft:"25px",marginTop:"1px",marginBottom:"1px",marginRight:"0px"},na={marginLeft:"1px",marginTop:"1px",marginBottom:"1px",marginRight:"1px"};const no="✎",nd=" ✗",nl=" ✓",nr="Add ＋",ng="Add from library ＋",nh="Add from spreadsheet ＋",nm="container",nc="description",nu="input",np="optionOn",nN="optionOff",nf="Products",nx="Reactants",nv="save",nE="Select an option (press a letter key to cycle through options for it)...",nw="table",ny="Transition States",nC="textarea",nb="undefined",nM="units",nS="viewer";let nT=new Set,nR=new Set;function nI(...e){let t=f(...e);if(nT.has(t))throw Error(t+" already exists!");return nT.add(t),t}function nz(...e){let t=nI(...e);return nR.add(t),t}function nD(e){let t=document.getElementById(e);null!=t&&t.remove(),nR.delete(e),nT.delete(e)}const n_=nI("menu"),nL=nI("title"),nP=nI("molecules"),nB=nI("reactions"),nA=nI("reactionsDiagram"),nk=nI("conditions"),nG=nI("modelParameters"),nO=nI("control"),nU=nI("metadata"),nq=nI("analysis"),nF=nI("xml"),nH=new p.Big(0);class nV{addID(e,...t){let s=nz(e,...t);return this.ids.has(e)||this.ids.set(e,new Set),this.ids.get(e)?.add(s),s}removeID(e){nR.delete(e),nT.delete(e)}removeIDs(e){this.ids.has(e)&&(this.ids.get(e).forEach(e=>{console.log("remove id "+e),this.removeID(e)}),this.ids.delete(e))}removeAllIDs(){this.ids.forEach((e,t)=>{this.removeIDs(t)})}constructor(){this.ids=new Map}}function nj(e,t){e.getID();let s=1;for(;t.has(e.id);)e.id=e.id+s,s++;t.set(e.id,e)}function nX(e){let t=new Set;return e.forEach((e,s)=>{let i=e.getID();t.has(i)?t.add(i+"-"+s.toString()):t.add(i)}),t}function nY(e,t){for(let[s,i]of t)if(i.label==e)return i;return null}const n$="Reactions Diagram",nK=nz(n$),nW=nz(nK,"Canvas");let nZ="1em SensSerif";function nQ(){nR.forEach(e=>{nD(e)}),nR=new Set,s=new nV,i=new nV,n=new nV,a=new nV,o=new nV,l=new s8,r=new Map,g=new Map,h=new Map,m=[]}function nJ(){nQ(),n0("Example_title",new Map);let e=document.getElementById(nP),d=nz(tR.tagName),l=O(d);e.appendChild(l),T(d,e,null,l,tR.tagName,na,ni);let r=sw(l,s,g);sI(l,r,s,g);let m=document.getElementById(nB),u=nz(tI.tagName),p=O(u);m.appendChild(p),T(u,m,null,p,tI.tagName,na,ni),ix(i,p,h,g);let N=document.getElementById(nA),f=nz(n$),x=O(f);N.appendChild(x),T(f,N,null,x,n$,na,ni),nt(x,nW,400,t,nZ,4,2,c,g,h,!1);let v=document.getElementById(nk),E=nz(ev.tagName),w=O(E);v.appendChild(w);let y=O(void 0,na);iM(y,n,g),T(E,w,null,y,"ConditionsList",na,ni);let C=document.getElementById(nG),b=nz(tS.tagName,"list"),M=O(b);C.appendChild(M);let S=O(void 0,na);iV(S,a),T(b,M,null,S,"ModelParametersList",na,ni);let R=document.getElementById(nO),I=nz(tu.tagName),z=O(I);R.appendChild(z);let D=O(void 0,na);iY(D,o),T(I,z,null,D,"ControlList",na,ni)}function n0(e,t){let s=new tT(t,e);d.setTitle(s);let i=document.getElementById(nL),n=nz("titleDiv");nD(n);let a=I("text",nz(n,nu),na,ni,e=>{let t=e.target;s.value=t.value,console.log(s.tagName+" changed to "+s.value),L(t)},e,tT.tagName);a.id=n,i.appendChild(a)}function n1(){null==c?ns(document.getElementById(nW),400,t,nZ,4,2,g,h):ns(c.document.getElementById(nW),400,t,nZ,4,2,g,h)}function n2(e,t){let s=document.getElementsByClassName(e);for(let e=0;e<s.length;e++)if(s[e]instanceof HTMLSelectElement){let i=s[e].options,n=s[e].value;Array.from(i).forEach(i=>{if(i.value==t&&(i.remove(),n==t)){let t=new Event("change");s[e].dispatchEvent(t)}})}}function n3(e,t){let s=document.getElementsByClassName(e);console.log("n elements with className "+e+"="+s.length);for(let e=0;e<s.length;e++){let i=s[e];if(s[e]instanceof HTMLSelectElement){let e=document.createElement("option");e.value=t,e.text=t,i.add(e)}}}function n5(e,t){if(t)e.push(nE);else{let t=e.indexOf(nE);t>-1&&e.splice(t,1)}}function n4(e,t,s,i,n,a,o,d){let l=U(e,d),r=s+nl,g=s+nd,h=f(e,s),m=G(g,t.addID(h,M),o);l.appendChild(m),m.classList.add(np),m.classList.add(nN);let c=t.addID(h,nu),u=i();return void 0==u?(m.textContent=g,m.classList.toggle(np)):(n6(l,c,s,u,i,n,o),m.textContent=r,m.classList.toggle(nN)),m.addEventListener("click",e=>{if(null==document.getElementById(c)){console.log("Adding "+c),n6(l,c,s,u,i,n,o);let e=l.querySelector(nu);e.value=u.toString();let t=new Event("change");e.dispatchEvent(t),m.textContent=r}else document.getElementById(c)?.remove(),console.log("Removed "+c),m.textContent=g;m.classList.toggle(np),m.classList.toggle(nN)}),l}function n6(e,t,s,i,n,a,o){let d;d=void 0==i?"":i.toString();let l=z("text",t,o);l.addEventListener("change",e=>{let t=e.target;try{a(new p.Big(t.value)),console.log(s+" changed from "+i+" to "+t.value)}catch(e){alert("Input invalid, resetting..."),t.value=n().toString()}L(t)}),l.value=d,L(l),e.appendChild(l)}function n8(e,t,s,...i){let n=G("Remove ✕",void 0,t);return e.appendChild(n),n.addEventListener("click",()=>{s(...i),e.remove(),nD(e.id)}),n}function n9(e,t,s,i,n,a){let o;o=void 0==i?"":i.toString();let d=z("text",t,a);d.addEventListener("change",e=>{let t=e.target;n(t.value),console.log(s+" changed from "+i+" to "+t.value),L(t)}),d.value=o,L(d),e.appendChild(d)}function n7(e,t,s,i,n,a,o,d){if(void 0!=e){let l=function(e,t,s,i,n,a){let o=t.get("units");if(void 0!=o){let d=k("units",e,"units",o,s,n,a),l=d.querySelector("select");return l.value=o,P(l),l.addEventListener("change",e=>{let s=e.target;t.set("units",s.value),console.log("Set "+i+" units to "+s.value),P(s)}),d}}(e,t,n,a,o,d);void 0!=l&&s.insertBefore(l,i)}else{let e=t.get("units");if(void 0!=e){let t=q("units "+e,d);s.insertBefore(t,i)}}}function ae(e,t){t.addEventListener("click",s=>{e[e.length-1]==nE&&e.pop();let i=t.options.length-1;t.options[i].value==nE&&t.remove(i)})}document.addEventListener("DOMContentLoaded",()=>{let N,E,y,C,b,R,D,_,B,A,$,K,W,Z;document.body.className=t?"dark-mode":"light-mode";let Q=new Map;Q.set("xmlns","http://www.xml-cml.org/schema"),Q.set("xmlns:me","http://www.chem.leeds.ac.uk/mesmer"),Q.set("xmlns:xsi","http://www.w3.org/2001/XMLSchema-instance"),d=new tL(Q),(N=document.getElementById(n_)).style.display="flex",N.style.justifyContent="center",N.style.margin="5px",N.style.padding="5px",N.style.border="1px solid black",N.style.backgroundColor="lightgrey",y=G(E="About",nI(E),na),N.appendChild(y),y.addEventListener("click",async e=>{!function(e){if(null==e)return;e.document.title="About MXG";let t=document.createElement("div");e.document.body.appendChild(t);let s=e.document.createElement("p");t.appendChild(s),s.appendChild(e.document.createTextNode("MXG is a free and open source program to assist in creating, editing and         visualising MESMER XML data. The MXG development repository is: ")),s.appendChild(sK),s.appendChild(e.document.createTextNode(". Details of MESMER - the Master Equation Solver for Multi Energy-well Reactions         can be found at: ")),s.appendChild(sJ),s.appendChild(e.document.createTextNode("."));let i=document.createElement("p");t.appendChild(i),i.appendChild(e.document.createTextNode("MXG is being developed by a team based at ")),i.appendChild(s1),i.appendChild(e.document.createTextNode(" funded by ")),i.appendChild(s0),i.appendChild(e.document.createTextNode(". Like MESMER, MXG development aims to be driven in part by users reporting issues,         submitting feature requests, and getting involved in development."));let n=e.document.createElement("p");t.appendChild(n),n.appendChild(e.document.createTextNode("MXG should work with the latest Firefox, Chrome, Edge or Safari Web browsers.         It can be used offline after installation as a Progressive Web App (PWA). The process of installing a PWA varies by         Web browser and device. For guidance please see the MXG main development repository README: ")),n.appendChild(sK.cloneNode(!0)),n.appendChild(e.document.createTextNode(". MXG should work on a small screen, but it is recommended to use a larger screen."));let a=document.createElement("p");t.appendChild(a),a.appendChild(e.document.createTextNode('The Menu contains 6 buttons. The Load From File button is for loading a         MESMER XML data file. A MESMER XML input data file normally has a "me:mesmer" element containing:         "me:title", "moleculeList", "reactionList", "me:conditions", "me:modelParameters", and "me:control" elements.         A MESMER XML output data usually also has "me:metadataList" and "me:analysis" elements in the "me:mesmer"         element, and also has additional output is located in the "moleculeList" and "reactionList" elements.         The Load Molecules button is for loading molecule data that can be chosen for inclusion.         The Load Defaults button is for loading default values from a file.         The Save To File button is for saving a new MESMER XML data file. The file should save to the Web browser         downloads location from where it can be relocated. The file as written will contain no comments, element values         are trimmed of white space, and numbers are output in a particular format (decimals - where numbers with more         than 8 digits are output in scientific notation). The file should reflect what is specified via the interface.'));let o=e.document.createElement("p");t.appendChild(o),o.appendChild(e.document.createTextNode('The "me:title" value is presented in an "input" alongside an associated label.         The input can be used to change the value from the default "Example_title". The title is used to compose filenames         for other files saved from MXG (PNG and CSV). Details are presented via buttons which contain a triangular symbol.         A triangle orientated with a point down: ▼ can be actioned to show any details.         A triangle orientated with a point up: ▲ can be actioned to hide those details.'));let d=e.document.createElement("p");t.appendChild(d),d.textContent='The Reaction Diagram button shows/hides a reaction well diagram which is redrawn if molecule "me:ZPE"         property values are changed. The diagram can be opened in a new Window and saved as an image in PNG format file.';let l=e.document.createElement("p");t.appendChild(l),l.textContent="MXG uses 3DMol.js under a BSD-3-Clause licence to visualise molecules with coordinates. For details         of 3DMol.js please see the GitHub repository: ",l.appendChild(s3),l.appendChild(e.document.createTextNode(". If you use the 3DMol.js visualisations, please cite: Nicholas Rego and         David Koes 3Dmol.js: molecular visualization with WebGL Bioinformatics (2015) 31 (8): 1322-1324 ")),l.appendChild(s5),l.appendChild(e.document.createTextNode("."));let r=e.document.createElement("p");t.appendChild(r),r.textContent="MXG uses Big.js under an MIT licence to handle numbers. For details of Big.js please see the GitHub         repository: ",r.appendChild(s6),r.appendChild(e.document.createTextNode("."))}(window.open("","","width=600,height=400"))}),b=G(C="Start Afresh",nI(C),na),N.appendChild(b),b.addEventListener("click",e=>{confirm("Any unsaved changes will be lost. Select OK to continue loading or Cancel to cancel.")&&nJ()}),D=G(R="Load Molecules",nI(R),na),N.appendChild(D),_=new sX,D.addEventListener("click",async e=>{(await _.readFile()).forEach((e,t)=>{nj(e,r)})}),(A=G(B="Load Defaults",nI(B),na)).addEventListener("click",e=>{l.readFile()}),N.appendChild(A),(K=G($="Load From File",nI($),na)).addEventListener("click",l=>{if(confirm("Any unsaved changes will be lost. Select OK to continue loading or Cancel to cancel.")){let l;nQ(),(l=document.createElement("input")).type="file",l.onchange=function(){if(l.files){for(let e=0;e<l.files.length;e++)console.log("inputElement.files["+e+"]="+l.files[e]);let r=l.files[0];console.log(r.name),e=r.name;let N=new FileReader,E=0,y="";N.onload=function(l){if(null==l.target)throw Error("Event target is null");if(y+=l.target.result,null!=r){if(E<r.size){let e=r.slice(E,E+1048576);N.readAsText(e),E+=1048576}else{var C;let l,r,N,E;C=y=y.trim(),l=document.getElementById(nF),nD(r=nz(nF,2)),N=O(r,nn),T(r,l,null,N,e,na,ni),(E=document.createElement("pre")).textContent=C,N.appendChild(E),function(l){let r,N;console.log("parse: "+l);let E=es(l,tL.tagName);d=new tL(et(E));let y=l.getElementsByTagName(tT.tagName);y.length>0?(y.length>1&&console.warn("Multiple "+tT.tagName+" tags found, using the first."),r=y[0].childNodes[0].nodeValue.trim(),N=et(y[0])):(r=e,console.warn("No "+tT.tagName+" tag found, using the filename: "+e+" as the title."),N=new Map),n0(r,N);let C=document.getElementById(nP),b=nz(tR.tagName);nD(b),T(b,C,null,function(e,t,s){let i=O(void 0,na),n=es(e,tR.tagName),a=new Set;if(n.childNodes.forEach(function(e){a.add(e.nodeName)}),1==a.size||2==a.size&&a.has("#text")||(console.error("moleculeListTagNames:"),a.forEach(e=>console.error(e)),console.warn("Additional tag names in moleculeList:")),!a.has(sE.tagName)){console.warn('Expecting tags with "'+sE.tagName+'" tagName but there are none! Please add molecules to the moleculeList.');let e=i.appendChild(sw(i,t,s));return i.appendChild(sI(i,e,t,s)),i}let o=n.getElementsByTagName(sE.tagName),d=o.length;console.log("Number of molecules="+d);for(let e=0;e<d;e++){let n=t.addID(sE.tagName,e),a=O(n),d=et(o[e]),l=new sE(d,d.get(sE.s_id));nj(l,s);let r=T(t.addID(n,nm),i,null,a,l.label,na,nn),g=new Set,h=o[e].childNodes;for(let e=0;e<h.length;e++){let t=h[e];g.has(t.nodeName)?"#text"!=t.nodeName&&console.warn("Another ChildNode with nodeName="+t.nodeName):g.add(t.nodeName)}sD(l,s,r.querySelector(M),t,a,nn),a.appendChild(s_(t.addID(n,nc),t,l.getDescription.bind(l),l.setDescription.bind(l),na,nn));let m=o[e].getElementsByTagName(tw.tagName);if(m.length>0){m.length>1&&console.warn("Expecting 1 or 0 "+tw.tagName+" but finding "+m.length+". Loading the first of these...");let e=t.addID(n,tw.tagName),s=O(e);T(t.addID(e,nm),a,null,s,tw.tagName,na,nn);let i=m[0].getElementsByTagName(tp.tagName),o=new tw(et(m[0]));l.setMetadataList(o);for(let n=0;n<i.length;n++){let a=new tp(et(i[n]));s.appendChild(function(e,t,s,i,n,a){s.addMetadata(t);let o=U(i,nn);return o.appendChild(q(e.getLabel(),na)),o}(l,a,o,t.addID(e,n),0,0))}g.delete(tw.tagName)}let c=o[e].getElementsByTagName(tG.tagName),N=t.addID(n,tG.tagName),v=O(N);T(t.addID(N,nm),a,null,v,tG.tagName,na,nn);let E=new tG(new Map);l.setAtoms(E);for(let e=0;e<c.length;e++){let t=et(c[e]);t.size>0&&console.warn("AtomArray attributes lost/ignored: "+x(t))}let y=o[e].getElementsByTagName(tk.tagName);for(let e=0;e<y.length;e++)v.appendChild(sB(t,l,N,E,new tk(et(y[e]),l),na,nn));v.appendChild(sP(t,l,v,tk.tagName,na,nn)),g.delete(tk.tagName);let C=o[e].getElementsByTagName(tU.tagName),b=t.addID(n,tU.tagName),S=O(b);T(t.addID(b,nm),a,null,S,tU.tagName,na,nn);let R=new tU(new Map);l.setBonds(R);for(let e=0;e<C.length;e++){let t=et(C[e]);t.size>0&&console.warn("BondArray attributes lost/ignored: "+x(t))}let D=o[e].getElementsByTagName(tO.tagName);for(let e=0;e<D.length;e++)et(D[e]).has(tO.s_id)&&S.appendChild(sG(t,l,b,l.getAtoms().atoms,R,new tO(et(D[e]),l),na,nn));for(let e=0;e<D.length;e++)et(D[e]).has(tO.s_id)||S.appendChild(sG(t,l,b,l.getAtoms().atoms,R,new tO(et(D[e]),l),na,nn));S.appendChild(sk(t,l,S,tO.tagName,na,nn)),g.delete(tO.tagName);let _=t.addID(n,nS),P=O(_);T(t.addID(_,nm),a,null,P,nS,na,nn),sF(t,l,P,na,nn);let B=o[e].getElementsByTagName(t7.tagName),A=t.addID(n,t7.tagName),V=O(A);T(t.addID(A,nm),a,null,V,t7.tagName,na,nn);let $=new t7(new Map);l.setPropertyList($);for(let e=0;e<B.length;e++){let t=et(B[e]);t.size>0&&console.warn("PropertyList attributes lost/ignored: "+x(t))}let K=o[e].getElementsByTagName(tj.tagName);sy(l,t,V,$);for(let e=0;e<K.length;e++)(function(e,t,s,i,n,a,o){let d=new tj(et(t));if(d.dictRef==tX.dictRef){let l=f(s.id,tX.dictRef);n.removeIDs(l),sq(e,d,tL.energyUnits,i,n,t,s,a,o)}else d.dictRef==tY.dictRef?sq(e,d,tL.energyUnits,i,n,t,s,a,o):d.dictRef==t$.dictRef?sq(e,d,tL.energyUnits,i,n,t,s,a,o):d.dictRef==tK.dictRef?sq(e,d,tL.energyUnits,i,n,t,s,a,o):d.dictRef==tW.dictRef?sq(e,d,tL.frequencyUnits,i,n,t,s,a,o):d.dictRef==tZ.dictRef?sq(e,d,void 0,i,n,t,s,a,o):d.dictRef==tQ.dictRef?sq(e,d,void 0,i,n,t,s,a,o):d.dictRef==tJ.dictRef?sq(e,d,void 0,i,n,t,s,a,o):d.dictRef==t0.dictRef?sq(e,d,void 0,i,n,t,s,a,o):d.dictRef==t1.dictRef?sq(e,d,void 0,i,n,t,s,a,o):d.dictRef==t2.dictRef?sq(e,d,void 0,i,n,t,s,a,o):d.dictRef==t3.dictRef?sq(e,d,void 0,i,n,t,s,a,o):d.dictRef==t5.dictRef?sq(e,d,void 0,i,n,t,s,a,o):d.dictRef==t4.dictRef?sq(e,d,void 0,i,n,t,s,a,o):d.dictRef==t6.dictRef?sq(e,d,void 0,i,n,t,s,a,o):d.dictRef==t8.dictRef?sq(e,d,void 0,i,n,t,s,a,o):function(e,t,s,i,n,a,o){let d=new Set,l=i.getElementsByTagName(tq.tagName);if(l.length>0){if(1!=l.length)throw Error("Expecting 1 "+tq.tagName+" but finding "+l.length+"!");let s=Y(l[0]),i=new tq(et(l[0]),s);t.setProperty(i),i.setValue=(function(e){i.value=e,t.dictRef==tX.dictRef&&n1()}).bind(i);let a=function(e,t,s,i,n,a,o,d){let l=U(e,d),r=s+nl,g=s+nd,h=nz(e,M);t.add(h);let m=G(g,h,o);l.appendChild(m),m.classList.add(np),m.classList.add(nN);let c=nz(e,s,nu);t.add(c);let u=i();return void 0==u?(m.textContent=g,m.classList.toggle(np)):(n9(l,c,s,u,n,o),m.textContent=r,m.classList.toggle(nN)),m.addEventListener("click",e=>{null==document.getElementById(c)?(n9(l,c,s,u,n,o),m.textContent=r):(document.getElementById(c)?.remove(),a(),console.log("Removed "+c),m.textContent=g),m.classList.toggle(np),m.classList.toggle(nN)}),l}(nz(n.id,t.dictRef),d,t.dictRef,i.getValue.bind(i),i.setValue,()=>e.removeProperty(t.dictRef),na,nn);n.appendChild(a)}else console.log("Expecting "+tq.tagName+" but finding none!")}(e,d,0,t,s,0,0)})($,K[e],V,l,t,na,nn);g.delete(t7.tagName),g.delete(tj.tagName);let W=o[e].getElementsByTagName(sn.tagName);if(W.length>0){if(W.length>1)throw Error("Expecting 1 or 0 "+sn.tagName+" but finding "+W.length+"!");(function(e,t,s,i,n){let a=i.getElementsByTagName(se.tagName);if(a.length>0){let i=e.addID(n.id,sn.tagName),o=document.createElement("div");T(e.addID(i,nm),n,null,o,sn.tagName,na,nn);let d=[];for(let t=0;t<a.length;t++){let s=Y(a[t]),n=new(u(p))(s),l=new se(et(a[t]),n);d.push(l);let r=se.tagName,g=e.addID(i,se.tagName,t),h=I("number",g,na,nn,e=>{let i=e.target;al(l,i),s=i.value,d[t].setValue(new(u(p))(s)),console.log("Set "+g+" to "+s),L(i)},s,r);o.appendChild(h);let m=document.createElement("label");m.textContent="units cm-1",h.appendChild(m)}t.setDeltaEDowns(d),s.setEnergyTransferModel(t)}})(t,new sn(et(W[0])),l,W[0],a),g.delete(sn.tagName)}let Z=o[e].getElementsByTagName(sa.tagName);if(Z.length>0){if(Z.length>1)throw Error("Expecting 1 or 0 "+sa.tagName+" but finding "+Z.length+"!");let e=new sa(et(Z[0]));a.appendChild(k(sa.tagName,sa.xsi_typeOptions,sa.tagName,e.getXsiType(),t.addID(n,sa.tagName),na,nn)),g.delete(sa.tagName)}let Q=o[e].getElementsByTagName(sl.tagName);if(Q.length>0){if(Q.length>1)throw Error("Expecting 1 or 0 "+sl.tagName+" but finding "+Q.length+"!");let e=et(Q[0]),s=new sl(e);l.setDistributionCalcMethod(s);let i=O(t.addID(n,sl.tagName));a.appendChild(i),i.appendChild(q(sl.tagName+" "+x(e),nn)),g.delete(sl.tagName)}let J=o[e].getElementsByTagName(sv.tagName);if(J.length>0){if(J.length>1)throw Error("Expecting 1 or 0 "+sv.tagName+" but finding "+J.length+"!");let e=new sv(et(J[0]));l.setDensityOfStatesList(e);let s=t.addID(n,sv.tagName),i=O(s);T(t.addID(s,nm),a,null,i,sv.tagName,na,nn);let o=J[0].getElementsByTagName(sx.tagName),d=J[0].getElementsByTagName(tP.tagName);if(d.length>0){if(d.length>1)throw Error("Expecting 1 or 0 "+tP.tagName+" but finding "+d.length+"!");let t=new tP(et(d[0]),X(j(d[0])));e.setDescription(t)}if(0==o.length)throw Error("Expecting 1 or more "+sx.tagName+" but finding 0!");{let n=F(t.addID(s,nw),nn);H(n,sx.header),i.appendChild(n);for(let a=0;a<o.length;a++){let d=new sx(et(o[a]));e.addDensityOfStates(d);let l=U(t.addID(s,a),nn);i.appendChild(l);let r=o[a].getElementsByTagName(tB.tagName);if(1!=r.length)throw Error("Expecting 1 "+tB.tagName+" but finding "+r.length+"!");{let e=new tB(et(r[0]),new(u(p))(X(j(r[0]))));d.setT(e)}let g=o[a].getElementsByTagName(sp.tagName);if(1!=g.length)throw Error("Expecting 1 "+sp.tagName+" but finding "+g.length+"!");{let e=new sp(et(g[0]),new(u(p))(X(j(g[0]))));d.setQtot(e)}let h=o[a].getElementsByTagName(sN.tagName);if(1!=h.length)throw Error("Expecting 1 "+sN.tagName+" but finding "+h.length+"!");{let e=new sN(et(h[0]),new(u(p))(X(j(h[0]))));d.setSumc(e)}let m=o[a].getElementsByTagName(sf.tagName);if(1!=m.length)throw Error("Expecting 1 "+sf.tagName+" but finding "+m.length+"!");{let e=new sf(et(m[0]),new(u(p))(X(j(m[0]))));d.setSumg(e)}H(n,d.toStringArray())}ad(e.toCSV,i,n,l.getID()+"_"+sv.tagName,nn)}g.delete(sv.tagName)}let ee=sg.tagName,es=o[e].getElementsByTagName(ee);if(es.length>0){let e;if(es.length>1)throw Error("Expecting 1 or 0 "+ee+" but finding "+es.length+"!");let s=new sg(et(es[0])),i=t.addID(n,sg.tagName),o=O(i);T(t.addID(i,nm),a,null,o,ee,na,nn);let d=sr.tagName,r=es[0].getElementsByTagName(d);if(0==r.length)throw Error("Expecting 1 or more "+d+" but finding 0!");{e=[];let n=F(t.addID(i,nw),nn);H(n,s.getHeader());for(let t=0;t<r.length;t++){let s=new sr(et(r[t]));e.push(s),H(n,s.toStringArray())}o.appendChild(n),s.init(e),ad(s.toCSV.bind(s),o,n,t.addID(l.getID(),sg.tagName),nn)}l.setThermoTable(s),g.delete(d),g.delete(ee)}let ei=o[e].getElementsByTagName(sc.tagName);if(ei.length>0)for(let e=0;e<ei.length;e++){let s=new sc(et(ei[e])),i=t.addID(n,sc.tagName,e),o=O(i);T(t.addID(i,nm),a,null,o,sc.tagName,na,nn);let d=ei[e].getElementsByTagName(so.tagName);if(d.length>0){if(1!=d.length)throw Error("Expecting only 1 bondRef, but there are "+d.length);let e=l.getBonds().getBondIds(),s=new so(et(d[0]),X(j(d[0]))),n=k(so.tagName,e,so.tagName,s.value,t.addID(i,so.tagName),na,nn);n.getElementsByTagName("select")[0].classList.add(tO.tagName),o.appendChild(n)}let r=ei[e].getElementsByTagName(sh.tagName);if(r.length>0){if(1!=r.length)throw Error("Expecting only 1 HinderedRotorPotential, but there are "+r.length);let e=et(r[0]),n=new sh(e),d=t.addID(i,sh.tagName),l=O(d);T(t.addID(d,nm),o,null,l,sh.tagName,na,nn);let g=k(sh.s_format,sh.formats,sh.tagName,n.getFormat(),t.addID(d,sh.s_format),na,nn);l.appendChild(g),n7(tL.energyUnits,e,l,g,t.addID(d,sh.s_units),sh.tagName,na,nn);let h=n.getExpansionSize()??nb;l.appendChild(I("text",t.addID(d,sh.s_expansionSize),na,nn,e=>{let t=e.target;try{console.log("Setting "+sh.s_expansionSize+" to "+t.value),n.setExpansionSize(new(u(p))(t.value))}catch(e){alert("Invalid value, resetting..."),t.value=n.getExpansionSize()??nb}L(t)},h,sh.s_expansionSize)),function(e,t,s,i){e.addID(t.id,sh.s_useSineTerms);let n=sh.s_useSineTerms+nl,a=sh.s_useSineTerms+nd,o=G(a,void 0,i);t.appendChild(o),o.classList.add(np),o.classList.add(nN),!0==s.getUseSineTerms()?(o.textContent=n,o.classList.toggle(nN)):(o.textContent=a,o.classList.toggle(np)),o.addEventListener("click",e=>{!1==s.getUseSineTerms()?(s.setUseSineTerms(!0),o.textContent=n):(s.setUseSineTerms(!1),o.textContent=a),o.classList.toggle(np),o.classList.toggle(nN)})}(t,l,n,nn);let m=t.addID(d,sd.tagName),c=O(m),N=T(t.addID(m,nm),a,null,c,"PotentialPoints",na,nn);l.appendChild(N);let f=[],x=r[0].getElementsByTagName(sd.tagName);for(let e=0;e<x.length;e++){let s=new sd(et(x[e]));f.push(s);let i=t.addID(m,e),n=U(i,nn);c.appendChild(n);let a=q(sd.tagName+" "+e,na);n.appendChild(a);let o=s.getAngle()??nb,d=I("text",t.addID(i,sd.s_angle),na,na,e=>{let t=e.target;if(w(t.value)){let e=new(u(p))(t.value);s.setAngle(e)}else alert("Angle input is not a number, resetting..."),t.value=s.getAngle()??nb;L(t)},o,sd.s_angle);n.appendChild(d);let l=q(sd.s_potential,na);n.appendChild(l);let r=z("text",t.addID(i,sd.s_potential),na);n.appendChild(r);let g=s.getPotential()??nb;r.addEventListener("change",e=>{let t=e.target;if(w(t.value)){let e=new(u(p))(t.value);s.setPotential(e),console.log("Set "+sd.tagName+" to "+e.toExponential())}else alert("Potential input is not a number, resetting..."),r.value=s.getPotential()??nb;L(r)}),r.value=g,L(r)}n.setPotentialPoints(f),s.setHinderedRotorPotential(n)}let h=ei[e].getElementsByTagName(sm.tagName);if(h.length>0){if(1!=h.length)throw Error("Expecting only 1 Periodicity, but there are "+h.length);let e=X(j(h[0])),n=new sm(et(h[0]),new(u(p))(e));s.setPeriodicity(n);let a=I("text",t.addID(i,sm.tagName),na,nn,t=>{let i=t.target;if(w(e=i.value)){let t=new(u(p))(e);n.value=t,s.getPeriodicity().value=t,console.log("Set "+sm.tagName+" to "+t)}else alert("Periodicity input is not a number, resetting..."),i.value=n.value.toExponential()},e,sm.tagName);o.appendChild(a)}l.setExtraDOSCMethod(e,s),g.delete(sc.tagName)}g.delete(su.tagName);let en=o[e].getElementsByTagName(su.tagName);if(en.length>0){if(1!=en.length)throw Error("Expecting only 1 reservoirSize, but there are "+en.length);let e=X(j(en[0])),t=new(u(p))(e),s=new su(et(en[0]),t);l.setReservoirSize(s);let i=I("number",l.getID()+"_"+su.tagName,na,nn,e=>{let t=e.target;s.value=new(u(p))(t.value),L(t)},e,su.tagName);a.appendChild(i)}g.delete("#text"),g.size>0&&(console.warn("There are additional unexpected moleculeTagNames:"),g.forEach(e=>console.warn(e))),n8(a,nn,()=>{sU(i,r,t,s,n,l)})}let l=sw(i,t,s);return sI(i,l,t,s),i}(l,s,g),tR.tagName,na,ni);let R=document.getElementById(nB),D=nz(tI.tagName);nD(D),T(D,R,null,function(e,t,s,i,n){let a=f(s,M),o=document.querySelector(a),d=O(void 0,na),l=es(e,tI.tagName),r=new Set;if(l.childNodes.forEach(function(e){r.add(e.nodeName)}),r.size>0){if(1!=r.size&&!(2==r.size&&r.has("#text")))throw console.error("reactionListTagNames:"),r.forEach(e=>console.error(e)),Error("Additional tag names in reactionList:");if(!r.has(iN.tagName))throw Error('Expecting tags with "'+iN.tagName+'" tagName but there are none!');let e=l.getElementsByTagName(iN.tagName);console.log("Number of reactions="+e.length);for(let s=0;s<e.length;s++){let a=new iN(et(e[s]));i.set(a.id,a);let l=new Set,r=e[s].childNodes,g=nz(iN.tagName,s),h=O(g);for(let e=0;e<r.length;e++){let t=r[e];l.has(t.nodeName)?"#text"!=t.nodeName&&console.warn("Another ChildNode with nodeName="+t.nodeName):l.add(t.nodeName)}let m=e[s].getElementsByTagName(s7.tagName);l.delete(s7.tagName);let c=t.addID(g,s7.tagName),N=O(c);T(f(c,nm),h,null,N,nx,na,nn);let v=new Map;if(m.length>0){for(let e=0;e<m.length;e++){let s=f(c,s7.tagName,e),i=U(s);N.appendChild(i);let n=new s9(et(V(m[e],sE.tagName))),a=new s7(et(m[e]),n);v.set(n.getRef(),a);let o=k(n.getRef()+" role",s7.roleOptions,"Role",n.getRole(),t.addID(s,S),na,nn);o.querySelector("select")?.addEventListener("change",e=>{let t=e.target;n.setRole(t.value),console.log("Set Role to "+t.value),P(t)}),i.appendChild(o),n8(i,na,()=>{N.removeChild(i),t.removeIDs(s),v.delete(n.getRef())})}a.setReactants(v)}iv(a,o,t,g,N,n,v);let E=e[s].getElementsByTagName(ie.tagName);l.delete(ie.tagName);let w=t.addID(g,ie.tagName),y=U(w);T(f(w,nm),h,null,y,nf,na,nn);let C=new Map;if(E.length>0){for(let e=0;e<E.length;e++){let s=new s9(et(V(E[e],sE.tagName))),i=new ie(et(E[e]),s);C.set(s.getRef(),i);let n=k(s.getRef()+" role",ie.roleOptions,s.getRole(),s.getRef(),t.addID(w,e,"Role"),na,nn),a=n.querySelector("select");a.value=s.getRole(),a.addEventListener("change",e=>{let t=e.target;s.setRole(t.value),console.log("Set Role to "+t.value),P(t)}),P(a),y.appendChild(n),n8(y,na,()=>{y.removeChild(n),t.removeIDs(w),C.delete(s.getRef())})}a.setProducts(C)}iE(a,o,t,g,y,n,C);let b=T(nz(g,nm),d,null,h,a.getLabel(),na,nn),M=e[s].getElementsByTagName(ir.tagName);if(M.length>0){if(M.length>1)throw Error("Expecting 1 "+ir.tagName+" but finding "+M.length+"!");let e=new ir(et(M[0]));a.setTunneling(e);let t=k(ir.tagName,ir.options,"Tunneling",e.getName(),nz(g,ir.tagName),na,nn);t.querySelector("select")?.addEventListener("change",t=>{let s=t.target;e.setName(s.value),console.log("Set Tunneling to "+s.value),P(s)}),h.appendChild(t)}let R=e[s].getElementsByTagName(it.tagName),z=nz(g,it.tagName),D=O(z);T(nz(z,nm),h,null,D,ny,na,nn);let _=new Map;if(R.length>0){for(let e=0;e<R.length;e++){let t=new s9(et(V(R[e],sE.tagName))),s=new it(et(R[e]),t);_.set(t.getRef(),s);let i=q(t.getRef()+" role "+it.role,nn);D.appendChild(i)}a.setTransitionStates(_)}iw(t,g,D,n,_);let B=e[s].getElementsByTagName(id.tagName);if(B.length>0){if(B.length>1)throw Error("Expecting 1 "+id.tagName+" but finding "+B.length+"!");{let e;let t=et(B[0]),s=t.get("xsi:type");void 0==s&&(s=t.get("name"));let i=nz(g,id.tagName),n=O(i);if(s==il.xsiType||s==il.xsiType2){let s=T(nz(i,nm),h,null,n,id.tagName,na,nn);h.appendChild(s),e=new il(t);let a=B[0].getElementsByTagName(is.tagName);if(null!=a&&null!=a[0]){let t=Y(a[0]),s=new(u(p))(t),o=et(a[0]),d=new is(o,s);e.setPreExponential(d);let l=I("number",nz(i,is.tagName,nu),na,nn,e=>{al(d,e.target)},t,is.tagName);n.appendChild(l);let r=l.querySelector("input");r.value=t,L(r),r.addEventListener("change",e=>{t=e.target.value,d.value=new(u(p))(t),console.log(is.tagName+" changed to "+t),L(r)}),n7(void 0,o,l,null,nz(i,is.tagName),is.tagName,na,na),n.appendChild(l)}let o=B[0].getElementsByTagName(ii.tagName);if(null!=o&&null!=o[0]){let t=Y(o[0]),s=new(u(p))(t),a=et(o[0]),d=new ii(a,s);e.setActivationEnergy(d);let l=I("number",nz(i,ii.tagName,nu),na,nn,e=>{al(d,e.target)},t,ii.tagName),r=l.querySelector("input");r.value=t,L(r),r.addEventListener("change",e=>{t=e.target.value,d.value=new(u(p))(t),console.log(ii.tagName+" changed to "+t),L(r)}),n7(void 0,a,l,null,nz(i,ii.tagName),ii.tagName,na,na),n.appendChild(l)}let d=B[0].getElementsByTagName(ia.tagName);if(null!=d&&null!=d[0]){let t=Y(d[0]),s=new(u(p))(t),a=et(d[0]),o=new ia(a,s);e.setTInfinity(o);let l=I("number",nz(i,ia.tagName,nu),na,nn,e=>{al(o,e.target)},t,ia.tagName),r=l.querySelector("input");r.value=t,L(r),r.addEventListener("change",e=>{t=e.target.value,o.value=new(u(p))(t),console.log(ia.tagName+" changed to "+t),L(r)}),n7(void 0,a,l,null,nz(i,ia.tagName),ia.tagName,na,na),n.appendChild(l)}let l=B[0].getElementsByTagName(io.tagName);if(null!=l&&null!=l[0]){let t=Y(l[0]),s=new(u(p))(t),a=et(l[0]),o=new io(a,s);e.setNInfinity(o);let d=I("number",nz(i,io.tagName,nu),na,nn,e=>{al(o,e.target)},t,io.tagName);n.appendChild(d);let r=d.querySelector("input");r.value=t,L(r),r.addEventListener("change",e=>{t=e.target.value,o.value=new(u(p))(t),console.log(io.tagName+" set to "+t),L(r)}),n7(void 0,a,d,null,nz(i,io.tagName),io.tagName,na,na),n.appendChild(d)}}else{e=new id(t);let i=document.createElement("label");i.textContent=id.tagName+": "+s,Object.assign(i.style,nn),n.appendChild(i),h.appendChild(n)}a.setMCRCMethod(e)}}let A=e[s].getElementsByTagName(ig.tagName);if(A.length>0){if(A.length>1)throw Error("Expecting 1 "+ig.tagName+" but finding "+A.length+"!");let e=new(u(p))(X(j(A[0]))),t=new ig(et(A[0]),e);a.setExcessReactantConc(t);let s=I("number",nz(g,ig.tagName),na,nn,e=>{al(t,e.target)},e.toExponential(),ig.tagName);h.appendChild(s)}let G=e[s].getElementsByTagName(ip.tagName);if(G.length>0){if(G.length>1)throw Error("Expecting 1 "+ip.tagName+" but finding "+G.length+"!");let e=et(G[0]),t=new ip(e);a.setCanonicalRateList(t);let s=nz(g,ip.tagName),i=O(s),n=T(nz(s,nm),h,null,i,ip.tagName,na,nn);h.appendChild(n);let o=G[0].getElementsByTagName(tP.tagName);if(o.length>0){if(o.length>1)throw Error("Expecting 1 "+tP.tagName+" but finding "+o.length+"!");let s=X(j(o[0]));t.setDescription(new tP(et(o[0]),s));let n=q(s+" ("+x(e)+")",na),a=O(void 0,nn);a.appendChild(n),i.appendChild(a)}let d=G[0].getElementsByTagName(iu.tagName);if(d.length>0){let e=F(nz(s,iu.tagName,nw),nn);i.appendChild(e);for(let s=0;s<d.length;s++){let i=new iu(et(d[s]));t.addKinf(i);let n=d[s].getElementsByTagName(tB.tagName);if(n.length>0){if(n.length>1)throw Error("Expecting 1 "+tB.tagName+" but finding "+n.length+"!");let e=new(u(p))(X(j(n[0])));i.setT(new tB(et(n[0]),e))}let a=d[s].getElementsByTagName(ih.tagName);if(a.length>0){if(a.length>1)throw Error("Expecting 1 "+ih.tagName+" but finding "+a.length+"!");let e=new(u(p))(X(j(a[0])));i.setVal(new ih(et(a[0]),e))}let o=d[s].getElementsByTagName(im.tagName);if(o.length>0){if(o.length>1)throw Error("Expecting 1 "+im.tagName+" but finding "+o.length+"!");let e=new(u(p))(X(j(o[0])));i.setRev(new im(et(o[0]),e))}let l=d[s].getElementsByTagName(ic.tagName);if(l.length>0){if(l.length>1)throw Error("Expecting 1 "+ic.tagName+" but finding "+l.length+"!");let e=new(u(p))(X(j(l[0])));i.setKeq(new ic(et(l[0]),e))}0==s&&H(e,i.getHeader()),H(e,i.toStringArray())}ad(t.toCSV.bind(t),i,e,a.id+"_"+ip.tagName,nn)}}n8(h,nn,()=>{iy(d,b,t,g,i,a)})}}else console.warn("No reaction elements found! Please add a reaction in reactionList.");return ix(t,d,i,n),d}(l,i,D,h,g),tI.tagName,na,ni);let _=document.getElementById(nA),B=nz(n$);null!=c&&(c.close(),c=null),nD(B);let A=O(B,nn);T(B,_,null,A,n$,na,ni),nt(A,nW,400,t,nZ,4,2,c,g,h,!0);let $=document.getElementById(nk),K=nz(ev.tagName);nD(K),T(K,$,null,function(e,t,s){console.log(ev.tagName);let i=O(void 0,na),n=e.getElementsByTagName(ev.tagName);for(let e=0;e<n.length;e++){let a=n[e],o=nz(ev.tagName,e.toString()),l=O(o,na),r=nz(o,nm);T(r,i,null,l,ev.tagName+" "+e.toString(),na,nn);let g=iS(et(a),e);iC(g,l,a,t,s),ib(g,l,a,t,s),n8(l,nn,d.removeConditions.bind(d),e).addEventListener("click",e=>{nD(r),t.removeIDs(o)})}return iM(i,t,s),i}(l,n,g),"ConditionsList",na,ni);let W=document.getElementById(nG),Z=nz(tS.tagName,"list");nD(Z),T(Z,W,null,function(e,t){console.log(tS.tagName);let s=O(void 0,na),i=e.getElementsByTagName(tS.tagName);for(let e=0;e<i.length;e++){let n=t.addID(tS.tagName,e.toString()),a=O(n,na),o=t.addID(n,nm);T(o,s,null,a,tS.tagName+" "+e.toString(),na,nn);let l=iU(et(i[e]),e);(function(e,t,s,i){let n,a,o=ty.tagName,d=U(i.addID(s.id,o),nn);s.appendChild(d);let l=o+nl,r=o+nd,g=G(o,i.addID(s.id,o,M),na);g.classList.add(np),g.classList.add(nN),d.appendChild(g);let h=i.addID(s.id,o,nu);if(null!=t){let s=t.getElementsByTagName(o);if(1==s.length){a=X(j(s[0]));let t=new(u(p))(a);n=new ty(et(s[0]),t),g.textContent=l,iH(e,d,n,h,a,e.setGrainSize,tL.energyUnits),g.classList.toggle(nN)}else n=iq(o),g.textContent=r,g.classList.toggle(np)}else n=iq(o),g.textContent=r,g.classList.toggle(np);g.addEventListener("click",()=>{e.index.has(ty.tagName)?(e.removeGrainSize(),document.getElementById(h)?.remove(),document.getElementById(f(h,nM))?.remove(),g.textContent=r):(iH(e,d,n,h,a,e.setGrainSize,tL.energyUnits),g.textContent=l),g.classList.toggle(np),g.classList.toggle(nN)})})(l,i[e],a,t),iF(l,t,i[e],a,th,l.setAutomaticallySetMaxEne,l.removeAutomaticallySetMaxEne.bind(l)),iF(l,t,i[e],a,tb,l.setEnergyAboveTheTopHill,l.removeEnergyAboveTheTopHill.bind(l)),iF(l,t,i[e],a,tM,l.setMaxTemperature,l.removeMaxTemperature.bind(l)),n8(a,nn,d.removeModelParameters.bind(d),e).addEventListener("click",e=>{nD(o),t.removeIDs(n)})}return iV(s,t),s}(l,a),"ModelParametersList",na,ni);let Q=document.getElementById(nO),J=nz(tu.tagName);if(nD(J),T(J,Q,null,function(e,t){console.log(tu.tagName);let s=O(void 0,na),i=e.getElementsByTagName(tu.tagName);for(let e=0;e<i.length;e++){let n=i[e],a=t.addID(tu.tagName,e.toString()),o=O(a,na);s.appendChild(o);let l=t.addID(a,nm);T(l,s,null,o,tu.tagName+" "+e.toString(),na,nn);let r=i$(et(n),e),g=new Map;ij(r).forEach(e=>{iW(r,o,t,g,n,null,e.class,e.setMethod,e.removeMethod)});let h=U(void 0,nn);if(new Map([...g.entries()].sort()).forEach(e=>{h.appendChild(e)}),o.appendChild(h),iQ(r,o,t,null,nn),iZ(r,o,t,n,nn),iX(r).forEach(e=>{iW(r,o,t,g,n,nn,e.class,e.setMethod,e.removeMethod,!0)}),1==n.getElementsByTagName(eO.tagName).length){let e=new eO;r.setForceMacroDetailedBalance(e);let s=U(t.addID(a,eO.tagName),nn);o.appendChild(s);let i=q(eO.tagName,na);s.appendChild(i)}n8(o,nn,d.removeControl.bind(d),e).addEventListener("click",e=>{nD(l),t.removeIDs(a);let s=f(a,eq.tagName);t.removeIDs(s);let i=f(s,"details");t.removeIDs(i);let n=f(i,"select");t.removeIDs(n)})}return iY(s,t),s}(l,o),"ControlList",na,ni),l.getElementsByTagName(tw.tagName).length>0){let e=document.getElementById(nU),t=nz(tw.tagName);nD(t),T(t,e,null,function(e){console.log(tw.tagName);let t=O(nz(tw.tagName,0),na),s=e.getElementsByTagName(tw.tagName);if(s.length>0){if(s.length>1)throw Error("More than one MetadataList element.");let e=new tw(et(s[0]));function i(i,n,a){let o=s[0].getElementsByTagName(i);if(o.length>0){if(1==o.length){let s=j(o[0])?.nodeValue??"",i=new n(et(o[0]),s),d=O(void 0,nn);t.appendChild(d),d.appendChild(q(i.tagName+" "+s,na)),a.call(e,i)}else throw Error(`More than one ${i} element.`)}}d.setMetadataList(e),i(tf.tagName,tf,e.setSource),i(tx.tagName,tx,e.setCreator),i(tv.tagName,tv,e.setDate),i(tE.tagName,tE,e.setContributor)}return t}(l),tw.tagName,na,ni)}if(l.getElementsByTagName(eh.tagName).length>0){let e=document.getElementById(nq),t=nz(eh.tagName);nD(t),T(t,e,null,function(e){console.log(eh.tagName);let t=nz(eh.tagName,0),s=O(t,na),i=e.getElementsByTagName(eh.tagName);if(i.length>0){if(i.length>1)throw Error("More than one Analysis element.");let e=new eh(et(i[0]));d.setAnalysis(e);let n=i[0].getElementsByTagName(tP.tagName);if(n.length>0){if(1==n.length){let i=j(n[0])?.nodeValue??"",a=new tP(et(n[0]),i),o=O(nz(t,tP.tagName),nn);s.appendChild(o),o.appendChild(q(a.tagName+" "+i,na)),e.setDescription(a)}else throw Error("More than one Description element.")}let a=i[0].getElementsByTagName(en.tagName),o=nz(t,en.tagName),l=O(o,nn);if(T(o,s,null,l,en.tagName+"s",na,nn),a.length>0)for(let t=0;t<a.length;t++){let s=et(a[t]),i=new en(s),n=i.tagName+" "+t.toString()+" "+x(s),d=nz(l.id,t.toString()),r=O(o,nn);T(d,l,null,r,n,na,ni),e.addEigenvalueList(i);let g=[],h=a[t].getElementsByTagName(ei.tagName);if(h.length>0)for(let e=0;e<h.length;e++){let t=new p.Big(j(h[e])?.nodeValue);g.push(t),i.addEigenvalue(new ei(et(h[e]),t))}r.appendChild(q(v(g,", "),na))}let r=i[0].getElementsByTagName(ed.tagName),g=nz(t,ed.tagName),h=O(g,nn);if(T(g,s,null,h,ed.tagName+"s",na,nn),r.length>0)for(let t=0;t<r.length;t++){let i=et(r[t]);void 0!=i.get("T")&&new p.Big(i.get("T")),void 0!=i.get("conc")&&new p.Big(i.get("conc"));let n=new ed(i),a=n.tagName+" "+t.toString()+" "+x(i),o=nz(s.id,ed.tagName,t.toString()),d=nz(o,t.toString()),l=O(o,nn);T(d,h,null,l,a,na,ni),e.addPopulationList(n);let g=new Map,c=[];c.push("time");let u=r[t].getElementsByTagName(eo.tagName);if(u.length>0)for(let e=0;e<u.length;e++){let t=et(u[e]),s=new eo(t,[]);n.addPopulation(s);let i=void 0!=t.get("time")?new p.Big(t.get("time")):nH,a=new Map;g.set(i,a);let o=u[e].getElementsByTagName(ea.tagName);if(o.length>0)for(let t=0;t<o.length;t++){let i=et(o[t]),n=i.get("ref");0==e&&c.push(n);let d=new p.Big(j(o[t])?.nodeValue),l=new ea(i,d);s.addPop(l),a.set(n,d)}}let N=O(nz(d,"graph"),na);l.appendChild(N);let f=document.createElement("canvas");N.appendChild(f);let v=new at(f,g,"2em SensSerif");m.push(v),ao(f,l,N,a);let E=O(nz(d,nw),na);l.appendChild(E);let w=F(nz(o,nw),na);H(w,c),g.forEach((e,t)=>{let s=[];s.push(t.toString()),e.forEach((e,t)=>{s.push(e.toString())}),H(w,s)}),E.appendChild(w),ad(()=>as(w),l,E,a,na)}let c=i[0].getElementsByTagName(eg.tagName),u=nz(t,eg.tagName),N=O(u,nn);if(T(u,s,null,N,eg.tagName+"s",na,nn),c.length>0){let t=O(nz(u,nw),na);N.appendChild(t);let s=F(nz(g,nw),na),i=["T","conc"];for(let t=0;t<c.length;t++){let n=et(c[t]),a=[];a.push(n.get("T")),a.push(n.get("conc"));let o=new eg(n);e.addRateList(o);let d=c[t].getElementsByTagName(er.tagName);if(d.length>0)for(let e=0;e<d.length;e++){let s=et(d[e]);if(0==t){let e=s.get("fromRef"),t=s.get("toRef");i.push(e+"->"+t)}let n=(j(d[e])?.nodeValue??"").trim();a.push(n);let l=new er(s,new p.Big(n));o.addFirstOrderRate(l)}let l=c[t].getElementsByTagName(el.tagName);if(l.length>0)for(let e=0;e<l.length;e++){let s=et(l[e]);0==t&&Array.from(s.values()).forEach(e=>{i.push("loss of "+e)});let n=(j(l[e])?.nodeValue??"").trim();a.push(n);let d=new el(s,new p.Big(n));o.addFirstOrderLoss(d)}0==t&&H(s,i),H(s,a)}t.appendChild(s),ad(()=>as(s),N,t,"Bartis-Widom Phenomenological Rate Coefficients",na)}}return s}(l),eh.tagName,na,ni)}}(new DOMParser().parseFromString(y,"text/xml"))}}};let C=r.slice(E,E+1048576);N.readAsText(C),E+=1048576}},l.click()}}),N.appendChild(K),(Z=G(W="Save To File",nI(W),na)).addEventListener("click",an),N.appendChild(Z),nJ()});class at{constructor(e,t,s){this.canvas=e,this.data=t,this.draw(s)}draw(e){this.canvas.width=800,this.canvas.height=400;let t=this.canvas.getContext("2d");t.font=e,t.clearRect(0,0,this.canvas.width,this.canvas.height);let s=this.canvas.width,i=this.canvas.height,n=Number.MAX_VALUE,a=Number.MIN_VALUE,o=0;this.data.forEach((e,s)=>{let i=Math.log10(s.toNumber());n=Math.min(n,i),a=Math.max(a,i),e.forEach((e,s)=>{o=Math.max(o,t.measureText(s).width)})});let d=0;for(let e=0;e<2;e++){let s=1-1*e;d=Math.max(d,t.measureText(s.toString()).width)}let l=t.measureText("0"),r=l.actualBoundingBoxAscent+l.actualBoundingBoxDescent,g=4*r,h=d+r+20,m=i-(h+3*r),c=s-(g+o+20),u=(c-h)/(a-n),p=(g-m)/1;t.beginPath(),t.moveTo(h,m),t.lineTo(c,m),t.stroke(),t.beginPath(),t.moveTo(h,m),t.lineTo(h,g),t.stroke();let N=["red","green","blue","orange","purple","grey","cyan","magenta","lightblue","lightgreen","pink","yellow","brown","black"],f=new Map;this.data.forEach((e,s)=>{let i=0;e.forEach((e,a)=>{let o=h+(Math.log10(s.toNumber())-n)*u,d=e.toNumber();if(d<1){let e=m+(d-0)*p;if(e>0){t.beginPath(),t.arc(o,e,2,0,2*Math.PI);let s=N[i%N.length];f.set(a,s),t.fillStyle=s,t.fill()}}i++})}),t.textAlign="center",t.textBaseline="top",t.fillStyle="black",t.fillText("log10(time/secs)",h+(c-h)/2,m+g/2),t.save(),t.rotate(-Math.PI/2),t.textAlign="center",t.textBaseline="top",t.fillText("fractional population",-m-(g-m)/2,h-h),t.restore();let x=a-n,v=Math.abs(Math.ceil(x/Math.pow(10,Math.floor(Math.log10(x))))),E=Math.ceil(n/v),w=E*v;for(;w<a;){let e=h+(w-n)*u;t.beginPath(),t.moveTo(e,m),t.lineTo(e,m+5),t.stroke(),t.fillText(w.toString(),e,m+5),w+=v}for(let e=0;e<2;e++){let s=m-1*e;t.beginPath(),t.moveTo(h,s),t.lineTo(h-5,s),t.stroke()}let y=0;f.forEach((e,s)=>{let i=t.measureText(s),n=i.actualBoundingBoxAscent+i.actualBoundingBoxDescent;y=Math.max(y,n)});let C=c+20,b=y;E=0,f.forEach((e,s)=>{let i=g+E*b;t.fillStyle=e,t.fillRect(C,i,y/2,y/2),t.fillStyle="black",t.fillText(s,C+r+t.measureText(s).width/2,i-y/2),E++})}}function as(e){let t="",s=e.rows;for(let e=0;e<s.length;e++){let i=s[e].cells;for(let e=0;e<i.length;e++)t+=i[e].textContent,e<i.length-1&&(t+=",");t+="\n"}return t}function ai(e,t,s,i=!1){let n=document.createElement("a");n.href=i?e:`data:${t};charset=utf-8,`+encodeURIComponent(e),n.download=s,document.body.appendChild(n),n.click(),document.body.removeChild(n)}function an(){if(null==d){alert("No Mesmer object to save.");return}{let e=new tL(d.attributes);e.setTitle(d.getTitle()),void 0!=g&&e.setMoleculeList(new tR(new Map,Array.from(g.values()))),void 0!=h&&e.setReactionList(new tI(new Map,Array.from(h.values()))),void 0!=d.getConditionss()&&e.setConditionss(d.getConditionss()),void 0!=d.getModelParameterss()&&e.setModelParameterss(d.getModelParameterss()),void 0!=d.getControls()&&e.setControls(d.getControls());let t=d.getMetadataList();void 0!=t&&e.setMetadataList(t);let s=d.getAnalysis();void 0!=s&&e.setAnalysis(s),console.log("saveXML"),ai(tL.header+e.toXML("  ",""),"text/xml",aa(e.getTitle()?.value)+".xml")}}function aa(e){return e.replace(/[^a-z0-9]/gi,"_")}function ao(e,t,s,i){let n=G("Save as PNG",nz(t.id,"saveButton"),na);null!=s?t.insertBefore(n,s):t.appendChild(n),n.addEventListener("click",()=>{ai(e.toDataURL(),"image/png",aa(d.getTitle()?.value+"_"+i)+".png",!0)})}function ad(e,t,s,i,n){let a=G("Save as CSV",nz(t.id,M,nv),n);t.insertBefore(a,s),a.addEventListener("click",()=>{let t=e(),s=aa(d.getTitle()?.value+"_"+i)+".csv";ai(t,"text/csv",s),console.log("Saved "+s)})}function al(e,t){try{let s=new p.Big(t.value);e.value=s}catch(e){alert("Value invalid, resetting...")}t.value=e.value.toString()}
//# sourceMappingURL=index.4e859db6.js.map
