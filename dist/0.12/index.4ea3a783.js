let e,t,s,i,n;function a(e){return e&&e.__esModule?e.default:e}var o={};function d(e,t){if(!e.has(t))throw Error(`Key ${t} not found in map`);return e.get(t)}function l(...e){let t=e.map(e=>e.toString()).join("-").replace(/[^a-zA-Z-_0-9]/g,"_");return/^[0-9]|^--|-^[0-9]/.test(t)&&(t="_"+t),t}function r(e,t){return null==e?"":(void 0==t&&(t=", "),Array.from(e.entries()).map(([e,t])=>`${null==e?"null":e.toString()}(${null==t?"null":t.toString()})`).join(t))}function g(e,t){return void 0==t&&(t=", "),e.map(e=>null==e?"null":e.toString()).join(t)}function h(e){let t=[];for(let s=0;s<e.length;s++)t.push(new(a(o))(e[s]));return t}function m(e){try{return new(a(o))(e),!0}catch(e){return!1}}function c(e,t){return void 0==t&&(t=" "),e.map(e=>e.toString()).join(t)}function u(e,t){return null==e||e.lt(t)?t:e}function p(e,t){return null==e||e.gt(t)?t:e}!function(e){var t,s="[big.js] ",i=s+"Invalid ",n=i+"decimal places",a=i+"rounding mode",d=s+"Division by zero",l={},r=void 0,g=/^-?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i;function h(e,t,s,i){var n=e.c;if(s===r&&(s=e.constructor.RM),0!==s&&1!==s&&2!==s&&3!==s)throw Error(a);if(t<1)i=3===s&&(i||!!n[0])||0===t&&(1===s&&n[0]>=5||2===s&&(n[0]>5||5===n[0]&&(i||n[1]!==r))),n.length=1,i?(e.e=e.e-t+1,n[0]=1):n[0]=e.e=0;else if(t<n.length){if(i=1===s&&n[t]>=5||2===s&&(n[t]>5||5===n[t]&&(i||n[t+1]!==r||1&n[t-1]))||3===s&&(i||!!n[0]),n.length=t,i){for(;++n[--t]>9;)if(n[t]=0,0===t){++e.e,n.unshift(1);break}}for(t=n.length;!n[--t];)n.pop()}return e}function m(e,t,s){var i=e.e,n=e.c.join(""),a=n.length;if(t)n=n.charAt(0)+(a>1?"."+n.slice(1):"")+(i<0?"e":"e+")+i;else if(i<0){for(;++i;)n="0"+n;n="0."+n}else if(i>0){if(++i>a)for(i-=a;i--;)n+="0";else i<a&&(n=n.slice(0,i)+"."+n.slice(i))}else a>1&&(n=n.charAt(0)+"."+n.slice(1));return e.s<0&&s?"-"+n:n}l.abs=function(){var e=new this.constructor(this);return e.s=1,e},l.cmp=function(e){var t,s=this.c,i=(e=new this.constructor(e)).c,n=this.s,a=e.s,o=this.e,d=e.e;if(!s[0]||!i[0])return s[0]?n:i[0]?-a:0;if(n!=a)return n;if(t=n<0,o!=d)return o>d^t?1:-1;for(n=-1,a=(o=s.length)<(d=i.length)?o:d;++n<a;)if(s[n]!=i[n])return s[n]>i[n]^t?1:-1;return o==d?0:o>d^t?1:-1},l.div=function(e){var t=this.constructor,s=this.c,i=(e=new t(e)).c,a=this.s==e.s?1:-1,o=t.DP;if(o!==~~o||o<0||o>1e6)throw Error(n);if(!i[0])throw Error(d);if(!s[0])return e.s=a,e.c=[e.e=0],e;var l,g,m,c,u,p=i.slice(),N=l=i.length,f=s.length,x=s.slice(0,l),v=x.length,E=e,w=E.c=[],y=0,C=o+(E.e=this.e-e.e)+1;for(E.s=a,a=C<0?0:C,p.unshift(0);v++<l;)x.push(0);do{for(m=0;m<10;m++){if(l!=(v=x.length))c=l>v?1:-1;else for(u=-1,c=0;++u<l;)if(i[u]!=x[u]){c=i[u]>x[u]?1:-1;break}if(c<0){for(g=v==l?i:p;v;){if(x[--v]<g[v]){for(u=v;u&&!x[--u];)x[u]=9;--x[u],x[v]+=10}x[v]-=g[v]}for(;!x[0];)x.shift()}else break}w[y++]=c?m:++m,x[0]&&c?x[v]=s[N]||0:x=[s[N]]}while((N++<f||x[0]!==r)&&a--)return!w[0]&&1!=y&&(w.shift(),E.e--,C--),y>C&&h(E,C,t.RM,x[0]!==r),E},l.eq=function(e){return 0===this.cmp(e)},l.gt=function(e){return this.cmp(e)>0},l.gte=function(e){return this.cmp(e)>-1},l.lt=function(e){return 0>this.cmp(e)},l.lte=function(e){return 1>this.cmp(e)},l.minus=l.sub=function(e){var t,s,i,n,a=this.constructor,o=this.s,d=(e=new a(e)).s;if(o!=d)return e.s=-d,this.plus(e);var l=this.c.slice(),r=this.e,g=e.c,h=e.e;if(!l[0]||!g[0])return g[0]?e.s=-d:l[0]?e=new a(this):e.s=1,e;if(o=r-h){for((n=o<0)?(o=-o,i=l):(h=r,i=g),i.reverse(),d=o;d--;)i.push(0);i.reverse()}else for(s=((n=l.length<g.length)?l:g).length,o=d=0;d<s;d++)if(l[d]!=g[d]){n=l[d]<g[d];break}if(n&&(i=l,l=g,g=i,e.s=-e.s),(d=(s=g.length)-(t=l.length))>0)for(;d--;)l[t++]=0;for(d=t;s>o;){if(l[--s]<g[s]){for(t=s;t&&!l[--t];)l[t]=9;--l[t],l[s]+=10}l[s]-=g[s]}for(;0===l[--d];)l.pop();for(;0===l[0];)l.shift(),--h;return l[0]||(e.s=1,l=[h=0]),e.c=l,e.e=h,e},l.mod=function(e){var t,s=this,i=s.constructor,n=s.s,a=(e=new i(e)).s;if(!e.c[0])throw Error(d);return(s.s=e.s=1,t=1==e.cmp(s),s.s=n,e.s=a,t)?new i(s):(n=i.DP,a=i.RM,i.DP=i.RM=0,s=s.div(e),i.DP=n,i.RM=a,this.minus(s.times(e)))},l.neg=function(){var e=new this.constructor(this);return e.s=-e.s,e},l.plus=l.add=function(e){var t,s,i,n=this.constructor;if(e=new n(e),this.s!=e.s)return e.s=-e.s,this.minus(e);var a=this.e,o=this.c,d=e.e,l=e.c;if(!o[0]||!l[0])return l[0]||(o[0]?e=new n(this):e.s=this.s),e;if(o=o.slice(),t=a-d){for(t>0?(d=a,i=l):(t=-t,i=o),i.reverse();t--;)i.push(0);i.reverse()}for(o.length-l.length<0&&(i=l,l=o,o=i),t=l.length,s=0;t;o[t]%=10)s=(o[--t]=o[t]+l[t]+s)/10|0;for(s&&(o.unshift(s),++d),t=o.length;0===o[--t];)o.pop();return e.c=o,e.e=d,e},l.pow=function(e){var t=this,s=new t.constructor("1"),n=s,a=e<0;if(e!==~~e||e<-1e6||e>1e6)throw Error(i+"exponent");for(a&&(e=-e);1&e&&(n=n.times(t)),e>>=1;)t=t.times(t);return a?s.div(n):n},l.prec=function(e,t){if(e!==~~e||e<1||e>1e6)throw Error(i+"precision");return h(new this.constructor(this),e,t)},l.round=function(e,t){if(e===r)e=0;else if(e!==~~e||e<-1e6||e>1e6)throw Error(n);return h(new this.constructor(this),e+this.e+1,t)},l.sqrt=function(){var e,t,i,n=this.constructor,a=this.s,o=this.e,d=new n("0.5");if(!this.c[0])return new n(this);if(a<0)throw Error(s+"No square root");0===(a=Math.sqrt(this+""))||a===1/0?((t=this.c.join("")).length+o&1||(t+="0"),o=((o+1)/2|0)-(o<0||1&o),e=new n(((a=Math.sqrt(t))==1/0?"5e":(a=a.toExponential()).slice(0,a.indexOf("e")+1))+o)):e=new n(a+""),o=e.e+(n.DP+=4);do i=e,e=d.times(i.plus(this.div(i)));while(i.c.slice(0,o).join("")!==e.c.slice(0,o).join(""))return h(e,(n.DP-=4)+e.e+1,n.RM)},l.times=l.mul=function(e){var t,s=this.constructor,i=this.c,n=(e=new s(e)).c,a=i.length,o=n.length,d=this.e,l=e.e;if(e.s=this.s==e.s?1:-1,!i[0]||!n[0])return e.c=[e.e=0],e;for(e.e=d+l,a<o&&(t=i,i=n,n=t,l=a,a=o,o=l),t=Array(l=a+o);l--;)t[l]=0;for(d=o;d--;){for(o=0,l=a+d;l>d;)o=t[l]+n[d]*i[l-d-1]+o,t[l--]=o%10,o=o/10|0;t[l]=o}for(o?++e.e:t.shift(),d=t.length;!t[--d];)t.pop();return e.c=t,e},l.toExponential=function(e,t){var s=this,i=s.c[0];if(e!==r){if(e!==~~e||e<0||e>1e6)throw Error(n);for(s=h(new s.constructor(s),++e,t);s.c.length<e;)s.c.push(0)}return m(s,!0,!!i)},l.toFixed=function(e,t){var s=this,i=s.c[0];if(e!==r){if(e!==~~e||e<0||e>1e6)throw Error(n);for(s=h(new s.constructor(s),e+s.e+1,t),e=e+s.e+1;s.c.length<e;)s.c.push(0)}return m(s,!1,!!i)},l.toJSON=l.toString=function(){var e=this.constructor;return m(this,this.e<=e.NE||this.e>=e.PE,!!this.c[0])},l.toNumber=function(){var e=Number(m(this,!0,!0));if(!0===this.constructor.strict&&!this.eq(e.toString()))throw Error(s+"Imprecise conversion");return e},l.toPrecision=function(e,t){var s=this,n=s.constructor,a=s.c[0];if(e!==r){if(e!==~~e||e<1||e>1e6)throw Error(i+"precision");for(s=h(new n(s),e,t);s.c.length<e;)s.c.push(0)}return m(s,e<=s.e||s.e<=n.NE||s.e>=n.PE,!!a)},l.valueOf=function(){var e=this.constructor;if(!0===e.strict)throw Error(s+"valueOf disallowed");return m(this,this.e<=e.NE||this.e>=e.PE,!0)},(t=function e(){function t(s){if(!(this instanceof t))return s===r?e():new t(s);if(s instanceof t)this.s=s.s,this.e=s.e,this.c=s.c.slice();else{if("string"!=typeof s){if(!0===t.strict&&"bigint"!=typeof s)throw TypeError(i+"value");s=0===s&&1/s<0?"-0":String(s)}(function(e,t){var s,n,a;if(!g.test(t))throw Error(i+"number");for(e.s="-"==t.charAt(0)?(t=t.slice(1),-1):1,(s=t.indexOf("."))>-1&&(t=t.replace(".","")),(n=t.search(/e/i))>0?(s<0&&(s=n),s+=+t.slice(n+1),t=t.substring(0,n)):s<0&&(s=t.length),a=t.length,n=0;n<a&&"0"==t.charAt(n);)++n;if(n==a)e.c=[e.e=0];else{for(;a>0&&"0"==t.charAt(--a););for(e.e=s-n-1,e.c=[],s=0;n<=a;)e.c[s++]=+t.charAt(n++)}})(this,s)}this.constructor=t}return t.prototype=l,t.DP=20,t.RM=1,t.NE=-7,t.PE=21,t.strict=!1,t.roundDown=0,t.roundHalfUp=1,t.roundHalfEven=2,t.roundUp=3,t}()).default=t.Big=t,"function"==typeof define&&define.amd?define(function(){return t}):o?o=t:e.Big=t}(o);const N="button",f="select";function x(e,t,s,i,n,a,o){let d=z(e,o),r=I(n+" ▼",l(e,N),a);return r.className="collapsible",r.addEventListener("click",function(){let e=r.textContent.split(" ");e[e.length-1]="▼"===e[e.length-1]?"▲":"▼",r.textContent=e.join(" ")}),d.appendChild(r),d.appendChild(i),null!=s?t.insertBefore(d,s):t.appendChild(d),r.removeEventListener("click",v),r.addEventListener("click",v),d}function v(){this.classList.toggle("active");let e=this.nextElementSibling;null!=e?e instanceof HTMLDivElement?"block"===e.style.display?e.style.display="none":e.style.display="block":console.log("toggleCollapsible: nextElementSibling is not an HTMLDivElement"):console.log("toggleCollapsible: nextElementSibling is null")}function E(e,t,s,i,n,a,o){let d;let l=D(void 0,i),r=((d=w(e,t,s)).onchange=n,d.value=a,b(d),d),g=_(o,s);return g.htmlFor=t,l.appendChild(g),l.appendChild(r),l}function w(e,t,s){let i=document.createElement("input");return i.type=e,i.id=t,Object.assign(i.style,s),i.style.fontSize="1em",i.classList.add("auto-width"),i}function y(e,t){let s=document.createElement("textarea");return s.id=e,Object.assign(s.style,t),s.style.fontSize="1em",s.classList.add("auto-width"),s}function C(e,t){let s="<"+t;if(e)for(let[t,i]of e)s+=" "+t+'="'+i+'"';return s+" />"}function b(e,t){void 0==t&&(t=4),e.style.width=e.value.length+t+"ch"}function M(e,t){void 0==t&&(t=6),e.style.width=e.value.length+t+"ch"}function S(e,t){void 0==t&&(t=6),e.style.width=e.value.length+t+"ch"}function T(e,t,s,i,n){let a=document.createElement("select");return e.forEach(e=>{a.name=t,a.id=i;let s=document.createElement("option");s.value=e,s.text=e,a.appendChild(s)}),a.value=s,a.style.fontSize="1em",a.classList.add("auto-width"),M(a),Object.assign(a.style,n),a}function R(e,t,s,i,n,a,o){let d=D(n,o),r=_(e,a);return d.appendChild(r),d.appendChild(T(t,s,i,l(n,f),a)),d}function I(e,t,s){let i=document.createElement("button");return i.textContent=e,void 0!=t&&(i.id=t),void 0!=s&&Object.assign(i.style,s),i.style.fontSize="1em",i}function z(e,t){let s=document.createElement("div");return void 0!=e&&(s.id=e),void 0!=t&&Object.assign(s.style,t),s}function D(e,t){let s=z(e,t);return s.style.display="flex",s.style.flexWrap="wrap",s}function _(e,t){let s=document.createElement("label");return Object.assign(s.style,t),s.textContent=e,s.style.fontSize="1em",s}function L(e,t){let s=document.createElement("table");return s.id=e,Object.assign(s.style,t),s}function P(e,t){let s=e.insertRow();return t.forEach(e=>{s.insertCell().textContent=e}),s}function B(e,t){let s=e.getElementsByTagName(t)[0];if(null==s)throw Error(t+" element not found");return s}function A(e){let t=e.childNodes;if(null==t)throw Error("Element has no childNodes");return t[0]}function k(e){let t=e.nodeValue;if(null==t)throw Error("nodeValue is null");return t}function G(e){let t=A(e);return t?k(t).trim():""}class O{constructor(e){this.tagName=e}toXML(e){let t=C(void 0,this.tagName);return e?"\n"+e+t:t}}class U extends O{constructor(e,t){super(t),this.attributes=e}toString(){let e=this.tagName+"(";return this.attributes&&this.attributes.forEach((t,s)=>{e+=`${s}(${t}), `}),e}toXML(e){let t="";for(let[s,i]of(void 0!=e&&(t+="\n"+e),t+="<"+this.tagName,this.attributes))t+=" "+s+'="'+i.toString()+'"';return t+" />"}}class q extends U{constructor(e,t,s){super(e,t),this.value=s}toString(){return super.toString()+`, ${this.value.toString()})`}toXML(e){return j(this.value.trim(),this.tagName,this.attributes,e,!1)}}class F extends U{constructor(e,t,s){super(e,t),this.value=s}toString(){return super.toString()+`, ${this.value.toString()})`}toXML(e){return j(this.value.toString(),this.tagName,this.attributes,e,!1)}}class V extends U{constructor(e,t,s,i){super(e,t),this.delimiter=" ",this.values=s,void 0!=i&&(this.delimiter=i)}getValues(){return this.values}setValues(e){this.values=e}toString(){return super.toString()+`, ${this.values.toString()})`}setDelimiter(e){this.delimiter=e}toXML(e){return j(c(this.values,this.delimiter),this.tagName,this.attributes,e,!1)}}class H extends U{constructor(e,t){super(e,t),this.nodes=new Map}addNode(e){this.nodes.set(this.nodes.size,e)}toString(){let e=super.toString();return this.nodes.forEach((t,s)=>{e+=`, ${t.toString()}`}),e+")"}toXML(e,t){let s;void 0!=e&&void 0!=t&&(s=t+e);let i="";if(this.nodes.size>0)return this.nodes.forEach(t=>{void 0==t?console.warn("Node 0 is undefined this.nodes.size = "+this.nodes.size):t instanceof H?i+=t.toXML(e,s):i+=t.toXML(s)}),j(i,this.tagName,this.attributes,t,!0);{let e=C(this.attributes,this.tagName);return void 0!=t?"\n"+t+e:e}}}function j(e,t,s,i,n){let a;return function(e,t,s){let i="";if(void 0!=s&&(i+="\n"+s),i+="<"+e,t)for(let[e,s]of t)i+=" "+e+'="'+s.toString()+'"';return i+">"}(t,s,i)+e+(a="",n&&void 0!=i&&(a+="\n"+i),a+"</"+t+">")}function X(e){let t=e.getAttributeNames(),s=new Map;return t.forEach(function(t){let i=e.getAttribute(t);null!=i&&s.set(t.trim(),i.trim())}),s}function Y(e,t){let s=e.getElementsByTagName(t);if(1!=s.length)throw Error("Expecting 1 "+t+" but finding "+s.length);return s[0]}class $ extends F{static{this.tagName="me:eigenvalue"}constructor(e,t){super(e,$.tagName,t)}}class W extends H{static{this.tagName="me:eigenvalueList"}constructor(e,t){super(e,W.tagName),t&&t.forEach(e=>{this.addNode(e)})}addEigenvalue(e){this.addNode(e)}}class K extends F{static{this.tagName="me:pop"}constructor(e,t){super(e,K.tagName,t)}}class Z extends H{static{this.tagName="me:population"}constructor(e,t){super(e,Z.tagName)}addPop(e){this.addNode(e)}}class Q extends H{static{this.tagName="me:populationList"}constructor(e,t){super(e,Q.tagName),t&&t.forEach(e=>{this.addNode(e)})}addPopulation(e){this.addNode(e)}}class J extends F{static{this.tagName="me:firstOrderLoss"}constructor(e,t){super(e,J.tagName,t)}}class ee extends F{static{this.tagName="me:firstOrderRate"}constructor(e,t){super(e,J.tagName,t)}}class et extends H{static{this.tagName="me:rateList"}constructor(e,t,s){if(super(e,es.tagName),this.index=new Map,this.folIndex=new Map,t){let e=0;t.forEach(t=>{this.index.set(J.tagName+e.toString(),this.nodes.size),this.folIndex.set(this.folIndex.size,this.nodes.size),this.addNode(t),e++}),this.fols=t}else this.fols=[];if(this.forIndex=new Map,s){let e=0;s.forEach(t=>{this.index.set(ee.tagName+e.toString(),this.nodes.size),this.forIndex.set(this.forIndex.size,this.nodes.size),this.addNode(t),e++}),this.fors=s}else this.fors=[]}addFirstOrderLoss(e){this.folIndex.set(this.folIndex.size,this.nodes.size),this.index.set(J.tagName+this.folIndex.size.toString(),this.nodes.size),this.fols.push(e),this.addNode(e)}addFirstOrderRate(e){this.forIndex.set(this.forIndex.size,this.nodes.size),this.index.set(ee.tagName+this.forIndex.size.toString(),this.nodes.size),this.fors.push(e),this.addNode(e)}}class es extends H{static{this.tagName="me:analysis"}constructor(e,t,s,i,n){super(e,es.tagName),this.index=new Map,t&&(this.index.set(tM.tagName,this.nodes.size),this.addNode(t)),this.elIndex=new Map,s?(s.forEach(e=>{this.index.set(W.tagName,this.nodes.size),this.elIndex.set(this.elIndex.size,this.nodes.size),this.addNode(e)}),this.els=s):this.els=[],this.plIndex=new Map,i?(i.forEach(e=>{this.index.set(Q.tagName,this.nodes.size),this.plIndex.set(this.plIndex.size,this.nodes.size),this.addNode(e)}),this.pls=i):this.pls=[],this.rlIndex=new Map,n?(n.forEach(e=>{this.index.set(et.tagName,this.nodes.size),this.rlIndex.set(this.rlIndex.size,this.nodes.size),this.addNode(e)}),this.rls=n):this.rls=[]}getDescription(){if(this.index.has(tM.tagName)){let e=this.index.get(tM.tagName);return this.nodes.get(e)}}setDescription(e){if(this.index.has(tM.tagName)){let t=this.index.get(tM.tagName);this.nodes.set(t,e)}else this.index.set(tM.tagName,this.nodes.size),this.addNode(e)}addEigenvalueList(e){this.elIndex.set(this.elIndex.size,this.nodes.size),this.addNode(e),this.els.push(e)}addPopulationList(e){this.plIndex.set(this.plIndex.size,this.nodes.size),this.addNode(e),this.pls.push(e)}addRateList(e){this.rlIndex.set(this.rlIndex.size,this.nodes.size),this.addNode(e),this.rls.push(e)}}class ei extends q{static{this.tagName="me:bathGas"}constructor(e,t){super(e,ei.tagName,t)}}class en extends F{static{this.tagName="me:experimentalRate"}static{this.s_ref1="ref1"}static{this.s_ref2="ref2"}static{this.s_refReaction="refReaction"}static{this.s_error="error"}constructor(e,t){super(e,en.tagName,t)}getRef1(){return this.attributes.get(en.s_ref1)}setRef1(e){this.attributes.set(en.s_ref1,e)}getRef2(){return this.attributes.get(en.s_ref2)}setRef2(e){this.attributes.set(en.s_ref2,e)}getRefReaction(){return this.attributes.get(en.s_refReaction)}setRefReaction(e){this.attributes.set(en.s_refReaction,e)}getError(){return new(a(o))(this.attributes.get(en.s_error))}setError(e){this.attributes.set(en.s_error,e.toString())}}class ea extends F{static{this.tagName="me:experimentalYield"}static{this.s_ref="ref"}static{this.s_error="error"}static{this.s_yieldTime="yieldTime"}constructor(e,t){super(e,ea.tagName,t)}getRef(){return this.attributes.get(ea.s_ref)}setRef(e){this.attributes.set(ea.s_ref,e)}getError(){return new(a(o))(this.attributes.get(ea.s_error))}setError(e){this.attributes.set(ea.s_error,e.toString())}getYieldTime(){return new(a(o))(this.attributes.get(ea.s_yieldTime))}setYieldTime(e){this.attributes.set(ea.s_yieldTime,e.toString())}}class eo extends F{static{this.tagName="me:experimentalEigenvalue"}static{this.s_EigenvalueID="EigenvalueID"}static{this.s_error="error"}constructor(e,t){super(e,eo.tagName,t)}getEigenvalueID(){return this.attributes.get(eo.s_EigenvalueID)}setEigenvalueID(e){this.attributes.set(eo.s_EigenvalueID,e)}getError(){return new(a(o))(this.attributes.get(eo.s_error))}setError(e){this.attributes.set(eo.s_error,e.toString())}}class ed extends F{static{this.tagName="me:excessReactantConc"}static{this.s_percent="percent"}constructor(e,t){super(e,ed.tagName,t)}getPercent(){return this.attributes.get(ed.s_percent)}setPercent(e){this.attributes.set(ed.s_percent,e)}}class el extends H{static{this.tagName="me:PTpair"}static{this.s_P="P"}static{this.s_T="T"}static{this.s_precision="precision"}static{this.s_excessReactantConc="excessReactantConc"}static{this.s_percentExcessReactantConc="percentExcessReactantConc"}constructor(e,t,s,i,n){super(e,el.tagName),this.index=new Map,void 0!=t&&(this.index.set(ei.tagName,this.nodes.size),this.addNode(t)),void 0!=s&&(this.index.set(en.tagName,this.nodes.size),this.addNode(s)),void 0!=i&&(this.index.set(ea.tagName,this.nodes.size),this.addNode(i)),void 0!=n&&(this.index.set(eo.tagName,this.nodes.size),this.addNode(n))}getP(){let e=this.attributes.get(el.s_P);if(void 0!==e)return new(a(o))(e)}setP(e){this.attributes.set(el.s_P,e.toString())}getT(){let e=this.attributes.get(el.s_T);if(void 0!==e)return new(a(o))(e)}setT(e){this.attributes.set(el.s_T,e.toString())}getPrecision(){return this.attributes.get(el.s_precision)}setPrecision(e){this.attributes.set(el.s_precision,e)}getBathGas(){let e=this.index.get(ei.tagName);return void 0!=e?this.nodes.get(e):void 0}setBathGas(e){let t=this.index.get(ei.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(ei.tagName,this.nodes.size),this.addNode(e))}removeBathGas(){let e=this.index.get(ei.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(ei.tagName))}getExperimentalRate(){let e=this.index.get(en.tagName);return void 0!=e?this.nodes.get(e):void 0}setExperimentalRate(e){let t=this.index.get(en.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(en.tagName,this.nodes.size),this.addNode(e))}removeExperimentalRate(){let e=this.index.get(en.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(en.tagName))}getExperimentalYield(){let e=this.index.get(ea.tagName);return void 0!=e?this.nodes.get(e):void 0}setExperimentalYield(e){let t=this.index.get(ea.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(ea.tagName,this.nodes.size),this.addNode(e))}removeExperimentalYield(){let e=this.index.get(ea.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(ea.tagName))}getExperimentalEigenvalue(){let e=this.index.get(eo.tagName);return void 0!=e?this.nodes.get(e):void 0}setExperimentalEigenvalue(e){let t=this.index.get(eo.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eo.tagName,this.nodes.size),this.addNode(e))}removeExperimentalEigenvalue(){let e=this.index.get(eo.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(eo.tagName))}getExcessReactantConc(){return this.attributes.get(el.s_excessReactantConc)}setExcessReactantConc(e){this.attributes.set(el.s_excessReactantConc,e)}getPercentExcessReactantConc(){return this.attributes.get(el.s_percentExcessReactantConc)}setPercentExcessReactantConc(e){this.attributes.set(el.s_percentExcessReactantConc,e)}}class er extends H{static{this.tagName="me:PTs"}constructor(e,t){super(e,er.tagName),void 0!=t?(t.forEach(e=>{this.addNode(e)}),this.ptps=t):this.ptps=[]}get(e){return this.ptps[e]}set(e,t){this.nodes.set(e,t),this.ptps[e]=t}add(e){return this.addNode(e),this.ptps.push(e),this.nodes.size-1}remove(e){this.nodes.delete(e),this.ptps.splice(e,1)}init(e){this.clear(),e.forEach(e=>{this.addNode(e),this.ptps.push(e)})}clear(){this.nodes.clear(),this.ptps=[]}}class eg extends H{static{this.tagName="me:conditions"}constructor(e,t,s,i){super(e,eg.tagName),this.id=t,this.index=new Map,this.bathGasesIndex=new Map,this.bathGases=new Map,void 0!=s&&(this.index.set(ei.tagName,this.nodes.size),s.forEach(e=>{this.bathGasesIndex.set(e.value,this.nodes.size),this.addNode(e),this.bathGases.set(e,s.size)})),void 0!=i&&(this.index.set(er.tagName,this.nodes.size),this.addNode(i))}getBathGases(){return this.bathGases}addBathGas(e){if(this.bathGases.has(e))return this.bathGases.get(e);{let t=this.bathGases.size;return this.bathGases.set(e,t),this.bathGasesIndex.set(e.value,this.nodes.size),this.addNode(e),t}}removeBathGas(e){this.bathGases.has(e)?(this.bathGases.delete(e),this.nodes.delete(this.bathGasesIndex.get(e.value))):console.warn("Conditions.removeBathGas: bathGas not found to remove.")}getPTs(){let e=this.index.get(er.tagName);if(void 0!=e)return this.nodes.get(e)}setPTs(e){let t=this.index.get(er.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(er.tagName,this.nodes.size),this.addNode(e))}}class eh extends O{static{this.tagName="me:calculateRateCoefficientsOnly"}constructor(){super(eh.tagName)}}class em extends O{static{this.tagName="me:printCellDOS"}constructor(){super(em.tagName)}}class ec extends O{static{this.tagName="me:printCellTransitionStateFlux"}constructor(){super(ec.tagName)}}class eu extends O{static{this.tagName="me:printReactionOperatorColumnSums"}constructor(){super(eu.tagName)}}class ep extends O{static{this.tagName="me:printGrainBoltzmann"}constructor(){super(ep.tagName)}}class eN extends O{static{this.tagName="me:printGrainDOS"}constructor(){super(eN.tagName)}}class ef extends O{static{this.tagName="me:printGrainkbE"}constructor(){super(ef.tagName)}}class ex extends O{static{this.tagName="me:printGrainkfE"}constructor(){super(ex.tagName)}}class ev extends O{static{this.tagName="me:printTSsos"}constructor(){super(ev.tagName)}}class eE extends O{static{this.tagName="me:printGrainedSpeciesProfile"}constructor(){super(eE.tagName)}}class ew extends O{static{this.tagName="me:printGrainTransitionStateFlux"}constructor(){super(ew.tagName)}}class ey extends O{static{this.tagName="me:printReactionOperatorSize"}constructor(){super(ey.tagName)}}class eC extends O{static{this.tagName="me:printSpeciesProfile"}constructor(){super(eC.tagName)}}class eb extends O{static{this.tagName="me:printPhenomenologicalEvolution"}constructor(){super(eb.tagName)}}class eM extends O{static{this.tagName="me:printTunnelingCoefficients"}constructor(){super(eM.tagName)}}class eS extends O{static{this.tagName="me:printCrossingCoefficients"}constructor(){super(eS.tagName)}}class eT extends O{static{this.tagName="me:testDOS"}constructor(){super(eT.tagName)}}class eR extends O{static{this.tagName="me:testRateConstant"}constructor(){super(eR.tagName)}}class eI extends O{static{this.tagName="me:useTheSameCellNumberForAllConditions"}constructor(){super(eI.tagName)}}class ez extends O{static{this.tagName="me:ForceMacroDetailedBalance"}constructor(){super(ez.tagName)}}class eD extends O{static{this.tagName="me:hideInactive"}constructor(){super(eD.tagName)}}class e_ extends H{static{this.tagName="me:calcMethod"}static{this.options=["simpleCalc","gridSearch","fitting","marquardt","analyticalRepresentation","ThermodynamicTable","sensitivityAnalysis","me:simpleCalc","me:gridSearch","me:fitting","me:marquardt","me:analyticalRepresentation","me:ThermodynamicTable","me:sensitivityAnalysis"]}constructor(e){super(e,e_.tagName)}}class eL extends e_{static{this.xsi_type="me:simpleCalc"}static{this.xsi_type2="simpleCalc"}constructor(e){super(e)}}class eP extends e_{static{this.xsi_type="me:gridSearch"}static{this.xsi_type2="gridSearch"}constructor(e){super(e)}}class eB extends F{static{this.tagName="me:fittingIterations"}constructor(e,t){super(e,eB.tagName,t)}}class eA extends e_{static{this.xsi_type="me:fitting"}static{this.xsi_type2="fitting"}constructor(e,t){super(e),void 0!=t&&this.addNode(t)}getFittingIterations(){return this.nodes.get(0)}setFittingIterations(e){this.nodes.set(0,e)}removeFittingIterations(){this.nodes.delete(0)}}class ek extends F{static{this.tagName="me:MarquardtIterations"}constructor(e,t){super(e,ek.tagName,t)}}class eG extends F{static{this.tagName="me:MarquardtTolerance"}constructor(e,t){super(e,eG.tagName,t)}}class eO extends F{static{this.tagName="me:MarquardtDerivDelta"}constructor(e,t){super(e,eO.tagName,t)}}class eU extends e_{static{this.xsi_type="me:marquardt"}static{this.xsi_type2="marquardt"}constructor(e,t,s,i){super(e),this.index=new Map,void 0!=t&&(this.index.set(ek.tagName,this.nodes.size),this.addNode(t)),void 0!=s&&(this.index.set(eG.tagName,this.nodes.size),this.addNode(s)),void 0!=i&&(this.index.set(eO.tagName,this.nodes.size),this.addNode(i))}getMarquardtIterations(){let e=this.index.get(ek.tagName);if(void 0!=e)return this.nodes.get(e)}setMarquardtIterations(e){let t=this.index.get(ek.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(ek.tagName,this.nodes.size),this.addNode(e))}removeMarquardtIterations(){let e=this.index.get(ek.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(ek.tagName))}getMarquardtTolerance(){let e=this.index.get(eG.tagName);if(void 0!=e)return this.nodes.get(e)}setMarquardtTolerance(e){let t=this.index.get(eG.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eG.tagName,this.nodes.size),this.addNode(e))}removeMarquardtTolerance(){let e=this.index.get(eG.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(eG.tagName))}getMarquardtDerivDelta(){let e=this.index.get(eO.tagName);if(void 0!=e)return this.nodes.get(e)}setMarquardtDerivDelta(e){let t=this.index.get(eO.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eO.tagName,this.nodes.size),this.addNode(e))}removeMarquardtDerivDelta(){let e=this.index.get(eO.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(eO.tagName))}}class eq extends O{static{this.tagName="me:useTraceWeighting"}constructor(){super(eq.tagName)}}class eF extends q{static{this.tagName="me:format"}static{this.options=["cantera","chemkin"]}static{this.rateUnits="rateUnits"}static{this.rateUnitsOptions=["cm3mole-1s-1","cm3molecule-1s-1"]}constructor(e,t){super(e,eF.tagName,t)}getRateUnits(){return this.attributes.get(eF.rateUnits)}setRateUnits(e){this.attributes.set(eF.rateUnits,e)}removeRateUnits(){this.attributes.delete(eF.rateUnits)}}class eV extends q{static{this.tagName="me:precision"}constructor(e,t){super(e,eV.tagName,t)}}class eH extends F{static{this.tagName="me:chebNumTemp"}constructor(e,t){super(e,eH.tagName,t)}}class ej extends F{static{this.tagName="me:chebNumConc"}constructor(e,t){super(e,ej.tagName,t)}}class eX extends F{static{this.tagName="me:chebMaxTemp"}constructor(e,t){super(e,eX.tagName,t)}}class eY extends F{static{this.tagName="me:chebMinTemp"}constructor(e,t){super(e,eY.tagName,t)}}class e$ extends F{static{this.tagName="me:chebMaxConc"}constructor(e,t){super(e,e$.tagName,t)}getUnits(){return this.attributes.get("units")}setUnits(e){this.attributes.set("units",e)}}class eW extends F{static{this.tagName="me:chebMinConc"}constructor(e,t){super(e,eW.tagName,t)}}class eK extends F{static{this.tagName="me:chebTExSize"}constructor(e,t){super(e,eK.tagName,t)}}class eZ extends F{static{this.tagName="me:chebPExSize"}constructor(e,t){super(e,eZ.tagName,t)}}class eQ extends e_{static{this.xsi_type="me:analyticalRepresentation"}static{this.xsi_type2="analyticalRepresentation"}constructor(e,t,s,i,n,a,o,d,l,r,g){super(e),this.index=new Map,void 0!=t&&(this.index.set(eF.tagName,this.nodes.size),this.addNode(t)),void 0!=s&&(this.index.set(eV.tagName,this.nodes.size),this.addNode(s)),void 0!=i&&(this.index.set(eH.tagName,this.nodes.size),this.addNode(i)),void 0!=n&&(this.index.set(ej.tagName,this.nodes.size),this.addNode(n)),void 0!=a&&(this.index.set(eX.tagName,this.nodes.size),this.addNode(a)),void 0!=o&&(this.index.set(eY.tagName,this.nodes.size),this.addNode(o)),void 0!=d&&(this.index.set(e$.tagName,this.nodes.size),this.addNode(d)),void 0!=l&&(this.index.set(eW.tagName,this.nodes.size),this.addNode(l)),void 0!=r&&(this.index.set(eK.tagName,this.nodes.size),this.addNode(r)),void 0!=g&&(this.index.set(eZ.tagName,this.nodes.size),this.addNode(g))}getFormat(){let e=this.index.get(eF.tagName);if(void 0!=e)return this.nodes.get(e)}setFormat(e){let t=this.index.get(eF.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eF.tagName,this.nodes.size),this.addNode(e))}removeFormat(){let e=this.index.get(eF.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(eF.tagName))}getPrecision(){let e=this.index.get(eV.tagName);if(void 0!=e)return this.nodes.get(e)}setPrecision(e){let t=this.index.get(eV.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eV.tagName,this.nodes.size),this.addNode(e))}removePrecision(){let e=this.index.get(eV.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(eV.tagName))}getChebNumTemp(){let e=this.index.get(eH.tagName);if(void 0!=e)return this.nodes.get(e)}setChebNumTemp(e){let t=this.index.get(eH.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eH.tagName,this.nodes.size),this.addNode(e))}removeChebNumTemp(){let e=this.index.get(eH.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(eH.tagName))}getChebNumConc(){let e=this.index.get(ej.tagName);if(void 0!=e)return this.nodes.get(e)}setChebNumConc(e){let t=this.index.get(ej.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(ej.tagName,this.nodes.size),this.addNode(e))}removeChebNumConc(){let e=this.index.get(ej.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(ej.tagName))}getChebMaxTemp(){let e=this.index.get(eX.tagName);if(void 0!=e)return this.nodes.get(e)}setChebMaxTemp(e){let t=this.index.get(eX.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eX.tagName,this.nodes.size),this.addNode(e))}removeChebMaxTemp(){let e=this.index.get(eX.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(eX.tagName))}getChebMinTemp(){let e=this.index.get(eY.tagName);if(void 0!=e)return this.nodes.get(e)}setChebMinTemp(e){let t=this.index.get(eY.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eY.tagName,this.nodes.size),this.addNode(e))}removeChebMinTemp(){let e=this.index.get(eY.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(eY.tagName))}getChebMaxConc(){let e=this.index.get(e$.tagName);if(void 0!=e)return this.nodes.get(e)}setChebMaxConc(e){let t=this.index.get(e$.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(e$.tagName,this.nodes.size),this.addNode(e))}removeChebMaxConc(){let e=this.index.get(e$.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(e$.tagName))}getChebMinConc(){let e=this.index.get(eW.tagName);if(void 0!=e)return this.nodes.get(e)}setChebMinConc(e){let t=this.index.get(eW.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eW.tagName,this.nodes.size),this.addNode(e))}removeChebMinConc(){let e=this.index.get(eW.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(eW.tagName))}getChebTExSize(){let e=this.index.get(eK.tagName);if(void 0!=e)return this.nodes.get(e)}setChebTExSize(e){let t=this.index.get(eK.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eK.tagName,this.nodes.size),this.addNode(e))}removeChebTExSize(){let e=this.index.get(eK.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(eK.tagName))}getChebPExSize(){let e=this.index.get(eZ.tagName);if(void 0!=e)return this.nodes.get(e)}setChebPExSize(e){let t=this.index.get(eZ.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eZ.tagName,this.nodes.size),this.addNode(e))}removeChebPExSize(){let e=this.index.get(eZ.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(eZ.tagName))}}class eJ extends F{static{this.tagName="me:Tmin"}constructor(e,t){super(e,eJ.tagName,t)}}class e0 extends F{static{this.tagName="me:Tmid"}constructor(e,t){super(e,e0.tagName,t)}}class e1 extends F{static{this.tagName="me:Tmax"}constructor(e,t){super(e,e1.tagName,t)}}class e2 extends F{static{this.tagName="me:Tstep"}constructor(e,t){super(e,eJ.tagName,t)}}class e3 extends e_{static{this.xsi_type="me:ThermodynamicTable"}static{this.xsi_type2="ThermodynamicTable"}constructor(e,t,s,i,n){super(e),this.index=new Map,void 0!=t&&(this.index.set(eJ.tagName,this.nodes.size),this.addNode(t)),void 0!=s&&(this.index.set(e0.tagName,this.nodes.size),this.addNode(s)),void 0!=i&&(this.index.set(e1.tagName,this.nodes.size),this.addNode(i)),void 0!=n&&(this.index.set(e2.tagName,this.nodes.size),this.addNode(n))}getTmin(){let e=this.index.get(eJ.tagName);if(void 0!=e)return this.nodes.get(e)}setTmin(e){let t=this.index.get(eJ.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eJ.tagName,this.nodes.size),this.addNode(e))}removeTmin(){let e=this.index.get(eJ.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(eJ.tagName))}getTmid(){let e=this.index.get(e0.tagName);if(void 0!=e)return this.nodes.get(e)}setTmid(e){let t=this.index.get(e0.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(e0.tagName,this.nodes.size),this.addNode(e))}removeTmid(){let e=this.index.get(e0.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(e0.tagName))}getTmax(){let e=this.index.get(e1.tagName);if(void 0!=e)return this.nodes.get(e)}setTmax(e){let t=this.index.get(e1.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(e1.tagName,this.nodes.size),this.addNode(e))}removeTmax(){let e=this.index.get(e1.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(e1.tagName))}getTstep(){let e=this.index.get(e2.tagName);if(void 0!=e)return this.nodes.get(e)}setTstep(e){let t=this.index.get(e2.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(e2.tagName,this.nodes.size),this.addNode(e))}removeTstep(){let e=this.index.get(e2.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(e2.tagName))}}class e5 extends F{static{this.tagName="me:sensitivityAnalysisSamples"}constructor(e,t){super(e,e5.tagName,t)}}class e4 extends F{static{this.tagName="me:sensitivityAnalysisOrder"}constructor(e,t){super(e,e4.tagName,t)}}class e6 extends F{static{this.tagName="me:sensitivityNumVarRedIters"}constructor(e,t){super(e,e6.tagName,t)}}class e8 extends q{static{this.tagName="me:sensitivityVarRedMethod"}static{this.options=["AdditiveControl","RatioControl"]}constructor(e,t){super(e,e8.tagName,t)}}class e9 extends e_{static{this.xsi_type="me:sensitivityAnalysis"}static{this.xsi_type2="sensitivityAnalysis"}constructor(e,t,s,i,n){super(e),this.index=new Map,void 0!=t&&(this.index.set(e5.tagName,this.nodes.size),this.addNode(t)),void 0!=s&&(this.index.set(e4.tagName,this.nodes.size),this.addNode(s)),void 0!=i&&(this.index.set(e6.tagName,this.nodes.size),this.addNode(i)),void 0!=n&&(this.index.set(e8.tagName,this.nodes.size),this.addNode(n))}getSensitivityAnalysisSamples(){let e=this.index.get(e5.tagName);if(void 0!=e)return this.nodes.get(e)}setSensitivityAnalysisSamples(e){let t=this.index.get(e5.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(e5.tagName,this.nodes.size),this.addNode(e))}removeSensitivityAnalysisSamples(){let e=this.index.get(e5.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(e5.tagName))}getSensitivityAnalysisOrder(){let e=this.index.get(e4.tagName);if(void 0!=e)return this.nodes.get(e)}setSensitivityAnalysisOrder(e){let t=this.index.get(e4.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(e4.tagName,this.nodes.size),this.addNode(e))}removeSensitivityAnalysisOrder(){let e=this.index.get(e4.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(e4.tagName))}getSensitivityNumVarRedIters(){let e=this.index.get(e6.tagName);if(void 0!=e)return this.nodes.get(e)}setSensitivityNumVarRedIters(e){let t=this.index.get(e6.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(e6.tagName,this.nodes.size),this.addNode(e))}removeSensitivityNumVarRedIters(){let e=this.index.get(e6.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(e6.tagName))}getSensitivityVarRedMethod(){let e=this.index.get(e8.tagName);if(void 0!=e)return this.nodes.get(e)}setSensitivityVarRedMethod(e){let t=this.index.get(e8.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(e8.tagName,this.nodes.size),this.addNode(e))}removeSensitivityVarRedMethod(){let e=this.index.get(e8.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(e8.tagName))}}class e7 extends F{static{this.tagName="me:eigenvalues"}constructor(e,t){super(e,e7.tagName,t)}}class te extends F{static{this.tagName="me:shortestTimeOfInterest"}constructor(e,t){super(e,te.tagName,t)}}class tt extends F{static{this.tagName="me:MaximumEvolutionTime"}constructor(e,t){super(e,tt.tagName,t)}}class ts extends F{static{this.tagName="me:automaticallySetMaxEne"}constructor(e,t){super(e,ts.tagName,t)}}class ti extends F{static{this.tagName="me:diagramEnergyOffset"}constructor(e,t){super(e,ti.tagName,t)}}class tn extends U{static{this.tagName="me:testMicroRates"}constructor(e){super(e,tn.tagName),this.tMin=new(a(o))(e.get("Tmin")),this.tMax=new(a(o))(e.get("Tmax")),this.tStep=new(a(o))(e.get("Tstep"))}getTmin(){return this.tMin}setTmin(e){this.tMin=e,this.attributes?.set("Tmin",e.toString())}getTmax(){return this.tMax}setTmax(e){this.tMax=e,this.attributes?.set("Tmax",e.toString())}getTstep(){return this.tStep}setTstep(e){this.tStep=e,this.attributes?.set("Tstep",e.toString())}}class ta extends H{static{this.tagName="me:control"}constructor(e,t){super(e,ta.tagName),this.id=t,this.index=new Map}getCalculateRateCoefficientsOnly(){let e=this.index.get(eh.tagName);if(void 0!=e)return this.nodes.get(e)}setCalculateRateCoefficientsOnly(e){let t=this.index.get(eh.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eh.tagName,this.nodes.size),this.addNode(e))}removeCalculateRateCoefficientsOnly(){let e=this.index.get(eh.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(eh.tagName))}getPrintCellDOS(){let e=this.index.get(em.tagName);if(void 0!=e)return this.nodes.get(e)}setPrintCellDOS(e){let t=this.index.get(em.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(em.tagName,this.nodes.size),this.addNode(e))}removePrintCellDOS(){let e=this.index.get(em.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(em.tagName))}getPrintCellTransitionStateFlux(){let e=this.index.get(ec.tagName);if(void 0!=e)return this.nodes.get(e)}setPrintCellTransitionStateFlux(e){let t=this.index.get(ec.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(ec.tagName,this.nodes.size),this.addNode(e))}removePrintCellTransitionStateFlux(){let e=this.index.get(ec.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(ec.tagName))}getPrintReactionOperatorColumnSums(){let e=this.index.get(eu.tagName);if(void 0!=e)return this.nodes.get(e)}setPrintReactionOperatorColumnSums(e){let t=this.index.get(eu.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eu.tagName,this.nodes.size),this.addNode(e))}removePrintReactionOperatorColumnSums(){let e=this.index.get(eu.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(eu.tagName))}getPrintGrainBoltzmann(){let e=this.index.get(ep.tagName);if(void 0!=e)return this.nodes.get(e)}setPrintGrainBoltzmann(e){let t=this.index.get(ep.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(ep.tagName,this.nodes.size),this.addNode(e))}removePrintGrainBoltzmann(){let e=this.index.get(ep.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(ep.tagName))}getPrintGrainDOS(){let e=this.index.get(eN.tagName);if(void 0!=e)return this.nodes.get(e)}setPrintGrainDOS(e){let t=this.index.get(eN.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eN.tagName,this.nodes.size),this.addNode(e))}removePrintGrainDOS(){let e=this.index.get(eN.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(eN.tagName))}getPrintGrainkbE(){let e=this.index.get(ef.tagName);if(void 0!=e)return this.nodes.get(e)}setPrintGrainkbE(e){let t=this.index.get(ef.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(ef.tagName,this.nodes.size),this.addNode(e))}removePrintGrainkbE(){let e=this.index.get(ef.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(ef.tagName))}getPrintGrainkfE(){let e=this.index.get(ex.tagName);if(void 0!=e)return this.nodes.get(e)}setPrintGrainkfE(e){let t=this.index.get(ex.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(ex.tagName,this.nodes.size),this.addNode(e))}removePrintGrainkfE(){let e=this.index.get(ex.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(ex.tagName))}getPrintTSsos(){let e=this.index.get(ev.tagName);if(void 0!=e)return this.nodes.get(e)}setPrintTSsos(e){let t=this.index.get(ev.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(ev.tagName,this.nodes.size),this.addNode(e))}removePrintTSsos(){let e=this.index.get(ev.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(ev.tagName))}getPrintGrainedSpeciesProfile(){let e=this.index.get(eE.tagName);if(void 0!=e)return this.nodes.get(e)}setPrintGrainedSpeciesProfile(e){let t=this.index.get(eE.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eE.tagName,this.nodes.size),this.addNode(e))}removePrintGrainedSpeciesProfile(){let e=this.index.get(eE.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(eE.tagName))}getPrintGrainTransitionStateFlux(){let e=this.index.get(ew.tagName);if(void 0!=e)return this.nodes.get(e)}setPrintGrainTransitionStateFlux(e){let t=this.index.get(ew.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(ew.tagName,this.nodes.size),this.addNode(e))}removePrintGrainTransitionStateFlux(){let e=this.index.get(ew.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(ew.tagName))}getPrintReactionOperatorSize(){let e=this.index.get(ey.tagName);if(void 0!=e)return this.nodes.get(e)}setPrintReactionOperatorSize(e){let t=this.index.get(ey.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(ey.tagName,this.nodes.size),this.addNode(e))}removePrintReactionOperatorSize(){let e=this.index.get(ey.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(ey.tagName))}getPrintSpeciesProfile(){let e=this.index.get(eC.tagName);if(void 0!=e)return this.nodes.get(e)}setPrintSpeciesProfile(e){let t=this.index.get(eC.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eC.tagName,this.nodes.size),this.addNode(e))}removePrintSpeciesProfile(){let e=this.index.get(eC.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(eC.tagName))}getPrintPhenomenologicalEvolution(){let e=this.index.get(eb.tagName);if(void 0!=e)return this.nodes.get(e)}setPrintPhenomenologicalEvolution(e){let t=this.index.get(eb.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eb.tagName,this.nodes.size),this.addNode(e))}removePrintPhenomenologicalEvolution(){let e=this.index.get(eb.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(eb.tagName))}getPrintTunnelingCoefficients(){let e=this.index.get(eM.tagName);if(void 0!=e)return this.nodes.get(e)}setPrintTunnelingCoefficients(e){let t=this.index.get(eM.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eM.tagName,this.nodes.size),this.addNode(e))}removePrintTunnelingCoefficients(){let e=this.index.get(eM.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(eM.tagName))}getPrintCrossingCoefficients(){let e=this.index.get(eS.tagName);if(void 0!=e)return this.nodes.get(e)}setPrintCrossingCoefficients(e){let t=this.index.get(eS.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eS.tagName,this.nodes.size),this.addNode(e))}removePrintCrossingCoefficients(){let e=this.index.get(eS.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(eS.tagName))}getTestDOS(){let e=this.index.get(eT.tagName);if(void 0!=e)return this.nodes.get(e)}setTestDOS(e){let t=this.index.get(eT.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eT.tagName,this.nodes.size),this.addNode(e))}removeTestDOS(){let e=this.index.get(eT.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(eT.tagName))}getTestRateConstants(){let e=this.index.get(eR.tagName);if(void 0!=e)return this.nodes.get(e)}setTestRateConstants(e){let t=this.index.get(eR.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eR.tagName,this.nodes.size),this.addNode(e))}removeTestRateConstants(){let e=this.index.get(eR.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(eR.tagName))}getUseTheSameCellNumberForAllConditions(){let e=this.index.get(eI.tagName);if(void 0!=e)return this.nodes.get(e)}setUseTheSameCellNumberForAllConditions(e){let t=this.index.get(eI.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eI.tagName,this.nodes.size),this.addNode(e))}removeUseTheSameCellNumberForAllConditions(){let e=this.index.get(eI.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(eI.tagName))}getHideInactive(){let e=this.index.get(eD.tagName);if(void 0!=e)return this.nodes.get(e)}setHideInactive(e){let t=this.index.get(eD.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eD.tagName,this.nodes.size),this.addNode(e))}removeHideInactive(){let e=this.index.get(eD.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(eD.tagName))}getForceMacroDetailedBalance(){let e=this.index.get(ez.tagName);if(void 0!=e)return this.nodes.get(e)}setForceMacroDetailedBalance(e){let t=this.index.get(ez.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(ez.tagName,this.nodes.size),this.addNode(e))}removeForceMacroDetailedBalance(){let e=this.index.get(ez.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(ez.tagName))}getCalcMethod(){let e=this.index.get(e_.tagName);if(void 0!=e)return this.nodes.get(e)}setCalcMethod(e){let t=this.index.get(e_.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(e_.tagName,this.nodes.size),this.addNode(e))}removeCalcMethod(){let e=this.index.get(e_.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(e_.tagName))}getEigenvalues(){let e=this.index.get(e7.tagName);if(void 0!=e)return this.nodes.get(e)}setEigenvalues(e){let t=this.index.get(e7.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(e7.tagName,this.nodes.size),this.addNode(e))}removeEigenvalues(){let e=this.index.get(e7.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(e7.tagName))}getShortestTimeOfInterest(){let e=this.index.get(te.tagName);if(void 0!=e)return this.nodes.get(e)}setShortestTimeOfInterest(e){let t=this.index.get(te.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(te.tagName,this.nodes.size),this.addNode(e))}removeShortestTimeOfInterest(){let e=this.index.get(te.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(te.tagName))}getMaximumEvolutionTime(){let e=this.index.get(tt.tagName);if(void 0!=e)return this.nodes.get(e)}setMaximumEvolutionTime(e){let t=this.index.get(tt.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(tt.tagName,this.nodes.size),this.addNode(e))}removeMaximumEvolutionTime(){let e=this.index.get(tt.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(tt.tagName))}getAutomaticallySetMaxEne(){let e=this.index.get(ts.tagName);if(void 0!=e)return this.nodes.get(e)}setAutomaticallySetMaxEne(e){let t=this.index.get(ts.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(ts.tagName,this.nodes.size),this.addNode(e))}removeAutomaticallySetMaxEne(){let e=this.index.get(ts.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(ts.tagName))}getDiagramEnergyOffset(){let e=this.index.get(ti.tagName);if(void 0!=e)return this.nodes.get(e)}setDiagramEnergyOffset(e){let t=this.index.get(ti.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(ti.tagName,this.nodes.size),this.addNode(e))}removeDiagramEnergyOffset(){let e=this.index.get(ti.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(ti.tagName))}getTestMicroRates(){let e=this.index.get(tn.tagName);if(void 0!=e)return this.nodes.get(e)}setTestMicroRates(e){let t=this.index.get(tn.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(tn.tagName,this.nodes.size),this.addNode(e))}removeTestMicroRates(){let e=this.index.get(tn.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(tn.tagName))}}class to extends H{static{this.tagName="metadata"}constructor(e){super(e,to.tagName)}getLabelText(){let e="";return this.attributes.forEach((t,s)=>{e+=s+": "+t+" "}),e}}class td extends q{static{this.tagName="dc:title"}constructor(e,t){super(e,td.tagName,t)}}class tl extends q{static{this.tagName="dc:source"}constructor(e,t){super(e,tl.tagName,t)}}class tr extends q{static{this.tagName="dc:creator"}constructor(e,t){super(e,tr.tagName,t)}}class tg extends q{static{this.tagName="dc:date"}constructor(e,t){super(e,tg.tagName,t)}}class th extends q{static{this.tagName="dc:contributor"}constructor(e,t){super(e,th.tagName,t)}}class tm extends H{static{this.tagName="metadataList"}constructor(e,t,s,i,n,a){super(e,tm.tagName),this.index=new Map,this.metadataIndex=new Map,t&&(this.index.set(td.tagName,this.nodes.size),this.addNode(t)),s&&(this.index.set(tl.tagName,this.nodes.size),this.addNode(s)),i&&(this.index.set(tr.tagName,this.nodes.size),this.addNode(i)),n&&(this.index.set(tg.tagName,this.nodes.size),this.addNode(n)),a&&(this.index.set(th.tagName,this.nodes.size),this.addNode(a))}getTitle(){if(this.index.has(td.tagName)){let e=this.index.get(td.tagName);return this.nodes.get(e)}}setTitle(e){if(this.index.has(td.tagName)){let t=this.index.get(td.tagName);this.nodes.set(t,e)}else this.index.set(td.tagName,this.nodes.size),this.addNode(e)}getSource(){if(this.index.has(tl.tagName)){let e=this.index.get(tl.tagName);return this.nodes.get(e)}}setSource(e){if(this.index.has(tl.tagName)){let t=this.index.get(tl.tagName);this.nodes.set(t,e)}else this.index.set(tl.tagName,this.nodes.size),this.addNode(e)}getCreator(){if(this.index.has(tr.tagName)){let e=this.index.get(tr.tagName);return this.nodes.get(e)}}setCreator(e){if(this.index.has(tr.tagName)){let t=this.index.get(tr.tagName);this.nodes.set(t,e)}else this.index.set(tr.tagName,this.nodes.size),this.addNode(e)}getDate(){if(this.index.has(tg.tagName)){let e=this.index.get(tg.tagName);return this.nodes.get(e)}}setDate(e){if(this.index.has(tg.tagName)){let t=this.index.get(tg.tagName);this.nodes.set(t,e)}else this.index.set(tg.tagName,this.nodes.size),this.addNode(e)}getContributor(){if(this.index.has(th.tagName)){let e=this.index.get(th.tagName);return this.nodes.get(e)}}setContributor(e){if(this.index.has(th.tagName)){let t=this.index.get(th.tagName);this.nodes.set(t,e)}else this.index.set(th.tagName,this.nodes.size),this.addNode(e)}addMetadata(e){this.metadataIndex.set(this.metadataIndex.size,this.nodes.size),this.addNode(e)}getMetadata(){let e=[];for(let t=0;t<this.metadataIndex.size;t++){let s=this.metadataIndex.get(t);e.push(this.nodes.get(s))}return e}}class tc extends F{static{this.tagName="me:grainSize"}constructor(e,t){super(e,tc.tagName,t)}}class tu extends F{static{this.tagName="me:automaticallySetMaxEne"}constructor(e,t){super(e,tu.tagName,t)}}class tp extends F{static{this.tagName="me:energyAboveTheTopHill"}constructor(e,t){super(e,tp.tagName,t)}}class tN extends F{static{this.tagName="me:maxTemperature"}constructor(e,t){super(e,tN.tagName,t)}}class tf extends H{static{this.tagName="me:modelParameters"}constructor(e,t,s,i,n,a){super(e,tf.tagName),this.id=t,this.index=new Map,void 0!=s&&(this.index.set(tc.tagName,this.nodes.size),this.addNode(s)),void 0!=i&&(this.index.set(tu.tagName,this.nodes.size),this.addNode(i)),void 0!=n&&(this.index.set(tp.tagName,this.nodes.size),this.addNode(n)),void 0!=a&&(this.index.set(tN.tagName,this.nodes.size),this.addNode(a))}getGrainSize(){console.log("getGrainSize");let e=this.index.get(tc.tagName);if(void 0!=e)return this.nodes.get(e);console.log("XgetGrainSize")}setGrainSize(e){console.log("setGrainSize");let t=this.index.get(tc.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(tc.tagName,this.nodes.size),this.addNode(e))}removeGrainSize(){let e=this.index.get(tc.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(tc.tagName))}getAutomaticallySetMaxEne(){let e=this.index.get(tu.tagName);if(e)return this.nodes.get(e)}setAutomaticallySetMaxEne(e){let t=this.index.get(tu.tagName);t?this.nodes.set(t,e):(this.index.set(tu.tagName,this.nodes.size),this.addNode(e))}removeAutomaticallySetMaxEne(){let e=this.index.get(tu.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(tu.tagName))}getEnergyAboveTheTopHill(){let e=this.index.get(tp.tagName);if(e)return this.nodes.get(e)}setEnergyAboveTheTopHill(e){let t=this.index.get(tp.tagName);t?this.nodes.set(t,e):(this.index.set(tp.tagName,this.nodes.size),this.addNode(e))}removeEnergyAboveTheTopHill(){let e=this.index.get(tp.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(tp.tagName))}getMaxTemperature(){let e=this.index.get(tN.tagName);if(e)return this.nodes.get(e)}setMaxTemperature(e){let t=this.index.get(tN.tagName);t?this.nodes.set(t,e):(this.index.set(tN.tagName,this.nodes.size),this.addNode(e))}removeMaxTemperature(){let e=this.index.get(tN.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(tN.tagName))}}class tx extends q{static{this.tagName="me:title"}constructor(e,t){super(e,tx.tagName,t)}}class tv extends H{static{this.tagName="moleculeList"}constructor(e,t){super(e,tv.tagName),this.index=new Map,void 0!=t&&t.forEach(e=>{this.nodes.set(this.nodes.size,e),this.index.set(e.getID(),this.nodes.size-1)})}getMolecule(e){let t=this.index.get(e);if(void 0!=t)return this.nodes.get(t)}removeMolecule(e){let t=this.index.get(e);void 0!=t&&(this.nodes.delete(t),this.index.delete(e))}addMolecule(e){let t=e.getID(),s=this.index.get(t);void 0!==s?(this.nodes.set(s,e),console.log("Replaced molecule with id "+t)):(this.nodes.set(this.nodes.size,e),this.index.set(t,this.nodes.size-1))}}class tE extends H{static{this.tagName="reactionList"}constructor(e,t){super(e,tE.tagName),this.index=new Map,void 0!=t&&t.forEach(e=>{this.nodes.set(this.nodes.size,e),this.index.set(e.id,this.nodes.size-1)})}getReaction(e){let t=this.index.get(e);if(void 0!=t)return this.nodes.get(t)}removeReaction(e){let t=this.index.get(e);void 0!=t&&(this.nodes.delete(t),this.index.delete(e))}addReaction(e){let t=this.index.get(e.id);void 0!==t?(this.nodes.set(t,e),console.log("Replaced reaction with id "+e.id)):(this.nodes.set(this.nodes.size,e),this.index.set(e.id,this.nodes.size-1))}getNextReactionID(){let e=1;return Array.from(this.index.keys()).sort((e,t)=>{let s=e.match(/\d+/),i=t.match(/\d+/);return(s?parseInt(s[0]):0)-(i?parseInt(i[0]):0)}).forEach(t=>{if(parseInt(t.match(/\d+/)[0])>e)return e;e++}),e}}class tw extends H{static{this.tagName="conditionsList"}constructor(e,t){super(e,tC.tagName),this.index=new Map,void 0!=t&&t.forEach(e=>{this.nodes.set(this.nodes.size,e),this.index.set(e.id,this.nodes.size-1)})}getConditions(e){let t=this.index.get(e);if(void 0!=t)return this.nodes.get(t)}removeConditions(e){let t=this.index.get(e);void 0!=t&&(this.nodes.delete(t),this.index.delete(e))}addConditions(e){let t=this.index.get(e.id);void 0!=t?(this.nodes.set(t,e),console.log("Replaced conditions with id "+e.id)):(this.nodes.set(this.nodes.size,e),this.index.set(e.id,this.nodes.size-1))}}class ty extends H{static{this.tagName="modelParametersList"}constructor(e,t){super(e,ty.tagName),this.index=new Map,void 0!=t&&t.forEach(e=>{this.nodes.set(this.nodes.size,e),this.index.set(e.id,this.nodes.size-1)})}getModelParameters(e){let t=this.index.get(e);if(void 0!=t)return this.nodes.get(t)}removeModelParameters(e){let t=this.index.get(e);void 0!=t&&(this.nodes.delete(t),this.index.delete(e))}addModelParameters(e){let t=this.index.get(e.id);void 0!=t?(this.nodes.set(t,e),console.log("Replaced modelParameters with id "+e.id)):(this.nodes.set(this.nodes.size,e),this.index.set(e.id,this.nodes.size-1))}}class tC extends H{static{this.tagName="controlList"}constructor(e,t){super(e,tC.tagName),this.index=new Map,void 0!=t&&t.forEach(e=>{this.nodes.set(this.nodes.size,e),this.index.set(e.id,this.nodes.size-1)})}getControl(e){let t=this.index.get(e);if(void 0!=t)return this.nodes.get(t)}removeControl(e){let t=this.index.get(e);void 0!=t&&(this.nodes.delete(t),this.index.delete(e))}addControl(e){let t=this.index.get(e.id);void 0!==t?(this.nodes.set(t,e),console.log("Replaced control with id "+e.id)):(this.nodes.set(this.nodes.size,e),this.index.set(e.id,this.nodes.size-1))}}class tb extends H{static{this.tagName="me:mesmer"}static{this.precisionOptions=["d","dd","qd","double","double-double","quad-double"]}static{this.pressureUnits=["Torr","PPCC","atm","mbar","psi","mols/cc"]}static{this.energyUnits=["kJ/mol","kJ per mol","cm-1","wavenumber","kcal/mol","kcal per mol","Hartree","au"]}static{this.frequencyUnits=["cm-1","GHz","amuA^2"]}static{this.massUnits=["amu","g/mol","kg/mol"]}static{this.temperatureUnits=["K"]}static{this.timeUnits=["fs","ps","ns","s"]}static{this.lengthUnits=["Å","nm","um","mm","cm","m"]}static{this.hessianUnits=["kJ/mol/Å2","kcal/mol/Å2","Hartree/Å2"]}static{this.EinsteinAUnits=["s-1"]}static{this.EinsteinBUnits=["m3/J/s2"]}static{this.elementTypes=["H","He","Li","Be","B","C","N","O","F","Ne","Na","Mg","Al","Si","P","S","Cl","Ar","K","Ca","Sc","Ti","V","Cr","Mn","Fe","Co","Ni","Cu","Zn","Ga","Ge","As","Se","Br","Kr","Rb","Sr","Y","Zr","Nb","Mo","Tc","Ru","Rh","Pd","Ag","Cd","In","Sn","Sb","Te","I","Xe","Cs","Ba","La","Ce","Pr","Nd","Pm","Sm","Eu","Gd","Tb","Dy","Ho","Er","Tm","Yb","Lu","Hf","Ta","W","Re","Os","Ir","Pt","Au","Hg","Tl","Pb","Bi","Po","At","Rn","Fr","Ra","Ac","Th","Pa","U","Np","Pu","Am","Cm","Bk","Cf","Es","Fm","Md","No","Lr","Rf","Db","Sg","Bh","Hs","Mt","Ds","Rg","Cn","Nh","Fl","Mc","Lv","Ts","Og"]}static{this.atomMasses=new Map}static{this.atomRadii=new Map}static{this.atomColors=new Map}static{this.bondColors=new Map}static{this.header=`<?xml version="1.0" encoding="utf-8" ?>
<?xml-stylesheet type='text/xsl' href='../../mesmer2.xsl' media='other'?>
<?xml-stylesheet type='text/xsl' href='../../mesmer1.xsl' media='screen'?>`}constructor(e,t,s,i,n,a,o,d,l){super(e,tb.tagName);let r=["H","O","C","N","Cl","S","Ph","Fe"],g=["White","Red","DarkGrey","Blue","Green","Yellow","Orange","Brown"];for(let e=0;e<r.length;e++)tb.atomColors.set(r[e],g[e]);let h=[1.00784,15.999,12.011,14.007,35.453,32.06,77.845,55.845];for(let e=0;e<r.length;e++)tb.atomMasses.set(r[e],h[e]);let m=[37,66,67,56,99,102,110,124];for(let e=0;e<r.length;e++)tb.atomRadii.set(r[e],m[e]);let c=[1,1.5,2,2.5,3,3.5,4,4.5,5,5.5,6];g=["Black","Red","DarkRed","Blue","DarkBlue","Green","DarkGreen","Yellow","DarkYellow","Orange","DarkOrange"];for(let e=0;e<c.length;e++)tb.bondColors.set(c[e],g[e]);this.index=new Map,void 0!=t&&(this.index.set(tx.tagName,this.nodes.size),this.addNode(t)),void 0!=s&&(this.index.set(tv.tagName,this.nodes.size),this.addNode(s)),void 0!=i&&(this.index.set(tE.tagName,this.nodes.size),this.addNode(i)),this.conditionsIndex=new Map,void 0!=n&&n.forEach(e=>{this.index.set(eg.tagName+e.id,this.nodes.size),this.conditionsIndex.set(e.id,this.nodes.size),this.addNode(e)}),this.modelParametersIndex=new Map,void 0!=a&&a.forEach(e=>{this.index.set(tf.tagName+e.id,this.nodes.size),this.modelParametersIndex.set(e.id,this.nodes.size),this.addNode(e)}),this.controlIndex=new Map,void 0!=o&&o.forEach(e=>{this.index.set(ta.tagName+e.id,this.nodes.size),this.controlIndex.set(e.id,this.nodes.size),this.addNode(e)}),void 0!=d&&(this.index.set(tm.tagName,this.nodes.size),this.addNode(d)),void 0!=l&&(this.index.set(es.tagName,this.nodes.size),this.addNode(l))}getTitle(){let e=this.index.get(tx.tagName);if(void 0!=e)return this.nodes.get(e)}setTitle(e){let t=this.index.get(tx.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(tx.tagName,this.nodes.size),this.addNode(e))}getMoleculeList(){let e=this.index.get(tv.tagName);if(void 0!=e)return this.nodes.get(e);{let e=new tv(new Map);return this.index.set(tv.tagName,this.nodes.size),this.addNode(e),e}}setMoleculeList(e){let t=this.index.get(tv.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(tv.tagName,this.nodes.size),this.addNode(e))}getReactionList(){let e=this.index.get(tE.tagName);if(void 0!=e)return this.nodes.get(e);{let e=new tE(new Map);return this.index.set(tE.tagName,this.nodes.size),this.addNode(e),e}}setReactionList(e){let t=this.index.get(tE.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(tE.tagName,this.nodes.size),this.addNode(e))}addConditions(e){let t=eg.tagName+e.id,s=this.index.get(t);void 0!=s?this.nodes.set(s,e):(this.index.set(t,this.nodes.size),this.conditionsIndex.set(e.id,this.nodes.size),this.addNode(e))}getConditions(e){let t=this.conditionsIndex.get(e);if(void 0!=t)return this.nodes.get(t)}getConditionss(){let e=[];return this.conditionsIndex.forEach((t,s)=>{e.push(this.nodes.get(t))}),e}setConditionss(e){e.forEach(e=>{this.addConditions(e)})}getNextConditionsID(){let e=0;return Array.from(this.conditionsIndex.keys()).sort((e,t)=>e-t).forEach(t=>{if(t>e)return e;e++}),e}removeConditions(e){let t=this.conditionsIndex.get(e);void 0!=t&&(this.nodes.delete(t),this.index.delete(eg.tagName+e),this.conditionsIndex.delete(e))}addModelParameters(e){let t=tf.tagName+e.id,s=this.index.get(t);void 0!=s?this.nodes.set(s,e):(this.index.set(t,this.nodes.size),this.modelParametersIndex.set(e.id,this.nodes.size),this.addNode(e))}getModelParameters(e){let t=this.modelParametersIndex.get(e);if(void 0!=t)return this.nodes.get(t)}getModelParameterss(){let e=[];return this.modelParametersIndex.forEach((t,s)=>{e.push(this.nodes.get(t))}),e}setModelParameterss(e){e.forEach(e=>{this.addModelParameters(e)})}getNextModelParametersID(){let e=0;return Array.from(this.modelParametersIndex.keys()).sort((e,t)=>e-t).forEach(t=>{if(t>e)return e;e++}),e}removeModelParameters(e){let t=this.modelParametersIndex.get(e);void 0!=t&&(this.nodes.delete(t),this.index.delete(tf.tagName+e),this.modelParametersIndex.delete(e))}addControl(e){let t=ta.tagName+e.id,s=this.index.get(t);void 0!=s?this.nodes.set(s,e):(this.index.set(t,this.nodes.size),this.controlIndex.set(e.id,this.nodes.size),this.addNode(e))}getControl(e){let t=this.controlIndex.get(e);if(void 0!=t)return this.nodes.get(t)}getControls(){let e=[];return this.controlIndex.forEach((t,s)=>{e.push(this.nodes.get(t))}),e}setControls(e){e.forEach(e=>{this.addControl(e)})}getNextControlID(){let e=0;return Array.from(this.controlIndex.keys()).sort((e,t)=>e-t).forEach(t=>{if(t>e)return e;e++}),e}removeControl(e){let t=this.controlIndex.get(e);void 0!=t&&(this.nodes.delete(t),this.index.delete(ta.tagName+e),this.controlIndex.delete(e))}getMetadataList(){let e=this.index.get(tm.tagName);if(void 0!=e)return this.nodes.get(e)}setMetadataList(e){let t=this.index.get(tm.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(tm.tagName,this.nodes.size),this.addNode(e))}getAnalysis(){let e=this.index.get(es.tagName);if(void 0!=e)return this.nodes.get(e)}setAnalysis(e){let t=this.index.get(es.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(es.tagName,this.nodes.size),this.addNode(e))}}class tM extends q{static{this.tagName="me:description"}constructor(e,t){super(e,tM.tagName,t)}}class tS extends F{static{this.tagName="me:T"}constructor(e,t){super(e,tS.tagName,t)}}class tT extends F{static{this.s_units="units"}static{this.s_lower="lower"}static{this.s_upper="upper"}static{this.s_stepsize="stepsize"}constructor(e,t,s){super(e,t,s)}setValue(e){this.value=e}getUnits(){return this.attributes.get(tT.s_units)}setUnits(e){this.attributes.set(tT.s_units,e)}removeUnits(){this.attributes.delete(tT.s_units)}getLower(){let e=this.attributes.get(tT.s_lower);if(void 0!=e)return new o.Big(e)}setLower(e){this.attributes.set(tT.s_lower,e.toString())}removeLower(){this.attributes.delete(tT.s_lower)}getUpper(){let e=this.attributes.get(tT.s_upper);if(void 0!=e)return new o.Big(e)}setUpper(e){this.attributes.set(tT.s_upper,e.toString())}removeUpper(){this.attributes.delete(tT.s_upper)}getStepsize(){let e=this.attributes.get(tT.s_stepsize);if(void 0!=e)return new o.Big(e)}setStepsize(e){this.attributes.set(tT.s_stepsize,e.toString())}removeStepsize(){this.attributes.delete(tT.s_stepsize)}}class tR extends U{static{this.tagName="atom"}static{this.s_id="id"}static{this.s_elementType="elementType"}static{this.s_x3="x3"}static{this.s_y3="y3"}static{this.s_z3="z3"}constructor(e,t){super(e,tR.tagName),this.molecule=t}hasCoordinates(){return void 0!=this.attributes.get(tR.s_x3)&&void 0!=this.attributes.get(tR.s_y3)&&void 0!=this.attributes.get(tR.s_z3)}getID(){return this.attributes.get(tR.s_id)}setID(e){this.attributes.set(tR.s_id,e)}getElementType(){return this.attributes.get(tR.s_elementType)}setElementType(e){this.attributes.set(tR.s_elementType,e)}getX3(){let e=this.attributes.get(tR.s_x3);if(void 0!=e)return new o.Big(e)}setX3(e){this.attributes.set(tR.s_x3,e.toString())}removeX3(){this.attributes.delete(tR.s_x3)}getY3(){let e=this.attributes.get(tR.s_y3);if(void 0!=e)return new o.Big(e)}setY3(e){this.attributes.set(tR.s_y3,e.toString())}removeY3(){this.attributes.delete(tR.s_y3)}getZ3(){let e=this.attributes.get(tR.s_z3);if(void 0!=e)return new o.Big(e)}setZ3(e){this.attributes.set("z3",e.toString())}removeZ3(){this.attributes.delete("z3")}}class tI extends H{static{this.tagName="atomArray"}constructor(e,t){super(e,tI.tagName),this.index=new Map,this.reverseIndex=new Map,void 0==t?this.atoms=new Map:(this.atoms=t,t.forEach((e,t)=>{this.index.set(t,this.nodes.size),this.reverseIndex.set(this.nodes.size,t),this.nodes.set(this.nodes.size,e)}))}getAtom(e){return this.atoms.get(e)}addAtom(e,t){if(void 0==t){let s=e.getID();if(void 0==s)s=this.getNextAtomID(),e.setID(s);else if(this.atoms.has(s)){let t=this.getNextAtomID();console.warn("Atom with id "+s+" already exists, adding with id "+t),e.setID(t),s=t}t=s}return this.index.set(t,this.nodes.size),this.reverseIndex.set(this.nodes.size,t),this.nodes.set(this.nodes.size,e),this.atoms.set(t,e),t}getNextAtomID(){let e=1,t="a1";if(this.atoms.has(t))for(;this.atoms.has(t);)e++,t="a"+e.toString();return t}removeAtom(e){let t=this.index.get(e);if(void 0==t)throw Error("Atom with id "+e+" does not exist!");console.log("Removing atom with id "+e),this.atoms.delete(e),this.deleteNodeAndReindex(t,e)}deleteNodeAndReindex(e,t){this.nodes.delete(e),this.index.delete(t),this.reverseIndex.delete(e);let s=new Map,i=new Map,n=new Map;this.index.forEach((t,a)=>{t>e?(s.set(t-1,this.nodes.get(t)),i.set(a,t-1),n.set(t-1,a)):(s.set(t,this.nodes.get(t)),i.set(a,t),n.set(t,a))}),this.nodes=s,this.index=i,this.reverseIndex=n}}class tz extends U{static{this.tagName="bond"}static{this.s_atomRefs2="atomRefs2"}static{this.s_id="id"}static{this.s_order="order"}static{this.orderOptions=["1","1.5","2","2.5","3","3.5","4","4.5","5","5.5","6"]}constructor(e,t){super(e,tz.tagName),this.molecule=t}getAtomRefs2(){let e=this.attributes.get(tz.s_atomRefs2);return(e?.split(" "),void 0==e)?"a1 a1":e}setAtomRefs2(e){this.attributes.set(tz.s_atomRefs2,e)}getID(){return this.attributes.get(tz.s_id)}setID(e){this.attributes.set(tz.s_id,e)}getOrder(){let e=this.attributes.get(tz.s_order);if(void 0!=e)return parseFloat(e)}setOrder(e){this.attributes.set(tz.s_order,e.toString())}}class tD extends H{static{this.tagName="bondArray"}constructor(e,t){super(e,tD.tagName),this.index=new Map,this.reverseIndex=new Map,void 0==t?this.bonds=new Map:(this.bonds=t,t.forEach((e,t)=>{this.index.set(t,this.nodes.size),this.reverseIndex.set(this.nodes.size,t),this.nodes.set(this.nodes.size,e)}))}getBondIds(){return Array.from(this.bonds.keys())}getBond(e){return this.bonds.get(e)}addBond(e,t){if(void 0==t){let s=e.getID();if(void 0==s)s=this.getNextBondID(),e.setID(s);else if(this.bonds.has(s)){let t=this.getNextBondID();console.log("Bond with id "+s+" already exists, adding with id "+t),e.setID(t),s=t}t=s}return this.index.set(t,this.nodes.size),this.reverseIndex.set(this.nodes.size,t),this.nodes.set(this.nodes.size,e),this.bonds.set(t,e),t}getNextBondID(){let e=1,t="b1";for(;this.bonds.has(t);)e++,t="b"+e.toString();return t}removeBond(e){let t=this.index.get(e);if(void 0==t)throw Error("Bond with id "+e+" does not exist!");console.log("Removing bond with id "+e),this.bonds.delete(e),this.deleteNodeAndReindex(t,e)}deleteNodeAndReindex(e,t){this.nodes.delete(e),this.index.delete(t),this.reverseIndex.delete(e);let s=new Map,i=new Map,n=new Map;this.index.forEach((t,a)=>{t>e?(s.set(t-1,this.nodes.get(t)),i.set(a,t-1),n.set(t-1,a)):(s.set(t,this.nodes.get(t)),i.set(a,t),n.set(t,a))}),this.nodes=s,this.index=i,this.reverseIndex=n}}class t_ extends q{static{this.tagName="scalar"}constructor(e,t){super(e,t_.tagName,t)}getValue(){return this.value}setValue(e){this.value=e}}class tL extends F{static{this.tagName="scalar"}static{this.s_units="units"}static{this.propertyDictRefs=new Set(["me:ZPE","me:Hf0","me:HfAT0","me:Hf298","me:symmetryNumber","me:TSOpticalSymmetryNumber","me:frequenciesScaleFactor","me:MW","me:spinMultiplicity","me:epsilon","me:sigma"])}constructor(e,t){super(e,tL.tagName,t)}updateUnits(e){if(e){let t=this.attributes.get(tL.s_units);void 0!=t&&t!=e&&this.attributes.set(tL.s_units,e)}}getValue(){return this.value}setValue(e){this.value=e}}class tP extends V{static{this.tagName="array"}static{this.s_units="units"}static{this.propertyDictRefs=new Set(["me:rotConsts","me:vibFreqs","me:EinsteinAij","me:EinsteinBij"])}constructor(e,t,s){super(e,tP.tagName,t,s)}updateUnits(e){if(e){let t=this.attributes.get(tP.s_units);void 0!=t&&t!=e&&(this.attributes.set(tP.s_units,e),console.log("Units changed from "+t+" to "+e))}}setSize(e){let t=[];for(let s=0;s<e;s++)t.push(new o.Big(0));this.setValues(t)}}class tB extends V{static{this.tagName="matrix"}static{this.s_rows="rows"}static{this.s_matrixType="matrixType"}static{this.s_units="units"}static{this.propertyDictRefs=new Set(["me:hessian"])}constructor(e,t,s){super(e,tP.tagName,t,s)}updateUnits(e){if(e){let t=this.attributes.get(tP.s_units);void 0!=t&&t!=e&&(this.attributes.set(tP.s_units,e),console.log("Units changed from "+t+" to "+e))}}setSize(e,t){let s=[];for(let i=0;i<e;i++)for(let e=0;e<t;e++)s.push(new o.Big(0));this.setValues(s)}}class tA extends H{static{this.tagName="property"}static{this.s_dictRef="dictRef"}constructor(e,t){super(e,tA.tagName);let s=e.get(tA.s_dictRef);if(void 0==s){let t=e.get("title");if(void 0==t)throw Error(tA.s_dictRef+" and title are undefined!");if("MW"==t)s="me:MW";else if("Hf298"==t)s="me:Hf298";else if("Hf0"==t)s="me:Hf0";else if("program"==t)s="program";else if("basis"==t)s="basis";else if("method"==t)s="method";else if("File Format"==t)s="method";else throw Error("Title "+t+"not recognised!")}this.dictRef=s,t&&this.nodes.set(0,t)}getProperty(){return this.nodes.get(0)}setProperty(e){this.nodes.set(0,e)}}class tk extends tA{static{this.dictRef="me:ZPE"}constructor(e,t){super(e,t)}setUnits(e){this.getProperty().updateUnits(e)}}class tG extends tA{static{this.dictRef="me:Hf0"}constructor(e,t){super(e,t)}setUnits(e){this.getProperty().updateUnits(e)}}class tO extends tA{static{this.dictRef="me:HfAT0"}constructor(e,t){super(e,t)}setUnits(e){this.getProperty().updateUnits(e)}}class tU extends tA{static{this.dictRef="me:Hf298"}constructor(e,t){super(e,t)}setUnits(e){this.getProperty().updateUnits(e)}}class tq extends tA{static{this.dictRef="me:rotConsts"}static{this.unitOptions=["cm-1","GHz","amuA^2"]}constructor(e,t){super(e,t)}}class tF extends tA{static{this.dictRef="me:symmetryNumber"}constructor(e,t){super(e,t)}}class tV extends tA{static{this.dictRef="me:TSOpticalSymmetryNumber"}constructor(e,t){super(e,t)}}class tH extends tA{static{this.dictRef="me:frequenciesScaleFactor"}constructor(e,t){super(e,t)}}class tj extends tA{static{this.dictRef="me:vibFreqs"}constructor(e,t){super(e,t)}}class tX extends tA{static{this.dictRef="me:MW"}constructor(e,t){super(e,t)}}class tY extends tA{static{this.dictRef="me:spinMultiplicity"}constructor(e,t){super(e,t)}}class t$ extends tA{static{this.dictRef="me:epsilon"}constructor(e,t){super(e,t)}}class tW extends tA{static{this.dictRef="me:sigma"}constructor(e,t){super(e,t)}}class tK extends tA{static{this.dictRef="me:hessian"}static{this.unitOptions=["kJ/mol/Å2","kcal/mol/Å2","Hartree/Å2"]}constructor(e,t){super(e,t)}}class tZ extends tA{static{this.dictRef="me:EinsteinAij"}constructor(e,t){super(e,t)}}class tQ extends tA{static{this.dictRef="me:EinsteinBij"}constructor(e,t){super(e,t)}}class tJ extends tA{static{this.dictRef="me:imFreqs"}constructor(e,t){super(e,t)}}class t0 extends H{static{this.tagName="propertyList"}constructor(e,t){super(e,t0.tagName),this.index=new Map,void 0!=t&&t.forEach(e=>{this.nodes.set(this.nodes.size,e),this.index.set(e.dictRef,this.nodes.size-1)})}getProperty(e){let t=this.index.get(e);return void 0!=t?this.nodes.get(t):void 0}setProperty(e){let t=this.index.get(e.dictRef);void 0==t?(console.log("Property "+e.dictRef+" does not exist, adding..."),this.nodes.set(this.nodes.size,e),this.index.set(e.dictRef,this.nodes.size-1)):(console.log("Property "+e.dictRef+" already exists, updating..."),this.nodes.set(t,e))}removeProperty(e){let t=this.index.get(e);if(void 0!=t){this.nodes.delete(t),this.index.delete(e);let s=new Map;this.index.forEach((e,i)=>{e>t?s.set(i,e-1):s.set(i,e)}),this.index=s}}}class t1 extends tT{static{this.tagName="me:deltaEDown"}static{this.s_bathGas="bathGas"}constructor(e,t){super(e,t1.tagName,t)}getBathGas(){return this.attributes.get(t1.s_bathGas)}setBathGas(e){this.attributes.set(t1.s_bathGas,e)}}class t2 extends t1{static{this.tagName="me:deltaEDown2"}constructor(e,t){super(e,t)}}class t3 extends tT{static{this.tagName="me:deltaEDownTExponent"}static{this.s_referenceTemperature="referenceTemperature"}constructor(e,t){super(e,t3.tagName,t)}getReferenceTemperature(){return parseFloat(d(this.attributes,t3.s_referenceTemperature))}setReferenceTemperature(e){this.attributes.set(t3.s_referenceTemperature,e.toString())}}class t5 extends tT{static{this.tagName="me:deltaEDownLinEne"}constructor(e,t){super(e,t5.tagName,t)}}class t4 extends H{static{this.tagName="me:energyTransferModel"}constructor(e,t){super(e,t4.tagName),void 0!=t&&t.forEach(e=>{this.nodes.set(this.nodes.size,e)})}getDeltaEDowns(){let e=[];return this.nodes.forEach(t=>{t instanceof t1&&e.push(t)}),e}setDeltaEDowns(e){this.nodes.clear(),e.forEach(e=>{this.nodes.set(this.nodes.size,e)})}getDeltaEDown(e){if(e<0||e>=this.nodes.size)throw Error("index out of range");return this.nodes.get(e)}setDeltaEDown(e,t){this.nodes.set(e,t)}addDeltaEDown(e){return this.nodes.set(this.nodes.size,e),this.nodes.size-1}}class t6 extends U{static{this.tagName="me:DOSCMethod"}static{this.xsi_typeOptions=["ClassicalRotors","QMRotors","me:ClassicalRotors","me:QMRotors"]}static{this.s_xsi_type="xsi:type"}constructor(e){if(super(e,t6.tagName),void 0==e.get(t6.s_xsi_type)){let t=e.get("name");if(void 0==t)throw Error("Neither xsi:type or name are defined.");e.set(t6.s_xsi_type,t)}}getXsiType(){return this.attributes.get(t6.s_xsi_type)}setXsiType(e){this.attributes.set(t6.s_xsi_type,e)}}class t8 extends q{static{this.tagName="me:bondRef"}constructor(e,t){super(e,t8.tagName,t)}}class t9 extends U{static{this.tagName="me:PotentialPoint"}static{this.s_angle="angle"}static{this.s_potential="potential"}constructor(e){super(e,t9.tagName)}getAngle(){return this.attributes.get(t9.s_angle)}setAngle(e){this.attributes.set(t9.s_angle,e.toString())}getPotential(){return this.attributes.get(t9.s_potential)}setPotential(e){this.attributes.set(t9.s_potential,e.toString())}}class t7 extends U{static{this.tagName="me:DistributionCalcMethod"}static{this.s_default="default"}static{this.s_name="name"}constructor(e){super(e,t7.tagName)}getDefault(){return this.attributes.get(t7.s_default)}getName(){return this.attributes.get(t7.s_name)}}class se extends U{static{this.tagName="me:thermoValue"}static{this.s_T="T"}static{this.s_H="H"}static{this.s_S="S"}static{this.s_G="G"}static{this.s_Cp="Cp"}constructor(e){super(e,tR.tagName)}getT(){return new o.Big(this.attributes.get(se.s_T))}getH(){return new o.Big(this.attributes.get(se.s_H))}getS(){return new o.Big(this.attributes.get(se.s_S))}getG(){return new o.Big(this.attributes.get(se.s_G))}getCp(){return new o.Big(this.attributes.get(se.s_Cp))}toStringArray(){return[this.getT().toString(),this.getH().toString(),this.getS().toString(),this.getG().toString(),this.getCp().toString()]}toCSV(){return this.toStringArray().join(",")}}class st extends H{static{this.tagName="me:thermoTable"}static{this.s_unitsT="unitsT"}static{this.s_unitsH="unitsH"}static{this.s_unitsS="unitsS"}static{this.s_unitsG="unitsG"}static{this.s_unitsCp="unitsCp"}constructor(e,t){super(e,st.tagName),void 0!=t?(t.forEach(e=>{this.addNode(e)}),this.tvs=t):this.tvs=[]}get(e){return this.tvs[e]}set(e,t){this.nodes.set(e,t),this.tvs[e]=t}add(e){return this.addNode(e),this.tvs.push(e),this.nodes.size-1}remove(e){this.nodes.delete(e),this.tvs.splice(e,1)}init(e){this.clear(),e.forEach(e=>{this.addNode(e),this.tvs.push(e)})}clear(){this.nodes.clear(),this.tvs=[]}getHeader(){return["T ("+this.attributes.get(st.s_unitsT)+")","H(T)-H(0) ("+this.attributes.get(st.s_unitsH)+")","S(T) ("+this.attributes.get(st.s_unitsS)+")","G(T) ("+this.attributes.get(st.s_unitsG)+")","Cp(T) ("+this.attributes.get(st.s_unitsCp)+")"]}toCSV(){let e=this.getHeader().join(",")+"\n";return this.tvs.forEach(t=>{e+=t.toCSV()+"\n"}),e}}class ss extends H{static{this.tagName="me:HinderedRotorPotential"}static{this.formats=new Set(["numerical","analytical"])}static{this.s_format="format"}static{this.s_units="units"}static{this.s_expansionSize="expansionSize"}static{this.s_useSineTerms="useSineTerms"}constructor(e,t){super(e,ss.tagName);let s=e.get(ss.s_format);if(void 0==s)throw Error(ss.s_format+" is undefined!");this.format=s;let i=e.get(ss.s_units);if(void 0==i)throw Error(ss.s_units+" is undefined!");this.units=i,void 0!=t&&t.forEach(e=>{this.nodes.set(this.nodes.size,e)}),void 0==e.get(ss.s_useSineTerms)?this.useSineTerms=!1:this.useSineTerms=!0}getFormat(){return this.format}setFormat(e){this.format=e,this.attributes.set(ss.s_format,e)}getUnits(){return this.units}setUnits(e){this.units=e,this.attributes.set(ss.s_units,e)}getExpansionSize(){return this.attributes.get(ss.s_expansionSize)}setExpansionSize(e){console.log(e.toString()),this.attributes.set(ss.s_expansionSize,e.toString())}getUseSineTerms(){return this.useSineTerms}setUseSineTerms(e){this.useSineTerms=e,this.attributes.set(ss.s_useSineTerms,e?"yes":"no")}getPotentialPoint(e){return this.nodes.get(e)}setPotentialPoint(e,t){this.nodes.set(e,t)}setPotentialPoints(e){this.nodes.clear(),e.forEach(e=>{this.nodes.set(this.nodes.size,e)})}addPotentialPoint(e){return this.nodes.set(this.nodes.size,e),this.nodes.size-1}removePotentialPoint(e){this.nodes.delete(e)}}class si extends F{static{this.tagName="me:periodicity"}constructor(e,t){super(e,si.tagName,t)}}class sn extends H{static{this.tagName="me:ExtraDOSCMethod"}constructor(e,t,s,i){super(e,sn.tagName),this.index=new Map,t&&(this.nodes.set(this.nodes.size,t),this.index.set(t8.tagName,this.nodes.size-1)),s&&(this.nodes.set(this.nodes.size,s),this.index.set(ss.tagName,this.nodes.size-1)),i&&(this.nodes.set(this.nodes.size,i),this.index.set(si.tagName,this.nodes.size-1))}getBondRef(){let e=this.index.get(t8.tagName);if(void 0!=e)return this.nodes.get(e)}setBondRef(e){let t=this.index.get(t8.tagName);void 0!=t?this.nodes.set(t,e):(this.nodes.set(this.nodes.size,e),this.index.set(t8.tagName,this.nodes.size-1))}getHinderedRotorPotential(){let e=this.index.get(ss.tagName);if(void 0!=e)return this.nodes.get(e)}setHinderedRotorPotential(e){let t=this.index.get(ss.tagName);void 0!=t?this.nodes.set(t,e):(this.nodes.set(this.nodes.size,e),this.index.set(ss.tagName,this.nodes.size-1))}getPeriodicity(){let e=this.index.get(si.tagName);if(void 0!=e)return this.nodes.get(e)}setPeriodicity(e){let t=this.index.get(si.tagName);void 0!=t?this.nodes.set(t,e):(this.nodes.set(this.nodes.size,e),this.index.set(si.tagName,this.nodes.size-1))}}class sa extends F{static{this.tagName="me:reservoirSize"}constructor(e,t){super(e,sa.tagName,t)}}class so extends F{static{this.tagName="me:qtot"}constructor(e,t){super(e,so.tagName,t)}}class sd extends F{static{this.tagName="me:sumc"}constructor(e,t){super(e,sd.tagName,t)}}class sl extends F{static{this.tagName="me:sumg"}constructor(e,t){super(e,sl.tagName,t)}}class sr extends H{static{this.tagName="me:densityOfStates"}static{this.header=[tS.tagName,so.tagName,sd.tagName,sl.tagName]}constructor(e){super(e,sr.tagName),this.index=new Map}getT(){let e=this.index.get(tS.tagName);if(void 0!=e)return this.nodes.get(e)}setT(e){let t=this.index.get(e.tagName);void 0!=t?this.nodes.set(t,e):(this.nodes.set(this.nodes.size,e),this.index.set(e.tagName,this.nodes.size-1))}getQtot(){let e=this.index.get(so.tagName);if(void 0!=e)return this.nodes.get(e)}setQtot(e){let t=this.index.get(e.tagName);void 0!=t?this.nodes.set(t,e):(this.nodes.set(this.nodes.size,e),this.index.set(e.tagName,this.nodes.size-1))}getSumc(){let e=this.index.get(sd.tagName);if(void 0!=e)return this.nodes.get(e)}setSumc(e){let t=this.index.get(e.tagName);void 0!=t?this.nodes.set(t,e):(this.nodes.set(this.nodes.size,e),this.index.set(e.tagName,this.nodes.size-1))}getSumg(){let e=this.index.get(sl.tagName);if(void 0!=e)return this.nodes.get(e)}setSumg(e){let t=this.index.get(e.tagName);void 0!=t?this.nodes.set(t,e):(this.nodes.set(this.nodes.size,e),this.index.set(e.tagName,this.nodes.size-1))}toStringArray(){return[this.getT().value.toString(),this.getQtot().value.toString(),this.getSumc().value.toString(),this.getSumg().value.toString()]}}class sg extends H{static{this.tagName="me:densityOfStatesList"}constructor(e,t,s){if(super(e,sg.tagName),this.index=new Map,this.dosIndex=new Map,t&&(this.nodes.set(this.nodes.size,t),this.index.set(tM.tagName,this.nodes.size-1)),s){let e=0;s.forEach(t=>{this.dosIndex.set(e,this.nodes.size),this.nodes.set(this.nodes.size,t),e++})}}getDescription(){let e=this.index.get(tM.tagName);if(void 0!=e)return this.nodes.get(e)}setDescription(e){let t=this.index.get(tM.tagName);void 0!=t?this.nodes.set(t,e):(this.nodes.set(this.nodes.size,e),this.index.set(tM.tagName,this.nodes.size-1))}getDensityOfStates(e){let t=this.dosIndex.get(e);if(void 0!=t)return this.nodes.get(t)}setDensityOfStates(e,t){let s=this.dosIndex.get(e);void 0!=s?this.nodes.set(s,t):(this.nodes.set(this.nodes.size,t),this.dosIndex.set(e,this.nodes.size-1))}addDensityOfStates(e){this.nodes.set(this.nodes.size,e);let t=this.nodes.size-1;return this.dosIndex.set(t,this.nodes.size-1),t}removeDensityOfStates(e){let t=this.dosIndex.get(e);void 0!=t&&this.nodes.delete(t)}toCSV(){let e="",t=sr.header;return e+=t.join(",")+"\n",this.nodes.forEach(t=>{e+=t.toStringArray().join(",")+"\n"}),e}}class sh extends H{static{this.tagName="molecule"}static{this.s_id="id"}static{this.s_description="description"}static{this.s_active="active"}constructor(e,t,s,i,n,a,o,d,l,r,g,h){super(e,sh.tagName),this.label=this.getID(),this.index=new Map,this.edmindex=new Map,this.id=t;let m=0;s&&(this.nodes.set(m,s),this.index.set(tm.tagName,m),m++),i&&(this.nodes.set(m,i),this.index.set(tI.tagName,m),m++),n&&(this.nodes.set(m,n),this.index.set(tD.tagName,m),m++),a&&(this.nodes.set(m,a),this.index.set(t0.tagName,m),m++),o&&(this.nodes.set(m,o),this.index.set(t4.tagName,m),m++),d&&(this.nodes.set(m,d),this.index.set(t6.tagName,m),m++),l&&(this.nodes.set(m,l),this.index.set(t7.tagName,m),m++),r&&r.forEach(e=>{this.nodes.set(m,e),this.edmindex.set(m,m),m++}),g&&(this.nodes.set(m,g),this.index.set(sa.tagName,m),m++),h&&(this.nodes.set(m,h),this.index.set(st.tagName,m))}getLabel(){return this.getID()}getID(){return this.attributes.get(sh.s_id)}setID(e){this.attributes.set(sh.s_id,e)}getDescription(){let e=this.attributes.get(sh.s_description);return void 0!=e?e:this.getID()}setDescription(e){this.attributes.set(sh.s_description,e)}getActive(){let e=this.attributes.get(sh.s_active);if(void 0!=e)return"true"==e}setActive(e){this.attributes.set(sh.s_active,e.toString())}getMetadataList(){let e=this.index.get(tm.tagName);if(void 0!=e)return this.nodes.get(e)}setMetadataList(e){let t=this.index.get(tm.tagName);void 0==t?(this.index.set(tm.tagName,this.nodes.size),this.addNode(e)):this.nodes.set(t,e)}getPropertyList(){let e=this.index.get(t0.tagName);if(void 0!=e)return this.nodes.get(e)}setPropertyList(e){let t=this.index.get(t0.tagName);void 0==t?(this.index.set(t0.tagName,this.nodes.size),this.addNode(e)):this.nodes.set(t,e)}getProperty(e){let t=this.getPropertyList();if(void 0!=t)return t.getProperty(e)}getAtom(e){return this.getAtoms().getAtom(e)}getAtoms(){let e=this.index.get(tI.tagName);return this.nodes.get(e)}setAtoms(e){this.index.set(tI.tagName,this.nodes.size),this.nodes.set(this.nodes.size,e)}getBond(e){return this.getBonds().getBond(e)}getBonds(){let e=this.index.get(tD.tagName);return this.nodes.get(e)}setBonds(e){this.index.set(tD.tagName,this.nodes.size),this.nodes.set(this.nodes.size,e)}getEnergyTransferModel(){let e=this.index.get(t4.tagName);if(void 0!=e)return this.nodes.get(e)}setEnergyTransferModel(e){let t=this.index.get(t4.tagName);void 0==t?(this.index.set(t4.tagName,this.nodes.size),this.addNode(e)):this.nodes.set(t,e)}getDOSCMethod(){let e=this.index.get(t6.tagName);if(void 0!=e)return this.nodes.get(e)}setDOSCMethod(e){let t=this.index.get(t6.tagName);void 0==t?(this.index.set(t6.tagName,this.nodes.size),this.addNode(e)):this.nodes.set(t,e)}getDistributionCalcMethod(){let e=this.index.get(t7.tagName);if(void 0!=e)return this.nodes.get(e)}setDistributionCalcMethod(e){let t=this.index.get(t7.tagName);void 0==t?(this.index.set(t7.tagName,this.nodes.size),this.addNode(e)):this.nodes.set(t,e)}getExtraDOSCMethod(e){let t=this.edmindex.get(e);if(void 0!=t)return this.nodes.get(t)}setExtraDOSCMethod(e,t){let s=this.edmindex.get(e);void 0==s?(this.edmindex.set(e,this.nodes.size),this.nodes.set(this.nodes.size,t)):this.nodes.set(s,t)}getReservoirSize(){let e=this.index.get(sa.tagName);if(void 0!=e)return this.nodes.get(e)}setReservoirSize(e){let t=this.index.get(sa.tagName);void 0==t?(this.index.set(sa.tagName,this.nodes.size),this.addNode(e)):this.nodes.set(t,e)}getDensityOfStatesList(){let e=this.index.get(sg.tagName);if(void 0!=e)return this.nodes.get(e)}setDensityOfStatesList(e){let t=this.index.get(sg.tagName);void 0==t?(this.index.set(sg.tagName,this.nodes.size),this.addNode(e)):this.nodes.set(t,e)}getThermoTable(){let e=this.index.get(st.tagName);if(void 0!=e)return this.nodes.get(e)}setThermoTable(e){let t=this.index.get(st.tagName);void 0==t?(this.index.set(st.tagName,this.nodes.size),this.addNode(e)):this.nodes.set(t,e)}getEnergy(){let e;try{e=this.getProperty(tk.dictRef)}catch(t){try{e=this.getProperty(tG.dictRef)}catch(t){try{e=this.getProperty(tU.dictRef)}catch(t){try{e=this.getProperty(tO.dictRef)}catch(t){e=void 0}}}}return void 0==e?(0,o.Big)(0):e instanceof tL?e.value:(0,o.Big)(0)}}function sm(e,t,s){let i=I(i7,void 0,i5);return e.appendChild(i),i.addEventListener("click",()=>{let n=sw(!0,void 0,void 0,s);console.log("mid="+n);let a=new sh(new Map,n);a.setID(n),nF(a,s),a.setAtoms(new tI(new Map)),a.setBonds(new tD(new Map));let o=t.addID(sh.tagName,n),d=z(o),l=x(t.addID(o,ns),e,i,d,n,i4,i5);n2(ei.tagName,n),sy(a,s,l.querySelector(N),t,d,i5),d.appendChild(sC(t.addID(o,ni),t,a.getDescription.bind(a),a.setDescription.bind(a),i4,i5));let r=t.addID(o,tI.tagName),g=z(r);x(t.addID(r,ns),d,null,g,tI.tagName,i4,i5),g.appendChild(sM(t,a,g,tR.tagName,i4,i5));let h=t.addID(o,tD.tagName),m=z(h);x(t.addID(h,ns),d,null,m,tD.tagName,i4,i5),m.appendChild(sR(t,a,m,tz.tagName,i4,i5)),sL(t,a,d,i4,i5);let c=t.addID(o,t0.tagName),u=z(c);x(t.addID(c,ns),d,null,u,t0.tagName,i4,i4);let p=a.getPropertyList();void 0==p&&(console.log("PropertyList is undefined for molecule "+a.getLabel()),p=new t0(new Map),a.setPropertyList(p)),console.log("pl.index.size"+p.index.size),sc(a,u,p),n6(d,i5,()=>{sD(e,l,t,s,o,a)})}),i}function sc(e,t,s){let i=new Set;su(e,i,t,s,tk.dictRef,tb.energyUnits),su(e,i,t,s,tG.dictRef,tb.energyUnits),su(e,i,t,s,tO.dictRef,tb.energyUnits),su(e,i,t,s,tU.dictRef,tb.energyUnits),sN(!1,e,i,t,s,tq.dictRef,tb.frequencyUnits),su(e,i,t,s,tF.dictRef,void 0),su(e,i,t,s,tV.dictRef,void 0),su(e,i,t,s,tH.dictRef,void 0),sN(!1,e,i,t,s,tj.dictRef,tb.frequencyUnits),su(e,i,t,s,tX.dictRef,tb.massUnits),su(e,i,t,s,tY.dictRef,void 0),su(e,i,t,s,t$.dictRef,tb.temperatureUnits),su(e,i,t,s,tW.dictRef,tb.lengthUnits),sv(!1,e,i,t,s,tK.dictRef,tb.hessianUnits),sN(!1,e,i,t,s,tZ.dictRef,tb.EinsteinAUnits),sN(!1,e,i,t,s,tQ.dictRef,tb.EinsteinBUnits)}function su(e,t,s,i,n,a){let o,d,l,r,g;(o=new Map).set(tA.s_dictRef,n),d=new Map,void 0!=a&&d.set(tL.s_units,a[0]),r=new tA(o,l=new tL(d,nL)),e.getPropertyList().setProperty(r),console.log("pl.index.size"+i.index.size),n9(a,d,g=n5(s.id,t,n,l.getValue.bind(l),e=>sp(n,i,l,e),()=>i.removeProperty(r.dictRef),i4,i5),g.querySelector(nn),nE(s.id,n,tL.s_units),n,i4,i4),s.appendChild(g),g.querySelector(N).click()}function sp(e,t,s,i){if(void 0==t.getProperty(e)){let i,n;(i=new Map).set(tA.s_dictRef,e),n=new tA(i,s),t.setProperty(n),console.log("Set property "+e)}else console.log("Property "+e+" already exists.");console.log("Value "+s.getValue()),console.log("Value "+s.getValue()),s.setValue.bind(s)(i),console.log("Value "+s.getValue())}function sN(e,t,s,i,n,a,o){let d,l,r,g,h;(d=new Map).set(tA.s_dictRef,a),l=new Map,void 0!=o&&l.set(tL.s_units,o[0]);let m=[];e&&sf(a,m),g=new tA(d,r=new tP(l,m)),t.getPropertyList().setProperty(g),console.log("pl.index.size"+n.index.size),n9(o,l,h=sP(i.id,s,a,r,r.getValues.bind(r),e=>sx(a,n,r,e),()=>n.removeProperty(g.dictRef),i4,i5),h.querySelector(nn),nE(i.id,a,tL.s_units),a,i4,i4),i.appendChild(h),h.querySelector(N).click()}function sf(e,t){let s=n7("Please enter the number of elements in the "+e+" array");for(let e=0;e<s;e++)t.push(nL)}function sx(e,t,s,i){if(void 0==t.getProperty(e)){let n,a;(n=new Map).set(tA.s_dictRef,e),a=new tA(n,s),sf(e,i),t.setProperty(a),console.log("Set property "+e)}else console.log("Property "+e+" already exists.");console.log("Value "+s.getValues()),s.setValues.bind(s)(i)}function sv(e,t,s,i,n,a,o){let d,l,r,g,h;(d=new Map).set(tA.s_dictRef,a),l=new Map,void 0!=o&&l.set(tL.s_units,o[0]);let m=[];e&&sf(a,m),g=new tA(d,r=new tB(l,m)),t.getPropertyList().setProperty(g),console.log("pl.index.size"+n.index.size),n9(o,l,h=sP(i.id,s,a,r,r.getValues.bind(r),e=>sx(a,n,r,e),()=>n.removeProperty(g.dictRef),i4,i5),h.querySelector(nn),nE(i.id,a,tL.s_units),a,i4,i4),i.appendChild(h),h.querySelector(N).click()}function sE(e,t,s,i){let n=I(ne,void 0,i4);return e.appendChild(n),n.addEventListener("click",()=>{let n=l(sh.tagName,"div");nw(n);let a=z(s.addID(n),i5),o=Array.from(nH(nq));if(0==o.length){alert("There are no additional molecules to add, please load data...");return}console.log("options.length="+o.length),n3(o,!0);let d=l(n,f);nw(d);let r=T(o,"Select molecule",ng,s.addID(d),i4);r.classList.add(sh.tagName),a.appendChild(r),e.insertBefore(a,t),ae(o,r),r.addEventListener("change",n=>{let o=n.target,d=nj(o.options[o.selectedIndex].value,nq),l=d.getID();l=sw(!0,l,d,i),i.set(l,d);let r=s.addID(sh.tagName,i.size),g=z(r),h=x(s.addID(r,ns),e,t,g,d.getLabel(),i4,i5);n2(ei.tagName,d.getID()),sy(d,i,h.querySelector(N),s,g,i5),g.appendChild(sC(s.addID(r,ni),s,d.getDescription.bind(d),d.setDescription.bind(d),i4,i5));let m=s.addID(r,tm.tagName),c=z(m,i5);x(s.addID(m,ns),g,null,c,tm.tagName,i4,i5);let u=d.getMetadataList();void 0!=u&&u.getMetadata().forEach(e=>{let t=z();c.appendChild(t),t.appendChild(_(e.getLabelText(),i4))});let p=s.addID(r,tI.tagName),f=z(p);x(s.addID(p,ns),g,null,f,tI.tagName,i4,i5);let v=d.getAtoms();void 0!=v&&v.atoms.forEach(e=>{f.appendChild(sS(s,d,p,d.getAtoms(),e,i4,i5))}),f.appendChild(sM(s,d,f,tR.tagName,i4,i5));let E=s.addID(r,tD.tagName),w=z(E);x(s.addID(E,ns),g,null,w,tD.tagName,i4,i5),void 0!=d.getBonds()&&d.getBonds().bonds.forEach(e=>{if(void 0==v)throw Error("Atoms are not defined for molecule "+d.getLabel());w.appendChild(sI(s,d,E,v.atoms,d.getBonds(),e,i4,i5))}),w.appendChild(sR(s,d,w,tz.tagName,i4,i5)),sL(s,d,g,i4,i5);let y=s.addID(r,t0.tagName),C=z(y);x(s.addID(y,ns),g,null,C,t0.tagName,i4,i5);let b=d.getPropertyList(),M=new Set;console.log("Molecule "+d.getDescription()),tL.propertyDictRefs.forEach(function(e){console.log("dictRef="+e),su(d,M,C,b,e,tb.energyUnits)}),tP.propertyDictRefs.forEach(function(e){console.log("dictRef="+e),sN(!1,d,M,C,b,e,tb.frequencyUnits)}),tB.propertyDictRefs.forEach(function(e){console.log("dictRef="+e),sv(!1,d,M,C,b,e,tb.hessianUnits)}),a.remove(),n6(g,i5,()=>{sD(e,h,s,i,r,d)})})}),n}function sw(e,t,s,i){for(;;){let n;if(null==(n=e?prompt("Please enter a name for the molecule",t):t))alert("The molecule ID cannot be null.");else if(""==n)alert("The molecule ID cannot be empty.");else{if(!i.has(n))return t=n,void 0!=s&&(s.setID(t),i.set(t,s)),t;if(t==n)return void 0!=s&&(s.setID(t),i.set(t,s)),t;alert("The molecule ID "+n+" is already in use.")}}}function sy(e,t,s,i,n,a){let o=i6+" Edit id",d=i.addID(n.id,o,N),l=I(o,d,a);n.appendChild(l),l.addEventListener("click",()=>{let i=e.getID();n1(ei.tagName,e.getID()),i=sw(!0,i,e,t),n2(ei.tagName,i),s.textContent=e.getLabel()+" ▲"})}function sC(e,t,s,i,n,a){let o=D(void 0,a),d=ni+i9,l=ni+i8,r=I(l,t.addID(e,N),n);o.appendChild(r),r.classList.add(na),r.classList.add(no);let g=t.addID(e,ni,nn),h=s();return void 0==h?(r.textContent=l,r.classList.toggle(na)):(sb(o,g,h,i,n),r.textContent=d,r.classList.toggle(no)),r.addEventListener("click",e=>{null==document.getElementById(g)?(sb(o,g,h,i,n),r.textContent=d):(document.getElementById(g)?.remove(),console.log("Removed "+g),r.textContent=l),r.classList.toggle(na),r.classList.toggle(no)}),o}function sb(e,t,s,i,n){let a;a=void 0==s?"":s;let o=w("text",t,n);o.addEventListener("change",e=>{let n=e.target;i(n.value),console.log(t+" changed from "+s+" to "+n.value),b(n)}),o.value=a,b(o),e.appendChild(o)}function sM(e,t,s,i,n,a){let o=I(i7,e.addID(s.id,"Add"+i+"Button"),a);return o.addEventListener("click",()=>{let i=new tR(new Map,t);s.insertBefore(sS(e,t,s.id,t.getAtoms(),i,n,a),o)}),o}function sS(e,t,s,i,n,a,o){let d,l=i.addAtom(n,n.getID()),r=D(e.addID(s,l),o);r.appendChild(_(l,a));let g=new Set;return function(e,t,s,i,n,a){let o=t.getElementType(),d=tb.elementTypes;void 0==o&&(o=ng,n3(d,n));let l=e.addID(s.id,tR.s_elementType);i.add(l);let r=R(tR.s_elementType,d,tR.s_elementType,o,l,a,a),g=r.querySelector("select");g.addEventListener("change",e=>{let s=e.target;t.setElementType(s.value),M(s)}),g.value=o,M(g),ae(d,g),s.appendChild(r)}(e,n,r,g,!0,a),d=e.addID(r.id,tR.s_x3),g.add(d),r.appendChild(n5(d,g,tR.s_x3,n.getX3.bind(n),n.setX3.bind(n),n.removeX3,a,a)),d=e.addID(r.id,tR.s_y3),g.add(d),r.appendChild(n5(d,g,tR.s_y3,n.getY3.bind(n),n.setY3.bind(n),n.removeY3,a,a)),d=e.addID(r.id,tR.s_z3),g.add(d),r.appendChild(n5(d,g,tR.s_z3,n.getZ3.bind(n),n.setZ3.bind(n),n.removeZ3,a,a)),n6(r,a,sT,t,l,g),n2(tz.s_atomRefs2,l),r}function sT(e,t,s){e.getAtoms().removeAtom(t),s.forEach(e=>{console.log("Removing "+e),nw(e)}),n1(tz.s_atomRefs2,t),e.getBonds().bonds.forEach(t=>{let s=t.getAtomRefs2().split(" ");if(s[0]==s[1]){let s=t.getID();e.getBonds().removeBond(s),n1(tz.tagName,s);let i=l(sh.tagName,e.id,tD.tagName,s),n=document.getElementById(i);if(null==n)throw Error("Bond div with id "+i+" not found.");n.remove()}})}function sR(e,t,s,i,n,a){let o=I(i7,e.addID(s.id,i,N),a);return o.addEventListener("click",()=>{let i=t.getAtoms().atoms;if(i.size<2){alert("There must be at least 2 atoms to create a bond.");return}let d=new Map,l=Array.from(i.keys()).slice(0,2).join(" ");d.set(tz.s_atomRefs2,l);let r=new tz(d,t);s.insertBefore(sI(e,t,s.id,i,t.getBonds(),r,n,a),o)}),s.appendChild(o),o}function sI(e,t,s,i,n,a,o,d){let r,g,h,m,c,u,p,N,f,x=n.addBond(a,a.getID()),v=D(l(s,x),d);return v.appendChild(_(x,o)),r=e.addID(v.id,tz.s_atomRefs2),g=a.getAtomRefs2().split(" "),h=Array.from(t.getAtoms().atoms.keys()),m=e.addID(r,0),(u=(c=R(tz.s_atomRefs2+"[0]",h,tR.tagName,g[0],m,o,o)).querySelector("select")).classList.add(tz.s_atomRefs2),u.addEventListener("change",e=>{let t=e.target,s=t.value+" "+g[1];console.log(tz.s_atomRefs2+" changed to "+s),a.setAtomRefs2(s),M(t)}),u.value=g[0],M(u),v.appendChild(c),p=e.addID(r,1),(f=(N=R(tz.s_atomRefs2+"[1]",h,tR.tagName,g[1],p,o,o)).querySelector("select")).classList.add(tz.s_atomRefs2),f.addEventListener("change",e=>{let t=e.target,s=g[0]+" "+t.value;console.log(tz.s_atomRefs2+" changed to "+s),a.setAtomRefs2(s),M(t)}),f.value=g[1],M(f),v.appendChild(N),function(e,t,s,i){let n=e.addID(t.id,tz.s_order),a=D(void 0,i);t.appendChild(a);let o=tz.s_order+i9,d=tz.s_order+i8,l=I(d,void 0,i);a.appendChild(l),l.classList.add(na),l.classList.add(no);let r=s.getOrder();void 0==r?(l.textContent=d,l.classList.toggle(na)):(sz(a,s,n,r,i),l.textContent=o,l.classList.toggle(no)),l.addEventListener("click",e=>{null==document.getElementById(n)?(void 0==r&&(r=1),sz(a,s,n,r,i),l.textContent=o):(document.getElementById(n)?.remove(),console.log("Removed "+n),l.textContent=d),l.classList.toggle(na),l.classList.toggle(no)})}(e,v,a,o),Array.from(i.keys()).forEach(e=>{v.classList.add(e)}),n6(v,o,e=>t.getBonds().removeBond(e),x),n2(tz.tagName,x),v}function sz(e,t,s,i,n){let a=i.toString(),o=T(tz.orderOptions,tz.s_order,a,s,n);o.addEventListener("change",e=>{let s=e.target;t.setOrder(parseFloat(s.value)),console.log(tz.s_order+" changed from "+a+" to "+s.value),M(s)}),o.value=a,M(o),o.id=s,e.appendChild(o)}function sD(e,t,s,i,n,a){e.removeChild(t),s.removeIDs(n),s.removeIDs(l(n,ni)),s.removeIDs(l(n,tI.tagName)),s.removeIDs(l(n,tD.tagName)),s.removeIDs(l(n,nN)),s.removeIDs(l(n,t0.tagName)),i.delete(a.getID())}function s_(e,t,s,i,n,d,l,r){let g=new Set,m=n.getElementsByTagName(tL.tagName);if(m.length>0){if(1!=m.length)throw Error("Expecting 1 "+tL.tagName+" but finding "+m.length+"!");let i=G(m[0]),n=new(a(o))(i),r=X(m[0]),h=new tL(r,n);t.setProperty(h),h.setValue=(function(e){h.value=e,t.dictRef==tk.dictRef&&nJ()}).bind(h);let c=n5(nE(d.id,t.dictRef),g,t.dictRef,h.getValue.bind(h),s=>sp(t.dictRef,e,h,s),()=>e.removeProperty(t.dictRef),i4,i5);n9(s,r,c,c.querySelector(nn),nE(d.id,t.dictRef,tL.s_units),t.dictRef,l,l),d.appendChild(c)}else{let a=n.getElementsByTagName(tP.tagName);if(a.length>0){if(1!=a.length)throw Error("Expecting 1 "+tP.tagName+" but finding "+a.length+"!");let i=G(a[0]);if(""!=i){let n=h(i.split(/\s+/)),o=X(a[0]),r=new tP(o,n);t.setProperty(r);let m=sP(nE(d.id,t.dictRef),g,t.dictRef,r,r.getValues.bind(r),r.setValues,()=>e.removeProperty(t.dictRef),i4,i5);n9(s,o,m,m.querySelector(nc),nE(d.id,t.dictRef,tP.s_units),t.dictRef,l,l),d.appendChild(m)}}else{let e=n.getElementsByTagName(tB.tagName);if(e.length>0){var c,u,p;let n,a,o;if(1!=e.length)throw Error("Expecting 1 "+tB.tagName+" but finding "+e.length+"!");let g=G(e[0]),m=h(g.split(/\s+/)),N=X(e[0]),x=new tB(N,m);t.setProperty(x);let v=t.dictRef,E=(c=nE(d.id,t.dictRef),u=e=>{let s=e.target;sA(t.dictRef,x,s)},p=g,n=D(void 0,r),(o=y(c,l)).onchange=u,o.value=p,S(o),(a=_(v,l)).htmlFor=c,n.appendChild(a),n.appendChild(o),n),w=E.querySelector("textarea");w.value=g,S(w),w.addEventListener("change",e=>{g=e.target.value,x=t.getProperty(),m=h(g.split(/\s+/)),x.values=m,console.log("Set "+t.dictRef+" of "+i.getLabel()+" to "+g),S(w)}),n9(s,N,E,w,nE(d.id,t.dictRef,f,"Units"),t.dictRef,l,l),d.appendChild(E)}else throw Error("Expecting "+tL.tagName+", "+tP.tagName+" or "+tB.tagName+" but finding none!")}}}function sL(e,t,i,n,a){let o;let d=z(e.addID(i.id,nN,ns),a);i.appendChild(d);let l=e.addID(i.id,nN),r=!1,g=!1;function h(e,s){let i=z(l,n);i.className="mol-container",d.appendChild(i);let a=$3Dmol.createViewer(i,{backgroundColor:"grey"});return a.setStyle({stick:{}}),t.getAtoms().atoms.forEach(function(t){let s,i,n=t.getElementType();s=void 0==n?"Purple":tb.atomColors.get(n)||"Purple",i=void 0==n?100:tb.atomRadii.get(t.getElementType())||100;let o=t.getX3()?.toNumber()||0,d=t.getY3()?.toNumber()||0,l=t.getZ3()?.toNumber()||0;a.addSphere({center:{x:o,y:d,z:l},radius:i/110,color:s}),e&&a.addLabel(t.getID(),{position:{x:o,y:d,z:l}})}),t.getBonds().bonds.forEach(function(e){let i=e.getAtomRefs2().split(" "),n=t.getAtoms(),o=n.getAtom(i[0]),d=n.getAtom(i[1]),l=e.getOrder()||1,r=tb.bondColors.get(l)||"Purple",g=o.getX3()?.toNumber()||0,h=o.getY3()?.toNumber()||0,m=o.getZ3()?.toNumber()||0,c=d.getX3()?.toNumber()||0,u=d.getY3()?.toNumber()||0,p=d.getZ3()?.toNumber()||0;a.addCylinder({start:{x:g,y:h,z:m},end:{x:c,y:u,z:p},radius:.06*l,color:r}),s&&a.addLabel(e.getID(),{position:{x:(g+c)/2,y:(h+u)/2,z:(m+p)/2}})}),a.zoomTo(),a.render(),a.zoom(.8,2e3),a}let m=I("Draw/Redraw",void 0);function c(e,t,s,i){let a=I((s?"Hide ":"Show ")+e,t,n);return a.addEventListener("click",()=>{s?(a.textContent="Show "+e,s=!1):(a.textContent="Hide "+e,s=!0),i(s),nw(l),o=h(r,g)}),a}m.addEventListener("click",()=>{nw(l),o=h(r,g)}),d.appendChild(m);let u="Atom Labels",p=c(u,e.addID(l,u),r,e=>r=e);d.appendChild(p);let N="Bond Labels",f=c(N,e.addID(l,N),g,e=>g=e);d.appendChild(f);let x=I("Save as PNG",e.addID(l,nr),i4);x.addEventListener("click",()=>{let e=o.pngURI(),t=document.createElement("a");t.href=e;let i=s.getTitle()?.value;t.download=i.replace(/[^a-z0-9]/gi,"_")+"mol.png",document.body.appendChild(t),t.click(),document.body.removeChild(t),console.log("Save Image")}),d.appendChild(x)}function sP(e,t,s,i,n,a,o,d,l){let r=D(void 0,l),g=s+i9,h=s+i8,m=nE(e,s,N);t.add(m);let c=I(h,m,d);r.appendChild(c),c.classList.add(na),c.classList.add(no);let u=nE(e,s,nn);t.add(u);let p=n();return void 0==p?(c.textContent=h,c.classList.toggle(na)):(sB(r,u,s,p,i,n,a,d),c.textContent=g,c.classList.toggle(no)),c.addEventListener("click",e=>{null==document.getElementById(u)?(sB(r,u,s,p,i,n,a,d),c.textContent=g):(document.getElementById(u)?.remove(),o(),console.log("Removed "+u),c.textContent=h),c.classList.toggle(na),c.classList.toggle(no)}),r}function sB(e,t,s,i,n,a,o,d){let l;l=void 0==i?"":c(i);let r=y(t,d);r.addEventListener("change",e=>{let t=e.target;sA(s,n,r),S(t)}),r.value=l,S(r),e.appendChild(r)}function sA(e,t,s){let i=s.value.trim(),n=g(t.values," ");if(0==t.getValues().length){let s=n7("Please enter the number of elements in the "+e+" array"),i=[];for(let e=0;e<s;e++)i.push(new(a(o))(0));t.setValues(i)}if(""==i){alert("Empty input resetting..."),s.value=n;return}let d=i.split(/\s+/),l=[],r=!0;if(d.forEach(function(e){m(e)?l.push(new(a(o))(e)):r=!1}),!r){alert("An input is not a number, resetting..."),s.value=n;return}l.length==t.values.length?(t.setValues(l),console.log("Changed "+t.tagName+' from: "'+n+'" to: "'+g(t.values," ")+'"')):(alert("Expecting "+t.values.length+" values for, but finding "+l.length+" resetting..."),s.value=n)}class sk{constructor(){}readFile(){return new Promise((e,t)=>{let s=document.createElement("input");s.type="file";let i=this;s.onchange=function(){if(s.files){let n=s.files[0];n.name;let a=new FileReader,o=0,d="";a.onload=function(s){if(null==s.target){t(Error("Event target is null"));return}if(d+=s.target.result,null!=n){if(o<n.size){let e=n.slice(o,o+1048576);a.readAsText(e),o+=1048576}else{d=d.trim();let t=new DOMParser().parseFromString(d,"text/xml");e(i.parse(t))}}};let l=n.slice(o,o+1048576);a.readAsText(l),o+=1048576}},s.click()})}parse(e){let t=new Map,s=Y(e,tv.tagName),i=new Set;s.childNodes.forEach(function(e){i.add(e.nodeName)});let n=s.getElementsByTagName(sh.tagName),d=n.length;console.log("Number of molecules="+d);let l=0;for(let e=0;e<d;e++){let s=X(n[e]),i=s.get(sh.s_id);if(void 0==i)throw Error(sh.s_id+" is undefined");let d=n[e].childNodes;if(0==d.length){if(l++,void 0==s.get("ref"))throw Error("ref is undefined");continue}let r=sw(!1,i,void 0,t),g=new sh(s,r);t.set(r,g);let h=new Set;for(let e=0;e<d.length;e++){let t=d[e];h.has(t.nodeName)?"#text"!=t.nodeName&&console.warn("Another ChildNode with nodeName="+t.nodeName):h.add(t.nodeName)}let m=n[e].getElementsByTagName(tm.tagName);if(m.length>0){if(m.length>1)throw Error("Expecting 1 or 0 "+tm.tagName+" but finding "+m.length+"!");let e=new tm(X(m[0]));g.setMetadataList(e);let t=m[0].getElementsByTagName(to.tagName);for(let s=0;s<t.length;s++){let i=new to(X(t[s]));e.addMetadata(i)}h.delete(tm.tagName)}let c=n[e].getElementsByTagName(tI.tagName);if(c.length>1)throw Error("Expecting 1 or 0 "+tI.tagName+" but finding "+c.length+"!");if(1==c.length){let e=c[0],t=e.getElementsByTagName(tR.tagName);if(0==t.length)throw Error("Expecting 1 or more atoms in "+tI.tagName+", but finding 0!");let s=new tI(X(e));g.setAtoms(s);for(let e=0;e<t.length;e++)s.addAtom(new tR(X(t[e]),g));h.delete(tI.tagName)}else{let t=n[e].getElementsByTagName(tR.tagName);if(1==t.length){let e=new tI(new Map);e.addAtom(new tR(X(t[0]),g)),g.setAtoms(e)}else if(t.length>1)throw Error("Expecting 1 "+tR.tagName+" but finding "+t.length+". Should these be in an "+tI.tagName+"?")}h.delete(tR.tagName);let u=n[e].getElementsByTagName(tD.tagName);if(u.length>0){if(u.length>1)throw Error("Expecting 1 or 0 "+tD.tagName+" but finding "+u.length+"!");let e=u[0].getElementsByTagName(tz.tagName),t=new tD(X(u[0]));for(let s=0;s<e.length;s++)t.addBond(new tz(X(e[s]),g));g.setBonds(t),h.delete(tD.tagName)}else{let t=n[e].getElementsByTagName(tz.tagName);if(t.length>0){if(t.length>1)throw Error("Expecting 1 "+tz.tagName+" but finding "+t.length+". Should these be in a "+tD.tagName+"?");let e=new tD(new Map);e.addBond(new tz(X(t[0]),g)),g.setBonds(e)}}h.delete(tz.tagName);let p=n[e].getElementsByTagName(t0.tagName);if(p.length>1)throw Error("Expecting 1 or 0 "+t0.tagName+" but finding "+p.length+"!");if(1==p.length){let e=new t0(X(p[0]));g.setPropertyList(e);let t=p[0].getElementsByTagName(tA.tagName);for(let s=0;s<t.length;s++)e.setProperty(new tA(X(t[s])));h.delete(t0.tagName)}else{let t=new t0(new Map);g.setPropertyList(t);let s=n[e].getElementsByTagName(tA.tagName);if(1!=s.length)throw Error("Expecting 1 "+tA.tagName+" but finding "+s.length+". Should these be in a "+t0.tagName+"?");t.setProperty(new tA(X(s[0]))),h.delete(tA.tagName)}let N=n[e].getElementsByTagName(t4.tagName);if(N.length>0){if(N.length>1)throw Error("Expecting 1 or 0 "+t4.tagName+" but finding "+N.length+"!");let e=new t4(X(N[0]));g.setEnergyTransferModel(e),h.delete(t4.tagName)}let f=n[e].getElementsByTagName(t6.tagName);if(f.length>0){if(f.length>1)throw Error("Expecting 1 or 0 "+t6.tagName+" but finding "+f.length+"!");let e=new t6(X(f[0]));g.setDOSCMethod(e),h.delete(t6.tagName)}let x=n[e].getElementsByTagName(t7.tagName);if(x.length>0){if(x.length>1)throw Error("Expecting 1 or 0 "+t7.tagName+" but finding "+x.length+"!");let e=new t7(X(x[0]));g.setDistributionCalcMethod(e),h.delete(t7.tagName)}let v=n[e].getElementsByTagName(sg.tagName);if(v.length>0){if(v.length>1)throw Error("Expecting 1 or 0 "+sg.tagName+" but finding "+v.length+"!");let e=new sg(X(v[0]));g.setDensityOfStatesList(e);let t=v[0].getElementsByTagName(sr.tagName),s=v[0].getElementsByTagName(tM.tagName);if(s.length>0){if(s.length>1)throw Error("Expecting 1 or 0 "+tM.tagName+" but finding "+s.length+"!");let t=new tM(X(s[0]),k(A(s[0])));e.setDescription(t)}if(0==t.length)throw Error("Expecting 1 or more "+sr.tagName+" but finding 0!");for(let s=0;s<t.length;s++){let i=new sr(X(t[s]));e.addDensityOfStates(i);let n=t[s].getElementsByTagName(tS.tagName);if(1!=n.length)throw Error("Expecting 1 "+tS.tagName+" but finding "+n.length+"!");{let e=new tS(X(n[0]),new(a(o))(k(A(n[0]))));i.setT(e)}let d=t[s].getElementsByTagName(so.tagName);if(1!=d.length)throw Error("Expecting 1 "+so.tagName+" but finding "+d.length+"!");{let e=new so(X(d[0]),new(a(o))(k(A(d[0]))));i.setQtot(e)}let l=t[s].getElementsByTagName(sd.tagName);if(1!=l.length)throw Error("Expecting 1 "+sd.tagName+" but finding "+l.length+"!");{let e=new sd(X(l[0]),new(a(o))(k(A(l[0]))));i.setSumc(e)}let r=t[s].getElementsByTagName(sl.tagName);if(1!=r.length)throw Error("Expecting 1 "+sl.tagName+" but finding "+r.length+"!");{let e=new sl(X(r[0]),new(a(o))(k(A(r[0]))));i.setSumg(e)}}h.delete(sg.tagName)}h.delete("#text"),h.size>0&&(console.warn("There are additional unexpected moleculeTagNames:"),h.forEach(e=>console.warn(e)))}return console.log("Number of molecules="+t.size),console.log("Number of alias molecules="+l.toString()),t}}let sG="https://github.com/MESMER-kinetics",sO=sG+"/mxg",sU=document.createElement("a");sU.href=sO,sU.textContent=sO;let sq=sO+"/tree/main/data/examples",sF=document.createElement("a");sF.href=sq,sF.textContent=sq;let sV=sG+"/MESMER-code",sH=document.createElement("a");sH.href=sV,sH.textContent=sV;let sj=document.createElement("a");sj.href="https://epsrc.ukri.org/",sj.textContent="The UK Engineering and Physical Sciences Research Council (EPSRC)";let sX=document.createElement("a");sX.href="https://www.leeds.ac.uk/",sX.textContent="The University of Leeds";let sY="https://github.com/3dmol/3Dmol.js",s$=document.createElement("a");s$.href=sY,s$.textContent=sY;let sW=document.createElement("a");sW.href="http://doi.org/10.1093/bioinformatics/btu829",sW.textContent="doi:10.1093/bioinformatics/btu829";let sK="https://mikemcl.github.io/big.js/",sZ=document.createElement("a");sZ.href=sK,sZ.textContent=sK;class sQ extends U{static{this.tagName="molecule"}static{this.s_ref="ref"}static{this.s_role="role"}constructor(e){super(e,sQ.tagName),this.ref=e.get(sQ.s_ref),this.role=e.get(sQ.s_role)}getRef(){return this.ref}setRef(e){this.ref=e,this.attributes.set("ref",e)}getRole(){return this.role}setRole(e){this.role=e,this.attributes.set("role",e)}}class sJ extends H{static{this.tagName="reactant"}static{this.s_deficientReactant="deficientReactant"}static{this.s_excessReactant="excessReactant"}static{this.s_modelled="modelled"}static{this.roleOptions=[sJ.s_deficientReactant,sJ.s_excessReactant,sJ.s_modelled]}constructor(e,t){super(e,sJ.tagName),this.addNode(t)}getMolecule(){return this.nodes.get(0)}}class s0 extends H{static{this.tagName="product"}static{this.roleOptions=["modelled","sink"]}constructor(e,t){super(e,s0.tagName),this.addNode(t)}getMolecule(){return this.nodes.get(0)}}class s1 extends H{static{this.tagName="me:transitionState"}static{this.role="transitionState"}constructor(e,t){super(e,s1.tagName),this.addNode(t)}getMolecule(){return this.nodes.get(0)}}class s2 extends F{static{this.tagName="me:preExponential"}constructor(e,t){super(e,s2.tagName,t)}}class s3 extends F{static{this.tagName="me:activationEnergy"}constructor(e,t){super(e,s3.tagName,t)}}class s5 extends F{static{this.tagName="me:TInfinity"}constructor(e,t){super(e,s5.tagName,t)}}class s4 extends F{static{this.tagName="me:nInfinity"}constructor(e,t){super(e,s4.tagName,t)}}class s6 extends H{static{this.tagName="me:MCRCMethod"}constructor(e){super(e,s6.tagName)}}class s8 extends s6{static{this.xsiType="me:MesmerILT"}static{this.xsiType2="MesmerILT"}constructor(e,t,s,i,n){super(e),this.index=new Map,void 0!=t&&(this.index.set(s2.tagName,this.index.size),this.addNode(t)),void 0!=s&&(this.index.set(s3.tagName,this.index.size),this.addNode(s)),void 0!=i&&(this.index.set(s5.tagName,this.index.size),this.addNode(i)),void 0!=n&&(this.index.set(s4.tagName,this.index.size),this.addNode(n))}getPreExponential(){let e=this.index.get(s2.tagName);if(void 0!=e)return this.nodes.get(e)}setPreExponential(e){let t=this.index.get(s2.tagName);void 0==t?(this.index.set(s2.tagName,this.nodes.size),this.addNode(e)):this.nodes.set(t,e)}getActivationEnergy(){let e=this.index.get(s3.tagName);if(void 0!=e)return this.nodes.get(e)}setActivationEnergy(e){let t=this.index.get(s3.tagName);void 0==t?(this.index.set(s3.tagName,this.nodes.size),this.addNode(e)):this.nodes.set(t,e)}getTInfinity(){let e=this.index.get(s5.tagName);if(void 0!=e)return this.nodes.get(e)}setTInfinity(e){let t=this.index.get(s5.tagName);void 0==t?(this.index.set(s5.tagName,this.nodes.size),this.addNode(e)):this.nodes.set(t,e)}getNInfinity(){let e=this.index.get(s4.tagName);if(void 0!=e)return this.nodes.get(e)}setNInfinity(e){let t=this.index.get(s4.tagName);void 0==t?(this.index.set(s4.tagName,this.nodes.size),this.addNode(e)):this.nodes.set(t,e)}}class s9 extends U{static{this.tagName="me:tunneling"}static{this.options=["Eckart","WKB"]}static{this.s_name="name"}constructor(e){super(e,s9.tagName)}getName(){return this.attributes.get(s9.s_name)}setName(e){this.attributes.set(s9.s_name,e)}}class s7 extends F{static{this.tagName="me:excessReactantConc"}constructor(e,t){super(e,s7.tagName,t)}}class ie extends F{static{this.tagName="me:val"}constructor(e,t){super(e,ie.tagName,t)}}class it extends F{static{this.tagName="me:rev"}constructor(e,t){super(e,it.tagName,t)}}class is extends F{static{this.tagName="me:Keq"}constructor(e,t){super(e,is.tagName,t)}}class ii extends H{static{this.tagName="me:kinf"}constructor(e,t,s,i,n){super(e,ii.tagName),this.index=new Map,void 0!=t&&(this.index.set(tS.tagName,this.nodes.size),this.addNode(t)),void 0!=s&&(this.index.set(ie.tagName,this.nodes.size),this.addNode(s)),void 0!=i&&(this.index.set(it.tagName,this.nodes.size),this.addNode(i)),void 0!=n&&(this.index.set(is.tagName,this.nodes.size),this.addNode(n))}getT(){let e=this.index.get(tS.tagName);if(void 0!=e)return this.nodes.get(e)}setT(e){let t=this.index.get(tS.tagName);void 0==t?(this.index.set(tS.tagName,this.nodes.size),this.addNode(e)):this.nodes.set(t,e)}getVal(){let e=this.index.get(ie.tagName);if(void 0!=e)return this.nodes.get(e)}setVal(e){let t=this.index.get(ie.tagName);void 0==t?(this.index.set(ie.tagName,this.nodes.size),this.addNode(e)):this.nodes.set(t,e)}getRev(){let e=this.index.get(it.tagName);if(void 0!=e)return this.nodes.get(e)}setRev(e){let t=this.index.get(it.tagName);void 0==t?(this.index.set(it.tagName,this.nodes.size),this.addNode(e)):this.nodes.set(t,e)}getKeq(){let e=this.index.get(is.tagName);if(void 0!=e)return this.nodes.get(e)}setKeq(e){let t=this.index.get(is.tagName);void 0==t?(this.index.set(is.tagName,this.nodes.size),this.addNode(e)):this.nodes.set(t,e)}getHeader(){let e=[];return e.push("T ("+this.getT()?.attributes.get("units")+")"),e.push("kf ("+this.getVal()?.attributes.get("units")+")"),e.push("krev ("+this.getRev()?.attributes.get("units")+")"),e.push("Keq ("+this.getKeq()?.attributes.get("units")+")"),e}toStringArray(){let e=this.getT(),t=this.getVal(),s=this.getRev(),i=this.getKeq();return[e.value.toString(),t.value.toString(),s.value.toString(),i.value.toString()]}toCSV(){return this.toStringArray().join(",")}}class ia extends H{static{this.tagName="me:canonicalRateList"}constructor(e,t,s){super(e,ia.tagName),this.index=new Map,this.kinfIndex=new Map,void 0!=t&&(this.index.set(tM.tagName,this.nodes.size),this.addNode(t)),void 0!=s&&s.forEach(e=>{this.kinfIndex.set(this.nodes.size,this.nodes.size),this.addNode(e)})}getDescription(){let e=this.index.get(tM.tagName);if(void 0!=e)return this.nodes.get(e)}setDescription(e){let t=this.index.get(tM.tagName);void 0==t?(this.index.set(tM.tagName,this.nodes.size),this.addNode(e)):this.nodes.set(t,e)}getKinfs(){return Array.from(this.kinfIndex.values()).map(e=>this.nodes.get(e))}addKinf(e){this.kinfIndex.set(this.kinfIndex.size,this.nodes.size),this.addNode(e)}toCSV(){let e="",t=!0;return this.getKinfs().forEach(s=>{t&&(t=!1,e+=s.getHeader().join(",")+"\n"),e+=s.toCSV()+"\n"}),e}}class io extends H{static{this.tagName="reaction"}static{this.s_id="id"}constructor(e,t,s,i,n,a,o,d){super(e,io.tagName),this.index=new Map,this.reactantsIndex=new Map,this.productsIndex=new Map,this.transitionStatesIndex=new Map;let l=e.get(io.s_id);if(void 0==l)throw Error(io.s_id+" is undefined!");this.id=l,void 0!=t&&(t.forEach((e,t)=>{this.reactantsIndex.set(e.getMolecule().getRef(),this.nodes.size),this.addNode(e)}),this.index.set(sJ.tagName,this.reactantsIndex)),void 0!=s&&(s.forEach((e,t)=>{this.productsIndex.set(e.getMolecule().getRef(),this.nodes.size),this.addNode(e)}),this.index.set(s0.tagName,this.productsIndex)),void 0!=i&&(this.index.set(s9.tagName,this.nodes.size),this.addNode(i)),void 0!=n&&(n.forEach((e,t)=>{this.transitionStatesIndex.set(e.getMolecule().getRef(),this.nodes.size),this.addNode(e)}),this.index.set(s1.tagName,this.transitionStatesIndex)),void 0!=a&&(this.index.set(s6.tagName,this.nodes.size),this.addNode(a)),void 0!=o&&(this.index.set(s7.tagName,this.nodes.size),this.addNode(o)),void 0!=d&&(this.index.set(ia.tagName,this.nodes.size),this.addNode(d))}addToIndex(e,t){let s=this.index.get(e);if(void 0==s)this.index.set(e,this.nodes.size);else if(s instanceof Map)s.set(t.tagName,this.nodes.size);else{let i=new Map;i.set(this.nodes.get(s).getRef(),s),i.set(t.tagName,this.nodes.size),this.index.set(e,i)}}getReactants(){let e=this.index.get(sJ.tagName);if(void 0==e)return new Map;let t=new Map;if(e instanceof Map)e.forEach((e,s)=>{t.set(s,this.nodes.get(e))});else{let s=this.nodes.get(e);t.set(s.getMolecule().getRef(),s)}return t}setReactants(e){e.forEach((e,t)=>{this.reactantsIndex.set(e.getMolecule().getRef(),this.nodes.size),this.addNode(e)}),this.index.set(sJ.tagName,this.reactantsIndex)}getReactant(e){let t=this.reactantsIndex.get(e);if(void 0==t)throw Error(`Reactant with ref ${e} not found`);return this.nodes.get(t)}addReactant(e){this.reactantsIndex.set(e.getMolecule().getRef(),this.nodes.size),this.addNode(e)}removeReactant(e){let t=this.reactantsIndex.get(e);if(void 0==t)throw Error(`Reactant with ref ${e} not found`);this.nodes.delete(t),this.reactantsIndex.delete(e)}getProducts(){let e=this.index.get(s0.tagName);if(void 0==e)return new Map;let t=new Map;if(e instanceof Map)e.forEach((e,s)=>{t.set(s,this.nodes.get(e))});else{let s=this.nodes.get(e);t.set(s.getMolecule().getRef(),s)}return t}setProducts(e){e.forEach((e,t)=>{this.productsIndex.set(e.getMolecule().getRef(),this.nodes.size),this.addNode(e)}),this.index.set(s0.tagName,this.productsIndex)}getProduct(e){let t=this.productsIndex.get(e);if(void 0==t)throw Error(`Product with ref ${e} not found`);return this.nodes.get(t)}addProduct(e){this.productsIndex.set(e.getMolecule().getRef(),this.nodes.size),this.addNode(e)}removeProduct(e){let t=this.productsIndex.get(e);if(void 0==t)throw Error(`Product with ref ${e} not found`);this.nodes.delete(t),this.productsIndex.delete(e)}getTunneling(){let e=this.index.get(s9.tagName);if(void 0!=e)return this.nodes.get(e)}setTunneling(e){let t=this.index.get(s9.tagName);if(void 0==t)this.index.set(s9.tagName,this.nodes.size),this.addNode(e);else{if(t instanceof Map)throw Error("Tunneling is a map and it is assumed there would be only 1!");this.nodes.set(t,e)}}getTransitionStates(){let e=this.index.get(s1.tagName);if(void 0==e)return new Map;let t=new Map;if(e instanceof Map)e.forEach((e,s)=>{t.set(s,this.nodes.get(e))});else{let s=this.nodes.get(e);t.set(s.getMolecule().getRef(),s)}return t}setTransitionStates(e){e.forEach((e,t)=>{this.transitionStatesIndex.set(e.getMolecule().getRef(),this.nodes.size),this.addNode(e)}),this.index.set(s1.tagName,this.transitionStatesIndex)}getTransitionState(e){let t=this.transitionStatesIndex.get(e);if(void 0==t)throw Error(`Transition state with ref ${e} not found`);return this.nodes.get(t)}addTransitionState(e){this.transitionStatesIndex.set(e.getMolecule().getRef(),this.nodes.size),this.addNode(e)}removeTransitionState(e){let t=this.transitionStatesIndex.get(e);if(void 0==t)throw Error(`Transition State with ref ${e} not found`);this.nodes.delete(t),this.transitionStatesIndex.delete(e)}getMCRCMethod(){let e=this.index.get(s6.tagName);if(void 0!=e)return this.nodes.get(e)}setMCRCMethod(e){let t=this.index.get(s6.tagName);if(void 0==t)this.index.set(s6.tagName,this.nodes.size),this.addNode(e);else{if(t instanceof Map)throw Error("MCRCMethod is a map and it is assumed there would be only 1!");this.nodes.set(t,e)}}getExcessReactantConc(){let e=this.index.get(s7.tagName);if(void 0!=e)return this.nodes.get(e)}setExcessReactantConc(e){let t=this.index.get(s7.tagName);if(void 0==t)this.index.set(s7.tagName,this.nodes.size),this.addNode(e);else{if(t instanceof Map)throw Error("ExcessReactantConc is a map and it is assumed there would be only 1!");this.nodes.set(t,e)}}getCanonicalRateList(){let e=this.index.get(ia.tagName);if(void 0!=e)return this.nodes.get(e)}setCanonicalRateList(e){let t=this.index.get(ia.tagName);if(void 0==t)this.index.set(ia.tagName,this.nodes.size),this.addNode(e);else{if(t instanceof Map)throw Error("CanonicalRateList is a map and it is assumed there would be only 1!");this.nodes.set(t,e)}}getReactantsLabel(){return Array.from(this.getReactants().values()).map(e=>e.getMolecule().getRef()).join(" + ")}getProductsLabel(){return Array.from(this.getProducts().values()).map(e=>e.getMolecule().getRef()).join(" + ")}getLabel(){return this.id+" ("+this.getReactantsLabel()+" -> "+this.getProductsLabel()+")"}getReactantsEnergy(e,t){return Array.from(this.getReactants().values()).map(s=>{let i=s.getMolecule().getRef(),n=e(i,t);return void 0==n?(console.log("molecule with ref "+i+" not found"),alert("Molecule with ref "+i+" not found. Please add it to the list of molecules.                  In the meantime it will be treated ashaving an energy of 0."),nL):n.getEnergy()}).reduce((e,t)=>e.add(t),new o.Big(0))}getProductsEnergy(e,t){return Array.from(this.getProducts().values()).map(s=>{let i=s.getMolecule().getRef(),n=e(i,t);if(void 0==n)throw Error(`Molecule with ref ${i} not found`);return n.getEnergy()}).reduce((e,t)=>e.add(t),new o.Big(0))}get(e,t){if(this.index.has(e)){let s=this.index.get(e);if(void 0!=s){if(!(s instanceof Map))return this.nodes.get(s);{let e=s.get(t);if(void 0!=e)return this.nodes.get(e)}}}}}function id(e,t,i,n){let a=I(i7,nE(io.tagName,"add",N),i5);return t.appendChild(a),a.addEventListener("click",()=>{let o=new Map,d=s.getReactionList(),l=d.getNextReactionID();console.log("Next Reaction ID="+l),o.set(io.s_id,"R"+l);let r=new io(o);i.set(r.id,r),d.addReaction(r);let g=e.addID(io.tagName,r.id),h=z(g);t.appendChild(h);let m=x(e.addID(g,ns),t,a,h,r.getLabel(),i4,i5),c=m.querySelector("button"),u=e.addID(g,sJ.tagName),p=z(u);x(e.addID(u,ns),h,null,p,nl,i4,i5);let N=new Map;r.setReactants(N),il(r,c,e,g,p,n,N);let f=e.addID(g,s0.tagName),v=z(f);x(e.addID(f,ns),h,null,v,nd,i4,i5);let E=new Map;r.setProducts(E),ir(r,c,e,g,v,n,E);let w=e.addID(g,s1.tagName),y=z(w);x(e.addID(w,ns),h,null,y,nm,i4,i5);let C=new Map;r.setTransitionStates(C),ig(e,g,y,n,C),n6(h,i5,()=>{ih(t,m,e,g,i,r)})}),a}function il(e,t,s,i,n,a,o){let d=I(i7,s.addID(i,sJ.tagName,N),i5);n.appendChild(d),d.addEventListener("click",()=>{if(0===a.size){alert("Please add a molecule to the moleculeList first.");return}let r=D(void 0);n.insertBefore(r,d);let g=T(nH(a),f,"",l(i,sJ.tagName,f),i5);g.classList.add(ei.tagName),r.appendChild(g),g.addEventListener("click",e=>{1===g.options.length&&(alert("As there is only one molecule it will be selected."),g.selectedIndex=0,g.dispatchEvent(new Event("change")))}),g.addEventListener("change",d=>{let h=d.target,m=a.get(h.value),c=new Map,u=m.getID();if(o.has(u)){alert("Molecule already selected as a reactant. Please select a different molecule                 (you may want to add more molecules to the moleculeList)."),r.removeChild(g);return}r.id=s.addID(i,sJ.tagName,u),c.set(sQ.s_ref,u);let p=new sQ(c),N=new sJ(new Map,p);o.set(u,N),e.addReactant(N),t.textContent=e.getLabel(),console.log("ReactionLabel="+e.getLabel());let x=R(p.getRef()+" role",sJ.roleOptions,"Role",p.getRole(),l(i,f),i4,i5),v=x.querySelector("select");v?.addEventListener("change",e=>{let t=e.target;p.setRole(t.value),console.log("Set Role to "+t.value),M(t)}),r.appendChild(x),r.removeChild(g),n6(r,i4,()=>{n.removeChild(r),o.delete(u)})}),1===g.options.length&&(g.selectedIndex=0,g.dispatchEvent(new Event("change")))})}function ir(e,t,s,i,n,a,o){let d=I(i7,s.addID(i,s0.tagName,N),i5);n.appendChild(d),d.addEventListener("click",()=>{if(0===a.size){alert("Please add a molecule to the moleculeList first.");return}let r=D(void 0);n.insertBefore(r,d);let g=T(nH(a),f,"",l(i,s0.tagName,f),i5);g.classList.add(ei.tagName),r.appendChild(g),g.addEventListener("click",e=>{1===g.options.length&&(alert("As there is only one molecule it will be selected."),g.selectedIndex=0,g.dispatchEvent(new Event("change")))}),g.addEventListener("change",d=>{let h=d.target,m=a.get(h.value),c=new Map,u=m.getID();if(o.has(u)){alert("Molecule already selected as a product. Please select a different molecule (you may want to add more molecules to the moleculeList)."),r.removeChild(g);return}r.id=s.addID(i,s0.tagName,u),c.set(sQ.s_ref,u);let p=new sQ(c),N=new s0(new Map,p);o.set(u,N),e.addProduct(N),t.textContent=e.getLabel(),console.log("ReactionLabel="+e.getLabel());let x=R(p.getRef()+" role",s0.roleOptions,"Role",p.getRole(),l(i,f),i4,i5),v=x.querySelector("select");v?.addEventListener("change",e=>{let t=e.target;p.setRole(t.value),console.log("Set Role to "+t.value),M(t)}),r.appendChild(x),r.removeChild(g),n6(r,i4,()=>{n.removeChild(r),o.delete(u)})}),1===g.options.length&&(g.selectedIndex=0,g.dispatchEvent(new Event("change")))})}function ig(e,t,s,i,n){let a=I(i7,e.addID(t,s1.tagName,N),i5);s.appendChild(a),a.addEventListener("click",()=>{if(0===i.size){alert("Please add a molecule to the moleculeList first.");return}let o=D(void 0);s.insertBefore(o,a);let d=T(nH(i),f,"",l(t,s1.tagName,f),i5);d.classList.add(ei.tagName),o.appendChild(d),d.addEventListener("click",e=>{1===d.options.length&&(alert("As there is only one molecule it will be selected."),d.selectedIndex=0,d.dispatchEvent(new Event("change")))}),d.addEventListener("change",a=>{let l=a.target,r=i.get(l.value),g=new Map,h=r.getID();if(n.has(h)){alert("Molecule already selected as a transitionState. Please select a different molecule (you may want to add more molecules to the moleculeList)."),s.removeChild(d);return}o.id=e.addID(t,s1.tagName,h),g.set(sQ.s_ref,h);let m=new sQ(g),c=new s1(new Map,m);n.set(h,c);let u=_(m.getRef()+" role "+s1.role,i5);o.appendChild(u),o.removeChild(d),n6(o,i4,()=>{o.removeChild(s),n.delete(h)})}),1===d.options.length&&(d.selectedIndex=0,d.dispatchEvent(new Event("change")))})}function ih(e,t,i,n,a,o){e.removeChild(t),i.removeIDs(n),i.removeIDs(l(n,ns)),i.removeIDs(l(n,sJ.tagName)),a.delete(o.id),s.getReactionList().removeReaction(o.id)}function im(e,t,s,i,n){let a=z(i.addID(t.id,ei.tagName));x(i.addID(t.id,ei.tagName,ns),t,null,a,ei.tagName,i4,i5);let o=I(i7,i.addID(t.id,ei.tagName,N),i5);if(a.appendChild(o),o.addEventListener("click",()=>{let s=new ei(new Map,ng),d=e.addBathGas(s),l=D(void 0,i5),r=i.addID(t.id,ei.tagName,d.toString()),g=iM(Array.from(nH(n)),s,!0,r);g.classList.add(ei.tagName),l.appendChild(g),n6(l,i4,t=>{a.removeChild(l),i.removeIDs(r),e.removeBathGas(t)}),a.insertBefore(l,o)}),null!=s){let d=Array.from(s.children).filter(e=>e.tagName===ei.tagName);if(d.length>0)for(let s=0;s<d.length;s++){let l=new ei(X(d[s]),k(A(d[s]))),r=e.addBathGas(l),g=i.addID(t.id,ei.tagName,r.toString()),h=D(g,i5);h.appendChild(iM(Array.from(nH(n)),l,!1,g)),n6(h,i4,t=>{a.removeChild(h),i.removeIDs(g),e.removeBathGas(t)}),a.insertBefore(h,o)}else{let s=D(void 0,i5),d=i.addID(t.id,ei.tagName,0);s.appendChild(iM(Array.from(nH(n)),void 0,!1,d)),n6(s,i4,t=>{a.removeChild(s),i.removeIDs(d),e.removeBathGas(t)}),a.insertBefore(s,o)}}}function ic(e,t,s,i,n){let d=nH(n),l=i.addID(t.id,er.tagName),r=z(l);x(i.addID(t.id,l,ns),t,null,r,er.tagName,i4,i5);let g=new er(new Map);if(s){let i=s.getElementsByTagName(er.tagName);if(i.length>0){if(i.length>1)throw Error("Expecting 1 "+er.tagName+" but finding "+i.length+"!");let s=X(i[0]),n=i[0].getElementsByTagName(el.tagName);if(0==n.length)console.warn("Expecting 1 or more "+el.tagName+" but finding 0! Please add some PTpairs in "+eg.tagName+" "+e.id+".");else{g=new er(s);for(let e=0;e<n.length;e++){let s=new el(X(n[e]));g.add(s);let i=n[e].getElementsByTagName(ei.tagName);i.length>0&&(i.length>1&&console.warn("xml_bathGass.length="+i.length),s.setBathGas(new ei(X(i[0]),k(A(i[0])))));let l=n[e].getElementsByTagName(en.tagName);l.length>0&&(l.length>1&&console.warn("xml_experimentRates.length="+l.length),s.setExperimentalRate(new en(X(l[0]),new(a(o))(k(A(l[0])).trim()))));let h=n[e].getElementsByTagName(ea.tagName);h.length>0&&(h.length>1&&console.warn("xml_experimentalYields.length="+h.length),s.setExperimentalYield(new ea(X(h[0]),new(a(o))(k(A(h[0])).trim()))));let m=n[e].getElementsByTagName(eo.tagName);m.length>0&&(m.length>1&&console.warn("xml_experimentalEigenvalues.length="+m.length),s.setExperimentalEigenvalue(new eo(X(m[0]),new(a(o))(k(A(m[0])).trim())))),r.appendChild(iN(g,r,s,t.id,e,d,i5))}}}}e.setPTs(g);let h=z(void 0,i5);r.appendChild(h);let m=I(i7,void 0,i4);h.appendChild(m),m.addEventListener("click",()=>{let e=new Map;e.set("units","Torr");let s=new el(e),i=g.add(s);console.log("Added new pTpair pTpairIndex="+i),r.insertBefore(iN(g,r,s,t.id,i,d,i5),h)});let c=I(nt,void 0,i4);h.appendChild(c),c.addEventListener("click",()=>{let e=D(void 0,i5),s=w("text",nE(er.tagName,"addFromSpreadsheet"),i5);e.appendChild(s),r.insertBefore(e,h),s.addEventListener("change",()=>{if(console.log("inputElement.value="+s.value),console.log("inputElement.value.length="+s.value.length),s.value.length>0){let i=s.value.split(" "),n=new Map;i[0].split("	").forEach((e,t)=>{n.set(e,t)}),console.log("pTpairsArray.length="+i.length);for(let e=1;e<i.length;e++){let s=i[e].split("	"),l=n.get("P"),m=new(a(o))(s[l]),c=n.get("units"),u=new Map;if(n.has("units")){let e=s[c];u.set("units",e)}let p=new el(u);g.add(p);let N=n.get("T"),f=new(a(o))(s[N]);if(p.setP(m),p.setT(f),n.has(el.s_excessReactantConc)){let e=s[n.get(el.s_excessReactantConc)];u.set(el.s_excessReactantConc,e)}if(n.has(el.s_percentExcessReactantConc)){let e=s[n.get(el.s_percentExcessReactantConc)];u.set(el.s_percentExcessReactantConc,e)}if(n.has(el.s_precision)){console.log("index.has(PTpair.s_precision)");let e=s[n.get(el.s_precision)];u.set(el.s_precision,e)}if(n.has(ei.tagName)){let e=s[n.get(ei.tagName)];p.setBathGas(new ei(new Map,e))}if(n.has(en.tagName)){let e=s[n.get(en.tagName)];if(e.length>0){u.set(en.tagName,e),p.setExperimentalRate(new en(new Map,new(a(o))(e)));let t=s[n.get(en.tagName+"_"+en.s_ref1)];p.getExperimentalRate()?.setRef1(t);let i=s[n.get(en.tagName+"_"+en.s_ref2)];p.getExperimentalRate()?.setRef2(i);let d=s[n.get(en.tagName+"_"+en.s_refReaction)];p.getExperimentalRate()?.setRefReaction(d);let l=s[n.get(en.tagName+"_"+en.s_error)];p.getExperimentalRate()?.setError(new(a(o))(l))}}if(n.has(ea.tagName)){let e=s[n.get(ea.tagName)];if(e.length>0){p.setExperimentalYield(new ea(new Map,new(a(o))(e)));let t=s[n.get(ea.tagName+"_"+ea.s_ref)];p.getExperimentalYield()?.setRef(t);let i=s[n.get(ea.tagName+"_"+ea.s_yieldTime)];p.getExperimentalYield()?.setYieldTime(new(a(o))(i));let d=s[n.get(ea.tagName+"_"+ea.s_error)];p.getExperimentalYield()?.setError(new(a(o))(d))}}if(n.has(eo.tagName)){let e=s[n.get(eo.tagName)];if(e.length>0){p.setExperimentalEigenvalue(new eo(new Map,new(a(o))(e)));let t=s[n.get(eo.tagName+"_"+eo.s_EigenvalueID)];p.getExperimentalEigenvalue()?.setEigenvalueID(t);let i=s[n.get(eo.tagName+"_"+eo.s_error)];p.getExperimentalEigenvalue()?.setError(new(a(o))(i))}}let x=g.ptps.length-1;r.insertBefore(iN(g,r,p,t.id,x,d,i5),h)}r.removeChild(e)}})});let u=I("Remove All",void 0,i4);h.appendChild(u),u.addEventListener("click",()=>{g.clear();let e=r.firstChild;for(;null!=e&&e!=h;){let t=e.nextSibling;r.removeChild(e),e=t}})}function iu(e,t,i){let n=I(i7,void 0,i5);return e.appendChild(n),n.addEventListener("click",a=>{let o,d=s.getNextConditionsID();console.log("Add Conditions "+d.toString());let r=t.addID(eg.tagName,d.toString()),g=z(r,i4),h=nE(r,ns);if(d>0){let t=document.getElementById(l(eg.tagName,(d-1).toString(),ns)).nextElementSibling;o=null!=t&&t.parentElement==e?t:n}else o=n;x(h,e,o,g,eg.tagName+" "+d.toString(),i4,i5);let m=ip(new Map,d);im(m,g,null,t,i),ic(m,g,null,t,i),n6(g,i5,s.removeConditions.bind(s),d).addEventListener("click",e=>{nw(h),t.removeIDs(r)})}),n}function ip(e,t){let i=new eg(e,t);return s.addConditions(i),i}function iN(e,t,s,i,n,a,o){let d=D(nE(t.id,n),o);return ix(d,el.s_P,s.getP.bind(s),s.setP.bind(s)),n9(tb.pressureUnits,s.attributes,d,null,el.tagName,el.tagName,i4,i5),ix(d,el.s_T,s.getT.bind(s),s.setT.bind(s)),iE(d,s,el.s_excessReactantConc,iC),function(e,t){let s=nE(e.id,el.s_percentExcessReactantConc),i=z(s,i4);e.appendChild(i);let n=el.s_percentExcessReactantConc,a=n+i9,o=n+i8,d=I(o,nE(s,N),i4);i.appendChild(d),d.classList.add(na),d.classList.add(no),t.attributes.get(n)?.toLowerCase()=="true"?(d.classList.toggle(no),d.textContent=a):(d.classList.toggle(na),d.textContent=o),d.addEventListener("click",e=>{d.classList.toggle(na),d.classList.toggle(no),d.textContent===o?(d.textContent=a,t.attributes.set(n,"true")):(d.textContent=o,t.attributes.delete(n))})}(d,s),iE(d,s,el.s_precision,iy),function(e,t,s){let i=nE(e.id,ei.tagName),n=z(i,i4);e.appendChild(n);let a=ei.tagName,o=a+i9,d=a+i8,l=I(d,nE(i,N),i4);n.appendChild(l),l.classList.add(na),l.classList.add(no);let r=nE(i,nn),g=t.getBathGas();void 0==g?(l.classList.toggle(na),l.textContent=d):(l.classList.toggle(no),l.textContent=o,!1==s.has(g.value)&&console.warn("moleculeKeys does not contain "+g.value),n.appendChild(ib(r,t,g,!1,s))),l.addEventListener("click",e=>{l.classList.toggle(na),l.classList.toggle(no),l.textContent===d?(l.textContent=o,n.appendChild(ib(r,t,g,!1,s))):(l.textContent=d,nw(r))})}(d,s,a),iw(d,s,n,en.tagName,e=>e.getExperimentalRate(),iS),iw(d,s,n,ea.tagName,e=>e.getExperimentalYield(),iT),iw(d,s,n,eo.tagName,e=>e.getExperimentalEigenvalue(),iR),n6(d,i4,(s,i,n)=>{t.removeChild(s),void 0!==i&&e.remove(i),n.removeBathGas()},d,n,s),d}function ix(e,t,s,i){let n=E("text",el.tagName+"_"+t,i4,i3,e=>{let n=e.target;try{i(new(a(o))(n.value)),console.log(`Set ${t} to ${n.value}`)}catch(e){alert("Invalid input, resetting..."),d.value=iv(s)}b(n)},iv(s),t),d=n.querySelector("input");d.value=iv(s),b(d),e.appendChild(n)}function iv(e){let t=e();return void 0!==t?t.toString():""}function iE(e,t,s,i){let n=nE(e.id,s),a=z(n,i4);e.appendChild(a);let o=s+i9,d=s+i8,l=I(d,nE(n,N),i4);a.appendChild(l),l.classList.add(na),l.classList.add(no);let r=nE(n,nn);if(t.attributes.has(s)){l.classList.toggle(no),l.textContent=o;let e=i(r,t);a.insertBefore(e,l.nextSibling)}else l.classList.toggle(na),l.textContent=d;l.addEventListener("click",e=>{if(l.classList.toggle(na),l.classList.toggle(no),l.textContent===d){l.textContent=o;let e=i(r,t);a.insertBefore(e,l.nextSibling)}else l.textContent=d,nw(r)})}function iw(e,t,s,i,n,a){let o=nE(e.id,i),d=z(o,i4);e.appendChild(d);let l=i+i9,r=i+i8,g=I(r,nE(o,N),i4);d.appendChild(g),g.classList.add(na),g.classList.add(no);let h=nE(o,nn);void 0==n(t)?(g.classList.toggle(na),g.textContent=r):(g.classList.toggle(no),g.textContent=l,d.appendChild(a(h,t,s))),g.addEventListener("click",e=>{g.classList.toggle(na),g.classList.toggle(no),g.textContent===r?(g.textContent=l,d.appendChild(a(h,t,s))):(g.textContent=r,nw(h))})}function iy(e,t){let s;s=t.attributes.has(el.s_precision)?t.attributes.get(el.s_precision):tb.precisionOptions[0];let i=T(tb.precisionOptions,el.s_precision,s,e,i4);return i.addEventListener("change",e=>{let s=e.target;t.setPrecision(s.value),console.log("Set "+el.s_precision+" to "+s.value),M(s)}),M(i),i}function iC(e,t){let s,i=w("number",e,i4);return s=t.attributes.has(el.s_excessReactantConc)?t.attributes.get(el.s_excessReactantConc):NaN.toString(),console.log(el.s_excessReactantConc+"="+s),i.value=s,i.addEventListener("change",e=>{let s=e.target;t.setExcessReactantConc(s.value),console.log("Set "+el.s_excessReactantConc+" to "+s.value),b(s)}),b(i),i}function ib(e,t,s,i,n){let a=iM(Array.from(n),s,i,e);return a.addEventListener("change",e=>{let s=e.target;t.setBathGas(new ei(new Map,s.value)),console.log("Set bathGas to "+s.value),M(s)}),M(a),a}function iM(e,t,s,i){let n;if(s)e.push(ng);else{let t=e.indexOf(ng);t>-1&&e.splice(t,1)}void 0==t?(t=new ei(new Map,ng),n=ng):n=t.value;let a=T(e,ei.tagName,n,nE(i,f),i4);return a.classList.add(ei.tagName),ae(e,a),a.addEventListener("change",e=>{let s=e.target;t.value=s.value,console.log("Added "+s.value+" as "+ei.tagName),M(s)}),a.value=n,M(a),a}function iS(e,t){return iI(t,e,e=>e.getExperimentalRate(),(e,t)=>e.setExperimentalRate(t),en,[{tagName:en.tagName,type:"number",eventHandler:(e,s)=>al(t.getExperimentalRate(),s),valueGetter:()=>t.getExperimentalRate().value.toString()},{tagName:en.tagName+"_"+en.s_ref1,type:"text",eventHandler:(e,s)=>t.getExperimentalRate()?.setRef1(s.value),valueGetter:()=>t.getExperimentalRate().getRef1()},{tagName:en.tagName+"_"+en.s_ref2,type:"text",eventHandler:(e,s)=>t.getExperimentalRate()?.setRef2(s.value),valueGetter:()=>t.getExperimentalRate().getRef2()},{tagName:en.tagName+"_"+en.s_refReaction,type:"text",eventHandler:(e,s)=>t.getExperimentalRate()?.setRefReaction(s.value),valueGetter:()=>t.getExperimentalRate().getRefReaction()},{tagName:en.tagName+"_"+en.s_error,type:"number",eventHandler:(e,s)=>t.getExperimentalRate()?.setError(new(a(o))(s.value)),valueGetter:()=>t.getExperimentalRate().getError().toString()}])}function iT(e,t){return iI(t,e,e=>e.getExperimentalYield(),(e,t)=>e.setExperimentalYield(t),ea,[{tagName:ea.tagName,type:"number",eventHandler:(e,s)=>al(t.getExperimentalYield(),s),valueGetter:()=>t.getExperimentalYield().value.toString()},{tagName:ea.tagName+"_"+ea.s_ref,type:"text",eventHandler:(e,s)=>t.getExperimentalYield()?.setRef(s.value),valueGetter:()=>t.getExperimentalYield().getRef()},{tagName:ea.tagName+"_"+ea.s_yieldTime,type:"number",eventHandler:(e,s)=>t.getExperimentalYield()?.setYieldTime(new(a(o))(s.value)),valueGetter:()=>t.getExperimentalYield().getYieldTime().toString()},{tagName:ea.tagName+"_"+ea.s_error,type:"number",eventHandler:(e,s)=>t.getExperimentalYield()?.setError(new(a(o))(s.value)),valueGetter:()=>t.getExperimentalYield().getError().toString()}])}function iR(e,t){return iI(t,e,e=>e.getExperimentalEigenvalue(),(e,t)=>e.setExperimentalEigenvalue(t),eo,[{tagName:eo.tagName,type:"number",eventHandler:(e,s)=>al(t.getExperimentalEigenvalue(),s),valueGetter:()=>t.getExperimentalEigenvalue().value.toString()},{tagName:eo.tagName+"_"+eo.s_EigenvalueID,type:"text",eventHandler:(e,s)=>t.getExperimentalEigenvalue()?.setEigenvalueID(s.value),valueGetter:()=>t.getExperimentalEigenvalue().getEigenvalueID()},{tagName:eo.tagName+"_"+eo.s_error,type:"number",eventHandler:(e,s)=>t.getExperimentalEigenvalue()?.setError(new(a(o))(s.value)),valueGetter:()=>t.getExperimentalEigenvalue().getError().toString()}])}function iI(e,t,s,i,n,a){let o=z(void 0,i4);o.id=t;let d=s(e);for(let s of(void 0==d&&i(e,d=new n(new Map,nL)),a)){let e=t+"_"+s.tagName;o.appendChild(E(s.type,e,i4,i3,e=>{let t=e.target;s.eventHandler(e,t),console.log("Set "+s.tagName+" to "+t.value),b(t)},s.valueGetter(),s.label||""))}return o}function iz(e,t){let i=new tf(e,t);return s.addModelParameters(i),i}function iD(e){let t,s;if(void 0!=nU){let i=nU.values.get(e)??"";t=""==i?nL:new(a(o))(i),s=nU.attributess.get(e)??new Map}else console.log(e+" set using hardcoded default."),t=new(a(o))(101),(s=new Map).set(np,"cm-1");return new tc(s,t)}function i_(e,t,s,i,n,d,l){let r,g,h=n.tagName,m=D(t.addID(i.id,h),i5);i.appendChild(m);let c=h+i9,u=h+i8,p=I(h,t.addID(i.id,h,N),i4);p.classList.add(na),p.classList.add(no),m.appendChild(p);let f=t.addID(i.id,h,nn);if(null!=s){let t=s.getElementsByTagName(h);if(1==t.length){g=k(A(t[0]));let s=new(a(o))(g);r=new n(X(t[0]),s),p.textContent=c,iL(e,m,r,f,g,d,void 0),p.classList.toggle(no)}else g="",r=new n(new Map,nL),p.textContent=u,p.classList.toggle(na)}else g="",r=new n(new Map,nL),p.textContent=u,p.classList.toggle(na);p.addEventListener("click",()=>{e.index.has(h)?(l(),nw(f),t.removeIDs(f),p.textContent=u):(iL(e,m,r,f,g,d,void 0),p.textContent=c),p.classList.toggle(na),p.classList.toggle(no)})}function iL(e,t,s,i,n,a,o){a.call(e,s);let d=w("text",i,i4);t.appendChild(d),d.addEventListener("change",e=>{let t=e.target;al(s,t),b(t)}),d.value=n,b(d),n9(o,s.attributes,t,d,l(i,np),s.constructor.tagName,i4,i4)}function iP(e,t){let i=I(i7,void 0,i5),n=tf.tagName;return e.appendChild(i),i.addEventListener("click",a=>{let o,d=s.getNextModelParametersID();console.log("Add "+n+d.toString());let r=nE(n,d.toString()),g=z(r,i4),h=nE(r,ns);if(d>0){let t=document.getElementById(l(n,(d-1).toString(),ns)).nextElementSibling;o=null!=t&&t.parentElement==e?t:i}else o=i;x(h,e,o,g,n+" "+d.toString(),i4,i5);let m=iz(new Map,d);(function(e,t,s){let i,n=tc.tagName,a=D(s.addID(t.id,n),i5);t.appendChild(a);let o=n+i9,d=n+i8,r=I(n,s.addID(t.id,n,N),i4);r.classList.add(na),r.classList.add(no),a.appendChild(r);let g=s.addID(t.id,n,nn);r.textContent=d,r.classList.toggle(na),r.addEventListener("click",()=>{e.index.has(tc.tagName)?(console.log("Removing GrainSize input"),e.removeGrainSize(),document.getElementById(g)?.remove(),document.getElementById(l(g,np))?.remove(),r.textContent=d):(console.log("Adding GrainSize input"),i=iD(n),e.setGrainSize(i),iL(e,a,i,g,i.value.toString(),e.setGrainSize,tb.energyUnits),r.textContent=o),r.classList.toggle(na),r.classList.toggle(no)})})(m,g,t),i_(m,t,null,g,ts,m.setAutomaticallySetMaxEne,m.removeAutomaticallySetMaxEne),i_(m,t,null,g,tp,m.setEnergyAboveTheTopHill,m.removeEnergyAboveTheTopHill),i_(m,t,null,g,tN,m.setMaxTemperature,m.removeMaxTemperature),n6(g,i5,s.removeModelParameters.bind(s),d).addEventListener("click",e=>{nw(h),t.removeIDs(r)})}),i}function iB(e){return[{class:eh,setMethod:e.setCalculateRateCoefficientsOnly,removeMethod:e.removeCalculateRateCoefficientsOnly},{class:em,setMethod:e.setPrintCellDOS,removeMethod:e.removePrintCellDOS},{class:ec,setMethod:e.setPrintCellTransitionStateFlux,removeMethod:e.removePrintCellTransitionStateFlux},{class:eu,setMethod:e.setPrintReactionOperatorColumnSums,removeMethod:e.removePrintReactionOperatorColumnSums},{class:ep,setMethod:e.setPrintGrainBoltzmann,removeMethod:e.removePrintGrainBoltzmann},{class:eN,setMethod:e.setPrintGrainDOS,removeMethod:e.removePrintGrainDOS},{class:ef,setMethod:e.setPrintGrainkbE,removeMethod:e.removePrintGrainkbE},{class:ex,setMethod:e.setPrintGrainkfE,removeMethod:e.removePrintGrainkfE},{class:ev,setMethod:e.setPrintTSsos,removeMethod:e.removePrintTSsos},{class:eE,setMethod:e.setPrintGrainedSpeciesProfile,removeMethod:e.removePrintGrainedSpeciesProfile},{class:ew,setMethod:e.setPrintGrainTransitionStateFlux,removeMethod:e.removePrintGrainTransitionStateFlux},{class:ey,setMethod:e.setPrintReactionOperatorSize,removeMethod:e.removePrintReactionOperatorSize},{class:eC,setMethod:e.setPrintSpeciesProfile,removeMethod:e.removePrintSpeciesProfile},{class:eb,setMethod:e.setPrintPhenomenologicalEvolution,removeMethod:e.removePrintPhenomenologicalEvolution},{class:eM,setMethod:e.setPrintTunnelingCoefficients,removeMethod:e.removePrintTunnelingCoefficients},{class:eS,setMethod:e.setPrintCrossingCoefficients,removeMethod:e.removePrintCrossingCoefficients},{class:eT,setMethod:e.setTestDOS,removeMethod:e.removeTestDOS},{class:eR,setMethod:e.setTestRateConstants,removeMethod:e.removeTestRateConstants},{class:eI,setMethod:e.setUseTheSameCellNumberForAllConditions,removeMethod:e.removeUseTheSameCellNumberForAllConditions},{class:ez,setMethod:e.setForceMacroDetailedBalance,removeMethod:e.removeForceMacroDetailedBalance}]}function iA(e){return[{class:e7,setMethod:e.setEigenvalues,removeMethod:e.removeEigenvalues},{class:te,setMethod:e.setShortestTimeOfInterest,removeMethod:e.removeShortestTimeOfInterest},{class:tt,setMethod:e.setMaximumEvolutionTime,removeMethod:e.removeMaximumEvolutionTime},{class:ts,setMethod:e.setAutomaticallySetMaxEne,removeMethod:e.removeAutomaticallySetMaxEne},{class:ti,setMethod:e.setDiagramEnergyOffset,removeMethod:e.removeDiagramEnergyOffset}]}function ik(e,t){let i=I(i7,void 0,i5);return e.appendChild(i),i.addEventListener("click",n=>{let a,o=s.getNextControlID();console.log("Add Control "+o.toString());let d=t.addID(ta.tagName,o.toString()),r=z(d,i4);if(o>0){let t=document.getElementById(l(ta.tagName,(o-1).toString(),ns)).nextElementSibling;a=null!=t&&t.parentElement==e?t:i}else a=i;let g=t.addID(d,ns);x(g,e,a,r,ta.tagName+" "+o.toString(),i4,i5);let h=iG(new Map,o),m=new Map;iB(h).forEach(e=>{iU(h,r,t,m,null,null,e.class,e.setMethod,e.removeMethod)});let c=D(void 0,i5);new Map([...m.entries()].sort()).forEach(e=>{c.appendChild(e)}),r.appendChild(c),iF(h,r,t,null,i5),iq(h,r,t,null,i5),iA(h).forEach(e=>{iU(h,r,t,m,null,i5,e.class,e.setMethod,e.removeMethod,!0)}),n6(r,i5,s.removeControl.bind(s),o).addEventListener("click",e=>{nw(g),t.removeIDs(d);let s=l(d,e_.tagName);t.removeIDs(s);let i=l(s,"details");t.removeIDs(i);let n=l(i,"select");t.removeIDs(n)})}),i}function iG(e,t){let i=new ta(e,t);return s.addControl(i),i}function iO(e,t,s,i,n,a){i.call(e,s);let o=w("number",n,i4);o.addEventListener("change",e=>{let t=e.target;al(s,t),b(t)}),o.value=a,b(o),t.appendChild(o)}function iU(e,t,s,i,n,d,l,r,g,h=!1){let m,c,u,p=l.tagName,N=p+i9,f=p+i8,x=I(f,void 0,i4);if(x.classList.add(na),x.classList.add(no),i&&i.set(p,x),d&&(c=D(u=s.addID(t.id,p),d),t.appendChild(c),c.appendChild(x),u=s.addID(t.id,u,nn)),n){let t=n.getElementsByTagName(p);if(1==t.length){if(h){let s,i=k(A(t[0]));s=new(a(o))("all"==i?0:i),m=new l(X(t[0]),s),iO(e,c,m,r,u,i)}else m=new l(X(t[0])),r.call(e,m);x.textContent=N,x.classList.toggle(no)}else x.textContent=f,x.classList.toggle(na)}else m=new l(new Map),x.textContent=f,x.classList.toggle(na);x.addEventListener("click",t=>{e.index.has(p)?(h&&nw(u),g.call(e),x.textContent=f):(h?iO(e,c,m,r,u,""):r.call(e,m),x.textContent=N),x.classList.toggle(na),x.classList.toggle(no)})}function iq(e,t,s,i,n){let d,l=D(void 0,n);t.appendChild(l);let r=e_.tagName,g=r+i9,h=r+i8,m=I(h,void 0,i4);l.appendChild(m),m.classList.add(na),m.classList.add(no);let c=s.addID(t.id,r),u=D(c,i4);l.appendChild(u);let p=e_.options,N=s.addID(c,"details"),f=s.addID(N,"select");if(null!=i){let t=i.getElementsByTagName(r);if(t.length>0){if(t.length>1)throw Error("More than one CalcMethod element.");let i=X(t[0]),n=i.get("xsi:type");d=function e(t,s,i,n,d,l,r,g,h,m){let c;let u=iK(t,s,i,d,r,g,h,m);u.value=g,i.appendChild(u);let p=D(h,i4);if(i.appendChild(p),g==eL.xsi_type||g==eL.xsi_type2)c=new eL(l);else if(g==eP.xsi_type||g==eP.xsi_type2)c=new eP(l);else if(g==eA.xsi_type||g==eA.xsi_type2){let e=new eA(l);c=e;let t=n[0].getElementsByTagName(eB.tagName);if(t.length>0){if(1==t.length){let s=new(a(o))(k(A(t[0]))),i=new eB(X(t[0]),s);e.setFittingIterations(i)}else throw Error("More than one FittingIterations element.")}iH(p,e)}else if(g==eU.xsi_type||g==eU.xsi_type2){let e=new eU(l);function N(e,t,s){let i=ek.tagName,n=e[0].getElementsByTagName(i);if(n.length>0){if(1==n.length){let e=new(a(o))(k(A(n[0])));s(new t(X(n[0]),e))}else throw Error(`More than one ${i} element.`)}}c=e,N(n,ek,e.setMarquardtIterations.bind(e)),N(n,eG,e.setMarquardtTolerance.bind(e)),N(n,eO,e.setMarquardtDerivDelta.bind(e)),ij(p,e)}else if(g==eQ.xsi_type||g==eQ.xsi_type2){let e=new eQ(l);function N(e,t,s,i){let n=t.tagName,d=e[0].getElementsByTagName(n);if(d.length>0){if(1==d.length){let e=k(A(d[0]));i&&void 0!=e&&""!=e&&"NaN"!=e&&(e=new(a(o))(e)),s(new t(X(d[0]),e))}else throw Error(`More than one ${n} element.`)}}c=e,N(n,eF,e.setFormat.bind(e),!1),N(n,eV,e.setPrecision.bind(e),!1),N(n,eH,e.setChebNumTemp.bind(e),!0),N(n,ej,e.setChebNumConc.bind(e),!0),N(n,eX,e.setChebMaxTemp.bind(e),!0),N(n,eY,e.setChebMinTemp.bind(e),!0),N(n,e$,e.setChebMaxConc.bind(e),!0),N(n,eW,e.setChebMinConc.bind(e),!0),N(n,eK,e.setChebTExSize.bind(e),!0),N(n,eZ,e.setChebPExSize.bind(e),!0),iX(p,e)}else if(g==e3.xsi_type||g==e3.xsi_type2){let e=new e3(l);function N(e,t,s){let i=t.tagName,n=e[0].getElementsByTagName(i);if(n.length>0){if(1==n.length){let e=new(a(o))(k(A(n[0])));s(new t(X(n[0]),e))}else throw Error(`More than one ${i} element.`)}}c=e,N(n,eJ,e.setTmin.bind(e)),N(n,e0,e.setTmid.bind(e)),N(n,e1,e.setTmax.bind(e)),N(n,e2,e.setTstep.bind(e)),iY(p,e)}else if(g==e9.xsi_type||g==e9.xsi_type2){let e=new e9(l);function N(e,t,s){let i=t.tagName,n=e[0].getElementsByTagName(i);if(n.length>0){if(1==n.length){let e=k(A(n[0]));void 0!=e&&(e=new(a(o))(e)),s(new t(X(n[0]),e))}else throw Error(`More than one ${i} element.`)}}c=e,N(n,e5,e.setSensitivityAnalysisSamples.bind(e)),N(n,e4,e.setSensitivityAnalysisOrder.bind(e)),N(n,e6,e.setSensitivityNumVarRedIters.bind(e)),N(n,e8,e.setSensitivityVarRedMethod.bind(e)),iW(p,e)}else{let a=l.get("name");if(void 0!=a&&a!==g)return l.set("xsi:type",a),console.warn(`Using name attribute as xsi:type: ${a}`),e(t,s,i,n,d,l,r,a,h,m);throw Error(`Unable to determine calculation method for xsi_type: ${g}`)}return c}(s,e,u,t,p,i,r,n,N,f),e.setCalcMethod(d),m.classList.toggle(no),m.textContent=g}else m.classList.toggle(na),m.textContent=h}else m.classList.toggle(na),m.textContent=h;m.addEventListener("click",t=>{if(e.index.has(r))null!=e.getCalcMethod()&&(e.removeCalcMethod(),s.removeIDs(N),s.removeIDs(f),m.textContent=h,m.classList.toggle(na),m.classList.toggle(no));else{p[p.length-1]!=ng&&p.push(ng),s.removeIDs(N),s.removeIDs(f);let t=iK(s,e,l,p,r,ng,N,f);u.appendChild(t),m.textContent=g,m.classList.toggle(na),m.classList.toggle(no)}})}function iF(e,t,s,i,n){let a=tn.tagName,o=D(s.addID(t.id,a),n);t.appendChild(o);let d=a+i9,l=a+i8,r=I(a,s.addID(t.id,a,N),i4);o.appendChild(r),r.classList.add(na),r.classList.add(no);let g=s.addID(t.id,a,e1.tagName),h=s.addID(t.id,a,eJ.tagName),m=s.addID(t.id,a,e2.tagName);if(i){let t=i.getElementsByTagName(a);1==t.length?(iV(e,o,t,g,h,m),r.classList.toggle(no),r.textContent=d):(r.classList.toggle(na),r.textContent=l)}else r.classList.toggle(na),r.textContent=l;r.addEventListener("click",t=>{e.index.has(a)?(e.removeTestMicroRates(),document.getElementById(g)?.remove(),document.getElementById(h)?.remove(),document.getElementById(m)?.remove(),r.textContent=l):(iV(e,o,null,g,h,m),r.textContent=d),r.classList.toggle(na),r.classList.toggle(no)})}function iV(e,t,s,i,n,d){let l,r;if(null!=s&&s.length>0){if(s.length>1)throw Error("More than one TestMicroRates element.");r=new tn(l=X(s[0]))}else(l=new Map).set("Tmax","0"),l.set("Tmin","0"),l.set("Tstep","0"),r=new tn(l);e.setTestMicroRates(r);let g=r.getTmax(),h=E("text",i+"_input",i4,i3,e=>{let t=e.target;try{r.setTmax(new(a(o))(t.value)),console.log("Set Tmax to "+t.value)}catch(e){alert("Invalid input, resetting..."),t.value=g.toString()}b(t)},g.toString(),"Tmax");h.id=i,b(h.querySelector("input")),t.appendChild(h);let c=r.getTmin(),u=E("number",n+"_input",i4,i3,e=>{let t=e.target;m(t.value)?(r.setTmin(new(a(o))(t.value)),console.log("Set Tmin to "+t.value)):(alert("Value is not numeric, resetting..."),t.value=c.toString()),b(t)},c.toString(),"Tmin");u.id=n,b(u.querySelector("input")),t.appendChild(u);let p=r.getTstep(),N=E("text",d+"_input",i4,i3,e=>{let t=e.target;m(t.value)?(r.setTstep(new(a(o))(t.value)),console.log("Set Tstep to "+t.value)):(alert("Value is not numeric, resetting..."),t.value=p.toString()),b(t)},p.toString(),"Tstep");N.id=d,b(N.querySelector("input")),t.appendChild(N)}function iH(e,t){let s=t.getFittingIterations()||new eB(new Map,nL);t.setFittingIterations(s),e.appendChild(E("number",l(e.id,eB.tagName,nn),i4,i3,e=>{let t=e.target;m(t.value)?(s.value=new(a(o))(t.value),console.log("Set FittingIterations to "+t.value)):(alert("Value is not numeric, resetting..."),t.value=s.value.toString()),b(t)},s.value.toString(),eB.tagName))}function ij(e,t){function s(e,t,s,i){let n=l(t.id,e.tagName,nn),d=e.value.toString(),r=e.tagName;t.appendChild(E("number",n,s,i,t=>{let s=t.target;m(s.value)?(e.value=new(a(o))(s.value),console.log("Set "+e.tagName+" to "+s.value)):(alert("Value is not numeric, resetting..."),s.value=e.value.toString()),b(s)},d,r))}let i=t.getMarquardtIterations()||new ek(new Map,nL);t.setMarquardtIterations(i),s(i,e,i4,i3);let n=t.getMarquardtTolerance()||new eG(new Map,nL);t.setMarquardtTolerance(n),s(n,e,i4,i3);let d=t.getMarquardtDerivDelta()||new eO(new Map,nL);t.setMarquardtDerivDelta(d),s(d,e,i4,i3)}function iX(e,t){let s=t.getFormat()||new eF(new Map,eF.options[0]);function i(t,s,i,n,a){let o=s()||new t(new Map,a[0]);i(o);let d=R(n,a,n,o.value,e.id,i4,i4);d.querySelector("select")?.addEventListener("change",e=>{let t=e.target;o.value=t.value,console.log(`Set ${n} to `+t.value),M(t)}),e.appendChild(d)}function n(t,s,i,n){let a=s()||new t(new Map,NaN);i(a),e.appendChild(E("text",e.id+`_${n}_input`,i4,i3,i$(a,n),a.value.toString(),n))}i(eF,t.getFormat.bind(t),t.setFormat.bind(t),eF.tagName,eF.options),i(eF,()=>s.getRateUnits(),s.setRateUnits.bind(s),eF.rateUnits,eF.rateUnitsOptions),i(eV,t.getPrecision.bind(t),t.setPrecision.bind(t),eV.tagName,tb.precisionOptions),n(eH,t.getChebNumTemp.bind(t),t.setChebNumTemp.bind(t),eH.tagName),n(ej,t.getChebNumConc.bind(t),t.setChebNumConc.bind(t),ej.tagName),n(eX,t.getChebMaxTemp.bind(t),t.setChebMaxTemp.bind(t),eX.tagName),n(eY,t.getChebMinTemp.bind(t),t.setChebMinTemp.bind(t),eY.tagName),n(e$,t.getChebMaxConc.bind(t),t.setChebMaxConc.bind(t),e$.tagName),n(eW,t.getChebMinConc.bind(t),t.setChebMinConc.bind(t),eW.tagName),n(eK,t.getChebTExSize.bind(t),t.setChebTExSize.bind(t),eK.tagName),n(eZ,t.getChebPExSize.bind(t),t.setChebPExSize.bind(t),eZ.tagName)}function iY(e,t){function s(t,s,i,n){let a=s()||new t(new Map,NaN);i(a),e.appendChild(E("text",e.id+`_${n}_input`,i4,i3,i$(a,n),a.value.toString(),n))}s(eJ,t.getTmin.bind(t),t.setTmin.bind(t),eJ.tagName),s(e0,t.getTmid.bind(t),t.setTmid.bind(t),e0.tagName),s(e1,t.getTmax.bind(t),t.setTmax.bind(t),e1.tagName),s(e2,t.getTstep.bind(t),t.setTstep.bind(t),e2.tagName)}function i$(e,t){return t=>{let s=t.target;try{e.value=new(a(o))(s.value)}catch(t){alert("Invalid input value "+s.value+" , resetting..."),s.value=e.value.toString()}b(s)}}function iW(e,t){function s(t,s,i,n){let a=s()||new t(new Map,NaN);i(a),e.appendChild(E("text",l(e.id,n,nn),i4,i3,i$(a,n),a.value.toString(),n))}s(e5,t.getSensitivityAnalysisSamples.bind(t),t.setSensitivityAnalysisSamples.bind(t),e5.tagName),s(e4,t.getSensitivityAnalysisOrder.bind(t),t.setSensitivityAnalysisOrder.bind(t),e4.tagName),s(e6,t.getSensitivityNumVarRedIters.bind(t),t.setSensitivityNumVarRedIters.bind(t),e6.tagName);let i=t.getSensitivityVarRedMethod()||new e8(new Map,"");t.setSensitivityVarRedMethod(i);let n=e8.tagName;e.appendChild(R(n,e8.options,n,e8.options[0],l(e.id,n,"select"),i4,i4));let a=e.querySelector("select");a?.addEventListener("change",e=>{let t=e.target;i.value=t.value,console.log(n+" set to "+t.value),M(t)})}function iK(e,t,s,i,n,a,o,d){let l=T(i,n,a,d,i4);return s.appendChild(l),ae(i,l),l.addEventListener("change",i=>{let n=document.getElementById(o);null!=n&&(n.remove(),e.removeIDs(o)),n=D(o,i4),s.appendChild(n);let a=i.target,d=a.value,l=new Map;if(l.set("xsi:type",d),d==eL.xsi_type||d==eL.xsi_type2)t.setCalcMethod(new eL(l));else if(d==eP.xsi_type||d==eP.xsi_type2)t.setCalcMethod(new eP(l));else if(d==eA.xsi_type||d==eA.xsi_type2){let e=new eA(l);t.setCalcMethod(e),iH(n,e)}else if(d==eU.xsi_type||d==eU.xsi_type2){let e=new eU(l);t.setCalcMethod(e),ij(n,e)}else if(d==eQ.xsi_type||d==eQ.xsi_type2){let e=new eQ(l);t.setCalcMethod(e),iX(n,e)}else if(d==e3.xsi_type||d==e3.xsi_type2){let e=new e3(l);t.setCalcMethod(e),iY(n,e)}else if(d==e9.xsi_type||d==e9.xsi_type2){let e=new e9(new Map);t.setCalcMethod(e),iW(n,e)}else throw Error("Unknown CalcMethod type.");M(a)}),l}function iZ(e,t,s,i,n,a,o,d,l,r,g){let h=i+(a-i)/2;iJ(e,g,d,t,h-i0(e,g,d)/2,o+l),iJ(e,r,d,t,h-i0(e,r,d)/2,o+3*l),iQ(e,t,s,i,n,a,o)}function iQ(e,t,s,i,n,a,o){e.beginPath(),e.strokeStyle=t,e.lineWidth=s,e.moveTo(i,n),e.lineTo(a,o),e.stroke()}function iJ(e,t,s,i,n,a){e.save(),e.translate(n,a),e.scale(1,-1),e.font=s,e.fillStyle=i,e.fillText(t,0,0),e.restore()}function i0(e,t,s){return e.font=s,e.measureText(t).width}function i1(e,t,s,i,n,a,o,d,l,r,g){let h=nE(e.id,N+"s"),m=z(h);e.appendChild(m);let c=nE(h,N),u="Pop into a new Window",p=I(u,c);m.appendChild(p);let f=document.createElement("canvas");f.id=t,e.appendChild(f),f.height=s,f.style.border="1px solid black",g&&i2(f,s,i,n,a,o,l,r),p.addEventListener("click",()=>{if(null==d){let e=document.createElement("canvas");e.id=t,(d=window.open("",nY,"width="+f.width+", height="+f.height)).document.body.appendChild(e),g&&i2(e,s,i,n,a,o,l,r),nw(t),p.textContent="Pop into this Window"}else(f=document.createElement("canvas")).id=t,e.appendChild(f),f.height=s,f.style.border="1px solid black",g&&i2(f,s,i,n,a,o,l,r),d.close(),d=null,p.textContent=u}),ao(f,m,null,nY)}function i2(e,t,s,i,n,a,o,l){if(console.log("drawReactionDiagram"),null!=e&&l.size>0){var r,g;let h,m,c,N,f,x,v,E,w;s?(h="lightgrey",m="lightblue",c="orange"):(h="darkgrey",m="blue",c="darkorange");let y=e.getContext("2d");y.clearRect(0,0,e.width,e.height),y.font="bold "+i;let C=(r=y.font,y.font=r,(g=y.measureText("Aj")).actualBoundingBoxAscent+g.actualBoundingBoxDescent),b=[],M=new Set,S=new Set,T=new Set,R=new Map,I=new Map,z=0;l.forEach(function(e,t){let s=e.getTransitionStates(),i=e.getReactantsLabel();if(void 0!=i){b.push(i),M.has(i)&&S.add(i);let t=e.getReactantsEnergy(nj,o);N=p(N,t),f=u(f,t),I.set(i,t),!R.has(i)&&(R.set(i,z),z++)}let n=e.getProductsLabel();if(void 0!=n){M.add(n);let t=e.getProductsEnergy(nj,o);if(N=p(N,t),f=u(f,t),I.set(n,t),R.has(n)){z--;let e=d(R,n);R.forEach(function(t,s){t>e&&R.set(s,t-1)}),void 0!=s&&(s.forEach(function(e,s){let i=e.getMolecule().getRef();T.add(i),R.set(i,z),t=nj(i,o).getEnergy()??nL,N=p(N,t),f=u(f,t),I.set(i,t),z++}),R.set(n,z),z++)}else void 0!=s&&s.forEach(function(e,s){let i=e.getMolecule().getRef();T.add(i),R.set(i,z),t=nj(i,o).getEnergy()??nL,N=p(N,t),f=u(f,t),I.set(i,t),z++}),R.set(n,z),z++}});let D=f.minus(N).toNumber(),_=[];R.forEach(function(e,t){_[e]=t});let L=0,P=0,B=new Map,A=new Map,k=new Map,G=new Map,O=new Map,U=new Map;_.forEach(function(e){let s=d(I,e),a=(s-N.toNumber())*t/(D+0)+0;w=Math.max(i0(y,s.toString(),i),i0(y,e,i)),v=L+w+5,E=x=a+n,B.set(e,[L,x]),A.set(e,[v,E]),M.has(e)&&(k.set(e,[L,x]),G.set(e,[v,E])),T.has(e)&&(O.set(e,[L,x]),U.set(e,[v,E])),L=v+10,P=v}),e.width=P;let q=t+4*C+2*n;e.height=q,y.transform(1,0,0,-1,0,q),l.forEach(function(e,t){let s=e.getTransitionStates(),i=e.getReactantsLabel(),n=e.getProductsLabel(),o=d(A,i),l=d(k,n);s.size>0?s.forEach(function(e,t){let s=d(O,t);iQ(y,h,a,o[0],o[1],s[0],s[1]);let i=d(U,t);iQ(y,h,a,i[0],i[1],l[0],l[1])}):iQ(y,h,a,o[0],o[1],l[0],l[1])}),b.forEach(function(e){let s=d(I,e),a=(s-N.toNumber())*t/(D+0)+0,o=d(B,e)[0],l=a+n,r=d(A,e)[0],g=s.toString();iZ(y,m,n,o,l,r,l,i,C,e,g)}),M.forEach(function(e){let s=d(I,e),a=(s-N.toNumber())*t/(D+0)+0,o=d(k,e)[0],l=a+n,r=d(G,e)[0],g=s.toString();S.has(e)?iZ(y,c,n,o,l,r,l,i,C,e,g):iZ(y,"green",n,o,l,r,l,i,C,e,g)}),T.forEach(function(e){let s=d(I,e),a=(s-N.toNumber())*t/(D+0)+0,o=d(O,e)[0],l=a+n;iZ(y,"red",n,o,l,d(U,e)[0],l,i,C,e,s.toString())})}}o.Big.PE=7;let i3={marginLeft:"0px",marginTop:"1px",marginBottom:"1px",marginRight:"0px"},i5={marginLeft:"25px",marginTop:"1px",marginBottom:"1px",marginRight:"0px"},i4={marginLeft:"1px",marginTop:"1px",marginBottom:"1px",marginRight:"1px"};const i6="✎",i8=" ✗",i9=" ✓",i7="Add ＋",ne="Add from library ＋",nt="Add from spreadsheet ＋",ns="container",ni="description",nn="input",na="optionOn",no="optionOff",nd="Products",nl="Reactants",nr="save",ng="Select an option (press a letter key to cycle through options for it)...",nh="table",nm="Transition States",nc="textarea",nu="undefined",np="units",nN="viewer",nf=new Set,nx=new Set;function nv(...e){let t=l(...e);if(nf.has(t))throw Error(t+" already exists!");return nf.add(t),t}function nE(...e){let t=nv(...e);return nx.add(t),t}function nw(e){let t=document.getElementById(e);null!=t&&t.remove(),nx.delete(e),nf.delete(e)}const ny=nv("menu"),nC=nv("title"),nb=nv("molecules"),nM=nv("reactions"),nS=nv("reactionsDiagram"),nT=nv("conditions"),nR=nv("modelParameters"),nI=nv("control"),nz=nv("metadata"),nD=nv("analysis"),n_=nv("xml"),nL=new o.Big(0);class nP{addID(e,...t){let s=nE(e,...t);return this.ids.has(e)||this.ids.set(e,new Set),this.ids.get(e)?.add(s),s}removeID(e){nx.delete(e),nf.delete(e)}removeIDs(e){this.ids.has(e)&&(this.ids.get(e).forEach(e=>{console.log("remove id "+e),this.removeID(e)}),this.ids.delete(e))}removeAllIDs(){this.ids.forEach((e,t)=>{this.removeIDs(t)})}constructor(){this.ids=new Map}}let nB=new nP,nA=new nP,nk=new nP,nG=new nP,nO=new nP,nU=new class{constructor(){this.tagName="defaults",this.values=new Map,this.attributess=new Map}readFile(){let e=document.createElement("input");e.type="file";let t=this;e.onchange=function(){if(e.files){for(let t=0;t<e.files.length;t++)console.log("inputElement.files["+t+"]="+e.files[t]);let s=e.files[0];console.log(s.name),s.name;let i=new FileReader,n=0,a="";i.onload=function(e){if(null==e.target)throw Error("Event target is null");if(a+=e.target.result,null!=s){if(n<s.size){let e=s.slice(n,n+1048576);i.readAsText(e),n+=1048576}else{a=a.trim();let e=new DOMParser().parseFromString(a,"text/xml");t.parse(e)}}};let o=s.slice(n,n+1048576);i.readAsText(o),n+=1048576}},e.click()}parse(e){let t=Y(e,this.tagName);console.log("Default attributes: "+r(X(t)));let s=t.children;console.log("children.length="+s.length);for(let e=0;e<s.length;e++){let t=s[e],i=t.tagName;console.log("tagName="+i);let n=X(t);if(this.attributess.set(i,n),console.log("Attributes: "+r(n)),"property"==i){let e=t.getAttribute("dictRef");try{let s=Y(t,"scalar").innerHTML;null!=s?(console.log("v="+s),this.values.set(e,s)):console.log("v is null")}catch(e){console.log("Error: "+e)}}else{let e=t.innerHTML;null!=e?(console.log("v="+e),this.values.set(i,e)):console.log("v is null")}}console.log("values: "+r(this.values)),this.attributess.forEach((e,t)=>{console.log("key="+t+" value="+r(e))})}},nq=new Map;function nF(e,t){e.getID();let s=1;for(;t.has(e.id);)e.id=e.id+s,s++;t.set(e.id,e)}let nV=new Map;function nH(e){let t=new Set;return e.forEach((e,s)=>{let i=e.getID();t.has(i)?t.add(i+"-"+s.toString()):t.add(i)}),t}function nj(e,t){for(let[s,i]of t)if(i.label==e)return i;return null}let nX=new Map;const nY="Reactions Diagram",n$=nE(nY),nW=nE(n$,"Canvas");let nK="1em SensSerif";function nZ(){n0(),nQ("Example_title",new Map);let e=document.getElementById(nb),s=nE(tv.tagName),i=z(s);e.appendChild(i),x(s,e,null,i,tv.tagName,i4,i3);let a=sm(i,nB,nV);sE(i,a,nB,nV);let o=document.getElementById(nM),d=nE(tE.tagName),l=z(d);o.appendChild(l),x(d,o,null,l,tE.tagName,i4,i3),id(nA,l,nX,nV);let r=document.getElementById(nS),g=z(void 0,i5);r.appendChild(g),x(n$,r,null,g,nY,i4,i3),i1(g,nW,400,t,nK,4,2,n,nV,nX,!1);let h=document.getElementById(nT),m=nE(eg.tagName),c=z(m);h.appendChild(c);let u=z(void 0,i4);iu(u,nk,nV),x(m,c,null,u,"ConditionsList",i4,i3);let p=document.getElementById(nR),N=nE(tf.tagName,"list"),f=z(N);p.appendChild(f);let v=z(void 0,i4);iP(v,nG),x(N,f,null,v,"ModelParametersList",i4,i3);let E=document.getElementById(nI),w=nE(ta.tagName),y=z(w);E.appendChild(y);let C=z(void 0,i4);ik(C,nO),x(w,y,null,C,"ControlList",i4,i3)}function nQ(e,t){let i=new tx(t,e);s.setTitle(i);let n=document.getElementById(nC),a=nE("titleDiv");nw(a);let o=E("text",nE(a,nn),i4,i3,e=>{let t=e.target;i.value=t.value,console.log(i.tagName+" changed to "+i.value),b(t)},e,tx.tagName);o.id=a,n.appendChild(o)}function nJ(){null==n?i2(document.getElementById(nW),400,t,nK,4,2,nV,nX):i2(n.document.getElementById(nW),400,t,nK,4,2,nV,nX)}function n0(){nx.forEach(e=>{nw(e)}),null!=nV&&nV.clear(),null!=nX&&nX.clear()}function n1(e,t){let s=document.getElementsByClassName(e);for(let e=0;e<s.length;e++)if(s[e]instanceof HTMLSelectElement){let i=s[e].options,n=s[e].value;Array.from(i).forEach(i=>{if(i.value==t&&(i.remove(),n==t)){let t=new Event("change");s[e].dispatchEvent(t)}})}}function n2(e,t){let s=document.getElementsByClassName(e);console.log("n elements with className "+e+"="+s.length);for(let e=0;e<s.length;e++){let i=s[e];if(s[e]instanceof HTMLSelectElement){let e=document.createElement("option");e.value=t,e.text=t,i.add(e)}}}function n3(e,t){if(t)e.push(ng);else{let t=e.indexOf(ng);t>-1&&e.splice(t,1)}}function n5(e,t,s,i,n,a,o,d){let l=D(e,d),r=s+i9,g=s+i8,h=nE(e,s,N);t.add(h);let m=I(g,h,o);l.appendChild(m),m.classList.add(na),m.classList.add(no);let c=nE(e,s,nn);t.add(c);let u=i();return void 0==u?(m.textContent=g,m.classList.toggle(na)):(n4(l,c,s,u,i,n,o),m.textContent=r,m.classList.toggle(no)),m.addEventListener("click",e=>{if(null==document.getElementById(c)){console.log("Adding "+c),n4(l,c,s,u,i,n,o);let e=l.querySelector(nn);e.value=u.toString();let t=new Event("change");e.dispatchEvent(t),m.textContent=r}else document.getElementById(c)?.remove(),console.log("Removed "+c),m.textContent=g;m.classList.toggle(na),m.classList.toggle(no)}),l}function n4(e,t,s,i,n,a,d){let l;l=void 0==i?"":i.toString();let r=w("text",t,d);r.addEventListener("change",e=>{let t=e.target;try{a(new o.Big(t.value)),console.log(s+" changed from "+i+" to "+t.value)}catch(e){alert("Input invalid, resetting..."),t.value=n().toString()}b(t)}),r.value=l,b(r),e.appendChild(r)}function n6(e,t,s,...i){let n=I("Remove ✕",void 0,t);return e.appendChild(n),n.addEventListener("click",()=>{s(...i),e.remove(),nw(e.id)}),n}function n8(e,t,s,i,n,a){let o;o=void 0==i?"":i.toString();let d=w("text",t,a);d.addEventListener("change",e=>{let t=e.target;n(t.value),console.log(s+" changed from "+i+" to "+t.value),b(t)}),d.value=o,b(d),e.appendChild(d)}function n9(e,t,s,i,n,a,o,d){if(void 0!=e){let l=function(e,t,s,i,n,a){let o=t.get("units");if(void 0!=o){let d=R("units",e,"units",o,s,n,a),l=d.querySelector("select");return l.value=o,M(l),l.addEventListener("change",e=>{let s=e.target;t.set("units",s.value),console.log("Set "+i+" units to "+s.value),M(s)}),d}}(e,t,n,a,o,d);void 0!=l&&s.insertBefore(l,i)}else{let e=t.get("units");if(void 0!=e){let t=_("units "+e,d);s.insertBefore(t,i)}}}function n7(e){let t=0,s=!1;for(;!s;){let i=prompt(e,"0");null!=i&&m(i)&&(t=parseInt(i))>0&&(s=!0)}return t}function ae(e,t){t.addEventListener("click",s=>{e[e.length-1]==ng&&e.pop();let i=t.options.length-1;t.options[i].value==ng&&t.remove(i)})}document.addEventListener("DOMContentLoaded",()=>{let d,h,c,u,p,v,y,C,S,T,O,U,q;document.body.className=t?"dark-mode":"light-mode";let F=new Map;F.set("xmlns","http://www.xml-cml.org/schema"),F.set("xmlns:me","http://www.chem.leeds.ac.uk/mesmer"),F.set("xmlns:xsi","http://www.w3.org/2001/XMLSchema-instance"),s=new tb(F),(d=document.getElementById(ny)).style.display="flex",d.style.justifyContent="center",d.style.margin="5px",d.style.padding="5px",d.style.border="1px solid black",d.style.backgroundColor="lightgrey",c=I(h="About",nv(h),i4),d.appendChild(c),c.addEventListener("click",async e=>{!function(e){if(null==e)return;e.document.title="About MXG";let t=document.createElement("div");e.document.body.appendChild(t);let s=e.document.createElement("p");t.appendChild(s),s.appendChild(e.document.createTextNode("MXG is a free and open source program to assist in creating, editing and         visualising MESMER XML data. The MXG development repository is: ")),s.appendChild(sU),s.appendChild(e.document.createTextNode(". Details of MESMER - the Master Equation Solver for Multi Energy-well Reactions         can be found at: ")),s.appendChild(sH),s.appendChild(e.document.createTextNode("."));let i=document.createElement("p");t.appendChild(i),i.appendChild(e.document.createTextNode("MXG is being developed by a team based at ")),i.appendChild(sX),i.appendChild(e.document.createTextNode(" funded by ")),i.appendChild(sj),i.appendChild(e.document.createTextNode("Like MESMER, MXG development aims to be driven in part by users reporting issues,         submitting feature requests, and getting involved in development."));let n=e.document.createElement("p");t.appendChild(n),n.appendChild(e.document.createTextNode("MXG runs on the latest Firefox, Chrome, Edge or Safari Web browsers. It can         be used offline if installed as a Progressive Web App (PWA). PWA installation varies by Web browser and device, it         should only require user permission and is effectively a form of Web browser bookmark. For guidance please see the         MXG main development repository README: ")),n.appendChild(sU.cloneNode(!0)),n.appendChild(e.document.createTextNode(". MXG may work on small screen devices, but it is recommended to use a device         with at least a standard laptop sized screen."));let a=document.createElement("p");t.appendChild(a),a.appendChild(e.document.createTextNode('The Menu contains 5 buttons. The Load MESMER File button is for loading a         MESMER XML data file with a "me:mesmer" tag containing: "me:title", "moleculeList", "reactionList",         "me:conditions", "me:modelParameters", and "me:control" tags containing further details. A MESMER XML output         data file will also have "me:metadataList" and "me:analysis" tags as children of the "me:mesmer" tag. Additional         output is located in "moleculeList" and "reactionList" tags. The Load Molecules button is for loading molecule         data for selection, modification and for inclusion in saved MESMER files. The Load Defaults button is to load         default values. Whilst not necessary, loading defaults is for convenience, as often similar values and the same         units as defaults are wanted for specified variables. The Save MESMER File button is for saving a new MESMER XML         data file. The file should be saved to the Web browser downloads location. It should contain no comments or extra         white space between XML tags with the exception of new lines, tag values should be trimmed of white space,         numbers should be output in a particular format (decimals - where numbers with more than 8 digits are output in         scientific notation format). There should be: a single "atomArray" tag containing all "atom" tags (each atom         should have a unique id attribute); a single "bondArray" tag containing any "bond" tags (each bond should have a         unique id attribute); and, a single "propertyList" tag containing all "property" tags for each "molecule" tag in         the "moleculeList". The saved file should reflect what is specified via the interface.'));let o=e.document.createElement("p");t.appendChild(o),o.appendChild(e.document.createTextNode('The "me:title" value is presented in an input alongside an associated label.         The input can be used to change the value which is also used to compose filenames for files saved from MXG.         Details are presented via buttons which contain a triangular symbol. A triangle orientated with a point down: ▼ can be actioned to show more details (if there are any). A triangle orientated with a point         up: ▲ can be actioned to hide those details again.'));let d=e.document.createElement("p");t.appendChild(d),d.textContent='The Reaction Diagram button shows/hides a reaction well diagram which is redrawn if molecule "me:ZPE"         property values are changed. The diagram can be opened in a new Window and saved to a PNG format file.';let l=e.document.createElement("p");t.appendChild(l),l.textContent="MXG uses 3DMol.js under a BSD-3-Clause licence to visualise molecules with coordinates. For details         of 3DMol.js please see the GitHub repository: ",l.appendChild(s$),l.appendChild(e.document.createTextNode(". If you use the 3DMol.js visualisations, please cite: Nicholas Rego and         David Koes 3Dmol.js: molecular visualization with WebGL Bioinformatics (2015) 31 (8): 1322-1324 ")),l.appendChild(sW),l.appendChild(e.document.createTextNode("."));let r=e.document.createElement("p");t.appendChild(r),r.textContent="MXG uses Big.js under an MIT licence to handle numbers. For details of Big.js please see the GitHub         repository: ",r.appendChild(sZ),r.appendChild(e.document.createTextNode("."))}(window.open("","","width=600,height=400"))}),p=I(u="Start Afresh",nv(u),i4),d.appendChild(p),p.addEventListener("click",e=>{confirm("Any unsaved changes will be lost. Select OK to continue loading or Cancel to cancel.")&&nZ()}),v=new sk,I(y="Load Molecules",nv(y),i4),d.appendChild(p),new sk,p.addEventListener("click",async e=>{(await v.readFile()).forEach((e,t)=>{nF(e,nq)})}),(S=I(C="Load Defaults",nv(C),i4)).addEventListener("click",e=>{nU.readFile()}),d.appendChild(S),(O=I(T="Load MESMER File",nv(T),i4)).addEventListener("click",d=>{if(confirm("Any unsaved changes will be lost. Select OK to continue loading or Cancel to cancel.")){let d;n0(),i=[],(d=document.createElement("input")).type="file",d.onchange=function(){if(d.files){for(let e=0;e<d.files.length;e++)console.log("inputElement.files["+e+"]="+d.files[e]);let h=d.files[0];console.log(h.name),e=h.name;let c=new FileReader,u=0,p="";c.onload=function(d){if(null==d.target)throw Error("Event target is null");if(p+=d.target.result,null!=h){if(u<h.size){let e=h.slice(u,u+1048576);c.readAsText(e),u+=1048576}else{var v;let d,h,c,u;v=p=p.trim(),d=document.getElementById(n_),nw(h=nE(n_,2)),c=z(h,i5),x(h,d,null,c,e,i4,i3),(u=document.createElement("pre")).textContent=v,c.appendChild(u),function(d){let h,c;console.log("parse: "+d);let u=Y(d,tb.tagName);s=new tb(X(u));let p=d.getElementsByTagName(tx.tagName);p.length>0?(p.length>1&&console.warn("Multiple "+tx.tagName+" tags found, using the first."),h=p[0].childNodes[0].nodeValue.trim(),c=X(p[0])):(h=e,console.warn("No "+tx.tagName+" tag found, using the filename: "+e+" as the title."),c=new Map),nQ(h,c);let v=document.getElementById(nb),y=nE(tv.tagName);nw(y),x(y,v,null,function(e,t,s){let i=z(void 0,i4),n=Y(e,tv.tagName),d=new Set;if(n.childNodes.forEach(function(e){d.add(e.nodeName)}),1==d.size||2==d.size&&d.has("#text")||(console.error("moleculeListTagNames:"),d.forEach(e=>console.error(e)),console.warn("Additional tag names in moleculeList:")),!d.has(sh.tagName)){console.warn('Expecting tags with "'+sh.tagName+'" tagName but there are none! Please add molecules to the moleculeList.');let e=i.appendChild(sm(i,t,s));return i.appendChild(sE(i,e,t,s)),i}let l=n.getElementsByTagName(sh.tagName),g=l.length;console.log("Number of molecules="+g);for(let e=0;e<g;e++){let n=t.addID(sh.tagName,e),d=z(n),g=X(l[e]),h=new sh(g,g.get(sh.s_id));nF(h,s);let c=x(t.addID(n,ns),i,null,d,h.label,i4,i5),u=new Set,p=l[e].childNodes;for(let e=0;e<p.length;e++){let t=p[e];u.has(t.nodeName)?"#text"!=t.nodeName&&console.warn("Another ChildNode with nodeName="+t.nodeName):u.add(t.nodeName)}sy(h,s,c.querySelector(N),t,d,i5),d.appendChild(sC(t.addID(n,ni),t,h.getDescription.bind(h),h.setDescription.bind(h),i4,i5));let f=l[e].getElementsByTagName(tm.tagName);if(f.length>0){f.length>1&&console.warn("Expecting 1 or 0 "+tm.tagName+" but finding "+f.length+". Loading the first of these...");let e=t.addID(n,tm.tagName),s=z(e);x(t.addID(e,ns),d,null,s,tm.tagName,i4,i5);let i=f[0].getElementsByTagName(to.tagName),a=new tm(X(f[0]));h.setMetadataList(a);for(let n=0;n<i.length;n++){let o=new to(X(i[n]));s.appendChild(function(e,t,s,i,n,a){s.addMetadata(t);let o=D(i,i5);return o.appendChild(_(e.getLabel(),i4)),o}(h,o,a,t.addID(e,n),0,0))}u.delete(tm.tagName)}let v=l[e].getElementsByTagName(tI.tagName),y=t.addID(n,tI.tagName),C=z(y);x(t.addID(y,ns),d,null,C,tI.tagName,i4,i5);let M=new tI(new Map);h.setAtoms(M);for(let e=0;e<v.length;e++){let t=X(v[e]);t.size>0&&console.warn("AtomArray attributes lost/ignored: "+r(t))}let S=l[e].getElementsByTagName(tR.tagName);for(let e=0;e<S.length;e++)C.appendChild(sS(t,h,y,M,new tR(X(S[e]),h),i4,i5));C.appendChild(sM(t,h,C,tR.tagName,i4,i5)),u.delete(tR.tagName);let T=l[e].getElementsByTagName(tD.tagName),B=t.addID(n,tD.tagName),O=z(B);x(t.addID(B,ns),d,null,O,tD.tagName,i4,i5);let U=new tD(new Map);h.setBonds(U);for(let e=0;e<T.length;e++){let t=X(T[e]);t.size>0&&console.warn("BondArray attributes lost/ignored: "+r(t))}let q=l[e].getElementsByTagName(tz.tagName);for(let e=0;e<q.length;e++)X(q[e]).has(tz.s_id)&&O.appendChild(sI(t,h,B,h.getAtoms().atoms,U,new tz(X(q[e]),h),i4,i5));for(let e=0;e<q.length;e++)X(q[e]).has(tz.s_id)||O.appendChild(sI(t,h,B,h.getAtoms().atoms,U,new tz(X(q[e]),h),i4,i5));O.appendChild(sR(t,h,O,tz.tagName,i4,i5)),u.delete(tz.tagName);let F=t.addID(n,nN),V=z(F);x(t.addID(F,ns),d,null,V,nN,i4,i5),sL(t,h,V,i4,i5);let H=l[e].getElementsByTagName(t0.tagName),j=t.addID(n,t0.tagName),Y=z(j);x(t.addID(j,ns),d,null,Y,t0.tagName,i4,i5);let $=new t0(new Map);h.setPropertyList($);for(let e=0;e<H.length;e++){let t=X(H[e]);t.size>0&&console.warn("PropertyList attributes lost/ignored: "+r(t))}let W=l[e].getElementsByTagName(tA.tagName);sc(h,Y,$);for(let e=0;e<W.length;e++){let t=function(e,t,s,i,n,a){let o=new tA(X(t));return o.dictRef==tk.dictRef?s_(e,o,tb.energyUnits,i,t,s,n,a):o.dictRef==tG.dictRef?s_(e,o,tb.energyUnits,i,t,s,n,a):o.dictRef==tO.dictRef?s_(e,o,tb.energyUnits,i,t,s,n,a):o.dictRef==tU.dictRef?s_(e,o,tb.energyUnits,i,t,s,n,a):o.dictRef==tq.dictRef?s_(e,o,tb.frequencyUnits,i,t,s,n,a):o.dictRef==tF.dictRef?s_(e,o,void 0,i,t,s,n,a):o.dictRef==tV.dictRef?s_(e,o,void 0,i,t,s,n,a):o.dictRef==tH.dictRef?s_(e,o,void 0,i,t,s,n,a):o.dictRef==tj.dictRef?s_(e,o,void 0,i,t,s,n,a):o.dictRef==tX.dictRef?s_(e,o,void 0,i,t,s,n,a):o.dictRef==tY.dictRef?s_(e,o,void 0,i,t,s,n,a):o.dictRef==t$.dictRef?s_(e,o,void 0,i,t,s,n,a):o.dictRef==tW.dictRef?s_(e,o,void 0,i,t,s,n,a):o.dictRef==tK.dictRef?s_(e,o,void 0,i,t,s,n,a):o.dictRef==tZ.dictRef?s_(e,o,void 0,i,t,s,n,a):o.dictRef==tQ.dictRef?s_(e,o,void 0,i,t,s,n,a):function(e,t,s,i,n,a,o){let d=new Set,l=i.getElementsByTagName(t_.tagName);if(l.length>0){if(1!=l.length)throw Error("Expecting 1 "+t_.tagName+" but finding "+l.length+"!");let s=G(l[0]),i=new t_(X(l[0]),s);t.setProperty(i),i.setValue=(function(e){i.value=e,t.dictRef==tk.dictRef&&nJ()}).bind(i);let a=function(e,t,s,i,n,a,o,d){let l=D(e,d),r=s+i9,g=s+i8,h=nE(e,N);t.add(h);let m=I(g,h,o);l.appendChild(m),m.classList.add(na),m.classList.add(no);let c=nE(e,s,nn);t.add(c);let u=i();return void 0==u?(m.textContent=g,m.classList.toggle(na)):(n8(l,c,s,u,n,o),m.textContent=r,m.classList.toggle(no)),m.addEventListener("click",e=>{null==document.getElementById(c)?(n8(l,c,s,u,n,o),m.textContent=r):(document.getElementById(c)?.remove(),a(),console.log("Removed "+c),m.textContent=g),m.classList.toggle(na),m.classList.toggle(no)}),l}(nE(n.id,t.dictRef),d,t.dictRef,i.getValue.bind(i),i.setValue,()=>e.removeProperty(t.dictRef),i4,i5);n.appendChild(a)}else console.log("Expecting "+t_.tagName+" but finding none!")}(e,o,0,t,s,0,0),o}($,W[e],Y,h,i4,i5);$.setProperty(t)}u.delete(t0.tagName),u.delete(tA.tagName);let K=l[e].getElementsByTagName(t4.tagName);if(K.length>0){if(K.length>1)throw Error("Expecting 1 or 0 "+t4.tagName+" but finding "+K.length+"!");(function(e,t,s,i,n){let d=i.getElementsByTagName(t1.tagName);if(d.length>0){let i=e.addID(n.id,t4.tagName),l=document.createElement("div");x(e.addID(i,ns),n,null,l,t4.tagName,i4,i5);let r=[];for(let t=0;t<d.length;t++){let s=G(d[t]),n=new(a(o))(s),g=new t1(X(d[t]),n);r.push(g);let h=t1.tagName,m=e.addID(i,t1.tagName,t),c=E("number",m,i4,i5,e=>{let i=e.target;al(g,i),s=i.value,r[t].setValue(new(a(o))(s)),console.log("Set "+m+" to "+s),b(i)},s,h);l.appendChild(c);let u=document.createElement("label");u.textContent="units cm-1",c.appendChild(u)}t.setDeltaEDowns(r),s.setEnergyTransferModel(t)}})(t,new t4(X(K[0])),h,K[0],d),u.delete(t4.tagName)}let Z=l[e].getElementsByTagName(t6.tagName);if(Z.length>0){if(Z.length>1)throw Error("Expecting 1 or 0 "+t6.tagName+" but finding "+Z.length+"!");let e=new t6(X(Z[0]));d.appendChild(R(t6.tagName,t6.xsi_typeOptions,t6.tagName,e.getXsiType(),t.addID(n,t6.tagName),i4,i5)),u.delete(t6.tagName)}let Q=l[e].getElementsByTagName(t7.tagName);if(Q.length>0){if(Q.length>1)throw Error("Expecting 1 or 0 "+t7.tagName+" but finding "+Q.length+"!");let e=X(Q[0]),s=new t7(e);h.setDistributionCalcMethod(s);let i=z(t.addID(n,t7.tagName));d.appendChild(i),i.appendChild(_(t7.tagName+" "+r(e),i5)),u.delete(t7.tagName)}let J=l[e].getElementsByTagName(sg.tagName);if(J.length>0){if(J.length>1)throw Error("Expecting 1 or 0 "+sg.tagName+" but finding "+J.length+"!");let e=new sg(X(J[0]));h.setDensityOfStatesList(e);let s=t.addID(n,sg.tagName),i=z(s);x(t.addID(s,ns),d,null,i,sg.tagName,i4,i5);let l=J[0].getElementsByTagName(sr.tagName),r=J[0].getElementsByTagName(tM.tagName);if(r.length>0){if(r.length>1)throw Error("Expecting 1 or 0 "+tM.tagName+" but finding "+r.length+"!");let t=new tM(X(r[0]),k(A(r[0])));e.setDescription(t)}if(0==l.length)throw Error("Expecting 1 or more "+sr.tagName+" but finding 0!");{let n=L(t.addID(s,nh),i5);P(n,sr.header),i.appendChild(n);for(let d=0;d<l.length;d++){let r=new sr(X(l[d]));e.addDensityOfStates(r);let g=D(t.addID(s,d),i5);i.appendChild(g);let h=l[d].getElementsByTagName(tS.tagName);if(1!=h.length)throw Error("Expecting 1 "+tS.tagName+" but finding "+h.length+"!");{let e=new tS(X(h[0]),new(a(o))(k(A(h[0]))));r.setT(e)}let m=l[d].getElementsByTagName(so.tagName);if(1!=m.length)throw Error("Expecting 1 "+so.tagName+" but finding "+m.length+"!");{let e=new so(X(m[0]),new(a(o))(k(A(m[0]))));r.setQtot(e)}let c=l[d].getElementsByTagName(sd.tagName);if(1!=c.length)throw Error("Expecting 1 "+sd.tagName+" but finding "+c.length+"!");{let e=new sd(X(c[0]),new(a(o))(k(A(c[0]))));r.setSumc(e)}let u=l[d].getElementsByTagName(sl.tagName);if(1!=u.length)throw Error("Expecting 1 "+sl.tagName+" but finding "+u.length+"!");{let e=new sl(X(u[0]),new(a(o))(k(A(u[0]))));r.setSumg(e)}P(n,r.toStringArray())}ad(e.toCSV,i,n,h.getID()+"_"+sg.tagName,i5)}u.delete(sg.tagName)}let ee=st.tagName,et=l[e].getElementsByTagName(ee);if(et.length>0){let e;if(et.length>1)throw Error("Expecting 1 or 0 "+ee+" but finding "+et.length+"!");let s=new st(X(et[0])),i=t.addID(n,st.tagName),a=z(i);x(t.addID(i,ns),d,null,a,ee,i4,i5);let o=se.tagName,l=et[0].getElementsByTagName(o);if(0==l.length)throw Error("Expecting 1 or more "+o+" but finding 0!");{e=[];let n=L(t.addID(i,nh),i5);P(n,s.getHeader());for(let t=0;t<l.length;t++){let s=new se(X(l[t]));e.push(s),P(n,s.toStringArray())}a.appendChild(n),s.init(e),ad(s.toCSV.bind(s),a,n,t.addID(h.getID(),st.tagName),i5)}h.setThermoTable(s),u.delete(o),u.delete(ee)}let es=l[e].getElementsByTagName(sn.tagName);if(es.length>0)for(let e=0;e<es.length;e++){let s=new sn(X(es[e])),i=t.addID(n,sn.tagName,e),l=z(i);x(t.addID(i,ns),d,null,l,sn.tagName,i4,i5);let r=es[e].getElementsByTagName(t8.tagName);if(r.length>0){if(1!=r.length)throw Error("Expecting only 1 bondRef, but there are "+r.length);let e=h.getBonds().getBondIds(),s=new t8(X(r[0]),k(A(r[0]))),n=R(t8.tagName,e,t8.tagName,s.value,t.addID(i,t8.tagName),i4,i5);n.getElementsByTagName("select")[0].classList.add(tz.tagName),l.appendChild(n)}let g=es[e].getElementsByTagName(ss.tagName);if(g.length>0){if(1!=g.length)throw Error("Expecting only 1 HinderedRotorPotential, but there are "+g.length);let e=X(g[0]),n=new ss(e),r=t.addID(i,ss.tagName),h=z(r);x(t.addID(r,ns),l,null,h,ss.tagName,i4,i5);let c=R(ss.s_format,ss.formats,ss.tagName,n.getFormat(),t.addID(r,ss.s_format),i4,i5);h.appendChild(c),n9(tb.energyUnits,e,h,c,t.addID(r,ss.s_units),ss.tagName,i4,i5);let u=n.getExpansionSize()??nu;h.appendChild(E("text",t.addID(r,ss.s_expansionSize),i4,i5,e=>{let t=e.target;try{console.log("Setting "+ss.s_expansionSize+" to "+t.value),n.setExpansionSize(new(a(o))(t.value))}catch(e){alert("Invalid value, resetting..."),t.value=n.getExpansionSize()??nu}b(t)},u,ss.s_expansionSize)),function(e,t,s,i){e.addID(t.id,ss.s_useSineTerms);let n=ss.s_useSineTerms+i9,a=ss.s_useSineTerms+i8,o=I(a,void 0,i);t.appendChild(o),o.classList.add(na),o.classList.add(no),!0==s.getUseSineTerms()?(o.textContent=n,o.classList.toggle(no)):(o.textContent=a,o.classList.toggle(na)),o.addEventListener("click",e=>{!1==s.getUseSineTerms()?(s.setUseSineTerms(!0),o.textContent=n):(s.setUseSineTerms(!1),o.textContent=a),o.classList.toggle(na),o.classList.toggle(no)})}(t,h,n,i5);let p=t.addID(r,t9.tagName),N=z(p),f=x(t.addID(p,ns),d,null,N,"PotentialPoints",i4,i5);h.appendChild(f);let v=[],y=g[0].getElementsByTagName(t9.tagName);for(let e=0;e<y.length;e++){let s=new t9(X(y[e]));v.push(s);let i=t.addID(p,e),n=D(i,i5);N.appendChild(n);let d=_(t9.tagName+" "+e,i4);n.appendChild(d);let l=s.getAngle()??nu,r=E("text",t.addID(i,t9.s_angle),i4,i4,e=>{let t=e.target;if(m(t.value)){let e=new(a(o))(t.value);s.setAngle(e)}else alert("Angle input is not a number, resetting..."),t.value=s.getAngle()??nu;b(t)},l,t9.s_angle);n.appendChild(r);let g=_(t9.s_potential,i4);n.appendChild(g);let h=w("text",t.addID(i,t9.s_potential),i4);n.appendChild(h);let c=s.getPotential()??nu;h.addEventListener("change",e=>{let t=e.target;if(m(t.value)){let e=new(a(o))(t.value);s.setPotential(e),console.log("Set "+t9.tagName+" to "+e.toExponential())}else alert("Potential input is not a number, resetting..."),h.value=s.getPotential()??nu;b(h)}),h.value=c,b(h)}n.setPotentialPoints(v),s.setHinderedRotorPotential(n)}let c=es[e].getElementsByTagName(si.tagName);if(c.length>0){if(1!=c.length)throw Error("Expecting only 1 Periodicity, but there are "+c.length);let e=k(A(c[0])),n=new si(X(c[0]),new(a(o))(e));s.setPeriodicity(n);let d=E("text",t.addID(i,si.tagName),i4,i5,t=>{let i=t.target;if(m(e=i.value)){let t=new(a(o))(e);n.value=t,s.getPeriodicity().value=t,console.log("Set "+si.tagName+" to "+t)}else alert("Periodicity input is not a number, resetting..."),i.value=n.value.toExponential()},e,si.tagName);l.appendChild(d)}h.setExtraDOSCMethod(e,s),u.delete(sn.tagName)}u.delete(sa.tagName);let ei=l[e].getElementsByTagName(sa.tagName);if(ei.length>0){if(1!=ei.length)throw Error("Expecting only 1 reservoirSize, but there are "+ei.length);let e=k(A(ei[0])),t=new(a(o))(e),s=new sa(X(ei[0]),t);h.setReservoirSize(s);let i=E("number",h.getID()+"_"+sa.tagName,i4,i5,e=>{let t=e.target;s.value=new(a(o))(t.value),b(t)},e,sa.tagName);d.appendChild(i)}u.delete("#text"),u.size>0&&(console.warn("There are additional unexpected moleculeTagNames:"),u.forEach(e=>console.warn(e))),n6(d,i5,()=>{sD(i,c,t,s,n,h)})}let h=sm(i,t,s);return sE(i,h,t,s),i}(d,nB,nV),tv.tagName,i4,i3);let C=document.getElementById(nM),S=nE(tE.tagName);nw(S),x(S,C,null,function(e,t,s,i,n){let d=l(s,N),g=document.querySelector(d),h=z(void 0,i4),m=Y(e,tE.tagName),c=new Set;if(m.childNodes.forEach(function(e){c.add(e.nodeName)}),c.size>0){if(1!=c.size&&!(2==c.size&&c.has("#text")))throw console.error("reactionListTagNames:"),c.forEach(e=>console.error(e)),Error("Additional tag names in reactionList:");if(!c.has(io.tagName))throw Error('Expecting tags with "'+io.tagName+'" tagName but there are none!');let e=m.getElementsByTagName(io.tagName);console.log("Number of reactions="+e.length);for(let s=0;s<e.length;s++){let d=new io(X(e[s]));i.set(d.id,d);let m=new Set,c=e[s].childNodes,u=nE(io.tagName,s),p=z(u);for(let e=0;e<c.length;e++){let t=c[e];m.has(t.nodeName)?"#text"!=t.nodeName&&console.warn("Another ChildNode with nodeName="+t.nodeName):m.add(t.nodeName)}let N=e[s].getElementsByTagName(sJ.tagName);m.delete(sJ.tagName);let v=t.addID(u,sJ.tagName),w=z(v);x(l(v,ns),p,null,w,nl,i4,i5);let y=new Map;if(N.length>0){for(let e=0;e<N.length;e++){let s=l(v,sJ.tagName,e),i=D(s);w.appendChild(i);let n=new sQ(X(B(N[e],sh.tagName))),a=new sJ(X(N[e]),n);y.set(n.getRef(),a);let o=R(n.getRef()+" role",sJ.roleOptions,"Role",n.getRole(),t.addID(s,f),i4,i5);o.querySelector("select")?.addEventListener("change",e=>{let t=e.target;n.setRole(t.value),console.log("Set Role to "+t.value),M(t)}),i.appendChild(o),n6(i,i4,()=>{w.removeChild(i),t.removeIDs(s),y.delete(n.getRef())})}d.setReactants(y)}il(d,g,t,u,w,n,y);let C=e[s].getElementsByTagName(s0.tagName);m.delete(s0.tagName);let S=t.addID(u,s0.tagName),T=D(S);x(l(S,ns),p,null,T,nd,i4,i5);let I=new Map;if(C.length>0){for(let e=0;e<C.length;e++){let s=new sQ(X(B(C[e],sh.tagName))),i=new s0(X(C[e]),s);I.set(s.getRef(),i);let n=R(s.getRef()+" role",s0.roleOptions,s.getRole(),s.getRef(),t.addID(S,e,"Role"),i4,i5),a=n.querySelector("select");a.value=s.getRole(),a.addEventListener("change",e=>{let t=e.target;s.setRole(t.value),console.log("Set Role to "+t.value),M(t)}),M(a),T.appendChild(n),n6(T,i4,()=>{T.removeChild(n),t.removeIDs(S),I.delete(s.getRef())})}d.setProducts(I)}ir(d,g,t,u,T,n,I);let O=x(nE(u,ns),h,null,p,d.getLabel(),i4,i5),U=e[s].getElementsByTagName(s9.tagName);if(U.length>0){if(U.length>1)throw Error("Expecting 1 "+s9.tagName+" but finding "+U.length+"!");let e=new s9(X(U[0]));d.setTunneling(e);let t=R(s9.tagName,s9.options,"Tunneling",e.getName(),nE(u,s9.tagName),i4,i5);t.querySelector("select")?.addEventListener("change",t=>{let s=t.target;e.setName(s.value),console.log("Set Tunneling to "+s.value),M(s)}),p.appendChild(t)}let q=e[s].getElementsByTagName(s1.tagName),F=nE(u,s1.tagName),V=z(F);x(nE(F,ns),p,null,V,nm,i4,i5);let H=new Map;if(q.length>0){for(let e=0;e<q.length;e++){let t=new sQ(X(B(q[e],sh.tagName))),s=new s1(X(q[e]),t);H.set(t.getRef(),s);let i=_(t.getRef()+" role "+s1.role,i5);V.appendChild(i)}d.setTransitionStates(H)}ig(t,u,V,n,H);let j=e[s].getElementsByTagName(s6.tagName);if(j.length>0){if(j.length>1)throw Error("Expecting 1 "+s6.tagName+" but finding "+j.length+"!");{let e;let t=X(j[0]),s=t.get("xsi:type");void 0==s&&(s=t.get("name"));let i=nE(u,s6.tagName),n=z(i);if(s==s8.xsiType||s==s8.xsiType2){let s=x(nE(i,ns),p,null,n,s6.tagName,i4,i5);p.appendChild(s),e=new s8(t);let d=j[0].getElementsByTagName(s2.tagName);if(null!=d&&null!=d[0]){let t=G(d[0]),s=new(a(o))(t),l=X(d[0]),r=new s2(l,s);e.setPreExponential(r);let g=E("number",nE(i,s2.tagName,nn),i4,i5,e=>{al(r,e.target)},t,s2.tagName);n.appendChild(g);let h=g.querySelector("input");h.value=t,b(h),h.addEventListener("change",e=>{t=e.target.value,r.value=new(a(o))(t),console.log(s2.tagName+" changed to "+t),b(h)}),n9(void 0,l,g,null,nE(i,s2.tagName),s2.tagName,i4,i4),n.appendChild(g)}let l=j[0].getElementsByTagName(s3.tagName);if(null!=l&&null!=l[0]){let t=G(l[0]),s=new(a(o))(t),d=X(l[0]),r=new s3(d,s);e.setActivationEnergy(r);let g=E("number",nE(i,s3.tagName,nn),i4,i5,e=>{al(r,e.target)},t,s3.tagName),h=g.querySelector("input");h.value=t,b(h),h.addEventListener("change",e=>{t=e.target.value,r.value=new(a(o))(t),console.log(s3.tagName+" changed to "+t),b(h)}),n9(void 0,d,g,null,nE(i,s3.tagName),s3.tagName,i4,i4),n.appendChild(g)}let r=j[0].getElementsByTagName(s5.tagName);if(null!=r&&null!=r[0]){let t=G(r[0]),s=new(a(o))(t),d=X(r[0]),l=new s5(d,s);e.setTInfinity(l);let g=E("number",nE(i,s5.tagName,nn),i4,i5,e=>{al(l,e.target)},t,s5.tagName),h=g.querySelector("input");h.value=t,b(h),h.addEventListener("change",e=>{t=e.target.value,l.value=new(a(o))(t),console.log(s5.tagName+" changed to "+t),b(h)}),n9(void 0,d,g,null,nE(i,s5.tagName),s5.tagName,i4,i4),n.appendChild(g)}let g=j[0].getElementsByTagName(s4.tagName);if(null!=g&&null!=g[0]){let t=G(g[0]),s=new(a(o))(t),d=X(g[0]),l=new s4(d,s);e.setNInfinity(l);let r=E("number",nE(i,s4.tagName,nn),i4,i5,e=>{al(l,e.target)},t,s4.tagName);n.appendChild(r);let h=r.querySelector("input");h.value=t,b(h),h.addEventListener("change",e=>{t=e.target.value,l.value=new(a(o))(t),console.log(s4.tagName+" set to "+t),b(h)}),n9(void 0,d,r,null,nE(i,s4.tagName),s4.tagName,i4,i4),n.appendChild(r)}}else{e=new s6(t);let i=document.createElement("label");i.textContent=s6.tagName+": "+s,Object.assign(i.style,i5),n.appendChild(i),p.appendChild(n)}d.setMCRCMethod(e)}}let Y=e[s].getElementsByTagName(s7.tagName);if(Y.length>0){if(Y.length>1)throw Error("Expecting 1 "+s7.tagName+" but finding "+Y.length+"!");let e=new(a(o))(k(A(Y[0]))),t=new s7(X(Y[0]),e);d.setExcessReactantConc(t);let s=E("number",nE(u,s7.tagName),i4,i5,e=>{al(t,e.target)},e.toExponential(),s7.tagName);p.appendChild(s)}let $=e[s].getElementsByTagName(ia.tagName);if($.length>0){if($.length>1)throw Error("Expecting 1 "+ia.tagName+" but finding "+$.length+"!");let e=X($[0]),t=new ia(e);d.setCanonicalRateList(t);let s=nE(u,ia.tagName),i=z(s),n=x(nE(s,ns),p,null,i,ia.tagName,i4,i5);p.appendChild(n);let l=$[0].getElementsByTagName(tM.tagName);if(l.length>0){if(l.length>1)throw Error("Expecting 1 "+tM.tagName+" but finding "+l.length+"!");let s=k(A(l[0]));t.setDescription(new tM(X(l[0]),s));let n=_(s+" ("+r(e)+")",i4),a=z(void 0,i5);a.appendChild(n),i.appendChild(a)}let g=$[0].getElementsByTagName(ii.tagName);if(g.length>0){let e=L(nE(s,ii.tagName,nh),i5);i.appendChild(e);for(let s=0;s<g.length;s++){let i=new ii(X(g[s]));t.addKinf(i);let n=g[s].getElementsByTagName(tS.tagName);if(n.length>0){if(n.length>1)throw Error("Expecting 1 "+tS.tagName+" but finding "+n.length+"!");let e=new(a(o))(k(A(n[0])));i.setT(new tS(X(n[0]),e))}let d=g[s].getElementsByTagName(ie.tagName);if(d.length>0){if(d.length>1)throw Error("Expecting 1 "+ie.tagName+" but finding "+d.length+"!");let e=new(a(o))(k(A(d[0])));i.setVal(new ie(X(d[0]),e))}let l=g[s].getElementsByTagName(it.tagName);if(l.length>0){if(l.length>1)throw Error("Expecting 1 "+it.tagName+" but finding "+l.length+"!");let e=new(a(o))(k(A(l[0])));i.setRev(new it(X(l[0]),e))}let r=g[s].getElementsByTagName(is.tagName);if(r.length>0){if(r.length>1)throw Error("Expecting 1 "+is.tagName+" but finding "+r.length+"!");let e=new(a(o))(k(A(r[0])));i.setKeq(new is(X(r[0]),e))}0==s&&P(e,i.getHeader()),P(e,i.toStringArray())}ad(t.toCSV.bind(t),i,e,d.id+"_"+ia.tagName,i5)}}n6(p,i5,()=>{ih(h,O,t,u,i,d)})}}else console.warn("No reaction elements found! Please add a reaction in reactionList.");return id(t,h,i,n),h}(d,nA,S,nX,nV),tE.tagName,i4,i3);let T=document.getElementById(nS),O=nE(nY);null!=n&&(n.close(),n=null),nw(O);let U=z(void 0,i5);x(O,T,null,U,nY,i4,i3),i1(U,nW,400,t,nK,4,2,n,nV,nX,!0);let q=document.getElementById(nT),F=nE(eg.tagName);nw(F),x(F,q,null,function(e,t,i){console.log(eg.tagName);let n=z(void 0,i4),a=e.getElementsByTagName(eg.tagName);for(let e=0;e<a.length;e++){let o=a[e],d=nE(eg.tagName,e.toString()),l=z(d,i4),r=nE(d,ns);x(r,n,null,l,eg.tagName+" "+e.toString(),i4,i5);let g=ip(X(o),e);im(g,l,o,t,i),ic(g,l,o,t,i),n6(l,i5,s.removeConditions.bind(s),e).addEventListener("click",e=>{nw(r),t.removeIDs(d)})}return iu(n,t,i),n}(d,nk,nV),"ConditionsList",i4,i3);let V=document.getElementById(nR),H=nE(tf.tagName,"list");nw(H),x(H,V,null,function(e,t){console.log(tf.tagName);let i=z(void 0,i4),n=e.getElementsByTagName(tf.tagName);for(let e=0;e<n.length;e++){let d=t.addID(tf.tagName,e.toString()),r=z(d,i4),g=t.addID(d,ns);x(g,i,null,r,tf.tagName+" "+e.toString(),i4,i5);let h=iz(X(n[e]),e);(function(e,t,s,i){let n,d,r=tc.tagName,g=D(i.addID(s.id,r),i5);s.appendChild(g);let h=r+i9,m=r+i8,c=I(r,i.addID(s.id,r,N),i4);c.classList.add(na),c.classList.add(no),g.appendChild(c);let u=i.addID(s.id,r,nn);if(null!=t){let s=t.getElementsByTagName(r);if(1==s.length){d=k(A(s[0]));let t=new(a(o))(d);n=new tc(X(s[0]),t),c.textContent=h,iL(e,g,n,u,d,e.setGrainSize,tb.energyUnits),c.classList.toggle(no)}else n=iD(r),c.textContent=m,c.classList.toggle(na)}else n=iD(r),c.textContent=m,c.classList.toggle(na);c.addEventListener("click",()=>{e.index.has(tc.tagName)?(e.removeGrainSize(),document.getElementById(u)?.remove(),document.getElementById(l(u,np))?.remove(),c.textContent=m):(iL(e,g,n,u,d,e.setGrainSize,tb.energyUnits),c.textContent=h),c.classList.toggle(na),c.classList.toggle(no)})})(h,n[e],r,t),i_(h,t,n[e],r,ts,h.setAutomaticallySetMaxEne,h.removeAutomaticallySetMaxEne.bind(h)),i_(h,t,n[e],r,tp,h.setEnergyAboveTheTopHill,h.removeEnergyAboveTheTopHill.bind(h)),i_(h,t,n[e],r,tN,h.setMaxTemperature,h.removeMaxTemperature.bind(h)),n6(r,i5,s.removeModelParameters.bind(s),e).addEventListener("click",e=>{nw(g),t.removeIDs(d)})}return iP(i,t),i}(d,nG),"ModelParametersList",i4,i3);let j=document.getElementById(nI),ei=nE(ta.tagName);if(nw(ei),x(ei,j,null,function(e,t){console.log(ta.tagName);let i=z(void 0,i4),n=e.getElementsByTagName(ta.tagName);for(let e=0;e<n.length;e++){let a=n[e],o=t.addID(ta.tagName,e.toString()),d=z(o,i4);i.appendChild(d);let r=t.addID(o,ns);x(r,i,null,d,ta.tagName+" "+e.toString(),i4,i5);let g=iG(X(a),e),h=new Map;iB(g).forEach(e=>{iU(g,d,t,h,a,null,e.class,e.setMethod,e.removeMethod)});let m=D(void 0,i5);if(new Map([...h.entries()].sort()).forEach(e=>{m.appendChild(e)}),d.appendChild(m),iF(g,d,t,null,i5),iq(g,d,t,a,i5),iA(g).forEach(e=>{iU(g,d,t,h,a,i5,e.class,e.setMethod,e.removeMethod,!0)}),1==a.getElementsByTagName(ez.tagName).length){let e=new ez;g.setForceMacroDetailedBalance(e);let s=D(t.addID(o,ez.tagName),i5);d.appendChild(s);let i=_(ez.tagName,i4);s.appendChild(i)}n6(d,i5,s.removeControl.bind(s),e).addEventListener("click",e=>{nw(r),t.removeIDs(o);let s=l(o,e_.tagName);t.removeIDs(s);let i=l(s,"details");t.removeIDs(i);let n=l(i,"select");t.removeIDs(n)})}return ik(i,t),i}(d,nO),"ControlList",i4,i3),d.getElementsByTagName(tm.tagName).length>0){let e=document.getElementById(nz),t=nE(tm.tagName);nw(t),x(t,e,null,function(e){console.log(tm.tagName);let t=z(nE(tm.tagName,0),i4),i=e.getElementsByTagName(tm.tagName);if(i.length>0){if(i.length>1)throw Error("More than one MetadataList element.");let e=new tm(X(i[0]));function n(s,n,a){let o=i[0].getElementsByTagName(s);if(o.length>0){if(1==o.length){let s=A(o[0])?.nodeValue??"",i=new n(X(o[0]),s),d=z(void 0,i5);t.appendChild(d),d.appendChild(_(i.tagName+" "+s,i4)),a.call(e,i)}else throw Error(`More than one ${s} element.`)}}s.setMetadataList(e),n(tl.tagName,tl,e.setSource),n(tr.tagName,tr,e.setCreator),n(tg.tagName,tg,e.setDate),n(th.tagName,th,e.setContributor)}return t}(d),tm.tagName,i4,i3)}if(d.getElementsByTagName(es.tagName).length>0){let e=document.getElementById(nD),t=nE(es.tagName);nw(t),x(t,e,null,function(e){console.log(es.tagName);let t=nE(es.tagName,0),n=z(t,i4),a=e.getElementsByTagName(es.tagName);if(a.length>0){if(a.length>1)throw Error("More than one Analysis element.");let e=new es(X(a[0]));s.setAnalysis(e);let d=a[0].getElementsByTagName(tM.tagName);if(d.length>0){if(1==d.length){let s=A(d[0])?.nodeValue??"",i=new tM(X(d[0]),s),a=z(nE(t,tM.tagName),i5);n.appendChild(a),a.appendChild(_(i.tagName+" "+s,i4)),e.setDescription(i)}else throw Error("More than one Description element.")}let l=a[0].getElementsByTagName(W.tagName),h=nE(t,W.tagName),m=z(h,i5);if(x(h,n,null,m,W.tagName+"s",i4,i5),l.length>0)for(let t=0;t<l.length;t++){let s=X(l[t]),i=new W(s),n=i.tagName+" "+t.toString()+" "+r(s),a=nE(m.id,t.toString()),d=z(h,i5);x(a,m,null,d,n,i4,i3),e.addEigenvalueList(i);let c=[],u=l[t].getElementsByTagName($.tagName);if(u.length>0)for(let e=0;e<u.length;e++){let t=new o.Big(A(u[e])?.nodeValue);c.push(t),i.addEigenvalue(new $(X(u[e]),t))}d.appendChild(_(g(c,", "),i4))}let c=a[0].getElementsByTagName(Q.tagName),u=nE(t,Q.tagName),p=z(u,i5);if(x(u,n,null,p,Q.tagName+"s",i4,i5),c.length>0)for(let t=0;t<c.length;t++){let s=X(c[t]);void 0!=s.get("T")&&new o.Big(s.get("T")),void 0!=s.get("conc")&&new o.Big(s.get("conc"));let a=new Q(s),d=a.tagName+" "+t.toString()+" "+r(s),l=nE(n.id,Q.tagName,t.toString()),g=nE(l,t.toString()),h=z(l,i5);x(g,p,null,h,d,i4,i3),e.addPopulationList(a);let m=new Map,u=[];u.push("time");let N=c[t].getElementsByTagName(Z.tagName);if(N.length>0)for(let e=0;e<N.length;e++){let t=X(N[e]),s=new Z(t,[]);a.addPopulation(s);let i=void 0!=t.get("time")?new o.Big(t.get("time")):nL,n=new Map;m.set(i,n);let d=N[e].getElementsByTagName(K.tagName);if(d.length>0)for(let t=0;t<d.length;t++){let i=X(d[t]),a=i.get("ref");0==e&&u.push(a);let l=new o.Big(A(d[t])?.nodeValue),r=new K(i,l);s.addPop(r),n.set(a,l)}}let f=z(nE(g,"graph"),i4);h.appendChild(f);let v=document.createElement("canvas");f.appendChild(v);let E=new at(v,m,"2em SensSerif");i.push(E),ao(v,h,f,d);let w=z(nE(g,nh),i4);h.appendChild(w);let y=L(nE(l,nh),i4);P(y,u),m.forEach((e,t)=>{let s=[];s.push(t.toString()),e.forEach((e,t)=>{s.push(e.toString())}),P(y,s)}),w.appendChild(y),ad(()=>as(y),h,w,d,i4)}let N=a[0].getElementsByTagName(et.tagName),f=nE(t,et.tagName),v=z(f,i5);if(x(f,n,null,v,et.tagName+"s",i4,i5),N.length>0){let t=z(nE(f,nh),i4);v.appendChild(t);let s=L(nE(u,nh),i4),i=["T","conc"];for(let t=0;t<N.length;t++){let n=X(N[t]),a=[];a.push(n.get("T")),a.push(n.get("conc"));let d=new et(n);e.addRateList(d);let l=N[t].getElementsByTagName(ee.tagName);if(l.length>0)for(let e=0;e<l.length;e++){let s=X(l[e]);if(0==t){let e=s.get("fromRef"),t=s.get("toRef");i.push(e+"->"+t)}let n=(A(l[e])?.nodeValue??"").trim();a.push(n);let r=new ee(s,new o.Big(n));d.addFirstOrderRate(r)}let r=N[t].getElementsByTagName(J.tagName);if(r.length>0)for(let e=0;e<r.length;e++){let s=X(r[e]);0==t&&Array.from(s.values()).forEach(e=>{i.push("loss of "+e)});let n=(A(r[e])?.nodeValue??"").trim();a.push(n);let l=new J(s,new o.Big(n));d.addFirstOrderLoss(l)}0==t&&P(s,i),P(s,a)}t.appendChild(s),ad(()=>as(s),v,t,"Bartis-Widom Phenomenological Rate Coefficients",i4)}}return n}(d),es.tagName,i4,i3)}}(new DOMParser().parseFromString(p,"text/xml"))}}};let v=h.slice(u,u+1048576);c.readAsText(v),u+=1048576}},d.click()}}),d.appendChild(O),(q=I(U="Save MESMER File",nv(U),i4)).addEventListener("click",an),d.appendChild(q),nZ()});class at{constructor(e,t,s){this.canvas=e,this.data=t,this.draw(s)}draw(e){this.canvas.width=800,this.canvas.height=400;let t=this.canvas.getContext("2d");t.font=e,t.clearRect(0,0,this.canvas.width,this.canvas.height);let s=this.canvas.width,i=this.canvas.height,n=Number.MAX_VALUE,a=Number.MIN_VALUE,o=0;this.data.forEach((e,s)=>{let i=Math.log10(s.toNumber());n=Math.min(n,i),a=Math.max(a,i),e.forEach((e,s)=>{o=Math.max(o,t.measureText(s).width)})});let d=0;for(let e=0;e<2;e++){let s=1-1*e;d=Math.max(d,t.measureText(s.toString()).width)}let l=t.measureText("0"),r=l.actualBoundingBoxAscent+l.actualBoundingBoxDescent,g=4*r,h=d+r+20,m=i-(h+3*r),c=s-(g+o+20),u=(c-h)/(a-n),p=(g-m)/1;t.beginPath(),t.moveTo(h,m),t.lineTo(c,m),t.stroke(),t.beginPath(),t.moveTo(h,m),t.lineTo(h,g),t.stroke();let N=["red","green","blue","orange","purple","grey","cyan","magenta","lightblue","lightgreen","pink","yellow","brown","black"],f=new Map;this.data.forEach((e,s)=>{let i=0;e.forEach((e,a)=>{let o=h+(Math.log10(s.toNumber())-n)*u,d=e.toNumber();if(d<1){let e=m+(d-0)*p;if(e>0){t.beginPath(),t.arc(o,e,2,0,2*Math.PI);let s=N[i%N.length];f.set(a,s),t.fillStyle=s,t.fill()}}i++})}),t.textAlign="center",t.textBaseline="top",t.fillStyle="black",t.fillText("log10(time/secs)",h+(c-h)/2,m+g/2),t.save(),t.rotate(-Math.PI/2),t.textAlign="center",t.textBaseline="top",t.fillText("fractional population",-m-(g-m)/2,h-h),t.restore();let x=a-n,v=Math.abs(Math.ceil(x/Math.pow(10,Math.floor(Math.log10(x))))),E=Math.ceil(n/v),w=E*v;for(;w<a;){let e=h+(w-n)*u;t.beginPath(),t.moveTo(e,m),t.lineTo(e,m+5),t.stroke(),t.fillText(w.toString(),e,m+5),w+=v}for(let e=0;e<2;e++){let s=m-1*e;t.beginPath(),t.moveTo(h,s),t.lineTo(h-5,s),t.stroke()}let y=0;f.forEach((e,s)=>{let i=t.measureText(s),n=i.actualBoundingBoxAscent+i.actualBoundingBoxDescent;y=Math.max(y,n)});let C=c+20,b=y;E=0,f.forEach((e,s)=>{let i=g+E*b;t.fillStyle=e,t.fillRect(C,i,y/2,y/2),t.fillStyle="black",t.fillText(s,C+r+t.measureText(s).width/2,i-y/2),E++})}}function as(e){let t="",s=e.rows;for(let e=0;e<s.length;e++){let i=s[e].cells;for(let e=0;e<i.length;e++)t+=i[e].textContent,e<i.length-1&&(t+=",");t+="\n"}return t}function ai(e,t,s,i=!1){let n=document.createElement("a");n.href=i?e:`data:${t};charset=utf-8,`+encodeURIComponent(e),n.download=s,document.body.appendChild(n),n.click(),document.body.removeChild(n)}function an(){if(null==s){alert("No Mesmer object to save.");return}{let e=new tb(s.attributes);e.setTitle(s.getTitle()),void 0!=nV&&e.setMoleculeList(new tv(new Map,Array.from(nV.values()))),void 0!=nX&&e.setReactionList(new tE(new Map,Array.from(nX.values()))),void 0!=s.getConditionss()&&e.setConditionss(s.getConditionss()),void 0!=s.getModelParameterss()&&e.setModelParameterss(s.getModelParameterss()),void 0!=s.getControls()&&e.setControls(s.getControls());let t=s.getMetadataList();void 0!=t&&e.setMetadataList(t);let i=s.getAnalysis();void 0!=i&&e.setAnalysis(i),console.log("saveXML"),ai(tb.header+e.toXML("  ",""),"text/xml",aa(e.getTitle()?.value)+".xml")}}function aa(e){return e.replace(/[^a-z0-9]/gi,"_")}function ao(e,t,i,n){let a=I("Save as PNG",nE(t.id,"saveButton"),i4);null!=i?t.insertBefore(a,i):t.appendChild(a),a.addEventListener("click",()=>{ai(e.toDataURL(),"image/png",aa(s.getTitle()?.value+"_"+n)+".png",!0)})}function ad(e,t,i,n,a){let o=I("Save as CSV",nE(t.id,N,nr),a);t.insertBefore(o,i),o.addEventListener("click",()=>{let t=e(),i=aa(s.getTitle()?.value+"_"+n)+".csv";ai(t,"text/csv",i),console.log("Saved "+i)})}function al(e,t){try{let s=new o.Big(t.value);e.value=s}catch(e){alert("Value invalid, resetting...")}t.value=e.value.toString()}
//# sourceMappingURL=index.4ea3a783.js.map
