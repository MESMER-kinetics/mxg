let e,t,n,a,s,i,r,o,l,g,d,h,m,c,u,N,f,p,E,x;function y(e,t){if(!e.has(t))throw Error(`Key ${t} not found in map`);return e.get(t)}function w(e,t){return null==e?"":(null==t&&(t=", "),e.map(e=>null==e?"null":e.toString()).join(t))}function v(e){var t="";for(let n=0;n<e.length;n++)t+="<th>"+e[n]+"</th>";return b(t)}function T(e,t=!1){let n="<td";return t&&(n+=' contenteditable="true"'),n+=">"+e+"</td>"}function b(e){return"<tr>"+e+"</tr>\n"}function M(e,t){let n="<"+t;if(e)for(let[t,a]of e)n+=" "+t+'="'+a+'"';return n+" />"}function S(e,t){let n=e.getElementsByTagName(t)[0];if(null==n)throw Error(t+" element not found");return n}function B(e){let t=e.childNodes;if(null==t)throw Error("Element has no childNodes");return t[0]}function P(e){let t=e.nodeValue;if(null==t)throw Error("nodeValue is null");return t}class R{constructor(e){this.tagName=e}toXML(e){let t=M(null,this.tagName);return e?"\n"+e+t:t}}class z extends R{constructor(e,t){super(t),this.attributes=e}toString(){let e=this.tagName+"(";return this.attributes.forEach((t,n)=>{e+=`${n}(${t}), `}),e}toXML(e){let t="";if(void 0!=e&&(t+="\n"+e),t+="<"+this.tagName,this.attributes)for(let[e,n]of this.attributes)t+=" "+e+'="'+n.toString()+'"';return t+" />"}}class L extends z{constructor(e,t,n){super(e,t),this.value=n}toString(){return super.toString()+`, ${this.value.toString()})`}toXML(e){return G(this.value.trim(),this.tagName,this.attributes,e,!1)}}class C extends z{constructor(e,t,n){super(e,t),this.value=n}toString(){return super.toString()+`, ${this.value.toString()})`}toXML(e){return G(this.value.toString().trim(),this.tagName,this.attributes,e,!1)}}class I extends z{constructor(e,t,n,a){super(e,t),this.delimiter=",",this.values=n,a&&(this.delimiter=a)}toString(){return super.toString()+`, ${this.values.toString()})`}setDelimiter(e){this.delimiter=e}toXML(e){return G(this.values.toString().replaceAll(",",this.delimiter),this.tagName,this.attributes,e,!1)}}class D extends z{constructor(e,t){super(e,t),this.nodes=new Map}addNode(e){this.nodes.set(this.nodes.size,e)}toString(){let e=super.toString();return this.nodes.forEach((t,n)=>{e+=`, ${t.toString()}`}),e+")"}toXML(e,t){let n;void 0!=e&&void 0!=t&&(n=t+e);let a="";if(this.nodes.size>0)return this.nodes.forEach(t=>{t instanceof D?a+=t.toXML(e,n):a+=t.toXML(n)}),G(a,this.tagName,this.attributes,t,!0);{let e=M(this.attributes,this.tagName);return void 0!=t?"\n"+t+e:e}}}function A(e,t,n){let a="";return n&&void 0!=t&&(a+="\n"+t),a+"</"+e+">"}function G(e,t,n,a,s){return function(e,t,n){let a="";if(void 0!=n&&(a+="\n"+n),a+="<"+e,t)for(let[e,n]of t)a+=" "+e+'="'+n.toString()+'"';return a+">"}(t,n,a)+e+A(t,a,s)}function F(e){let t=e.getAttributeNames(),n=new Map;return t.forEach(function(t){let a=e.getAttribute(t);null!=a&&n.set(t,a)}),n}function O(e,t){let n=e.getElementsByTagName(t);if(1!=n.length)throw Error("Expecting 1 "+t+" but finding "+n.length);return n[0]}class H extends z{static{this.tagName="atom"}constructor(e){super(e,H.tagName),void 0==e.get("id")&&console.warn(H.tagName+" id attribute is undefined"),void 0==e.get("elementType")&&console.warn(H.tagName+" elementType attribute is undefined")}get id(){return this.attributes.get("id")}get elementType(){return this.attributes.get("elementType")}}class _ extends D{static{this.tagName="atomArray"}constructor(e,t){super(e,_.tagName),t.forEach(e=>{this.nodes.set(this.nodes.size,e)})}}class k extends z{static{this.tagName="bond"}constructor(e){super(e,k.tagName)}}class X extends D{static{this.tagName="bondArray"}constructor(e,t){super(e,X.tagName),t.forEach(e=>{this.nodes.set(this.nodes.size,e)})}}class V extends C{static{this.tagName="scalar"}constructor(e,t){super(e,V.tagName,t)}}class $ extends I{static{this.tagName="array"}constructor(e,t,n){super(e,$.tagName,t,n)}}class U extends D{static{this.tagName="property"}constructor(e,t){super(e,U.tagName),this.nodes.set(0,t)}getProperty(){return this.nodes.get(0)}}class q extends D{static{this.tagName="propertyList"}constructor(e,t){super(e,q.tagName),this.properties=t,t.forEach(e=>{this.nodes.set(this.nodes.size,e)})}}class j extends C{static{this.tagName="me:deltaEDown"}constructor(e,t){super(e,j.tagName,t)}}class J extends D{static{this.tagName="me:energyTransferModel"}constructor(e,t){super(e,J.tagName),t.forEach(e=>{this.nodes.set(this.nodes.size,e)})}}class K extends z{static{this.tagName="me:DOSCMethod"}constructor(e){super(e,K.tagName)}}class W extends L{static{this.tagName="me:bondRef"}constructor(e,t){super(e,W.tagName,t)}}class Z extends z{static{this.tagName="me:PotentialPoint"}constructor(e){super(e,Z.tagName)}}class Q extends D{static{this.tagName="me:HinderedRotorPotential"}constructor(e,t){super(e,Q.tagName),t.forEach(e=>{this.nodes.set(this.nodes.size,e)})}}class Y extends C{static{this.tagName="me:periodicity"}constructor(e,t){super(e,Y.tagName,t)}}class ee extends D{static{this.tagName="me:ExtraDOSCMethod"}constructor(e,t,n,a){super(e,ee.tagName),t&&this.nodes.set(this.nodes.size,t),n&&this.nodes.set(this.nodes.size,n),a&&this.nodes.set(this.nodes.size,a)}}class et extends C{static{this.tagName="me:reservoirSize"}constructor(e,t){super(e,et.tagName,t)}}class en extends D{static{this.tagName="molecule"}static{this.energyDictRef="me:ZPE"}static{this.rotConstsDictRef="me:rotConsts"}static{this.vibFreqsDictRef="me:vibFreqs"}constructor(e,t,n,a,s,i,r,o){super(e,en.tagName),this.index=new Map;let l=this.attributes.get("id");if(void 0==l)throw Error("id is undefined");this.id=l;let g=0;if(t&&(this.nodes.set(g,t),t instanceof H?this.index.set(H.tagName,g):this.index.set(_.tagName,g),g++),n&&(this.nodes.set(g,n),this.index.set(X.tagName,g),g++),void 0==a)throw Error("properties is undefined");this.nodes.set(g,a),this.index.set(q.tagName,g),g++,s&&(this.nodes.set(g,s),this.index.set(J.tagName,g),g++),i&&(this.nodes.set(g,i),this.index.set(K.tagName,g)),r&&(this.nodes.set(g,r),this.index.set(ee.tagName,g)),o&&(this.nodes.set(g,o),this.index.set(et.tagName,g))}getID(){return this.attributes.get("id")}getDescription(){return this.attributes.get("description")}getActive(){let e=this.attributes.get("active");return void 0!=e||e}getProperties(){let e=this.index.get(q.tagName);if(void 0!=e||void 0!=(e=this.index.get(U.tagName)))return this.nodes.get(e)}getPropertyScalar(e){let t=this.getProperties();if(void 0!=t){if(t instanceof q){let n=t.properties.get(e);if(void 0==n)return;return n.getProperty().value}{let e=t.getProperty();if(void 0==e)return;return e.value}}}getEnergy(){let e=this.getPropertyScalar(en.energyDictRef);return void 0==e?0:e}setPropertyScalar(e,t,n){let a=this.getProperties();if(void 0==a)this.nodes.set(this.nodes.size,this.createPropertyScalar(e,t,n)),this.index.set(U.tagName,this.nodes.size);else if(a instanceof U){if(a.getProperty().attributes.get(e))a.getProperty().value=t;else{let s=new Map;s.set(e,a),s.set(e,this.createPropertyScalar(e,t,n)),a=new q(new Map,s)}}else{let s=a.properties.get(e);void 0==s?a.properties.set(e,this.createPropertyScalar(e,t,n)):s.getProperty().value=t}}createPropertyScalar(e,t,n){let a=new Map;a.set("dictRef",en.energyDictRef);let s=new Map;return n&&s.set("units",n),new U(a,new V(s,t))}setEnergy(e){this.setPropertyScalar(en.energyDictRef,e)}getPropertyArray(e){let t=this.getProperties();if(void 0!=t){if(t instanceof q){let n=t.properties.get(e);if(void 0==n)return;return n.getProperty().values}if(t.getProperty().tagName==e){let e=t.getProperty();if(void 0==e)return;return e.values}}}getRotConsts(){return this.getPropertyArray(en.rotConstsDictRef)}getVibFreqs(){return this.getPropertyArray(en.vibFreqsDictRef)}}class ea extends D{constructor(e,t,n,a){super(e,t),this.nodes.set(0,n),this.molecules=a}getMoleculeAbb(){return this.nodes.get(0)}getRef(){let e=this.getMoleculeAbb().attributes.get("ref");if(null==e)throw console.log(this.getMoleculeAbb().toString()),Error('Attribute "ref" is undefined.');return e}getMolecule(){let e=this.getRef(),t=this.molecules.get(e);if(null==t)throw Error(`Molecule with ref ${e} not found in molecules`);return t}}class es extends ea{static{this.tagName="reactant"}constructor(e,t,n){super(e,es.tagName,t,n)}}class ei extends ea{static{this.tagName="product"}constructor(e,t,n){super(e,ei.tagName,t,n)}}class er extends ea{static{this.tagName="me:transitionState"}constructor(e,t,n){super(e,er.tagName,t,n)}}class eo extends C{static{this.tagName="me:preExponential"}constructor(e,t){super(e,eo.tagName,t)}}class el extends C{static{this.tagName="me:activationEnergy"}constructor(e,t){super(e,el.tagName,t)}}class eg extends C{static{this.tagName="me:TInfinity"}constructor(e,t){super(e,eg.tagName,t)}}class ed extends C{static{this.tagName="me:nInfinity"}constructor(e,t){super(e,ed.tagName,t)}}class eh extends z{static{this.tagName="me:tunneling"}constructor(e){super(e,eh.tagName)}}class em extends D{static{this.tagName="me:MCRCMethod"}constructor(e){super(e,em.tagName)}}class ec extends em{static{this.xsiType="me:MesmerILT"}static{this.xsiType2="MesmerILT"}constructor(e,t,n,a,s){super(e),this.index=new Map,void 0!=t&&(this.index.set(eo.tagName,this.index.size),this.addNode(t)),void 0!=n&&(this.index.set(el.tagName,this.index.size),this.addNode(n)),void 0!=a&&(this.index.set(eg.tagName,this.index.size),this.addNode(a)),void 0!=s&&(this.index.set(ed.tagName,this.index.size),this.addNode(s))}getPreExponential(){let e=this.index.get(eo.tagName);if(void 0!=e)return this.nodes.get(e)}getActivationEnergy(){let e=this.index.get(el.tagName);if(void 0!=e)return this.nodes.get(e)}getTInfinity(){let e=this.index.get(eg.tagName);if(void 0!=e)return this.nodes.get(e)}getNInfinity(){let e=this.index.get(ed.tagName);if(void 0!=e)return this.nodes.get(e)}}class eu extends C{static{this.tagName="me:excessReactantConc"}constructor(e,t){super(e,eu.tagName,t)}}class eN extends D{static{this.tagName="reaction"}constructor(e,t,n,a,s,i,r,o){super(e,eN.tagName),this.index=new Map,this.reactants=n,n instanceof Map?n.forEach(e=>{this.addToIndex(es.tagName,e),this.addNode(e)}):void 0!=n&&(this.index.set(es.tagName,this.nodes.size),this.addNode(n)),this.products=a,a instanceof Map?a.forEach(e=>{this.addToIndex(ei.tagName,e),this.addNode(e)}):void 0!=a&&(this.index.set(ei.tagName,this.nodes.size),this.addNode(a)),s&&(this.index.set(eh.tagName,this.nodes.size),this.addNode(s)),this.transitionStates=i,i instanceof Map?i.forEach(e=>{this.addToIndex(er.tagName,e),this.addNode(e)}):void 0!=i&&(this.index.set(er.tagName,this.nodes.size),this.addNode(i)),void 0!=r&&(this.index.set(em.tagName,this.nodes.size),this.addNode(r)),o&&(this.index.set(eu.tagName,this.nodes.size),this.addNode(o))}addToIndex(e,t){let n=this.index.get(e);if(void 0==n)this.index.set(e,this.nodes.size);else if(n instanceof Map)n.set(t.getRef(),this.nodes.size);else{let a=new Map;a.set(this.nodes.get(n).getRef(),n),a.set(t.getRef(),this.nodes.size),this.index.set(e,a)}}getID(){return this.attributes.get("id")}getMCRCMethod(){let e=this.index.get(em.tagName);if(void 0!=e)return this.nodes.get(e)}getTunneling(){let e=this.index.get(eh.tagName);if(void 0!=e)return this.nodes.get(e)}getExcessReactantConc(){let e=this.index.get(eu.tagName);if(void 0!=e)return this.nodes.get(e)}getReactantsLabel(){return void 0==this.reactants?void 0:this.reactants instanceof Map?Array.from(this.reactants.keys()).join(" + "):this.reactants.getRef()}getReactantsEnergy(){return this.reactants instanceof Map?Array.from(this.reactants.values()).map(e=>e.getMolecule().getEnergy()).reduce((e,t)=>e+t,0):0}getProductsLabel(){return void 0==this.products?void 0:this.products instanceof Map?Array.from(this.products.keys()).join(" + "):this.products.getRef()}getProductsEnergy(){return this.products instanceof Map?Array.from(this.products.values()).map(e=>e.getMolecule().getEnergy()).reduce((e,t)=>e+t,0):0}getLabel(){return this.getReactantsLabel()+" -> "+this.getProductsLabel()}}function ef(e,t,n,a,s,i,r,o,l,g,d){let h=a+(i-a)/2;eE(e,d,o,t,h-ex(e,d,o)/2,r+l),eE(e,g,o,t,h-ex(e,g,o)/2,r+3*l),ep(e,t,n,a,s,i,r)}function ep(e,t,n,a,s,i,r){e.beginPath(),e.strokeStyle=t,e.lineWidth=n,e.moveTo(a,s),e.lineTo(i,r),e.stroke()}function eE(e,t,n,a,s,i){e.save(),e.translate(s,i),e.scale(1,-1),e.font=n,e.fillStyle=a,e.fillText(t,0,0),e.restore()}function ex(e,t,n){return e.font=n,e.measureText(t).width}class ey extends L{static{this.tagName="me:bathGas"}constructor(e,t,n){super(e,ey.tagName,t),this.molecules=n}getMolecule(){return this.molecules.get(this.value)}}class ew extends C{static{this.tagName="me:experimentRate"}constructor(e,t){super(e,ew.tagName,t)}}class ev extends D{static{this.tagName="me:PTpair"}constructor(e,t,n){super(e,ev.tagName),this.index=new Map,t&&(this.index.set(ey.tagName,this.nodes.size),this.addNode(t)),n&&(this.index.set(ew.tagName,this.nodes.size),this.addNode(n))}getP(){let e=this.attributes.get("P");if(e)return parseFloat(e);throw Error("P is undefined")}setP(e){this.attributes.set("P",e.toString())}getT(){let e=this.attributes.get("T");if(e)return parseFloat(e);throw Error("T is undefined")}setT(e){this.attributes.set("T",e.toString())}getBathGas(){let e=this.index.get(ey.tagName);return e?this.nodes.get(e):void 0}getExperimentRate(){let e=this.index.get(ew.tagName);return e?this.nodes.get(e):void 0}}class eT extends D{static{this.tagName="me:PTs"}constructor(e,t){super(e,eT.tagName),t.forEach(e=>{this.addNode(e)}),this.pTpairs=t}}class eb extends D{static{this.tagName="me:conditions"}constructor(e,t,n){super(e,eb.tagName),this.addNode(t),this.addNode(n)}getBathGas(){return this.nodes.get(0)}getPTs(){return this.nodes.get(1)}}class eM extends C{static{this.tagName="me:grainSize"}constructor(e,t){super(e,eM.tagName,t)}toString(){return`GrainSize(${super.toString()})`}}class eS extends C{static{this.tagName="me:energyAboveTheTopHill"}constructor(e,t){super(e,eS.tagName,t)}}class eB extends D{static{this.tagName="me:modelParameters"}constructor(e,t){super(new Map,eB.tagName),this.addNode(e),this.addNode(t)}getGrainSize(){return this.nodes.get(0)}getEnergyAboveTheTopHill(){return this.nodes.get(1)}}class eP extends R{static{this.tagName="me:testDOS"}constructor(){super(eP.tagName)}}class eR extends R{static{this.tagName="me:printSpeciesProfile"}constructor(){super(eR.tagName)}}class ez extends R{static{this.tagName="me:testMicroRates"}constructor(){super(ez.tagName)}}class eL extends R{static{this.tagName="me:testRateConstant"}constructor(){super(eL.tagName)}}class eC extends R{static{this.tagName="me:printGrainDOS"}constructor(){super(eC.tagName)}}class eI extends R{static{this.tagName="me:printCellDOS"}constructor(){super(eI.tagName)}}class eD extends R{static{this.tagName="me:printReactionOperatorColumnSums"}constructor(){super(eD.tagName)}}class eA extends R{static{this.tagName="me:printTunnellingCoefficients"}constructor(){super(eA.tagName)}}class eG extends R{static{this.tagName="me:printGrainkfE"}constructor(){super(eG.tagName)}}class eF extends R{static{this.tagName="me:printGrainBoltzmann"}constructor(){super(eF.tagName)}}class eO extends R{static{this.tagName="me:printGrainkbE"}constructor(){super(eO.tagName)}}class eH extends C{static{this.tagName="me:eigenvalues"}constructor(e,t){super(e,eH.tagName,t)}}class e_ extends R{static{this.tagName="me:hideInactive"}constructor(){super(e_.tagName)}}class ek extends C{static{this.tagName="me:diagramEnergyOffset"}constructor(e,t){super(e,ek.tagName,t)}}class eX extends D{static{this.tagName="me:control"}constructor(e,t,n,a,s,i,r,o,l,g,d,h,m,c,u){super(e,eX.tagName),this.index=new Map,void 0!=t&&(this.addNode(t),this.index.set(eP.tagName,this.index.size)),void 0!=n&&(this.addNode(n),this.index.set(eR.tagName,this.index.size)),void 0!=a&&(this.addNode(a),this.index.set(ez.tagName,this.index.size)),void 0!=s&&(this.addNode(s),this.index.set(eL.tagName,this.index.size)),void 0!=i&&(this.addNode(i),this.index.set(eC.tagName,this.index.size)),void 0!=r&&(this.addNode(r),this.index.set(eI.tagName,this.index.size)),void 0!=o&&(this.addNode(o),this.index.set(eD.tagName,this.index.size)),void 0!=l&&(this.addNode(l),this.index.set(eA.tagName,this.index.size)),void 0!=g&&(this.addNode(g),this.index.set(eG.tagName,this.index.size)),void 0!=d&&(this.addNode(d),this.index.set(eF.tagName,this.index.size)),void 0!=h&&(this.addNode(h),this.index.set(eO.tagName,this.index.size)),void 0!=m&&(this.addNode(m),this.index.set(eH.tagName,this.index.size)),void 0!=c&&(this.addNode(c),this.index.set(e_.tagName,this.index.size)),void 0!=u&&(this.addNode(u),this.index.set(ek.tagName,this.index.size))}getTestDOS(){let e=this.index.get(eP.tagName)??-1;if(-1!==e)return this.nodes.get(e)}getPrintSpeciesProfile(){let e=this.index.get(eR.tagName)??-1;if(-1!==e)return this.nodes.get(e)}getTestMicroRates(){let e=this.index.get(ez.tagName)??-1;if(-1!==e)return this.nodes.get(e)}getTestRateConstant(){let e=this.index.get(eL.tagName)??-1;if(-1!==e)return this.nodes.get(e)}getPrintGrainDOS(){let e=this.index.get(eC.tagName)??-1;if(-1!==e)return this.nodes.get(e)}getPrintCellDOS(){let e=this.index.get(eI.tagName)??-1;if(-1!==e)return this.nodes.get(e)}getPrintReactionOperatorColumnSums(){let e=this.index.get(eD.tagName)??-1;if(-1!==e)return this.nodes.get(e)}getPrintTunnellingCoefficients(){let e=this.index.get(eA.tagName)??-1;if(-1!==e)return this.nodes.get(e)}getPrintGrainkfE(){let e=this.index.get(eG.tagName)??-1;if(-1!==e)return this.nodes.get(e)}getPrintGrainBoltzmann(){let e=this.index.get(eF.tagName)??-1;if(-1!==e)return this.nodes.get(e)}getPrintGrainkbE(){let e=this.index.get(eO.tagName)??-1;if(-1!==e)return this.nodes.get(e)}getEigenvalues(){let e=this.index.get(eH.tagName)??-1;if(-1!==e)return this.nodes.get(e)}getHideInactive(){let e=this.index.get(e_.tagName)??-1;if(-1!==e)return this.nodes.get(e)}getDiagramEnergyOffset(){let e=this.index.get(ek.tagName)??-1;if(-1!==e)return this.nodes.get(e)}}let eV="me:title",e$=new Map,eU=new Map;const eq=`<?xml version="1.0" encoding="utf-8" ?>
<?xml-stylesheet type='text/xsl' href='../../mesmer2.xsl' media='other'?>
<?xml-stylesheet type='text/xsl' href='../../mesmer1.xsl' media='screen'?>`;function ej(e){let t=F(e),n=e.children;if(1!=n.length)throw Error("Expecting 1 child but finding "+n.length);let a=F(n[0]),s=n[0].nodeName,i=n[0].textContent;if(null==i)throw console.error("nodeName"),Error("textContent is null");if(i=i.trim(),null==t.get("dictRef"))throw Error("dictRef is null");if(s==V.tagName)return new U(t,new V(a,parseFloat(i)));if(s==$.tagName)return new U(t,new $(a,function(e){let t=[];for(let n=0;n<e.length;n++)t.push(parseFloat(e[n]));return t}(i.split(/\s+/))," "));throw Error("Unexpected nodeName: "+s)}document.addEventListener("DOMContentLoaded",M=>{u=document.getElementById("xml_title"),N=document.getElementById("xml_text"),window.loadXML=function(){!function M(){(f=document.createElement("input")).type="file",f.onchange=function(){if(f.files){for(let e=0;e<f.files.length;e++)console.log("inputElement.files["+e+"]="+f.files[e]);let s=f.files[0];if(console.log(s.name),a=s.name,null!=N){let i=new FileReader,f=0,M="";i.onload=function(R){if(!R.target)throw Error("Event target is null");if(M+=R.target.result,null!=s){if(f<s.size){let e=s.slice(f,f+1048576);i.readAsText(e),f+=1048576}else{var L;L=M=M.trim(),null!=u&&(u.innerHTML=a),null!=N&&(N.innerHTML=L.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\n/g,"<br>").replace(/\t/g,"&nbsp;&nbsp;&nbsp;&nbsp;").replace(/  /g,"&nbsp;&nbsp;")),function(a){let s,i,u,N,f,M,R,L,C,I,D,G,V,$,ea,eE;t="\n";let eq=a.documentElement;if(null==eq)throw Error("Document element not found");{let e=eq.tagName;t+="<"+e,console.log(e),n=A(e,"",!0);let a=!0,s=" ".repeat(e.length+2);eq.getAttributeNames().forEach(function(e){let n=eq.getAttribute(e),i=`${e}="${n}"`;a?(a=!1,t+=" "+i):t+="\n"+s+i}),t+=">"}(function(t){if(null==(r=t.getElementsByTagName(eV)))throw Error(eV+" not found");if(1!=r.length)throw Error("Multiple "+eV+" elements found");{console.log("Title="+(e=(e=r[0].childNodes[0].nodeValue).trim()));let t=document.getElementById("title");null!=t&&(t.innerHTML=e)}})(a),function(e){let t="moleculeList";console.log("Read and store "+t);let n=O(e,t);null!=(o=document.getElementById("molecules_title"))&&(o.innerHTML="Molecules");let a=new Set;if(n.childNodes.forEach(function(e){a.add(e.nodeName)}),1!=a.size&&!(2==a.size&&a.has("#text")))throw console.error("moleculeListTagNames:"),a.forEach(e=>console.error(e)),Error("Additional tag names in moleculeList:");if(!a.has(en.tagName))throw Error('Expecting tags with "'+en.tagName+'" tagName but there are none!');let s=n.getElementsByTagName(en.tagName);console.log("Number of molecules="+s.length);for(let e=0;e<s.length;e++){let t,n,a,i,r,o,l,g,d=F(s[e]),h=new Set,m=s[e].childNodes;for(let e=0;e<m.length;e++){let t=m[e];h.has(t.nodeName)?"#text"!=t.nodeName&&console.warn("Another ChildNode with nodeName="+t.nodeName):h.add(t.nodeName)}let c=s[e].getElementsByTagName(_.tagName);if(c.length>1)throw Error("Expecting 1 or 0 "+_.tagName+" but finding "+c.length+"!");if(1==c.length){let e=c[0],t=e.getElementsByTagName(H.tagName);if(t.length<2)throw Error("Expecting 2 or more atoms in "+_.tagName+", but finding "+t.length+"!");let n=[];for(let e=0;e<t.length;e++)n.push(new H(F(t[e])));i=new _(F(e),n),h.delete(_.tagName)}else{let t=s[e].getElementsByTagName(H.tagName);if(1==t.length)i=new H(F(t[0]));else if(t.length>1)throw Error("Expecting 1 "+H.tagName+" but finding "+t.length+". Should these be in an "+_.tagName+"?")}h.delete(H.tagName);let u=s[e].getElementsByTagName(X.tagName);if(u.length>1)throw Error("Expecting 1 or 0 "+X.tagName+" but finding "+u.length+"!");if(1==u.length){let e=u[0],t=e.getElementsByTagName(k.tagName),n=[];for(let e=0;e<t.length;e++)n.push(new k(F(t[e])));r=new X(F(e),n),h.delete(X.tagName)}else{let t=s[e].getElementsByTagName(k.tagName);if(1==t.length)r=new k(F(t[0]));else if(t.length>1)throw Error("Expecting 1 "+k.tagName+" but finding "+t.length+". Should these be in a "+X.tagName+"?")}h.delete(k.tagName);let N=s[e].getElementsByTagName(q.tagName);if(N.length>1)throw Error("Expecting 1 or 0 "+q.tagName+" but finding "+N.length+"!");if(1==N.length){let e=N[0],t=e.getElementsByTagName(U.tagName);if(t.length<2)throw Error("Expecting 2 or more "+U.tagName+" in "+q.tagName+", but finding "+t.length+"!");let n=new Map;for(let e=0;e<t.length;e++){let a=ej(t[e]),s=a.attributes.get("dictRef");n.set(s,a)}o=new q(F(e),n),h.delete(q.tagName)}else{let t=s[e].getElementsByTagName(U.tagName);if(t.length>1)throw Error("Expecting 1 "+U.tagName+" but finding "+t.length+". Should these be in a "+q.tagName+"?");o=ej(t[0])}if(h.delete(U.tagName),h.delete(J.tagName),null!=(l=s[e].getElementsByTagName(J.tagName))&&l.length>0){if(1!=l.length)throw Error("energyTransferModel length="+l.length);let e=l[0].getElementsByTagName(j.tagName);if(null!=e){let n=[];for(let t=0;t<e.length;t++){let a=parseFloat(P(B(e[t]))),s=new j(F(e[t]),a);n.push(s)}t=new J(F(l[0]),n)}}if(h.delete(K.tagName),null!=(l=s[e].getElementsByTagName(K.tagName))){let e=l[0];null!=e&&(n=new K(F(e)))}if(h.delete(ee.tagName),(l=s[e].getElementsByTagName(ee.tagName)).length>0){let e,t,n;if(1!=l.length)throw Error("Expecting only 1 extra DOSCMethod, but there are "+l.length);let s=l[0].getElementsByTagName(W.tagName);if(s.length>0){if(1!=s.length)throw Error("Expecting only 1 bondRef, but there are "+s.length);e=new W(F(s[0]),P(B(s[0])))}let i=l[0].getElementsByTagName(Q.tagName);if(i.length>0){if(1!=i.length)throw Error("Expecting only 1 HinderedRotorPotential, but there are "+i.length);let e=[],n=i[0].getElementsByTagName(Z.tagName);for(let t=0;t<n.length;t++)e.push(new Z(F(n[t])));t=new Q(F(i[0]),e)}let r=l[0].getElementsByTagName(Y.tagName);if(r.length>0){if(1!=r.length)throw Error("Expecting only 1 Periodicity, but there are "+r.length);n=new Y(F(r[0]),parseFloat(P(B(r[0]))))}a=new ee(F(l[0]),e,t,n)}if(h.delete(et.tagName),(l=s[e].getElementsByTagName(et.tagName)).length>0){if(1!=l.length)throw Error("Expecting only 1 reservoirSize, but there are "+l.length);g=new et(F(l[0]),parseFloat(P(B(l[0]))))}h.delete("#text"),h.size>0&&(console.warn("There are additional unexpected moleculeTagNames:"),h.forEach(e=>console.warn(e)));let f=new en(d,i,r,o,t,n,a,g);e$.set(f.id,f)}e$.forEach(function(e,t){let n=t+"_energy",a=document.getElementById(n);a&&a.addEventListener("change",a=>{let s=a.target.value;isNaN(parseFloat(s))?(alert("Energy input for "+t+" is not a number"),document.getElementById(n).value=e.getEnergy().toString(),console.log("inputValue="+s),console.log("Type of inputValue: "+typeof s)):(e.setEnergy(parseFloat(s)),console.log("Set energy of "+t+" to "+s+" kJ/mol"))})})}(a),function(){if(0==e$.size)return;let e=v(["Name","Energy<br>kJ/mol","Rotation constants<br>cm<sup>-1</sup>","Vibration frequencies<br>cm<sup>-1</sup>"]);e$.forEach(function(t,n){let a,s,i=t.getEnergy();s=null==i?"":i.toString();let r="",o=t.getRotConsts();void 0!=o&&(r=w(o," "));let l="",g=t.getVibFreqs();void 0!=g&&(l=w(g," ")),e+=b(T(n)+T((a='<input type="number"'+(' id="'+(n+"_energy")+'" onchange="setEnergy(this)"'),null!==s&&(a+=' value="'+s+'"'),a+">"))+T(r,!0)+T(l,!0))}),null!==(l=document.getElementById("molecules_table"))&&(l.innerHTML=e)}(),function(e){let t="reactionList";console.log(t);let n=O(e,t).getElementsByTagName(eN.tagName),a=n.length;if(console.log("Number of reactions="+a),0==a)throw Error("No reactions: There should be at least 1!");null!=(g=document.getElementById("reactions_title"))&&(g.innerHTML="Reactions");for(let e=0;e<a;e++){let t=F(n[e]),a=t.get("id");if(null==a)throw Error("reactionID is null");if(null!=a){let s,i,r,o,l,g;console.log("id="+a);let d=n[e].getElementsByTagName(es.tagName);if(d.length>0){if(d.length<2){let e=new z(F(S(d[0],en.tagName)),en.tagName);s=new es(F(d[0]),e,e$)}else{s=new Map;for(let e=0;e<d.length;e++){let t=new z(F(S(d[e],en.tagName)),en.tagName),n=new es(F(d[e]),t,e$);s.set(n.getRef(),n)}}}let h=n[e].getElementsByTagName(ei.tagName);if(h.length>0){if(h.length<2){let e=new z(F(S(h[0],en.tagName)),en.tagName);i=new ei(F(h[0]),e,e$)}else{i=new Map;for(let e=0;e<h.length;e++){let t=new z(F(S(h[e],en.tagName)),en.tagName),n=new ei(F(h[e]),t,e$);i.set(n.getRef(),n)}}}let m=n[e].getElementsByTagName(er.tagName);if(m.length>0){if(m.length<2){let e=new z(F(m[0].getElementsByTagName(en.tagName)[0]),en.tagName);r=new er(F(m[0]),e,e$)}else{r=new Map;for(let e=0;e<m.length;e++){let t=new z(F(m[e].getElementsByTagName(en.tagName)[0]),en.tagName),n=new er(F(m[e]),t,e$);r.set(n.getRef(),n)}}}let c=n[e].getElementsByTagName(eh.tagName);if(c.length>0){if(c.length>1)throw Error("Expecting 1 "+eh.tagName+" but finding "+c.length+"!");o=new eh(F(c[0]))}let u=n[e].getElementsByTagName(em.tagName);if(u.length>0){if(u.length>1)throw Error("Expecting 1 "+em.tagName+" but finding "+u.length+"!");{let e=F(u[0]),t=e.get("name");if(void 0==t||t==ec.xsiType2){let t=e.get("xsi:type");if(void 0!=t&&(t==ec.xsiType||t==ec.xsiType2)){let t,n,a,s;let i=u[0].getElementsByTagName(eo.tagName);if(null!=i&&null!=i[0]){let e=parseFloat(P(B(i[0])));t=new eo(F(i[0]),e)}let r=u[0].getElementsByTagName(el.tagName);if(null!=r&&null!=r[0]){let e=parseFloat(P(B(r[0])));n=new el(F(r[0]),e)}let o=u[0].getElementsByTagName(eg.tagName);if(null!=o&&null!=o[0]){let e=parseFloat(P(B(o[0])));a=new ed(F(o[0]),e)}let g=u[0].getElementsByTagName(ed.tagName);if(null!=g&&null!=g[0]){let e=parseFloat(P(B(g[0])));s=new ed(F(g[0]),e)}l=new ec(e,t,n,a,s)}}else l=new em(e)}}let N=n[e].getElementsByTagName(eu.tagName);if(N.length>0){if(N.length>1)throw Error("Expecting 1 "+eu.tagName+" but finding "+N.length+"!");let e=parseFloat(P(B(N[0])));g=new eu(F(N[0]),e)}let f=new eN(t,a,s,i,o,r,l,g);eU.set(a,f)}}}(a),function(){if(0==eU.size)return;let e=v(["ID","Reactants","Products","Transition State","PreExponential","Activation Energy","TInfinity","NInfinity"]);eU.forEach(function(t,n){let a=t.getReactantsLabel()||"",s=t.getProductsLabel()||"",i="",r="",o="",l="",g="",h=t.transitionStates;if(void 0!=h){if(h instanceof Map)h.forEach(function(e){let t=e.getRef();null!=t&&(i=t+" ")});else{let e=h.getRef();null!=e&&(i=e)}}let m=t.getMCRCMethod();if(void 0!=m){if(m instanceof ec){let e=m.getPreExponential();void 0!=e&&(r=e.value.toString()+" "+e.attributes.get("units"));let t=m.getActivationEnergy();void 0!=t&&(o=t.value.toString()+" "+t.attributes.get("units"));let n=m.getTInfinity();void 0!=n&&(l=n.value.toString());let a=m.getNInfinity();void 0!=a&&(g=a.value.toString())}else if("RRKM"==m.attributes.get("name"));else throw console.log("Unexpected mCRCMethod: "+m),Error("Unexpected mCRCMethod: "+m)}e+=b(T(n)+T(a)+T(s)+T(i)+T(r,!0)+T(o,!0)+T(l,!0)+T(g,!0)),null!==(d=document.getElementById("reactions_table"))&&(d.innerHTML=e)})}(),function(){if(eU.size>1){null!=(h=document.getElementById("reactions_diagram_title"))&&(h.innerHTML="Diagram");let e=document.getElementById("reactions_diagram");null!=e&&(e.style.display="block",function(e,t,n,a,s,i,r){var o;let l,g,d,h;console.log("drawReactionDiagram");let m="black",c=e.getContext("2d"),u=(c.font=s,(o=c.measureText("Aj")).actualBoundingBoxAscent+o.actualBoundingBoxDescent),N=new Set,f=new Set,p=new Set,E=new Set,x=new Map,w=new Map,v=0,T=Number.MAX_VALUE,b=Number.MIN_VALUE;n.forEach(function(e,t){let n=e.transitionStates,a=e.getReactantsLabel();if(void 0!=a){N.add(a),f.has(a)&&p.add(a);let t=e.getReactantsEnergy();T=Math.min(T,t),b=Math.max(b,t),w.set(a,t),!x.has(a)&&(x.set(a,v),v++)}let s=e.getProductsLabel();if(void 0!=s){f.add(s);let t=e.getProductsEnergy();if(T=Math.min(T,t),b=Math.max(b,t),w.set(s,t),x.has(s)){v--;let e=y(x,s);if(x.forEach(function(t,n){t>e&&x.set(n,t-1)}),void 0!=n){if(n instanceof Map)n.forEach(function(e,n){let a=e.getRef();E.add(a),x.set(a,v),t=e.getMolecule().getEnergy(),T=Math.min(T,t),b=Math.max(b,t),w.set(a,t),v++});else{let e=n.getRef();E.add(e),x.set(e,v),t=n.getMolecule().getEnergy(),T=Math.min(T,t),b=Math.max(b,t),w.set(e,t),v++}x.set(s,v),v++}}else{if(void 0!=n){if(n instanceof Map)n.forEach(function(e,n){let a=e.getRef();E.add(a),x.set(a,v),t=e.getMolecule().getEnergy(),T=Math.min(T,t),b=Math.max(b,t),w.set(a,t),v++});else{let e=n.getRef();E.add(e),x.set(e,v),t=n.getMolecule().getEnergy(),T=Math.min(T,t),b=Math.max(b,t),w.set(e,t),v++}}x.set(s,v),v++}}});let M=b-T,S=[];x.forEach(function(e,t){S[e]=t});let B=0,P=0,R=new Map,z=new Map,L=new Map,C=new Map,I=new Map,D=new Map;S.forEach(function(t){let n=y(w,t),a=(n-T)*e.height/(M+0)+0;h=Math.max(ex(c,n.toString(),s),ex(c,t,s)),g=B+h+5,d=l=a+4,R.set(t,[B,l]),z.set(t,[g,d]),f.has(t)&&(L.set(t,[B,l]),C.set(t,[g,d])),E.has(t)&&(I.set(t,[B,l]),D.set(t,[g,d])),B=g+10,P=g}),e.width=P;let A=e.height+4*u+8,G=e.height;e.height=A,c.transform(1,0,0,-1,0,A),n.forEach(function(e,t){let n=e.transitionStates,a=e.getReactantsLabel(),s=e.getProductsLabel(),i=y(z,a),o=y(L,s);if(void 0!=n){if(n instanceof Map)n.forEach(function(e,t){let n=e.getRef(),a=y(I,n);ep(c,m,2,i[0],i[1],a[0],a[1]);let s=y(D,n);ep(c,m,2,s[0],s[1],o[0],o[1])});else{let e=n.getRef(),t=y(I,e);ep(c,m,2,i[0],i[1],t[0],t[1]);let a=y(D,e);ep(c,m,r,a[0],a[1],o[0],o[1])}}else ep(c,m,r,i[0],i[1],o[0],o[1])}),N.forEach(function(e){let t=y(w,e),n=(t-T)*G/(M+0)+0,a=y(R,e)[0],r=n+4;ef(c,"blue",i,a,r,y(z,e)[0],r,s,u,e,t.toString())}),f.forEach(function(e){let t=y(w,e),n=(t-T)*G/(M+0)+0,a=y(L,e)[0],r=n+i,o=y(C,e)[0],l=t.toString();p.has(e)?ef(c,"orange",i,a,r,o,r,s,u,e,l):ef(c,"green",i,a,r,o,r,s,u,e,l)}),E.forEach(function(e){let t=y(w,e),n=(t-T)*G/(M+0)+0,a=y(I,e)[0],r=n+i;ef(c,"red",i,a,r,y(D,e)[0],r,s,u,e,t.toString())})}(e,0,eU,0,"14px Arial",4,2))}}(),function(e){console.log(eb.tagName);let t=O(e,eb.tagName);null!=(m=document.getElementById("conditions_title"))&&(m.innerHTML="Conditions");let n=S(t,ey.tagName),a=new ey(F(n),P(B(n)),e$),s=O(t,"me:PTs"),i=s.getElementsByTagName(ev.tagName),r=[];for(let e=0;e<i.length;e++){let t,n,a=i[e].getElementsByTagName(ey.tagName);a.length>0&&(a.length>1&&console.warn("xml_bathGass.length="+a.length),console.log("pTBathGas"+(t=new ey(F(a[0]),P(B(a[0])),e$)).toString()));let s=i[e].getElementsByTagName(ew.tagName);s.length>0&&(s.length>1&&console.warn("xml_experimentRates.length="+s.length),console.log("experimentRate"+(n=new ew(F(s[0]),parseFloat(P(B(s[0]))))).toString())),r.push(new ev(F(i[e]),t,n))}p=new eb(F(t),a,new eT(F(s),r))}(a),null!=(s=document.getElementById("bathGas"))&&(s.innerHTML="Bath Gas "+p.getBathGas().value),i=document.getElementById("PT_table"),u=["P","T"],(N=p.getPTs().pTpairs.some(e=>void 0!=e.getBathGas()))&&u.push("BathGas"),(f=p.getPTs().pTpairs.some(e=>void 0!=e.getExperimentRate()))&&u.push("ExperimentRate"),M=v(u),null!=i&&(p.getPTs().pTpairs.forEach(function(e){M+=b(T(e.getP().toString())+T(e.getT().toString())),N&&(M+=T(e.getBathGas()?.toString()??"")),f&&(M+=T(e.getExperimentRate()?.toString()??""))}),i.innerHTML=M),console.log(eB.tagName),R=O(a,eB.tagName),null!=(c=document.getElementById("modelParameters_title"))&&(c.innerHTML="Model Parameters"),L=O(R,eM.tagName),C=new eM(F(L),parseFloat(P(B(L)))),I=O(R,eS.tagName),E=new eB(C,new eS(F(I),parseFloat(P(B(I))))),D=document.getElementById("modelParameters_table"),G=v(["Parameter","Value"])+(b(T("Grain Size")+T(E.getGrainSize().value.toString()))+b(T("Energy Above The Top Hill")+T(E.getEnergyAboveTheTopHill().value.toString()))),null!=D&&(D.innerHTML=G),function(e){let t,n,a,s,i,r,o,l,g,d,h,m,c,u;console.log(eX.tagName);let N=O(e,eX.tagName),f=document.getElementById("control_title");null!=f&&(f.innerHTML="Control");let p=N.getElementsByTagName(eP.tagName);1==p.length?t=new eP:p.length>1&&console.warn("testDOS.length="+p.length);let E=N.getElementsByTagName(eR.tagName);1==E.length?n=new eR:E.length>1&&console.warn("printSpeciesProfile.length="+E.length);let y=N.getElementsByTagName(ez.tagName);1==y.length?a=new ez:y.length>1&&console.warn("testMicroRates.length="+y.length);let w=N.getElementsByTagName(eL.tagName);1==w.length?s=new eL:w.length>1&&console.warn("testRateConstant.length="+w.length);let v=N.getElementsByTagName(eC.tagName);1==v.length?i=new eC:v.length>1&&console.warn("printGrainDOS.length="+v.length);let T=N.getElementsByTagName(eI.tagName);1==T.length?r=new eI:T.length>1&&console.warn("printCellDOS.length="+T.length);let b=N.getElementsByTagName(eD.tagName);1==b.length?o=new eD:b.length>1&&console.warn("printReactionOperatorColumnSums.length="+b.length);let M=N.getElementsByTagName(eA.tagName);1==M.length?l=new eA:M.length>1&&console.warn("printTunnellingCoefficients.length="+M.length);let S=N.getElementsByTagName(eG.tagName);1==S.length?g=new eG:S.length>1&&console.warn("printGrainkfE.length="+S.length);let R=N.getElementsByTagName(eF.tagName);1==R.length?d=new eF:R.length>1&&console.warn("printGrainBoltzmann.length="+R.length);let z=N.getElementsByTagName(eO.tagName);1==z.length?h=new eO:z.length>1&&console.warn("printGrainkbE.length="+z.length);let L=N.getElementsByTagName(eH.tagName);1==L.length?m=new eH(F(L[0]),parseFloat(P(B(L[0])))):console.warn("eigenvalues.length="+L.length);let C=N.getElementsByTagName(e_.tagName);1==C.length?c=new e_:console.warn("hideInactive.length="+C.length);let I=N.getElementsByTagName(ek.tagName);if(1==I.length){let e=parseFloat(P(B(I[0])));u=new ek(F(I[0]),e)}else console.warn("diagramEnergyOffset.length="+I.length);x=new eX(F(N),t,n,a,s,i,r,o,l,g,d,h,m,c,u)}(a),V=document.getElementById("control_table"),$=v(["Control","Value"]),void 0!=x.getTestDOS()&&($+=b(T(eP.tagName)+T(""))),void 0!=x.getPrintSpeciesProfile()&&($+=b(T(eR.tagName)+T(""))),void 0!=x.getTestMicroRates()&&($+=b(T(ez.tagName)+T(""))),void 0!=x.getTestRateConstant()&&($+=b(T(eL.tagName)+T(""))),void 0!=x.getPrintGrainDOS()&&($+=b(T(eC.tagName)+T(""))),void 0!=x.getPrintCellDOS()&&($+=b(T(eI.tagName)+T(""))),void 0!=x.getPrintReactionOperatorColumnSums()&&($+=b(T(eD.tagName)+T(""))),void 0!=x.getPrintTunnellingCoefficients()&&($+=b(T(eA.tagName)+T(""))),void 0!=x.getPrintGrainkfE()&&($+=b(T(eG.tagName)+T(""))),void 0!=x.getPrintGrainBoltzmann()&&($+=b(T(eF.tagName)+T(""))),void 0!=x.getPrintGrainkbE()&&($+=b(T(eO.tagName)+T(""))),void 0!=(ea=x.getEigenvalues())&&($+=b(T(eH.tagName)+T(ea.value.toString()))),void 0!=x.getHideInactive()&&($+=b(T(e_.tagName)+T(""))),void 0!=(eE=x.getDiagramEnergyOffset())&&($+=b(T(ek.tagName)+T(eE.value.toString()))),null!=V&&(V.innerHTML=$)}(new DOMParser().parseFromString(M,"text/xml"))}}};let R=s.slice(f,f+1048576);i.readAsText(R),f+=1048576}}},f.click(),null!=(s=document.getElementById("load_button"))&&s.addEventListener("click",M),null!=(i=document.getElementById("saveButton"))&&(i.style.display="inline")}()}}),window.setEnergy=function(e){let t=e.id,n=t.split("_")[0],a=e$.get(n);if(void 0!=a){let s=parseFloat(e.value);isNaN(s)?(alert("Energy input for "+n+" is not a number"),document.getElementById(t).value=a.getEnergy().toString()):(a.setEnergy(s),console.log("Energy of "+n+" set to "+s))}},window.saveXML=function(){console.log("saveXML");let s="  ".repeat(2),i="\n  "+G(e,"me:title"),r="";e$.forEach(function(e,t){r+=e.toXML("  ",s)}),r=G(r,"moleculeList",void 0,"  ",!0);let o="";eU.forEach(function(e,t){o+=e.toXML("  ",s)}),o=G(o,"reactionList",void 0,"  ",!0);let l=p.toXML("  ","  "),g=E.toXML("  ","  "),d=x.toXML("  ","  "),h=new Blob([eq,t,i,r,o,l,g,d,n],{type:"text/plain"}),m=URL.createObjectURL(h),c=document.createElement("a");c.href=m,c.download=a,document.body.appendChild(c),c.click(),document.body.removeChild(c)};
//# sourceMappingURL=index.ae4d1628.js.map
