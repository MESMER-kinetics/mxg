let e;function t(e,t){if(!e.has(t))throw Error(`Key ${t} not found in map`);return e.get(t)}function n(e,t){return void 0==t&&(t=", "),e.map(e=>null==e?"null":e.toString()).join(t)}function a(e){let t=[];for(let n=0;n<e.length;n++)i(e[n])&&t.push(parseFloat(e[n]));return t}function i(e){return""!==e&&!isNaN(Number(e))}function s(e){let t=document.getElementById(e);null!=t&&t.parentNode?.removeChild(t)}function o({content:e,buttonLabel:t,buttonFontSize:n="",boundary:a={marginLeft:"",marginTop:"",marginBottom:"",marginRight:""},level:i={marginLeft:"",marginTop:"",marginBottom:"",marginRight:""},contentDivId:s="",contentDivClassName:o=""}){let l=p(a);l.id=s,l.className=o;let d=document.createElement("button");return d.id=s+"Button",d.className="collapsible",d.innerText=`${t} \u{25BC}`,d.addEventListener("click",function(){d.innerText=d.innerText.includes("â–¼")?`${t} \u{25B2}`:`${t} \u{25BC}`}),d.style.fontSize=n,Object.assign(d.style,i),l.appendChild(d),l.appendChild(e),l}function l(){this.classList.toggle("active");let e=this.nextElementSibling;"block"===e.style.display?e.style.display="none":e.style.display="block"}function d(e,t,n,a,i,s,o,l,d){let g;let m=((g=r(e,t,n)).onchange=i,g.value=s,void 0!=l&&(g.style.fontSize=l),h(g),g);Object.assign(m.style,n);let c=f(o,n,d);c.htmlFor=t,Object.assign(c.style,n);let u=N(a);return u.appendChild(c),u.appendChild(m),u}function r(e,t,n){let a=document.createElement("input");return a.type=e,a.id=t,Object.assign(a.style,n),a}function g(e,t){let n="<"+t;if(e)for(let[t,a]of e)n+=" "+t+'="'+a+'"';return n+" />"}function h(e,t){void 0==t&&(t=4),e.style.width=e.value.length+t+"ch"}function m(e,t){void 0==t&&(t=6),e.style.width=e.value.length+t+"ch"}function c(e,t,n,a){let i=document.createElement("select");return e.forEach(e=>{i.name=t,i.id=n;let a=document.createElement("option");a.value=e,a.text=e,i.appendChild(a)}),Object.assign(i.style,a),i}function u(e,t){let n=document.createElement("button");return n.textContent=e,Object.assign(n.style,t),n}function p(e){let t=document.createElement("div");return Object.assign(t.style,e),t}function N(e){let t=p(e);return t.style.display="flex",t}function f(e,t,n){let a=document.createElement("label");return Object.assign(a.style,t),a.textContent=e,void 0!=n&&(a.style.fontSize=n),a}function x(e,t){let n=e.getElementsByTagName(t)[0];if(null==n)throw Error(t+" element not found");return n}function v(e){let t=e.childNodes;if(null==t)throw Error("Element has no childNodes");return t[0]}function E(e){let t=e.nodeValue;if(null==t)throw Error("nodeValue is null");return t}function C(e){let t=v(e);return t?E(t).trim():""}class b{constructor(e){this.tagName=e}toXML(e){let t=g(void 0,this.tagName);return e?"\n"+e+t:t}}class T extends b{constructor(e,t){super(t),this.attributes=e}toString(){let e=this.tagName+"(";return this.attributes&&this.attributes.forEach((t,n)=>{e+=`${n}(${t}), `}),e}toXML(e){let t="";for(let[n,a]of(void 0!=e&&(t+="\n"+e),t+="<"+this.tagName,this.attributes))t+=" "+n+'="'+a.toString()+'"';return t+" />"}}class S extends T{constructor(e,t,n){super(e,t),this.value=n}toString(){return super.toString()+`, ${this.value.toString()})`}toXML(e){return M(this.value.trim(),this.tagName,this.attributes,e,!1)}}class y extends T{constructor(e,t,n){super(e,t),this.value=n}toString(){return super.toString()+`, ${this.value.toString()})`}toXML(e){return M(this.value.toString().trim(),this.tagName,this.attributes,e,!1)}}class w extends T{constructor(e,t,n,a){super(e,t),this.delimiter=",",this.values=n,void 0!=a&&(this.delimiter=a)}toString(){return super.toString()+`, ${this.values.toString()})`}setDelimiter(e){this.delimiter=e}toXML(e){return M(this.values.toString().replaceAll(",",this.delimiter),this.tagName,this.attributes,e,!1)}}class _ extends T{constructor(e,t){super(e,t),this.nodes=new Map}addNode(e){return this.nodes.set(this.nodes.size,e),this.nodes.size-1}toString(){let e=super.toString();return this.nodes.forEach((t,n)=>{e+=`, ${t.toString()}`}),e+")"}toXML(e,t){let n;void 0!=e&&void 0!=t&&(n=t+e);let a="";if(this.nodes.size>0)return this.nodes.forEach(t=>{t instanceof _?a+=t.toXML(e,n):a+=t.toXML(n)}),M(a,this.tagName,this.attributes,t,!0);{let e=g(this.attributes,this.tagName);return void 0!=t?"\n"+t+e:e}}}function M(e,t,n,a,i){let s;return function(e,t,n){let a="";if(void 0!=n&&(a+="\n"+n),a+="<"+e,t)for(let[e,n]of t)a+=" "+e+'="'+n.toString()+'"';return a+">"}(t,n,a)+e+(s="",i&&void 0!=a&&(s+="\n"+a),s+"</"+t+">")}function P(e){let t=e.getAttributeNames(),n=new Map;return t.forEach(function(t){let a=e.getAttribute(t);null!=a&&n.set(t,a)}),n}function L(e,t){let n=e.getElementsByTagName(t);if(1!=n.length)throw Error("Expecting 1 "+t+" but finding "+n.length);return n[0]}class z extends T{static{this.tagName="atom"}constructor(e){super(e,z.tagName);let t=e.get("elementType");if(void 0==t)throw Error("elementType is undefined");this.elementType=t;let n=e.get("id");void 0==n&&(n=this.elementType),this.id=n}}class R extends _{static{this.tagName="atomArray"}constructor(e,t){super(e,R.tagName),t.forEach(e=>{this.nodes.set(this.nodes.size,e)})}}class I extends T{static{this.tagName="bond"}static{this.s_atomRefs2="atomRefs2"}static{this.s_id="id"}static{this.s_order="order"}constructor(e){super(e,I.tagName);let t=e.get(I.s_atomRefs2);if(void 0==t)throw Error(I.s_atomRefs2+" is undefined!");this.atomRefs2=t}setAtomRefs2(e){this.atomRefs2=e,this.attributes.set(I.s_atomRefs2,e)}getId(){return this.attributes.get(I.s_id)}setId(e){this.attributes.set(I.s_id,e)}getOrder(){let e=this.attributes.get(I.s_order);if(void 0!=e)return parseFloat(e)}setOrder(e){this.attributes.set(I.s_order,e.toString())}}class B extends _{static{this.tagName="bondArray"}constructor(e,t){super(e,B.tagName),this.bonds=t,t.forEach(e=>{this.nodes.set(this.nodes.size,e)})}getBond(e){return this.bonds[e]}getBonds(){return this.bonds}setBond(e,t){this.bonds[e]=t,this.nodes.set(e,t)}addBond(e){this.bonds.push(e),this.nodes.set(this.nodes.size,e)}removeBond(e){this.bonds.splice(e,1),this.nodes.delete(e)}getBondIds(){let e=new Set;return this.bonds.forEach(t=>{e.add(t.getId())}),e}}class k extends y{static{this.tagName="scalar"}static{this.s_units="units"}constructor(e,t){super(e,k.tagName,t)}updateUnits(e){if(e){let t=this.attributes.get(k.s_units);void 0!=t&&t!=e&&this.attributes.set(k.s_units,e)}}}class F extends w{static{this.tagName="array"}static{this.s_units="units"}constructor(e,t,n){super(e,F.tagName,t,n)}updateUnits(e){if(e){let t=this.attributes.get(F.s_units);void 0!=t&&t!=e&&(this.attributes.set(F.s_units,e),console.log("Units changed from "+t+" to "+e))}}}class D extends _{static{this.tagName="property"}static{this.s_dictRef="dictRef"}constructor(e,t){super(e,D.tagName);let n=e.get(D.s_dictRef);if(void 0==n)throw Error(D.s_dictRef+" is undefined!");this.dictRef=n,t&&this.nodes.set(0,t)}getProperty(){return this.nodes.get(0)}setProperty(e){this.nodes.set(0,e)}}class H extends D{static{this.dictRef="me:ZPE"}constructor(e,t){super(e,t)}setUnits(e){this.getProperty().updateUnits(e)}}class O extends D{static{this.dictRef="me:frequenciesScaleFactor"}constructor(e,t){super(e,t)}}class G extends D{static{this.dictRef="me:vibFreqs"}constructor(e,t){super(e,t)}}class A extends D{static{this.dictRef="me:rotConsts"}constructor(e,t){super(e,t)}}class q extends D{static{this.dictRef="me:MW"}constructor(e,t){super(e,t)}}class U extends D{static{this.dictRef="me:imFreqs"}constructor(e,t){super(e,t)}}class j extends _{static{this.tagName="propertyList"}constructor(e,t){super(e,j.tagName),this.index=new Map,void 0!=t&&t.forEach(e=>{this.nodes.set(this.nodes.size,e),this.index.set(e.dictRef,this.nodes.size-1)})}getProperty(e){let t=this.index.get(e);if(void 0!=t)return this.nodes.get(t);throw Error("Property "+e+" does not exist")}setProperty(e){let t=this.index.get(e.dictRef);void 0==t?(this.nodes.set(this.nodes.size,e),this.index.set(e.dictRef,this.nodes.size-1)):(console.log("Property "+e.dictRef+" already exists, updating..."),this.nodes.set(t,e))}}class $ extends y{static{this.tagName="me:deltaEDown"}static{this.s_bathGas="bathGas"}static{this.s_units="units"}static{this.s_lower="lower"}static{this.s_upper="upper"}static{this.s_stepsize="stepsize"}constructor(e,t){super(e,$.tagName,t)}getBathGas(){return this.attributes.get($.s_bathGas)}setBathGas(e){this.attributes.set($.s_bathGas,e)}getUnits(){return this.attributes.get($.s_units)}setUnits(e){this.attributes.set($.s_units,e)}getLower(){return parseFloat(t(this.attributes,$.s_lower))}setLower(e){this.attributes.set($.s_lower,e.toString())}getUpper(){return parseFloat(t(this.attributes,$.s_upper))}setUpper(e){this.attributes.set($.s_upper,e.toString())}getStepsize(){return parseFloat(t(this.attributes,$.s_stepsize))}setStepsize(e){this.attributes.set($.s_stepsize,e.toString())}setValue(e){this.value=e}}class X extends _{static{this.tagName="me:energyTransferModel"}constructor(e,t){super(e,X.tagName),void 0!=t&&t.forEach(e=>{this.nodes.set(this.nodes.size,e)})}getDeltaEDowns(){let e=[];return this.nodes.forEach(t=>{t instanceof $&&e.push(t)}),e}setDeltaEDowns(e){this.nodes.clear(),e.forEach(e=>{this.nodes.set(this.nodes.size,e)})}getDeltaEDown(e){if(e<0||e>=this.nodes.size)throw Error("index out of range");return this.nodes.get(e)}setDeltaEDown(e,t){this.nodes.set(e,t)}addDeltaEDown(e){return this.nodes.set(this.nodes.size,e),this.nodes.size-1}}class V extends T{static{this.tagName="me:DOSCMethod"}static{this.s_xsi_type="xsi:type"}constructor(e){if(super(e,V.tagName),void 0==e.get(V.s_xsi_type)){let t=e.get("name");if(void 0==t)throw Error("Neither xsi:type or name are defined.");e.set(V.s_xsi_type,t)}}getXsiType(){return this.attributes.get(V.s_xsi_type)}setXsiType(e){this.attributes.set(V.s_xsi_type,e)}}class W extends S{static{this.tagName="me:bondRef"}constructor(e,t){super(e,W.tagName,t)}}class Y extends T{static{this.tagName="me:PotentialPoint"}static{this.s_angle="angle"}static{this.s_potential="potential"}constructor(e){super(e,Y.tagName);let t=e.get(Y.s_angle);if(void 0==t)throw Error(Y.s_potential+" is undefined!");this.angle=parseFloat(t);let n=e.get(Y.s_potential);if(void 0==n)throw Error(Y.s_potential+" is undefined!");this.potential=parseFloat(n)}getAngle(){return this.angle}setAngle(e){this.angle=e,this.attributes.set(Y.s_angle,e.toString())}getPotential(){return this.potential}setPotential(e){this.potential=e,this.attributes.set(Y.s_potential,e.toString())}}class J extends _{static{this.tagName="me:HinderedRotorPotential"}static{this.formats=["numerical","analytical"]}static{this.units=["kJ/mol","cm-1","Hartree"]}static{this.s_format="format"}static{this.s_units="units"}static{this.s_expansionSize="expansionSize"}static{this.s_useSineTerms="useSineTerms"}constructor(e,t){super(e,J.tagName);let n=e.get(J.s_format);if(void 0==n)throw Error(J.s_format+" is undefined!");this.format=n;let a=e.get(J.s_units);if(void 0==a)throw Error(J.s_units+" is undefined!");this.units=a,void 0!=t&&t.forEach(e=>{this.nodes.set(this.nodes.size,e)});let i=e.get(J.s_expansionSize);if(void 0==i)throw Error(J.s_expansionSize+" is undefined!");this.expansionSize=parseFloat(i);let s=e.get(J.s_useSineTerms);if(void 0==s)throw Error(J.s_useSineTerms+" is undefined!");this.useSineTerms="yes"==s}getFormat(){return this.format}setFormat(e){this.format=e,this.attributes.set(J.s_format,e)}getUnits(){return this.units}setUnits(e){this.units=e,this.attributes.set(J.s_units,e)}getExpansionSize(){return this.expansionSize}setExpansionSize(e){this.expansionSize=e,this.attributes.set(J.s_expansionSize,e.toString())}getUseSineTerms(){return this.useSineTerms}setUseSineTerms(e){this.useSineTerms=e,this.attributes.set(J.s_useSineTerms,e?"yes":"no")}getPotentialPoint(e){return this.nodes.get(e)}setPotentialPoint(e,t){this.nodes.set(e,t)}setPotentialPoints(e){this.nodes.clear(),e.forEach(e=>{this.nodes.set(this.nodes.size,e)})}addPotentialPoint(e){return this.nodes.set(this.nodes.size,e),this.nodes.size-1}removePotentialPoint(e){this.nodes.delete(e)}}class K extends y{static{this.tagName="me:periodicity"}constructor(e,t){super(e,K.tagName,t)}}class Q extends _{static{this.tagName="me:ExtraDOSCMethod"}constructor(e,t,n,a){super(e,Q.tagName),this.index=new Map,t&&(this.nodes.set(this.nodes.size,t),this.index.set(W.tagName,this.nodes.size-1)),n&&(this.nodes.set(this.nodes.size,n),this.index.set(J.tagName,this.nodes.size-1)),a&&(this.nodes.set(this.nodes.size,a),this.index.set(K.tagName,this.nodes.size-1))}getBondRef(){let e=this.index.get(W.tagName);if(void 0!=e)return this.nodes.get(e)}setBondRef(e){let t=this.index.get(W.tagName);void 0!=t?this.nodes.set(t,e):(this.nodes.set(this.nodes.size,e),this.index.set(W.tagName,this.nodes.size-1))}getHinderedRotorPotential(){let e=this.index.get(J.tagName);if(void 0!=e)return this.nodes.get(e)}setHinderedRotorPotential(e){let t=this.index.get(J.tagName);void 0!=t?this.nodes.set(t,e):(this.nodes.set(this.nodes.size,e),this.index.set(J.tagName,this.nodes.size-1))}getPeriodicity(){let e=this.index.get(K.tagName);if(void 0!=e)return this.nodes.get(e)}setPeriodicity(e){let t=this.index.get(K.tagName);void 0!=t?this.nodes.set(t,e):(this.nodes.set(this.nodes.size,e),this.index.set(K.tagName,this.nodes.size-1))}}class Z extends y{static{this.tagName="me:reservoirSize"}constructor(e,t){super(e,Z.tagName,t)}}class ee extends _{static{this.tagName="molecule"}static{this.s_id="id"}static{this.s_description="description"}static{this.s_active="active"}constructor(e,t,n,a,i,s,o,l){super(e,ee.tagName),this.index=new Map;let d=e.get(ee.s_id);if(void 0==d)throw Error(ee.s_id+" is undefined");this.id=d;let r=0;t&&(this.nodes.set(r,t),t instanceof z?this.index.set(z.tagName,r):this.index.set(R.tagName,r),r++),n&&(this.nodes.set(r,n),this.index.set(B.tagName,r),r++),a&&(this.nodes.set(r,a),this.index.set(j.tagName,r),r++),i&&(this.nodes.set(r,i),this.index.set(X.tagName,r),r++),s&&(this.nodes.set(r,s),this.index.set(V.tagName,r)),o&&(this.nodes.set(r,o),this.index.set(Q.tagName,r)),l&&(this.nodes.set(r,l),this.index.set(Z.tagName,r))}getDescription(){return this.attributes.get(ee.s_description)}setDescription(e){this.attributes.set(ee.s_description,e)}getActive(){let e=this.attributes.get(ee.s_active);if(void 0!=e)return"true"==e}setActive(e){this.attributes.set(ee.s_active,e.toString())}getLabel(){let e=this.id,t=this.getDescription();return void 0!=t&&(e+=" ("+t+")"),this.getActive()&&(e+=" ("+ee.s_active+")"),e}getAttributesAsString(){return Array.from(this.attributes,([e,t])=>`${e}="${t}"`).join(", ")}getProperties(){let e=this.index.get(j.tagName);if(void 0!=e||void 0!=(e=this.index.get(D.tagName)))return this.nodes.get(e)}setProperties(e){let t=this.index.get(j.tagName);void 0==t?(this.index.set(j.tagName,this.nodes.size),this.addNode(e)):this.nodes.set(t,e)}getProperty(e){let t=this.getProperties();if(void 0!=t)return t instanceof j?t.getProperty(e):t}setProperty(e){let t=this.getProperties();void 0!=t?t instanceof j?t.setProperty(e):this.setProperties(t):this.setProperties(e)}getAtoms(){let e=this.index.get(z.tagName);if(void 0!=e||void 0!=(e=this.index.get(R.tagName)))return this.nodes.get(e)}getBonds(){let e=this.index.get(B.tagName);if(void 0!=e)return this.nodes.get(e)}getEnergyTransferModel(){let e=this.index.get(X.tagName);if(void 0!=e)return this.nodes.get(e)}setEnergyTransferModel(e){let t=this.index.get(X.tagName);void 0==t?(this.index.set(X.tagName,this.nodes.size),this.addNode(e)):this.nodes.set(t,e)}getDOSCMethod(){let e=this.index.get(V.tagName);if(void 0!=e)return this.nodes.get(e)}setDOSCMethod(e){let t=this.index.get(V.tagName);void 0==t?(this.index.set(V.tagName,this.nodes.size),this.addNode(e)):this.nodes.set(t,e)}getExtraDOSCMethod(){let e=this.index.get(Q.tagName);if(void 0!=e)return this.nodes.get(e)}setExtraDOSCMethod(e){let t=this.index.get(Q.tagName);void 0==t?(this.index.set(Q.tagName,this.nodes.size),this.addNode(e)):this.nodes.set(t,e)}getReservoirSize(){let e=this.index.get(Z.tagName);if(void 0!=e)return this.nodes.get(e)}setReservoirSize(e){let t=this.index.get(Z.tagName);void 0==t?(this.index.set(Z.tagName,this.nodes.size),this.addNode(e)):this.nodes.set(t,e)}getEnergy(){let e=this.getProperty(H.dictRef);if(void 0==e)throw console.log(this.toString()),Error(H.dictRef+" property not found!");return e.getProperty().value}}class et extends T{static{this.tagName="molecule"}constructor(e){super(e,et.tagName),this.ref=e.get("ref"),this.role=e.get("role")}setRole(e){this.role=e}}class en extends _{static{this.tagName="reactant"}constructor(e,t){super(e,en.tagName),this.addNode(t)}getMolecule(){return this.nodes.get(0)}}class ea extends _{static{this.tagName="product"}constructor(e,t){super(e,ea.tagName),this.addNode(t)}getMolecule(){return this.nodes.get(0)}}class ei extends _{static{this.tagName="me:transitionState"}constructor(e,t){super(e,ei.tagName),this.addNode(t)}getMolecule(){return this.nodes.get(0)}}class es extends y{static{this.tagName="me:preExponential"}constructor(e,t){super(e,es.tagName,t)}}class eo extends y{static{this.tagName="me:activationEnergy"}constructor(e,t){super(e,eo.tagName,t)}}class el extends y{static{this.tagName="me:TInfinity"}constructor(e,t){super(e,el.tagName,t)}}class ed extends y{static{this.tagName="me:nInfinity"}constructor(e,t){super(e,ed.tagName,t)}}class er extends _{static{this.tagName="me:MCRCMethod"}constructor(e){super(e,er.tagName)}}class eg extends er{static{this.xsiType="me:MesmerILT"}static{this.xsiType2="MesmerILT"}constructor(e,t,n,a,i){super(e),this.index=new Map,void 0!=t&&(this.index.set(es.tagName,this.index.size),this.addNode(t)),void 0!=n&&(this.index.set(eo.tagName,this.index.size),this.addNode(n)),void 0!=a&&(this.index.set(el.tagName,this.index.size),this.addNode(a)),void 0!=i&&(this.index.set(ed.tagName,this.index.size),this.addNode(i))}getPreExponential(){let e=this.index.get(es.tagName);if(void 0!=e)return this.nodes.get(e)}setPreExponential(e){let t=this.index.get(es.tagName);void 0==t?(this.index.set(es.tagName,this.nodes.size),this.addNode(e)):this.nodes.set(t,e)}getActivationEnergy(){let e=this.index.get(eo.tagName);if(void 0!=e)return this.nodes.get(e)}setActivationEnergy(e){let t=this.index.get(eo.tagName);void 0==t?(this.index.set(eo.tagName,this.nodes.size),this.addNode(e)):this.nodes.set(t,e)}getTInfinity(){let e=this.index.get(el.tagName);if(void 0!=e)return this.nodes.get(e)}setTInfinity(e){let t=this.index.get(el.tagName);void 0==t?(this.index.set(el.tagName,this.nodes.size),this.addNode(e)):this.nodes.set(t,e)}getNInfinity(){let e=this.index.get(ed.tagName);if(void 0!=e)return this.nodes.get(e)}setNInfinity(e){let t=this.index.get(ed.tagName);void 0==t?(this.index.set(ed.tagName,this.nodes.size),this.addNode(e)):this.nodes.set(t,e)}}class eh extends T{static{this.tagName="me:tunneling"}static{this.s_name="name"}constructor(e){super(e,eh.tagName)}getName(){return this.attributes.get(eh.s_name)}setName(e){this.attributes.set(eh.s_name,e)}}class em extends y{static{this.tagName="me:excessReactantConc"}constructor(e,t){super(e,em.tagName,t)}}class ec extends _{static{this.tagName="reaction"}static{this.s_id="id"}constructor(e,t,n,a,i,s,o){super(e,ec.tagName),this.index=new Map,this.reactantsIndex=new Map,this.productsIndex=new Map,this.transitionStatesIndex=new Map;let l=e.get(ec.s_id);if(void 0==l)throw Error(ec.s_id+" is undefined!");this.id=l,void 0!=t&&(t.forEach(e=>{this.reactantsIndex.set(e.getMolecule().ref,this.nodes.size),this.addNode(e)}),this.index.set(en.tagName,this.reactantsIndex)),void 0!=n&&(n.forEach(e=>{this.productsIndex.set(e.getMolecule().ref,this.nodes.size),this.addNode(e)}),this.index.set(ea.tagName,this.productsIndex)),void 0!=a&&(this.index.set(eh.tagName,this.nodes.size),this.addNode(a)),void 0!=i&&(i.forEach(e=>{this.transitionStatesIndex.set(e.getMolecule().ref,this.nodes.size),this.addNode(e)}),this.index.set(ei.tagName,this.transitionStatesIndex)),void 0!=s&&(this.index.set(er.tagName,this.nodes.size),this.addNode(s)),void 0!=o&&(this.index.set(em.tagName,this.nodes.size),this.addNode(o))}addToIndex(e,t){let n=this.index.get(e);if(void 0==n)this.index.set(e,this.nodes.size);else if(n instanceof Map)n.set(t.tagName,this.nodes.size);else{let a=new Map;a.set(this.nodes.get(n).ref,n),a.set(t.tagName,this.nodes.size),this.index.set(e,a)}}getReactants(){let e=this.index.get(en.tagName);return void 0==e?[]:e instanceof Map?Array.from(e.values()).map(e=>this.nodes.get(e)):[this.nodes.get(e)]}setReactants(e){e.forEach(e=>{this.reactantsIndex.set(e.getMolecule().ref,this.nodes.size),this.addNode(e)}),this.index.set(en.tagName,this.reactantsIndex)}getReactant(e){let t=this.reactantsIndex.get(e);if(void 0==t)throw Error(`Reactant with ref ${e} not found`);return this.nodes.get(t)}addReactant(e){this.reactantsIndex.set(e.getMolecule().ref,this.nodes.size),this.addNode(e)}removeReactant(e){let t=this.reactantsIndex.get(e);if(void 0==t)throw Error(`Reactant with ref ${e} not found`);this.nodes.delete(t),this.reactantsIndex.delete(e)}getProducts(){let e=this.index.get(ea.tagName);return void 0==e?[]:e instanceof Map?Array.from(e.values()).map(e=>this.nodes.get(e)):[this.nodes.get(e)]}setProducts(e){e.forEach(e=>{this.productsIndex.set(e.getMolecule().ref,this.nodes.size),this.addNode(e)}),this.index.set(ea.tagName,this.productsIndex)}getProduct(e){let t=this.productsIndex.get(e);if(void 0==t)throw Error(`Product with ref ${e} not found`);return this.nodes.get(t)}addProduct(e){this.productsIndex.set(e.getMolecule().ref,this.nodes.size),this.addNode(e)}removeProduct(e){let t=this.productsIndex.get(e);if(void 0==t)throw Error(`Product with ref ${e} not found`);this.nodes.delete(t),this.productsIndex.delete(e)}getTunneling(){let e=this.index.get(eh.tagName);if(void 0!=e)return this.nodes.get(e)}setTunneling(e){let t=this.index.get(eh.tagName);if(void 0==t)this.index.set(eh.tagName,this.nodes.size),this.addNode(e);else{if(t instanceof Map)throw Error("Tunneling is a map and it is assumed there would be only 1!");this.nodes.set(t,e)}}getTransitionStates(){let e=this.index.get(ei.tagName);return void 0==e?[]:e instanceof Map?Array.from(e.values()).map(e=>this.nodes.get(e)):[this.nodes.get(e)]}setTransitionStates(e){e.forEach(e=>{this.transitionStatesIndex.set(e.getMolecule().ref,this.nodes.size),this.addNode(e)}),this.index.set(ei.tagName,this.transitionStatesIndex)}getTransitionState(e){let t=this.transitionStatesIndex.get(e);if(void 0==t)throw Error(`Transition state with ref ${e} not found`);return this.nodes.get(t)}addTransitionState(e){this.transitionStatesIndex.set(e.getMolecule().ref,this.nodes.size),this.addNode(e)}removeTransitionState(e){let t=this.transitionStatesIndex.get(e);if(void 0==t)throw Error(`Transition State with ref ${e} not found`);this.nodes.delete(t),this.transitionStatesIndex.delete(e)}getMCRCMethod(){let e=this.index.get(er.tagName);if(void 0!=e)return this.nodes.get(e)}setMCRCMethod(e){let t=this.index.get(er.tagName);if(void 0==t)this.index.set(er.tagName,this.nodes.size),this.addNode(e);else{if(t instanceof Map)throw Error("MCRCMethod is a map and it is assumed there would be only 1!");this.nodes.set(t,e)}}getExcessReactantConc(){let e=this.index.get(em.tagName);if(void 0!=e)return this.nodes.get(e)}setExcessReactantConc(e){let t=this.index.get(em.tagName);if(void 0==t)this.index.set(em.tagName,this.nodes.size),this.addNode(e);else{if(t instanceof Map)throw Error("ExcessReactantConc is a map and it is assumed there would be only 1!");this.nodes.set(t,e)}}getReactantsLabel(){return this.getReactants().map(e=>e.getMolecule().ref).join(" + ")}getProductsLabel(){return this.getProducts().map(e=>e.getMolecule().ref).join(" + ")}getLabel(){return this.getReactantsLabel()+" -> "+this.getProductsLabel()}getReactantsEnergy(e){return Array.from(this.getReactants()).map(t=>{let n=e.get(t.getMolecule().ref);if(void 0==n)throw Error(`Molecule with ref ${t.getMolecule().ref} not found`);return n.getEnergy()}).reduce((e,t)=>e+t,0)}getProductsEnergy(e){return Array.from(this.getProducts()).map(t=>{let n=e.get(t.getMolecule().ref);if(void 0==n)throw Error(`Molecule with ref ${t.getMolecule().ref} not found`);return n.getEnergy()}).reduce((e,t)=>e+t,0)}get(e,t){if(this.index.has(e)){let n=this.index.get(e);if(void 0!=n){if(!(n instanceof Map))return this.nodes.get(n);{let e=n.get(t);if(void 0!=e)return this.nodes.get(e)}}}}}function eu(e,t,n,a,i,s,o,l,d,r,g){let h=a+(s-a)/2;eN(e,g,l,t,h-ef(e,g,l)/2,o+d),eN(e,r,l,t,h-ef(e,r,l)/2,o+3*d),ep(e,t,n,a,i,s,o)}function ep(e,t,n,a,i,s,o){e.beginPath(),e.strokeStyle=t,e.lineWidth=n,e.moveTo(a,i),e.lineTo(s,o),e.stroke()}function eN(e,t,n,a,i,s){e.save(),e.translate(i,s),e.scale(1,-1),e.font=n,e.fillStyle=a,e.fillText(t,0,0),e.restore()}function ef(e,t,n){return e.font=n,e.measureText(t).width}class ex extends S{static{this.tagName="me:bathGas"}constructor(e,t){super(e,ex.tagName,t)}}class ev extends y{static{this.tagName="me:experimentRate"}static{this.s_ref1="ref1"}static{this.s_ref2="ref2"}static{this.s_refReaction="refReaction"}static{this.s_error="error"}constructor(e,t){super(e,ev.tagName,t)}getRef1(){return this.attributes.get(ev.s_ref1)}setRef1(e){this.attributes.set(ev.s_ref1,e)}getRef2(){return this.attributes.get(ev.s_ref2)}setRef2(e){this.attributes.set(ev.s_ref2,e)}getRefReaction(){return this.attributes.get(ev.s_refReaction)}setRefReaction(e){this.attributes.set(ev.s_refReaction,e)}getError(){let e=this.attributes.get(ev.s_error);if(void 0!=e)return parseFloat(e)}setError(e){this.attributes.set(ev.s_error,e.toString())}}class eE extends y{static{this.tagName="me:experimentalYield"}static{this.s_ref="ref"}static{this.s_error="error"}static{this.s_yieldTime="yieldTime"}constructor(e,t){super(e,eE.tagName,t)}getRef(){return this.attributes.get(eE.s_ref)}setRef(e){this.attributes.set(eE.s_ref,e)}getError(){let e=this.attributes.get(eE.s_error);if(void 0!=e)return parseFloat(e)}setError(e){this.attributes.set(eE.s_error,e.toString())}getYieldTime(){let e=this.attributes.get(eE.s_yieldTime);if(e)return parseFloat(e)}setYieldTime(e){this.attributes.set(eE.s_yieldTime,e.toString())}}class eC extends y{static{this.tagName="me:experimentalEigenvalue"}static{this.s_EigenvalueID="EigenvalueID"}static{this.s_error="error"}constructor(e,t){super(e,eC.tagName,t)}getEigenvalueID(){return this.attributes.get(eC.s_EigenvalueID)}setEigenvalueID(e){this.attributes.set(eC.s_EigenvalueID,e)}getError(){let e=this.attributes.get(eC.s_error);if(void 0!=e)return parseFloat(e)}setError(e){this.attributes.set(eC.s_error,e.toString())}}class eb extends y{static{this.tagName="me:excessReactantConc"}static{this.s_percent="percent"}constructor(e,t){super(e,eb.tagName,t)}getPercent(){return this.attributes.get(eb.s_percent)}setPercent(e){this.attributes.set(eb.s_percent,e)}}class eT extends _{static{this.tagName="me:PTpair"}static{this.precisions=["d","dd","qd","double","double-double","quad-double"]}static{this.s_P="P"}static{this.s_T="T"}static{this.s_precision="precision"}static{this.s_excessReactantConc="excessReactantConc"}static{this.s_percentExcessReactantConc="percentExcessReactantConc"}constructor(e,t,n,a,i){super(e,eT.tagName),this.index=new Map,void 0!=t&&(this.index.set(ex.tagName,this.nodes.size),this.addNode(t)),void 0!=n&&(this.index.set(ev.tagName,this.nodes.size),this.addNode(n)),void 0!=a&&(this.index.set(eE.tagName,this.nodes.size),this.addNode(a)),void 0!=i&&(this.index.set(eC.tagName,this.nodes.size),this.addNode(i))}getP(){let e=this.attributes.get(eT.s_P);return void 0!=e?parseFloat(e):NaN}setP(e){this.attributes.set(eT.s_P,e.toString())}getT(){let e=this.attributes.get(eT.s_T);return void 0!=e?parseFloat(e):NaN}setT(e){this.attributes.set(eT.s_T,e.toString())}getPrecision(){return this.attributes.get(eT.s_precision)}setPrecision(e){this.attributes.set(eT.s_precision,e)}getBathGas(){let e=this.index.get(ex.tagName);return void 0!=e?this.nodes.get(e):void 0}setBathGas(e){let t=this.index.get(ex.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(ex.tagName,this.nodes.size),this.addNode(e))}removeBathGas(){let e=this.index.get(ex.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(ex.tagName))}getExperimentRate(){let e=this.index.get(ev.tagName);return void 0!=e?this.nodes.get(e):void 0}setExperimentRate(e){let t=this.index.get(ev.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(ev.tagName,this.nodes.size),this.addNode(e))}removeExperimentRate(){let e=this.index.get(ev.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(ev.tagName))}getExcessReactantConc(){return this.attributes.get(eT.s_excessReactantConc)}setExcessReactantConc(e){this.attributes.set(eT.s_excessReactantConc,e)}getPercentExcessReactantConc(){return this.attributes.get(eT.s_percentExcessReactantConc)}setPercentExcessReactantConc(e){this.attributes.set(eT.s_percentExcessReactantConc,e)}}class eS extends _{static{this.tagName="me:PTs"}constructor(e,t){super(e,eS.tagName),void 0!=t?(t.forEach(e=>{this.addNode(e)}),this.pTpairs=t):this.pTpairs=[]}getPTpair(e){return this.pTpairs[e]}setPTpair(e,t){this.nodes.set(e,t),this.pTpairs[e]=t}addPTpair(e){return this.addNode(e),this.pTpairs.push(e),this.nodes.size-1}setPTpairs(e){this.nodes.clear(),e.forEach(e=>{this.addNode(e),this.pTpairs.push(e)})}removePTpair(e){this.nodes.delete(e),this.pTpairs.splice(e,1)}}class ey extends _{static{this.tagName="me:conditions"}constructor(e,t,n){super(e,ey.tagName),this.index=new Map,this.bathGasesIndex=new Map,this.bathGases=new Set,void 0!=t&&(this.index.set(ex.tagName,this.nodes.size),t.forEach(e=>{this.bathGasesIndex.set(e.value,this.nodes.size),this.addNode(e),this.bathGases.add(e)})),void 0!=n&&(this.index.set(eS.tagName,this.nodes.size),this.addNode(n))}getBathGases(){return this.bathGases}addBathGas(e){this.bathGases.has(e)||(this.bathGases.add(e),this.bathGasesIndex.set(e.value,this.nodes.size),this.addNode(e))}removeBathGas(e){this.bathGases.has(e)?(this.bathGases.delete(e),this.nodes.delete(this.bathGasesIndex.get(e.value))):console.warn("Conditions.removeBathGas: bathGas not found to remove.")}getPTs(){let e=this.index.get(eS.tagName);if(void 0!=e)return this.nodes.get(e)}setPTs(e){let t=this.index.get(eS.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eS.tagName,this.nodes.size),this.addNode(e))}}class ew extends y{static{this.tagName="me:grainSize"}constructor(e,t){super(e,ew.tagName,t)}}class e_ extends y{static{this.tagName="me:automaticallySetMaxEne"}constructor(e,t){super(e,e_.tagName,t)}}class eM extends y{static{this.tagName="me:energyAboveTheTopHill"}constructor(e,t){super(e,eM.tagName,t)}}class eP extends y{static{this.tagName="me:maxTemperature"}constructor(e,t){super(e,eP.tagName,t)}}class eL extends _{static{this.tagName="me:modelParameters"}constructor(e,t,n,a,i){super(e,eL.tagName),this.index=new Map,void 0!=t&&(this.index.set(ew.tagName,this.nodes.size),this.addNode(t)),void 0!=n&&(this.index.set(e_.tagName,this.nodes.size),this.addNode(n)),void 0!=a&&(this.index.set(eM.tagName,this.nodes.size),this.addNode(a)),void 0!=i&&(this.index.set(eP.tagName,this.nodes.size),this.addNode(i))}getGrainSize(){let e=this.index.get(ew.tagName);if(e)return this.nodes.get(e)}setGrainSize(e){let t=this.index.get(ew.tagName);t?this.nodes.set(t,e):(this.index.set(ew.tagName,this.nodes.size),this.addNode(e))}getAutomaticallySetMaxEne(){let e=this.index.get(e_.tagName);if(e)return this.nodes.get(e)}setAutomaticallySetMaxEne(e){let t=this.index.get(e_.tagName);t?this.nodes.set(t,e):(this.index.set(e_.tagName,this.nodes.size),this.addNode(e))}getEnergyAboveTheTopHill(){let e=this.index.get(eM.tagName);if(e)return this.nodes.get(e)}setEnergyAboveTheTopHill(e){let t=this.index.get(eM.tagName);t?this.nodes.set(t,e):(this.index.set(eM.tagName,this.nodes.size),this.addNode(e))}getMaxTemperature(){let e=this.index.get(eP.tagName);if(e)return this.nodes.get(e)}setMaxTemperature(e){let t=this.index.get(eP.tagName);t?this.nodes.set(t,e):(this.index.set(eP.tagName,this.nodes.size),this.addNode(e))}}class ez extends b{static{this.tagName="me:calculateRateCoefficientsOnly"}constructor(){super(ez.tagName)}}class eR extends b{static{this.tagName="me:printCellDOS"}constructor(){super(eR.tagName)}}class eI extends b{static{this.tagName="me:printCellTransitionStateFlux"}constructor(){super(eI.tagName)}}class eB extends b{static{this.tagName="me:printReactionOperatorColumnSums"}constructor(){super(eB.tagName)}}class ek extends b{static{this.tagName="me:printGrainBoltzmann"}constructor(){super(ek.tagName)}}class eF extends b{static{this.tagName="me:printGrainDOS"}constructor(){super(eF.tagName)}}class eD extends b{static{this.tagName="me:printGrainkbE"}constructor(){super(eD.tagName)}}class eH extends b{static{this.tagName="me:printGrainkfE"}constructor(){super(eH.tagName)}}class eO extends b{static{this.tagName="me:printTSsos"}constructor(){super(eO.tagName)}}class eG extends b{static{this.tagName="me:printGrainedSpeciesProfile"}constructor(){super(eG.tagName)}}class eA extends b{static{this.tagName="me:printGrainTransitionStateFlux"}constructor(){super(eA.tagName)}}class eq extends b{static{this.tagName="me:printReactionOperatorSize"}constructor(){super(eq.tagName)}}class eU extends b{static{this.tagName="me:printSpeciesProfile"}constructor(){super(eU.tagName)}}class ej extends b{static{this.tagName="me:printPhenomenologicalEvolution"}constructor(){super(ej.tagName)}}class e$ extends b{static{this.tagName="me:printTunnelingCoefficients"}constructor(){super(e$.tagName)}}class eX extends b{static{this.tagName="me:printCrossingCoefficients"}constructor(){super(eX.tagName)}}class eV extends b{static{this.tagName="me:testDOS"}constructor(){super(eV.tagName)}}class eW extends b{static{this.tagName="me:testRateConstants"}constructor(){super(eW.tagName)}}class eY extends b{static{this.tagName="me:useTheSameCellNumberForAllConditions"}constructor(){super(eY.tagName)}}class eJ extends b{static{this.tagName="me:ForceMacroDetailedBalance"}constructor(){super(eJ.tagName)}}class eK extends b{static{this.tagName="me:hideInactive"}constructor(){super(eK.tagName)}}class eQ extends S{static{this.tagName="me:calcMethod"}static{this.options=["simpleCalc","gridSearch","fitting","marquardt","analyticalRepresentation","ThermodynamicTable","sensitivityAnalysis"]}constructor(e,t){super(e,eQ.tagName,t)}}class eZ extends y{static{this.tagName="me:eigenvalues"}constructor(e,t){super(e,eZ.tagName,t)}}class e0 extends y{static{this.tagName="me:shortestTimeOfInterest"}constructor(e,t){super(e,e0.tagName,t)}}class e1 extends y{static{this.tagName="me:MaximumEvolutionTime"}constructor(e,t){super(e,e1.tagName,t)}}class e2 extends y{static{this.tagName="me:automaticallySetMaxEne"}constructor(e,t){super(e,e2.tagName,t)}}class e5 extends y{static{this.tagName="me:diagramEnergyOffset"}constructor(e,t){super(e,e5.tagName,t)}}class e4 extends T{static{this.tagName="me:testMicroRates"}constructor(e){super(e,e4.tagName),this.tMin=parseFloat(e.get("Tmin")),this.tMax=parseFloat(e.get("Tmax")),this.tStep=parseFloat(e.get("Tstep"))}getTmin(){return this.tMin}setTmin(e){this.tMin=e,this.attributes?.set("Tmin",e.toString())}getTmax(){return this.tMax}setTmax(e){this.tMax=e,this.attributes?.set("Tmax",e.toString())}getTstep(){return this.tStep}setTstep(e){this.tStep=e,this.attributes?.set("Tstep",e.toString())}}class e8 extends _{static{this.tagName="me:control"}constructor(e){super(e,e8.tagName),this.index=new Map}getCalculateRateCoefficientsOnly(){let e=this.index.get(ez.tagName);if(void 0!=e)return this.nodes.get(e)}setCalculateRateCoefficientsOnly(e){let t=this.index.get(ez.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(ez.tagName,this.nodes.size),this.addNode(e))}removeCalculateRateCoefficientsOnly(){let e=this.index.get(ez.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(ez.tagName))}getPrintCellDOS(){let e=this.index.get(eR.tagName);if(void 0!=e)return this.nodes.get(e)}setPrintCellDOS(e){let t=this.index.get(eR.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eR.tagName,this.nodes.size),this.addNode(e))}removePrintCellDOS(){let e=this.index.get(eR.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(eR.tagName))}getPrintCellTransitionStateFlux(){let e=this.index.get(eI.tagName);if(void 0!=e)return this.nodes.get(e)}setPrintCellTransitionStateFlux(e){let t=this.index.get(eI.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eI.tagName,this.nodes.size),this.addNode(e))}removePrintCellTransitionStateFlux(){let e=this.index.get(eI.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(eI.tagName))}getPrintReactionOperatorColumnSums(){let e=this.index.get(eB.tagName);if(void 0!=e)return this.nodes.get(e)}setPrintReactionOperatorColumnSums(e){let t=this.index.get(eB.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eB.tagName,this.nodes.size),this.addNode(e))}removePrintReactionOperatorColumnSums(){let e=this.index.get(eB.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(eB.tagName))}getPrintGrainBoltzmann(){let e=this.index.get(ek.tagName);if(void 0!=e)return this.nodes.get(e)}setPrintGrainBoltzmann(e){let t=this.index.get(ek.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(ek.tagName,this.nodes.size),this.addNode(e))}removePrintGrainBoltzmann(){let e=this.index.get(ek.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(ek.tagName))}getPrintGrainDOS(){let e=this.index.get(eF.tagName);if(void 0!=e)return this.nodes.get(e)}setPrintGrainDOS(e){let t=this.index.get(eF.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eF.tagName,this.nodes.size),this.addNode(e))}removePrintGrainDOS(){let e=this.index.get(eF.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(eF.tagName))}getPrintGrainkbE(){let e=this.index.get(eD.tagName);if(void 0!=e)return this.nodes.get(e)}setPrintGrainkbE(e){let t=this.index.get(eD.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eD.tagName,this.nodes.size),this.addNode(e))}removePrintGrainkbE(){let e=this.index.get(eD.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(eD.tagName))}getPrintGrainkfE(){let e=this.index.get(eH.tagName);if(void 0!=e)return this.nodes.get(e)}setPrintGrainkfE(e){let t=this.index.get(eH.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eH.tagName,this.nodes.size),this.addNode(e))}removePrintGrainkfE(){let e=this.index.get(eH.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(eH.tagName))}getPrintTSsos(){let e=this.index.get(eO.tagName);if(void 0!=e)return this.nodes.get(e)}setPrintTSsos(e){let t=this.index.get(eO.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eO.tagName,this.nodes.size),this.addNode(e))}removePrintTSsos(){let e=this.index.get(eO.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(eO.tagName))}getPrintGrainedSpeciesProfile(){let e=this.index.get(eG.tagName);if(void 0!=e)return this.nodes.get(e)}setPrintGrainedSpeciesProfile(e){let t=this.index.get(eG.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eG.tagName,this.nodes.size),this.addNode(e))}removePrintGrainedSpeciesProfile(){let e=this.index.get(eG.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(eG.tagName))}getPrintGrainTransitionStateFlux(){let e=this.index.get(eA.tagName);if(void 0!=e)return this.nodes.get(e)}setPrintGrainTransitionStateFlux(e){let t=this.index.get(eA.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eA.tagName,this.nodes.size),this.addNode(e))}removePrintGrainTransitionStateFlux(){let e=this.index.get(eA.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(eA.tagName))}getPrintReactionOperatorSize(){let e=this.index.get(eq.tagName);if(void 0!=e)return this.nodes.get(e)}setPrintReactionOperatorSize(e){let t=this.index.get(eq.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eq.tagName,this.nodes.size),this.addNode(e))}removePrintReactionOperatorSize(){let e=this.index.get(eq.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(eq.tagName))}getPrintSpeciesProfile(){let e=this.index.get(eU.tagName);if(void 0!=e)return this.nodes.get(e)}setPrintSpeciesProfile(e){let t=this.index.get(eU.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eU.tagName,this.nodes.size),this.addNode(e))}removePrintSpeciesProfile(){let e=this.index.get(eU.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(eU.tagName))}getPrintPhenomenologicalEvolution(){let e=this.index.get(ej.tagName);if(void 0!=e)return this.nodes.get(e)}setPrintPhenomenologicalEvolution(e){let t=this.index.get(ej.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(ej.tagName,this.nodes.size),this.addNode(e))}removePrintPhenomenologicalEvolution(){let e=this.index.get(ej.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(ej.tagName))}getPrintTunnelingCoefficients(){let e=this.index.get(e$.tagName);if(void 0!=e)return this.nodes.get(e)}setPrintTunnelingCoefficients(e){let t=this.index.get(e$.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(e$.tagName,this.nodes.size),this.addNode(e))}removePrintTunnelingCoefficients(){let e=this.index.get(e$.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(e$.tagName))}getPrintCrossingCoefficients(){let e=this.index.get(eX.tagName);if(void 0!=e)return this.nodes.get(e)}setPrintCrossingCoefficients(e){let t=this.index.get(eX.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eX.tagName,this.nodes.size),this.addNode(e))}removePrintCrossingCoefficients(){let e=this.index.get(eX.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(eX.tagName))}getTestDOS(){let e=this.index.get(eV.tagName);if(void 0!=e)return this.nodes.get(e)}setTestDOS(e){let t=this.index.get(eV.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eV.tagName,this.nodes.size),this.addNode(e))}removeTestDOS(){let e=this.index.get(eV.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(eV.tagName))}getTestRateConstants(){let e=this.index.get(eW.tagName);if(void 0!=e)return this.nodes.get(e)}setTestRateConstants(e){let t=this.index.get(eW.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eW.tagName,this.nodes.size),this.addNode(e))}removeTestRateConstants(){let e=this.index.get(eW.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(eW.tagName))}getUseTheSameCellNumberForAllConditions(){let e=this.index.get(eY.tagName);if(void 0!=e)return this.nodes.get(e)}setUseTheSameCellNumberForAllConditions(e){let t=this.index.get(eY.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eY.tagName,this.nodes.size),this.addNode(e))}removeUseTheSameCellNumberForAllConditions(){let e=this.index.get(eY.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(eY.tagName))}getHideInactive(){let e=this.index.get(eK.tagName);if(void 0!=e)return this.nodes.get(e)}setHideInactive(e){let t=this.index.get(eK.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eK.tagName,this.nodes.size),this.addNode(e))}removeHideInactive(){let e=this.index.get(eK.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(eK.tagName))}getForceMacroDetailedBalance(){let e=this.index.get(eJ.tagName);if(void 0!=e)return this.nodes.get(e)}setForceMacroDetailedBalance(e){let t=this.index.get(eJ.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eJ.tagName,this.nodes.size),this.addNode(e))}removeForceMacroDetailedBalance(){let e=this.index.get(eJ.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(eJ.tagName))}getCalcMethod(){let e=this.index.get(eQ.tagName);if(void 0!=e)return this.nodes.get(e)}setCalcMethod(e){let t=this.index.get(eQ.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eQ.tagName,this.nodes.size),this.addNode(e))}removeCalcMethod(){let e=this.index.get(eQ.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(eQ.tagName))}getEigenvalues(){let e=this.index.get(eZ.tagName);if(void 0!=e)return this.nodes.get(e)}setEigenvalues(e){let t=this.index.get(eZ.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eZ.tagName,this.nodes.size),this.addNode(e))}removeEigenvalues(){let e=this.index.get(eZ.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(eZ.tagName))}getShortestTimeOfInterest(){let e=this.index.get(e0.tagName);if(void 0!=e)return this.nodes.get(e)}setShortestTimeOfInterest(e){let t=this.index.get(e0.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(e0.tagName,this.nodes.size),this.addNode(e))}removeShortestTimeOfInterest(){let e=this.index.get(e0.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(e0.tagName))}getMaximumEvolutionTime(){let e=this.index.get(e1.tagName);if(void 0!=e)return this.nodes.get(e)}setMaximumEvolutionTime(e){let t=this.index.get(e.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(e.tagName,this.nodes.size),this.addNode(e))}removeMaximumEvolutionTime(){let e=this.index.get(e1.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(e1.tagName))}getAutomaticallySetMaxEne(){let e=this.index.get(e2.tagName);if(void 0!=e)return this.nodes.get(e)}setAutomaticallySetMaxEne(e){let t=this.index.get(e2.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(e2.tagName,this.nodes.size),this.addNode(e))}removeAutomaticallySetMaxEne(){let e=this.index.get(e2.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(e2.tagName))}getDiagramEnergyOffset(){let e=this.index.get(e5.tagName);if(void 0!=e)return this.nodes.get(e)}setDiagramEnergyOffset(e){let t=this.index.get(e5.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(e5.tagName,this.nodes.size),this.addNode(e))}removeDiagramEnergyOffset(){let e=this.index.get(e5.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(e5.tagName))}getTestMicroRates(){let e=this.index.get(e4.tagName);if(void 0!=e)return this.nodes.get(e)}setTestMicroRates(e){let t=this.index.get(e4.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(e4.tagName,this.nodes.size),this.addNode(e))}removeTestMicroRates(){let e=this.index.get(e4.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(e4.tagName))}}class e6 extends S{static{this.tagName="me:title"}constructor(e,t){super(e,e6.tagName,t)}}class e7 extends _{static{this.tagName="moleculeList"}constructor(e,t){super(e,e7.tagName),this.index=new Map,void 0!=t&&t.forEach(e=>{this.nodes.set(this.nodes.size,e),this.index.set(e.id,this.nodes.size-1)})}getMolecule(e){let t=this.index.get(e);if(void 0!=t)return this.nodes.get(t)}removeMolecule(e){let t=this.index.get(e);void 0!=t&&(this.nodes.delete(t),this.index.delete(e))}addMolecule(e){let t=this.index.get(e.id);void 0!==t?(this.nodes.set(t,e),console.log("Replaced molecule with id "+e.id)):(this.nodes.set(this.nodes.size,e),this.index.set(e.id,this.nodes.size-1))}}class e3 extends _{static{this.tagName="reactionList"}constructor(e,t){super(e,e3.tagName),this.index=new Map,void 0!=t&&t.forEach(e=>{this.nodes.set(this.nodes.size,e),this.index.set(e.id,this.nodes.size-1)})}getReaction(e){let t=this.index.get(e);if(void 0!=t)return this.nodes.get(t)}removeReaction(e){let t=this.index.get(e);void 0!=t&&(this.nodes.delete(t),this.index.delete(e))}addReaction(e){let t=this.index.get(e.id);void 0!==t?(this.nodes.set(t,e),console.log("Replaced reaction with id "+e.id)):(this.nodes.set(this.nodes.size,e),this.index.set(e.id,this.nodes.size-1))}}class e9 extends _{static{this.tagName="me:mesmer"}static{this.header=`<?xml version="1.0" encoding="utf-8" ?>
<?xml-stylesheet type='text/xsl' href='../../mesmer2.xsl' media='other'?>
<?xml-stylesheet type='text/xsl' href='../../mesmer1.xsl' media='screen'?>`}constructor(e,t,n,a,i,s,o){super(e,e9.tagName),this.index=new Map,void 0!=t&&(this.index.set(e6.tagName,this.nodes.size),this.addNode(t)),void 0!=n&&(this.index.set(e7.tagName,this.nodes.size),this.addNode(n)),void 0!=a&&(this.index.set(e3.tagName,this.nodes.size),this.addNode(a)),void 0!=i&&(this.index.set(ey.tagName,this.nodes.size),this.addNode(i)),void 0!=s&&(this.index.set(eL.tagName,this.nodes.size),this.addNode(s)),void 0!=o&&(this.index.set(e8.tagName,this.nodes.size),this.addNode(o))}getTitle(){let e=this.index.get(e6.tagName);if(void 0!=e)return this.nodes.get(e)}setTitle(e){let t=this.index.get(e6.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(e6.tagName,this.nodes.size),this.addNode(e))}getMoleculeList(){let e=this.index.get(e7.tagName);if(void 0!=e)return this.nodes.get(e)}setMoleculeList(e){let t=this.index.get(e7.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(e7.tagName,this.nodes.size),this.addNode(e))}getReactionList(){let e=this.index.get(e3.tagName);if(void 0!=e)return this.nodes.get(e)}setReactionList(e){let t=this.index.get(e3.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(e3.tagName,this.nodes.size),this.addNode(e))}getConditions(){let e=this.index.get(ey.tagName);if(void 0!=e)return this.nodes.get(e)}setConditions(e){let t=this.index.get(ey.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(ey.tagName,this.nodes.size),this.addNode(e))}getModelParameters(){let e=this.index.get(eL.tagName);if(void 0!=e)return this.nodes.get(e)}setModelParameters(e){let t=this.index.get(eL.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eL.tagName,this.nodes.size),this.addNode(e))}getControl(){let e=this.index.get(e8.tagName);if(void 0!=e)return this.nodes.get(e)}setControl(e){let t=this.index.get(e8.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(e8.tagName,this.nodes.size),this.addNode(e))}}let te="1.5em",tt="1.25em",tn="1.0em",ta={marginTop:"1px",marginBottom:"1px"},ti={marginLeft:"25px",marginTop:"1px",marginBottom:"1px"},ts={marginLeft:"50px",marginTop:"1px",marginBottom:"1px"},to={marginLeft:"75px",marginTop:"1px",marginBottom:"1px"},tl={marginLeft:"100px",marginTop:"1px",marginBottom:"1px"},td={marginLeft:"125px",marginTop:"1px",marginBottom:"1px"},tr={marginLeft:"1px",marginTop:"1px",marginBottom:"1px",marginRight:"1px"},tg="remove",th=["kJ/mol","cm-1","kcal/mol","Hartree"],tm=["cm-1","GHz"],tc=new Map,tu=-1/0,tp=1/0,tN=new Map;function tf(){let t=document.createElement("input");t.type="file",t.onchange=function(){if(t.files){for(let e=0;e<t.files.length;e++)console.log("inputElement.files["+e+"]="+t.files[e]);let n=t.files[0];console.log(n.name);let a=n.name,g=new FileReader,b=0,T="";g.onload=function(t){if(null==t.target)throw Error("Event target is null");if(T+=t.target.result,null!=n){if(b<n.size){let e=n.slice(b,b+1048576);g.readAsText(e),b+=1048576}else{var S;let t,n,g;S=T=T.trim(),t=document.getElementById("xml"),s("xmlHeading"),(n=document.createElement("h2")).textContent=a,t.appendChild(n),s("xmlParagraph"),(g=document.createElement("pre")).textContent=S,t.appendChild(g),function(t){console.log("parse: "+t);let n=L(t,e9.tagName);e=new e9(P(n));let a=t.getElementsByTagName(e6.tagName);if(1!=a.length)throw Error("Multiple "+e6.tagName+" tags found");{let t=a[0].childNodes[0].nodeValue.trim(),n=new e6(P(a[0]),t),i=document.getElementById("title"),o=n.value;e.setTitle(n);let l="titleId";s(l);let r=d("text",l+"Input",tr,ta,e=>{e.target instanceof HTMLInputElement&&(n.value=e.target.value,console.log(n.tagName+" changed to "+n.value),h(e.target))},o,"Title",te);r.id=l,i.parentNode?.insertBefore(r,i)}let g=document.getElementById("molecules"),b="moleculesDivId";if(s(b),null==g);else{let n=function(e){let t=document.createElement("div"),n=L(e,e7.tagName),a=new Set;if(n.childNodes.forEach(function(e){a.add(e.nodeName)}),1!=a.size&&!(2==a.size&&a.has("#text")))throw console.error("moleculeListTagNames:"),a.forEach(e=>console.error(e)),Error("Additional tag names in moleculeList:");if(!a.has(ee.tagName))throw Error('Expecting tags with "'+ee.tagName+'" tagName but there are none!');let s=n.getElementsByTagName(ee.tagName);console.log("Number of molecules="+s.length);for(let e=0;e<s.length;e++){let n,a,l=document.createElement("div"),g=P(s[e]),u=new Set,p=s[e].childNodes;for(let e=0;e<p.length;e++){let t=p[e];u.has(t.nodeName)?"#text"!=t.nodeName&&console.warn("Another ChildNode with nodeName="+t.nodeName):u.add(t.nodeName)}let x=s[e].getElementsByTagName(R.tagName);if(x.length>1)throw Error("Expecting 1 or 0 "+R.tagName+" but finding "+x.length+"!");if(1==x.length){let e=x[0],t=e.getElementsByTagName(z.tagName);if(t.length<2)throw Error("Expecting 2 or more atoms in "+R.tagName+", but finding "+t.length+"!");let a=[];for(let e=0;e<t.length;e++)a.push(new z(P(t[e])));n=new R(P(e),a),u.delete(R.tagName)}else{let t=s[e].getElementsByTagName(z.tagName);if(1==t.length)n=new z(P(t[0]));else if(t.length>1)throw Error("Expecting 1 "+z.tagName+" but finding "+t.length+". Should these be in an "+R.tagName+"?")}u.delete(z.tagName);let b=s[e].getElementsByTagName(B.tagName);if(b.length>1)throw Error("Expecting 1 or 0 "+B.tagName+" but finding "+b.length+"!");if(1==b.length){let e=b[0],t=e.getElementsByTagName(I.tagName),n=[];for(let e=0;e<t.length;e++)n.push(new I(P(t[e])));a=new B(P(e),n),u.delete(B.tagName)}else{let t=s[e].getElementsByTagName(I.tagName);if(1==t.length)a=new I(P(t[0]));else if(t.length>1)throw Error("Expecting 1 "+I.tagName+" but finding "+t.length+". Should these be in a "+B.tagName+"?")}u.delete(I.tagName);let T=new ee(g,n,a);tc.set(T.id,T);let S=s[e].getElementsByTagName(j.tagName);if(S.length>1)throw Error("Expecting 1 or 0 "+j.tagName+" but finding "+S.length+"!");if(1==S.length){let e=document.createElement("div"),t=T.id+"_"+j.tagName+"_",n=o({content:e,buttonLabel:j.tagName,buttonFontSize:tn,boundary:tr,level:ts,contentDivId:t});l.appendChild(n);let a=new j(P(S[0]));T.setProperties(a);let i=S[0].getElementsByTagName(D.tagName);for(let t=0;t<i.length;t++){let n=new D(P(i[t]));a.setProperty(n),T.setProperties(a),n.dictRef==H.dictRef?tx(n,th,T,i[t],e,tr,to):n.dictRef==A.dictRef?tx(n,tm,T,i[t],e,tr,to):tx(n,void 0,T,i[t],e,tr,to)}u.delete(j.tagName)}else{let t=s[e].getElementsByTagName(D.tagName);if(1!=t.length)throw Error("Expecting 1 "+D.tagName+" but finding "+t.length+". Should these be in a "+j.tagName+"?");let n=new D(P(t[0]));T.setProperties(n),n.dictRef==H.dictRef?tx(n,th,T,t[0],l,tr,ts):n.dictRef==A.dictRef?tx(n,tm,T,t[0],l,tr,ts):tx(n,void 0,T,t[0],l,tr,ts),u.delete(D.tagName)}let y=s[e].getElementsByTagName(X.tagName);if(y.length>0){if(y.length>1)throw Error("Expecting 1 or 0 "+X.tagName+" but finding "+y.length+"!");(function(e,t,n,a,i){let s=n.getElementsByTagName($.tagName);if(s.length>0){let n=document.createElement("div"),i=t.id+"_"+X.tagName,l=o({content:n,buttonLabel:X.tagName,buttonFontSize:tn,boundary:tr,level:ts,contentDivId:i});a.appendChild(l);let r=[];for(let e=0;e<s.length;e++){let a=C(s[e]),i=parseFloat(a),o=new $(P(s[e]),i);r.push(o);let l=$.tagName,g=t.id+"_"+X.tagName+"_"+$.tagName+"_"+e,m=d("number",g,tr,to,t=>{t.target instanceof HTMLInputElement&&(tC(o,t.target),a=t.target.value,r[e].setValue(parseFloat(a)),console.log("Set "+g+" to "+a),h(t.target))},a,l);n.appendChild(m);let c=document.createElement("label");c.textContent="cm-1",m.appendChild(c)}e.setDeltaEDowns(r),t.setEnergyTransferModel(e)}})(new X(P(y[0])),T,y[0],l,0),u.delete(X.tagName)}let w=s[e].getElementsByTagName(V.tagName);if(w.length>0){if(w.length>1)throw Error("Expecting 1 or 0 "+V.tagName+" but finding "+w.length+"!");(function(e,t,n){let a=document.createElement("label");a.textContent=V.tagName+": ";let i=document.createElement("div");i.appendChild(a);let s=c(["ClassicalRotors","me:QMRotors","QMRotors"],"DOSCMethod",t.id+"_Select_DOSCMethod",tr);s.value=e.getXsiType(),s.addEventListener("change",t=>{t.target instanceof HTMLSelectElement&&(e.setXsiType(t.target.value),console.log("Set DOSCMethod to "+t.target.value))}),t.setDOSCMethod(e),i.appendChild(s),Object.assign(i.style,ts),n.appendChild(i)})(new V(P(w[0])),T,l),u.delete(V.tagName)}let _=s[e].getElementsByTagName(Q.tagName);if(_.length>0){if(1!=_.length)throw Error("Expecting only 1 extra DOSCMethod, but there are "+_.length);let e=new Q(P(w[0])),t=document.createElement("div"),n=T.id+"_"+Q.tagName+"_",a=o({content:t,buttonLabel:Q.tagName,buttonFontSize:tn,boundary:tr,level:ts,contentDivId:n});l.appendChild(a);let s=_[0].getElementsByTagName(W.tagName);if(s.length>0){if(1!=s.length)throw Error("Expecting only 1 bondRef, but there are "+s.length);let n=N(to),a=document.createElement("label");a.textContent=W.tagName+": ",n.appendChild(a);let i=new W(P(s[0]),E(v(s[0])));e.setBondRef(i);let o=c(T.getBonds().getBondIds(),i.value,T.id+"_"+W.tagName,tr);o.addEventListener("change",e=>{e.target instanceof HTMLSelectElement&&(i.value=e.target.value,m(e.target))}),m(o),n.appendChild(o),t.appendChild(n)}let g=_[0].getElementsByTagName(J.tagName);if(g.length>0){if(1!=g.length)throw Error("Expecting only 1 HinderedRotorPotential, but there are "+g.length);let n=P(g[0]),a=new J(n),s=N(tr),l=T.id+"_"+V.tagName+"_"+J.tagName,d=o({content:s,buttonLabel:J.tagName,buttonFontSize:tn,boundary:tr,level:to,contentDivId:l});t.appendChild(d);let u=f("Format:",tl);s.appendChild(u);let p=c(J.formats,a.format,T.id+"_"+J.tagName,tr);p.addEventListener("change",e=>{e.target instanceof HTMLSelectElement&&(a.format=e.target.value,m(e.target))}),m(p),s.appendChild(p);let x=f("Units:",tr);s.appendChild(x),tv(J.units,n,s,T.id+"_"+V.tagName+"_"+J.tagName,J.tagName,tr);let v=f("Expansion size:",tr);s.appendChild(v);let E=r("number",T.id+"_"+V.tagName+"_"+J.tagName+"_expansionSize",tr);E.value=a.getExpansionSize().toString(),E.addEventListener("change",e=>{e.target instanceof HTMLInputElement&&(i(e.target.value)?a.setExpansionSize(parseInt(e.target.value)):(alert("Expansion size input is not a number, resetting..."),E.value=a.getExpansionSize().toString()),h(E))}),E.value=a.getExpansionSize().toString(),h(E),s.appendChild(E);let C=f("Use sine terms:",tr);s.appendChild(C);let b=r("checkbox",T.id+"_"+V.tagName+"_"+J.tagName+"_useSineTerms",tr);b.checked=a.getUseSineTerms(),b.addEventListener("change",e=>{e.target instanceof HTMLInputElement&&a.setUseSineTerms(e.target.checked)}),s.appendChild(b);let S=document.createElement("div"),y=T.id+"_"+V.tagName+"_"+J.tagName+"_"+Y.tagName,w=o({content:S,buttonLabel:Y.tagName,buttonFontSize:tn,boundary:tr,level:tl,contentDivId:y});s.appendChild(w);let _=[],M=g[0].getElementsByTagName(Y.tagName);for(let e=0;e<M.length;e++){let t=new Y(P(M[e]));_.push(t);let n=N(td);w.appendChild(n);let a=f("Angle:",tr);n.appendChild(a);let s=r("number",T.id+"_"+Y.tagName+"_angle",tr);s.addEventListener("change",e=>{e.target instanceof HTMLInputElement&&(i(e.target.value)?(parseFloat(e.target.value),t.setAngle(parseFloat(e.target.value))):(alert("Angle input is not a number, resetting..."),s.value=t.getAngle().toString()),h(s))}),s.value=t.getAngle().toString(),h(s),n.appendChild(s);let o=f("Potential:",tr);n.appendChild(o);let l=r("number",T.id+"_"+Y.tagName+"_potential",tr);l.addEventListener("change",e=>{if(e.target instanceof HTMLInputElement){if(i(e.target.value)){let n=parseFloat(e.target.value);t.setPotential(n),console.log("Set "+Y.tagName+" to "+n.toString())}else alert("Potential input is not a number, resetting..."),l.value=t.getPotential().toString();h(l)}}),l.value=t.getPotential().toString(),h(l),n.appendChild(l),S.appendChild(n)}w.appendChild(S),a.setPotentialPoints(_),e.setHinderedRotorPotential(a)}let p=w[0].getElementsByTagName(K.tagName);if(p.length>0){if(1!=p.length)throw Error("Expecting only 1 Periodicity, but there are "+p.length);let n=E(v(p[0])),a=new K(P(p[0]),parseFloat(n));e.setPeriodicity(a);let s=d("number",T.id+"_"+K.tagName,tr,to,t=>{if(t.target instanceof HTMLInputElement){if(i(n=t.target.value)){let t=parseFloat(n);a.value=t,e.getPeriodicity().value=t,console.log("Set "+K.tagName+" to "+t)}else alert("Periodicity input is not a number, resetting..."),t.target.value=a.value.toString()}},n,K.tagName);t.appendChild(s)}T.setExtraDOSCMethod(e),u.delete(Q.tagName)}u.delete(Z.tagName);let M=s[e].getElementsByTagName(Z.tagName);if(M.length>0){if(1!=M.length)throw Error("Expecting only 1 reservoirSize, but there are "+M.length);let e=E(v(M[0])),t=parseFloat(e),n=new Z(P(M[0]),t);T.setReservoirSize(n);let a=d("number",T.id+"_"+Z.tagName,tr,ts,e=>{e.target instanceof HTMLInputElement&&(n.value=parseFloat(e.target.value),h(e.target))},e,Z.tagName);l.appendChild(a)}u.delete("#text"),u.size>0&&(console.warn("There are additional unexpected moleculeTagNames:"),u.forEach(e=>console.warn(e)));let L=document.createElement("div");L.id=T.id+"_molstar",l.appendChild(L);let k=o({content:l,buttonLabel:T.getLabel(),buttonFontSize:tt,boundary:tr,level:ti,contentDivId:T.tagName+"_"+T.id});t.appendChild(k)}return t}(t);n.id=b,g.appendChild(o({content:n,buttonLabel:"Molecules",buttonFontSize:te,boundary:tr,level:ta,contentDivId:b})),e.setMoleculeList(new e7(P(n),Array.from(tc.values())))}let T=document.getElementById("reactions"),S="reactionsDivId";if(s(S),null==T);else{let n=function(e){let t=N(tr),n=L(e,e3.tagName),a=new Set;if(n.childNodes.forEach(function(e){a.add(e.nodeName)}),1!=a.size&&!(2==a.size&&a.has("#text")))throw console.error("reactionListTagNames:"),a.forEach(e=>console.error(e)),Error("Additional tag names in reactionList:");if(!a.has(ec.tagName))throw Error('Expecting tags with "'+ec.tagName+'" tagName but there are none!');let i=n.getElementsByTagName(ec.tagName);console.log("Number of reactions="+i.length);for(let e=0;e<i.length;e++){let n=p(tr),a=P(i[e]),s=new Set,l=i[e].childNodes;for(let e=0;e<l.length;e++){let t=l[e];s.has(t.nodeName)?"#text"!=t.nodeName&&console.warn("Another ChildNode with nodeName="+t.nodeName):s.add(t.nodeName)}let r=new ec(a);tN.set(r.id,r);let g=i[e].getElementsByTagName(en.tagName);if(s.delete(en.tagName),g.length>0){let e=document.createElement("div"),t=[];for(let n=0;n<g.length;n++){let a=new et(P(x(g[n],ee.tagName))),i=new en(P(g[n]),a);t.push(i);let s=document.createElement("div"),o=document.createElement("label");o.textContent=a.ref+" role: ",s.appendChild(o);let l=c(["deficientReactant","excessReactant","modelled"],"Role",a.ref+"_Select_Role",tr);l.value=a.role,l.addEventListener("change",e=>{e.target instanceof HTMLSelectElement&&(a.setRole(e.target.value),console.log("Set Role to "+e.target.value))}),s.appendChild(l),Object.assign(s.style,to),e.appendChild(s)}r.setReactants(t);let a=o({content:e,buttonLabel:"Reactants",buttonFontSize:tn,boundary:tr,level:ts,contentDivId:r.id+"_"+en.tagName});n.appendChild(a)}let m=i[e].getElementsByTagName(ea.tagName);if(s.delete(ea.tagName),m.length>0){let e=document.createElement("div"),t=[];for(let n=0;n<m.length;n++){let a=new et(P(x(m[n],ee.tagName))),i=new ea(P(m[n]),a);t.push(i);let s=["modelled","sink"],o=function(e,t,n,a,i){let s=document.createElement("div"),o=f(e,i);s.appendChild(o);let l=document.createElement("select");return s.appendChild(l),t.forEach(e=>{l.name=n,l.id=a;let t=document.createElement("option");t.value=e,t.text=e,l.appendChild(t)}),Object.assign(l.style,i),s}(a.ref+" role:",s,a.ref+"_Select_Role","Role",tr),l=o.querySelector("select");l.value=a.role,l.addEventListener("change",e=>{e.target instanceof HTMLSelectElement&&(a.setRole(e.target.value),console.log("Set Role to "+e.target.value))}),Object.assign(o.style,to),e.appendChild(o)}r.setProducts(t);let a=o({content:e,buttonLabel:"Products",buttonFontSize:tn,boundary:tr,level:ts,contentDivId:r.id+"_"+ea.tagName});n.appendChild(a)}let u=i[e].getElementsByTagName(eh.tagName);if(u.length>0){if(u.length>1)throw Error("Expecting 1 "+eh.tagName+" but finding "+u.length+"!");let e=new eh(P(u[0]));r.setTunneling(e);let t=document.createElement("div"),a=document.createElement("label");a.textContent=eh.tagName+": ",t.appendChild(a);let i=c(["Eckart","WKB"],"Tunneling",r.id+"_Select_Tunneling",tr);i.value=e.getName(),i.addEventListener("change",t=>{t.target instanceof HTMLSelectElement&&(e.setName(t.target.value),console.log("Set Tunneling to "+t.target.value))}),t.appendChild(i),Object.assign(t.style,ts),n.appendChild(t)}let N=i[e].getElementsByTagName(ei.tagName);if(N.length>0){let e=document.createElement("div"),t=[];for(let n=0;n<N.length;n++){let a=new et(P(x(N[n],ee.tagName))),i=new ei(P(N[n]),a);t.push(i);let s=f(a.ref+" role: transitionState",to);e.appendChild(s)}r.setTransitionStates(t);let a=o({content:e,buttonLabel:"Transition States",buttonFontSize:tn,boundary:tr,level:ts,contentDivId:r.id+"_"+ei.tagName});n.appendChild(a)}let b=i[e].getElementsByTagName(er.tagName);if(b.length>0){if(b.length>1)throw Error("Expecting 1 "+er.tagName+" but finding "+b.length+"!");{let e,t=document.createElement("div"),a=P(b[0]),i=a.get("name");if(void 0==i||i==eg.xsiType2){let i=a.get("xsi:type");if(e=new eg(a),i==eg.xsiType||i==eg.xsiType2){let a=b[0].getElementsByTagName(es.tagName);if(null!=a&&null!=a[0]){let n=C(a[0]),i=parseFloat(n),s=P(a[0]),o=new es(s,i);e.setPreExponential(o);let l=es.tagName,g=r.id+"_"+eg.tagName+"_"+es.tagName,m=d("number",g,tr,to,e=>{e.target instanceof HTMLInputElement&&tC(o,e.target)},n,l);t.appendChild(m);let c=m.querySelector("input");c.value=n,h(c),c.addEventListener("change",e=>{n=e.target.value,o.value=parseFloat(n),console.log("Set "+g+" to "+n),h(c)}),tv(void 0,s,m,r.id+"_"+eg.xsiType+"_"+es.tagName,es.tagName,tr),t.appendChild(m)}let i=b[0].getElementsByTagName(eo.tagName);if(null!=i&&null!=i[0]){let n=C(i[0]),a=parseFloat(n),s=P(i[0]),o=new eo(s,a);e.setActivationEnergy(o);let l=eo.tagName,g=r.id+"_"+eg.tagName+"_"+eo.tagName,m=d("number",g,tr,to,e=>{e.target instanceof HTMLInputElement&&tC(o,e.target)},n,l),c=m.querySelector("input");c.value=n,h(c),c.addEventListener("change",e=>{n=e.target.value,o.value=parseFloat(n),console.log("Set "+g+" to "+n),h(c)}),tv(void 0,s,m,r.id+"_"+eg.xsiType+"_"+eo.tagName,eo.tagName,tr),t.appendChild(m)}let s=b[0].getElementsByTagName(el.tagName);if(null!=s&&null!=s[0]){let n=C(s[0]),a=parseFloat(n),i=P(s[0]),o=new el(i,a);e.setTInfinity(o);let l=el.tagName,g=r.id+"_"+eg.tagName+"_"+el.tagName,m=d("number",g,tr,to,e=>{e.target instanceof HTMLInputElement&&tC(o,e.target)},n,l),c=m.querySelector("input");c.value=n,h(c),c.addEventListener("change",e=>{n=e.target.value,o.value=parseFloat(n),console.log("Set "+g+" to "+n),h(c)}),tv(void 0,i,m,r.id+"_"+eg.xsiType+"_"+el.tagName,el.tagName,tr),t.appendChild(m)}let l=b[0].getElementsByTagName(ed.tagName);if(null!=l&&null!=l[0]){let n=C(l[0]),a=parseFloat(n),i=P(l[0]),s=new ed(i,a);e.setNInfinity(s);let o=ed.tagName,g=r.id+"_"+eg.tagName+"_"+ed.tagName,m=d("number",g,tr,to,e=>{e.target instanceof HTMLInputElement&&tC(s,e.target)},n,o);t.appendChild(m);let c=m.querySelector("input");c.value=n,h(c),c.addEventListener("change",e=>{n=e.target.value,s.value=parseFloat(n),console.log("Set "+g+" to "+n),h(c)}),tv(void 0,i,m,r.id+"_"+eg.xsiType+"_"+ed.tagName,ed.tagName,tr),t.appendChild(m)}let g=r.id+"_"+er.tagName,m=o({content:t,buttonLabel:er.tagName,buttonFontSize:tn,boundary:tr,level:ts,contentDivId:g});n.appendChild(m)}else throw Error("Unexpected xsi:type="+i)}else{e=new er(a);let i=document.createElement("label");i.textContent=er.tagName+": "+a.get("name"),Object.assign(i.style,ts),t.appendChild(i),n.appendChild(t)}r.setMCRCMethod(e)}}let T=i[e].getElementsByTagName(em.tagName);if(T.length>0){if(T.length>1)throw Error("Expecting 1 "+em.tagName+" but finding "+T.length+"!");let e=parseFloat(E(v(T[0]))),t=new em(P(T[0]),e);r.setExcessReactantConc(t);let a=d("number",r.id+"_"+em.tagName,tr,ts,e=>{e.target instanceof HTMLInputElement&&tC(t,e.target)},e.toString(),em.tagName);n.appendChild(a)}let S=o({content:n,buttonLabel:r.id+"("+r.getLabel()+")",buttonFontSize:tt,boundary:tr,level:ti,contentDivId:r.tagName+"_"+r.id});t.appendChild(S)}return t}(t);n.id=S,T.appendChild(o({content:n,buttonLabel:"Reactions",buttonFontSize:te,boundary:tr,level:ta,contentDivId:S})),e.setReactionList(new e3(P(n),Array.from(tN.values())))}tM();let y=document.getElementById("conditions"),w="conditionsDivId";if(s(w),null==y);else{let n=function(t){console.log(ey.tagName);let n=document.createElement("div"),a=L(t,ey.tagName),i=new ey(P(a));e.setConditions(i);let s=document.createElement("div");n.appendChild(s),n.appendChild(o({content:s,buttonLabel:ex.name,buttonFontSize:tt,boundary:tr,level:ti,contentDivId:ex.tagName}));let l=u("add",ts);s.appendChild(l),l.addEventListener("click",()=>{let e=new ex(new Map,"");i.addBathGas(e);let t=N(ts),n=f(ex.tagName,tr);t.appendChild(n);let a=c(Array.from(new Set(tc.keys())),ex.tagName,ey.tagName+"_"+ex.tagName,tr);a.value=e.value,a.addEventListener("change",t=>{t.target instanceof HTMLSelectElement&&(e.value=t.target.value,console.log("Added "+t.target.value+" as a "+ex.tagName),m(t.target))}),a.style.marginLeft="2px",m(a),t.appendChild(a);let o=u(tg,tr);o.addEventListener("click",()=>{s.removeChild(t),i.removeBathGas(e)}),t.appendChild(o),s.appendChild(t)});let g=Array.from(a.children).filter(e=>e.tagName===ex.tagName);if(g.length>0)for(let e=0;e<g.length;e++){let t=new ex(P(g[e]),E(v(g[e])));console.log("bathGas"+t.toString()),i.addBathGas(t);let n=N(ts),a=f(ex.tagName,tr);n.appendChild(a);let o=c(Array.from(new Set(tc.keys())),ex.tagName,ey.tagName+"_"+ex.tagName,tr);o.value=t.value,o.addEventListener("change",e=>{e.target instanceof HTMLSelectElement&&(t.value=e.target.value,console.log("Set "+eT.tagName+"_"+ex.tagName+" to "+e.target.value),m(e.target))}),m(o),n.appendChild(o);let l=u(tg,tr);l.addEventListener("click",()=>{s.removeChild(n),i.removeBathGas(t)}),n.appendChild(l),s.appendChild(n)}let h=document.createElement("div");n.appendChild(h);let p=new eS(new Map);n.appendChild(o({content:h,buttonLabel:eS.name,buttonFontSize:tt,boundary:tr,level:ti,contentDivId:ex.tagName}));let x=u("add",ts);h.appendChild(x),x.addEventListener("click",()=>{let e=new Map;e.set("units","Torr");let t=new eT(e),n=p.addPTpair(t),a=N(ts);tb(a,t),tT(a,t),tv(void 0,e,a,eT.tagName,eT.tagName,tr);let i=u("add details",tr);a.appendChild(i),i.addEventListener("click",()=>{let e,n=document.createElement("div");tS(a,t),ty(a,t),tw(a,t),t_(a,t),(e=u("add "+ev.tagName,tr)).addEventListener("click",()=>{let n=document.createElement("div");n.style.marginLeft="5px";let i=new ev(new Map,NaN);t.setExperimentRate(i),d("number",eT.tagName+"_"+ev.tagName,tr,to,e=>{e.target instanceof HTMLInputElement&&tC(i,e.target)},"",ev.tagName),a.insertBefore(n,e),a.removeChild(e)}),a.insertBefore(n,i),a.removeChild(i)});let s=u(tg,tr);s.addEventListener("click",()=>{h.removeChild(a),p.removePTpair(n),t.removeBathGas()}),a.appendChild(s),h.appendChild(a)});let C=u("Add from spreadsheet",tr);h.appendChild(C),C.addEventListener("click",()=>{let e=N(ts),t=r("text",eS.tagName+"_addFromSpreadsheet",ts);e.appendChild(t),h.insertBefore(e,x),t.addEventListener("change",()=>{if(console.log("inputElement.value="+t.value),console.log("inputElement.value.length="+t.value.length),t.value.length>0){let n=t.value.split(" ");console.log("pTPairsArray.length="+n.length);for(let e=0;e<n.length;e++){let t=new Map;t.set("units","Torr");let a=new eT(t),i=n[e].split("	");if(2==i.length){let e=parseFloat(i[0]),t=parseFloat(i[1]);a.setP(e),a.setT(t),console.log("pTPair="+a)}else console.warn("pTPairArray.length="+i.length);let s=N(ts);tb(s,a),tT(s,a),tv(void 0,t,s,eT.tagName,eT.tagName,tr),tS(s,a),ty(s,a),tw(s,a),t_(s,a),console.log(x),console.log(h),h.insertBefore(s,x),p.addPTpair(a)}h.removeChild(e)}})});let b=a.getElementsByTagName(eS.tagName);if(b.length>0){if(b.length>1)throw Error("Expecting 1 "+eS.tagName+" but finding "+b.length+"!");let e=document.createElement("div");n.appendChild(e);let t=P(b[0]),a=b[0].getElementsByTagName(eT.tagName);if(0==a.length)throw Error("Expecting 1 or more "+eT.tagName+" but finding 0!");{let n=new eS(t);for(let t=0;t<a.length;t++){let i=new eT(P(a[t])),s=N(ts);e.appendChild(s);let o=a[t].getElementsByTagName(ex.tagName);if(o.length>0){o.length>1&&console.warn("xml_bathGass.length="+o.length);let e=document.createElement("label");e.textContent=ex.tagName+": ",s.appendChild(e);let t=E(v(o[0])),n=new ex(P(o[0]),t);i.setBathGas(n);let a=c(Array.from(new Set(tc.keys())),ex.tagName,eT.tagName+"_"+ex.tagName,tr);a.value=n.value,a.addEventListener("change",e=>{e.target instanceof HTMLSelectElement&&(n.value=e.target.value,console.log("Set "+eT.tagName+"_"+ex.tagName+" to "+e.target.value),m(e.target))}),m(a),s.appendChild(a)}let l=a[t].getElementsByTagName(ev.tagName);if(l.length>0){l.length>1&&console.warn("xml_experimentRates.length="+l.length);let e=E(v(l[0])),t=new ev(P(l[0]),parseFloat(e));i.setExperimentRate(t);let n=d("number",eT.tagName+"_"+ev.tagName,tr,ta,e=>{e.target instanceof HTMLInputElement&&tC(t,e.target)},t.value.toString(),ev.tagName);s.appendChild(n)}tb(s,i),tT(s,i),tv(void 0,P(a[t]),s,eT.tagName,eT.tagName,tr),tS(s,i),ty(s,i),tw(s,i),t_(s,i),n.addPTpair(i),e.appendChild(s)}i.setPTs(n)}}return n}(t);n.id=w,y.appendChild(o({content:n,buttonLabel:"Conditions",buttonFontSize:te,boundary:tr,level:ta,contentDivId:w}))}let _=document.getElementById("modelParameters"),M="modelParametersDivId";if(s(M),null==_);else{let n=function(t){console.log(eL.tagName);let n=document.createElement("div"),a=L(t,eL.tagName),i=new eL(P(a));e.setModelParameters(i);let s=a.getElementsByTagName(ew.tagName);if(s.length>0){if(s.length>1)throw Error("Expecting 1 "+ew.tagName+" but finding "+s.length+"!");let e=P(s[0]),t=parseFloat(E(v(s[0]))),a=new ew(e,t);i.setGrainSize(a);let o=N(ti),l=d("number",eL.tagName+"_"+ew.tagName,tr,ti,e=>{e.target instanceof HTMLInputElement&&(tC(a,e.target),h(e.target))},t.toString(),ew.tagName);h(l.querySelector("input")),o.appendChild(l),tv(void 0,e,o,eL.tagName+"_"+ew.tagName,ew.tagName,tr),n.appendChild(o)}let o=a.getElementsByTagName(e2.tagName);if(o.length>0){if(o.length>1)throw Error("Expecting 1 "+e2.tagName+" but finding "+o.length+"!");let e=P(o[0]),t=parseFloat(E(v(o[0]))),a=new e2(e,t);i.setAutomaticallySetMaxEne(a);let s=d("number",eL.tagName+"_"+e2.tagName,tr,ta,e=>{e.target instanceof HTMLInputElement&&(tC(a,e.target),h(e.target))},t.toString(),e2.tagName);h(s.querySelector("input")),Object.assign(s.style,ti),n.appendChild(s),tv(void 0,e,n,eL.tagName+"_"+e2.tagName,e2.tagName,tr)}let l=a.getElementsByTagName(eM.tagName);if(l.length>0){if(l.length>1)throw Error("Expecting 1 "+eM.tagName+" but finding "+l.length+"!");let e=P(l[0]),t=new eM(e,parseFloat(E(v(l[0]))));i.setEnergyAboveTheTopHill(t);let a=d("number",eL.tagName+"_"+eM.tagName,tr,ts,e=>{e.target instanceof HTMLInputElement&&(tC(t,e.target),h(e.target))},t.value.toString(),eM.tagName);h(a.querySelector("input")),n.appendChild(a),tv(void 0,e,n,eL.tagName+"_"+eM.tagName,eM.tagName,tr)}let r=a.getElementsByTagName(eP.tagName);if(r.length>0){if(r.length>1)throw Error("Expecting 1 "+eP.tagName+" but finding "+r.length+"!");let e=P(r[0]),t=new eP(e,parseFloat(E(v(r[0]))));i.setMaxTemperature(t);let a=d("number",eL.tagName+"_"+eP.tagName,tr,ti,e=>{e.target instanceof HTMLInputElement&&(tC(t,e.target),h(e.target))},t.value.toString(),eP.tagName);h(a.querySelector("input")),n.appendChild(a),tv(void 0,e,n,eL.tagName+"_"+eP.tagName,eP.tagName,tr)}return n}(t);n.id=M,_.appendChild(o({content:n,buttonLabel:"Model Parameters",buttonFontSize:te,boundary:tr,level:ta,contentDivId:M}))}let k=document.getElementById("control"),F="controlDivId";if(s(F),null==k);else{let n=function(t){let n,a,s,o,l,r,g,u;console.log(e8.tagName);let p=document.createElement("div"),f=L(t,e8.tagName),x=new e8(P(f));e.setControl(x);let C=N(ti);p.appendChild(C);let b=f.getElementsByTagName(ez.tagName),T=document.createElement("label");C.appendChild(T),T.textContent=ez.tagName;let S=document.createElement("input");C.appendChild(S),S.type="checkbox",S.id=ez.tagName,1==b.length?(S.checked=!0,x.setCalculateRateCoefficientsOnly(new ez)):b.length>1&&console.warn("xml_calculateRateCoefficientsOnly.length="+b.length),S.addEventListener("change",e=>{e.target instanceof HTMLInputElement&&(e.target.checked?x.setCalculateRateCoefficientsOnly(new ez):x.removeCalculateRateCoefficientsOnly())});let y=N(ti);p.appendChild(y);let w=f.getElementsByTagName(eR.tagName),_=document.createElement("label");y.appendChild(_),_.textContent=eR.tagName;let M=document.createElement("input");y.appendChild(M),M.type="checkbox",M.id=eR.tagName,1==w.length?(M.checked=!0,x.setPrintCellDOS(new eR)):w.length>1&&console.warn("xml_printCellDOS.length="+w.length),M.addEventListener("change",e=>{e.target instanceof HTMLInputElement&&(e.target.checked?x.setPrintCellDOS(new eR):x.removePrintCellDOS())});let z=N(ti);p.appendChild(z);let R=f.getElementsByTagName(eI.tagName),I=document.createElement("label");z.appendChild(I),I.textContent=eI.tagName;let B=document.createElement("input");z.appendChild(B),B.type="checkbox",B.id=eI.tagName,1==R.length?(B.checked=!0,x.setPrintCellTransitionStateFlux(new eI)):R.length>1&&console.warn("xml_printCellTransitionStateFlux.length="+R.length),B.addEventListener("change",e=>{e.target instanceof HTMLInputElement&&(e.target.checked?x.setPrintCellTransitionStateFlux(new eI):x.removePrintCellTransitionStateFlux())});let k=N(ti);p.appendChild(k);let F=f.getElementsByTagName(eB.tagName),D=document.createElement("label");k.appendChild(D),D.textContent=eB.tagName;let H=document.createElement("input");k.appendChild(H),H.type="checkbox",H.id=eB.tagName,1==F.length?(H.checked=!0,x.setPrintReactionOperatorColumnSums(new eB)):F.length>1&&console.warn("xml_printReactionOperatorColumnSums.length="+F.length),H.addEventListener("change",e=>{e.target instanceof HTMLInputElement&&(e.target.checked?x.setPrintReactionOperatorColumnSums(new eB):x.removePrintReactionOperatorColumnSums())});let O=N(ti);p.appendChild(O);let G=f.getElementsByTagName(ek.tagName),A=document.createElement("label");O.appendChild(A),A.textContent=ek.tagName;let q=document.createElement("input");O.appendChild(q),q.type="checkbox",q.id=ek.tagName,1==G.length?(q.checked=!0,x.setPrintGrainBoltzmann(new ek)):G.length>1&&console.warn("xml_printGrainBoltzmann.length="+G.length),q.addEventListener("change",e=>{e.target instanceof HTMLInputElement&&(e.target.checked?x.setPrintGrainBoltzmann(new ek):x.removePrintGrainBoltzmann())});let U=N(ti);p.appendChild(U);let j=f.getElementsByTagName(eF.tagName),$=document.createElement("label");U.appendChild($),$.textContent=eF.tagName;let X=document.createElement("input");U.appendChild(X),X.type="checkbox",X.id=eF.tagName,1==j.length?(X.checked=!0,x.setPrintGrainDOS(new eF)):j.length>1&&console.warn("xml_printGrainDOS.length="+j.length),X.addEventListener("change",e=>{e.target instanceof HTMLInputElement&&(e.target.checked?x.setPrintGrainDOS(new eF):x.removePrintGrainDOS())});let V=N(ti);p.appendChild(V);let W=f.getElementsByTagName(eD.tagName),Y=document.createElement("label");V.appendChild(Y),Y.textContent=eD.tagName;let J=document.createElement("input");V.appendChild(J),J.type="checkbox",J.id=eD.tagName,1==W.length?(J.checked=!0,x.setPrintGrainkbE(new eD)):W.length>1&&console.warn("xml_printGrainkbE.length="+W.length),J.addEventListener("change",e=>{e.target instanceof HTMLInputElement&&(e.target.checked?x.setPrintGrainkbE(new eD):x.removePrintGrainkbE())});let K=N(ti);p.appendChild(K);let Q=f.getElementsByTagName(eH.tagName),Z=document.createElement("label");K.appendChild(Z),Z.textContent=eH.tagName;let ee=document.createElement("input");K.appendChild(ee),ee.type="checkbox",ee.id=eH.tagName,1==Q.length?(ee.checked=!0,x.setPrintGrainkfE(new eH)):Q.length>1&&console.warn("xml_printGrainkfE.length="+Q.length),ee.addEventListener("change",e=>{e.target instanceof HTMLInputElement&&(e.target.checked?x.setPrintGrainkfE(new eH):x.removePrintGrainkfE())});let et=N(ti);p.appendChild(et);let en=f.getElementsByTagName(eO.tagName),ea=document.createElement("label");et.appendChild(ea),ea.textContent=eO.tagName;let ei=document.createElement("input");et.appendChild(ei),ei.type="checkbox",ei.id=eO.tagName,1==en.length?(ei.checked=!0,x.setPrintTSsos(new eO)):en.length>1&&console.warn("xml_printTSsos.length="+en.length),ei.addEventListener("change",e=>{e.target instanceof HTMLInputElement&&(e.target.checked?x.setPrintTSsos(new eO):x.removePrintTSsos())});let es=N(ti);p.appendChild(es);let eo=f.getElementsByTagName(eG.tagName),el=document.createElement("label");es.appendChild(el),el.textContent=eG.tagName;let ed=document.createElement("input");es.appendChild(ed),ed.type="checkbox",ed.id=eG.tagName,1==eo.length?(ed.checked=!0,x.setPrintGrainedSpeciesProfile(new eG)):eo.length>1&&console.warn("xml_printGrainedSpeciesProfile.length="+eo.length),ed.addEventListener("change",e=>{e.target instanceof HTMLInputElement&&(e.target.checked?x.setPrintGrainedSpeciesProfile(new eG):x.removePrintGrainedSpeciesProfile())});let er=N(ti);p.appendChild(er);let eg=f.getElementsByTagName(eA.tagName),eh=document.createElement("label");er.appendChild(eh),eh.textContent=eA.tagName;let em=document.createElement("input");er.appendChild(em),em.type="checkbox",em.id=eA.tagName,1==eg.length?(em.checked=!0,x.setPrintGrainTransitionStateFlux(new eA)):eg.length>1&&console.warn("xml_printGrainTransitionStateFlux.length="+eg.length),em.addEventListener("change",e=>{e.target instanceof HTMLInputElement&&(e.target.checked?x.setPrintGrainTransitionStateFlux(new eA):x.removePrintGrainTransitionStateFlux())});let ec=N(ti);p.appendChild(ec);let eu=f.getElementsByTagName(eq.tagName),ep=document.createElement("label");ec.appendChild(ep),ep.textContent=eq.tagName;let eN=document.createElement("input");ec.appendChild(eN),eN.type="checkbox",eN.id=eq.tagName,1==eu.length?(eN.checked=!0,x.setPrintReactionOperatorSize(new eq)):eu.length>1&&console.warn("xml_printReactionOperatorSize.length="+eu.length),eN.addEventListener("change",e=>{e.target instanceof HTMLInputElement&&(e.target.checked?x.setPrintReactionOperatorSize(new eq):x.removePrintReactionOperatorSize())});let ef=N(ti);p.appendChild(ef);let ex=f.getElementsByTagName(eU.tagName),ev=document.createElement("label");ef.appendChild(ev),ev.textContent=eU.tagName;let eE=document.createElement("input");ef.appendChild(eE),eE.type="checkbox",eE.id=eU.tagName,1==ex.length?(eE.checked=!0,x.setPrintSpeciesProfile(new eU)):ex.length>1&&console.warn("xml_printSpeciesProfile.length="+ex.length),eE.addEventListener("change",e=>{e.target instanceof HTMLInputElement&&(e.target.checked?x.setPrintSpeciesProfile(new eU):x.removePrintSpeciesProfile())});let eC=N(ti);p.appendChild(eC);let eb=f.getElementsByTagName(ej.tagName),eT=document.createElement("label");eC.appendChild(eT),eT.textContent=ej.tagName;let eS=document.createElement("input");eC.appendChild(eS),eS.type="checkbox",eS.id=ej.tagName,1==eb.length?(eS.checked=!0,x.setPrintPhenomenologicalEvolution(new ej)):eb.length>1&&console.warn("xml_printPhenomenologicalEvolution.length="+eb.length),eS.addEventListener("change",e=>{e.target instanceof HTMLInputElement&&(e.target.checked?x.setPrintPhenomenologicalEvolution(new ej):x.removePrintPhenomenologicalEvolution())});let ey=N(ti);p.appendChild(ey);let ew=f.getElementsByTagName(e$.tagName),e_=document.createElement("label");ey.appendChild(e_),e_.textContent=e$.tagName;let eM=document.createElement("input");ey.appendChild(eM),eM.type="checkbox",eM.id=e$.tagName,1==ew.length?(eM.checked=!0,x.setPrintTunnelingCoefficients(new e$)):ew.length>1&&console.warn("xml_printTunnelingCoefficients.length="+ew.length),eM.addEventListener("change",e=>{e.target instanceof HTMLInputElement&&(e.target.checked?x.setPrintTunnelingCoefficients(new e$):x.removePrintTunnelingCoefficients())});let eP=N(ti);p.appendChild(eP);let eL=f.getElementsByTagName(eX.tagName),e6=document.createElement("label");eP.appendChild(e6),e6.textContent=eX.tagName;let e7=document.createElement("input");eP.appendChild(e7),e7.type="checkbox",e7.id=eX.tagName,1==eL.length?(e7.checked=!0,x.setPrintCrossingCoefficients(new eX)):eL.length>1&&console.warn("xml_printCrossingCoefficients.length="+eL.length),e7.addEventListener("change",e=>{e.target instanceof HTMLInputElement&&(e.target.checked?x.setPrintCrossingCoefficients(new eX):x.removePrintCrossingCoefficients())});let e3=N(ti);p.appendChild(e3);let e9=f.getElementsByTagName(eV.tagName),te=document.createElement("label");e3.appendChild(te),te.textContent=eV.tagName;let tt=document.createElement("input");e3.appendChild(tt),tt.type="checkbox",tt.id=eV.tagName,1==e9.length?(tt.checked=!0,x.setTestDOS(new eV)):e9.length>1&&console.warn("xml_testDOS.length="+e9.length),tt.addEventListener("change",e=>{e.target instanceof HTMLInputElement&&(e.target.checked?x.setTestDOS(new eV):x.removeTestDOS())});let tn=N(ti);p.appendChild(tn);let ts=f.getElementsByTagName(eW.tagName),to=document.createElement("label");tn.appendChild(to),to.textContent=eW.tagName;let tl=document.createElement("input");tn.appendChild(tl),tl.type="checkbox",tl.id=eW.tagName,1==ts.length?(tl.checked=!0,x.setTestRateConstants(new eW)):ts.length>1&&console.warn("xml_testRateConstants.length="+ts.length),tl.addEventListener("change",e=>{e.target instanceof HTMLInputElement&&(e.target.checked?x.setTestRateConstants(new eW):x.removeTestRateConstants())});let td=N(ti);p.appendChild(td);let tg=f.getElementsByTagName(eY.tagName),th=document.createElement("label");td.appendChild(th),th.textContent=eY.tagName;let tm=document.createElement("input");td.appendChild(tm),tm.type="checkbox",tm.id=eY.tagName,1==tg.length?(tm.checked=!0,x.setUseTheSameCellNumberForAllConditions(new eY)):tg.length>1&&console.warn("xml_useTheSameCellNumberForAllConditions.length="+tg.length),tm.addEventListener("change",e=>{e.target instanceof HTMLInputElement&&(e.target.checked?x.setUseTheSameCellNumberForAllConditions(new eY):x.removeUseTheSameCellNumberForAllConditions())});let tc=N(ti);p.appendChild(tc);let tu=f.getElementsByTagName(eK.tagName),tp=document.createElement("label");tc.appendChild(tp),tp.textContent=eK.tagName;let tN=document.createElement("input");tc.appendChild(tN),tN.type="checkbox",tN.id=eK.tagName,1==tu.length?(tN.checked=!0,x.setHideInactive(new eK)):tu.length>1&&console.warn("xml_hideInactive.length="+tu.length),tN.addEventListener("change",e=>{e.target instanceof HTMLInputElement&&(e.target.checked?x.setHideInactive(new eK):x.removeHideInactive())});let tf=N(ti);p.appendChild(tf);let tx=f.getElementsByTagName(eJ.tagName),tv=document.createElement("label");tf.appendChild(tv),tv.textContent=eJ.tagName;let tE=document.createElement("input");tf.appendChild(tE),tE.type="checkbox",tE.id=eJ.tagName,1==tx.length?(tE.checked=!0,x.setForceMacroDetailedBalance(new eJ)):tx.length>1&&console.warn("xml_forceMacroDetailedBalance.length="+tx.length),tE.addEventListener("change",e=>{e.target instanceof HTMLInputElement&&(e.target.checked?x.setForceMacroDetailedBalance(new eJ):x.removeForceMacroDetailedBalance())});let tb=N(ti);p.appendChild(tb);let tT=f.getElementsByTagName(e4.tagName),tS=document.createElement("label");tb.appendChild(tS),tS.textContent=e4.tagName;let ty=document.createElement("input");tb.appendChild(ty),ty.type="checkbox",ty.id=e4.tagName,1==tT.length?(ty.checked=!0,a=new e4(n=P(tT[0])),x.setTestMicroRates(a)):((n=new Map).set("Tmax",""),n.set("Tmin",""),n.set("Tstep",""),a=new e4(n)),ty.addEventListener("change",e=>{if(e.target instanceof HTMLInputElement){if(e.target.checked){x.setTestMicroRates(a);let e=e8.tagName+"_"+e4.tagName+"_Tmax",t=document.getElementById(e);null!=t&&t.remove();let n=a.getTmax(),s=d("number",e+"_input",tr,ta,e=>{e.target instanceof HTMLInputElement&&(i(e.target.value)?(a.setTmax(parseFloat(e.target.value)),console.log("Set Tmax to "+e.target.value)):(alert("Value is not numeric, resetting..."),e.target.value=n.toString()),h(e.target))},n.toString(),"Tmax");s.id=e,h(s.querySelector("input")),tb.appendChild(s);let o=e8.tagName+"_"+e4.tagName+"_tMin",l=document.getElementById(o);null!=l&&l.remove();let r=d("number",o+"_input",tr,ta,e=>{e.target instanceof HTMLInputElement&&(i(e.target.value)?(a.setTmin(parseFloat(e.target.value)),console.log("Set Tmin to "+e.target.value)):(alert("Value is not numeric, resetting..."),e.target.value=n.toString()),h(e.target))},a.getTmin().toString(),"Tmin");r.id=o,h(r.querySelector("input")),tb.appendChild(r);let g=e8.tagName+"_"+e4.tagName+"_tStep",m=document.getElementById(g);null!=m&&m.remove();let c=d("number",g+"_input",tr,ta,e=>{e.target instanceof HTMLInputElement&&(i(e.target.value)?(a.setTstep(parseFloat(e.target.value)),console.log("Set Tstep to "+e.target.value)):(alert("Value is not numeric, resetting..."),e.target.value=n.toString()),h(e.target))},a.getTstep().toString(),"Tstep");c.id=g,h(c.querySelector("input")),tb.appendChild(c)}else{x.removeTestMicroRates();let e=e8.tagName+"_"+e4.tagName+"_Tmax",t=document.getElementById(e);null!=t&&t.remove();let n=e8.tagName+"_"+e4.tagName+"_tMin",a=document.getElementById(n);null!=a&&a.remove();let i=e8.tagName+"_"+e4.tagName+"_tStep",s=document.getElementById(i);null!=s&&s.remove()}}});let tw=N(ti);p.appendChild(tw);let t_=f.getElementsByTagName(eQ.tagName),tM=document.createElement("label");tw.appendChild(tM),tM.textContent=eQ.tagName;let tP=document.createElement("input");tw.appendChild(tP),tP.type="checkbox",tP.id=eQ.tagName,1==t_.length?(tP.checked=!0,s=new eQ(P(t_[0]),E(v(t_[0]))),x.setCalcMethod(s)):(tP.checked=!1,s=new eQ(new Map,"")),tP.addEventListener("change",e=>{if(e.target instanceof HTMLInputElement){if(e.target.checked){x.setCalcMethod(s);let e=e8.tagName+"_"+eQ.tagName+"_select",t=document.getElementById(e);null!=t&&t.remove();let n=s.value,a=c(eQ.options,n,e,tr);a.addEventListener("change",e=>{e.target instanceof HTMLSelectElement&&(s.value=e.target.value,m(e.target))}),m(a),tw.appendChild(a)}else{x.removeCalcMethod();let e=e8.tagName+"_"+eQ.tagName+"_select",t=document.getElementById(e);null!=t&&t.remove()}}});let tL=N(ti);p.appendChild(tL);let tz=f.getElementsByTagName(eZ.tagName),tR=document.createElement("label");tL.appendChild(tR),tR.textContent=eZ.tagName;let tI=document.createElement("input");if(tL.appendChild(tI),tI.type="checkbox",tI.id=eZ.tagName,1==tz.length){tI.checked=!0;let e=parseFloat(E(v(tz[0])));o=new eZ(P(tz[0]),e),x.setEigenvalues(o);let t=e8.tagName+"_"+eZ.tagName+"_number",n=d("number",t+"_input",tr,ta,e=>{e.target instanceof HTMLInputElement&&(tC(o,e.target),h(e.target))},o.value.toString(),eZ.tagName);h(n.querySelector("input")),n.id=t,tL.appendChild(n)}else tI.checked=!1,o=new eZ(new Map,NaN);tI.addEventListener("change",e=>{if(e.target instanceof HTMLInputElement){if(e.target.checked){x.setEigenvalues(o);let e=e8.tagName+"_"+eZ.tagName+"_number",t=document.getElementById(e);null!=t&&t.remove();let n=d("number",e+"_input",tr,ta,e=>{e.target instanceof HTMLInputElement&&(tC(o,e.target),h(e.target))},o.value.toString(),eZ.tagName);h(n.querySelector("input")),n.id=e,tL.appendChild(n)}else{x.removeEigenvalues();let e=e8.tagName+"_"+eZ.tagName+"_number",t=document.getElementById(e);null!=t&&t.remove()}}});let tB=N(ti);p.appendChild(tB);let tk=f.getElementsByTagName(e0.tagName),tF=document.createElement("label");tB.appendChild(tF),tF.textContent=e0.tagName;let tD=document.createElement("input");if(tB.appendChild(tD),tD.type="checkbox",tD.id=e0.tagName,1==tk.length){tD.checked=!0;let e=parseFloat(E(v(tk[0])));l=new e0(P(tk[0]),e),x.setShortestTimeOfInterest(l);let t=e8.tagName+"_"+e0.tagName+"_number",n=d("number",t+"_input",tr,ti,e=>{e.target instanceof HTMLInputElement&&(tC(l,e.target),h(e.target))},l.value.toString(),e0.tagName);h(n.querySelector("input")),n.id=t,tB.appendChild(n)}else tD.checked=!1,l=new e0(new Map,NaN);tD.addEventListener("change",e=>{if(e.target instanceof HTMLInputElement){if(e.target.checked){x.setShortestTimeOfInterest(l);let e=e8.tagName+"_"+e0.tagName+"_number",t=document.getElementById(e);null!=t&&t.remove();let n=d("number",e+"_input",tr,ti,e=>{e.target instanceof HTMLInputElement&&(tC(l,e.target),h(e.target))},l.value.toString(),e0.tagName);h(n.querySelector("input")),n.id=e,tB.appendChild(n)}else{x.removeShortestTimeOfInterest();let e=e8.tagName+"_"+e0.tagName+"_number",t=document.getElementById(e);null!=t&&t.remove()}}});let tH=N(ti);p.appendChild(tH);let tO=f.getElementsByTagName(e1.tagName),tG=document.createElement("label");tH.appendChild(tG),tG.textContent=e1.tagName;let tA=document.createElement("input");if(tH.appendChild(tA),tA.type="checkbox",tA.id=e1.tagName,1==tO.length){tA.checked=!0;let e=parseFloat(E(v(tO[0])));r=new e1(P(tO[0]),e),x.setMaximumEvolutionTime(r);let t=e8.tagName+"_"+e1.tagName+"_number",n=d("number",t+"_input",tr,ti,e=>{e.target instanceof HTMLInputElement&&(tC(r,e.target),h(e.target))},r.value.toString(),e1.tagName);h(n.querySelector("input")),n.id=t,tH.appendChild(n)}else tA.checked=!1,r=new e1(new Map,NaN);tA.addEventListener("change",e=>{if(e.target instanceof HTMLInputElement){if(e.target.checked){x.setMaximumEvolutionTime(r);let e=e8.tagName+"_"+e1.tagName+"_number",t=document.getElementById(e);null!=t&&t.remove();let n=d("number",e+"_input",tr,ti,e=>{e.target instanceof HTMLInputElement&&(tC(r,e.target),h(e.target))},r.value.toString(),e1.tagName);h(n.querySelector("input")),n.id=e,tH.appendChild(n)}else{x.removeMaximumEvolutionTime();let e=e8.tagName+"_"+e1.tagName+"_number",t=document.getElementById(e);null!=t&&t.remove()}}});let tq=N(ti);p.appendChild(tq);let tU=f.getElementsByTagName(e2.tagName),tj=document.createElement("label");tq.appendChild(tj),tj.textContent=e2.tagName;let t$=document.createElement("input");if(tq.appendChild(t$),t$.type="checkbox",t$.id=e2.tagName,1==tU.length){t$.checked=!0;let e=parseFloat(E(v(tU[0])));g=new e2(P(tU[0]),e),x.setAutomaticallySetMaxEne(g)}else t$.checked=!1,g=new e2(new Map,NaN);t$.addEventListener("change",e=>{if(e.target instanceof HTMLInputElement){if(e.target.checked){x.setAutomaticallySetMaxEne(g);let e=e8.tagName+"_"+e2.tagName+"_number",t=document.getElementById(e);null!=t&&t.remove();let n=d("number",e+"_input",tr,ti,e=>{e.target instanceof HTMLInputElement&&(tC(g,e.target),h(e.target))},g.value.toString(),e2.tagName);h(n.querySelector("input")),n.id=e,tq.appendChild(n)}else{x.removeAutomaticallySetMaxEne();let e=e8.tagName+"_"+e2.tagName+"_number",t=document.getElementById(e);null!=t&&t.remove()}}});let tX=N(ti);p.appendChild(tX);let tV=f.getElementsByTagName(e5.tagName),tW=document.createElement("label");tX.appendChild(tW),tW.textContent=e5.tagName;let tY=document.createElement("input");if(tX.appendChild(tY),tY.type="checkbox",tY.id=e5.tagName,1==tV.length){tY.checked=!0;let e=parseFloat(E(v(tV[0])));u=new e5(P(tV[0]),e),x.setDiagramEnergyOffset(u);let t=e8.tagName+"_"+e5.tagName+"_number",n=d("number",t+"_input",tr,ti,e=>{e.target instanceof HTMLInputElement&&(tC(u,e.target),h(e.target))},u.value.toString(),e5.tagName);h(n.querySelector("input")),n.id=t,tX.appendChild(n)}else tY.checked=!1,u=new e5(new Map,NaN);return tY.addEventListener("change",e=>{if(e.target instanceof HTMLInputElement){if(e.target.checked){x.setDiagramEnergyOffset(u);let e=e8.tagName+"_"+e5.tagName+"_number",t=document.getElementById(e);null!=t&&t.remove();let n=d("number",e+"_input",tr,ti,e=>{e.target instanceof HTMLInputElement&&(tC(u,e.target),h(e.target))},u.value.toString(),e5.tagName);h(n.querySelector("input")),n.id=e,tX.appendChild(n)}else{x.removeDiagramEnergyOffset();let e=e8.tagName+"_"+e5.tagName+"_number",t=document.getElementById(e);null!=t&&t.remove()}}}),p}(t);n.id=F,k.appendChild(o({content:n,buttonLabel:"Control",buttonFontSize:te,boundary:tr,level:ta,contentDivId:F}))}!function(){for(var e=document.getElementsByClassName("collapsible"),t=0;t<e.length;t++)e[t].removeEventListener("click",l),e[t].addEventListener("click",l)}()}(new DOMParser().parseFromString(T,"text/xml"))}}};let S=n.slice(b,b+1048576);g.readAsText(S),b+=1048576;let y="saveButtonId";s(y);let w=u("Save",tr);w.id=y,w.addEventListener("click",tP),document.getElementById("menu").appendChild(w)}},t.click()}function tx(e,t,n,i,s,o,l){let r=i.getElementsByTagName(k.tagName);if(r.length>0){if(1!=r.length)throw Error("Expecting 1 "+k.tagName+" but finding "+r.length+"!");let a=C(r[0]),i=parseFloat(a),g=P(r[0]),m=new k(g,i);e.setProperty(m);let c=e.dictRef,u=d("number",n.id+"_"+e.dictRef,tr,l,e=>{e.target instanceof HTMLInputElement&&tC(m,e.target)},a,c),p=u.querySelector("input");h(p),p.addEventListener("change",t=>{a=t.target.value,(m=e.getProperty()).value=parseFloat(a),console.log("Set "+e.dictRef+" of "+n.id+" to "+a),h(p),e.dictRef==H.dictRef&&(i<tp&&(tp=i),i>tu&&(tu=i),tM())}),tv(t,g,u,n.id+"_"+e.dictRef+"_Select_Units",e.dictRef,o),s.appendChild(u)}else{let r=i.getElementsByTagName(F.tagName);if(r.length>0){if(1!=r.length)throw Error("Expecting 1 "+F.tagName+" but finding "+r.length+"!");let i=C(r[0]),g=a(i.split(/\s+/)),m=P(r[0]),c=new F(m,g);e.setProperty(c);let u=e.dictRef,p=d("text",n.id+"_"+e.dictRef,o,l,e=>{e.target instanceof HTMLInputElement&&tE(c,e.target)},i,u),N=p.querySelector("input");N.value=i,h(N),N.addEventListener("change",t=>{i=t.target.value,c=e.getProperty(),g=a(i.split(/\s+/)),c.values=g,console.log("Set "+e.dictRef+" of "+n.id+" to "+i),h(N)}),tv(t,m,p,n.id+"_"+e.dictRef+"_Select_Units",e.dictRef,o),s.appendChild(p)}else throw Error("Expecting "+k.tagName+" or "+F.tagName)}}function tv(e,t,n,a,i,s){if(void 0!=e){let o=function(e,t,n,a){let i=t.get("units");if(void 0!=i){let s=c(e,"Units",n,tr);return s.value=i,m(s),s.addEventListener("change",e=>{e.target instanceof HTMLSelectElement&&(t.set("units",e.target.value),console.log("Set "+a+" units to "+e.target.value)),m(s)}),s}}(e,t,a,i);void 0!=o&&(Object.assign(o.style,s),n.appendChild(o))}else{let e=t.get("units");if(void 0!=e){let t=f(e,s);n.appendChild(t)}}}function tE(e,t){let a=t.value.trim();if(""==a){alert("Empty input resetting..."),t.value=n(e.values," ");return}let s=a.split(/\s+/),o=[],l=!0;if(s.forEach(function(e){i(e)||(l=!1),o.push(parseFloat(e))}),!l){alert("An input is not a number, resetting..."),t.value=n(e.values," ");return}o.length==e.values.length?console.log("Changed "+e.tagName+' from: "'+a+'" to: "'+n(e.values," ")+'"'):(alert("Expecting "+e.values.length+" values for, but finding "+o.length+" resetting..."),t.value=n(e.values," "))}function tC(e,t){if(i(t.value)){let n=parseFloat(t.value);e.value=n,console.log("Value set to "+n)}else alert("Value is not numeric, resetting..."),t.value=e.value.toString()}function tb(e,t){let n=d("number",eT.tagName+"_P",tr,ta,e=>{e.target instanceof HTMLInputElement&&(i(e.target.value)?(t.setP(parseFloat(e.target.value)),console.log("Set P to "+e.target.value)):(alert("Value is not numeric, resetting..."),e.target.value=t.getP().toString()),h(e.target))},t.getP().toString(),"P"),a=n.querySelector("input");a.value=t.getP().toString(),h(a),e.appendChild(n)}function tT(e,t){let n=d("number",eT.tagName+"_T",tr,ta,e=>{e.target instanceof HTMLInputElement&&(i(e.target.value)?(t.setT(parseFloat(e.target.value)),console.log("Set T to "+e.target.value)):(alert("Value is not numeric, resetting..."),e.target.value=t.getT().toString()),h(e.target))},t.getT().toString(),"T"),a=n.querySelector("input");a.value=t.getT().toString(),h(a),e.appendChild(n)}function tS(e,t){let n=u("add "+em.tagName,tr);e.append(n),n.addEventListener("click",()=>{let a=document.createElement("label");a.textContent="excessReactantConc: ",e.appendChild(a);let i=r("number",eT.tagName+"_"+em.tagName,tr);i.value=NaN.toString(),i.addEventListener("change",e=>{e.target instanceof HTMLInputElement&&(t.setExcessReactantConc(e.target.value),console.log("Set excessReactantConc to "+e.target.value),h(e.target))}),h(i),e.appendChild(i);let s=u("âœ•",tr);s.addEventListener("click",()=>{e.removeChild(a),e.removeChild(i),e.removeChild(s),tS(e,t)}),e.appendChild(s),e.removeChild(n)})}function ty(e,t){let n=u("add percentExcessReactantConc",tr);e.appendChild(n),n.addEventListener("click",()=>{let n=document.createElement("label");n.textContent="percentExcessReactantConc: ",e.appendChild(n);let a=r("number",eT.tagName+"_percentExcessReactantConc",tr);a.value=NaN.toString(),a.addEventListener("change",e=>{e.target instanceof HTMLInputElement&&(t.setPercentExcessReactantConc(e.target.value),console.log("Set percentExcessReactantConc to "+e.target.value),h(e.target))}),h(a),e.appendChild(a)})}function tw(e,t){let n=u("add precision",tr);e.appendChild(n),n.addEventListener("click",()=>{let n=document.createElement("label");n.textContent="Precision: ",e.appendChild(n);let a=r("number",eT.tagName+"_precision",tr);a.value=NaN.toString(),a.addEventListener("change",e=>{e.target instanceof HTMLInputElement&&(t.setPrecision(e.target.value),console.log("Set Precision to "+e.target.value),h(e.target))}),h(a),e.appendChild(a)})}function t_(e,t){let n=u("add "+ex.tagName,tr);e.appendChild(n),n.addEventListener("click",()=>{let a=document.createElement("div"),i=new ex(new Map,"");t.setBathGas(i);let s=document.createElement("label");s.textContent=ex.tagName+": ",a.appendChild(s),e.insertBefore(a,n);let o=c(Array.from(new Set(tc.keys())),ex.tagName,eS.tagName+"_"+ex.tagName,tr);o.value=i.value,o.addEventListener("change",e=>{e.target instanceof HTMLSelectElement&&(i.value=e.target.value,console.log("Added "+e.target.value+" as a "+ex.tagName),m(e.target))}),m(o),a.appendChild(o),e.insertBefore(a,n),e.removeChild(n)})}function tM(){if(tN.size>0){let e=document.getElementById("reactions"),n="reactionsDiagram",a=document.getElementById(n);null!=a&&a.remove();let i=document.createElement("canvas");i.id=n,i.width=800,i.height=400,i.style.border="1px solid black",null!=i&&(i.style.display="block",function(e,n,a,i,s){var o;let l,d,r,g;console.log("drawReactionDiagram");let h="black",m=e.getContext("2d"),c=(m.font=a,(o=m.measureText("Aj")).actualBoundingBoxAscent+o.actualBoundingBoxDescent),u=[],p=new Set,N=new Set,f=new Set,x=new Map,v=new Map,E=0,C=Number.MAX_VALUE,b=Number.MIN_VALUE;tN.forEach(function(e,n){let a=e.getTransitionStates(),i=e.getReactantsLabel();if(void 0!=i){u.push(i),p.has(i)&&N.add(i);let t=e.getReactantsEnergy(tc);C=Math.min(C,t),b=Math.max(b,t),v.set(i,t),!x.has(i)&&(x.set(i,E),E++)}let s=e.getProductsLabel();if(void 0!=s){p.add(s);let n=e.getProductsEnergy(tc);if(C=Math.min(C,n),b=Math.max(b,n),v.set(s,n),x.has(s)){E--;let e=t(x,s);x.forEach(function(t,n){t>e&&x.set(n,t-1)}),void 0!=a&&(a.forEach(function(e){let t=e.getMolecule().ref;f.add(t),x.set(t,E),n=tc.get(t)?.getEnergy()??0,C=Math.min(C,n),b=Math.max(b,n),v.set(t,n),E++}),x.set(s,E),E++)}else void 0!=a&&a.forEach(function(e){let t=e.getMolecule().ref;f.add(t),x.set(t,E),n=tc.get(t)?.getEnergy()??0,C=Math.min(C,n),b=Math.max(b,n),v.set(t,n),E++}),x.set(s,E),E++}});let T=b-C,S=[];x.forEach(function(e,t){S[e]=t});let y=0,w=0,_=new Map,M=new Map,P=new Map,L=new Map,z=new Map,R=new Map;S.forEach(function(n){let i=t(v,n),s=(i-C)*e.height/(T+0)+0;g=Math.max(ef(m,i.toString(),a),ef(m,n,a)),d=y+g+5,r=l=s+4,_.set(n,[y,l]),M.set(n,[d,r]),p.has(n)&&(P.set(n,[y,l]),L.set(n,[d,r])),f.has(n)&&(z.set(n,[y,l]),R.set(n,[d,r])),y=d+10,w=d}),e.width=w;let I=e.height+4*c+8,B=e.height;e.height=I,m.transform(1,0,0,-1,0,I),tN.forEach(function(e,n){let a=e.getTransitionStates(),i=e.getReactantsLabel(),s=e.getProductsLabel(),o=t(M,i),l=t(P,s);a.length>0?a.forEach(function(e){let n=e.getMolecule().ref,a=t(z,n);ep(m,h,2,o[0],o[1],a[0],a[1]);let i=t(R,n);ep(m,h,2,i[0],i[1],l[0],l[1])}):ep(m,h,2,o[0],o[1],l[0],l[1])}),u.forEach(function(e){let n=t(v,e),s=(n-C)*B/(T+0)+0,o=t(_,e)[0],l=s+4;eu(m,"blue",i,o,l,t(M,e)[0],l,a,c,e,n.toString())}),p.forEach(function(e){let n=t(v,e),s=(n-C)*B/(T+0)+0,o=t(P,e)[0],l=s+i,d=t(L,e)[0],r=n.toString();N.has(e)?eu(m,"orange",i,o,l,d,l,a,c,e,r):eu(m,"green",i,o,l,d,l,a,c,e,r)}),f.forEach(function(e){let n=t(v,e),s=(n-C)*B/(T+0)+0,o=t(z,e)[0],l=s+i;eu(m,"red",i,o,l,t(R,e)[0],l,a,c,e,n.toString())})}(i,0,"14px Arial",4,2)),e.appendChild(i)}}function tP(){console.log("saveXML");let t=new Blob([e9.header,e.toXML("  ","  ")],{type:"text/plain"}),n=URL.createObjectURL(t),a=document.createElement("a");a.href=n;let i=e.getTitle()?.value;a.download=i.replace(/[^a-z0-9]/gi,"_")+".xml",document.body.appendChild(a),a.click(),document.body.removeChild(a)}document.addEventListener("DOMContentLoaded",()=>{let e=u("Load",tr);e.addEventListener("click",tf);let t=document.getElementById("menu");t&&t.appendChild(e),t.style.display="flex"}),window.setNumberArrayNode=tE,window.set=tC;
//# sourceMappingURL=index.2b97b273.js.map
