let e;function t(e,t){if(!e.has(t))throw Error(`Key ${t} not found in map`);return e.get(t)}function a(e,t){return void 0==t&&(t=", "),e.map(e=>null==e?"null":e.toString()).join(t)}function i(e){let t=[];for(let a=0;a<e.length;a++)s(e[a])&&t.push(parseFloat(e[a]));return t}function s(e){return""!==e&&!isNaN(Number(e))}function n(e){let t=document.getElementById(e);null!=t&&t.parentNode?.removeChild(t)}function o({content:e,buttonLabel:t,buttonFontSize:a="",boundary:i={marginLeft:"",marginTop:"",marginBottom:"",marginRight:""},level:s={marginLeft:"",marginTop:"",marginBottom:"",marginRight:""},contentDivId:n="",contentDivClassName:o=""}){let r=N(i);r.id=n,r.className=o;let d=document.createElement("button");return d.id=n+"Button",d.className="collapsible",d.innerText=`${t} \u{25BC}`,d.addEventListener("click",function(){d.innerText=d.innerText.includes("â–¼")?`${t} \u{25B2}`:`${t} \u{25BC}`}),d.style.fontSize=a,Object.assign(d.style,s),r.appendChild(d),r.appendChild(e),r}function r(){this.classList.toggle("active");let e=this.nextElementSibling;"block"===e.style.display?e.style.display="none":e.style.display="block"}function d(e,t,a,i,s,n,o,r,d){let g;let m=((g=l(e,t,a)).onchange=s,g.value=n,void 0!=r&&(g.style.fontSize=r),h(g),g);Object.assign(m.style,a);let c=f(o,a,d);c.htmlFor=t,Object.assign(c.style,a);let u=p(i);return u.appendChild(c),u.appendChild(m),u}function l(e,t,a){let i=document.createElement("input");return i.type=e,i.id=t,Object.assign(i.style,a),i}function g(e,t){let a="<"+t;if(e)for(let[t,i]of e)a+=" "+t+'="'+i+'"';return a+" />"}function h(e,t){void 0==t&&(t=4),e.style.width=e.value.length+t+"ch"}function m(e,t){void 0==t&&(t=6),e.style.width=e.value.length+t+"ch"}function c(e,t,a,i){let s=document.createElement("select");return e.forEach(e=>{s.name=t,s.id=a;let i=document.createElement("option");i.value=e,i.text=e,s.appendChild(i)}),Object.assign(s.style,i),s}function u(e,t){let a=document.createElement("button");return a.textContent=e,Object.assign(a.style,t),a}function N(e){let t=document.createElement("div");return Object.assign(t.style,e),t}function p(e){let t=N(e);return t.style.display="flex",t}function f(e,t,a){let i=document.createElement("label");return Object.assign(i.style,t),i.textContent=e,void 0!=a&&(i.style.fontSize=a),i}function x(e,t){let a=e.getElementsByTagName(t)[0];if(null==a)throw Error(t+" element not found");return a}function v(e){let t=e.childNodes;if(null==t)throw Error("Element has no childNodes");return t[0]}function E(e){let t=e.nodeValue;if(null==t)throw Error("nodeValue is null");return t}function b(e){let t=v(e);return t?E(t).trim():""}class T{constructor(e){this.tagName=e}toXML(e){let t=g(void 0,this.tagName);return e?"\n"+e+t:t}}class S extends T{constructor(e,t){super(t),this.attributes=e}toString(){let e=this.tagName+"(";return this.attributes&&this.attributes.forEach((t,a)=>{e+=`${a}(${t}), `}),e}toXML(e){let t="";for(let[a,i]of(void 0!=e&&(t+="\n"+e),t+="<"+this.tagName,this.attributes))t+=" "+a+'="'+i.toString()+'"';return t+" />"}}class C extends S{constructor(e,t,a){super(e,t),this.value=a}toString(){return super.toString()+`, ${this.value.toString()})`}toXML(e){return M(this.value.trim(),this.tagName,this.attributes,e,!1)}}class y extends S{constructor(e,t,a){super(e,t),this.value=a}toString(){return super.toString()+`, ${this.value.toString()})`}toXML(e){return M(this.value.toString().trim(),this.tagName,this.attributes,e,!1)}}class _ extends S{constructor(e,t,a,i){super(e,t),this.delimiter=",",this.values=a,void 0!=i&&(this.delimiter=i)}toString(){return super.toString()+`, ${this.values.toString()})`}setDelimiter(e){this.delimiter=e}toXML(e){return M(this.values.toString().replaceAll(",",this.delimiter),this.tagName,this.attributes,e,!1)}}class w extends S{constructor(e,t){super(e,t),this.nodes=new Map}addNode(e){this.nodes.set(this.nodes.size,e)}toString(){let e=super.toString();return this.nodes.forEach((t,a)=>{e+=`, ${t.toString()}`}),e+")"}toXML(e,t){let a;void 0!=e&&void 0!=t&&(a=t+e);let i="";if(this.nodes.size>0)return this.nodes.forEach(t=>{t instanceof w?i+=t.toXML(e,a):i+=t.toXML(a)}),M(i,this.tagName,this.attributes,t,!0);{let e=g(this.attributes,this.tagName);return void 0!=t?"\n"+t+e:e}}}function M(e,t,a,i,s){let n;return function(e,t,a){let i="";if(void 0!=a&&(i+="\n"+a),i+="<"+e,t)for(let[e,a]of t)i+=" "+e+'="'+a.toString()+'"';return i+">"}(t,a,i)+e+(n="",s&&void 0!=i&&(n+="\n"+i),n+"</"+t+">")}function P(e){let t=e.getAttributeNames(),a=new Map;return t.forEach(function(t){let i=e.getAttribute(t);null!=i&&a.set(t,i)}),a}function z(e,t){let a=e.getElementsByTagName(t);if(1!=a.length)throw Error("Expecting 1 "+t+" but finding "+a.length);return a[0]}class L extends S{static{this.tagName="atom"}constructor(e){super(e,L.tagName);let t=e.get("elementType");if(void 0==t)throw Error("elementType is undefined");this.elementType=t;let a=e.get("id");void 0==a&&(a=this.elementType),this.id=a}}class R extends w{static{this.tagName="atomArray"}constructor(e,t){super(e,R.tagName),t.forEach(e=>{this.nodes.set(this.nodes.size,e)})}}class I extends S{static{this.tagName="bond"}static{this.s_atomRefs2="atomRefs2"}static{this.s_id="id"}static{this.s_order="order"}constructor(e){super(e,I.tagName);let t=e.get(I.s_atomRefs2);if(void 0==t)throw Error(I.s_atomRefs2+" is undefined!");this.atomRefs2=t}setAtomRefs2(e){this.atomRefs2=e,this.attributes.set(I.s_atomRefs2,e)}getId(){return this.attributes.get(I.s_id)}setId(e){this.attributes.set(I.s_id,e)}getOrder(){let e=this.attributes.get(I.s_order);if(void 0!=e)return parseFloat(e)}setOrder(e){this.attributes.set(I.s_order,e.toString())}}class B extends w{static{this.tagName="bondArray"}constructor(e,t){super(e,B.tagName),this.bonds=t,t.forEach(e=>{this.nodes.set(this.nodes.size,e)})}getBond(e){return this.bonds[e]}getBonds(){return this.bonds}setBond(e,t){this.bonds[e]=t,this.nodes.set(e,t)}addBond(e){this.bonds.push(e),this.nodes.set(this.nodes.size,e)}removeBond(e){this.bonds.splice(e,1),this.nodes.delete(e)}getBondIds(){let e=new Set;return this.bonds.forEach(t=>{e.add(t.getId())}),e}}class k extends y{static{this.tagName="scalar"}static{this.s_units="units"}constructor(e,t){super(e,k.tagName,t)}updateUnits(e){if(e){let t=this.attributes.get(k.s_units);void 0!=t&&t!=e&&this.attributes.set(k.s_units,e)}}}class F extends _{static{this.tagName="array"}static{this.s_units="units"}constructor(e,t,a){super(e,F.tagName,t,a)}updateUnits(e){if(e){let t=this.attributes.get(F.s_units);void 0!=t&&t!=e&&(this.attributes.set(F.s_units,e),console.log("Units changed from "+t+" to "+e))}}}class D extends w{static{this.tagName="property"}static{this.s_dictRef="dictRef"}constructor(e,t){super(e,D.tagName);let a=e.get(D.s_dictRef);if(void 0==a)throw Error(D.s_dictRef+" is undefined!");this.dictRef=a,t&&this.nodes.set(0,t)}getProperty(){return this.nodes.get(0)}setProperty(e){this.nodes.set(0,e)}}class H extends D{static{this.dictRef="me:ZPE"}static{this.units=["kJ/mol","cm-1","kcal/mol","Hartree"]}constructor(e,t){super(e,t)}setUnits(e){this.getProperty().updateUnits(e)}}class O extends D{static{this.dictRef="me:frequenciesScaleFactor"}constructor(e,t){super(e,t)}}class G extends D{static{this.dictRef="me:vibFreqs"}constructor(e,t){super(e,t)}}class A extends D{static{this.dictRef="me:rotConsts"}static{this.units=["cm-1","GHz"]}constructor(e,t){super(e,t)}}class U extends D{static{this.dictRef="me:MW"}constructor(e,t){super(e,t)}}class $ extends D{static{this.dictRef="me:imFreqs"}constructor(e,t){super(e,t)}}class j extends w{static{this.tagName="propertyList"}constructor(e,t){super(e,j.tagName),this.index=new Map,void 0!=t&&t.forEach(e=>{this.nodes.set(this.nodes.size,e),this.index.set(e.dictRef,this.nodes.size-1)})}getProperty(e){let t=this.index.get(e);if(void 0!=t)return this.nodes.get(t);throw Error("Property "+e+" does not exist")}setProperty(e){let t=this.index.get(e.dictRef);void 0==t?(this.nodes.set(this.nodes.size,e),this.index.set(e.dictRef,this.nodes.size-1)):(console.log("Property "+e.dictRef+" already exists, updating..."),this.nodes.set(t,e))}}class q extends y{static{this.tagName="me:deltaEDown"}static{this.s_bathGas="bathGas"}static{this.s_units="units"}static{this.s_lower="lower"}static{this.s_upper="upper"}static{this.s_stepsize="stepsize"}constructor(e,t){super(e,q.tagName,t)}getBathGas(){return this.attributes.get(q.s_bathGas)}setBathGas(e){this.attributes.set(q.s_bathGas,e)}getUnits(){return this.attributes.get(q.s_units)}setUnits(e){this.attributes.set(q.s_units,e)}getLower(){return parseFloat(t(this.attributes,q.s_lower))}setLower(e){this.attributes.set(q.s_lower,e.toString())}getUpper(){return parseFloat(t(this.attributes,q.s_upper))}setUpper(e){this.attributes.set(q.s_upper,e.toString())}getStepsize(){return parseFloat(t(this.attributes,q.s_stepsize))}setStepsize(e){this.attributes.set(q.s_stepsize,e.toString())}setValue(e){this.value=e}}class X extends w{static{this.tagName="me:energyTransferModel"}constructor(e,t){super(e,X.tagName),void 0!=t&&t.forEach(e=>{this.nodes.set(this.nodes.size,e)})}getDeltaEDowns(){let e=[];return this.nodes.forEach(t=>{t instanceof q&&e.push(t)}),e}setDeltaEDowns(e){this.nodes.clear(),e.forEach(e=>{this.nodes.set(this.nodes.size,e)})}getDeltaEDown(e){if(e<0||e>=this.nodes.size)throw Error("index out of range");return this.nodes.get(e)}setDeltaEDown(e,t){this.nodes.set(e,t)}addDeltaEDown(e){return this.nodes.set(this.nodes.size,e),this.nodes.size-1}}class V extends S{static{this.tagName="me:DOSCMethod"}static{this.s_xsi_type="xsi:type"}constructor(e){if(super(e,V.tagName),void 0==e.get(V.s_xsi_type)){let t=e.get("name");if(void 0==t)throw Error("Neither xsi:type or name are defined.");e.set(V.s_xsi_type,t)}}getXsiType(){return this.attributes.get(V.s_xsi_type)}setXsiType(e){this.attributes.set(V.s_xsi_type,e)}}class W extends C{static{this.tagName="me:bondRef"}constructor(e,t){super(e,W.tagName,t)}}class Y extends S{static{this.tagName="me:PotentialPoint"}static{this.s_angle="angle"}static{this.s_potential="potential"}constructor(e){super(e,Y.tagName);let t=e.get(Y.s_angle);if(void 0==t)throw Error(Y.s_potential+" is undefined!");this.angle=parseFloat(t);let a=e.get(Y.s_potential);if(void 0==a)throw Error(Y.s_potential+" is undefined!");this.potential=parseFloat(a)}getAngle(){return this.angle}setAngle(e){this.angle=e,this.attributes.set(Y.s_angle,e.toString())}getPotential(){return this.potential}setPotential(e){this.potential=e,this.attributes.set(Y.s_potential,e.toString())}}class J extends w{static{this.tagName="me:HinderedRotorPotential"}static{this.formats=["numerical","analytical"]}static{this.units=["kJ/mol","cm-1","Hartree"]}static{this.s_format="format"}static{this.s_units="units"}static{this.s_expansionSize="expansionSize"}static{this.s_useSineTerms="useSineTerms"}constructor(e,t){super(e,J.tagName);let a=e.get(J.s_format);if(void 0==a)throw Error(J.s_format+" is undefined!");this.format=a;let i=e.get(J.s_units);if(void 0==i)throw Error(J.s_units+" is undefined!");this.units=i,void 0!=t&&t.forEach(e=>{this.nodes.set(this.nodes.size,e)});let s=e.get(J.s_expansionSize);if(void 0==s)throw Error(J.s_expansionSize+" is undefined!");this.expansionSize=parseFloat(s);let n=e.get(J.s_useSineTerms);if(void 0==n)throw Error(J.s_useSineTerms+" is undefined!");this.useSineTerms="yes"==n}getFormat(){return this.format}setFormat(e){this.format=e,this.attributes.set(J.s_format,e)}getUnits(){return this.units}setUnits(e){this.units=e,this.attributes.set(J.s_units,e)}getExpansionSize(){return this.expansionSize}setExpansionSize(e){this.expansionSize=e,this.attributes.set(J.s_expansionSize,e.toString())}getUseSineTerms(){return this.useSineTerms}setUseSineTerms(e){this.useSineTerms=e,this.attributes.set(J.s_useSineTerms,e?"yes":"no")}getPotentialPoint(e){return this.nodes.get(e)}setPotentialPoint(e,t){this.nodes.set(e,t)}setPotentialPoints(e){this.nodes.clear(),e.forEach(e=>{this.nodes.set(this.nodes.size,e)})}addPotentialPoint(e){return this.nodes.set(this.nodes.size,e),this.nodes.size-1}removePotentialPoint(e){this.nodes.delete(e)}}class K extends y{static{this.tagName="me:periodicity"}constructor(e,t){super(e,K.tagName,t)}}class Q extends w{static{this.tagName="me:ExtraDOSCMethod"}constructor(e,t,a,i){super(e,Q.tagName),this.index=new Map,t&&(this.nodes.set(this.nodes.size,t),this.index.set(W.tagName,this.nodes.size-1)),a&&(this.nodes.set(this.nodes.size,a),this.index.set(J.tagName,this.nodes.size-1)),i&&(this.nodes.set(this.nodes.size,i),this.index.set(K.tagName,this.nodes.size-1))}getBondRef(){let e=this.index.get(W.tagName);if(void 0!=e)return this.nodes.get(e)}setBondRef(e){let t=this.index.get(W.tagName);void 0!=t?this.nodes.set(t,e):(this.nodes.set(this.nodes.size,e),this.index.set(W.tagName,this.nodes.size-1))}getHinderedRotorPotential(){let e=this.index.get(J.tagName);if(void 0!=e)return this.nodes.get(e)}setHinderedRotorPotential(e){let t=this.index.get(J.tagName);void 0!=t?this.nodes.set(t,e):(this.nodes.set(this.nodes.size,e),this.index.set(J.tagName,this.nodes.size-1))}getPeriodicity(){let e=this.index.get(K.tagName);if(void 0!=e)return this.nodes.get(e)}setPeriodicity(e){let t=this.index.get(K.tagName);void 0!=t?this.nodes.set(t,e):(this.nodes.set(this.nodes.size,e),this.index.set(K.tagName,this.nodes.size-1))}}class Z extends y{static{this.tagName="me:reservoirSize"}constructor(e,t){super(e,Z.tagName,t)}}class ee extends w{static{this.tagName="molecule"}static{this.s_id="id"}static{this.s_description="description"}static{this.s_active="active"}constructor(e,t,a,i,s,n,o,r){super(e,ee.tagName),this.index=new Map;let d=e.get(ee.s_id);if(void 0==d)throw Error(ee.s_id+" is undefined");this.id=d;let l=0;t&&(this.nodes.set(l,t),t instanceof L?this.index.set(L.tagName,l):this.index.set(R.tagName,l),l++),a&&(this.nodes.set(l,a),this.index.set(B.tagName,l),l++),i&&(this.nodes.set(l,i),this.index.set(j.tagName,l),l++),s&&(this.nodes.set(l,s),this.index.set(X.tagName,l),l++),n&&(this.nodes.set(l,n),this.index.set(V.tagName,l)),o&&(this.nodes.set(l,o),this.index.set(Q.tagName,l)),r&&(this.nodes.set(l,r),this.index.set(Z.tagName,l))}getDescription(){return this.attributes.get(ee.s_description)}setDescription(e){this.attributes.set(ee.s_description,e)}getActive(){let e=this.attributes.get(ee.s_active);if(void 0!=e)return"true"==e}setActive(e){this.attributes.set(ee.s_active,e.toString())}getLabel(){let e=this.id,t=this.getDescription();return void 0!=t&&(e+=" ("+t+")"),this.getActive()&&(e+=" ("+ee.s_active+")"),e}getAttributesAsString(){return Array.from(this.attributes,([e,t])=>`${e}="${t}"`).join(", ")}getProperties(){let e=this.index.get(j.tagName);if(void 0!=e||void 0!=(e=this.index.get(D.tagName)))return this.nodes.get(e)}setProperties(e){let t=this.index.get(j.tagName);void 0==t?(this.index.set(j.tagName,this.nodes.size),this.addNode(e)):this.nodes.set(t,e)}getProperty(e){let t=this.getProperties();if(void 0!=t)return t instanceof j?t.getProperty(e):t}setProperty(e){let t=this.getProperties();void 0!=t?t instanceof j?t.setProperty(e):this.setProperties(t):this.setProperties(e)}getAtoms(){let e=this.index.get(L.tagName);if(void 0!=e||void 0!=(e=this.index.get(R.tagName)))return this.nodes.get(e)}getBonds(){let e=this.index.get(B.tagName);if(void 0!=e)return this.nodes.get(e)}getEnergyTransferModel(){let e=this.index.get(X.tagName);if(void 0!=e)return this.nodes.get(e)}setEnergyTransferModel(e){let t=this.index.get(X.tagName);void 0==t?(this.index.set(X.tagName,this.nodes.size),this.addNode(e)):this.nodes.set(t,e)}getDOSCMethod(){let e=this.index.get(V.tagName);if(void 0!=e)return this.nodes.get(e)}setDOSCMethod(e){let t=this.index.get(V.tagName);void 0==t?(this.index.set(V.tagName,this.nodes.size),this.addNode(e)):this.nodes.set(t,e)}getExtraDOSCMethod(){let e=this.index.get(Q.tagName);if(void 0!=e)return this.nodes.get(e)}setExtraDOSCMethod(e){let t=this.index.get(Q.tagName);void 0==t?(this.index.set(Q.tagName,this.nodes.size),this.addNode(e)):this.nodes.set(t,e)}getReservoirSize(){let e=this.index.get(Z.tagName);if(void 0!=e)return this.nodes.get(e)}setReservoirSize(e){let t=this.index.get(Z.tagName);void 0==t?(this.index.set(Z.tagName,this.nodes.size),this.addNode(e)):this.nodes.set(t,e)}getEnergy(){let e=this.getProperty(H.dictRef);if(void 0==e)throw console.log(this.toString()),Error(H.dictRef+" property not found!");return e.getProperty().value}}class et extends S{static{this.tagName="molecule"}constructor(e){super(e,et.tagName),this.ref=e.get("ref"),this.role=e.get("role")}setRole(e){this.role=e}}class ea extends w{static{this.tagName="reactant"}constructor(e,t){super(e,ea.tagName),this.addNode(t)}getMolecule(){return this.nodes.get(0)}}class ei extends w{static{this.tagName="product"}constructor(e,t){super(e,ei.tagName),this.addNode(t)}getMolecule(){return this.nodes.get(0)}}class es extends w{static{this.tagName="me:transitionState"}constructor(e,t){super(e,es.tagName),this.addNode(t)}getMolecule(){return this.nodes.get(0)}}class en extends y{static{this.tagName="me:preExponential"}constructor(e,t){super(e,en.tagName,t)}}class eo extends y{static{this.tagName="me:activationEnergy"}constructor(e,t){super(e,eo.tagName,t)}}class er extends y{static{this.tagName="me:TInfinity"}constructor(e,t){super(e,er.tagName,t)}}class ed extends y{static{this.tagName="me:nInfinity"}constructor(e,t){super(e,ed.tagName,t)}}class el extends w{static{this.tagName="me:MCRCMethod"}constructor(e){super(e,el.tagName)}}class eg extends el{static{this.xsiType="me:MesmerILT"}static{this.xsiType2="MesmerILT"}constructor(e,t,a,i,s){super(e),this.index=new Map,void 0!=t&&(this.index.set(en.tagName,this.index.size),this.addNode(t)),void 0!=a&&(this.index.set(eo.tagName,this.index.size),this.addNode(a)),void 0!=i&&(this.index.set(er.tagName,this.index.size),this.addNode(i)),void 0!=s&&(this.index.set(ed.tagName,this.index.size),this.addNode(s))}getPreExponential(){let e=this.index.get(en.tagName);if(void 0!=e)return this.nodes.get(e)}setPreExponential(e){let t=this.index.get(en.tagName);void 0==t?(this.index.set(en.tagName,this.nodes.size),this.addNode(e)):this.nodes.set(t,e)}getActivationEnergy(){let e=this.index.get(eo.tagName);if(void 0!=e)return this.nodes.get(e)}setActivationEnergy(e){let t=this.index.get(eo.tagName);void 0==t?(this.index.set(eo.tagName,this.nodes.size),this.addNode(e)):this.nodes.set(t,e)}getTInfinity(){let e=this.index.get(er.tagName);if(void 0!=e)return this.nodes.get(e)}setTInfinity(e){let t=this.index.get(er.tagName);void 0==t?(this.index.set(er.tagName,this.nodes.size),this.addNode(e)):this.nodes.set(t,e)}getNInfinity(){let e=this.index.get(ed.tagName);if(void 0!=e)return this.nodes.get(e)}setNInfinity(e){let t=this.index.get(ed.tagName);void 0==t?(this.index.set(ed.tagName,this.nodes.size),this.addNode(e)):this.nodes.set(t,e)}}class eh extends S{static{this.tagName="me:tunneling"}static{this.s_name="name"}constructor(e){super(e,eh.tagName)}getName(){return this.attributes.get(eh.s_name)}setName(e){this.attributes.set(eh.s_name,e)}}class em extends y{static{this.tagName="me:excessReactantConc"}constructor(e,t){super(e,em.tagName,t)}}class ec extends w{static{this.tagName="reaction"}static{this.s_id="id"}constructor(e,t,a,i,s,n,o){super(e,ec.tagName),this.index=new Map,this.reactantsIndex=new Map,this.productsIndex=new Map,this.transitionStatesIndex=new Map;let r=e.get(ec.s_id);if(void 0==r)throw Error(ec.s_id+" is undefined!");this.id=r,void 0!=t&&(t.forEach(e=>{this.reactantsIndex.set(e.getMolecule().ref,this.nodes.size),this.addNode(e)}),this.index.set(ea.tagName,this.reactantsIndex)),void 0!=a&&(a.forEach(e=>{this.productsIndex.set(e.getMolecule().ref,this.nodes.size),this.addNode(e)}),this.index.set(ei.tagName,this.productsIndex)),void 0!=i&&(this.index.set(eh.tagName,this.nodes.size),this.addNode(i)),void 0!=s&&(s.forEach(e=>{this.transitionStatesIndex.set(e.getMolecule().ref,this.nodes.size),this.addNode(e)}),this.index.set(es.tagName,this.transitionStatesIndex)),void 0!=n&&(this.index.set(el.tagName,this.nodes.size),this.addNode(n)),void 0!=o&&(this.index.set(em.tagName,this.nodes.size),this.addNode(o))}addToIndex(e,t){let a=this.index.get(e);if(void 0==a)this.index.set(e,this.nodes.size);else if(a instanceof Map)a.set(t.tagName,this.nodes.size);else{let i=new Map;i.set(this.nodes.get(a).ref,a),i.set(t.tagName,this.nodes.size),this.index.set(e,i)}}getReactants(){let e=this.index.get(ea.tagName);return void 0==e?[]:e instanceof Map?Array.from(e.values()).map(e=>this.nodes.get(e)):[this.nodes.get(e)]}setReactants(e){e.forEach(e=>{this.reactantsIndex.set(e.getMolecule().ref,this.nodes.size),this.addNode(e)}),this.index.set(ea.tagName,this.reactantsIndex)}getReactant(e){let t=this.reactantsIndex.get(e);if(void 0==t)throw Error(`Reactant with ref ${e} not found`);return this.nodes.get(t)}addReactant(e){this.reactantsIndex.set(e.getMolecule().ref,this.nodes.size),this.addNode(e)}removeReactant(e){let t=this.reactantsIndex.get(e);if(void 0==t)throw Error(`Reactant with ref ${e} not found`);this.nodes.delete(t),this.reactantsIndex.delete(e)}getProducts(){let e=this.index.get(ei.tagName);return void 0==e?[]:e instanceof Map?Array.from(e.values()).map(e=>this.nodes.get(e)):[this.nodes.get(e)]}setProducts(e){e.forEach(e=>{this.productsIndex.set(e.getMolecule().ref,this.nodes.size),this.addNode(e)}),this.index.set(ei.tagName,this.productsIndex)}getProduct(e){let t=this.productsIndex.get(e);if(void 0==t)throw Error(`Product with ref ${e} not found`);return this.nodes.get(t)}addProduct(e){this.productsIndex.set(e.getMolecule().ref,this.nodes.size),this.addNode(e)}removeProduct(e){let t=this.productsIndex.get(e);if(void 0==t)throw Error(`Product with ref ${e} not found`);this.nodes.delete(t),this.productsIndex.delete(e)}getTunneling(){let e=this.index.get(eh.tagName);if(void 0!=e)return this.nodes.get(e)}setTunneling(e){let t=this.index.get(eh.tagName);if(void 0==t)this.index.set(eh.tagName,this.nodes.size),this.addNode(e);else{if(t instanceof Map)throw Error("Tunneling is a map and it is assumed there would be only 1!");this.nodes.set(t,e)}}getTransitionStates(){let e=this.index.get(es.tagName);return void 0==e?[]:e instanceof Map?Array.from(e.values()).map(e=>this.nodes.get(e)):[this.nodes.get(e)]}setTransitionStates(e){e.forEach(e=>{this.transitionStatesIndex.set(e.getMolecule().ref,this.nodes.size),this.addNode(e)}),this.index.set(es.tagName,this.transitionStatesIndex)}getTransitionState(e){let t=this.transitionStatesIndex.get(e);if(void 0==t)throw Error(`Transition state with ref ${e} not found`);return this.nodes.get(t)}addTransitionState(e){this.transitionStatesIndex.set(e.getMolecule().ref,this.nodes.size),this.addNode(e)}removeTransitionState(e){let t=this.transitionStatesIndex.get(e);if(void 0==t)throw Error(`Transition State with ref ${e} not found`);this.nodes.delete(t),this.transitionStatesIndex.delete(e)}getMCRCMethod(){let e=this.index.get(el.tagName);if(void 0!=e)return this.nodes.get(e)}setMCRCMethod(e){let t=this.index.get(el.tagName);if(void 0==t)this.index.set(el.tagName,this.nodes.size),this.addNode(e);else{if(t instanceof Map)throw Error("MCRCMethod is a map and it is assumed there would be only 1!");this.nodes.set(t,e)}}getExcessReactantConc(){let e=this.index.get(em.tagName);if(void 0!=e)return this.nodes.get(e)}setExcessReactantConc(e){let t=this.index.get(em.tagName);if(void 0==t)this.index.set(em.tagName,this.nodes.size),this.addNode(e);else{if(t instanceof Map)throw Error("ExcessReactantConc is a map and it is assumed there would be only 1!");this.nodes.set(t,e)}}getReactantsLabel(){return this.getReactants().map(e=>e.getMolecule().ref).join(" + ")}getProductsLabel(){return this.getProducts().map(e=>e.getMolecule().ref).join(" + ")}getLabel(){return this.getReactantsLabel()+" -> "+this.getProductsLabel()}getReactantsEnergy(e){return Array.from(this.getReactants()).map(t=>{let a=e.get(t.getMolecule().ref);if(void 0==a)throw Error(`Molecule with ref ${t.getMolecule().ref} not found`);return a.getEnergy()}).reduce((e,t)=>e+t,0)}getProductsEnergy(e){return Array.from(this.getProducts()).map(t=>{let a=e.get(t.getMolecule().ref);if(void 0==a)throw Error(`Molecule with ref ${t.getMolecule().ref} not found`);return a.getEnergy()}).reduce((e,t)=>e+t,0)}get(e,t){if(this.index.has(e)){let a=this.index.get(e);if(void 0!=a){if(!(a instanceof Map))return this.nodes.get(a);{let e=a.get(t);if(void 0!=e)return this.nodes.get(e)}}}}}function eu(e,t,a,i,s,n,o,r,d,l,g){let h=i+(n-i)/2;ep(e,g,r,t,h-ef(e,g,r)/2,o+d),ep(e,l,r,t,h-ef(e,l,r)/2,o+3*d),eN(e,t,a,i,s,n,o)}function eN(e,t,a,i,s,n,o){e.beginPath(),e.strokeStyle=t,e.lineWidth=a,e.moveTo(i,s),e.lineTo(n,o),e.stroke()}function ep(e,t,a,i,s,n){e.save(),e.translate(s,n),e.scale(1,-1),e.font=a,e.fillStyle=i,e.fillText(t,0,0),e.restore()}function ef(e,t,a){return e.font=a,e.measureText(t).width}class ex extends C{static{this.tagName="me:bathGas"}constructor(e,t){super(e,ex.tagName,t)}}class ev extends y{static{this.tagName="me:experimentRate"}static{this.s_ref1="ref1"}static{this.s_ref2="ref2"}static{this.s_refReaction="refReaction"}static{this.s_error="error"}constructor(e,t){super(e,ev.tagName,t)}getRef1(){return this.attributes.get(ev.s_ref1)}setRef1(e){this.attributes.set(ev.s_ref1,e)}getRef2(){return this.attributes.get(ev.s_ref2)}setRef2(e){this.attributes.set(ev.s_ref2,e)}getRefReaction(){return this.attributes.get(ev.s_refReaction)}setRefReaction(e){this.attributes.set(ev.s_refReaction,e)}getError(){let e=this.attributes.get(ev.s_error);if(void 0!=e)return parseFloat(e)}setError(e){this.attributes.set(ev.s_error,e.toString())}}class eE extends y{static{this.tagName="me:experimentalYield"}static{this.s_ref="ref"}static{this.s_error="error"}static{this.s_yieldTime="yieldTime"}constructor(e,t){super(e,eE.tagName,t)}getRef(){return this.attributes.get(eE.s_ref)}setRef(e){this.attributes.set(eE.s_ref,e)}getError(){let e=this.attributes.get(eE.s_error);if(void 0!=e)return parseFloat(e)}setError(e){this.attributes.set(eE.s_error,e.toString())}getYieldTime(){let e=this.attributes.get(eE.s_yieldTime);if(e)return parseFloat(e)}setYieldTime(e){this.attributes.set(eE.s_yieldTime,e.toString())}}class eb extends y{static{this.tagName="me:experimentalEigenvalue"}static{this.s_EigenvalueID="EigenvalueID"}static{this.s_error="error"}constructor(e,t){super(e,eb.tagName,t)}getEigenvalueID(){return this.attributes.get(eb.s_EigenvalueID)}setEigenvalueID(e){this.attributes.set(eb.s_EigenvalueID,e)}getError(){let e=this.attributes.get(eb.s_error);if(void 0!=e)return parseFloat(e)}setError(e){this.attributes.set(eb.s_error,e.toString())}}class eT extends y{static{this.tagName="me:excessReactantConc"}static{this.s_percent="percent"}constructor(e,t){super(e,eT.tagName,t)}getPercent(){return this.attributes.get(eT.s_percent)}setPercent(e){this.attributes.set(eT.s_percent,e)}}class eS extends w{static{this.tagName="me:PTpair"}static{this.precisions=["d","dd","qd","double","double-double","quad-double"]}static{this.pressureUnits=["Torr","PPCC","atm","mbar","psi","mols/cc"]}static{this.s_P="P"}static{this.s_T="T"}static{this.s_precision="precision"}static{this.s_excessReactantConc="excessReactantConc"}static{this.s_percentExcessReactantConc="percentExcessReactantConc"}constructor(e,t,a,i,s){super(e,eS.tagName),this.index=new Map,void 0!=t&&(this.index.set(ex.tagName,this.nodes.size),this.addNode(t)),void 0!=a&&(this.index.set(ev.tagName,this.nodes.size),this.addNode(a)),void 0!=i&&(this.index.set(eE.tagName,this.nodes.size),this.addNode(i)),void 0!=s&&(this.index.set(eb.tagName,this.nodes.size),this.addNode(s))}getP(){let e=this.attributes.get(eS.s_P);return void 0!=e?parseFloat(e):NaN}setP(e){this.attributes.set(eS.s_P,e.toString())}getT(){let e=this.attributes.get(eS.s_T);return void 0!=e?parseFloat(e):NaN}setT(e){this.attributes.set(eS.s_T,e.toString())}getPrecision(){return this.attributes.get(eS.s_precision)}setPrecision(e){this.attributes.set(eS.s_precision,e)}getBathGas(){let e=this.index.get(ex.tagName);return void 0!=e?this.nodes.get(e):void 0}setBathGas(e){let t=this.index.get(ex.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(ex.tagName,this.nodes.size),this.addNode(e))}removeBathGas(){let e=this.index.get(ex.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(ex.tagName))}getExperimentRate(){let e=this.index.get(ev.tagName);return void 0!=e?this.nodes.get(e):void 0}setExperimentRate(e){let t=this.index.get(ev.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(ev.tagName,this.nodes.size),this.addNode(e))}removeExperimentRate(){let e=this.index.get(ev.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(ev.tagName))}getExcessReactantConc(){return this.attributes.get(eS.s_excessReactantConc)}setExcessReactantConc(e){this.attributes.set(eS.s_excessReactantConc,e)}getPercentExcessReactantConc(){return this.attributes.get(eS.s_percentExcessReactantConc)}setPercentExcessReactantConc(e){this.attributes.set(eS.s_percentExcessReactantConc,e)}}class eC extends w{static{this.tagName="me:PTs"}constructor(e,t){super(e,eC.tagName),void 0!=t?(t.forEach(e=>{this.addNode(e)}),this.pTpairs=t):this.pTpairs=[]}getPTpair(e){return this.pTpairs[e]}setPTpair(e,t){this.nodes.set(e,t),this.pTpairs[e]=t}addPTpair(e){return this.addNode(e),this.pTpairs.push(e),this.nodes.size-1}setPTpairs(e){this.nodes.clear(),e.forEach(e=>{this.addNode(e),this.pTpairs.push(e)})}removePTpair(e){this.nodes.delete(e),this.pTpairs.splice(e,1)}}class ey extends w{static{this.tagName="me:conditions"}constructor(e,t,a){super(e,ey.tagName),this.index=new Map,this.bathGasesIndex=new Map,this.bathGases=new Set,void 0!=t&&(this.index.set(ex.tagName,this.nodes.size),t.forEach(e=>{this.bathGasesIndex.set(e.value,this.nodes.size),this.addNode(e),this.bathGases.add(e)})),void 0!=a&&(this.index.set(eC.tagName,this.nodes.size),this.addNode(a))}getBathGases(){return this.bathGases}addBathGas(e){this.bathGases.has(e)||(this.bathGases.add(e),this.bathGasesIndex.set(e.value,this.nodes.size),this.addNode(e))}removeBathGas(e){this.bathGases.has(e)?(this.bathGases.delete(e),this.nodes.delete(this.bathGasesIndex.get(e.value))):console.warn("Conditions.removeBathGas: bathGas not found to remove.")}getPTs(){let e=this.index.get(eC.tagName);if(void 0!=e)return this.nodes.get(e)}setPTs(e){let t=this.index.get(eC.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eC.tagName,this.nodes.size),this.addNode(e))}}class e_ extends y{static{this.tagName="me:grainSize"}constructor(e,t){super(e,e_.tagName,t)}}class ew extends y{static{this.tagName="me:automaticallySetMaxEne"}constructor(e,t){super(e,ew.tagName,t)}}class eM extends y{static{this.tagName="me:energyAboveTheTopHill"}constructor(e,t){super(e,eM.tagName,t)}}class eP extends y{static{this.tagName="me:maxTemperature"}constructor(e,t){super(e,eP.tagName,t)}}class ez extends w{static{this.tagName="me:modelParameters"}constructor(e,t,a,i,s){super(e,ez.tagName),this.index=new Map,void 0!=t&&(this.index.set(e_.tagName,this.nodes.size),this.addNode(t)),void 0!=a&&(this.index.set(ew.tagName,this.nodes.size),this.addNode(a)),void 0!=i&&(this.index.set(eM.tagName,this.nodes.size),this.addNode(i)),void 0!=s&&(this.index.set(eP.tagName,this.nodes.size),this.addNode(s))}getGrainSize(){let e=this.index.get(e_.tagName);if(e)return this.nodes.get(e)}setGrainSize(e){let t=this.index.get(e_.tagName);t?this.nodes.set(t,e):(this.index.set(e_.tagName,this.nodes.size),this.addNode(e))}getAutomaticallySetMaxEne(){let e=this.index.get(ew.tagName);if(e)return this.nodes.get(e)}setAutomaticallySetMaxEne(e){let t=this.index.get(ew.tagName);t?this.nodes.set(t,e):(this.index.set(ew.tagName,this.nodes.size),this.addNode(e))}getEnergyAboveTheTopHill(){let e=this.index.get(eM.tagName);if(e)return this.nodes.get(e)}setEnergyAboveTheTopHill(e){let t=this.index.get(eM.tagName);t?this.nodes.set(t,e):(this.index.set(eM.tagName,this.nodes.size),this.addNode(e))}getMaxTemperature(){let e=this.index.get(eP.tagName);if(e)return this.nodes.get(e)}setMaxTemperature(e){let t=this.index.get(eP.tagName);t?this.nodes.set(t,e):(this.index.set(eP.tagName,this.nodes.size),this.addNode(e))}}class eL extends T{static{this.tagName="me:calculateRateCoefficientsOnly"}constructor(){super(eL.tagName)}}class eR extends T{static{this.tagName="me:printCellDOS"}constructor(){super(eR.tagName)}}class eI extends T{static{this.tagName="me:printCellTransitionStateFlux"}constructor(){super(eI.tagName)}}class eB extends T{static{this.tagName="me:printReactionOperatorColumnSums"}constructor(){super(eB.tagName)}}class ek extends T{static{this.tagName="me:printGrainBoltzmann"}constructor(){super(ek.tagName)}}class eF extends T{static{this.tagName="me:printGrainDOS"}constructor(){super(eF.tagName)}}class eD extends T{static{this.tagName="me:printGrainkbE"}constructor(){super(eD.tagName)}}class eH extends T{static{this.tagName="me:printGrainkfE"}constructor(){super(eH.tagName)}}class eO extends T{static{this.tagName="me:printTSsos"}constructor(){super(eO.tagName)}}class eG extends T{static{this.tagName="me:printGrainedSpeciesProfile"}constructor(){super(eG.tagName)}}class eA extends T{static{this.tagName="me:printGrainTransitionStateFlux"}constructor(){super(eA.tagName)}}class eU extends T{static{this.tagName="me:printReactionOperatorSize"}constructor(){super(eU.tagName)}}class e$ extends T{static{this.tagName="me:printSpeciesProfile"}constructor(){super(e$.tagName)}}class ej extends T{static{this.tagName="me:printPhenomenologicalEvolution"}constructor(){super(ej.tagName)}}class eq extends T{static{this.tagName="me:printTunnelingCoefficients"}constructor(){super(eq.tagName)}}class eX extends T{static{this.tagName="me:printCrossingCoefficients"}constructor(){super(eX.tagName)}}class eV extends T{static{this.tagName="me:testDOS"}constructor(){super(eV.tagName)}}class eW extends T{static{this.tagName="me:testRateConstants"}constructor(){super(eW.tagName)}}class eY extends T{static{this.tagName="me:useTheSameCellNumberForAllConditions"}constructor(){super(eY.tagName)}}class eJ extends T{static{this.tagName="me:ForceMacroDetailedBalance"}constructor(){super(eJ.tagName)}}class eK extends T{static{this.tagName="me:hideInactive"}constructor(){super(eK.tagName)}}class eQ extends C{static{this.tagName="me:calcMethod"}static{this.options=["simpleCalc","gridSearch","fitting","marquardt","analyticalRepresentation","ThermodynamicTable","sensitivityAnalysis"]}constructor(e,t){super(e,eQ.tagName,t)}}class eZ extends y{static{this.tagName="me:eigenvalues"}constructor(e,t){super(e,eZ.tagName,t)}}class e0 extends y{static{this.tagName="me:shortestTimeOfInterest"}constructor(e,t){super(e,e0.tagName,t)}}class e1 extends y{static{this.tagName="me:MaximumEvolutionTime"}constructor(e,t){super(e,e1.tagName,t)}}class e2 extends y{static{this.tagName="me:automaticallySetMaxEne"}constructor(e,t){super(e,e2.tagName,t)}}class e5 extends y{static{this.tagName="me:diagramEnergyOffset"}constructor(e,t){super(e,e5.tagName,t)}}class e4 extends S{static{this.tagName="me:testMicroRates"}constructor(e){super(e,e4.tagName),this.tMin=parseFloat(e.get("Tmin")),this.tMax=parseFloat(e.get("Tmax")),this.tStep=parseFloat(e.get("Tstep"))}getTmin(){return this.tMin}setTmin(e){this.tMin=e,this.attributes?.set("Tmin",e.toString())}getTmax(){return this.tMax}setTmax(e){this.tMax=e,this.attributes?.set("Tmax",e.toString())}getTstep(){return this.tStep}setTstep(e){this.tStep=e,this.attributes?.set("Tstep",e.toString())}}class e8 extends w{static{this.tagName="me:control"}constructor(e){super(e,e8.tagName),this.index=new Map}getCalculateRateCoefficientsOnly(){let e=this.index.get(eL.tagName);if(void 0!=e)return this.nodes.get(e)}setCalculateRateCoefficientsOnly(e){let t=this.index.get(eL.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eL.tagName,this.nodes.size),this.addNode(e))}removeCalculateRateCoefficientsOnly(){let e=this.index.get(eL.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(eL.tagName))}getPrintCellDOS(){let e=this.index.get(eR.tagName);if(void 0!=e)return this.nodes.get(e)}setPrintCellDOS(e){let t=this.index.get(eR.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eR.tagName,this.nodes.size),this.addNode(e))}removePrintCellDOS(){let e=this.index.get(eR.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(eR.tagName))}getPrintCellTransitionStateFlux(){let e=this.index.get(eI.tagName);if(void 0!=e)return this.nodes.get(e)}setPrintCellTransitionStateFlux(e){let t=this.index.get(eI.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eI.tagName,this.nodes.size),this.addNode(e))}removePrintCellTransitionStateFlux(){let e=this.index.get(eI.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(eI.tagName))}getPrintReactionOperatorColumnSums(){let e=this.index.get(eB.tagName);if(void 0!=e)return this.nodes.get(e)}setPrintReactionOperatorColumnSums(e){let t=this.index.get(eB.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eB.tagName,this.nodes.size),this.addNode(e))}removePrintReactionOperatorColumnSums(){let e=this.index.get(eB.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(eB.tagName))}getPrintGrainBoltzmann(){let e=this.index.get(ek.tagName);if(void 0!=e)return this.nodes.get(e)}setPrintGrainBoltzmann(e){let t=this.index.get(ek.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(ek.tagName,this.nodes.size),this.addNode(e))}removePrintGrainBoltzmann(){let e=this.index.get(ek.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(ek.tagName))}getPrintGrainDOS(){let e=this.index.get(eF.tagName);if(void 0!=e)return this.nodes.get(e)}setPrintGrainDOS(e){let t=this.index.get(eF.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eF.tagName,this.nodes.size),this.addNode(e))}removePrintGrainDOS(){let e=this.index.get(eF.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(eF.tagName))}getPrintGrainkbE(){let e=this.index.get(eD.tagName);if(void 0!=e)return this.nodes.get(e)}setPrintGrainkbE(e){let t=this.index.get(eD.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eD.tagName,this.nodes.size),this.addNode(e))}removePrintGrainkbE(){let e=this.index.get(eD.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(eD.tagName))}getPrintGrainkfE(){let e=this.index.get(eH.tagName);if(void 0!=e)return this.nodes.get(e)}setPrintGrainkfE(e){let t=this.index.get(eH.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eH.tagName,this.nodes.size),this.addNode(e))}removePrintGrainkfE(){let e=this.index.get(eH.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(eH.tagName))}getPrintTSsos(){let e=this.index.get(eO.tagName);if(void 0!=e)return this.nodes.get(e)}setPrintTSsos(e){let t=this.index.get(eO.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eO.tagName,this.nodes.size),this.addNode(e))}removePrintTSsos(){let e=this.index.get(eO.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(eO.tagName))}getPrintGrainedSpeciesProfile(){let e=this.index.get(eG.tagName);if(void 0!=e)return this.nodes.get(e)}setPrintGrainedSpeciesProfile(e){let t=this.index.get(eG.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eG.tagName,this.nodes.size),this.addNode(e))}removePrintGrainedSpeciesProfile(){let e=this.index.get(eG.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(eG.tagName))}getPrintGrainTransitionStateFlux(){let e=this.index.get(eA.tagName);if(void 0!=e)return this.nodes.get(e)}setPrintGrainTransitionStateFlux(e){let t=this.index.get(eA.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eA.tagName,this.nodes.size),this.addNode(e))}removePrintGrainTransitionStateFlux(){let e=this.index.get(eA.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(eA.tagName))}getPrintReactionOperatorSize(){let e=this.index.get(eU.tagName);if(void 0!=e)return this.nodes.get(e)}setPrintReactionOperatorSize(e){let t=this.index.get(eU.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eU.tagName,this.nodes.size),this.addNode(e))}removePrintReactionOperatorSize(){let e=this.index.get(eU.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(eU.tagName))}getPrintSpeciesProfile(){let e=this.index.get(e$.tagName);if(void 0!=e)return this.nodes.get(e)}setPrintSpeciesProfile(e){let t=this.index.get(e$.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(e$.tagName,this.nodes.size),this.addNode(e))}removePrintSpeciesProfile(){let e=this.index.get(e$.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(e$.tagName))}getPrintPhenomenologicalEvolution(){let e=this.index.get(ej.tagName);if(void 0!=e)return this.nodes.get(e)}setPrintPhenomenologicalEvolution(e){let t=this.index.get(ej.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(ej.tagName,this.nodes.size),this.addNode(e))}removePrintPhenomenologicalEvolution(){let e=this.index.get(ej.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(ej.tagName))}getPrintTunnelingCoefficients(){let e=this.index.get(eq.tagName);if(void 0!=e)return this.nodes.get(e)}setPrintTunnelingCoefficients(e){let t=this.index.get(eq.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eq.tagName,this.nodes.size),this.addNode(e))}removePrintTunnelingCoefficients(){let e=this.index.get(eq.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(eq.tagName))}getPrintCrossingCoefficients(){let e=this.index.get(eX.tagName);if(void 0!=e)return this.nodes.get(e)}setPrintCrossingCoefficients(e){let t=this.index.get(eX.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eX.tagName,this.nodes.size),this.addNode(e))}removePrintCrossingCoefficients(){let e=this.index.get(eX.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(eX.tagName))}getTestDOS(){let e=this.index.get(eV.tagName);if(void 0!=e)return this.nodes.get(e)}setTestDOS(e){let t=this.index.get(eV.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eV.tagName,this.nodes.size),this.addNode(e))}removeTestDOS(){let e=this.index.get(eV.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(eV.tagName))}getTestRateConstants(){let e=this.index.get(eW.tagName);if(void 0!=e)return this.nodes.get(e)}setTestRateConstants(e){let t=this.index.get(eW.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eW.tagName,this.nodes.size),this.addNode(e))}removeTestRateConstants(){let e=this.index.get(eW.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(eW.tagName))}getUseTheSameCellNumberForAllConditions(){let e=this.index.get(eY.tagName);if(void 0!=e)return this.nodes.get(e)}setUseTheSameCellNumberForAllConditions(e){let t=this.index.get(eY.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eY.tagName,this.nodes.size),this.addNode(e))}removeUseTheSameCellNumberForAllConditions(){let e=this.index.get(eY.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(eY.tagName))}getHideInactive(){let e=this.index.get(eK.tagName);if(void 0!=e)return this.nodes.get(e)}setHideInactive(e){let t=this.index.get(eK.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eK.tagName,this.nodes.size),this.addNode(e))}removeHideInactive(){let e=this.index.get(eK.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(eK.tagName))}getForceMacroDetailedBalance(){let e=this.index.get(eJ.tagName);if(void 0!=e)return this.nodes.get(e)}setForceMacroDetailedBalance(e){let t=this.index.get(eJ.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eJ.tagName,this.nodes.size),this.addNode(e))}removeForceMacroDetailedBalance(){let e=this.index.get(eJ.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(eJ.tagName))}getCalcMethod(){let e=this.index.get(eQ.tagName);if(void 0!=e)return this.nodes.get(e)}setCalcMethod(e){let t=this.index.get(eQ.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eQ.tagName,this.nodes.size),this.addNode(e))}removeCalcMethod(){let e=this.index.get(eQ.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(eQ.tagName))}getEigenvalues(){let e=this.index.get(eZ.tagName);if(void 0!=e)return this.nodes.get(e)}setEigenvalues(e){let t=this.index.get(eZ.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eZ.tagName,this.nodes.size),this.addNode(e))}removeEigenvalues(){let e=this.index.get(eZ.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(eZ.tagName))}getShortestTimeOfInterest(){let e=this.index.get(e0.tagName);if(void 0!=e)return this.nodes.get(e)}setShortestTimeOfInterest(e){let t=this.index.get(e0.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(e0.tagName,this.nodes.size),this.addNode(e))}removeShortestTimeOfInterest(){let e=this.index.get(e0.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(e0.tagName))}getMaximumEvolutionTime(){let e=this.index.get(e1.tagName);if(void 0!=e)return this.nodes.get(e)}setMaximumEvolutionTime(e){let t=this.index.get(e.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(e.tagName,this.nodes.size),this.addNode(e))}removeMaximumEvolutionTime(){let e=this.index.get(e1.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(e1.tagName))}getAutomaticallySetMaxEne(){let e=this.index.get(e2.tagName);if(void 0!=e)return this.nodes.get(e)}setAutomaticallySetMaxEne(e){let t=this.index.get(e2.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(e2.tagName,this.nodes.size),this.addNode(e))}removeAutomaticallySetMaxEne(){let e=this.index.get(e2.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(e2.tagName))}getDiagramEnergyOffset(){let e=this.index.get(e5.tagName);if(void 0!=e)return this.nodes.get(e)}setDiagramEnergyOffset(e){let t=this.index.get(e5.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(e5.tagName,this.nodes.size),this.addNode(e))}removeDiagramEnergyOffset(){let e=this.index.get(e5.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(e5.tagName))}getTestMicroRates(){let e=this.index.get(e4.tagName);if(void 0!=e)return this.nodes.get(e)}setTestMicroRates(e){let t=this.index.get(e4.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(e4.tagName,this.nodes.size),this.addNode(e))}removeTestMicroRates(){let e=this.index.get(e4.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(e4.tagName))}}class e6 extends C{static{this.tagName="me:title"}constructor(e,t){super(e,e6.tagName,t)}}class e7 extends w{static{this.tagName="moleculeList"}constructor(e,t){super(e,e7.tagName),this.index=new Map,void 0!=t&&t.forEach(e=>{this.nodes.set(this.nodes.size,e),this.index.set(e.id,this.nodes.size-1)})}getMolecule(e){let t=this.index.get(e);if(void 0!=t)return this.nodes.get(t)}removeMolecule(e){let t=this.index.get(e);void 0!=t&&(this.nodes.delete(t),this.index.delete(e))}addMolecule(e){let t=this.index.get(e.id);void 0!==t?(this.nodes.set(t,e),console.log("Replaced molecule with id "+e.id)):(this.nodes.set(this.nodes.size,e),this.index.set(e.id,this.nodes.size-1))}}class e3 extends w{static{this.tagName="reactionList"}constructor(e,t){super(e,e3.tagName),this.index=new Map,void 0!=t&&t.forEach(e=>{this.nodes.set(this.nodes.size,e),this.index.set(e.id,this.nodes.size-1)})}getReaction(e){let t=this.index.get(e);if(void 0!=t)return this.nodes.get(t)}removeReaction(e){let t=this.index.get(e);void 0!=t&&(this.nodes.delete(t),this.index.delete(e))}addReaction(e){let t=this.index.get(e.id);void 0!==t?(this.nodes.set(t,e),console.log("Replaced reaction with id "+e.id)):(this.nodes.set(this.nodes.size,e),this.index.set(e.id,this.nodes.size-1))}}class e9 extends w{static{this.tagName="me:mesmer"}static{this.header=`<?xml version="1.0" encoding="utf-8" ?>
<?xml-stylesheet type='text/xsl' href='../../mesmer2.xsl' media='other'?>
<?xml-stylesheet type='text/xsl' href='../../mesmer1.xsl' media='screen'?>`}constructor(e,t,a,i,s,n,o){super(e,e9.tagName),this.index=new Map,void 0!=t&&(this.index.set(e6.tagName,this.nodes.size),this.addNode(t)),void 0!=a&&(this.index.set(e7.tagName,this.nodes.size),this.addNode(a)),void 0!=i&&(this.index.set(e3.tagName,this.nodes.size),this.addNode(i)),void 0!=s&&(this.index.set(ey.tagName,this.nodes.size),this.addNode(s)),void 0!=n&&(this.index.set(ez.tagName,this.nodes.size),this.addNode(n)),void 0!=o&&(this.index.set(e8.tagName,this.nodes.size),this.addNode(o))}getTitle(){let e=this.index.get(e6.tagName);if(void 0!=e)return this.nodes.get(e)}setTitle(e){let t=this.index.get(e6.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(e6.tagName,this.nodes.size),this.addNode(e))}getMoleculeList(){let e=this.index.get(e7.tagName);if(void 0!=e)return this.nodes.get(e)}setMoleculeList(e){let t=this.index.get(e7.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(e7.tagName,this.nodes.size),this.addNode(e))}getReactionList(){let e=this.index.get(e3.tagName);if(void 0!=e)return this.nodes.get(e)}setReactionList(e){let t=this.index.get(e3.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(e3.tagName,this.nodes.size),this.addNode(e))}getConditions(){let e=this.index.get(ey.tagName);if(void 0!=e)return this.nodes.get(e)}setConditions(e){let t=this.index.get(ey.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(ey.tagName,this.nodes.size),this.addNode(e))}getModelParameters(){let e=this.index.get(ez.tagName);if(void 0!=e)return this.nodes.get(e)}setModelParameters(e){let t=this.index.get(ez.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(ez.tagName,this.nodes.size),this.addNode(e))}getControl(){let e=this.index.get(e8.tagName);if(void 0!=e)return this.nodes.get(e)}setControl(e){let t=this.index.get(e8.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(e8.tagName,this.nodes.size),this.addNode(e))}}let te="1.5em",tt="1.25em",ta="1.0em",ti={marginTop:"1px",marginBottom:"1px"},ts={marginLeft:"25px",marginTop:"1px",marginBottom:"1px"},tn={marginLeft:"50px",marginTop:"1px",marginBottom:"1px"},to={marginLeft:"75px",marginTop:"1px",marginBottom:"1px"},tr={marginLeft:"100px",marginTop:"1px",marginBottom:"1px"},td={marginLeft:"125px",marginTop:"1px",marginBottom:"1px"},tl={marginLeft:"1px",marginTop:"1px",marginBottom:"1px",marginRight:"1px"},tg="remove",th=new Map,tm=-1/0,tc=1/0,tu=new Map;function tN(){let t=document.createElement("input");t.type="file",t.onchange=function(){if(t.files){for(let e=0;e<t.files.length;e++)console.log("inputElement.files["+e+"]="+t.files[e]);let a=t.files[0];console.log(a.name);let i=a.name,g=new FileReader,T=0,S="";g.onload=function(t){if(null==t.target)throw Error("Event target is null");if(S+=t.target.result,null!=a){if(T<a.size){let e=a.slice(T,T+1048576);g.readAsText(e),T+=1048576}else{var C;let t,a,g;C=S=S.trim(),t=document.getElementById("xml"),n("xmlHeading"),(a=document.createElement("h2")).textContent=i,t.appendChild(a),n("xmlParagraph"),(g=document.createElement("pre")).textContent=C,t.appendChild(g),function(t){console.log("parse: "+t);let a=z(t,e9.tagName);e=new e9(P(a));let i=t.getElementsByTagName(e6.tagName);if(1!=i.length)throw Error("Multiple "+e6.tagName+" tags found");{let t=i[0].childNodes[0].nodeValue.trim(),a=new e6(P(i[0]),t),s=document.getElementById("title"),o=a.value;e.setTitle(a);let r="titleId";n(r);let l=d("text",r+"Input",tl,ti,e=>{e.target instanceof HTMLInputElement&&(a.value=e.target.value,console.log(a.tagName+" changed to "+a.value),h(e.target))},o,"Title",te);l.id=r,s.parentNode?.insertBefore(l,s)}let g=document.getElementById("molecules"),T="moleculesDivId";if(n(T),null==g);else{let a=function(e){let t=document.createElement("div"),a=z(e,e7.tagName),i=new Set;if(a.childNodes.forEach(function(e){i.add(e.nodeName)}),1!=i.size&&!(2==i.size&&i.has("#text")))throw console.error("moleculeListTagNames:"),i.forEach(e=>console.error(e)),Error("Additional tag names in moleculeList:");if(!i.has(ee.tagName))throw Error('Expecting tags with "'+ee.tagName+'" tagName but there are none!');let n=a.getElementsByTagName(ee.tagName);console.log("Number of molecules="+n.length);for(let e=0;e<n.length;e++){let a,i,r=document.createElement("div"),g=P(n[e]),u=new Set,N=n[e].childNodes;for(let e=0;e<N.length;e++){let t=N[e];u.has(t.nodeName)?"#text"!=t.nodeName&&console.warn("Another ChildNode with nodeName="+t.nodeName):u.add(t.nodeName)}let x=n[e].getElementsByTagName(R.tagName);if(x.length>1)throw Error("Expecting 1 or 0 "+R.tagName+" but finding "+x.length+"!");if(1==x.length){let e=x[0],t=e.getElementsByTagName(L.tagName);if(t.length<2)throw Error("Expecting 2 or more atoms in "+R.tagName+", but finding "+t.length+"!");let i=[];for(let e=0;e<t.length;e++)i.push(new L(P(t[e])));a=new R(P(e),i),u.delete(R.tagName)}else{let t=n[e].getElementsByTagName(L.tagName);if(1==t.length)a=new L(P(t[0]));else if(t.length>1)throw Error("Expecting 1 "+L.tagName+" but finding "+t.length+". Should these be in an "+R.tagName+"?")}u.delete(L.tagName);let T=n[e].getElementsByTagName(B.tagName);if(T.length>1)throw Error("Expecting 1 or 0 "+B.tagName+" but finding "+T.length+"!");if(1==T.length){let e=T[0],t=e.getElementsByTagName(I.tagName),a=[];for(let e=0;e<t.length;e++)a.push(new I(P(t[e])));i=new B(P(e),a),u.delete(B.tagName)}else{let t=n[e].getElementsByTagName(I.tagName);if(1==t.length)i=new I(P(t[0]));else if(t.length>1)throw Error("Expecting 1 "+I.tagName+" but finding "+t.length+". Should these be in a "+B.tagName+"?")}u.delete(I.tagName);let S=new ee(g,a,i);th.set(S.id,S);let C=n[e].getElementsByTagName(j.tagName);if(C.length>1)throw Error("Expecting 1 or 0 "+j.tagName+" but finding "+C.length+"!");if(1==C.length){let e=document.createElement("div"),t=S.id+"_"+j.tagName+"_",a=o({content:e,buttonLabel:j.tagName,buttonFontSize:ta,boundary:tl,level:tn,contentDivId:t});r.appendChild(a);let i=new j(P(C[0]));S.setProperties(i);let s=C[0].getElementsByTagName(D.tagName);for(let t=0;t<s.length;t++){let a=new D(P(s[t]));i.setProperty(a),S.setProperties(i),a.dictRef==H.dictRef?tp(a,H.units,S,s[t],e,tl,to):a.dictRef==A.dictRef?tp(a,A.units,S,s[t],e,tl,to):tp(a,void 0,S,s[t],e,tl,to)}u.delete(j.tagName)}else{let t=n[e].getElementsByTagName(D.tagName);if(1!=t.length)throw Error("Expecting 1 "+D.tagName+" but finding "+t.length+". Should these be in a "+j.tagName+"?");let a=new D(P(t[0]));S.setProperties(a),a.dictRef==H.dictRef?tp(a,H.units,S,t[0],r,tl,tn):a.dictRef==A.dictRef?tp(a,A.units,S,t[0],r,tl,tn):tp(a,void 0,S,t[0],r,tl,tn),u.delete(D.tagName)}let y=n[e].getElementsByTagName(X.tagName);if(y.length>0){if(y.length>1)throw Error("Expecting 1 or 0 "+X.tagName+" but finding "+y.length+"!");(function(e,t,a,i,s){let n=a.getElementsByTagName(q.tagName);if(n.length>0){let a=document.createElement("div"),s=t.id+"_"+X.tagName,r=o({content:a,buttonLabel:X.tagName,buttonFontSize:ta,boundary:tl,level:tn,contentDivId:s});i.appendChild(r);let l=[];for(let e=0;e<n.length;e++){let i=b(n[e]),s=parseFloat(i),o=new q(P(n[e]),s);l.push(o);let r=q.tagName,g=t.id+"_"+X.tagName+"_"+q.tagName+"_"+e,m=d("number",g,tl,to,t=>{t.target instanceof HTMLInputElement&&(tv(o,t.target),i=t.target.value,l[e].setValue(parseFloat(i)),console.log("Set "+g+" to "+i),h(t.target))},i,r);a.appendChild(m);let c=document.createElement("label");c.textContent="cm-1",m.appendChild(c)}e.setDeltaEDowns(l),t.setEnergyTransferModel(e)}})(new X(P(y[0])),S,y[0],r,0),u.delete(X.tagName)}let _=n[e].getElementsByTagName(V.tagName);if(_.length>0){if(_.length>1)throw Error("Expecting 1 or 0 "+V.tagName+" but finding "+_.length+"!");(function(e,t,a){let i=document.createElement("label");i.textContent=V.tagName+": ";let s=document.createElement("div");s.appendChild(i);let n=c(["ClassicalRotors","me:QMRotors","QMRotors"],"DOSCMethod",t.id+"_Select_DOSCMethod",tl);n.value=e.getXsiType(),n.addEventListener("change",t=>{t.target instanceof HTMLSelectElement&&(e.setXsiType(t.target.value),console.log("Set DOSCMethod to "+t.target.value))}),t.setDOSCMethod(e),s.appendChild(n),Object.assign(s.style,tn),a.appendChild(s)})(new V(P(_[0])),S,r),u.delete(V.tagName)}let w=n[e].getElementsByTagName(Q.tagName);if(w.length>0){if(1!=w.length)throw Error("Expecting only 1 extra DOSCMethod, but there are "+w.length);let e=new Q(P(_[0])),t=document.createElement("div"),a=S.id+"_"+Q.tagName+"_",i=o({content:t,buttonLabel:Q.tagName,buttonFontSize:ta,boundary:tl,level:tn,contentDivId:a});r.appendChild(i);let n=w[0].getElementsByTagName(W.tagName);if(n.length>0){if(1!=n.length)throw Error("Expecting only 1 bondRef, but there are "+n.length);let a=p(to),i=document.createElement("label");i.textContent=W.tagName+": ",a.appendChild(i);let s=new W(P(n[0]),E(v(n[0])));e.setBondRef(s);let o=c(S.getBonds().getBondIds(),s.value,S.id+"_"+W.tagName,tl);o.addEventListener("change",e=>{e.target instanceof HTMLSelectElement&&(s.value=e.target.value,m(e.target))}),m(o),a.appendChild(o),t.appendChild(a)}let g=w[0].getElementsByTagName(J.tagName);if(g.length>0){if(1!=g.length)throw Error("Expecting only 1 HinderedRotorPotential, but there are "+g.length);let a=P(g[0]),i=new J(a),n=p(tl),r=S.id+"_"+V.tagName+"_"+J.tagName,d=o({content:n,buttonLabel:J.tagName,buttonFontSize:ta,boundary:tl,level:to,contentDivId:r});t.appendChild(d);let u=f("Format:",tr);n.appendChild(u);let N=c(J.formats,i.format,S.id+"_"+J.tagName,tl);N.addEventListener("change",e=>{e.target instanceof HTMLSelectElement&&(i.format=e.target.value,m(e.target))}),m(N),n.appendChild(N);let x=f("Units:",tl);n.appendChild(x),tf(J.units,a,n,S.id+"_"+V.tagName+"_"+J.tagName,J.tagName,tl);let v=f("Expansion size:",tl);n.appendChild(v);let E=l("number",S.id+"_"+V.tagName+"_"+J.tagName+"_expansionSize",tl);E.value=i.getExpansionSize().toString(),E.addEventListener("change",e=>{e.target instanceof HTMLInputElement&&(s(e.target.value)?i.setExpansionSize(parseInt(e.target.value)):(alert("Expansion size input is not a number, resetting..."),E.value=i.getExpansionSize().toString()),h(E))}),E.value=i.getExpansionSize().toString(),h(E),n.appendChild(E);let b=f("Use sine terms:",tl);n.appendChild(b);let T=l("checkbox",S.id+"_"+V.tagName+"_"+J.tagName+"_useSineTerms",tl);T.checked=i.getUseSineTerms(),T.addEventListener("change",e=>{e.target instanceof HTMLInputElement&&i.setUseSineTerms(e.target.checked)}),n.appendChild(T);let C=document.createElement("div"),y=S.id+"_"+V.tagName+"_"+J.tagName+"_"+Y.tagName,_=o({content:C,buttonLabel:Y.tagName,buttonFontSize:ta,boundary:tl,level:tr,contentDivId:y});n.appendChild(_);let w=[],M=g[0].getElementsByTagName(Y.tagName);for(let e=0;e<M.length;e++){let t=new Y(P(M[e]));w.push(t);let a=p(td);_.appendChild(a);let i=f("Angle:",tl);a.appendChild(i);let n=l("number",S.id+"_"+Y.tagName+"_angle",tl);n.addEventListener("change",e=>{e.target instanceof HTMLInputElement&&(s(e.target.value)?(parseFloat(e.target.value),t.setAngle(parseFloat(e.target.value))):(alert("Angle input is not a number, resetting..."),n.value=t.getAngle().toString()),h(n))}),n.value=t.getAngle().toString(),h(n),a.appendChild(n);let o=f("Potential:",tl);a.appendChild(o);let r=l("number",S.id+"_"+Y.tagName+"_potential",tl);r.addEventListener("change",e=>{if(e.target instanceof HTMLInputElement){if(s(e.target.value)){let a=parseFloat(e.target.value);t.setPotential(a),console.log("Set "+Y.tagName+" to "+a.toString())}else alert("Potential input is not a number, resetting..."),r.value=t.getPotential().toString();h(r)}}),r.value=t.getPotential().toString(),h(r),a.appendChild(r),C.appendChild(a)}_.appendChild(C),i.setPotentialPoints(w),e.setHinderedRotorPotential(i)}let N=_[0].getElementsByTagName(K.tagName);if(N.length>0){if(1!=N.length)throw Error("Expecting only 1 Periodicity, but there are "+N.length);let a=E(v(N[0])),i=new K(P(N[0]),parseFloat(a));e.setPeriodicity(i);let n=d("number",S.id+"_"+K.tagName,tl,to,t=>{if(t.target instanceof HTMLInputElement){if(s(a=t.target.value)){let t=parseFloat(a);i.value=t,e.getPeriodicity().value=t,console.log("Set "+K.tagName+" to "+t)}else alert("Periodicity input is not a number, resetting..."),t.target.value=i.value.toString()}},a,K.tagName);t.appendChild(n)}S.setExtraDOSCMethod(e),u.delete(Q.tagName)}u.delete(Z.tagName);let M=n[e].getElementsByTagName(Z.tagName);if(M.length>0){if(1!=M.length)throw Error("Expecting only 1 reservoirSize, but there are "+M.length);let e=E(v(M[0])),t=parseFloat(e),a=new Z(P(M[0]),t);S.setReservoirSize(a);let i=d("number",S.id+"_"+Z.tagName,tl,tn,e=>{e.target instanceof HTMLInputElement&&(a.value=parseFloat(e.target.value),h(e.target))},e,Z.tagName);r.appendChild(i)}u.delete("#text"),u.size>0&&(console.warn("There are additional unexpected moleculeTagNames:"),u.forEach(e=>console.warn(e)));let z=document.createElement("div");z.id=S.id+"_molstar",r.appendChild(z);let k=o({content:r,buttonLabel:S.getLabel(),buttonFontSize:tt,boundary:tl,level:ts,contentDivId:S.tagName+"_"+S.id});t.appendChild(k)}return t}(t);a.id=T,g.appendChild(o({content:a,buttonLabel:"Molecules",buttonFontSize:te,boundary:tl,level:ti,contentDivId:T})),e.setMoleculeList(new e7(P(a),Array.from(th.values())))}let S=document.getElementById("reactions"),C="reactionsDivId";if(n(C),null==S);else{let a=function(e){let t=p(tl),a=z(e,e3.tagName),i=new Set;if(a.childNodes.forEach(function(e){i.add(e.nodeName)}),1!=i.size&&!(2==i.size&&i.has("#text")))throw console.error("reactionListTagNames:"),i.forEach(e=>console.error(e)),Error("Additional tag names in reactionList:");if(!i.has(ec.tagName))throw Error('Expecting tags with "'+ec.tagName+'" tagName but there are none!');let s=a.getElementsByTagName(ec.tagName);console.log("Number of reactions="+s.length);for(let e=0;e<s.length;e++){let a=N(tl),i=P(s[e]),n=new Set,r=s[e].childNodes;for(let e=0;e<r.length;e++){let t=r[e];n.has(t.nodeName)?"#text"!=t.nodeName&&console.warn("Another ChildNode with nodeName="+t.nodeName):n.add(t.nodeName)}let l=new ec(i);tu.set(l.id,l);let g=s[e].getElementsByTagName(ea.tagName);if(n.delete(ea.tagName),g.length>0){let e=document.createElement("div"),t=[];for(let a=0;a<g.length;a++){let i=new et(P(x(g[a],ee.tagName))),s=new ea(P(g[a]),i);t.push(s);let n=document.createElement("div"),o=document.createElement("label");o.textContent=i.ref+" role: ",n.appendChild(o);let r=c(["deficientReactant","excessReactant","modelled"],"Role",i.ref+"_Select_Role",tl);r.value=i.role,r.addEventListener("change",e=>{e.target instanceof HTMLSelectElement&&(i.setRole(e.target.value),console.log("Set Role to "+e.target.value))}),n.appendChild(r),Object.assign(n.style,to),e.appendChild(n)}l.setReactants(t);let i=o({content:e,buttonLabel:"Reactants",buttonFontSize:ta,boundary:tl,level:tn,contentDivId:l.id+"_"+ea.tagName});a.appendChild(i)}let m=s[e].getElementsByTagName(ei.tagName);if(n.delete(ei.tagName),m.length>0){let e=document.createElement("div"),t=[];for(let a=0;a<m.length;a++){let i=new et(P(x(m[a],ee.tagName))),s=new ei(P(m[a]),i);t.push(s);let n=["modelled","sink"],o=function(e,t,a,i,s,n){let o=N(n),r=f(e,s);o.appendChild(r);let d=document.createElement("select");return o.appendChild(d),t.forEach(e=>{d.name=a,d.id=i;let t=document.createElement("option");t.value=e,t.text=e,d.appendChild(t)}),o}(i.ref+" role:",n,i.ref+"_Select_Role","Role",tl,to),r=o.querySelector("select");r.value=i.role,r.addEventListener("change",e=>{e.target instanceof HTMLSelectElement&&(i.setRole(e.target.value),console.log("Set Role to "+e.target.value))}),e.appendChild(o)}l.setProducts(t);let i=o({content:e,buttonLabel:"Products",buttonFontSize:ta,boundary:tl,level:tn,contentDivId:l.id+"_"+ei.tagName});a.appendChild(i)}let u=s[e].getElementsByTagName(eh.tagName);if(u.length>0){if(u.length>1)throw Error("Expecting 1 "+eh.tagName+" but finding "+u.length+"!");let e=new eh(P(u[0]));l.setTunneling(e);let t=document.createElement("div"),i=document.createElement("label");i.textContent=eh.tagName+": ",t.appendChild(i);let s=c(["Eckart","WKB"],"Tunneling",l.id+"_Select_Tunneling",tl);s.value=e.getName(),s.addEventListener("change",t=>{t.target instanceof HTMLSelectElement&&(e.setName(t.target.value),console.log("Set Tunneling to "+t.target.value))}),t.appendChild(s),Object.assign(t.style,tn),a.appendChild(t)}let p=s[e].getElementsByTagName(es.tagName);if(p.length>0){let e=document.createElement("div"),t=[];for(let a=0;a<p.length;a++){let i=new et(P(x(p[a],ee.tagName))),s=new es(P(p[a]),i);t.push(s);let n=f(i.ref+" role: transitionState",to);e.appendChild(n)}l.setTransitionStates(t);let i=o({content:e,buttonLabel:"Transition States",buttonFontSize:ta,boundary:tl,level:tn,contentDivId:l.id+"_"+es.tagName});a.appendChild(i)}let T=s[e].getElementsByTagName(el.tagName);if(T.length>0){if(T.length>1)throw Error("Expecting 1 "+el.tagName+" but finding "+T.length+"!");{let e,t=document.createElement("div"),i=P(T[0]),s=i.get("name");if(void 0==s||s==eg.xsiType2){let s=i.get("xsi:type");if(e=new eg(i),s==eg.xsiType||s==eg.xsiType2){let i=T[0].getElementsByTagName(en.tagName);if(null!=i&&null!=i[0]){let a=b(i[0]),s=parseFloat(a),n=P(i[0]),o=new en(n,s);e.setPreExponential(o);let r=en.tagName,g=l.id+"_"+eg.tagName+"_"+en.tagName,m=d("number",g,tl,to,e=>{e.target instanceof HTMLInputElement&&tv(o,e.target)},a,r);t.appendChild(m);let c=m.querySelector("input");c.value=a,h(c),c.addEventListener("change",e=>{a=e.target.value,o.value=parseFloat(a),console.log("Set "+g+" to "+a),h(c)}),tf(void 0,n,m,l.id+"_"+eg.xsiType+"_"+en.tagName,en.tagName,tl),t.appendChild(m)}let s=T[0].getElementsByTagName(eo.tagName);if(null!=s&&null!=s[0]){let a=b(s[0]),i=parseFloat(a),n=P(s[0]),o=new eo(n,i);e.setActivationEnergy(o);let r=eo.tagName,g=l.id+"_"+eg.tagName+"_"+eo.tagName,m=d("number",g,tl,to,e=>{e.target instanceof HTMLInputElement&&tv(o,e.target)},a,r),c=m.querySelector("input");c.value=a,h(c),c.addEventListener("change",e=>{a=e.target.value,o.value=parseFloat(a),console.log("Set "+g+" to "+a),h(c)}),tf(void 0,n,m,l.id+"_"+eg.xsiType+"_"+eo.tagName,eo.tagName,tl),t.appendChild(m)}let n=T[0].getElementsByTagName(er.tagName);if(null!=n&&null!=n[0]){let a=b(n[0]),i=parseFloat(a),s=P(n[0]),o=new er(s,i);e.setTInfinity(o);let r=er.tagName,g=l.id+"_"+eg.tagName+"_"+er.tagName,m=d("number",g,tl,to,e=>{e.target instanceof HTMLInputElement&&tv(o,e.target)},a,r),c=m.querySelector("input");c.value=a,h(c),c.addEventListener("change",e=>{a=e.target.value,o.value=parseFloat(a),console.log("Set "+g+" to "+a),h(c)}),tf(void 0,s,m,l.id+"_"+eg.xsiType+"_"+er.tagName,er.tagName,tl),t.appendChild(m)}let r=T[0].getElementsByTagName(ed.tagName);if(null!=r&&null!=r[0]){let a=b(r[0]),i=parseFloat(a),s=P(r[0]),n=new ed(s,i);e.setNInfinity(n);let o=ed.tagName,g=l.id+"_"+eg.tagName+"_"+ed.tagName,m=d("number",g,tl,to,e=>{e.target instanceof HTMLInputElement&&tv(n,e.target)},a,o);t.appendChild(m);let c=m.querySelector("input");c.value=a,h(c),c.addEventListener("change",e=>{a=e.target.value,n.value=parseFloat(a),console.log("Set "+g+" to "+a),h(c)}),tf(void 0,s,m,l.id+"_"+eg.xsiType+"_"+ed.tagName,ed.tagName,tl),t.appendChild(m)}let g=l.id+"_"+el.tagName,m=o({content:t,buttonLabel:el.tagName,buttonFontSize:ta,boundary:tl,level:tn,contentDivId:g});a.appendChild(m)}else throw Error("Unexpected xsi:type="+s)}else{e=new el(i);let s=document.createElement("label");s.textContent=el.tagName+": "+i.get("name"),Object.assign(s.style,tn),t.appendChild(s),a.appendChild(t)}l.setMCRCMethod(e)}}let S=s[e].getElementsByTagName(em.tagName);if(S.length>0){if(S.length>1)throw Error("Expecting 1 "+em.tagName+" but finding "+S.length+"!");let e=parseFloat(E(v(S[0]))),t=new em(P(S[0]),e);l.setExcessReactantConc(t);let i=d("number",l.id+"_"+em.tagName,tl,tn,e=>{e.target instanceof HTMLInputElement&&tv(t,e.target)},e.toString(),em.tagName);a.appendChild(i)}let C=o({content:a,buttonLabel:l.id+"("+l.getLabel()+")",buttonFontSize:tt,boundary:tl,level:ts,contentDivId:l.tagName+"_"+l.id});t.appendChild(C)}return t}(t);a.id=C,S.appendChild(o({content:a,buttonLabel:"Reactions",buttonFontSize:te,boundary:tl,level:ti,contentDivId:C})),e.setReactionList(new e3(P(a),Array.from(tu.values())))}tB();let y=document.getElementById("conditions"),_="conditionsDivId";if(n(_),null==y);else{let a=function(t){console.log(ey.tagName);let a=document.createElement("div"),i=z(t,ey.tagName),s=new ey(P(i));e.setConditions(s);let n=document.createElement("div");a.appendChild(n),a.appendChild(o({content:n,buttonLabel:ex.name,buttonFontSize:tt,boundary:tl,level:ts,contentDivId:ex.tagName}));let r=u("add",tn);n.appendChild(r),r.addEventListener("click",()=>{let e=new ex(new Map,"");s.addBathGas(e);let t=p(tn),a=f(ex.tagName,tl);t.appendChild(a);let i=c(Array.from(new Set(th.keys())),ex.tagName,ey.tagName+"_"+ex.tagName,tl);i.value=e.value,i.addEventListener("change",t=>{t.target instanceof HTMLSelectElement&&(e.value=t.target.value,console.log("Added "+t.target.value+" as a "+ex.tagName),m(t.target))}),i.style.marginLeft="2px",m(i),t.appendChild(i);let o=u(tg,tl);o.addEventListener("click",()=>{n.removeChild(t),s.removeBathGas(e)}),t.appendChild(o),n.appendChild(t)});let g=Array.from(i.children).filter(e=>e.tagName===ex.tagName);if(g.length>0)for(let e=0;e<g.length;e++){let t=new ex(P(g[e]),E(v(g[e])));console.log("bathGas"+t.toString()),s.addBathGas(t);let a=p(tn),i=f(ex.tagName,tl);a.appendChild(i);let o=c(Array.from(new Set(th.keys())),ex.tagName,ey.tagName+"_"+ex.tagName,tl);o.value=t.value,o.addEventListener("change",e=>{e.target instanceof HTMLSelectElement&&(t.value=e.target.value,console.log("Set "+eS.tagName+"_"+ex.tagName+" to "+e.target.value),m(e.target))}),m(o),a.appendChild(o);let r=u(tg,tl);r.addEventListener("click",()=>{n.removeChild(a),s.removeBathGas(t)}),a.appendChild(r),n.appendChild(a)}let h=document.createElement("div");a.appendChild(h);let N=new eC(new Map);a.appendChild(o({content:h,buttonLabel:eC.name,buttonFontSize:tt,boundary:tl,level:ts,contentDivId:ex.tagName}));let x=u("add",tn);h.appendChild(x),x.addEventListener("click",()=>{let e=new Map;e.set("units","Torr");let t=new eS(e),a=N.addPTpair(t),i=p(tn);tE(i,t),tb(i,t),tf(void 0,e,i,eS.tagName,eS.tagName,tl);let s=u("add details",tl);i.appendChild(s),s.addEventListener("click",()=>{let e,a=document.createElement("div");tT(i,t),tS(i,t),tC(i,t),ty(i,t),(e=u("add "+ev.tagName,tl)).addEventListener("click",()=>{let a=document.createElement("div");a.style.marginLeft="5px";let s=new ev(new Map,NaN);t.setExperimentRate(s),d("number",eS.tagName+"_"+ev.tagName,tl,to,e=>{e.target instanceof HTMLInputElement&&tv(s,e.target)},"",ev.tagName),i.insertBefore(a,e),i.removeChild(e)}),i.insertBefore(a,s),i.removeChild(s)});let n=u(tg,tl);n.addEventListener("click",()=>{h.removeChild(i),N.removePTpair(a),t.removeBathGas()}),i.appendChild(n),h.appendChild(i)});let b=u("Add from spreadsheet",tl);h.appendChild(b),b.addEventListener("click",()=>{let e=p(tn),t=l("text",eC.tagName+"_addFromSpreadsheet",tn);e.appendChild(t),h.insertBefore(e,x),t.addEventListener("change",()=>{if(console.log("inputElement.value="+t.value),console.log("inputElement.value.length="+t.value.length),t.value.length>0){let a=t.value.split(" "),i=new Map;a[0].split("	").forEach((e,t)=>{i.set(e,t)}),console.log("pTPairsArray.length="+a.length);for(let e=1;e<a.length;e++){let t=new Map;t.set("units","Torr");let s=new eS(t),n=a[e].split("	"),o=i.get("P"),r=i.get("T"),d=i.get("me:bathGas"),l=parseFloat(n[o]),g=parseFloat(n[r]);if(s.setP(l),s.setT(g),i.has("me:bathGas")){let e=n[d];s.setBathGas(new ex(new Map,e))}console.log("pTPair="+s);let m=p(tn);tE(m,s),tb(m,s),tf(void 0,t,m,eS.tagName,eS.tagName,tl),tT(m,s),tS(m,s),tC(m,s),ty(m,s),console.log(x),console.log(h),h.insertBefore(m,x),N.addPTpair(s)}h.removeChild(e)}})});let T=i.getElementsByTagName(eC.tagName);if(T.length>0){if(T.length>1)throw Error("Expecting 1 "+eC.tagName+" but finding "+T.length+"!");let e=document.createElement("div");a.appendChild(e);let t=P(T[0]),i=T[0].getElementsByTagName(eS.tagName);if(0==i.length)throw Error("Expecting 1 or more "+eS.tagName+" but finding 0!");{let a=new eC(t);for(let t=0;t<i.length;t++){let s=new eS(P(i[t])),n=p(tn);e.appendChild(n);let o=i[t].getElementsByTagName(ex.tagName);if(o.length>0){o.length>1&&console.warn("xml_bathGass.length="+o.length);let e=document.createElement("label");e.textContent=ex.tagName+": ",n.appendChild(e);let t=E(v(o[0])),a=new ex(P(o[0]),t);s.setBathGas(a);let i=c(Array.from(new Set(th.keys())),ex.tagName,eS.tagName+"_"+ex.tagName,tl);i.value=a.value,i.addEventListener("change",e=>{e.target instanceof HTMLSelectElement&&(a.value=e.target.value,console.log("Set "+eS.tagName+"_"+ex.tagName+" to "+e.target.value),m(e.target))}),m(i),n.appendChild(i)}let r=i[t].getElementsByTagName(ev.tagName);if(r.length>0){r.length>1&&console.warn("xml_experimentRates.length="+r.length);let e=E(v(r[0])),t=new ev(P(r[0]),parseFloat(e));s.setExperimentRate(t);let a=d("number",eS.tagName+"_"+ev.tagName,tl,ti,e=>{e.target instanceof HTMLInputElement&&tv(t,e.target)},t.value.toString(),ev.tagName);n.appendChild(a)}tE(n,s),tb(n,s),tf(void 0,P(i[t]),n,eS.tagName,eS.tagName,tl),tT(n,s),tS(n,s),tC(n,s),ty(n,s),a.addPTpair(s),e.appendChild(n)}s.setPTs(a)}}return a}(t);a.id=_,y.appendChild(o({content:a,buttonLabel:"Conditions",buttonFontSize:te,boundary:tl,level:ti,contentDivId:_}))}let w=document.getElementById("modelParameters"),M="modelParametersDivId";if(n(M),null==w);else{let a=function(t){console.log(ez.tagName);let a=document.createElement("div"),i=z(t,ez.tagName),s=new ez(P(i));e.setModelParameters(s);let n=i.getElementsByTagName(e_.tagName);if(n.length>0){if(n.length>1)throw Error("Expecting 1 "+e_.tagName+" but finding "+n.length+"!");let e=P(n[0]),t=parseFloat(E(v(n[0]))),i=new e_(e,t);s.setGrainSize(i);let o=d("number",ez.tagName+"_"+e_.tagName,tl,ts,e=>{e.target instanceof HTMLInputElement&&(tv(i,e.target),h(e.target))},t.toString(),e_.tagName);tf(void 0,e,o,ez.tagName+"_"+e_.tagName,e_.tagName,tl),a.appendChild(o)}let o=i.getElementsByTagName(e2.tagName);if(o.length>0){if(o.length>1)throw Error("Expecting 1 "+e2.tagName+" but finding "+o.length+"!");let e=P(o[0]),t=parseFloat(E(v(o[0]))),i=new e2(e,t);s.setAutomaticallySetMaxEne(i);let n=d("number",ez.tagName+"_"+e2.tagName,tl,ts,e=>{e.target instanceof HTMLInputElement&&(tv(i,e.target),h(e.target))},t.toString(),e2.tagName);tf(void 0,e,n,ez.tagName+"_"+e2.tagName,e2.tagName,tl),a.appendChild(n)}let r=i.getElementsByTagName(eM.tagName);if(r.length>0){if(r.length>1)throw Error("Expecting 1 "+eM.tagName+" but finding "+r.length+"!");let e=P(r[0]),t=new eM(e,parseFloat(E(v(r[0]))));s.setEnergyAboveTheTopHill(t);let i=d("number",ez.tagName+"_"+eM.tagName,tl,ts,e=>{e.target instanceof HTMLInputElement&&(tv(t,e.target),h(e.target))},t.value.toString(),eM.tagName);tf(void 0,e,i,ez.tagName+"_"+eM.tagName,eM.tagName,tl),a.appendChild(i)}let l=i.getElementsByTagName(eP.tagName);if(l.length>0){if(l.length>1)throw Error("Expecting 1 "+eP.tagName+" but finding "+l.length+"!");let e=P(l[0]),t=new eP(e,parseFloat(E(v(l[0]))));s.setMaxTemperature(t);let i=d("number",ez.tagName+"_"+eP.tagName,tl,ts,e=>{e.target instanceof HTMLInputElement&&(tv(t,e.target),h(e.target))},t.value.toString(),eP.tagName);tf(void 0,e,i,ez.tagName+"_"+eP.tagName,eP.tagName,tl),a.appendChild(i)}return a}(t);a.id=M,w.appendChild(o({content:a,buttonLabel:"Model Parameters",buttonFontSize:te,boundary:tl,level:ti,contentDivId:M}))}let k=document.getElementById("control"),F="controlDivId";if(n(F),null==k);else{let a,i,s,n,r,l,g,h,m,c,u,N,f,x,b,T,S,C,y,_,w,M,L,R;let I=(console.log(e8.tagName),a=document.createElement("div"),i=z(t,e8.tagName),s=new e8(P(i)),e.setControl(s),t_(n=d("checkbox",e8.tagName+"_"+eL.tagName+"_checkbox",tl,ts,e=>{e.target instanceof HTMLInputElement&&(e.target.checked?s.setCalculateRateCoefficientsOnly(new eL):s.removeCalculateRateCoefficientsOnly())},"",eL.tagName),i.getElementsByTagName(eL.tagName)),a.appendChild(n),t_(r=d("checkbox",e8.tagName+"_"+eR.tagName+"_checkbox",tl,ts,e=>{e.target instanceof HTMLInputElement&&(e.target.checked?s.setPrintCellDOS(new eR):s.removePrintCellDOS())},"",eR.tagName),i.getElementsByTagName(eR.tagName)),a.appendChild(r),t_(l=d("checkbox",e8.tagName+"_"+eI.tagName+"_checkbox",tl,ts,e=>{e.target instanceof HTMLInputElement&&(e.target.checked?s.setPrintCellTransitionStateFlux(new eI):s.removePrintCellTransitionStateFlux())},"",eI.tagName),i.getElementsByTagName(eI.tagName)),a.appendChild(l),t_(g=d("checkbox",e8.tagName+"_"+eB.tagName+"_checkbox",tl,ts,e=>{e.target instanceof HTMLInputElement&&(e.target.checked?s.setPrintReactionOperatorColumnSums(new eB):s.removePrintReactionOperatorColumnSums())},"",eB.tagName),i.getElementsByTagName(eB.tagName)),a.appendChild(g),t_(h=d("checkbox",e8.tagName+"_"+ek.tagName+"_checkbox",tl,ts,e=>{e.target instanceof HTMLInputElement&&(e.target.checked?s.setPrintGrainBoltzmann(new ek):s.removePrintGrainBoltzmann())},"",ek.tagName),i.getElementsByTagName(ek.tagName)),a.appendChild(h),t_(m=d("checkbox",e8.tagName+"_"+eF.tagName+"_checkbox",tl,ts,e=>{e.target instanceof HTMLInputElement&&(e.target.checked?s.setPrintGrainDOS(new eF):s.removePrintGrainDOS())},"",eF.tagName),i.getElementsByTagName(eF.tagName)),a.appendChild(m),t_(c=d("checkbox",e8.tagName+"_"+eD.tagName+"_checkbox",tl,ts,e=>{e.target instanceof HTMLInputElement&&(e.target.checked?s.setPrintGrainkbE(new eD):s.removePrintGrainkbE())},"",eD.tagName),i.getElementsByTagName(eD.tagName)),a.appendChild(c),t_(u=d("checkbox",e8.tagName+"_"+eH.tagName+"_checkbox",tl,ts,e=>{e.target instanceof HTMLInputElement&&(e.target.checked?s.setPrintGrainkfE(new eH):s.removePrintGrainkfE())},"",eH.tagName),i.getElementsByTagName(eH.tagName)),a.appendChild(u),t_(N=d("checkbox",e8.tagName+"_"+eO.tagName+"_checkbox",tl,ts,e=>{e.target instanceof HTMLInputElement&&(e.target.checked?s.setPrintTSsos(new eO):s.removePrintTSsos())},"",eO.tagName),i.getElementsByTagName(eO.tagName)),a.appendChild(N),t_(f=d("checkbox",e8.tagName+"_"+eG.tagName+"_checkbox",tl,ts,e=>{e.target instanceof HTMLInputElement&&(e.target.checked?s.setPrintGrainedSpeciesProfile(new eG):s.removePrintGrainedSpeciesProfile())},"",eG.tagName),i.getElementsByTagName(eG.tagName)),a.appendChild(f),t_(x=d("checkbox",e8.tagName+"_"+eA.tagName+"_checkbox",tl,ts,e=>{e.target instanceof HTMLInputElement&&(e.target.checked?s.setPrintGrainTransitionStateFlux(new eA):s.removePrintGrainTransitionStateFlux())},"",eA.tagName),i.getElementsByTagName(eA.tagName)),a.appendChild(x),t_(b=d("checkbox",e8.tagName+"_"+eU.tagName+"_checkbox",tl,ts,e=>{e.target instanceof HTMLInputElement&&(e.target.checked?s.setPrintReactionOperatorSize(new eU):s.removePrintReactionOperatorSize())},"",eU.tagName),i.getElementsByTagName(eU.tagName)),a.appendChild(b),t_(T=d("checkbox",e8.tagName+"_"+e$.tagName+"_checkbox",tl,ts,e=>{e.target instanceof HTMLInputElement&&(e.target.checked?s.setPrintSpeciesProfile(new e$):s.removePrintSpeciesProfile())},"",e$.tagName),i.getElementsByTagName(e$.tagName)),a.appendChild(T),t_(S=d("checkbox",e8.tagName+"_"+ej.tagName+"_checkbox",tl,ts,e=>{e.target instanceof HTMLInputElement&&(e.target.checked?s.setPrintPhenomenologicalEvolution(new ej):s.removePrintPhenomenologicalEvolution())},"",ej.tagName),i.getElementsByTagName(ej.tagName)),a.appendChild(S),t_(C=d("checkbox",e8.tagName+"_"+eq.tagName+"_checkbox",tl,ts,e=>{e.target instanceof HTMLInputElement&&(e.target.checked?s.setPrintTunnelingCoefficients(new eq):s.removePrintTunnelingCoefficients())},"",eq.tagName),i.getElementsByTagName(eq.tagName)),a.appendChild(C),t_(y=d("checkbox",e8.tagName+"_"+eX.tagName+"_checkbox",tl,ts,e=>{e.target instanceof HTMLInputElement&&(e.target.checked?s.setPrintCrossingCoefficients(new eX):s.removePrintCrossingCoefficients())},"",eX.tagName),i.getElementsByTagName(eX.tagName)),a.appendChild(y),t_(_=d("checkbox",e8.tagName+"_"+eV.tagName+"_checkbox",tl,ts,e=>{e.target instanceof HTMLInputElement&&(e.target.checked?s.setTestDOS(new eV):s.removeTestDOS())},"",eV.tagName),i.getElementsByTagName(eV.tagName)),a.appendChild(_),t_(w=d("checkbox",e8.tagName+"_"+eW.tagName+"_checkbox",tl,ts,e=>{e.target instanceof HTMLInputElement&&(e.target.checked?s.setTestRateConstants(new eW):s.removeTestRateConstants())},"",eW.tagName),i.getElementsByTagName(eW.tagName)),a.appendChild(w),t_(M=d("checkbox",e8.tagName+"_"+eY.tagName+"_checkbox",tl,ts,e=>{e.target instanceof HTMLInputElement&&(e.target.checked?s.setUseTheSameCellNumberForAllConditions(new eY):s.removeUseTheSameCellNumberForAllConditions())},"",eY.tagName),i.getElementsByTagName(eY.tagName)),a.appendChild(M),t_(L=d("checkbox",e8.tagName+"_"+eK.tagName+"_checkbox",tl,ts,e=>{e.target instanceof HTMLInputElement&&(e.target.checked?s.setHideInactive(new eK):s.removeHideInactive())},"",eK.tagName),i.getElementsByTagName(eK.tagName)),a.appendChild(L),t_(R=d("checkbox",e8.tagName+"_"+eJ.tagName+"_checkbox",tl,ts,e=>{e.target instanceof HTMLInputElement&&(e.target.checked?s.setForceMacroDetailedBalance(new eJ):s.removeForceMacroDetailedBalance())},"",eJ.tagName),i.getElementsByTagName(eJ.tagName)),a.appendChild(R),function(e,t,a){let i=p(ts);t.appendChild(i);let s=e8.tagName+"_"+e4.tagName+"_checkbox",n=e8.tagName+"_"+e4.tagName+"_Tmax",o=e8.tagName+"_"+e4.tagName+"_Tmin",r=e8.tagName+"_"+e4.tagName+"_Tstep",l=a.getElementsByTagName(e4.tagName),g=d("checkbox",s,tl,ti,t=>{if(t.target instanceof HTMLInputElement){if(t.target.checked)tw(i,l,n,o,r,e);else{let t;e.removeTestMicroRates(),null!=(t=document.getElementById(n))&&t.remove(),null!=(t=document.getElementById(o))&&t.remove(),null!=(t=document.getElementById(r))&&t.remove()}}},"",e4.tagName),h=t_(g,l);i.appendChild(g),h&&tw(i,l,n,o,r,e)}(s,a,i),function(e,t,a){let i,s=p(ts);t.appendChild(s);let n=e8.tagName+"_"+eQ.tagName+"_checkbox",o=e8.tagName+"_"+eQ.tagName+"_input",r=a.getElementsByTagName(eQ.tagName);i=1==r.length?new eQ(P(r[0]),E(v(r[0]))):new eQ(new Map,"");let l=d("checkbox",n,tl,ti,t=>{if(t.target instanceof HTMLInputElement){if(t.target.checked)tM(e,s,i,o,i.value);else{let t;e.removeTestMicroRates(),null!=(t=document.getElementById(n))&&t.remove()}}},"",eQ.tagName);s.appendChild(l),t_(l,r)&&tM(e,s,i,o,i.value)}(s,a,i),function(e,t,a){let i,s,n=p(ts);t.appendChild(n);let o=a.getElementsByTagName(eZ.tagName);if(1==o.length){let t=parseFloat(s=E(v(o[0])));i=new eZ(P(o[0]),t),e.setEigenvalues(i)}else s="",i=new eZ(new Map,NaN);let r=e8.tagName+"_"+eZ.tagName+"_checkbox",l=e8.tagName+"_"+eZ.tagName+"_input",g=d("checkbox",r,tl,ti,t=>{if(t.target instanceof HTMLInputElement){if(t.target.checked)tP(e,n,i,l,s);else{e.removeEigenvalues();let t=document.getElementById(r);null!=t&&t.remove()}}},"",eZ.tagName);n.appendChild(g),t_(g,o)&&tP(e,n,i,l,s)}(s,a,i),function(e,t,a){let i,s,n=p(ts);t.appendChild(n);let o=a.getElementsByTagName(e0.tagName);if(1==o.length){let t=parseFloat(s=E(v(o[0])));i=new e0(P(o[0]),t),e.setShortestTimeOfInterest(i)}else s="",i=new e0(new Map,NaN);let r=e8.tagName+"_"+e0.tagName+"_checkbox",l=e8.tagName+"_"+e0.tagName+"_input",g=d("checkbox",r,tl,ti,t=>{if(t.target instanceof HTMLInputElement){if(t.target.checked)tz(e,n,i,r,s);else{e.removeShortestTimeOfInterest();let t=document.getElementById(r);null!=t&&t.remove()}}},"",e0.tagName);n.appendChild(g),t_(g,o)&&tz(e,n,i,l,s)}(s,a,i),function(e,t,a){let i,s,n=p(ts);t.appendChild(n);let o=a.getElementsByTagName(e1.tagName);if(1==o.length){let t=parseFloat(s=E(v(o[0])));i=new e1(P(o[0]),t),e.setMaximumEvolutionTime(i)}else s="",i=new e1(new Map,NaN);let r=e8.tagName+"_"+e1.tagName+"_checkbox",l=e8.tagName+"_"+e1.tagName+"_input",g=d("checkbox",r,tl,ti,t=>{if(t.target instanceof HTMLInputElement){if(t.target.checked)tL(e,n,i,l,s);else{e.removeMaximumEvolutionTime();let t=document.getElementById(r);null!=t&&t.remove()}}},"",e1.tagName);n.appendChild(g),t_(g,o)&&tL(e,n,i,l,s)}(s,a,i),function(e,t,a){let i,s,n=p(ts);t.appendChild(n);let o=a.getElementsByTagName(e2.tagName);if(1==o.length){let t=parseFloat(s=E(v(o[0])));i=new e2(P(o[0]),t),e.setAutomaticallySetMaxEne(i)}else s="",i=new e2(new Map,NaN);let r=e8.tagName+"_"+e2.tagName+"_checkbox",l=e8.tagName+"_"+e2.tagName+"_input",g=d("checkbox",r,tl,ti,t=>{if(t.target instanceof HTMLInputElement){if(t.target.checked)tR(e,n,i,l,s);else{e.removeAutomaticallySetMaxEne();let t=document.getElementById(r);null!=t&&t.remove()}}},"",e2.tagName);n.appendChild(g),t_(g,o)&&tR(e,n,i,l,s)}(s,a,i),function(e,t,a){let i,s,n=p(ts);t.appendChild(n);let o=a.getElementsByTagName(e5.tagName);if(1==o.length){let t=parseFloat(s=E(v(o[0])));i=new e5(P(o[0]),t),e.setDiagramEnergyOffset(i)}else s="",i=new e5(new Map,NaN);let r=e8.tagName+"_"+e5.tagName+"_checkbox",l=e8.tagName+"_"+e5.tagName+"_input",g=d("checkbox",r,tl,ti,t=>{if(t.target instanceof HTMLInputElement){if(t.target.checked)tI(e,n,i,l,s);else{e.removeDiagramEnergyOffset();let t=document.getElementById(r);null!=t&&t.remove()}}},"",e5.tagName);n.appendChild(g),t_(g,o)&&tI(e,n,i,l,s)}(s,a,i),a);I.id=F,k.appendChild(o({content:I,buttonLabel:"Control",buttonFontSize:te,boundary:tl,level:ti,contentDivId:F}))}!function(){for(var e=document.getElementsByClassName("collapsible"),t=0;t<e.length;t++)e[t].removeEventListener("click",r),e[t].addEventListener("click",r)}()}(new DOMParser().parseFromString(S,"text/xml"))}}};let C=a.slice(T,T+1048576);g.readAsText(C),T+=1048576;let y="saveButtonId";n(y);let _=u("Save",tl);_.id=y,_.addEventListener("click",tk),document.getElementById("menu").appendChild(_)}},t.click()}function tp(e,t,a,s,n,o,r){let l=s.getElementsByTagName(k.tagName);if(l.length>0){if(1!=l.length)throw Error("Expecting 1 "+k.tagName+" but finding "+l.length+"!");let i=b(l[0]),s=parseFloat(i),g=P(l[0]),m=new k(g,s);e.setProperty(m);let c=e.dictRef,u=d("number",a.id+"_"+e.dictRef,tl,r,e=>{e.target instanceof HTMLInputElement&&tv(m,e.target)},i,c),N=u.querySelector("input");h(N),N.addEventListener("change",t=>{i=t.target.value,(m=e.getProperty()).value=parseFloat(i),console.log("Set "+e.dictRef+" of "+a.id+" to "+i),h(N),e.dictRef==H.dictRef&&(s<tc&&(tc=s),s>tm&&(tm=s),tB())}),tf(t,g,u,a.id+"_"+e.dictRef+"_Select_Units",e.dictRef,o),n.appendChild(u)}else{let l=s.getElementsByTagName(F.tagName);if(l.length>0){if(1!=l.length)throw Error("Expecting 1 "+F.tagName+" but finding "+l.length+"!");let s=b(l[0]),g=i(s.split(/\s+/)),m=P(l[0]),c=new F(m,g);e.setProperty(c);let u=e.dictRef,N=d("text",a.id+"_"+e.dictRef,o,r,e=>{e.target instanceof HTMLInputElement&&tx(c,e.target)},s,u),p=N.querySelector("input");p.value=s,h(p),p.addEventListener("change",t=>{s=t.target.value,c=e.getProperty(),g=i(s.split(/\s+/)),c.values=g,console.log("Set "+e.dictRef+" of "+a.id+" to "+s),h(p)}),tf(t,m,N,a.id+"_"+e.dictRef+"_Select_Units",e.dictRef,o),n.appendChild(N)}else throw Error("Expecting "+k.tagName+" or "+F.tagName)}}function tf(e,t,a,i,s,n){if(void 0!=e){let o=function(e,t,a,i){let s=t.get("units");if(void 0!=s){let n=c(e,"Units",a,tl);return n.value=s,m(n),n.addEventListener("change",e=>{e.target instanceof HTMLSelectElement&&(t.set("units",e.target.value),console.log("Set "+i+" units to "+e.target.value)),m(n)}),n}}(e,t,i,s);void 0!=o&&(Object.assign(o.style,n),a.appendChild(o))}else{let e=t.get("units");if(void 0!=e){let t=f(e,n);a.appendChild(t)}}}function tx(e,t){let i=t.value.trim();if(""==i){alert("Empty input resetting..."),t.value=a(e.values," ");return}let n=i.split(/\s+/),o=[],r=!0;if(n.forEach(function(e){s(e)||(r=!1),o.push(parseFloat(e))}),!r){alert("An input is not a number, resetting..."),t.value=a(e.values," ");return}o.length==e.values.length?console.log("Changed "+e.tagName+' from: "'+i+'" to: "'+a(e.values," ")+'"'):(alert("Expecting "+e.values.length+" values for, but finding "+o.length+" resetting..."),t.value=a(e.values," "))}function tv(e,t){if(s(t.value)){let a=parseFloat(t.value);e.value=a,console.log(e.tagName+" value set to "+a)}else alert("Value is not numeric, resetting..."),t.value=e.value.toString()}function tE(e,t){let a=d("number",eS.tagName+"_P",tl,ti,e=>{e.target instanceof HTMLInputElement&&(s(e.target.value)?(t.setP(parseFloat(e.target.value)),console.log("Set P to "+e.target.value)):(alert("Value is not numeric, resetting..."),e.target.value=t.getP().toString()),h(e.target))},t.getP().toString(),"P"),i=a.querySelector("input");i.value=t.getP().toString(),h(i),e.appendChild(a)}function tb(e,t){let a=d("number",eS.tagName+"_T",tl,ti,e=>{e.target instanceof HTMLInputElement&&(s(e.target.value)?(t.setT(parseFloat(e.target.value)),console.log("Set T to "+e.target.value)):(alert("Value is not numeric, resetting..."),e.target.value=t.getT().toString()),h(e.target))},t.getT().toString(),"T"),i=a.querySelector("input");i.value=t.getT().toString(),h(i),e.appendChild(a)}function tT(e,t){let a=u("add "+em.tagName,tl);e.append(a),a.addEventListener("click",()=>{let i=document.createElement("label");i.textContent="excessReactantConc: ",e.appendChild(i);let s=l("number",eS.tagName+"_"+em.tagName,tl);s.value=NaN.toString(),s.addEventListener("change",e=>{e.target instanceof HTMLInputElement&&(t.setExcessReactantConc(e.target.value),console.log("Set excessReactantConc to "+e.target.value),h(e.target))}),h(s),e.appendChild(s);let n=u("âœ•",tl);n.addEventListener("click",()=>{e.removeChild(i),e.removeChild(s),e.removeChild(n),tT(e,t)}),e.appendChild(n),e.removeChild(a)})}function tS(e,t){let a=u("add percentExcessReactantConc",tl);e.appendChild(a),a.addEventListener("click",()=>{let a=document.createElement("label");a.textContent="percentExcessReactantConc: ",e.appendChild(a);let i=l("number",eS.tagName+"_percentExcessReactantConc",tl);i.value=NaN.toString(),i.addEventListener("change",e=>{e.target instanceof HTMLInputElement&&(t.setPercentExcessReactantConc(e.target.value),console.log("Set percentExcessReactantConc to "+e.target.value),h(e.target))}),h(i),e.appendChild(i)})}function tC(e,t){let a=u("add precision",tl);e.appendChild(a),a.addEventListener("click",()=>{let a=document.createElement("label");a.textContent="Precision: ",e.appendChild(a);let i=l("number",eS.tagName+"_precision",tl);i.value=NaN.toString(),i.addEventListener("change",e=>{e.target instanceof HTMLInputElement&&(t.setPrecision(e.target.value),console.log("Set Precision to "+e.target.value),h(e.target))}),h(i),e.appendChild(i)})}function ty(e,t){let a=u("add "+ex.tagName,tl);e.appendChild(a),a.addEventListener("click",()=>{let i=document.createElement("div"),s=new ex(new Map,"");t.setBathGas(s);let n=document.createElement("label");n.textContent=ex.tagName+": ",i.appendChild(n),e.insertBefore(i,a);let o=c(Array.from(new Set(th.keys())),ex.tagName,eC.tagName+"_"+ex.tagName,tl);o.value=s.value,o.addEventListener("change",e=>{e.target instanceof HTMLSelectElement&&(s.value=e.target.value,console.log("Added "+e.target.value+" as a "+ex.tagName),m(e.target))}),m(o),i.appendChild(o),e.insertBefore(i,a),e.removeChild(a)})}function t_(e,t){let a=e.querySelector("input");return t.length>0&&(t.length>1&&console.error("xml.length="+t.length),a.checked=!0,!0)}function tw(e,t,a,i,n,o){let r,l;1==t.length?l=new e4(r=P(t[0])):((r=new Map).set("Tmax",""),r.set("Tmin",""),r.set("Tstep",""),l=new e4(r));let g=l.getTmax(),m=d("number",a+"_input",tl,ti,e=>{e.target instanceof HTMLInputElement&&(s(e.target.value)?(l.setTmax(parseFloat(e.target.value)),console.log("Set Tmax to "+e.target.value)):(alert("Value is not numeric, resetting..."),e.target.value=g.toString()),h(e.target))},g.toString(),"Tmax");m.id=a,h(m.querySelector("input")),e.appendChild(m);let c=d("number",i+"_input",tl,ti,e=>{e.target instanceof HTMLInputElement&&(s(e.target.value)?(l.setTmin(parseFloat(e.target.value)),console.log("Set Tmin to "+e.target.value)):(alert("Value is not numeric, resetting..."),e.target.value=g.toString()),h(e.target))},l.getTmin().toString(),"Tmin");c.id=i,h(c.querySelector("input")),e.appendChild(c);let u=d("number",n+"_input",tl,ti,e=>{e.target instanceof HTMLInputElement&&(s(e.target.value)?(l.setTstep(parseFloat(e.target.value)),console.log("Set Tstep to "+e.target.value)):(alert("Value is not numeric, resetting..."),e.target.value=g.toString()),h(e.target))},l.getTstep().toString(),"Tstep");u.id=n,h(u.querySelector("input")),e.appendChild(u),o.setTestMicroRates(l)}function tM(e,t,a,i,s){let n=a.value,o=c(eQ.options,n,i,tl);o.addEventListener("change",e=>{e.target instanceof HTMLSelectElement&&(a.value=e.target.value,a.value=e.target.value,m(e.target))}),m(o),t.appendChild(o),e.setCalcMethod(a)}function tP(e,t,a,i,s){e.setEigenvalues(a);let n=l("number",i,tl);n.addEventListener("change",e=>{e.target instanceof HTMLInputElement&&(tv(a,e.target),h(e.target))}),n.value=s,h(n),t.appendChild(n)}function tz(e,t,a,i,s){e.setShortestTimeOfInterest(a);let n=l("number",i,tl);n.addEventListener("change",e=>{e.target instanceof HTMLInputElement&&(tv(a,e.target),h(e.target))}),n.value=s,h(n),t.appendChild(n)}function tL(e,t,a,i,s){e.setMaximumEvolutionTime(a);let n=l("number",i,tl);n.addEventListener("change",e=>{e.target instanceof HTMLInputElement&&(tv(a,e.target),h(e.target))}),n.value=s,h(n),t.appendChild(n)}function tR(e,t,a,i,s){e.setAutomaticallySetMaxEne(a);let n=l("number",i,tl);n.addEventListener("change",e=>{e.target instanceof HTMLInputElement&&(tv(a,e.target),h(e.target))}),n.value=s,h(n),t.appendChild(n)}function tI(e,t,a,i,s){e.setDiagramEnergyOffset(a);let n=l("number",i,tl);n.addEventListener("change",e=>{e.target instanceof HTMLInputElement&&(tv(a,e.target),h(e.target))}),n.value=s,h(n),t.appendChild(n)}function tB(){if(tu.size>0){let e=document.getElementById("reactions"),a="reactionsDiagram",i=document.getElementById(a);null!=i&&i.remove();let s=document.createElement("canvas");s.id=a,s.width=800,s.height=400,s.style.border="1px solid black",null!=s&&(s.style.display="block",function(e,a,i,s,n){var o;let r,d,l,g;console.log("drawReactionDiagram");let h="black",m=e.getContext("2d"),c=(m.font=i,(o=m.measureText("Aj")).actualBoundingBoxAscent+o.actualBoundingBoxDescent),u=[],N=new Set,p=new Set,f=new Set,x=new Map,v=new Map,E=0,b=Number.MAX_VALUE,T=Number.MIN_VALUE;tu.forEach(function(e,a){let i=e.getTransitionStates(),s=e.getReactantsLabel();if(void 0!=s){u.push(s),N.has(s)&&p.add(s);let t=e.getReactantsEnergy(th);b=Math.min(b,t),T=Math.max(T,t),v.set(s,t),!x.has(s)&&(x.set(s,E),E++)}let n=e.getProductsLabel();if(void 0!=n){N.add(n);let a=e.getProductsEnergy(th);if(b=Math.min(b,a),T=Math.max(T,a),v.set(n,a),x.has(n)){E--;let e=t(x,n);x.forEach(function(t,a){t>e&&x.set(a,t-1)}),void 0!=i&&(i.forEach(function(e){let t=e.getMolecule().ref;f.add(t),x.set(t,E),a=th.get(t)?.getEnergy()??0,b=Math.min(b,a),T=Math.max(T,a),v.set(t,a),E++}),x.set(n,E),E++)}else void 0!=i&&i.forEach(function(e){let t=e.getMolecule().ref;f.add(t),x.set(t,E),a=th.get(t)?.getEnergy()??0,b=Math.min(b,a),T=Math.max(T,a),v.set(t,a),E++}),x.set(n,E),E++}});let S=T-b,C=[];x.forEach(function(e,t){C[e]=t});let y=0,_=0,w=new Map,M=new Map,P=new Map,z=new Map,L=new Map,R=new Map;C.forEach(function(a){let s=t(v,a),n=(s-b)*e.height/(S+0)+0;g=Math.max(ef(m,s.toString(),i),ef(m,a,i)),d=y+g+5,l=r=n+4,w.set(a,[y,r]),M.set(a,[d,l]),N.has(a)&&(P.set(a,[y,r]),z.set(a,[d,l])),f.has(a)&&(L.set(a,[y,r]),R.set(a,[d,l])),y=d+10,_=d}),e.width=_;let I=e.height+4*c+8,B=e.height;e.height=I,m.transform(1,0,0,-1,0,I),tu.forEach(function(e,a){let i=e.getTransitionStates(),s=e.getReactantsLabel(),n=e.getProductsLabel(),o=t(M,s),r=t(P,n);i.length>0?i.forEach(function(e){let a=e.getMolecule().ref,i=t(L,a);eN(m,h,2,o[0],o[1],i[0],i[1]);let s=t(R,a);eN(m,h,2,s[0],s[1],r[0],r[1])}):eN(m,h,2,o[0],o[1],r[0],r[1])}),u.forEach(function(e){let a=t(v,e),n=(a-b)*B/(S+0)+0,o=t(w,e)[0],r=n+4;eu(m,"blue",s,o,r,t(M,e)[0],r,i,c,e,a.toString())}),N.forEach(function(e){let a=t(v,e),n=(a-b)*B/(S+0)+0,o=t(P,e)[0],r=n+s,d=t(z,e)[0],l=a.toString();p.has(e)?eu(m,"orange",s,o,r,d,r,i,c,e,l):eu(m,"green",s,o,r,d,r,i,c,e,l)}),f.forEach(function(e){let a=t(v,e),n=(a-b)*B/(S+0)+0,o=t(L,e)[0],r=n+s;eu(m,"red",s,o,r,t(R,e)[0],r,i,c,e,a.toString())})}(s,0,"14px Arial",4,2)),e.appendChild(s)}}function tk(){console.log("saveXML");let t=new Blob([e9.header,e.toXML("  ","  ")],{type:"text/plain"}),a=URL.createObjectURL(t),i=document.createElement("a");i.href=a;let s=e.getTitle()?.value;i.download=s.replace(/[^a-z0-9]/gi,"_")+".xml",document.body.appendChild(i),i.click(),document.body.removeChild(i)}document.addEventListener("DOMContentLoaded",()=>{let e=u("Load",tl);e.addEventListener("click",tN);let t=document.getElementById("menu");t&&t.appendChild(e),t.style.display="flex"}),window.setNumberArrayNode=tx,window.set=tv;
//# sourceMappingURL=index.b61f37df.js.map
