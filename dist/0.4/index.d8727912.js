let e,t,n,a,i,s,o;function l(e,t){if(!e.has(t))throw Error(`Key ${t} not found in map`);return e.get(t)}function r(e,t){return void 0==t&&(t=", "),e.map(e=>null==e?"null":e.toString()).join(t)}function d(e){let t=[];for(let n=0;n<e.length;n++)g(e[n])&&t.push(parseFloat(e[n]));return t}function g(e){return""!==e&&!isNaN(Number(e))}function m(e){let t=document.getElementById(e);null!=t?t.parentNode?.removeChild(t):console.warn("remove: id="+e+" not found.")}function h({content:e,buttonLabel:t,buttonFontSize:n="",level:a={marginLeft:"",marginTop:"",marginBottom:""},contentDivId:i="",contentDivClassName:s=""}){let o=document.createElement("div");o.id=i,o.className=s;let l=document.createElement("button");return l.id=i+"Button",l.className="collapsible",l.innerText=`${t} \u{25BC}`,l.addEventListener("click",function(){l.innerText=l.innerText.includes("â–¼")?`${t} \u{25B2}`:`${t} \u{25BC}`}),l.style.fontSize=n,Object.assign(l.style,a),o.appendChild(l),o.appendChild(e),o}function c(){this.classList.toggle("active");let e=this.nextElementSibling;"block"===e.style.display?e.style.display="none":e.style.display="block"}function u(e,t,n,a,i,s){let o=document.createElement("input");o.type=e,o.id=t,o.onchange=a,o.value=i;let l=document.createElement("label");l.htmlFor=t,s?l.textContent=s+": ":l.textContent="",Object.assign(l.style,n),Object.assign(o.style,n);let r=document.createElement("div");return r.appendChild(l),r.appendChild(o),Object.assign(r,n),r}function p(e,t){let n="<"+t;if(e)for(let[t,a]of e)n+=" "+t+'="'+a+'"';return n+" />"}function N(e,t){void 0==t&&(t=4),e.style.width=e.value.length+t+"ch"}function x(e,t){void 0==t&&(t=6),e.style.width=e.value.length+t+"ch"}function f(e,t,n,a){let i=document.createElement("select");return e.forEach(e=>{i.name=t,i.id=n;let a=document.createElement("option");a.value=e,a.text=e,i.appendChild(a)}),Object.assign(i.style,a),i}function v(e,t){let n=document.createElement("button");return n.textContent=e,Object.assign(n.style,t),n}function E(e){let t=document.createElement("div");return t.style.display="flex",Object.assign(t.style,e),t}function b(e,t){let n=e.getElementsByTagName(t)[0];if(null==n)throw Error(t+" element not found");return n}function y(e){let t=e.childNodes;if(null==t)throw Error("Element has no childNodes");return t[0]}function C(e){let t=e.nodeValue;if(null==t)throw Error("nodeValue is null");return t}function T(e){let t=y(e);return t?C(t).trim():""}class S{constructor(e){this.tagName=e}toXML(e){let t=p(void 0,this.tagName);return e?"\n"+e+t:t}}class w extends S{constructor(e,t){super(t),this.attributes=e}toString(){let e=this.tagName+"(";return this.attributes&&this.attributes.forEach((t,n)=>{e+=`${n}(${t}), `}),e}toXML(e){let t="";if(void 0!=e&&(t+="\n"+e),t+="<"+this.tagName,this.attributes)for(let[e,n]of this.attributes)t+=" "+e+'="'+n.toString()+'"';return t+" />"}}class M extends w{constructor(e,t,n){super(e,t),this.value=n}toString(){return super.toString()+`, ${this.value.toString()})`}toXML(e){return z(this.value.trim(),this.tagName,this.attributes,e,!1)}}class L extends w{constructor(e,t,n){super(e,t),this.value=n}toString(){return super.toString()+`, ${this.value.toString()})`}toXML(e){return z(this.value.toString().trim(),this.tagName,this.attributes,e,!1)}}class P extends w{constructor(e,t,n,a){super(e,t),this.delimiter=",",this.values=n,void 0!=a&&(this.delimiter=a)}toString(){return super.toString()+`, ${this.values.toString()})`}setDelimiter(e){this.delimiter=e}toXML(e){return z(this.values.toString().replaceAll(",",this.delimiter),this.tagName,this.attributes,e,!1)}}class B extends w{constructor(e,t){super(e,t),this.nodes=new Map}addNode(e){return this.nodes.set(this.nodes.size,e),this.nodes.size-1}toString(){let e=super.toString();return this.nodes.forEach((t,n)=>{e+=`, ${t.toString()}`}),e+")"}toXML(e,t){let n;void 0!=e&&void 0!=t&&(n=t+e);let a="";if(this.nodes.size>0)return this.nodes.forEach(t=>{t instanceof B?a+=t.toXML(e,n):a+=t.toXML(n)}),z(a,this.tagName,this.attributes,t,!0);{let e=p(this.attributes,this.tagName);return void 0!=t?"\n"+t+e:e}}}function z(e,t,n,a,i){let s;return function(e,t,n){let a="";if(void 0!=n&&(a+="\n"+n),a+="<"+e,t)for(let[e,n]of t)a+=" "+e+'="'+n.toString()+'"';return a+">"}(t,n,a)+e+(s="",i&&void 0!=a&&(s+="\n"+a),s+"</"+t+">")}function I(e){let t=e.getAttributeNames(),n=new Map;return t.forEach(function(t){let a=e.getAttribute(t);null!=a&&n.set(t,a)}),n}function R(e,t){let n=e.getElementsByTagName(t);if(1!=n.length)throw Error("Expecting 1 "+t+" but finding "+n.length);return n[0]}class _ extends w{static{this.tagName="atom"}constructor(e){super(e,_.tagName);let t=e.get("elementType");if(void 0==t)throw Error("elementType is undefined");this.elementType=t;let n=e.get("id");void 0==n&&(n=this.elementType),this.id=n}}class k extends B{static{this.tagName="atomArray"}constructor(e,t){super(e,k.tagName),t.forEach(e=>{this.nodes.set(this.nodes.size,e)})}}class F extends w{static{this.tagName="bond"}constructor(e){super(e,F.tagName);let t=e.get("atomRefs2");if(void 0==t)throw Error("atomRefs2 is undefined");this.atomRefs2=t}setAtomRefs2(e){this.atomRefs2=e,void 0!=this.attributes&&this.attributes.set("atomRefs2",e)}getId(){if(void 0!=this.attributes)return this.attributes.get("id")}setId(e){void 0!=this.attributes&&this.attributes.set("id",e)}getOrder(){if(void 0!=this.attributes){let e=this.attributes.get("order");if(void 0!=e)return parseFloat(e)}}setOrder(e){void 0!=this.attributes&&this.attributes.set("order",e.toString())}}class D extends B{static{this.tagName="bondArray"}constructor(e,t){super(e,D.tagName),this.bonds=t,t.forEach(e=>{this.nodes.set(this.nodes.size,e)})}getBond(e){return this.bonds[e]}getBonds(){return this.bonds}setBond(e,t){this.bonds[e]=t,this.nodes.set(e,t)}addBond(e){this.bonds.push(e),this.nodes.set(this.nodes.size,e)}removeBond(e){this.bonds.splice(e,1),this.nodes.delete(e)}getBondIds(){let e=new Set;return this.bonds.forEach(t=>{e.add(t.getId())}),e}}class H extends L{static{this.tagName="scalar"}constructor(e,t){super(e,H.tagName,t)}updateUnits(e){if(e&&void 0!=this.attributes){let t=this.attributes.get("units");void 0!=t&&t!=e&&this.attributes.set("units",e)}}}class O extends P{static{this.tagName="array"}constructor(e,t,n){super(e,O.tagName,t,n)}updateUnits(e){if(e&&void 0!=this.attributes){let t=this.attributes.get("units");void 0!=t&&t!=e&&this.attributes.set("units",e)}}}class G extends B{static{this.tagName="property"}constructor(e,t){super(e,G.tagName);let n=e.get("dictRef");if(void 0==n)throw Error("dictRef is undefined");this.dictRef=n,t&&this.nodes.set(0,t)}getProperty(){return this.nodes.get(0)}setProperty(e){this.nodes.set(0,e)}}class A extends G{static{this.dictRef="me:ZPE"}constructor(e,t){super(e,t)}setUnits(e){this.getProperty().updateUnits(e)}}class q extends G{static{this.dictRef="me:frequenciesScaleFactor"}constructor(e,t){super(e,t)}}class U extends G{static{this.dictRef="me:vibFreqs"}constructor(e,t){super(e,t)}}class $ extends G{static{this.dictRef="me:rotConsts"}constructor(e,t){super(e,t)}}class X extends G{static{this.dictRef="me:MW"}constructor(e,t){super(e,t)}}class V extends G{static{this.dictRef="me:imFreqs"}constructor(e,t){super(e,t)}}class j extends B{static{this.tagName="propertyList"}constructor(e,t){super(e,j.tagName),this.index=new Map,t&&t.forEach(e=>{this.nodes.set(this.nodes.size,e),this.index.set(e.dictRef,this.nodes.size-1)})}getProperty(e){let t=this.index.get(e);if(void 0!=t)return this.nodes.get(t);throw Error("Property "+e+" does not exist")}setProperty(e){let t=this.index.get(e.dictRef);void 0==t?(this.nodes.set(this.nodes.size,e),this.index.set(e.dictRef,this.nodes.size-1)):(console.log("Property "+e.dictRef+" already exists, updating..."),this.nodes.set(t,e))}}class W extends L{static{this.tagName="me:deltaEDown"}constructor(e,t){super(e,W.tagName,t)}getBathGas(){if(void 0!=this.attributes)return this.attributes.get("bathGas")}setBathGas(e){void 0!=this.attributes&&this.attributes.set("bathGas",e)}getUnits(){if(void 0!=this.attributes)return this.attributes.get("units")}getLower(){if(void 0!=this.attributes)return parseFloat(l(this.attributes,"lower"))}setLower(e){void 0!=this.attributes&&this.attributes.set("lower",e.toString())}getUpper(){if(void 0!=this.attributes)return parseFloat(l(this.attributes,"upper"))}setUpper(e){void 0!=this.attributes&&this.attributes.set("upper",e.toString())}getStepsize(){if(void 0!=this.attributes)return parseFloat(l(this.attributes,"stepsize"))}setStepsize(e){void 0!=this.attributes&&this.attributes.set("stepsize",e.toString())}setValue(e){this.value=e}}class Y extends B{static{this.tagName="me:energyTransferModel"}constructor(e,t){super(e,Y.tagName),void 0!=t&&t.forEach(e=>{this.nodes.set(this.nodes.size,e)})}getDeltaEDowns(){let e=[];return this.nodes.forEach(t=>{t instanceof W&&e.push(t)}),e}setDeltaEDowns(e){this.nodes.clear(),e.forEach(e=>{this.nodes.set(this.nodes.size,e)})}getDeltaEDown(e){if(e<0||e>=this.nodes.size)throw Error("index out of range");return this.nodes.get(e)}setDeltaEDown(e,t){this.nodes.set(e,t)}addDeltaEDown(e){return this.nodes.set(this.nodes.size,e),this.nodes.size-1}}class J extends w{static{this.tagName="me:DOSCMethod"}constructor(e){if(super(e,J.tagName),void 0==e.get("xsi:type")){let t=e.get("name");if(void 0==t)throw Error("Neither xsi:type or name are defined.");e.set("xsi:type",t),e.delete("name")}}getXsiType(){if(void 0!=this.attributes)return this.attributes.get("xsi:type");throw Error("xsi:type is undefined")}setXsiType(e){if(void 0!=this.attributes)this.attributes.set("xsi:type",e);else throw Error("xsi:type is undefined")}}class K extends M{static{this.tagName="me:bondRef"}constructor(e,t){super(e,K.tagName,t)}}class Q extends w{static{this.tagName="me:PotentialPoint"}constructor(e){super(e,Q.tagName);let t=e.get("angle");if(void 0==t)throw Error("angle is undefined");this.angle=parseFloat(t);let n=e.get("potential");if(void 0==n)throw Error("potential is undefined");this.potential=parseFloat(n)}getAngle(){return this.angle}setAngle(e){this.angle=e,void 0!=this.attributes&&this.attributes.set("angle",e.toString())}getPotential(){return this.potential}setPotential(e){this.potential=e,void 0!=this.attributes&&this.attributes.set("potential",e.toString())}}class Z extends B{static{this.tagName="me:HinderedRotorPotential"}static{this.formats=["numerical","analytical"]}static{this.units=["kJ/mol","cm-1","Hartree"]}constructor(e,t){super(e,Z.tagName);let n=e.get("format");if(void 0==n)throw Error("format is undefined");this.format=n;let a=e.get("units");if(void 0==a)throw Error("units is undefined");this.units=a,void 0!=t&&t.forEach(e=>{this.nodes.set(this.nodes.size,e)});let i=e.get("expansionSize");if(void 0==i)throw Error("expansionSize is undefined");this.expansionSize=parseFloat(i);let s=e.get("useSineTerms");if(void 0==s)throw Error("useSineTerms is undefined");this.useSineTerms="yes"==s}getFormat(){return this.format}setFormat(e){this.format=e,void 0!=this.attributes&&this.attributes.set("format",e)}getUnits(){return this.units}setUnits(e){this.units=e,void 0!=this.attributes&&this.attributes.set("units",e)}getExpansionSize(){return this.expansionSize}setExpansionSize(e){this.expansionSize=e,void 0!=this.attributes&&this.attributes.set("expansionSize",e.toString())}getUseSineTerms(){return this.useSineTerms}setUseSineTerms(e){this.useSineTerms=e,void 0!=this.attributes&&this.attributes.set("useSineTerms",e?"yes":"no")}getPotentialPoint(e){return this.nodes.get(e)}setPotentialPoint(e,t){this.nodes.set(e,t)}setPotentialPoints(e){this.nodes.clear(),e.forEach(e=>{this.nodes.set(this.nodes.size,e)})}addPotentialPoint(e){return this.nodes.set(this.nodes.size,e),this.nodes.size-1}removePotentialPoint(e){this.nodes.delete(e)}}class ee extends L{static{this.tagName="me:periodicity"}constructor(e,t){super(e,ee.tagName,t)}}class et extends B{static{this.tagName="me:ExtraDOSCMethod"}constructor(e,t,n,a){super(e,et.tagName),this.index=new Map,t&&(this.nodes.set(this.nodes.size,t),this.index.set(K.tagName,this.nodes.size-1)),n&&(this.nodes.set(this.nodes.size,n),this.index.set(Z.tagName,this.nodes.size-1)),a&&(this.nodes.set(this.nodes.size,a),this.index.set(ee.tagName,this.nodes.size-1))}getBondRef(){let e=this.index.get(K.tagName);if(void 0!=e)return this.nodes.get(e)}setBondRef(e){let t=this.index.get(K.tagName);void 0!=t?this.nodes.set(t,e):(this.nodes.set(this.nodes.size,e),this.index.set(K.tagName,this.nodes.size-1))}getHinderedRotorPotential(){let e=this.index.get(Z.tagName);if(void 0!=e)return this.nodes.get(e)}setHinderedRotorPotential(e){let t=this.index.get(Z.tagName);void 0!=t?this.nodes.set(t,e):(this.nodes.set(this.nodes.size,e),this.index.set(Z.tagName,this.nodes.size-1))}getPeriodicity(){let e=this.index.get(ee.tagName);if(void 0!=e)return this.nodes.get(e)}setPeriodicity(e){let t=this.index.get(ee.tagName);void 0!=t?this.nodes.set(t,e):(this.nodes.set(this.nodes.size,e),this.index.set(ee.tagName,this.nodes.size-1))}}class en extends L{static{this.tagName="me:reservoirSize"}constructor(e,t){super(e,en.tagName,t)}}class ea extends B{static{this.tagName="molecule"}constructor(e,t,n,a,i,s,o,l){super(e,ea.tagName),this.index=new Map;let r=e.get("id");if(void 0==r)throw Error("id is undefined");this.id=r;let d=0;t&&(this.nodes.set(d,t),t instanceof _?this.index.set(_.tagName,d):this.index.set(k.tagName,d),d++),n&&(this.nodes.set(d,n),this.index.set(D.tagName,d),d++),a&&(this.nodes.set(d,a),this.index.set(j.tagName,d),d++),i&&(this.nodes.set(d,i),this.index.set(Y.tagName,d),d++),s&&(this.nodes.set(d,s),this.index.set(J.tagName,d)),o&&(this.nodes.set(d,o),this.index.set(et.tagName,d)),l&&(this.nodes.set(d,l),this.index.set(en.tagName,d))}getDescription(){if(void 0!=this.attributes)return this.attributes.get("description")}setDescription(e){void 0!=this.attributes&&this.attributes.set("description",e)}getActive(){if(void 0!=this.attributes){let e=this.attributes.get("active");if(void 0!=e)return"true"==e}}setActive(e){void 0!=this.attributes&&this.attributes.set("active",e.toString())}getLabel(){let e=this.id,t=this.getDescription();return void 0!=t&&(e+=" ("+t+")"),this.getActive()&&(e+=" (active)"),e}getAttributesAsString(){return void 0==this.attributes?"":Array.from(this.attributes,([e,t])=>`${e}="${t}"`).join(", ")}getProperties(){let e=this.index.get(j.tagName);if(void 0!=e||void 0!=(e=this.index.get(G.tagName)))return this.nodes.get(e)}setProperties(e){let t=this.index.get(j.tagName);void 0==t?(this.index.set(j.tagName,this.nodes.size),this.addNode(e)):this.nodes.set(t,e)}getProperty(e){let t=this.getProperties();if(void 0!=t)return t instanceof j?t.getProperty(e):t}setProperty(e){let t=this.getProperties();void 0!=t?t instanceof j?t.setProperty(e):this.setProperties(t):this.setProperties(e)}getAtoms(){let e=this.index.get(_.tagName);if(void 0!=e||void 0!=(e=this.index.get(k.tagName)))return this.nodes.get(e)}getBonds(){let e=this.index.get(D.tagName);if(void 0!=e)return this.nodes.get(e)}getEnergyTransferModel(){let e=this.index.get(Y.tagName);if(void 0!=e)return this.nodes.get(e)}setEnergyTransferModel(e){let t=this.index.get(Y.tagName);void 0==t?(this.index.set(Y.tagName,this.nodes.size),this.addNode(e)):this.nodes.set(t,e)}getDOSCMethod(){let e=this.index.get(J.tagName);if(void 0!=e)return this.nodes.get(e)}setDOSCMethod(e){let t=this.index.get(J.tagName);void 0==t?(this.index.set(J.tagName,this.nodes.size),this.addNode(e)):this.nodes.set(t,e)}getExtraDOSCMethod(){let e=this.index.get(et.tagName);if(void 0!=e)return this.nodes.get(e)}setExtraDOSCMethod(e){let t=this.index.get(et.tagName);void 0==t?(this.index.set(et.tagName,this.nodes.size),this.addNode(e)):this.nodes.set(t,e)}getReservoirSize(){let e=this.index.get(en.tagName);if(void 0!=e)return this.nodes.get(e)}setReservoirSize(e){let t=this.index.get(en.tagName);void 0==t?(this.index.set(en.tagName,this.nodes.size),this.addNode(e)):this.nodes.set(t,e)}getEnergy(){let e=this.getProperty(A.dictRef);if(void 0==e)throw console.log(this.toString()),Error("ZPE property not found");return e.getProperty().value}}class ei extends w{static{this.tagName="molecule"}constructor(e){super(e,ei.tagName),this.ref=e.get("ref"),this.role=e.get("role")}setRole(e){this.role=e}}class es extends B{static{this.tagName="reactant"}constructor(e,t){super(e,es.tagName),this.addNode(t)}getMolecule(){return this.nodes.get(0)}}class eo extends B{static{this.tagName="product"}constructor(e,t){super(e,eo.tagName),this.addNode(t)}getMolecule(){return this.nodes.get(0)}}class el extends B{static{this.tagName="me:transitionState"}constructor(e,t){super(e,el.tagName),this.addNode(t)}getMolecule(){return this.nodes.get(0)}}class er extends L{static{this.tagName="me:preExponential"}constructor(e,t){super(e,er.tagName,t)}}class ed extends L{static{this.tagName="me:activationEnergy"}constructor(e,t){super(e,ed.tagName,t)}}class eg extends L{static{this.tagName="me:TInfinity"}constructor(e,t){super(e,eg.tagName,t)}}class em extends L{static{this.tagName="me:nInfinity"}constructor(e,t){super(e,em.tagName,t)}}class eh extends B{static{this.tagName="me:MCRCMethod"}constructor(e){super(e,eh.tagName)}}class ec extends eh{static{this.xsiType="me:MesmerILT"}static{this.xsiType2="MesmerILT"}constructor(e,t,n,a,i){super(e),this.index=new Map,void 0!=t&&(this.index.set(er.tagName,this.index.size),this.addNode(t)),void 0!=n&&(this.index.set(ed.tagName,this.index.size),this.addNode(n)),void 0!=a&&(this.index.set(eg.tagName,this.index.size),this.addNode(a)),void 0!=i&&(this.index.set(em.tagName,this.index.size),this.addNode(i))}getPreExponential(){let e=this.index.get(er.tagName);if(void 0!=e)return this.nodes.get(e)}setPreExponential(e){let t=this.index.get(er.tagName);void 0==t?(this.index.set(er.tagName,this.nodes.size),this.addNode(e)):this.nodes.set(t,e)}getActivationEnergy(){let e=this.index.get(ed.tagName);if(void 0!=e)return this.nodes.get(e)}setActivationEnergy(e){let t=this.index.get(ed.tagName);void 0==t?(this.index.set(ed.tagName,this.nodes.size),this.addNode(e)):this.nodes.set(t,e)}getTInfinity(){let e=this.index.get(eg.tagName);if(void 0!=e)return this.nodes.get(e)}setTInfinity(e){let t=this.index.get(eg.tagName);void 0==t?(this.index.set(eg.tagName,this.nodes.size),this.addNode(e)):this.nodes.set(t,e)}getNInfinity(){let e=this.index.get(em.tagName);if(void 0!=e)return this.nodes.get(e)}setNInfinity(e){let t=this.index.get(em.tagName);void 0==t?(this.index.set(em.tagName,this.nodes.size),this.addNode(e)):this.nodes.set(t,e)}}class eu extends w{static{this.tagName="me:tunneling"}constructor(e){super(e,eu.tagName)}getName(){return void 0!=this.attributes?this.attributes.get("name"):""}setName(e){void 0!=this.attributes&&this.attributes.set("name",e)}}class ep extends L{static{this.tagName="me:excessReactantConc"}constructor(e,t){super(e,ep.tagName,t)}}class eN extends B{static{this.tagName="reaction"}constructor(e,t,n,a,i,s,o){super(e,eN.tagName),this.index=new Map,this.reactantsIndex=new Map,this.productsIndex=new Map,this.transitionStatesIndex=new Map;let l=e.get("id");if(void 0==l)throw Error("Reaction id is undefined");this.id=l,void 0!=t&&(t.forEach(e=>{this.reactantsIndex.set(e.getMolecule().ref,this.nodes.size),this.addNode(e)}),this.index.set(es.tagName,this.reactantsIndex)),void 0!=n&&(n.forEach(e=>{this.productsIndex.set(e.getMolecule().ref,this.nodes.size),this.addNode(e)}),this.index.set(eo.tagName,this.productsIndex)),void 0!=a&&(this.index.set(eu.tagName,this.nodes.size),this.addNode(a)),void 0!=i&&(i.forEach(e=>{this.transitionStatesIndex.set(e.getMolecule().ref,this.nodes.size),this.addNode(e)}),this.index.set(el.tagName,this.transitionStatesIndex)),void 0!=s&&(this.index.set(eh.tagName,this.nodes.size),this.addNode(s)),void 0!=o&&(this.index.set(ep.tagName,this.nodes.size),this.addNode(o))}addToIndex(e,t){let n=this.index.get(e);if(void 0==n)this.index.set(e,this.nodes.size);else if(n instanceof Map)n.set(t.tagName,this.nodes.size);else{let a=new Map;a.set(this.nodes.get(n).ref,n),a.set(t.tagName,this.nodes.size),this.index.set(e,a)}}getReactants(){let e=this.index.get(es.tagName);return void 0==e?[]:e instanceof Map?Array.from(e.values()).map(e=>this.nodes.get(e)):[this.nodes.get(e)]}setReactants(e){e.forEach(e=>{this.reactantsIndex.set(e.getMolecule().ref,this.nodes.size),this.addNode(e)}),this.index.set(es.tagName,this.reactantsIndex)}getReactant(e){let t=this.reactantsIndex.get(e);if(void 0==t)throw Error(`Reactant with ref ${e} not found`);return this.nodes.get(t)}addReactant(e){this.reactantsIndex.set(e.getMolecule().ref,this.nodes.size),this.addNode(e)}removeReactant(e){let t=this.reactantsIndex.get(e);if(void 0==t)throw Error(`Reactant with ref ${e} not found`);this.nodes.delete(t),this.reactantsIndex.delete(e)}getProducts(){let e=this.index.get(eo.tagName);return void 0==e?[]:e instanceof Map?Array.from(e.values()).map(e=>this.nodes.get(e)):[this.nodes.get(e)]}setProducts(e){e.forEach(e=>{this.productsIndex.set(e.getMolecule().ref,this.nodes.size),this.addNode(e)}),this.index.set(eo.tagName,this.productsIndex)}getProduct(e){let t=this.productsIndex.get(e);if(void 0==t)throw Error(`Product with ref ${e} not found`);return this.nodes.get(t)}addProduct(e){this.productsIndex.set(e.getMolecule().ref,this.nodes.size),this.addNode(e)}removeProduct(e){let t=this.productsIndex.get(e);if(void 0==t)throw Error(`Product with ref ${e} not found`);this.nodes.delete(t),this.productsIndex.delete(e)}getTunneling(){let e=this.index.get(eu.tagName);if(void 0!=e)return this.nodes.get(e)}setTunneling(e){let t=this.index.get(eu.tagName);if(void 0==t)this.index.set(eu.tagName,this.nodes.size),this.addNode(e);else{if(t instanceof Map)throw Error("Tunneling is a map and it is assumed there would be only 1!");this.nodes.set(t,e)}}getTransitionStates(){let e=this.index.get(el.tagName);return void 0==e?[]:e instanceof Map?Array.from(e.values()).map(e=>this.nodes.get(e)):[this.nodes.get(e)]}setTransitionStates(e){e.forEach(e=>{this.transitionStatesIndex.set(e.getMolecule().ref,this.nodes.size),this.addNode(e)}),this.index.set(el.tagName,this.transitionStatesIndex)}getTransitionState(e){let t=this.transitionStatesIndex.get(e);if(void 0==t)throw Error(`Transition state with ref ${e} not found`);return this.nodes.get(t)}addTransitionState(e){this.transitionStatesIndex.set(e.getMolecule().ref,this.nodes.size),this.addNode(e)}removeTransitionState(e){let t=this.transitionStatesIndex.get(e);if(void 0==t)throw Error(`Transition State with ref ${e} not found`);this.nodes.delete(t),this.transitionStatesIndex.delete(e)}getMCRCMethod(){let e=this.index.get(eh.tagName);if(void 0!=e)return this.nodes.get(e)}setMCRCMethod(e){let t=this.index.get(eh.tagName);if(void 0==t)this.index.set(eh.tagName,this.nodes.size),this.addNode(e);else{if(t instanceof Map)throw Error("MCRCMethod is a map and it is assumed there would be only 1!");this.nodes.set(t,e)}}getExcessReactantConc(){let e=this.index.get(ep.tagName);if(void 0!=e)return this.nodes.get(e)}setExcessReactantConc(e){let t=this.index.get(ep.tagName);if(void 0==t)this.index.set(ep.tagName,this.nodes.size),this.addNode(e);else{if(t instanceof Map)throw Error("ExcessReactantConc is a map and it is assumed there would be only 1!");this.nodes.set(t,e)}}getReactantsLabel(){return this.getReactants().map(e=>e.getMolecule().ref).join(" + ")}getProductsLabel(){return this.getProducts().map(e=>e.getMolecule().ref).join(" + ")}getLabel(){return this.getReactantsLabel()+" -> "+this.getProductsLabel()}getReactantsEnergy(e){return Array.from(this.getReactants()).map(t=>{let n=e.get(t.getMolecule().ref);if(void 0==n)throw Error(`Molecule with ref ${t.getMolecule().ref} not found`);return n.getEnergy()}).reduce((e,t)=>e+t,0)}getProductsEnergy(e){return Array.from(this.getProducts()).map(t=>{let n=e.get(t.getMolecule().ref);if(void 0==n)throw Error(`Molecule with ref ${t.getMolecule().ref} not found`);return n.getEnergy()}).reduce((e,t)=>e+t,0)}get(e,t){if(this.index.has(e)){let n=this.index.get(e);if(void 0!=n){if(!(n instanceof Map))return this.nodes.get(n);{let e=n.get(t);if(void 0!=e)return this.nodes.get(e)}}}}}function ex(e,t,n,a,i,s,o,l,r,d,g){let m=a+(s-a)/2;ev(e,g,l,t,m-eE(e,g,l)/2,o+r),ev(e,d,l,t,m-eE(e,d,l)/2,o+3*r),ef(e,t,n,a,i,s,o)}function ef(e,t,n,a,i,s,o){e.beginPath(),e.strokeStyle=t,e.lineWidth=n,e.moveTo(a,i),e.lineTo(s,o),e.stroke()}function ev(e,t,n,a,i,s){e.save(),e.translate(i,s),e.scale(1,-1),e.font=n,e.fillStyle=a,e.fillText(t,0,0),e.restore()}function eE(e,t,n){return e.font=n,e.measureText(t).width}class eb extends M{static{this.tagName="me:bathGas"}constructor(e,t){super(e,eb.tagName,t)}}class ey extends L{static{this.tagName="me:experimentRate"}constructor(e,t){super(e,ey.tagName,t)}getRef1(){if(void 0!=this.attributes)return this.attributes.get("ref1")}setRef1(e){void 0!=this.attributes&&this.attributes.set("ref1",e)}getRef2(){if(void 0!=this.attributes)return this.attributes.get("ref2")}setRef2(e){void 0!=this.attributes&&this.attributes.set("ref2",e)}getRefReaction(){if(void 0!=this.attributes)return this.attributes.get("refReaction")}setRefReaction(e){void 0!=this.attributes&&this.attributes.set("refReaction",e)}getError(){if(void 0!=this.attributes){let e=this.attributes.get("error");if(e)return parseFloat(e)}}setError(e){void 0!=this.attributes&&this.attributes.set("error",e.toString())}}class eC extends L{static{this.tagName="me:experimentalYield"}constructor(e,t){super(e,eC.tagName,t)}getRef(){if(void 0!=this.attributes)return this.attributes.get("ref")}setRef(e){void 0!=this.attributes&&this.attributes.set("ref",e)}getError(){if(void 0!=this.attributes){let e=this.attributes.get("error");if(e)return parseFloat(e)}}setError(e){void 0!=this.attributes&&this.attributes.set("error",e.toString())}getYieldTime(){if(void 0!=this.attributes){let e=this.attributes.get("yieldTime");if(e)return parseFloat(e)}}setYieldTime(e){void 0!=this.attributes&&this.attributes.set("yieldTime",e.toString())}}class eT extends L{static{this.tagName="me:experimentalEigenvalue"}constructor(e,t){super(e,eT.tagName,t)}getEigenvalueID(){if(void 0!=this.attributes)return this.attributes.get("EigenvalueID")}setEigenvalueID(e){void 0!=this.attributes&&this.attributes.set("EigenvalueID",e)}getError(){if(void 0!=this.attributes){let e=this.attributes.get("error");if(e)return parseFloat(e)}}setError(e){void 0!=this.attributes&&this.attributes.set("error",e.toString())}}class eS extends L{static{this.tagName="me:excessReactantConc"}constructor(e,t){super(e,eS.tagName,t)}getPercent(){if(void 0!=this.attributes)return this.attributes.get("percent")}setPercent(e){void 0!=this.attributes&&this.attributes.set("percent",e)}}class ew extends B{static{this.tagName="me:PTpair"}static{this.precisions=["d","dd","qd","double","double-double","quad-double"]}constructor(e,t,n,a,i){super(e,ew.tagName),this.index=new Map,void 0!=t&&(this.index.set(eb.tagName,this.nodes.size),this.addNode(t)),void 0!=n&&(this.index.set(ey.tagName,this.nodes.size),this.addNode(n)),void 0!=a&&(this.index.set(eC.tagName,this.nodes.size),this.addNode(a)),void 0!=i&&(this.index.set(eT.tagName,this.nodes.size),this.addNode(i))}getP(){if(void 0!=this.attributes){let e=this.attributes.get("P");if(void 0!=e)return parseFloat(e)}return NaN}setP(e){void 0!=this.attributes&&this.attributes.set("P",e.toString())}getT(){if(void 0!=this.attributes){let e=this.attributes.get("T");if(void 0!=e)return parseFloat(e)}return NaN}setT(e){void 0!=this.attributes&&this.attributes.set("T",e.toString())}getPrecision(){if(void 0!=this.attributes)return this.attributes.get("precision")}setPrecision(e){void 0!=this.attributes&&this.attributes.set("precision",e)}getBathGas(){let e=this.index.get(eb.tagName);return e?this.nodes.get(e):void 0}setBathGas(e){let t=this.index.get(eb.tagName);t?this.nodes.set(t,e):(this.index.set(eb.tagName,this.nodes.size),this.addNode(e))}removeBathGas(){let e=this.index.get(eb.tagName);e&&(this.nodes.delete(e),this.index.delete(eb.tagName))}getExperimentRate(){let e=this.index.get(ey.tagName);return e?this.nodes.get(e):void 0}setExperimentRate(e){let t=this.index.get(ey.tagName);t?this.nodes.set(t,e):(this.index.set(ey.tagName,this.nodes.size),this.addNode(e))}removeExperimentRate(){let e=this.index.get(ey.tagName);e&&(this.nodes.delete(e),this.index.delete(ey.tagName))}getExcessReactantConc(){if(void 0!=this.attributes)return this.attributes.get("excessReactantConc")}setExcessReactantConc(e){void 0!=this.attributes&&this.attributes.set("excessReactantConc",e)}getPercentExcessReactantConc(){if(void 0!=this.attributes)return this.attributes.get("percentExcessReactantConc")}setPercentExcessReactantConc(e){void 0!=this.attributes&&this.attributes.set("percentExcessReactantConc",e)}}class eM extends B{static{this.tagName="me:PTs"}constructor(e,t){super(e,eM.tagName),void 0!=t?(t.forEach(e=>{this.addNode(e)}),this.pTpairs=t):this.pTpairs=[]}getPTpair(e){return this.pTpairs[e]}setPTpair(e,t){this.nodes.set(e,t),this.pTpairs[e]=t}addPTpair(e){return this.addNode(e),this.pTpairs.push(e),this.nodes.size-1}setPTpairs(e){this.nodes.clear(),e.forEach(e=>{this.addNode(e),this.pTpairs.push(e)})}removePTpair(e){this.nodes.delete(e),this.pTpairs.splice(e,1)}}class eL extends B{static{this.tagName="me:conditions"}constructor(e,t,n){super(e,eL.tagName),this.index=new Map,this.bathGasesIndex=new Map,this.bathGases=new Set,void 0!=t&&(this.index.set(eb.tagName,this.nodes.size),t.forEach(e=>{this.bathGasesIndex.set(e.value,this.nodes.size),this.addNode(e),this.bathGases.add(e)})),void 0!=n&&(this.index.set(eM.tagName,this.nodes.size),this.addNode(n))}getBathGases(){return this.bathGases}addBathGas(e){this.bathGases.has(e)||(this.bathGases.add(e),this.bathGasesIndex.set(e.value,this.nodes.size),this.addNode(e))}removeBathGas(e){this.bathGases.has(e)?(this.bathGases.delete(e),this.nodes.delete(this.bathGasesIndex.get(e.value))):console.warn("Conditions.removeBathGas: bathGas not found to remove.")}getPTs(){let e=this.index.get(eM.tagName);if(void 0!=e)return this.nodes.get(e)}setPTs(e){let t=this.index.get(eM.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eM.tagName,this.nodes.size),this.addNode(e))}}class eP extends L{static{this.tagName="me:grainSize"}constructor(e,t){super(e,eP.tagName,t)}}class eB extends L{static{this.tagName="me:automaticallySetMaxEne"}constructor(e,t){super(e,eB.tagName,t)}}class ez extends L{static{this.tagName="me:energyAboveTheTopHill"}constructor(e,t){super(e,ez.tagName,t)}}class eI extends L{static{this.tagName="me:maxTemperature"}constructor(e,t){super(e,eI.tagName,t)}}class eR extends B{static{this.tagName="me:modelParameters"}constructor(e,t,n,a,i){super(e,eR.tagName),this.index=new Map,void 0!=t&&(this.index.set(eP.tagName,this.nodes.size),this.addNode(t)),void 0!=n&&(this.index.set(eB.tagName,this.nodes.size),this.addNode(n)),void 0!=a&&(this.index.set(ez.tagName,this.nodes.size),this.addNode(a)),void 0!=i&&(this.index.set(eI.tagName,this.nodes.size),this.addNode(i))}getGrainSize(){let e=this.index.get(eP.tagName);if(e)return this.nodes.get(e)}setGrainSize(e){let t=this.index.get(eP.tagName);t?this.nodes.set(t,e):(this.index.set(eP.tagName,this.nodes.size),this.addNode(e))}getAutomaticallySetMaxEne(){let e=this.index.get(eB.tagName);if(e)return this.nodes.get(e)}setAutomaticallySetMaxEne(e){let t=this.index.get(eB.tagName);t?this.nodes.set(t,e):(this.index.set(eB.tagName,this.nodes.size),this.addNode(e))}getEnergyAboveTheTopHill(){let e=this.index.get(ez.tagName);if(e)return this.nodes.get(e)}setEnergyAboveTheTopHill(e){let t=this.index.get(ez.tagName);t?this.nodes.set(t,e):(this.index.set(ez.tagName,this.nodes.size),this.addNode(e))}getMaxTemperature(){let e=this.index.get(eI.tagName);if(e)return this.nodes.get(e)}setMaxTemperature(e){let t=this.index.get(eI.tagName);t?this.nodes.set(t,e):(this.index.set(eI.tagName,this.nodes.size),this.addNode(e))}}class e_ extends S{static{this.tagName="me:calculateRateCoefficientsOnly"}constructor(){super(e_.tagName)}}class ek extends S{static{this.tagName="me:printCellDOS"}constructor(){super(ek.tagName)}}class eF extends S{static{this.tagName="me:printCellTransitionStateFlux"}constructor(){super(eF.tagName)}}class eD extends S{static{this.tagName="me:printReactionOperatorColumnSums"}constructor(){super(eD.tagName)}}class eH extends S{static{this.tagName="me:printGrainBoltzmann"}constructor(){super(eH.tagName)}}class eO extends S{static{this.tagName="me:printGrainDOS"}constructor(){super(eO.tagName)}}class eG extends S{static{this.tagName="me:printGrainkbE"}constructor(){super(eG.tagName)}}class eA extends S{static{this.tagName="me:printGrainkfE"}constructor(){super(eA.tagName)}}class eq extends S{static{this.tagName="me:printTSsos"}constructor(){super(eq.tagName)}}class eU extends S{static{this.tagName="me:printGrainedSpeciesProfile"}constructor(){super(eU.tagName)}}class e$ extends S{static{this.tagName="me:printGrainTransitionStateFlux"}constructor(){super(e$.tagName)}}class eX extends S{static{this.tagName="me:printReactionOperatorSize"}constructor(){super(eX.tagName)}}class eV extends S{static{this.tagName="me:printSpeciesProfile"}constructor(){super(eV.tagName)}}class ej extends S{static{this.tagName="me:printPhenomenologicalEvolution"}constructor(){super(ej.tagName)}}class eW extends S{static{this.tagName="me:printTunnelingCoefficients"}constructor(){super(eW.tagName)}}class eY extends S{static{this.tagName="me:printCrossingCoefficients"}constructor(){super(eY.tagName)}}class eJ extends S{static{this.tagName="me:testDOS"}constructor(){super(eJ.tagName)}}class eK extends S{static{this.tagName="me:testRateConstants"}constructor(){super(eK.tagName)}}class eQ extends S{static{this.tagName="me:useTheSameCellNumberForAllConditions"}constructor(){super(eQ.tagName)}}class eZ extends S{static{this.tagName="me:ForceMacroDetailedBalance"}constructor(){super(eZ.tagName)}}class e0 extends S{static{this.tagName="me:hideInactive"}constructor(){super(e0.tagName)}}class e1 extends M{static{this.tagName="me:calcMethod"}static{this.options=["simpleCalc","gridSearch","fitting","marquardt","analyticalRepresentation","ThermodynamicTable","sensitivityAnalysis"]}constructor(e,t){super(e,e1.tagName,t)}}class e2 extends L{static{this.tagName="me:eigenvalues"}constructor(e,t){super(e,e2.tagName,t)}}class e5 extends L{static{this.tagName="me:shortestTimeOfInterest"}constructor(e,t){super(e,e5.tagName,t)}}class e4 extends L{static{this.tagName="me:MaximumEvolutionTime"}constructor(e,t){super(e,e4.tagName,t)}}class e8 extends L{static{this.tagName="me:automaticallySetMaxEne"}constructor(e,t){super(e,e8.tagName,t)}}class e6 extends L{static{this.tagName="me:diagramEnergyOffset"}constructor(e,t){super(e,e6.tagName,t)}}class e7 extends w{static{this.tagName="me:testMicroRates"}constructor(e){super(e,e7.tagName),this.tMin=parseFloat(e.get("Tmin")),this.tMax=parseFloat(e.get("Tmax")),this.tStep=parseFloat(e.get("Tstep"))}getTmin(){return this.tMin}setTmin(e){this.tMin=e,this.attributes?.set("Tmin",e.toString())}getTmax(){return this.tMax}setTmax(e){this.tMax=e,this.attributes?.set("Tmax",e.toString())}getTstep(){return this.tStep}setTstep(e){this.tStep=e,this.attributes?.set("Tstep",e.toString())}}class e3 extends B{static{this.tagName="me:control"}constructor(e){super(e,e3.tagName),this.index=new Map}getCalculateRateCoefficientsOnly(){let e=this.index.get(e_.tagName);if(void 0!=e)return this.nodes.get(e)}setCalculateRateCoefficientsOnly(e){let t=this.index.get(e_.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(e_.tagName,this.nodes.size),this.addNode(e))}removeCalculateRateCoefficientsOnly(){let e=this.index.get(e_.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(e_.tagName))}getPrintCellDOS(){let e=this.index.get(ek.tagName);if(void 0!=e)return this.nodes.get(e)}setPrintCellDOS(e){let t=this.index.get(ek.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(ek.tagName,this.nodes.size),this.addNode(e))}removePrintCellDOS(){let e=this.index.get(ek.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(ek.tagName))}getPrintCellTransitionStateFlux(){let e=this.index.get(eF.tagName);if(void 0!=e)return this.nodes.get(e)}setPrintCellTransitionStateFlux(e){let t=this.index.get(eF.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eF.tagName,this.nodes.size),this.addNode(e))}removePrintCellTransitionStateFlux(){let e=this.index.get(eF.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(eF.tagName))}getPrintReactionOperatorColumnSums(){let e=this.index.get(eD.tagName);if(void 0!=e)return this.nodes.get(e)}setPrintReactionOperatorColumnSums(e){let t=this.index.get(eD.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eD.tagName,this.nodes.size),this.addNode(e))}removePrintReactionOperatorColumnSums(){let e=this.index.get(eD.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(eD.tagName))}getPrintGrainBoltzmann(){let e=this.index.get(eH.tagName);if(void 0!=e)return this.nodes.get(e)}setPrintGrainBoltzmann(e){let t=this.index.get(eH.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eH.tagName,this.nodes.size),this.addNode(e))}removePrintGrainBoltzmann(){let e=this.index.get(eH.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(eH.tagName))}getPrintGrainDOS(){let e=this.index.get(eO.tagName);if(void 0!=e)return this.nodes.get(e)}setPrintGrainDOS(e){let t=this.index.get(eO.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eO.tagName,this.nodes.size),this.addNode(e))}removePrintGrainDOS(){let e=this.index.get(eO.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(eO.tagName))}getPrintGrainkbE(){let e=this.index.get(eG.tagName);if(void 0!=e)return this.nodes.get(e)}setPrintGrainkbE(e){let t=this.index.get(eG.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eG.tagName,this.nodes.size),this.addNode(e))}removePrintGrainkbE(){let e=this.index.get(eG.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(eG.tagName))}getPrintGrainkfE(){let e=this.index.get(eA.tagName);if(void 0!=e)return this.nodes.get(e)}setPrintGrainkfE(e){let t=this.index.get(eA.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eA.tagName,this.nodes.size),this.addNode(e))}removePrintGrainkfE(){let e=this.index.get(eA.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(eA.tagName))}getPrintTSsos(){let e=this.index.get(eq.tagName);if(void 0!=e)return this.nodes.get(e)}setPrintTSsos(e){let t=this.index.get(eq.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eq.tagName,this.nodes.size),this.addNode(e))}removePrintTSsos(){let e=this.index.get(eq.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(eq.tagName))}getPrintGrainedSpeciesProfile(){let e=this.index.get(eU.tagName);if(void 0!=e)return this.nodes.get(e)}setPrintGrainedSpeciesProfile(e){let t=this.index.get(eU.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eU.tagName,this.nodes.size),this.addNode(e))}removePrintGrainedSpeciesProfile(){let e=this.index.get(eU.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(eU.tagName))}getPrintGrainTransitionStateFlux(){let e=this.index.get(e$.tagName);if(void 0!=e)return this.nodes.get(e)}setPrintGrainTransitionStateFlux(e){let t=this.index.get(e$.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(e$.tagName,this.nodes.size),this.addNode(e))}removePrintGrainTransitionStateFlux(){let e=this.index.get(e$.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(e$.tagName))}getPrintReactionOperatorSize(){let e=this.index.get(eX.tagName);if(void 0!=e)return this.nodes.get(e)}setPrintReactionOperatorSize(e){let t=this.index.get(eX.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eX.tagName,this.nodes.size),this.addNode(e))}removePrintReactionOperatorSize(){let e=this.index.get(eX.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(eX.tagName))}getPrintSpeciesProfile(){let e=this.index.get(eV.tagName);if(void 0!=e)return this.nodes.get(e)}setPrintSpeciesProfile(e){let t=this.index.get(eV.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eV.tagName,this.nodes.size),this.addNode(e))}removePrintSpeciesProfile(){let e=this.index.get(eV.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(eV.tagName))}getPrintPhenomenologicalEvolution(){let e=this.index.get(ej.tagName);if(void 0!=e)return this.nodes.get(e)}setPrintPhenomenologicalEvolution(e){let t=this.index.get(ej.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(ej.tagName,this.nodes.size),this.addNode(e))}removePrintPhenomenologicalEvolution(){let e=this.index.get(ej.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(ej.tagName))}getPrintTunnelingCoefficients(){let e=this.index.get(eW.tagName);if(void 0!=e)return this.nodes.get(e)}setPrintTunnelingCoefficients(e){let t=this.index.get(eW.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eW.tagName,this.nodes.size),this.addNode(e))}removePrintTunnelingCoefficients(){let e=this.index.get(eW.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(eW.tagName))}getPrintCrossingCoefficients(){let e=this.index.get(eY.tagName);if(void 0!=e)return this.nodes.get(e)}setPrintCrossingCoefficients(e){let t=this.index.get(eY.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eY.tagName,this.nodes.size),this.addNode(e))}removePrintCrossingCoefficients(){let e=this.index.get(eY.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(eY.tagName))}getTestDOS(){let e=this.index.get(eJ.tagName);if(void 0!=e)return this.nodes.get(e)}setTestDOS(e){let t=this.index.get(eJ.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eJ.tagName,this.nodes.size),this.addNode(e))}removeTestDOS(){let e=this.index.get(eJ.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(eJ.tagName))}getTestRateConstants(){let e=this.index.get(eK.tagName);if(void 0!=e)return this.nodes.get(e)}setTestRateConstants(e){let t=this.index.get(eK.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eK.tagName,this.nodes.size),this.addNode(e))}removeTestRateConstants(){let e=this.index.get(eK.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(eK.tagName))}getUseTheSameCellNumberForAllConditions(){let e=this.index.get(eQ.tagName);if(void 0!=e)return this.nodes.get(e)}setUseTheSameCellNumberForAllConditions(e){let t=this.index.get(eQ.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eQ.tagName,this.nodes.size),this.addNode(e))}removeUseTheSameCellNumberForAllConditions(){let e=this.index.get(eQ.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(eQ.tagName))}getHideInactive(){let e=this.index.get(e0.tagName);if(void 0!=e)return this.nodes.get(e)}setHideInactive(e){let t=this.index.get(e0.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(e0.tagName,this.nodes.size),this.addNode(e))}removeHideInactive(){let e=this.index.get(e0.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(e0.tagName))}getForceMacroDetailedBalance(){let e=this.index.get(eZ.tagName);if(void 0!=e)return this.nodes.get(e)}setForceMacroDetailedBalance(e){let t=this.index.get(eZ.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eZ.tagName,this.nodes.size),this.addNode(e))}removeForceMacroDetailedBalance(){let e=this.index.get(eZ.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(eZ.tagName))}getCalcMethod(){let e=this.index.get(e1.tagName);if(void 0!=e)return this.nodes.get(e)}setCalcMethod(e){let t=this.index.get(e1.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(e1.tagName,this.nodes.size),this.addNode(e))}removeCalcMethod(){let e=this.index.get(e1.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(e1.tagName))}getEigenvalues(){let e=this.index.get(e2.tagName);if(void 0!=e)return this.nodes.get(e)}setEigenvalues(e){let t=this.index.get(e2.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(e2.tagName,this.nodes.size),this.addNode(e))}removeEigenvalues(){let e=this.index.get(e2.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(e2.tagName))}getShortestTimeOfInterest(){let e=this.index.get(e5.tagName);if(void 0!=e)return this.nodes.get(e)}setShortestTimeOfInterest(e){let t=this.index.get(e5.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(e5.tagName,this.nodes.size),this.addNode(e))}removeShortestTimeOfInterest(){let e=this.index.get(e5.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(e5.tagName))}getMaximumEvolutionTime(){let e=this.index.get(e4.tagName);if(void 0!=e)return this.nodes.get(e)}setMaximumEvolutionTime(e){let t=this.index.get(e.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(e.tagName,this.nodes.size),this.addNode(e))}removeMaximumEvolutionTime(){let e=this.index.get(e4.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(e4.tagName))}getAutomaticallySetMaxEne(){let e=this.index.get(e8.tagName);if(void 0!=e)return this.nodes.get(e)}setAutomaticallySetMaxEne(e){let t=this.index.get(e8.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(e8.tagName,this.nodes.size),this.addNode(e))}removeAutomaticallySetMaxEne(){let e=this.index.get(e8.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(e8.tagName))}getDiagramEnergyOffset(){let e=this.index.get(e6.tagName);if(void 0!=e)return this.nodes.get(e)}setDiagramEnergyOffset(e){let t=this.index.get(e6.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(e6.tagName,this.nodes.size),this.addNode(e))}removeDiagramEnergyOffset(){let e=this.index.get(e6.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(e6.tagName))}getTestMicroRates(){let e=this.index.get(e7.tagName);if(void 0!=e)return this.nodes.get(e)}setTestMicroRates(e){let t=this.index.get(e7.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(e7.tagName,this.nodes.size),this.addNode(e))}removeTestMicroRates(){let e=this.index.get(e7.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(e7.tagName))}}class e9 extends M{static{this.tagName="me:title"}constructor(e,t){super(e,e9.tagName,t)}}class te extends B{static{this.tagName="moleculeList"}constructor(e,t){super(e,te.tagName),this.index=new Map,void 0!=t&&t.forEach(e=>{this.nodes.set(this.nodes.size,e),this.index.set(e.id,this.nodes.size-1)})}getMolecule(e){let t=this.index.get(e);if(void 0!=t)return this.nodes.get(t)}removeMolecule(e){let t=this.index.get(e);void 0!=t&&(this.nodes.delete(t),this.index.delete(e))}addMolecule(e){let t=this.index.get(e.id);void 0!==t?(this.nodes.set(t,e),console.log("Replaced molecule with id "+e.id)):(this.nodes.set(this.nodes.size,e),this.index.set(e.id,this.nodes.size-1))}}class tt extends B{static{this.tagName="reactionList"}constructor(e,t){super(e,tt.tagName),this.index=new Map,void 0!=t&&t.forEach(e=>{this.nodes.set(this.nodes.size,e),this.index.set(e.id,this.nodes.size-1)})}getReaction(e){let t=this.index.get(e);if(void 0!=t)return this.nodes.get(t)}removeReaction(e){let t=this.index.get(e);void 0!=t&&(this.nodes.delete(t),this.index.delete(e))}addReaction(e){let t=this.index.get(e.id);void 0!==t?(this.nodes.set(t,e),console.log("Replaced reaction with id "+e.id)):(this.nodes.set(this.nodes.size,e),this.index.set(e.id,this.nodes.size-1))}}class tn extends B{static{this.tagName="me:mesmer"}static{this.header=`<?xml version="1.0" encoding="utf-8" ?>
<?xml-stylesheet type='text/xsl' href='../../mesmer2.xsl' media='other'?>
<?xml-stylesheet type='text/xsl' href='../../mesmer1.xsl' media='screen'?>`}constructor(e,t,n,a,i,s,o){super(e,tn.tagName),this.index=new Map,void 0!=t&&(this.index.set(e9.tagName,this.nodes.size),this.addNode(t)),void 0!=n&&(this.index.set(te.tagName,this.nodes.size),this.addNode(n)),void 0!=a&&(this.index.set(tt.tagName,this.nodes.size),this.addNode(a)),void 0!=i&&(this.index.set(eL.tagName,this.nodes.size),this.addNode(i)),void 0!=s&&(this.index.set(eR.tagName,this.nodes.size),this.addNode(s)),void 0!=o&&(this.index.set(e3.tagName,this.nodes.size),this.addNode(o))}getTitle(){let e=this.index.get(e9.tagName);if(void 0!=e)return this.nodes.get(e)}setTitle(e){let t=this.index.get(e9.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(e9.tagName,this.nodes.size),this.addNode(e))}getMoleculeList(){let e=this.index.get(te.tagName);if(void 0!=e)return this.nodes.get(e)}setMoleculeList(e){let t=this.index.get(te.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(te.tagName,this.nodes.size),this.addNode(e))}getReactionList(){let e=this.index.get(tt.tagName);if(void 0!=e)return this.nodes.get(e)}setReactionList(e){let t=this.index.get(tt.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(tt.tagName,this.nodes.size),this.addNode(e))}getConditions(){let e=this.index.get(eL.tagName);if(void 0!=e)return this.nodes.get(e)}setConditions(e){let t=this.index.get(eL.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eL.tagName,this.nodes.size),this.addNode(e))}getModelParameters(){let e=this.index.get(eR.tagName);if(void 0!=e)return this.nodes.get(e)}setModelParameters(e){let t=this.index.get(eR.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eR.tagName,this.nodes.size),this.addNode(e))}getControl(){let e=this.index.get(e3.tagName);if(void 0!=e)return this.nodes.get(e)}setControl(e){let t=this.index.get(e3.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(e3.tagName,this.nodes.size),this.addNode(e))}}let ta="1.5em",ti="1.25em",ts="1.0em",to="25px",tl="50px",tr="75px",td="100px",tg={marginTop:"1px",marginBottom:"1px"},tm={marginLeft:to,marginTop:"1px",marginBottom:"1px"},th={marginLeft:tl,marginTop:"1px",marginBottom:"1px"},tc={marginLeft:tr,marginTop:"1px",marginBottom:"1px"},tu={marginLeft:td,marginTop:"1px",marginBottom:"1px"},tp={marginLeft:"1px",marginTop:"1px",marginBottom:"1px",marginRight:"1px"},tN="remove",tx=["kJ/mol","cm-1","kcal/mol","Hartree"],tf=["cm-1","GHz"],tv=new Map,tE=-1/0,tb=1/0,ty=new Map;function tC(){let l=document.createElement("input");l.type="file",l.onchange=function(){if(l.files){for(let e=0;e<l.files.length;e++)console.log("inputElement.files["+e+"]="+l.files[e]);let r=l.files[0];if(console.log(r.name),i=r.name,null!=o){let l=new FileReader,d=0,p="";l.onload=function(S){if(null==S.target)throw Error("Event target is null");if(p+=S.target.result,null!=r){if(d<r.size){let e=r.slice(d,d+1048576);l.readAsText(e),d+=1048576}else{var w;w=p=p.trim(),null!=s&&(s.innerHTML=i),null!=o&&(o.innerHTML=w.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\n/g,"<br>").replace(/\t/g,"&nbsp;&nbsp;&nbsp;&nbsp;").replace(/  /g,"&nbsp;&nbsp;")),function(i){console.log("parse: "+i);let s=R(i,tn.tagName);e=new tn(I(s));let o=i.getElementsByTagName(e9.tagName);if(1!=o.length)throw Error("Multiple "+e9.tagName+" tags found");{let t=o[0].childNodes[0].nodeValue.trim(),n=new e9(I(o[0]),t),a=document.getElementById("title"),i=n.value;e.setTitle(n);let s="titleId";m(s);let l=u("text",s,tp,e=>{e.target instanceof HTMLInputElement&&(n.value=e.target.value,console.log(n.tagName+" changed to "+n.value),N(e.target))},i,"Title"),r=l.querySelector("input");r.style.fontSize=ta,N(r,0),a.parentNode?.insertBefore(l,a)}let l=document.getElementById("molecules"),r="moleculesDivId";if(m(r),null==l);else{let t=function(e){let t=document.createElement("div"),n=R(e,te.tagName),a=new Set;if(n.childNodes.forEach(function(e){a.add(e.nodeName)}),1!=a.size&&!(2==a.size&&a.has("#text")))throw console.error("moleculeListTagNames:"),a.forEach(e=>console.error(e)),Error("Additional tag names in moleculeList:");if(!a.has(ea.tagName))throw Error('Expecting tags with "'+ea.tagName+'" tagName but there are none!');let i=n.getElementsByTagName(ea.tagName);console.log("Number of molecules="+i.length);for(let e=0;e<i.length;e++){let n,a,s=document.createElement("div"),o=I(i[e]),l=new Set,r=i[e].childNodes;for(let e=0;e<r.length;e++){let t=r[e];l.has(t.nodeName)?"#text"!=t.nodeName&&console.warn("Another ChildNode with nodeName="+t.nodeName):l.add(t.nodeName)}let d=i[e].getElementsByTagName(k.tagName);if(d.length>1)throw Error("Expecting 1 or 0 "+k.tagName+" but finding "+d.length+"!");if(1==d.length){let e=d[0],t=e.getElementsByTagName(_.tagName);if(t.length<2)throw Error("Expecting 2 or more atoms in "+k.tagName+", but finding "+t.length+"!");let a=[];for(let e=0;e<t.length;e++)a.push(new _(I(t[e])));n=new k(I(e),a),l.delete(k.tagName)}else{let t=i[e].getElementsByTagName(_.tagName);if(1==t.length)n=new _(I(t[0]));else if(t.length>1)throw Error("Expecting 1 "+_.tagName+" but finding "+t.length+". Should these be in an "+k.tagName+"?")}l.delete(_.tagName);let m=i[e].getElementsByTagName(D.tagName);if(m.length>1)throw Error("Expecting 1 or 0 "+D.tagName+" but finding "+m.length+"!");if(1==m.length){let e=m[0],t=e.getElementsByTagName(F.tagName),n=[];for(let e=0;e<t.length;e++)n.push(new F(I(t[e])));a=new D(I(e),n),l.delete(D.tagName)}else{let t=i[e].getElementsByTagName(F.tagName);if(1==t.length)a=new F(I(t[0]));else if(t.length>1)throw Error("Expecting 1 "+F.tagName+" but finding "+t.length+". Should these be in a "+D.tagName+"?")}l.delete(F.tagName);let c=new ea(o,n,a);tv.set(c.id,c);let p=i[e].getElementsByTagName(j.tagName);if(p.length>1)throw Error("Expecting 1 or 0 "+j.tagName+" but finding "+p.length+"!");if(1==p.length){let e=document.createElement("div"),t=c.id+"_"+j.tagName+"_",n=h({content:e,buttonLabel:j.tagName,buttonFontSize:ts,level:th,contentDivId:t});s.appendChild(n);let a=new j(I(p[0]));c.setProperties(a);let i=p[0].getElementsByTagName(G.tagName);for(let t=0;t<i.length;t++){let n=new G(I(i[t]));a.setProperty(n),c.setProperties(a),n.dictRef==A.dictRef?tT(n,tx,c,i[t],e,tr):n.dictRef==$.dictRef?tT(n,tf,c,i[t],e,tr):tT(n,void 0,c,i[t],e,tr)}l.delete(j.tagName)}else{let t=i[e].getElementsByTagName(G.tagName);if(1!=t.length)throw Error("Expecting 1 "+G.tagName+" but finding "+t.length+". Should these be in a "+j.tagName+"?");let n=new G(I(t[0]));c.setProperties(n),n.dictRef==A.dictRef?tT(n,tx,c,t[0],s,tr):n.dictRef==$.dictRef?tT(n,tf,c,t[0],s,tr):tT(n,void 0,c,t[0],s,tr),l.delete(G.tagName)}let v=i[e].getElementsByTagName(Y.tagName);if(v.length>0){if(v.length>1)throw Error("Expecting 1 or 0 "+Y.tagName+" but finding "+v.length+"!");(function(e,t,n,a,i){let s=n.getElementsByTagName(W.tagName);if(s.length>0){let n=document.createElement("div"),o=t.id+"_"+Y.tagName,l=h({content:n,buttonLabel:Y.tagName,buttonFontSize:ts,level:th,contentDivId:o});a.appendChild(l);let r=[];for(let e=0;e<s.length;e++){let a=T(s[e]),o=parseFloat(a),l=new W(I(s[e]),o);r.push(l);let d=W.tagName,g=t.id+"_"+Y.tagName+"_"+W.tagName+"_"+e,m=u("number",g,tp,e=>{e.target instanceof HTMLInputElement&&tM(l,e.target)},a,d);m.style.marginLeft=i,m.style.marginTop="1px",m.style.marginBottom="1px",n.appendChild(m);let h=m.querySelector("input");h.value=a,N(h),h.addEventListener("change",t=>{a=t.target.value,r[e].setValue(parseFloat(a)),console.log("Set "+g+" to "+a),N(h)});let c=document.createElement("label");c.textContent="cm-1",m.appendChild(c)}e.setDeltaEDowns(r),t.setEnergyTransferModel(e)}})(new Y(I(v[0])),c,v[0],s,tr),l.delete(Y.tagName)}let b=i[e].getElementsByTagName(J.tagName);if(b.length>0){if(b.length>1)throw Error("Expecting 1 or 0 "+J.tagName+" but finding "+b.length+"!");(function(e,t,n,a){let i=document.createElement("label");i.textContent=J.tagName+": ";let s=document.createElement("div");s.appendChild(i);let o=f(["ClassicalRotors","me:QMRotors","QMRotors"],"DOSCMethod",t.id+"_Select_DOSCMethod",tp);o.value=e.getXsiType(),o.addEventListener("change",t=>{t.target instanceof HTMLSelectElement&&(e.setXsiType(t.target.value),console.log("Set DOSCMethod to "+t.target.value))}),t.setDOSCMethod(e),s.appendChild(o),s.style.marginLeft=n,s.style.marginTop="1px",s.style.marginBottom="1px",a.appendChild(s)})(new J(I(b[0])),c,tl,s),l.delete(J.tagName)}let S=i[e].getElementsByTagName(et.tagName);if(S.length>0){if(1!=S.length)throw Error("Expecting only 1 extra DOSCMethod, but there are "+S.length);let e=new et(I(b[0])),t=document.createElement("div"),n=c.id+"_"+et.tagName+"_",a=h({content:t,buttonLabel:et.tagName,buttonFontSize:ts,level:th,contentDivId:n});s.appendChild(a);let i=S[0].getElementsByTagName(K.tagName);if(i.length>0){if(1!=i.length)throw Error("Expecting only 1 bondRef, but there are "+i.length);let n=document.createElement("div");n.style.marginLeft=tr,n.style.marginTop="1px",n.style.marginBottom="1px";let a=document.createElement("label");a.textContent=K.tagName+": ",n.appendChild(a);let s=new K(I(i[0]),C(y(i[0])));e.setBondRef(s);let o=f(c.getBonds().getBondIds(),s.value,c.id+"_"+K.tagName,tp);o.addEventListener("change",e=>{e.target instanceof HTMLSelectElement&&(s.value=e.target.value,x(e.target))}),x(o),n.appendChild(o),t.appendChild(n)}let o=S[0].getElementsByTagName(Z.tagName);if(o.length>0){if(1!=o.length)throw Error("Expecting only 1 HinderedRotorPotential, but there are "+o.length);let n=I(o[0]),a=new Z(n),i=document.createElement("div"),s=c.id+"_"+J.tagName+"_"+Z.tagName,l=h({content:i,buttonLabel:Z.tagName,buttonFontSize:ts,level:tc,contentDivId:s});l.style.marginTop="1px",l.style.marginBottom="1px",t.appendChild(l);let r=document.createElement("label");r.style.marginLeft=td,r.style.marginTop="1px",r.style.marginBottom="1px",r.textContent="Format: ",i.appendChild(r);let d=f(Z.formats,a.format,c.id+"_"+Z.tagName,tp);d.addEventListener("change",e=>{e.target instanceof HTMLSelectElement&&(a.format=e.target.value,x(e.target))}),x(d),i.appendChild(d);let m=document.createElement("label");m.textContent="Units: ",m.style.marginLeft="2px",m.style.marginTop="1px",m.style.marginBottom="1px",i.appendChild(m),tS(Z.units,n,i,c.id+"_"+J.tagName+"_"+Z.tagName,Z.tagName,"2px","1px","1px");let u=document.createElement("label");u.style.marginLeft="2px",u.style.marginTop="1px",u.style.marginBottom="1px",u.textContent="Expansion size: ",i.appendChild(u);let p=document.createElement("input");p.type="number",p.style.marginLeft="2px",p.style.marginTop="1px",p.style.marginBottom="1px",p.id=c.id+"_"+J.tagName+"_"+Z.tagName+"_expansionSize",p.addEventListener("change",e=>{e.target instanceof HTMLInputElement&&(g(e.target.value)?a.setExpansionSize(parseInt(e.target.value)):(alert("Expansion size input is not a number, resetting..."),p.value=a.getExpansionSize().toString()),N(p))}),p.value=a.getExpansionSize().toString(),N(p),i.appendChild(p);let v=document.createElement("label");v.style.marginLeft="2px",v.style.marginTop="1px",v.style.marginBottom="1px",v.textContent="Use sine terms: ",i.appendChild(v);let b=document.createElement("input");b.type="checkbox",b.style.marginLeft="2px",b.style.marginTop="1px",b.style.marginBottom="1px",b.id=c.id+"_"+J.tagName+"_"+Z.tagName+"_useSineTerms",b.checked=a.getUseSineTerms(),b.addEventListener("change",e=>{e.target instanceof HTMLInputElement&&a.setUseSineTerms(e.target.checked)}),i.appendChild(b);let y=document.createElement("div"),C=c.id+"_"+J.tagName+"_"+Z.tagName+"_"+Q.tagName,T=h({content:y,buttonLabel:Q.tagName,buttonFontSize:ts,level:tu,contentDivId:C});i.appendChild(T);let S=[],w=o[0].getElementsByTagName(Q.tagName);for(let e=0;e<w.length;e++){let t=new Q(I(w[e]));S.push(t);let n=E({marginLeft:"125px",marginTop:"1px",marginBottom:"1px"});T.appendChild(n);let a=document.createElement("label");a.textContent="Angle: ",n.appendChild(a);let i=document.createElement("input");i.type="number",i.style.marginLeft="2px",i.style.marginTop="1px",i.style.marginBottom="1px",i.id=c.id+"_"+Q.tagName+"_angle",i.addEventListener("change",e=>{e.target instanceof HTMLInputElement&&(g(e.target.value)?t.setAngle(parseFloat(e.target.value)):(alert("Angle input is not a number, resetting..."),i.value=t.getAngle().toString()),N(i))}),i.value=t.getAngle().toString(),N(i),n.appendChild(i);let s=document.createElement("label");s.style.marginLeft="2px",s.style.marginTop="1px",s.style.marginBottom="1px",s.textContent="Potential: ",n.appendChild(s);let o=document.createElement("input");o.style.marginLeft="2px",o.style.marginTop="1px",o.style.marginBottom="1px",o.type="number",o.id=c.id+"_"+Q.tagName+"_potential",o.addEventListener("change",e=>{e.target instanceof HTMLInputElement&&(g(e.target.value)?t.setPotential(parseFloat(e.target.value)):(alert("Potential input is not a number, resetting..."),o.value=t.getPotential().toString()),N(o))}),o.value=t.getPotential().toString(),N(o),n.appendChild(o),y.appendChild(n)}T.appendChild(y),a.setPotentialPoints(S),e.setHinderedRotorPotential(a)}let r=b[0].getElementsByTagName(ee.tagName);if(r.length>0){if(1!=r.length)throw Error("Expecting only 1 Periodicity, but there are "+r.length);let n=C(y(r[0])),a=new ee(I(r[0]),parseFloat(n));e.setPeriodicity(a);let i=document.createElement("div");i.style.marginLeft=tr,i.style.marginTop="1px",i.style.marginBottom="1px";let s=document.createElement("label");s.textContent=ee.tagName+": ",i.appendChild(s);let o=u("number",c.id+"_"+ee.tagName,tp,e=>{e.target instanceof HTMLInputElement&&(a.value=parseFloat(e.target.value))},n,ee.tagName);i.appendChild(o),t.appendChild(i)}c.setExtraDOSCMethod(e),l.delete(et.tagName)}l.delete(en.tagName);let w=i[e].getElementsByTagName(en.tagName);if(w.length>0){if(1!=w.length)throw Error("Expecting only 1 reservoirSize, but there are "+w.length);let e=C(y(w[0])),t=parseFloat(e),n=new en(I(w[0]),t);c.setReservoirSize(n);let a=document.createElement("div");a.style.marginLeft=tr,a.style.marginTop="1px",a.style.marginBottom="1px";let i=document.createElement("label");i.textContent=en.tagName+": ",a.appendChild(i);let o=u("number",c.id+"_"+en.tagName,tp,e=>{e.target instanceof HTMLInputElement&&(n.value=parseFloat(e.target.value),N(e.target))},e,en.tagName);N(o.querySelector("input")),a.appendChild(o),s.appendChild(a)}l.delete("#text"),l.size>0&&(console.warn("There are additional unexpected moleculeTagNames:"),l.forEach(e=>console.warn(e)));let M=document.createElement("div");M.id=c.id+"_molstar",s.appendChild(M);let L=h({content:s,buttonLabel:c.getLabel(),buttonFontSize:ti,level:tm,contentDivId:c.tagName+"_"+c.id});t.appendChild(L)}return t}(i);t.id=r,l.appendChild(h({content:t,buttonLabel:"Molecules",buttonFontSize:ta,level:tg,contentDivId:r})),e.setMoleculeList(new te(I(t),Array.from(tv.values())))}let d=document.getElementById("reactions"),p="reactionsDivId";if(m(p),null==d);else{let t=function(e){let t=document.createElement("div");t.style.marginTop="1px",t.style.marginBottom="1px";let n=R(e,tt.tagName),a=new Set;if(n.childNodes.forEach(function(e){a.add(e.nodeName)}),1!=a.size&&!(2==a.size&&a.has("#text")))throw console.error("reactionListTagNames:"),a.forEach(e=>console.error(e)),Error("Additional tag names in reactionList:");if(!a.has(eN.tagName))throw Error('Expecting tags with "'+eN.tagName+'" tagName but there are none!');let i=n.getElementsByTagName(eN.tagName);console.log("Number of reactions="+i.length);for(let e=0;e<i.length;e++){let n=document.createElement("div"),a=I(i[e]),s=new Set,o=i[e].childNodes;for(let e=0;e<o.length;e++){let t=o[e];s.has(t.nodeName)?"#text"!=t.nodeName&&console.warn("Another ChildNode with nodeName="+t.nodeName):s.add(t.nodeName)}let l=new eN(a);ty.set(l.id,l);let r=h({content:n,buttonLabel:l.id+"("+l.getLabel()+")",buttonFontSize:ti,level:tm,contentDivId:l.tagName+"_"+l.id});t.appendChild(r);let d=i[e].getElementsByTagName(es.tagName);if(s.delete(es.tagName),d.length>0){let e=document.createElement("div"),t=[];for(let n=0;n<d.length;n++){let a=new ei(I(b(d[n],ea.tagName))),i=new es(I(d[n]),a);t.push(i);let s=document.createElement("div"),o=document.createElement("label");o.textContent=a.ref+" role: ",s.appendChild(o);let l=f(["deficientReactant","excessReactant","modelled"],"Role",a.ref+"_Select_Role",tp);l.value=a.role,l.addEventListener("change",e=>{e.target instanceof HTMLSelectElement&&(a.setRole(e.target.value),console.log("Set Role to "+e.target.value))}),s.appendChild(l),s.style.marginLeft=tr,s.style.marginTop="1px",s.style.marginBottom="1px",e.appendChild(s)}l.setReactants(t);let a=h({content:e,buttonLabel:"Reactants",buttonFontSize:ts,level:th,contentDivId:l.id+"_"+es.tagName});n.appendChild(a)}let g=i[e].getElementsByTagName(eo.tagName);if(s.delete(eo.tagName),g.length>0){let e=document.createElement("div"),t=[];for(let n=0;n<g.length;n++){let a=new ei(I(b(g[n],ea.tagName))),i=new eo(I(g[n]),a);t.push(i);let s=document.createElement("div"),o=document.createElement("label");o.textContent=a.ref+" role: ",s.appendChild(o);let l=f(["modelled","sink"],"Role",a.ref+"_Select_Role",tp);l.value=a.role,l.addEventListener("change",e=>{e.target instanceof HTMLSelectElement&&(a.setRole(e.target.value),console.log("Set Role to "+e.target.value))}),s.appendChild(l),s.style.marginLeft=tr,s.style.marginTop="1px",s.style.marginBottom="1px",e.appendChild(s)}l.setProducts(t);let a=h({content:e,buttonLabel:"Products",buttonFontSize:ts,level:th,contentDivId:l.id+"_"+eo.tagName});n.appendChild(a)}let m=i[e].getElementsByTagName(eu.tagName);if(m.length>0){if(m.length>1)throw Error("Expecting 1 "+eu.tagName+" but finding "+m.length+"!");let e=new eu(I(m[0]));l.setTunneling(e);let t=document.createElement("div"),a=document.createElement("label");a.textContent=eu.tagName+": ",t.appendChild(a);let i=f(["Eckart","WKB"],"Tunneling",l.id+"_Select_Tunneling",tp);i.value=e.getName(),i.addEventListener("change",t=>{t.target instanceof HTMLSelectElement&&(e.setName(t.target.value),console.log("Set Tunneling to "+t.target.value))}),t.appendChild(i),t.style.marginLeft=tl,t.style.marginTop="1px",t.style.marginBottom="1px",n.appendChild(t)}let c=i[e].getElementsByTagName(el.tagName);if(c.length>0){let e=document.createElement("div"),t=[];for(let n=0;n<c.length;n++){let a=new ei(I(b(c[n],ea.tagName))),i=new el(I(c[n]),a);t.push(i);let s=document.createElement("label");s.textContent=a.ref+" role: transitionState",s.style.marginLeft=tr,s.style.marginTop="1px",s.style.marginBottom="1px",e.appendChild(s)}l.setTransitionStates(t);let a=h({content:e,buttonLabel:"Transition States",buttonFontSize:ts,level:th,contentDivId:l.id+"_"+el.tagName});n.appendChild(a)}let p=i[e].getElementsByTagName(eh.tagName);if(p.length>0){if(p.length>1)throw Error("Expecting 1 "+eh.tagName+" but finding "+p.length+"!");{let e,t=document.createElement("div"),a=I(p[0]),i=a.get("name");if(void 0==i||i==ec.xsiType2){let i=a.get("xsi:type");if(e=new ec(a),i==ec.xsiType||i==ec.xsiType2){let a=p[0].getElementsByTagName(er.tagName);if(null!=a&&null!=a[0]){let n=T(a[0]),i=parseFloat(n),s=I(a[0]),o=new er(s,i);e.setPreExponential(o);let r=er.tagName,d=l.id+"_"+ec.tagName+"_"+er.tagName,g=u("number",d,tp,e=>{e.target instanceof HTMLInputElement&&tM(o,e.target)},n,r);g.style.marginLeft=tr,g.style.marginTop="1px",g.style.marginBottom="1px",t.appendChild(g);let m=g.querySelector("input");m.value=n,N(m),m.addEventListener("change",e=>{n=e.target.value,o.value=parseFloat(n),console.log("Set "+d+" to "+n),N(m)}),tS(void 0,s,g,l.id+"_"+ec.xsiType+"_"+er.tagName,er.tagName,"2px","1px","1px"),t.appendChild(g)}let i=p[0].getElementsByTagName(ed.tagName);if(null!=i&&null!=i[0]){let n=T(i[0]),a=parseFloat(n),s=I(i[0]),o=new ed(s,a);e.setActivationEnergy(o);let r=ed.tagName,d=l.id+"_"+ec.tagName+"_"+ed.tagName,g=u("number",d,tp,e=>{e.target instanceof HTMLInputElement&&tM(o,e.target)},n,r);g.style.marginLeft=tr,g.style.marginTop="1px",g.style.marginBottom="1px";let m=g.querySelector("input");m.value=n,N(m),m.addEventListener("change",e=>{n=e.target.value,o.value=parseFloat(n),console.log("Set "+d+" to "+n),N(m)}),tS(void 0,s,g,l.id+"_"+ec.xsiType+"_"+ed.tagName,ed.tagName,"2px","1px","1px"),t.appendChild(g)}let s=p[0].getElementsByTagName(eg.tagName);if(null!=s&&null!=s[0]){let n=T(s[0]),a=parseFloat(n),i=I(s[0]),o=new eg(i,a);e.setTInfinity(o);let r=eg.tagName,d=l.id+"_"+ec.tagName+"_"+eg.tagName,g=u("number",d,tp,e=>{e.target instanceof HTMLInputElement&&tM(o,e.target)},n,r);g.style.marginLeft=tr,g.style.marginTop="1px",g.style.marginBottom="1px";let m=g.querySelector("input");m.value=n,N(m),m.addEventListener("change",e=>{n=e.target.value,o.value=parseFloat(n),console.log("Set "+d+" to "+n),N(m)}),tS(void 0,i,g,l.id+"_"+ec.xsiType+"_"+eg.tagName,eg.tagName,"2px","1px","1px"),t.appendChild(g)}let o=p[0].getElementsByTagName(em.tagName);if(null!=o&&null!=o[0]){let n=T(o[0]),a=parseFloat(n),i=I(o[0]),s=new em(i,a);e.setNInfinity(s);let r=em.tagName,d=l.id+"_"+ec.tagName+"_"+em.tagName,g=u("number",d,tp,e=>{e.target instanceof HTMLInputElement&&tM(s,e.target)},n,r);g.style.marginLeft=tr,g.style.marginTop="1px",g.style.marginBottom="1px",t.appendChild(g);let m=g.querySelector("input");m.value=n,N(m),m.addEventListener("change",e=>{n=e.target.value,s.value=parseFloat(n),console.log("Set "+d+" to "+n),N(m)}),tS(void 0,i,g,l.id+"_"+ec.xsiType+"_"+em.tagName,em.tagName,"2px","1px","1px"),t.appendChild(g)}let r=l.id+"_"+eh.tagName,d=h({content:t,buttonLabel:eh.tagName,buttonFontSize:ts,level:th,contentDivId:r});n.appendChild(d)}else throw Error("Unexpected xsi:type="+i)}else{e=new eh(a);let i=document.createElement("label");i.textContent=eh.tagName+": "+a.get("name"),i.style.marginLeft=tl,i.style.marginTop="1px",i.style.marginBottom="1px",t.appendChild(i),n.appendChild(t)}l.setMCRCMethod(e)}}let x=i[e].getElementsByTagName(ep.tagName);if(x.length>0){let e;if(x.length>1)throw Error("Expecting 1 "+ep.tagName+" but finding "+x.length+"!");let t=parseFloat(C(y(x[0])));e=new ep(I(x[0]),t),l.setExcessReactantConc(e)}}return t}(i);t.id=p,d.appendChild(h({content:t,buttonLabel:"Reactions",buttonFontSize:ta,level:tg,contentDivId:p})),e.setReactionList(new tt(I(t),Array.from(ty.values())))}t_();let S=document.getElementById("conditions"),w="conditionsDivId";if(m(w),null==S);else{let n=function(e){console.log(eL.tagName);let n=document.createElement("div"),a=R(e,eL.tagName);t=new eL(I(a));let i=document.createElement("div");n.appendChild(i),n.appendChild(h({content:i,buttonLabel:eb.name,buttonFontSize:ti,level:tm,contentDivId:eb.tagName}));let s=v("add",th);i.appendChild(s),s.addEventListener("click",()=>{let e=new eb(new Map,"");t.addBathGas(e);let n=E({marginLeft:tl,marginTop:"1px",marginBottom:"1px"}),a=document.createElement("label");a.textContent=eb.tagName+": ",n.appendChild(a);let s=f(Array.from(new Set(tv.keys())),eb.tagName,eL.tagName+"_"+eb.tagName,tp);s.value=e.value,s.addEventListener("change",t=>{t.target instanceof HTMLSelectElement&&(e.value=t.target.value,console.log("Added "+t.target.value+" as a "+eb.tagName),x(t.target))}),s.style.marginLeft="2px",x(s),n.appendChild(s);let o=v(tN,tp);o.addEventListener("click",()=>{i.removeChild(n),t.removeBathGas(e)}),n.appendChild(o),i.appendChild(n)});let o=Array.from(a.children).filter(e=>e.tagName===eb.tagName);if(o.length>0)for(let e=0;e<o.length;e++){let n=new eb(I(o[e]),C(y(o[e])));console.log("bathGas"+n.toString()),t.addBathGas(n);let a=document.createElement("div"),s=document.createElement("label");s.textContent=eb.tagName+": ",a.appendChild(s);let l=f(Array.from(new Set(tv.keys())),eb.tagName,eL.tagName+"_"+eb.tagName,tp);l.value=n.value,l.addEventListener("change",e=>{e.target instanceof HTMLSelectElement&&(n.value=e.target.value,console.log("Set "+ew.tagName+"_"+eb.tagName+" to "+e.target.value),x(e.target))}),x(l),a.style.marginLeft=tl,a.style.marginTop="1px",a.style.marginBottom="1px",a.appendChild(l);let r=v(tN,tp);r.addEventListener("click",()=>{i.removeChild(a),t.removeBathGas(n)}),a.appendChild(r),i.appendChild(a)}let l=document.createElement("div");n.appendChild(l);let r=new eM(new Map);n.appendChild(h({content:l,buttonLabel:eM.name,buttonFontSize:ti,level:tm,contentDivId:eb.tagName}));let d=v("add",th);l.appendChild(d),d.addEventListener("click",()=>{let e=new Map;e.set("units","Torr");let t=new ew(e),n=r.addPTpair(t),a=E({marginLeft:tl,marginTop:"1px",marginBottom:"1px"});tL(a,t),tP(a,t),tS(void 0,e,a,ew.tagName,ew.tagName,"2px","1px","1px");let i=v("add details",tp);a.appendChild(i),i.addEventListener("click",()=>{let e,n=document.createElement("div");tB(a,t),tz(a,t),tI(a,t),tR(a,t),(e=v("add "+ey.tagName,tp)).addEventListener("click",()=>{let n=document.createElement("div");n.style.marginLeft="5px";let i=new ey(new Map,NaN);t.setExperimentRate(i);let s=document.createElement("label");s.textContent=ey.tagName+": ",n.appendChild(s),u("number",ew.tagName+"_"+ey.tagName,tp,e=>{e.target instanceof HTMLInputElement&&tM(i,e.target)},"",ey.tagName).style.marginLeft=tr,a.insertBefore(n,e),a.removeChild(e)}),a.insertBefore(n,i),a.removeChild(i)});let s=v(tN,tp);s.addEventListener("click",()=>{l.removeChild(a),r.removePTpair(n),t.removeBathGas()}),a.appendChild(s),l.appendChild(a)});let g=v("Add from spreadsheet",tp);l.appendChild(g),g.addEventListener("click",()=>{let e=E({marginLeft:tl,marginTop:"1px",marginBottom:"1px"}),t=document.createElement("input");t.type="text",t.style.marginLeft=tl,t.style.marginTop="1px",t.style.marginBottom="1px",e.appendChild(t),l.insertBefore(e,d),t.addEventListener("change",()=>{if(console.log("inputElement.value="+t.value),console.log("inputElement.value.length="+t.value.length),t.value.length>0){let n=t.value.split(" ");console.log("pTPairsArray.length="+n.length);for(let e=0;e<n.length;e++){let t=new Map;t.set("units","Torr");let a=new ew(t),i=n[e].split("	");if(2==i.length){let e=parseFloat(i[0]),t=parseFloat(i[1]);a.setP(e),a.setT(t),console.log("pTPair="+a)}else console.warn("pTPairArray.length="+i.length);let s=E({marginLeft:tl,marginTop:"1px",marginBottom:"1px"});tL(s,a),tP(s,a),tS(void 0,t,s,ew.tagName,ew.tagName,"2px","1px","1px"),tB(s,a),tz(s,a),tI(s,a),tR(s,a),console.log(d),console.log(l),l.insertBefore(s,d),r.addPTpair(a)}l.removeChild(e)}})});let m=a.getElementsByTagName(eM.tagName);if(m.length>0){if(m.length>1)throw Error("Expecting 1 "+eM.tagName+" but finding "+m.length+"!");let e=document.createElement("div");n.appendChild(e);let a=I(m[0]),i=m[0].getElementsByTagName(ew.tagName);if(0==i.length)throw Error("Expecting 1 or more "+ew.tagName+" but finding 0!");{let n=new eM(a);for(let t=0;t<i.length;t++){let a=new ew(I(i[t])),s=E({marginLeft:tl,marginTop:"1px",marginBottom:"1px"});e.appendChild(s);let o=i[t].getElementsByTagName(eb.tagName);if(o.length>0){o.length>1&&console.warn("xml_bathGass.length="+o.length);let e=document.createElement("label");e.textContent=eb.tagName+": ",s.appendChild(e);let t=C(y(o[0])),n=new eb(I(o[0]),t);a.setBathGas(n);let i=f(Array.from(new Set(tv.keys())),eb.tagName,ew.tagName+"_"+eb.tagName,tp);i.value=n.value,i.addEventListener("change",e=>{e.target instanceof HTMLSelectElement&&(n.value=e.target.value,console.log("Set "+ew.tagName+"_"+eb.tagName+" to "+e.target.value),x(e.target))}),x(i),s.appendChild(i)}let l=i[t].getElementsByTagName(ey.tagName);if(l.length>0){l.length>1&&console.warn("xml_experimentRates.length="+l.length);let e=C(y(l[0])),t=new ey(I(l[0]),parseFloat(e));a.setExperimentRate(t);let n=u("number",ew.tagName+"_"+ey.tagName,tp,e=>{e.target instanceof HTMLInputElement&&tM(t,e.target)},t.value.toString(),ey.tagName);n.style.marginTop="1px",n.style.marginBottom="1px",s.appendChild(n)}tL(s,a),tP(s,a),tS(void 0,I(i[t]),s,ew.tagName,ew.tagName,"2px","1px","1px"),tB(s,a),tz(s,a),tI(s,a),tR(s,a),n.addPTpair(a),e.appendChild(s)}t.setPTs(n)}}return n}(i);n.id=w,S.appendChild(h({content:n,buttonLabel:"Conditions",buttonFontSize:ta,level:tg,contentDivId:w})),e.setConditions(t)}let M=document.getElementById("modelParameters"),L="modelParametersDivId";if(m(L),null==M);else{let t=function(e){console.log(eR.tagName);let t=document.createElement("div"),a=R(e,eR.tagName);n=new eR(I(a));let i=a.getElementsByTagName(eP.tagName);if(i.length>0){if(i.length>1)throw Error("Expecting 1 "+eP.tagName+" but finding "+i.length+"!");let e=I(i[0]),a=parseFloat(C(y(i[0]))),s=new eP(e,a);n.setGrainSize(s);let o=E(tm),l=u("number",eR.tagName+"_"+eP.tagName,tp,e=>{e.target instanceof HTMLInputElement&&(tM(s,e.target),N(e.target))},a.toString(),eP.tagName);N(l.querySelector("input")),o.appendChild(l),tS(void 0,e,o,eR.tagName+"_"+eP.tagName,eP.tagName,"2px","1px","1px"),t.appendChild(o)}let s=a.getElementsByTagName(e8.tagName);if(s.length>0){if(s.length>1)throw Error("Expecting 1 "+e8.tagName+" but finding "+s.length+"!");let e=I(s[0]),a=parseFloat(C(y(s[0]))),i=new e8(e,a);n.setAutomaticallySetMaxEne(i);let o=u("number",eR.tagName+"_"+e8.tagName,tp,e=>{e.target instanceof HTMLInputElement&&(tM(i,e.target),N(e.target))},a.toString(),e8.tagName);N(o.querySelector("input")),o.style.marginLeft=to,o.style.marginTop="1px",o.style.marginBottom="1px",t.appendChild(o),tS(void 0,e,t,eR.tagName+"_"+e8.tagName,e8.tagName,"2px","1px","1px")}let o=a.getElementsByTagName(ez.tagName);if(o.length>0){if(o.length>1)throw Error("Expecting 1 "+ez.tagName+" but finding "+o.length+"!");let e=I(o[0]),a=new ez(e,parseFloat(C(y(o[0]))));n.setEnergyAboveTheTopHill(a);let i=u("number",eR.tagName+"_"+ez.tagName,tp,e=>{e.target instanceof HTMLInputElement&&(tM(a,e.target),N(e.target))},a.value.toString(),ez.tagName);N(i.querySelector("input")),i.style.marginLeft=to,i.style.marginTop="1px",i.style.marginBottom="1px",t.appendChild(i),tS(void 0,e,t,eR.tagName+"_"+ez.tagName,ez.tagName,"2px","1px","1px")}let l=a.getElementsByTagName(eI.tagName);if(l.length>0){if(l.length>1)throw Error("Expecting 1 "+eI.tagName+" but finding "+l.length+"!");let e=I(l[0]),a=new eI(e,parseFloat(C(y(l[0]))));n.setMaxTemperature(a);let i=u("number",eR.tagName+"_"+eI.tagName,tp,e=>{e.target instanceof HTMLInputElement&&(tM(a,e.target),N(e.target))},a.value.toString(),eI.tagName);N(i.querySelector("input")),i.style.marginLeft=to,i.style.marginTop="1px",i.style.marginBottom="1px",t.appendChild(i),tS(void 0,e,t,eR.tagName+"_"+eI.tagName,eI.tagName,"2px","1px","1px")}return t}(i);t.id=L,M.appendChild(h({content:t,buttonLabel:"Model Parameters",buttonFontSize:ta,level:tg,contentDivId:L})),e.setModelParameters(n)}let P=document.getElementById("control"),B="controlDivId";if(m(B),null==P);else{let t=function(e){let t,n,i,s,o,l,r,d;console.log(e3.tagName);let m=document.createElement("div"),h=R(e,e3.tagName);a=new e3(I(h));let c=E(tm);m.appendChild(c);let p=h.getElementsByTagName(e_.tagName),v=document.createElement("label");c.appendChild(v),v.textContent=e_.tagName;let b=document.createElement("input");c.appendChild(b),b.type="checkbox",b.id=e_.tagName,1==p.length?(b.checked=!0,a.setCalculateRateCoefficientsOnly(new e_)):p.length>1&&console.warn("xml_calculateRateCoefficientsOnly.length="+p.length),b.addEventListener("change",e=>{e.target instanceof HTMLInputElement&&(e.target.checked?a.setCalculateRateCoefficientsOnly(new e_):a.removeCalculateRateCoefficientsOnly())});let T=E(tm);m.appendChild(T);let S=h.getElementsByTagName(ek.tagName),w=document.createElement("label");T.appendChild(w),w.textContent=ek.tagName;let M=document.createElement("input");T.appendChild(M),M.type="checkbox",M.id=ek.tagName,1==S.length?(M.checked=!0,a.setPrintCellDOS(new ek)):S.length>1&&console.warn("xml_printCellDOS.length="+S.length),M.addEventListener("change",e=>{e.target instanceof HTMLInputElement&&(e.target.checked?a.setPrintCellDOS(new ek):a.removePrintCellDOS())});let L=E(tm);m.appendChild(L);let P=h.getElementsByTagName(eF.tagName),B=document.createElement("label");L.appendChild(B),B.textContent=eF.tagName;let z=document.createElement("input");L.appendChild(z),z.type="checkbox",z.id=eF.tagName,1==P.length?(z.checked=!0,a.setPrintCellTransitionStateFlux(new eF)):P.length>1&&console.warn("xml_printCellTransitionStateFlux.length="+P.length),z.addEventListener("change",e=>{e.target instanceof HTMLInputElement&&(e.target.checked?a.setPrintCellTransitionStateFlux(new eF):a.removePrintCellTransitionStateFlux())});let _=E(tm);m.appendChild(_);let k=h.getElementsByTagName(eD.tagName),F=document.createElement("label");_.appendChild(F),F.textContent=eD.tagName;let D=document.createElement("input");_.appendChild(D),D.type="checkbox",D.id=eD.tagName,1==k.length?(D.checked=!0,a.setPrintReactionOperatorColumnSums(new eD)):k.length>1&&console.warn("xml_printReactionOperatorColumnSums.length="+k.length),D.addEventListener("change",e=>{e.target instanceof HTMLInputElement&&(e.target.checked?a.setPrintReactionOperatorColumnSums(new eD):a.removePrintReactionOperatorColumnSums())});let H=E(tm);m.appendChild(H);let O=h.getElementsByTagName(eH.tagName),G=document.createElement("label");H.appendChild(G),G.textContent=eH.tagName;let A=document.createElement("input");H.appendChild(A),A.type="checkbox",A.id=eH.tagName,1==O.length?(A.checked=!0,a.setPrintGrainBoltzmann(new eH)):O.length>1&&console.warn("xml_printGrainBoltzmann.length="+O.length),A.addEventListener("change",e=>{e.target instanceof HTMLInputElement&&(e.target.checked?a.setPrintGrainBoltzmann(new eH):a.removePrintGrainBoltzmann())});let q=E(tm);m.appendChild(q);let U=h.getElementsByTagName(eO.tagName),$=document.createElement("label");q.appendChild($),$.textContent=eO.tagName;let X=document.createElement("input");q.appendChild(X),X.type="checkbox",X.id=eO.tagName,1==U.length?(X.checked=!0,a.setPrintGrainDOS(new eO)):U.length>1&&console.warn("xml_printGrainDOS.length="+U.length),X.addEventListener("change",e=>{e.target instanceof HTMLInputElement&&(e.target.checked?a.setPrintGrainDOS(new eO):a.removePrintGrainDOS())});let V=E(tm);m.appendChild(V);let j=h.getElementsByTagName(eG.tagName),W=document.createElement("label");V.appendChild(W),W.textContent=eG.tagName;let Y=document.createElement("input");V.appendChild(Y),Y.type="checkbox",Y.id=eG.tagName,1==j.length?(Y.checked=!0,a.setPrintGrainkbE(new eG)):j.length>1&&console.warn("xml_printGrainkbE.length="+j.length),Y.addEventListener("change",e=>{e.target instanceof HTMLInputElement&&(e.target.checked?a.setPrintGrainkbE(new eG):a.removePrintGrainkbE())});let J=E(tm);m.appendChild(J);let K=h.getElementsByTagName(eA.tagName),Q=document.createElement("label");J.appendChild(Q),Q.textContent=eA.tagName;let Z=document.createElement("input");J.appendChild(Z),Z.type="checkbox",Z.id=eA.tagName,1==K.length?(Z.checked=!0,a.setPrintGrainkfE(new eA)):K.length>1&&console.warn("xml_printGrainkfE.length="+K.length),Z.addEventListener("change",e=>{e.target instanceof HTMLInputElement&&(e.target.checked?a.setPrintGrainkfE(new eA):a.removePrintGrainkfE())});let ee=E(tm);m.appendChild(ee);let et=h.getElementsByTagName(eq.tagName),en=document.createElement("label");ee.appendChild(en),en.textContent=eq.tagName;let ea=document.createElement("input");ee.appendChild(ea),ea.type="checkbox",ea.id=eq.tagName,1==et.length?(ea.checked=!0,a.setPrintTSsos(new eq)):et.length>1&&console.warn("xml_printTSsos.length="+et.length),ea.addEventListener("change",e=>{e.target instanceof HTMLInputElement&&(e.target.checked?a.setPrintTSsos(new eq):a.removePrintTSsos())});let ei=E(tm);m.appendChild(ei);let es=h.getElementsByTagName(eU.tagName),eo=document.createElement("label");ei.appendChild(eo),eo.textContent=eU.tagName;let el=document.createElement("input");ei.appendChild(el),el.type="checkbox",el.id=eU.tagName,1==es.length?(el.checked=!0,a.setPrintGrainedSpeciesProfile(new eU)):es.length>1&&console.warn("xml_printGrainedSpeciesProfile.length="+es.length),el.addEventListener("change",e=>{e.target instanceof HTMLInputElement&&(e.target.checked?a.setPrintGrainedSpeciesProfile(new eU):a.removePrintGrainedSpeciesProfile())});let er=E(tm);m.appendChild(er);let ed=h.getElementsByTagName(e$.tagName),eg=document.createElement("label");er.appendChild(eg),eg.textContent=e$.tagName;let em=document.createElement("input");er.appendChild(em),em.type="checkbox",em.id=e$.tagName,1==ed.length?(em.checked=!0,a.setPrintGrainTransitionStateFlux(new e$)):ed.length>1&&console.warn("xml_printGrainTransitionStateFlux.length="+ed.length),em.addEventListener("change",e=>{e.target instanceof HTMLInputElement&&(e.target.checked?a.setPrintGrainTransitionStateFlux(new e$):a.removePrintGrainTransitionStateFlux())});let eh=E(tm);m.appendChild(eh);let ec=h.getElementsByTagName(eX.tagName),eu=document.createElement("label");eh.appendChild(eu),eu.textContent=eX.tagName;let ep=document.createElement("input");eh.appendChild(ep),ep.type="checkbox",ep.id=eX.tagName,1==ec.length?(ep.checked=!0,a.setPrintReactionOperatorSize(new eX)):ec.length>1&&console.warn("xml_printReactionOperatorSize.length="+ec.length),ep.addEventListener("change",e=>{e.target instanceof HTMLInputElement&&(e.target.checked?a.setPrintReactionOperatorSize(new eX):a.removePrintReactionOperatorSize())});let eN=E(tm);m.appendChild(eN);let ex=h.getElementsByTagName(eV.tagName),ef=document.createElement("label");eN.appendChild(ef),ef.textContent=eV.tagName;let ev=document.createElement("input");eN.appendChild(ev),ev.type="checkbox",ev.id=eV.tagName,1==ex.length?(ev.checked=!0,a.setPrintSpeciesProfile(new eV)):ex.length>1&&console.warn("xml_printSpeciesProfile.length="+ex.length),ev.addEventListener("change",e=>{e.target instanceof HTMLInputElement&&(e.target.checked?a.setPrintSpeciesProfile(new eV):a.removePrintSpeciesProfile())});let eE=E(tm);m.appendChild(eE);let eb=h.getElementsByTagName(ej.tagName),ey=document.createElement("label");eE.appendChild(ey),ey.textContent=ej.tagName;let eC=document.createElement("input");eE.appendChild(eC),eC.type="checkbox",eC.id=ej.tagName,1==eb.length?(eC.checked=!0,a.setPrintPhenomenologicalEvolution(new ej)):eb.length>1&&console.warn("xml_printPhenomenologicalEvolution.length="+eb.length),eC.addEventListener("change",e=>{e.target instanceof HTMLInputElement&&(e.target.checked?a.setPrintPhenomenologicalEvolution(new ej):a.removePrintPhenomenologicalEvolution())});let eT=E(tm);m.appendChild(eT);let eS=h.getElementsByTagName(eW.tagName),ew=document.createElement("label");eT.appendChild(ew),ew.textContent=eW.tagName;let eM=document.createElement("input");eT.appendChild(eM),eM.type="checkbox",eM.id=eW.tagName,1==eS.length?(eM.checked=!0,a.setPrintTunnelingCoefficients(new eW)):eS.length>1&&console.warn("xml_printTunnelingCoefficients.length="+eS.length),eM.addEventListener("change",e=>{e.target instanceof HTMLInputElement&&(e.target.checked?a.setPrintTunnelingCoefficients(new eW):a.removePrintTunnelingCoefficients())});let eL=E(tm);m.appendChild(eL);let eP=h.getElementsByTagName(eY.tagName),eB=document.createElement("label");eL.appendChild(eB),eB.textContent=eY.tagName;let ez=document.createElement("input");eL.appendChild(ez),ez.type="checkbox",ez.id=eY.tagName,1==eP.length?(ez.checked=!0,a.setPrintCrossingCoefficients(new eY)):eP.length>1&&console.warn("xml_printCrossingCoefficients.length="+eP.length),ez.addEventListener("change",e=>{e.target instanceof HTMLInputElement&&(e.target.checked?a.setPrintCrossingCoefficients(new eY):a.removePrintCrossingCoefficients())});let eI=E(tm);m.appendChild(eI);let eR=h.getElementsByTagName(eJ.tagName),e9=document.createElement("label");eI.appendChild(e9),e9.textContent=eJ.tagName;let te=document.createElement("input");eI.appendChild(te),te.type="checkbox",te.id=eJ.tagName,1==eR.length?(te.checked=!0,a.setTestDOS(new eJ)):eR.length>1&&console.warn("xml_testDOS.length="+eR.length),te.addEventListener("change",e=>{e.target instanceof HTMLInputElement&&(e.target.checked?a.setTestDOS(new eJ):a.removeTestDOS())});let tt=E(tm);m.appendChild(tt);let tn=h.getElementsByTagName(eK.tagName),ta=document.createElement("label");tt.appendChild(ta),ta.textContent=eK.tagName;let ti=document.createElement("input");tt.appendChild(ti),ti.type="checkbox",ti.id=eK.tagName,1==tn.length?(ti.checked=!0,a.setTestRateConstants(new eK)):tn.length>1&&console.warn("xml_testRateConstants.length="+tn.length),ti.addEventListener("change",e=>{e.target instanceof HTMLInputElement&&(e.target.checked?a.setTestRateConstants(new eK):a.removeTestRateConstants())});let ts=E(tm);m.appendChild(ts);let to=h.getElementsByTagName(eQ.tagName),tl=document.createElement("label");ts.appendChild(tl),tl.textContent=eQ.tagName;let tr=document.createElement("input");ts.appendChild(tr),tr.type="checkbox",tr.id=eQ.tagName,1==to.length?(tr.checked=!0,a.setUseTheSameCellNumberForAllConditions(new eQ)):to.length>1&&console.warn("xml_useTheSameCellNumberForAllConditions.length="+to.length),tr.addEventListener("change",e=>{e.target instanceof HTMLInputElement&&(e.target.checked?a.setUseTheSameCellNumberForAllConditions(new eQ):a.removeUseTheSameCellNumberForAllConditions())});let td=E(tm);m.appendChild(td);let tg=h.getElementsByTagName(e0.tagName),th=document.createElement("label");td.appendChild(th),th.textContent=e0.tagName;let tc=document.createElement("input");td.appendChild(tc),tc.type="checkbox",tc.id=e0.tagName,1==tg.length?(tc.checked=!0,a.setHideInactive(new e0)):tg.length>1&&console.warn("xml_hideInactive.length="+tg.length),tc.addEventListener("change",e=>{e.target instanceof HTMLInputElement&&(e.target.checked?a.setHideInactive(new e0):a.removeHideInactive())});let tu=E(tm);m.appendChild(tu);let tN=h.getElementsByTagName(eZ.tagName),tx=document.createElement("label");tu.appendChild(tx),tx.textContent=eZ.tagName;let tf=document.createElement("input");tu.appendChild(tf),tf.type="checkbox",tf.id=eZ.tagName,1==tN.length?(tf.checked=!0,a.setForceMacroDetailedBalance(new eZ)):tN.length>1&&console.warn("xml_forceMacroDetailedBalance.length="+tN.length),tf.addEventListener("change",e=>{e.target instanceof HTMLInputElement&&(e.target.checked?a.setForceMacroDetailedBalance(new eZ):a.removeForceMacroDetailedBalance())});let tv=E(tm);m.appendChild(tv);let tE=h.getElementsByTagName(e7.tagName),tb=document.createElement("label");tv.appendChild(tb),tb.textContent=e7.tagName;let ty=document.createElement("input");tv.appendChild(ty),ty.type="checkbox",ty.id=e7.tagName,1==tE.length?(ty.checked=!0,n=new e7(t=I(tE[0])),a.setTestMicroRates(n)):((t=new Map).set("Tmax",""),t.set("Tmin",""),t.set("Tstep",""),n=new e7(t)),ty.addEventListener("change",e=>{if(e.target instanceof HTMLInputElement){if(e.target.checked){a.setTestMicroRates(n);let e=e3.tagName+"_"+e7.tagName+"_Tmax",t=document.getElementById(e);null!=t&&t.remove();let i=n.getTmax(),s=u("number",e+"_input",tp,e=>{e.target instanceof HTMLInputElement&&(g(e.target.value)?(n.setTmax(parseFloat(e.target.value)),console.log("Set Tmax to "+e.target.value)):(alert("Value is not numeric, resetting..."),e.target.value=i.toString()),N(e.target))},i.toString(),"Tmax");s.id=e,N(s.querySelector("input")),tv.appendChild(s);let o=e3.tagName+"_"+e7.tagName+"_tMin",l=document.getElementById(o);null!=l&&l.remove();let r=u("number",o+"_input",tp,e=>{e.target instanceof HTMLInputElement&&(g(e.target.value)?(n.setTmin(parseFloat(e.target.value)),console.log("Set Tmin to "+e.target.value)):(alert("Value is not numeric, resetting..."),e.target.value=i.toString()),N(e.target))},n.getTmin().toString(),"Tmin");r.id=o,N(r.querySelector("input")),tv.appendChild(r);let d=e3.tagName+"_"+e7.tagName+"_tStep",m=document.getElementById(d);null!=m&&m.remove();let h=u("number",d+"_input",tp,e=>{e.target instanceof HTMLInputElement&&(g(e.target.value)?(n.setTstep(parseFloat(e.target.value)),console.log("Set Tstep to "+e.target.value)):(alert("Value is not numeric, resetting..."),e.target.value=i.toString()),N(e.target))},n.getTstep().toString(),"Tstep");h.id=d,N(h.querySelector("input")),tv.appendChild(h)}else{a.removeTestMicroRates();let e=e3.tagName+"_"+e7.tagName+"_Tmax",t=document.getElementById(e);null!=t&&t.remove();let n=e3.tagName+"_"+e7.tagName+"_tMin",i=document.getElementById(n);null!=i&&i.remove();let s=e3.tagName+"_"+e7.tagName+"_tStep",o=document.getElementById(s);null!=o&&o.remove()}}});let tC=E(tm);m.appendChild(tC);let tT=h.getElementsByTagName(e1.tagName),tS=document.createElement("label");tC.appendChild(tS),tS.textContent=e1.tagName;let tw=document.createElement("input");tC.appendChild(tw),tw.type="checkbox",tw.id=e1.tagName,1==tT.length?(tw.checked=!0,i=new e1(I(tT[0]),C(y(tT[0]))),a.setCalcMethod(i)):(tw.checked=!1,i=new e1(new Map,"")),tw.addEventListener("change",e=>{if(e.target instanceof HTMLInputElement){if(e.target.checked){a.setCalcMethod(i);let e=e3.tagName+"_"+e1.tagName+"_select",t=document.getElementById(e);null!=t&&t.remove();let n=i.value,s=f(e1.options,n,e,tp);s.addEventListener("change",e=>{e.target instanceof HTMLSelectElement&&(i.value=e.target.value,x(e.target))}),x(s),tC.appendChild(s)}else{a.removeCalcMethod();let e=e3.tagName+"_"+e1.tagName+"_select",t=document.getElementById(e);null!=t&&t.remove()}}});let tL=E(tm);m.appendChild(tL);let tP=h.getElementsByTagName(e2.tagName),tB=document.createElement("label");tL.appendChild(tB),tB.textContent=e2.tagName;let tz=document.createElement("input");if(tL.appendChild(tz),tz.type="checkbox",tz.id=e2.tagName,1==tP.length){tz.checked=!0;let e=parseFloat(C(y(tP[0])));s=new e2(I(tP[0]),e),a.setEigenvalues(s);let t=e3.tagName+"_"+e2.tagName+"_number",n=u("number",t+"_input",tp,e=>{e.target instanceof HTMLInputElement&&(tM(s,e.target),N(e.target))},s.value.toString(),e2.tagName);N(n.querySelector("input")),n.id=t,tL.appendChild(n)}else tz.checked=!1,s=new e2(new Map,NaN);tz.addEventListener("change",e=>{if(e.target instanceof HTMLInputElement){if(e.target.checked){a.setEigenvalues(s);let e=e3.tagName+"_"+e2.tagName+"_number",t=document.getElementById(e);null!=t&&t.remove();let n=u("number",e+"_input",tp,e=>{e.target instanceof HTMLInputElement&&(tM(s,e.target),N(e.target))},s.value.toString(),e2.tagName);N(n.querySelector("input")),n.id=e,tL.appendChild(n)}else{a.removeEigenvalues();let e=e3.tagName+"_"+e2.tagName+"_number",t=document.getElementById(e);null!=t&&t.remove()}}});let tI=E(tm);m.appendChild(tI);let tR=h.getElementsByTagName(e5.tagName),t_=document.createElement("label");tI.appendChild(t_),t_.textContent=e5.tagName;let tk=document.createElement("input");if(tI.appendChild(tk),tk.type="checkbox",tk.id=e5.tagName,1==tR.length){tk.checked=!0;let e=parseFloat(C(y(tR[0])));o=new e5(I(tR[0]),e),a.setShortestTimeOfInterest(o);let t=e3.tagName+"_"+e5.tagName+"_number",n=u("number",t+"_input",tp,e=>{e.target instanceof HTMLInputElement&&(tM(o,e.target),N(e.target))},o.value.toString(),e5.tagName);N(n.querySelector("input")),n.id=t,tI.appendChild(n)}else tk.checked=!1,o=new e5(new Map,NaN);tk.addEventListener("change",e=>{if(e.target instanceof HTMLInputElement){if(e.target.checked){a.setShortestTimeOfInterest(o);let e=e3.tagName+"_"+e5.tagName+"_number",t=document.getElementById(e);null!=t&&t.remove();let n=u("number",e+"_input",tp,e=>{e.target instanceof HTMLInputElement&&(tM(o,e.target),N(e.target))},o.value.toString(),e5.tagName);N(n.querySelector("input")),n.id=e,tI.appendChild(n)}else{a.removeShortestTimeOfInterest();let e=e3.tagName+"_"+e5.tagName+"_number",t=document.getElementById(e);null!=t&&t.remove()}}});let tF=E(tm);m.appendChild(tF);let tD=h.getElementsByTagName(e4.tagName),tH=document.createElement("label");tF.appendChild(tH),tH.textContent=e4.tagName;let tO=document.createElement("input");if(tF.appendChild(tO),tO.type="checkbox",tO.id=e4.tagName,1==tD.length){tO.checked=!0;let e=parseFloat(C(y(tD[0])));l=new e4(I(tD[0]),e),a.setMaximumEvolutionTime(l);let t=e3.tagName+"_"+e4.tagName+"_number",n=u("number",t+"_input",tp,e=>{e.target instanceof HTMLInputElement&&(tM(l,e.target),N(e.target))},l.value.toString(),e4.tagName);N(n.querySelector("input")),n.id=t,tF.appendChild(n)}else tO.checked=!1,l=new e4(new Map,NaN);tO.addEventListener("change",e=>{if(e.target instanceof HTMLInputElement){if(e.target.checked){a.setMaximumEvolutionTime(l);let e=e3.tagName+"_"+e4.tagName+"_number",t=document.getElementById(e);null!=t&&t.remove();let n=u("number",e+"_input",tp,e=>{e.target instanceof HTMLInputElement&&(tM(l,e.target),N(e.target))},l.value.toString(),e4.tagName);N(n.querySelector("input")),n.id=e,tF.appendChild(n)}else{a.removeMaximumEvolutionTime();let e=e3.tagName+"_"+e4.tagName+"_number",t=document.getElementById(e);null!=t&&t.remove()}}});let tG=E(tm);m.appendChild(tG);let tA=h.getElementsByTagName(e8.tagName),tq=document.createElement("label");tG.appendChild(tq),tq.textContent=e8.tagName;let tU=document.createElement("input");if(tG.appendChild(tU),tU.type="checkbox",tU.id=e8.tagName,1==tA.length){tU.checked=!0;let e=parseFloat(C(y(tA[0])));r=new e8(I(tA[0]),e),a.setAutomaticallySetMaxEne(r)}else tU.checked=!1,r=new e8(new Map,NaN);tU.addEventListener("change",e=>{if(e.target instanceof HTMLInputElement){if(e.target.checked){a.setAutomaticallySetMaxEne(r);let e=e3.tagName+"_"+e8.tagName+"_number",t=document.getElementById(e);null!=t&&t.remove();let n=u("number",e+"_input",tp,e=>{e.target instanceof HTMLInputElement&&(tM(r,e.target),N(e.target))},r.value.toString(),e8.tagName);N(n.querySelector("input")),n.id=e,tG.appendChild(n)}else{a.removeAutomaticallySetMaxEne();let e=e3.tagName+"_"+e8.tagName+"_number",t=document.getElementById(e);null!=t&&t.remove()}}});let t$=E(tm);m.appendChild(t$);let tX=h.getElementsByTagName(e6.tagName),tV=document.createElement("label");t$.appendChild(tV),tV.textContent=e6.tagName;let tj=document.createElement("input");if(t$.appendChild(tj),tj.type="checkbox",tj.id=e6.tagName,1==tX.length){tj.checked=!0;let e=parseFloat(C(y(tX[0])));d=new e6(I(tX[0]),e),a.setDiagramEnergyOffset(d);let t=e3.tagName+"_"+e6.tagName+"_number",n=u("number",t+"_input",tp,e=>{e.target instanceof HTMLInputElement&&(tM(d,e.target),N(e.target))},d.value.toString(),e6.tagName);N(n.querySelector("input")),n.id=t,t$.appendChild(n)}else tj.checked=!1,d=new e6(new Map,NaN);return tj.addEventListener("change",e=>{if(e.target instanceof HTMLInputElement){if(e.target.checked){a.setDiagramEnergyOffset(d);let e=e3.tagName+"_"+e6.tagName+"_number",t=document.getElementById(e);null!=t&&t.remove();let n=u("number",e+"_input",tp,e=>{e.target instanceof HTMLInputElement&&(tM(d,e.target),N(e.target))},d.value.toString(),e6.tagName);N(n.querySelector("input")),n.id=e,t$.appendChild(n)}else{a.removeDiagramEnergyOffset();let e=e3.tagName+"_"+e6.tagName+"_number",t=document.getElementById(e);null!=t&&t.remove()}}}),m}(i);t.id=B,P.appendChild(h({content:t,buttonLabel:"Control",buttonFontSize:ta,level:tg,contentDivId:B})),e.setControl(a)}!function(){for(var e=document.getElementsByClassName("collapsible"),t=0;t<e.length;t++)e[t].removeEventListener("click",c),e[t].addEventListener("click",c)}()}(new DOMParser().parseFromString(p,"text/xml"))}}};let S=r.slice(d,d+1048576);l.readAsText(S),d+=1048576}}},l.click()}function tT(e,t,n,a,i,s){let o=a.getElementsByTagName(H.tagName);if(o.length>0){if(1!=o.length)throw Error("Expecting 1 "+H.tagName+" but finding "+o.length+"!");let a=T(o[0]),l=parseFloat(a),r=I(o[0]),d=new H(r,l);e.setProperty(d);let g=e.dictRef,m=u("number",n.id+"_"+e.dictRef,tp,e=>{e.target instanceof HTMLInputElement&&tM(d,e.target)},a,g);m.style.marginLeft=s,m.style.marginTop="1px",m.style.marginBottom="1px";let h=m.querySelector("input");h.value=a,N(h),h.addEventListener("change",t=>{a=t.target.value,(d=e.getProperty()).value=parseFloat(a),console.log("Set "+e.dictRef+" of "+n.id+" to "+a),N(h),e.dictRef==A.dictRef&&(l<tb&&(tb=l),l>tE&&(tE=l),t_())}),tS(t,r,m,n.id+"_"+e.dictRef+"_Select_Units",e.dictRef,"2px","1px","1px"),i.appendChild(m)}else{let o=a.getElementsByTagName(O.tagName);if(o.length>0){if(1!=o.length)throw Error("Expecting 1 "+O.tagName+" but finding "+o.length+"!");let a=T(o[0]),l=d(a.split(/\s+/)),r=I(o[0]),g=new O(r,l);e.setProperty(g);let m=e.dictRef,h=u("text",n.id+"_"+e.dictRef,tp,e=>{e.target instanceof HTMLInputElement&&tw(g,e.target)},a,m);h.style.marginLeft=s,h.style.marginTop="1px",h.style.marginBottom="1px";let c=h.querySelector("input");c.value=a,N(c),c.addEventListener("change",t=>{a=t.target.value,g=e.getProperty(),l=d(a.split(/\s+/)),g.values=l,console.log("Set "+e.dictRef+" of "+n.id+" to "+a),N(c)}),tS(t,r,h,n.id+"_"+e.dictRef+"_Select_Units",e.dictRef,"2px","1px","1px"),i.appendChild(h)}else throw Error("Expecting "+H.tagName+" or "+O.tagName)}}function tS(e,t,n,a,i,s,o,l){if(void 0!=e){let r=function(e,t,n,a){let i=t.get("units");if(void 0!=i){let s=f(e,"Units",n,tp);return s.value=i,x(s),s.addEventListener("change",e=>{e.target instanceof HTMLSelectElement&&(t.set("units",e.target.value),console.log("Set "+a+" units to "+e.target.value)),x(s)}),s}}(e,t,a,i);void 0!=r&&(r.style.marginLeft=s,r.style.marginTop=o,r.style.marginBottom=l,n.appendChild(r))}else{let e=t.get("units");if(void 0!=e){let t=document.createElement("label");t.textContent=e,t.style.marginLeft=s,t.style.marginTop=o,t.style.marginBottom=l,n.appendChild(t)}}}function tw(e,t){let n=t.value.trim();if(""==n){alert("Empty input resetting..."),t.value=r(e.values," ");return}let a=n.split(/\s+/),i=[],s=!0;if(a.forEach(function(e){g(e)||(s=!1),i.push(parseFloat(e))}),!s){alert("An input is not a number, resetting..."),t.value=r(e.values," ");return}i.length==e.values.length?console.log("Changed "+e.tagName+' from: "'+n+'" to: "'+r(e.values," ")+'"'):(alert("Expecting "+e.values.length+" values for, but finding "+i.length+" resetting..."),t.value=r(e.values," "))}function tM(e,t){if(g(t.value)){let n=parseFloat(t.value);e.value=n,console.log("Value set to "+n)}else alert("Value is not numeric, resetting..."),t.value=e.value.toString()}function tL(e,t){let n=u("number",ew.tagName+"_P",tp,e=>{e.target instanceof HTMLInputElement&&(g(e.target.value)?(t.setP(parseFloat(e.target.value)),console.log("Set P to "+e.target.value)):(alert("Value is not numeric, resetting..."),e.target.value=t.getP().toString()),N(e.target))},t.getP().toString(),"P"),a=n.querySelector("input");a.value=t.getP().toString(),N(a),e.appendChild(n)}function tP(e,t){let n=u("number",ew.tagName+"_T",tp,e=>{e.target instanceof HTMLInputElement&&(g(e.target.value)?(t.setT(parseFloat(e.target.value)),console.log("Set T to "+e.target.value)):(alert("Value is not numeric, resetting..."),e.target.value=t.getT().toString()),N(e.target))},t.getT().toString(),"T"),a=n.querySelector("input");a.value=t.getT().toString(),N(a),e.appendChild(n)}function tB(e,t){let n=v("add "+ep.tagName,tp);e.append(n),n.addEventListener("click",()=>{let a=document.createElement("label");a.textContent="excessReactantConc: ",e.appendChild(a);let i=document.createElement("input");i.type="number",i.value=NaN.toString(),i.style.marginLeft="2px",i.style.marginTop="1px",i.style.marginBottom="1px",i.addEventListener("change",e=>{e.target instanceof HTMLInputElement&&(t.setExcessReactantConc(e.target.value),console.log("Set excessReactantConc to "+e.target.value),N(e.target))}),N(i),e.appendChild(i);let s=v("âœ•",tp);s.addEventListener("click",()=>{e.removeChild(a),e.removeChild(i),e.removeChild(s),tB(e,t)}),e.appendChild(s),e.removeChild(n)})}function tz(e,t){let n=v("add percentExcessReactantConc",tp);e.appendChild(n),n.addEventListener("click",()=>{let n=document.createElement("label");n.textContent="percentExcessReactantConc: ",e.appendChild(n);let a=document.createElement("input");a.type="number",a.value=NaN.toString(),a.style.marginLeft="2px",a.style.marginTop="1px",a.style.marginBottom="1px",a.addEventListener("change",e=>{e.target instanceof HTMLInputElement&&(t.setPercentExcessReactantConc(e.target.value),console.log("Set percentExcessReactantConc to "+e.target.value),N(e.target))}),N(a),e.appendChild(a)})}function tI(e,t){let n=v("add precision",tp);e.appendChild(n),n.addEventListener("click",()=>{let n=document.createElement("label");n.textContent="Precision: ",e.appendChild(n);let a=document.createElement("input");a.type="number",a.value=NaN.toString(),a.style.marginLeft="2px",a.style.marginTop="1px",a.style.marginBottom="1px",a.addEventListener("change",e=>{e.target instanceof HTMLInputElement&&(t.setPrecision(e.target.value),console.log("Set Precision to "+e.target.value),N(e.target))}),N(a),e.appendChild(a)})}function tR(e,t){let n=v("add "+eb.tagName,tp);e.appendChild(n),n.addEventListener("click",()=>{let a=document.createElement("div"),i=new eb(new Map,"");t.setBathGas(i);let s=document.createElement("label");s.textContent=eb.tagName+": ",a.appendChild(s),e.insertBefore(a,n);let o=f(Array.from(new Set(tv.keys())),eb.tagName,eM.tagName+"_"+eb.tagName,tp);o.value=i.value,o.addEventListener("change",e=>{e.target instanceof HTMLSelectElement&&(i.value=e.target.value,console.log("Added "+e.target.value+" as a "+eb.tagName),x(e.target))}),x(o),a.appendChild(o),e.insertBefore(a,n),e.removeChild(n)})}function t_(){if(ty.size>0){let e="reactionsDiagram",t=document.getElementById(e);null!=t&&t.remove();let n=document.createElement("canvas");n.id=e,n.width=800,n.height=400,n.style.border="1px solid black",null!=n&&(n.style.display="block",function(e,t,n,a,i){var s;let o,r,d,g;console.log("drawReactionDiagram");let m="black",h=e.getContext("2d"),c=(h.font=n,(s=h.measureText("Aj")).actualBoundingBoxAscent+s.actualBoundingBoxDescent),u=[],p=new Set,N=new Set,x=new Set,f=new Map,v=new Map,E=0,b=Number.MAX_VALUE,y=Number.MIN_VALUE;ty.forEach(function(e,t){let n=e.getTransitionStates(),a=e.getReactantsLabel();if(void 0!=a){u.push(a),p.has(a)&&N.add(a);let t=e.getReactantsEnergy(tv);b=Math.min(b,t),y=Math.max(y,t),v.set(a,t),!f.has(a)&&(f.set(a,E),E++)}let i=e.getProductsLabel();if(void 0!=i){p.add(i);let t=e.getProductsEnergy(tv);if(b=Math.min(b,t),y=Math.max(y,t),v.set(i,t),f.has(i)){E--;let e=l(f,i);f.forEach(function(t,n){t>e&&f.set(n,t-1)}),void 0!=n&&(n.forEach(function(e){let n=e.getMolecule().ref;x.add(n),f.set(n,E),t=tv.get(n)?.getEnergy()??0,b=Math.min(b,t),y=Math.max(y,t),v.set(n,t),E++}),f.set(i,E),E++)}else void 0!=n&&n.forEach(function(e){let n=e.getMolecule().ref;x.add(n),f.set(n,E),t=tv.get(n)?.getEnergy()??0,b=Math.min(b,t),y=Math.max(y,t),v.set(n,t),E++}),f.set(i,E),E++}});let C=y-b,T=[];f.forEach(function(e,t){T[e]=t});let S=0,w=0,M=new Map,L=new Map,P=new Map,B=new Map,z=new Map,I=new Map;T.forEach(function(t){let a=l(v,t),i=(a-b)*e.height/(C+0)+0;g=Math.max(eE(h,a.toString(),n),eE(h,t,n)),r=S+g+5,d=o=i+4,M.set(t,[S,o]),L.set(t,[r,d]),p.has(t)&&(P.set(t,[S,o]),B.set(t,[r,d])),x.has(t)&&(z.set(t,[S,o]),I.set(t,[r,d])),S=r+10,w=r}),e.width=w;let R=e.height+4*c+8,_=e.height;e.height=R,h.transform(1,0,0,-1,0,R),ty.forEach(function(e,t){let n=e.getTransitionStates(),a=e.getReactantsLabel(),i=e.getProductsLabel(),s=l(L,a),o=l(P,i);n.length>0?n.forEach(function(e){let t=e.getMolecule().ref,n=l(z,t);ef(h,m,2,s[0],s[1],n[0],n[1]);let a=l(I,t);ef(h,m,2,a[0],a[1],o[0],o[1])}):ef(h,m,2,s[0],s[1],o[0],o[1])}),u.forEach(function(e){let t=l(v,e),i=(t-b)*_/(C+0)+0,s=l(M,e)[0],o=i+4;ex(h,"blue",a,s,o,l(L,e)[0],o,n,c,e,t.toString())}),p.forEach(function(e){let t=l(v,e),i=(t-b)*_/(C+0)+0,s=l(P,e)[0],o=i+a,r=l(B,e)[0],d=t.toString();N.has(e)?ex(h,"orange",a,s,o,r,o,n,c,e,d):ex(h,"green",a,s,o,r,o,n,c,e,d)}),x.forEach(function(e){let t=l(v,e),i=(t-b)*_/(C+0)+0,s=l(z,e)[0],o=i+a;ex(h,"red",a,s,o,l(I,e)[0],o,n,c,e,t.toString())})}(n,0,"14px Arial",4,2))}}document.addEventListener("DOMContentLoaded",e=>{s=document.getElementById("xml_title"),o=document.getElementById("xml_text");let t=document.createElement("button");t.id="loadButton",t.textContent="Load",t.addEventListener("click",tC);let n=document.createElement("button");n.id="saveButton",n.textContent="Save",n.style.display="inline",n.style.visibility="hidden";let a=document.getElementById("menu");a&&(a.appendChild(t),a.appendChild(n)),window.loadXML=function(){tC()}}),window.setNumberArrayNode=tw,window.set=tM,window.saveXML=function(){console.log("saveXML");let t=new Blob([tn.header,e.toXML("  ","  ")],{type:"text/plain"}),n=URL.createObjectURL(t),a=document.createElement("a");a.href=n,a.download=i,document.body.appendChild(a),a.click(),document.body.removeChild(a)};
//# sourceMappingURL=index.d8727912.js.map
