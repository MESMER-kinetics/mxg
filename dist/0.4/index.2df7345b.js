let e,t,i,n,a,s,o,r,d;function l(e,t){if(!e.has(t))throw Error(`Key ${t} not found in map`);return e.get(t)}function g(e,t){return void 0==t&&(t=", "),e.map(e=>null==e?"null":e.toString()).join(t)}function m(e){let t=[];for(let i=0;i<e.length;i++)h(e[i])&&t.push(parseFloat(e[i]));return t}function h(e){return""!==e&&!isNaN(Number(e))}function c(e,t,i,n,a,s,o,r,d){let l=document.createElement("div");void 0!=r&&(l.id=r),void 0!=d&&(l.className=d);let g=document.createElement("button");return void 0!=i&&(g.id=i),g.className="collapsible",g.innerText=t+" ▼",g.addEventListener("click",function(){g.innerText.includes("▼")?g.innerText=t+" ▲":g.innerText=t+" ▼"}),void 0!=n&&(g.style.fontSize=n),void 0!=a&&(g.style.marginLeft=a),void 0!=s&&(g.style.marginTop=s),void 0!=o&&(g.style.marginBottom=o),l.appendChild(g),l.appendChild(e),l}function u(){this.classList.toggle("active");let e=this.nextElementSibling;"block"===e.style.display?e.style.display="none":e.style.display="block"}function p(e,t,i,n,a){let s=document.createElement("input");s.type=e,s.id=t,s.onchange=i,s.value=n;let o=document.createElement("label");o.htmlFor=t,a?o.textContent=a+": ":o.textContent="";let r=document.createElement("div");return r.appendChild(o),r.appendChild(s),r}function N(e,t){let i="<"+t;if(e)for(let[t,n]of e)i+=" "+t+'="'+n+'"';return i+" />"}function x(e,t){void 0==t&&(t=4),e.style.width=e.value.length+t+"ch"}function f(e,t){void 0==t&&(t=6),e.style.width=e.value.length+t+"ch"}function v(e,t,i){let n=document.createElement("select");return e.forEach(e=>{n.name=t,n.id=i;let a=document.createElement("option");a.value=e,a.text=e,n.appendChild(a)}),n}function E(e,t,i,n){let a=document.createElement("div");return a.style.display="flex",e&&(a.style.marginLeft=e),t&&(a.style.marginTop=t),i&&(a.style.marginBottom=i),n&&(a.style.marginRight=n),a}function y(e,t){let i=e.getElementsByTagName(t)[0];if(null==i)throw Error(t+" element not found");return i}function T(e){let t=e.childNodes;if(null==t)throw Error("Element has no childNodes");return t[0]}function b(e){let t=e.nodeValue;if(null==t)throw Error("nodeValue is null");return t}function S(e){let t=T(e);return t?b(t).trim():""}class C{constructor(e){this.tagName=e}toXML(e){let t=N(void 0,this.tagName);return e?"\n"+e+t:t}}class w extends C{constructor(e,t){super(t),this.attributes=e}toString(){let e=this.tagName+"(";return this.attributes&&this.attributes.forEach((t,i)=>{e+=`${i}(${t}), `}),e}toXML(e){let t="";if(void 0!=e&&(t+="\n"+e),t+="<"+this.tagName,this.attributes)for(let[e,i]of this.attributes)t+=" "+e+'="'+i.toString()+'"';return t+" />"}}class M extends w{constructor(e,t,i){super(e,t),this.value=i}toString(){return super.toString()+`, ${this.value.toString()})`}toXML(e){return B(this.value.trim(),this.tagName,this.attributes,e,!1)}}class P extends w{constructor(e,t,i){super(e,t),this.value=i}toString(){return super.toString()+`, ${this.value.toString()})`}toXML(e){return B(this.value.toString().trim(),this.tagName,this.attributes,e,!1)}}class L extends w{constructor(e,t,i,n){super(e,t),this.delimiter=",",this.values=i,void 0!=n&&(this.delimiter=n)}toString(){return super.toString()+`, ${this.values.toString()})`}setDelimiter(e){this.delimiter=e}toXML(e){return B(this.values.toString().replaceAll(",",this.delimiter),this.tagName,this.attributes,e,!1)}}class z extends w{constructor(e,t){super(e,t),this.nodes=new Map}addNode(e){return this.nodes.set(this.nodes.size,e),this.nodes.size-1}toString(){let e=super.toString();return this.nodes.forEach((t,i)=>{e+=`, ${t.toString()}`}),e+")"}toXML(e,t){let i;void 0!=e&&void 0!=t&&(i=t+e);let n="";if(this.nodes.size>0)return this.nodes.forEach(t=>{t instanceof z?n+=t.toXML(e,i):n+=t.toXML(i)}),B(n,this.tagName,this.attributes,t,!0);{let e=N(this.attributes,this.tagName);return void 0!=t?"\n"+t+e:e}}}function B(e,t,i,n,a){let s;return function(e,t,i){let n="";if(void 0!=i&&(n+="\n"+i),n+="<"+e,t)for(let[e,i]of t)n+=" "+e+'="'+i.toString()+'"';return n+">"}(t,i,n)+e+(s="",a&&void 0!=n&&(s+="\n"+n),s+"</"+t+">")}function R(e){let t=e.getAttributeNames(),i=new Map;return t.forEach(function(t){let n=e.getAttribute(t);null!=n&&i.set(t,n)}),i}function _(e,t){let i=e.getElementsByTagName(t);if(1!=i.length)throw Error("Expecting 1 "+t+" but finding "+i.length);return i[0]}class I extends w{static{this.tagName="atom"}constructor(e){super(e,I.tagName);let t=e.get("elementType");if(void 0==t)throw Error("elementType is undefined");this.elementType=t;let i=e.get("id");void 0==i&&(i=this.elementType),this.id=i}}class k extends z{static{this.tagName="atomArray"}constructor(e,t){super(e,k.tagName),t.forEach(e=>{this.nodes.set(this.nodes.size,e)})}}class D extends w{static{this.tagName="bond"}constructor(e){super(e,D.tagName);let t=e.get("atomRefs2");if(void 0==t)throw Error("atomRefs2 is undefined");this.atomRefs2=t}setAtomRefs2(e){this.atomRefs2=e,void 0!=this.attributes&&this.attributes.set("atomRefs2",e)}getId(){if(void 0!=this.attributes)return this.attributes.get("id")}setId(e){void 0!=this.attributes&&this.attributes.set("id",e)}getOrder(){if(void 0!=this.attributes){let e=this.attributes.get("order");if(void 0!=e)return parseFloat(e)}}setOrder(e){void 0!=this.attributes&&this.attributes.set("order",e.toString())}}class H extends z{static{this.tagName="bondArray"}constructor(e,t){super(e,H.tagName),this.bonds=t,t.forEach(e=>{this.nodes.set(this.nodes.size,e)})}getBond(e){return this.bonds[e]}getBonds(){return this.bonds}setBond(e,t){this.bonds[e]=t,this.nodes.set(e,t)}addBond(e){this.bonds.push(e),this.nodes.set(this.nodes.size,e)}removeBond(e){this.bonds.splice(e,1),this.nodes.delete(e)}getBondIds(){let e=new Set;return this.bonds.forEach(t=>{e.add(t.getId())}),e}}class A extends P{static{this.tagName="scalar"}constructor(e,t){super(e,A.tagName,t)}updateUnits(e){if(e&&void 0!=this.attributes){let t=this.attributes.get("units");void 0!=t&&t!=e&&this.attributes.set("units",e)}}}class O extends L{static{this.tagName="array"}constructor(e,t,i){super(e,O.tagName,t,i)}updateUnits(e){if(e&&void 0!=this.attributes){let t=this.attributes.get("units");void 0!=t&&t!=e&&this.attributes.set("units",e)}}}class F extends z{static{this.tagName="property"}constructor(e,t){super(e,F.tagName);let i=e.get("dictRef");if(void 0==i)throw Error("dictRef is undefined");this.dictRef=i,t&&this.nodes.set(0,t)}getProperty(){return this.nodes.get(0)}setProperty(e){this.nodes.set(0,e)}}class G extends F{static{this.dictRef="me:ZPE"}constructor(e,t){super(e,t)}setUnits(e){this.getProperty().updateUnits(e)}}class U extends F{static{this.dictRef="me:frequenciesScaleFactor"}constructor(e,t){super(e,t)}}class q extends F{static{this.dictRef="me:vibFreqs"}constructor(e,t){super(e,t)}}class $ extends F{static{this.dictRef="me:rotConsts"}constructor(e,t){super(e,t)}}class X extends F{static{this.dictRef="me:MW"}constructor(e,t){super(e,t)}}class V extends F{static{this.dictRef="me:imFreqs"}constructor(e,t){super(e,t)}}class j extends z{static{this.tagName="propertyList"}constructor(e,t){super(e,j.tagName),this.index=new Map,t&&t.forEach(e=>{this.nodes.set(this.nodes.size,e),this.index.set(e.dictRef,this.nodes.size-1)})}getProperty(e){let t=this.index.get(e);if(void 0!=t)return this.nodes.get(t);throw Error("Property "+e+" does not exist")}setProperty(e){let t=this.index.get(e.dictRef);void 0==t?(this.nodes.set(this.nodes.size,e),this.index.set(e.dictRef,this.nodes.size-1)):(console.log("Property "+e.dictRef+" already exists, updating..."),this.nodes.set(t,e))}}class W extends P{static{this.tagName="me:deltaEDown"}constructor(e,t){super(e,W.tagName,t)}getBathGas(){if(void 0!=this.attributes)return this.attributes.get("bathGas")}setBathGas(e){void 0!=this.attributes&&this.attributes.set("bathGas",e)}getUnits(){if(void 0!=this.attributes)return this.attributes.get("units")}getLower(){if(void 0!=this.attributes)return parseFloat(l(this.attributes,"lower"))}setLower(e){void 0!=this.attributes&&this.attributes.set("lower",e.toString())}getUpper(){if(void 0!=this.attributes)return parseFloat(l(this.attributes,"upper"))}setUpper(e){void 0!=this.attributes&&this.attributes.set("upper",e.toString())}getStepsize(){if(void 0!=this.attributes)return parseFloat(l(this.attributes,"stepsize"))}setStepsize(e){void 0!=this.attributes&&this.attributes.set("stepsize",e.toString())}setValue(e){this.value=e}}class J extends z{static{this.tagName="me:energyTransferModel"}constructor(e,t){super(e,J.tagName),void 0!=t&&t.forEach(e=>{this.nodes.set(this.nodes.size,e)})}getDeltaEDowns(){let e=[];return this.nodes.forEach(t=>{t instanceof W&&e.push(t)}),e}setDeltaEDowns(e){this.nodes.clear(),e.forEach(e=>{this.nodes.set(this.nodes.size,e)})}getDeltaEDown(e){if(e<0||e>=this.nodes.size)throw Error("index out of range");return this.nodes.get(e)}setDeltaEDown(e,t){this.nodes.set(e,t)}addDeltaEDown(e){return this.nodes.set(this.nodes.size,e),this.nodes.size-1}}class K extends w{static{this.tagName="me:DOSCMethod"}constructor(e){if(super(e,K.tagName),void 0==e.get("xsi:type")){let t=e.get("name");if(void 0==t)throw Error("Neither xsi:type or name are defined.");e.set("xsi:type",t),e.delete("name")}}getXsiType(){if(void 0!=this.attributes)return this.attributes.get("xsi:type");throw Error("xsi:type is undefined")}setXsiType(e){if(void 0!=this.attributes)this.attributes.set("xsi:type",e);else throw Error("xsi:type is undefined")}}class Q extends M{static{this.tagName="me:bondRef"}constructor(e,t){super(e,Q.tagName,t)}}class Z extends w{static{this.tagName="me:PotentialPoint"}constructor(e){super(e,Z.tagName);let t=e.get("angle");if(void 0==t)throw Error("angle is undefined");this.angle=parseFloat(t);let i=e.get("potential");if(void 0==i)throw Error("potential is undefined");this.potential=parseFloat(i)}getAngle(){return this.angle}setAngle(e){this.angle=e,void 0!=this.attributes&&this.attributes.set("angle",e.toString())}getPotential(){return this.potential}setPotential(e){this.potential=e,void 0!=this.attributes&&this.attributes.set("potential",e.toString())}}class Y extends z{static{this.tagName="me:HinderedRotorPotential"}static{this.formats=["numerical","analytical"]}static{this.units=["kJ/mol","cm-1","Hartree"]}constructor(e,t){super(e,Y.tagName);let i=e.get("format");if(void 0==i)throw Error("format is undefined");this.format=i;let n=e.get("units");if(void 0==n)throw Error("units is undefined");this.units=n,void 0!=t&&t.forEach(e=>{this.nodes.set(this.nodes.size,e)});let a=e.get("expansionSize");if(void 0==a)throw Error("expansionSize is undefined");this.expansionSize=parseFloat(a);let s=e.get("useSineTerms");if(void 0==s)throw Error("useSineTerms is undefined");this.useSineTerms="yes"==s}getFormat(){return this.format}setFormat(e){this.format=e,void 0!=this.attributes&&this.attributes.set("format",e)}getUnits(){return this.units}setUnits(e){this.units=e,void 0!=this.attributes&&this.attributes.set("units",e)}getExpansionSize(){return this.expansionSize}setExpansionSize(e){this.expansionSize=e,void 0!=this.attributes&&this.attributes.set("expansionSize",e.toString())}getUseSineTerms(){return this.useSineTerms}setUseSineTerms(e){this.useSineTerms=e,void 0!=this.attributes&&this.attributes.set("useSineTerms",e?"yes":"no")}getPotentialPoint(e){return this.nodes.get(e)}setPotentialPoint(e,t){this.nodes.set(e,t)}setPotentialPoints(e){this.nodes.clear(),e.forEach(e=>{this.nodes.set(this.nodes.size,e)})}addPotentialPoint(e){return this.nodes.set(this.nodes.size,e),this.nodes.size-1}removePotentialPoint(e){this.nodes.delete(e)}}class ee extends P{static{this.tagName="me:periodicity"}constructor(e,t){super(e,ee.tagName,t)}}class et extends z{static{this.tagName="me:ExtraDOSCMethod"}constructor(e,t,i,n){super(e,et.tagName),this.index=new Map,t&&(this.nodes.set(this.nodes.size,t),this.index.set(Q.tagName,this.nodes.size-1)),i&&(this.nodes.set(this.nodes.size,i),this.index.set(Y.tagName,this.nodes.size-1)),n&&(this.nodes.set(this.nodes.size,n),this.index.set(ee.tagName,this.nodes.size-1))}getBondRef(){let e=this.index.get(Q.tagName);if(void 0!=e)return this.nodes.get(e)}setBondRef(e){let t=this.index.get(Q.tagName);void 0!=t?this.nodes.set(t,e):(this.nodes.set(this.nodes.size,e),this.index.set(Q.tagName,this.nodes.size-1))}getHinderedRotorPotential(){let e=this.index.get(Y.tagName);if(void 0!=e)return this.nodes.get(e)}setHinderedRotorPotential(e){let t=this.index.get(Y.tagName);void 0!=t?this.nodes.set(t,e):(this.nodes.set(this.nodes.size,e),this.index.set(Y.tagName,this.nodes.size-1))}getPeriodicity(){let e=this.index.get(ee.tagName);if(void 0!=e)return this.nodes.get(e)}setPeriodicity(e){let t=this.index.get(ee.tagName);void 0!=t?this.nodes.set(t,e):(this.nodes.set(this.nodes.size,e),this.index.set(ee.tagName,this.nodes.size-1))}}class ei extends P{static{this.tagName="me:reservoirSize"}constructor(e,t){super(e,ei.tagName,t)}}class en extends z{static{this.tagName="molecule"}constructor(e,t,i,n,a,s,o,r){super(e,en.tagName),this.index=new Map;let d=e.get("id");if(void 0==d)throw Error("id is undefined");this.id=d;let l=0;t&&(this.nodes.set(l,t),t instanceof I?this.index.set(I.tagName,l):this.index.set(k.tagName,l),l++),i&&(this.nodes.set(l,i),this.index.set(H.tagName,l),l++),n&&(this.nodes.set(l,n),this.index.set(j.tagName,l),l++),a&&(this.nodes.set(l,a),this.index.set(J.tagName,l),l++),s&&(this.nodes.set(l,s),this.index.set(K.tagName,l)),o&&(this.nodes.set(l,o),this.index.set(et.tagName,l)),r&&(this.nodes.set(l,r),this.index.set(ei.tagName,l))}getDescription(){if(void 0!=this.attributes)return this.attributes.get("description")}setDescription(e){void 0!=this.attributes&&this.attributes.set("description",e)}getActive(){if(void 0!=this.attributes){let e=this.attributes.get("active");if(void 0!=e)return"true"==e}}setActive(e){void 0!=this.attributes&&this.attributes.set("active",e.toString())}getLabel(){let e=this.id,t=this.getDescription();return void 0!=t&&(e+=" ("+t+")"),this.getActive()&&(e+=" (active)"),e}getAttributesAsString(){return void 0==this.attributes?"":Array.from(this.attributes,([e,t])=>`${e}="${t}"`).join(", ")}getProperties(){let e=this.index.get(j.tagName);if(void 0!=e||void 0!=(e=this.index.get(F.tagName)))return this.nodes.get(e)}setProperties(e){let t=this.index.get(j.tagName);void 0==t?(this.index.set(j.tagName,this.nodes.size),this.addNode(e)):this.nodes.set(t,e)}getProperty(e){let t=this.getProperties();if(void 0!=t)return t instanceof j?t.getProperty(e):t}setProperty(e){let t=this.getProperties();void 0!=t?t instanceof j?t.setProperty(e):this.setProperties(t):this.setProperties(e)}getAtoms(){let e=this.index.get(I.tagName);if(void 0!=e||void 0!=(e=this.index.get(k.tagName)))return this.nodes.get(e)}getBonds(){let e=this.index.get(H.tagName);if(void 0!=e)return this.nodes.get(e)}getEnergyTransferModel(){let e=this.index.get(J.tagName);if(void 0!=e)return this.nodes.get(e)}setEnergyTransferModel(e){let t=this.index.get(J.tagName);void 0==t?(this.index.set(J.tagName,this.nodes.size),this.addNode(e)):this.nodes.set(t,e)}getDOSCMethod(){let e=this.index.get(K.tagName);if(void 0!=e)return this.nodes.get(e)}setDOSCMethod(e){let t=this.index.get(K.tagName);void 0==t?(this.index.set(K.tagName,this.nodes.size),this.addNode(e)):this.nodes.set(t,e)}getExtraDOSCMethod(){let e=this.index.get(et.tagName);if(void 0!=e)return this.nodes.get(e)}setExtraDOSCMethod(e){let t=this.index.get(et.tagName);void 0==t?(this.index.set(et.tagName,this.nodes.size),this.addNode(e)):this.nodes.set(t,e)}getReservoirSize(){let e=this.index.get(ei.tagName);if(void 0!=e)return this.nodes.get(e)}setReservoirSize(e){let t=this.index.get(ei.tagName);void 0==t?(this.index.set(ei.tagName,this.nodes.size),this.addNode(e)):this.nodes.set(t,e)}getEnergy(){let e=this.getProperty(G.dictRef);if(void 0==e)throw console.log(this.toString()),Error("ZPE property not found");return e.getProperty().value}}class ea extends w{static{this.tagName="molecule"}constructor(e){super(e,ea.tagName),this.ref=e.get("ref"),this.role=e.get("role")}setRole(e){this.role=e}}class es extends z{static{this.tagName="reactant"}constructor(e,t){super(e,es.tagName),this.addNode(t)}getMolecule(){return this.nodes.get(0)}}class eo extends z{static{this.tagName="product"}constructor(e,t){super(e,eo.tagName),this.addNode(t)}getMolecule(){return this.nodes.get(0)}}class er extends z{static{this.tagName="me:transitionState"}constructor(e,t){super(e,er.tagName),this.addNode(t)}getMolecule(){return this.nodes.get(0)}}class ed extends P{static{this.tagName="me:preExponential"}constructor(e,t){super(e,ed.tagName,t)}}class el extends P{static{this.tagName="me:activationEnergy"}constructor(e,t){super(e,el.tagName,t)}}class eg extends P{static{this.tagName="me:TInfinity"}constructor(e,t){super(e,eg.tagName,t)}}class em extends P{static{this.tagName="me:nInfinity"}constructor(e,t){super(e,em.tagName,t)}}class eh extends z{static{this.tagName="me:MCRCMethod"}constructor(e){super(e,eh.tagName)}}class ec extends eh{static{this.xsiType="me:MesmerILT"}static{this.xsiType2="MesmerILT"}constructor(e,t,i,n,a){super(e),this.index=new Map,void 0!=t&&(this.index.set(ed.tagName,this.index.size),this.addNode(t)),void 0!=i&&(this.index.set(el.tagName,this.index.size),this.addNode(i)),void 0!=n&&(this.index.set(eg.tagName,this.index.size),this.addNode(n)),void 0!=a&&(this.index.set(em.tagName,this.index.size),this.addNode(a))}getPreExponential(){let e=this.index.get(ed.tagName);if(void 0!=e)return this.nodes.get(e)}setPreExponential(e){let t=this.index.get(ed.tagName);void 0==t?(this.index.set(ed.tagName,this.nodes.size),this.addNode(e)):this.nodes.set(t,e)}getActivationEnergy(){let e=this.index.get(el.tagName);if(void 0!=e)return this.nodes.get(e)}setActivationEnergy(e){let t=this.index.get(el.tagName);void 0==t?(this.index.set(el.tagName,this.nodes.size),this.addNode(e)):this.nodes.set(t,e)}getTInfinity(){let e=this.index.get(eg.tagName);if(void 0!=e)return this.nodes.get(e)}setTInfinity(e){let t=this.index.get(eg.tagName);void 0==t?(this.index.set(eg.tagName,this.nodes.size),this.addNode(e)):this.nodes.set(t,e)}getNInfinity(){let e=this.index.get(em.tagName);if(void 0!=e)return this.nodes.get(e)}setNInfinity(e){let t=this.index.get(em.tagName);void 0==t?(this.index.set(em.tagName,this.nodes.size),this.addNode(e)):this.nodes.set(t,e)}}class eu extends w{static{this.tagName="me:tunneling"}constructor(e){super(e,eu.tagName)}getName(){return void 0!=this.attributes?this.attributes.get("name"):""}setName(e){void 0!=this.attributes&&this.attributes.set("name",e)}}class ep extends P{static{this.tagName="me:excessReactantConc"}constructor(e,t){super(e,ep.tagName,t)}}class eN extends z{static{this.tagName="reaction"}constructor(e,t,i,n,a,s,o){super(e,eN.tagName),this.index=new Map,this.reactantsIndex=new Map,this.productsIndex=new Map,this.transitionStatesIndex=new Map;let r=e.get("id");if(void 0==r)throw Error("Reaction id is undefined");this.id=r,void 0!=t&&(t.forEach(e=>{this.reactantsIndex.set(e.getMolecule().ref,this.nodes.size),this.addNode(e)}),this.index.set(es.tagName,this.reactantsIndex)),void 0!=i&&(i.forEach(e=>{this.productsIndex.set(e.getMolecule().ref,this.nodes.size),this.addNode(e)}),this.index.set(eo.tagName,this.productsIndex)),void 0!=n&&(this.index.set(eu.tagName,this.nodes.size),this.addNode(n)),void 0!=a&&(a.forEach(e=>{this.transitionStatesIndex.set(e.getMolecule().ref,this.nodes.size),this.addNode(e)}),this.index.set(er.tagName,this.transitionStatesIndex)),void 0!=s&&(this.index.set(eh.tagName,this.nodes.size),this.addNode(s)),void 0!=o&&(this.index.set(ep.tagName,this.nodes.size),this.addNode(o))}addToIndex(e,t){let i=this.index.get(e);if(void 0==i)this.index.set(e,this.nodes.size);else if(i instanceof Map)i.set(t.tagName,this.nodes.size);else{let n=new Map;n.set(this.nodes.get(i).ref,i),n.set(t.tagName,this.nodes.size),this.index.set(e,n)}}getReactants(){let e=this.index.get(es.tagName);return void 0==e?[]:e instanceof Map?Array.from(e.values()).map(e=>this.nodes.get(e)):[this.nodes.get(e)]}setReactants(e){e.forEach(e=>{this.reactantsIndex.set(e.getMolecule().ref,this.nodes.size),this.addNode(e)}),this.index.set(es.tagName,this.reactantsIndex)}getReactant(e){let t=this.reactantsIndex.get(e);if(void 0==t)throw Error(`Reactant with ref ${e} not found`);return this.nodes.get(t)}addReactant(e){this.reactantsIndex.set(e.getMolecule().ref,this.nodes.size),this.addNode(e)}removeReactant(e){let t=this.reactantsIndex.get(e);if(void 0==t)throw Error(`Reactant with ref ${e} not found`);this.nodes.delete(t),this.reactantsIndex.delete(e)}getProducts(){let e=this.index.get(eo.tagName);return void 0==e?[]:e instanceof Map?Array.from(e.values()).map(e=>this.nodes.get(e)):[this.nodes.get(e)]}setProducts(e){e.forEach(e=>{this.productsIndex.set(e.getMolecule().ref,this.nodes.size),this.addNode(e)}),this.index.set(eo.tagName,this.productsIndex)}getProduct(e){let t=this.productsIndex.get(e);if(void 0==t)throw Error(`Product with ref ${e} not found`);return this.nodes.get(t)}addProduct(e){this.productsIndex.set(e.getMolecule().ref,this.nodes.size),this.addNode(e)}removeProduct(e){let t=this.productsIndex.get(e);if(void 0==t)throw Error(`Product with ref ${e} not found`);this.nodes.delete(t),this.productsIndex.delete(e)}getTunneling(){let e=this.index.get(eu.tagName);if(void 0!=e)return this.nodes.get(e)}setTunneling(e){let t=this.index.get(eu.tagName);if(void 0==t)this.index.set(eu.tagName,this.nodes.size),this.addNode(e);else{if(t instanceof Map)throw Error("Tunneling is a map and it is assumed there would be only 1!");this.nodes.set(t,e)}}getTransitionStates(){let e=this.index.get(er.tagName);return void 0==e?[]:e instanceof Map?Array.from(e.values()).map(e=>this.nodes.get(e)):[this.nodes.get(e)]}setTransitionStates(e){e.forEach(e=>{this.transitionStatesIndex.set(e.getMolecule().ref,this.nodes.size),this.addNode(e)}),this.index.set(er.tagName,this.transitionStatesIndex)}getTransitionState(e){let t=this.transitionStatesIndex.get(e);if(void 0==t)throw Error(`Transition state with ref ${e} not found`);return this.nodes.get(t)}addTransitionState(e){this.transitionStatesIndex.set(e.getMolecule().ref,this.nodes.size),this.addNode(e)}removeTransitionState(e){let t=this.transitionStatesIndex.get(e);if(void 0==t)throw Error(`Transition State with ref ${e} not found`);this.nodes.delete(t),this.transitionStatesIndex.delete(e)}getMCRCMethod(){let e=this.index.get(eh.tagName);if(void 0!=e)return this.nodes.get(e)}setMCRCMethod(e){let t=this.index.get(eh.tagName);if(void 0==t)this.index.set(eh.tagName,this.nodes.size),this.addNode(e);else{if(t instanceof Map)throw Error("MCRCMethod is a map and it is assumed there would be only 1!");this.nodes.set(t,e)}}getExcessReactantConc(){let e=this.index.get(ep.tagName);if(void 0!=e)return this.nodes.get(e)}setExcessReactantConc(e){let t=this.index.get(ep.tagName);if(void 0==t)this.index.set(ep.tagName,this.nodes.size),this.addNode(e);else{if(t instanceof Map)throw Error("ExcessReactantConc is a map and it is assumed there would be only 1!");this.nodes.set(t,e)}}getReactantsLabel(){return this.getReactants().map(e=>e.getMolecule().ref).join(" + ")}getProductsLabel(){return this.getProducts().map(e=>e.getMolecule().ref).join(" + ")}getLabel(){return this.getReactantsLabel()+" -> "+this.getProductsLabel()}getReactantsEnergy(e){return Array.from(this.getReactants()).map(t=>{let i=e.get(t.getMolecule().ref);if(void 0==i)throw Error(`Molecule with ref ${t.getMolecule().ref} not found`);return i.getEnergy()}).reduce((e,t)=>e+t,0)}getProductsEnergy(e){return Array.from(this.getProducts()).map(t=>{let i=e.get(t.getMolecule().ref);if(void 0==i)throw Error(`Molecule with ref ${t.getMolecule().ref} not found`);return i.getEnergy()}).reduce((e,t)=>e+t,0)}get(e,t){if(this.index.has(e)){let i=this.index.get(e);if(void 0!=i){if(!(i instanceof Map))return this.nodes.get(i);{let e=i.get(t);if(void 0!=e)return this.nodes.get(e)}}}}}function ex(e,t,i,n,a,s,o,r,d,l,g){let m=n+(s-n)/2;ev(e,g,r,t,m-eE(e,g,r)/2,o+d),ev(e,l,r,t,m-eE(e,l,r)/2,o+3*d),ef(e,t,i,n,a,s,o)}function ef(e,t,i,n,a,s,o){e.beginPath(),e.strokeStyle=t,e.lineWidth=i,e.moveTo(n,a),e.lineTo(s,o),e.stroke()}function ev(e,t,i,n,a,s){e.save(),e.translate(a,s),e.scale(1,-1),e.font=i,e.fillStyle=n,e.fillText(t,0,0),e.restore()}function eE(e,t,i){return e.font=i,e.measureText(t).width}class ey extends M{static{this.tagName="me:bathGas"}constructor(e,t){super(e,ey.tagName,t)}}class eT extends P{static{this.tagName="me:experimentRate"}constructor(e,t){super(e,eT.tagName,t)}getError(){if(void 0!=this.attributes){let e=this.attributes.get("error");if(e)return parseFloat(e)}}setError(e){void 0!=this.attributes&&this.attributes.set("error",e.toString())}}class eb extends z{static{this.tagName="me:PTpair"}constructor(e,t,i){super(e,eb.tagName),this.index=new Map,t&&(this.index.set(ey.tagName,this.nodes.size),this.addNode(t)),i&&(this.index.set(eT.tagName,this.nodes.size),this.addNode(i))}getP(){if(void 0!=this.attributes){let e=this.attributes.get("P");if(void 0!=e)return parseFloat(e)}return NaN}setP(e){void 0!=this.attributes&&this.attributes.set("P",e.toString())}getT(){if(void 0!=this.attributes){let e=this.attributes.get("T");if(void 0!=e)return parseFloat(e)}return NaN}setT(e){void 0!=this.attributes&&this.attributes.set("T",e.toString())}getBathGas(){let e=this.index.get(ey.tagName);return e?this.nodes.get(e):void 0}setBathGas(e){let t=this.index.get(ey.tagName);t?this.nodes.set(t,e):(this.index.set(ey.tagName,this.nodes.size),this.addNode(e))}getExperimentRate(){let e=this.index.get(eT.tagName);return e?this.nodes.get(e):void 0}setExperimentRate(e){let t=this.index.get(eT.tagName);t?this.nodes.set(t,e):(this.index.set(eT.tagName,this.nodes.size),this.addNode(e))}}class eS extends z{static{this.tagName="me:PTs"}constructor(e,t){super(e,eS.tagName),t&&t.forEach(e=>{this.addNode(e)})}getPTpair(e){return this.nodes.get(e)}setPTpair(e,t){this.nodes.set(e,t)}addPTpair(e){this.addNode(e)}addPTpairs(e){e.forEach(e=>{this.addNode(e)})}removePTpair(e){this.nodes.delete(e)}}class eC extends z{static{this.tagName="me:conditions"}constructor(e,t,i){super(e,eC.tagName),this.index=new Map,t&&(this.index.set(ey.tagName,this.nodes.size),this.addNode(t)),i&&(this.index.set(eS.tagName,this.nodes.size),this.addNode(i))}getBathGas(){let e=this.index.get(ey.tagName);if(void 0!=e)return this.nodes.get(e)}setBathGas(e){let t=this.index.get(ey.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(ey.tagName,this.nodes.size),this.addNode(e))}getPTs(){let e=this.index.get(eS.tagName);if(void 0!=e)return this.nodes.get(e)}setPTs(e){let t=this.index.get(eS.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eS.tagName,this.nodes.size),this.addNode(e))}}class ew extends P{static{this.tagName="me:grainSize"}constructor(e,t){super(e,ew.tagName,t)}toString(){return`GrainSize(${super.toString()})`}}class eM extends P{static{this.tagName="me:energyAboveTheTopHill"}constructor(e,t){super(e,eM.tagName,t)}}class eP extends z{static{this.tagName="me:modelParameters"}constructor(e,t,i){super(e,eP.tagName),this.index=new Map,void 0!=t&&(this.index.set(ew.tagName,this.nodes.size),this.addNode(t)),void 0!=i&&(this.index.set(eM.tagName,this.nodes.size),this.addNode(i))}getGrainSize(){let e=this.index.get(ew.tagName);if(e)return this.nodes.get(e)}setGrainSize(e){let t=this.index.get(ew.tagName);t?this.nodes.set(t,e):(this.index.set(ew.tagName,this.nodes.size),this.addNode(e))}getEnergyAboveTheTopHill(){let e=this.index.get(eM.tagName);if(e)return this.nodes.get(e)}setEnergyAboveTheTopHill(e){let t=this.index.get(eM.tagName);t?this.nodes.set(t,e):(this.index.set(eM.tagName,this.nodes.size),this.addNode(e))}}class eL extends C{static{this.tagName="me:testDOS"}constructor(){super(eL.tagName)}}class ez extends C{static{this.tagName="me:printSpeciesProfile"}constructor(){super(ez.tagName)}}class eB extends C{static{this.tagName="me:testMicroRates"}constructor(){super(eB.tagName)}}class eR extends C{static{this.tagName="me:testRateConstant"}constructor(){super(eR.tagName)}}class e_ extends C{static{this.tagName="me:printGrainDOS"}constructor(){super(e_.tagName)}}class eI extends C{static{this.tagName="me:printCellDOS"}constructor(){super(eI.tagName)}}class ek extends C{static{this.tagName="me:printReactionOperatorColumnSums"}constructor(){super(ek.tagName)}}class eD extends C{static{this.tagName="me:printTunnellingCoefficients"}constructor(){super(eD.tagName)}}class eH extends C{static{this.tagName="me:printGrainkfE"}constructor(){super(eH.tagName)}}class eA extends C{static{this.tagName="me:printGrainBoltzmann"}constructor(){super(eA.tagName)}}class eO extends C{static{this.tagName="me:printGrainkbE"}constructor(){super(eO.tagName)}}class eF extends P{static{this.tagName="me:eigenvalues"}constructor(e,t){super(e,eF.tagName,t)}}class eG extends C{static{this.tagName="me:hideInactive"}constructor(){super(eG.tagName)}}class eU extends P{static{this.tagName="me:diagramEnergyOffset"}constructor(e,t){super(e,eU.tagName,t)}}class eq extends z{static{this.tagName="me:control"}constructor(e,t,i,n,a,s,o,r,d,l,g,m,h,c,u){super(e,eq.tagName),this.index=new Map,void 0!=t&&(this.addNode(t),this.index.set(eL.tagName,this.index.size)),void 0!=i&&(this.addNode(i),this.index.set(ez.tagName,this.index.size)),void 0!=n&&(this.addNode(n),this.index.set(eB.tagName,this.index.size)),void 0!=a&&(this.addNode(a),this.index.set(eR.tagName,this.index.size)),void 0!=s&&(this.addNode(s),this.index.set(e_.tagName,this.index.size)),void 0!=o&&(this.addNode(o),this.index.set(eI.tagName,this.index.size)),void 0!=r&&(this.addNode(r),this.index.set(ek.tagName,this.index.size)),void 0!=d&&(this.addNode(d),this.index.set(eD.tagName,this.index.size)),void 0!=l&&(this.addNode(l),this.index.set(eH.tagName,this.index.size)),void 0!=g&&(this.addNode(g),this.index.set(eA.tagName,this.index.size)),void 0!=m&&(this.addNode(m),this.index.set(eO.tagName,this.index.size)),void 0!=h&&(this.addNode(h),this.index.set(eF.tagName,this.index.size)),void 0!=c&&(this.addNode(c),this.index.set(eG.tagName,this.index.size)),void 0!=u&&(this.addNode(u),this.index.set(eU.tagName,this.index.size))}getTestDOS(){let e=this.index.get(eL.tagName);if(void 0!=e)return this.nodes.get(e)}setTestDOS(e){let t=this.index.get(eL.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eL.tagName,this.nodes.size),this.addNode(e))}removeTestDOS(){let e=this.index.get(eL.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(eL.tagName))}getPrintSpeciesProfile(){let e=this.index.get(ez.tagName);if(void 0!=e)return this.nodes.get(e)}setPrintSpeciesProfile(e){let t=this.index.get(ez.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(ez.tagName,this.nodes.size),this.addNode(e))}removePrintSpeciesProfile(){let e=this.index.get(ez.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(ez.tagName))}getTestMicroRates(){let e=this.index.get(eB.tagName);if(void 0!=e)return this.nodes.get(e)}setTestMicroRates(e){let t=this.index.get(eB.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eB.tagName,this.nodes.size),this.addNode(e))}removeTestMicroRates(){let e=this.index.get(eB.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(eB.tagName))}getTestRateConstant(){let e=this.index.get(eR.tagName);if(void 0!=e)return this.nodes.get(e)}setTestRateConstant(e){let t=this.index.get(eR.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eR.tagName,this.nodes.size),this.addNode(e))}removeTestRateConstant(){let e=this.index.get(eR.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(eR.tagName))}getPrintGrainDOS(){let e=this.index.get(e_.tagName);if(void 0!=e)return this.nodes.get(e)}setPrintGrainDOS(e){let t=this.index.get(e_.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(e_.tagName,this.nodes.size),this.addNode(e))}removePrintGrainDOS(){let e=this.index.get(e_.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(e_.tagName))}getPrintCellDOS(){let e=this.index.get(eI.tagName);if(void 0!=e)return this.nodes.get(e)}setPrintCellDOS(e){let t=this.index.get(eI.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eI.tagName,this.nodes.size),this.addNode(e))}removePrintCellDOS(){let e=this.index.get(eI.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(eI.tagName))}getPrintReactionOperatorColumnSums(){let e=this.index.get(ek.tagName);if(void 0!=e)return this.nodes.get(e)}setPrintReactionOperatorColumnSums(e){let t=this.index.get(ek.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(ek.tagName,this.nodes.size),this.addNode(e))}removePrintReactionOperatorColumnSums(){let e=this.index.get(ek.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(ek.tagName))}getPrintTunnellingCoefficients(){let e=this.index.get(eD.tagName);if(void 0!=e)return this.nodes.get(e)}setPrintTunnellingCoefficients(e){let t=this.index.get(eD.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eD.tagName,this.nodes.size),this.addNode(e))}removePrintTunnellingCoefficients(){let e=this.index.get(eD.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(eD.tagName))}getPrintGrainkfE(){let e=this.index.get(eH.tagName);if(void 0!=e)return this.nodes.get(e)}setPrintGrainkfE(e){let t=this.index.get(eH.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eH.tagName,this.nodes.size),this.addNode(e))}removePrintGrainkfE(){let e=this.index.get(eH.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(eH.tagName))}getPrintGrainBoltzmann(){let e=this.index.get(eA.tagName);if(void 0!=e)return this.nodes.get(e)}setPrintGrainBoltzmann(e){let t=this.index.get(eA.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eA.tagName,this.nodes.size),this.addNode(e))}removePrintGrainBoltzmann(){let e=this.index.get(eA.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(eA.tagName))}getPrintGrainkbE(){let e=this.index.get(eO.tagName);if(void 0!=e)return this.nodes.get(e)}setPrintGrainkbE(e){let t=this.index.get(eO.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eO.tagName,this.nodes.size),this.addNode(e))}removePrintGrainkbE(){let e=this.index.get(eO.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(eO.tagName))}getEigenvalues(){let e=this.index.get(eF.tagName);if(void 0!=e)return this.nodes.get(e)}setEigenvalues(e){let t=this.index.get(eF.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eF.tagName,this.nodes.size),this.addNode(e))}removeEigenvalues(){let e=this.index.get(eF.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(eF.tagName))}getHideInactive(){let e=this.index.get(eG.tagName);if(void 0!=e)return this.nodes.get(e)}setHideInactive(e){let t=this.index.get(eG.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eG.tagName,this.nodes.size),this.addNode(e))}removeHideInactive(){let e=this.index.get(eG.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(eG.tagName))}getDiagramEnergyOffset(){let e=this.index.get(eU.tagName);if(void 0!=e)return this.nodes.get(e)}setDiagramEnergyOffset(e){let t=this.index.get(eU.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eU.tagName,this.nodes.size),this.addNode(e))}removeDiagramEnergyOffset(){let e=this.index.get(eU.tagName);void 0!=e&&(this.nodes.delete(e),this.index.delete(eU.tagName))}}class e$ extends M{static{this.tagName="me:title"}constructor(e,t){super(e,e$.tagName,t)}}class eX extends z{static{this.tagName="moleculeList"}constructor(e,t){super(e,eX.tagName),this.index=new Map,void 0!=t&&t.forEach(e=>{this.nodes.set(this.nodes.size,e),this.index.set(e.id,this.nodes.size-1)})}getMolecule(e){let t=this.index.get(e);if(void 0!=t)return this.nodes.get(t)}removeMolecule(e){let t=this.index.get(e);void 0!=t&&(this.nodes.delete(t),this.index.delete(e))}addMolecule(e){let t=this.index.get(e.id);void 0!==t?(this.nodes.set(t,e),console.log("Replaced molecule with id "+e.id)):(this.nodes.set(this.nodes.size,e),this.index.set(e.id,this.nodes.size-1))}}class eV extends z{static{this.tagName="reactionList"}constructor(e,t){super(e,eV.tagName),this.index=new Map,void 0!=t&&t.forEach(e=>{this.nodes.set(this.nodes.size,e),this.index.set(e.id,this.nodes.size-1)})}getReaction(e){let t=this.index.get(e);if(void 0!=t)return this.nodes.get(t)}removeReaction(e){let t=this.index.get(e);void 0!=t&&(this.nodes.delete(t),this.index.delete(e))}addReaction(e){let t=this.index.get(e.id);void 0!==t?(this.nodes.set(t,e),console.log("Replaced reaction with id "+e.id)):(this.nodes.set(this.nodes.size,e),this.index.set(e.id,this.nodes.size-1))}}class ej extends z{static{this.tagName="me:mesmer"}static{this.header=`<?xml version="1.0" encoding="utf-8" ?>
<?xml-stylesheet type='text/xsl' href='../../mesmer2.xsl' media='other'?>
<?xml-stylesheet type='text/xsl' href='../../mesmer1.xsl' media='screen'?>`}constructor(e,t,i,n,a,s,o){super(e,ej.tagName),this.index=new Map,void 0!=t&&(this.index.set(e$.tagName,this.nodes.size),this.addNode(t)),void 0!=i&&(this.index.set(eX.tagName,this.nodes.size),this.addNode(i)),void 0!=n&&(this.index.set(eV.tagName,this.nodes.size),this.addNode(n)),void 0!=a&&(this.index.set(eC.tagName,this.nodes.size),this.addNode(a)),void 0!=s&&(this.index.set(eP.tagName,this.nodes.size),this.addNode(s)),void 0!=o&&(this.index.set(eq.tagName,this.nodes.size),this.addNode(o))}getTitle(){let e=this.index.get(e$.tagName);if(void 0!=e)return this.nodes.get(e)}setTitle(e){let t=this.index.get(e$.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(e$.tagName,this.nodes.size),this.addNode(e))}getMoleculeList(){let e=this.index.get(eX.tagName);if(void 0!=e)return this.nodes.get(e)}setMoleculeList(e){let t=this.index.get(eX.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eX.tagName,this.nodes.size),this.addNode(e))}getReactionList(){let e=this.index.get(eV.tagName);if(void 0!=e)return this.nodes.get(e)}setReactionList(e){let t=this.index.get(eV.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eV.tagName,this.nodes.size),this.addNode(e))}getConditions(){let e=this.index.get(eC.tagName);if(void 0!=e)return this.nodes.get(e)}setConditions(e){let t=this.index.get(eC.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eC.tagName,this.nodes.size),this.addNode(e))}getModelParameters(){let e=this.index.get(eP.tagName);if(void 0!=e)return this.nodes.get(e)}setModelParameters(e){let t=this.index.get(eP.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eP.tagName,this.nodes.size),this.addNode(e))}getControl(){let e=this.index.get(eq.tagName);if(void 0!=e)return this.nodes.get(e)}setControl(e){let t=this.index.get(eq.tagName);void 0!=t?this.nodes.set(t,e):(this.index.set(eq.tagName,this.nodes.size),this.addNode(e))}}let eW="1.5em",eJ="1.25em",eK="1.0em",eQ="25px",eZ="50px",eY="75px",e0="100px",e1=["kJ/mol","cm-1","kcal/mol","Hartree"],e2=["cm-1","GHz"],e5=new Map,e4=-1/0,e8=1/0,e6=new Map;function e7(e,t,i,n,a,s){let o=n.getElementsByTagName(A.tagName);if(o.length>0){if(1!=o.length)throw Error("Expecting 1 "+A.tagName+" but finding "+o.length+"!");let n=S(o[0]),r=parseFloat(n),d=R(o[0]),l=new A(d,r);e.setProperty(l);let g=e.dictRef,m=p("number",i.id+"_"+e.dictRef,e=>{e.target instanceof HTMLInputElement&&te(l,e.target)},n,g);m.style.marginLeft=s,m.style.marginTop="1px",m.style.marginBottom="1px";let h=m.querySelector("input");h.value=n,x(h),h.addEventListener("change",t=>{n=t.target.value,(l=e.getProperty()).value=parseFloat(n),console.log("Set "+e.dictRef+" of "+i.id+" to "+n),x(h),e.dictRef==G.dictRef&&(r<e8&&(e8=r),r>e4&&(e4=r),tt())}),e3(t,d,m,i.id+"_"+e.dictRef+"_Select_Units",e.dictRef,"2px","1px","1px"),a.appendChild(m)}else{let o=n.getElementsByTagName(O.tagName);if(o.length>0){if(1!=o.length)throw Error("Expecting 1 "+O.tagName+" but finding "+o.length+"!");let n=S(o[0]),r=m(n.split(/\s+/)),d=R(o[0]),l=new O(d,r);e.setProperty(l);let g=e.dictRef,h=p("text",i.id+"_"+e.dictRef,e=>{e.target instanceof HTMLInputElement&&e9(l,e.target)},n,g);h.style.marginLeft=s,h.style.marginTop="1px",h.style.marginBottom="1px";let c=h.querySelector("input");c.value=n,x(c),c.addEventListener("change",t=>{n=t.target.value,l=e.getProperty(),r=m(n.split(/\s+/)),l.values=r,console.log("Set "+e.dictRef+" of "+i.id+" to "+n),x(c)}),e3(t,d,h,i.id+"_"+e.dictRef+"_Select_Units",e.dictRef,"2px","1px","1px"),a.appendChild(h)}else throw Error("Expecting "+A.tagName+" or "+O.tagName)}}function e3(e,t,i,n,a,s,o,r){if(void 0!=e){let d=function(e,t,i,n){let a=t.get("units");if(void 0!=a){let s=v(e,"Units",i);return s.value=a,f(s),s.addEventListener("change",e=>{e.target instanceof HTMLSelectElement&&(t.set("units",e.target.value),console.log("Set "+n+" units to "+e.target.value)),f(s)}),s}}(e,t,n,a);void 0!=d&&(d.style.marginLeft=s,d.style.marginTop=o,d.style.marginBottom=r,i.appendChild(d))}else{let e=t.get("units");if(void 0!=e){let t=document.createElement("label");t.textContent=e,t.style.marginLeft=s,t.style.marginTop=o,t.style.marginBottom=r,i.appendChild(t)}}}function e9(e,t){let i=t.id,n=t.value.trim();if(""==n){alert("Empty input resetting..."),document.getElementById(i).value=g(e.values," ");return}let a=n.split(/\s+/),s=[],o=!0;if(a.forEach(function(e){h(e)||(o=!1),s.push(parseFloat(e))}),!o){alert("An input is not a number, resetting..."),document.getElementById(i).value=g(e.values," ");return}s.length==e.values.length?console.log("Changed "+e.tagName+' from: "'+n+'" to: "'+g(e.values," ")+'"'):(alert("Expecting "+e.values.length+" values for, but finding "+s.length+" resetting..."),document.getElementById(i).value=g(e.values," "))}function te(e,t){let i=t.id;if(h(t.value)){let i=parseFloat(t.value);e.value=i,console.log("Value set to "+i)}else alert("Value is not numeric, resetting..."),document.getElementById(i).value=e.value.toString()}function tt(){if(e6.size>0){let e=document.getElementById("reactions_diagram");null!=e&&(e.style.display="block",function(e,t,i,n,a){var s;let o,r,d,g;console.log("drawReactionDiagram");let m="black",h=e.getContext("2d"),c=(h.font=i,(s=h.measureText("Aj")).actualBoundingBoxAscent+s.actualBoundingBoxDescent),u=[],p=new Set,N=new Set,x=new Set,f=new Map,v=new Map,E=0,y=Number.MAX_VALUE,T=Number.MIN_VALUE;e6.forEach(function(e,t){let i=e.getTransitionStates(),n=e.getReactantsLabel();if(void 0!=n){u.push(n),p.has(n)&&N.add(n);let t=e.getReactantsEnergy(e5);y=Math.min(y,t),T=Math.max(T,t),v.set(n,t),!f.has(n)&&(f.set(n,E),E++)}let a=e.getProductsLabel();if(void 0!=a){p.add(a);let t=e.getProductsEnergy(e5);if(y=Math.min(y,t),T=Math.max(T,t),v.set(a,t),f.has(a)){E--;let e=l(f,a);f.forEach(function(t,i){t>e&&f.set(i,t-1)}),void 0!=i&&(i.forEach(function(e){let i=e.getMolecule().ref;x.add(i),f.set(i,E),t=e5.get(i)?.getEnergy()??0,y=Math.min(y,t),T=Math.max(T,t),v.set(i,t),E++}),f.set(a,E),E++)}else void 0!=i&&i.forEach(function(e){let i=e.getMolecule().ref;x.add(i),f.set(i,E),t=e5.get(i)?.getEnergy()??0,y=Math.min(y,t),T=Math.max(T,t),v.set(i,t),E++}),f.set(a,E),E++}});let b=T-y,S=[];f.forEach(function(e,t){S[e]=t});let C=0,w=0,M=new Map,P=new Map,L=new Map,z=new Map,B=new Map,R=new Map;S.forEach(function(t){let n=l(v,t),a=(n-y)*e.height/(b+0)+0;g=Math.max(eE(h,n.toString(),i),eE(h,t,i)),r=C+g+5,d=o=a+4,M.set(t,[C,o]),P.set(t,[r,d]),p.has(t)&&(L.set(t,[C,o]),z.set(t,[r,d])),x.has(t)&&(B.set(t,[C,o]),R.set(t,[r,d])),C=r+10,w=r}),e.width=w;let _=e.height+4*c+8,I=e.height;e.height=_,h.transform(1,0,0,-1,0,_),e6.forEach(function(e,t){let i=e.getTransitionStates(),n=e.getReactantsLabel(),a=e.getProductsLabel(),s=l(P,n),o=l(L,a);i.length>0?i.forEach(function(e){let t=e.getMolecule().ref,i=l(B,t);ef(h,m,2,s[0],s[1],i[0],i[1]);let n=l(R,t);ef(h,m,2,n[0],n[1],o[0],o[1])}):ef(h,m,2,s[0],s[1],o[0],o[1])}),u.forEach(function(e){let t=l(v,e),a=(t-y)*I/(b+0)+0,s=l(M,e)[0],o=a+4;ex(h,"blue",n,s,o,l(P,e)[0],o,i,c,e,t.toString())}),p.forEach(function(e){let t=l(v,e),a=(t-y)*I/(b+0)+0,s=l(L,e)[0],o=a+n,r=l(z,e)[0],d=t.toString();N.has(e)?ex(h,"orange",n,s,o,r,o,i,c,e,d):ex(h,"green",n,s,o,r,o,i,c,e,d)}),x.forEach(function(e){let t=l(v,e),a=(t-y)*I/(b+0)+0,s=l(B,e)[0],o=a+n;ex(h,"red",n,s,o,l(R,e)[0],o,i,c,e,t.toString())})}(e,0,"14px Arial",4,2))}}document.addEventListener("DOMContentLoaded",l=>{r=document.getElementById("xml_title"),d=document.getElementById("xml_text"),window.loadXML=function(){!function l(){let g=document.createElement("input");g.type="file",g.onchange=function(){if(g.files){for(let e=0;e<g.files.length;e++)console.log("inputElement.files["+e+"]="+g.files[e]);let s=g.files[0];if(console.log(s.name),a=s.name,null!=d){let o=new FileReader,l=0,g="";o.onload=function(m){if(null==m.target)throw Error("Event target is null");if(g+=m.target.result,null!=s){if(l<s.size){let e=s.slice(l,l+1048576);o.readAsText(e),l+=1048576}else{var N;N=g=g.trim(),null!=r&&(r.innerHTML=a),null!=d&&(d.innerHTML=N.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\n/g,"<br>").replace(/\t/g,"&nbsp;&nbsp;&nbsp;&nbsp;").replace(/  /g,"&nbsp;&nbsp;")),function(a){let s=_(a,ej.tagName);e=new ej(R(s));let o=a.getElementsByTagName(e$.tagName);if(1!=o.length)throw Error("Multiple "+e$.tagName+" tags found");{let s=o[0].childNodes[0].nodeValue.trim(),r=new e$(R(o[0]),s),d=document.getElementById("title");e.setTitle(r);let l=document.createElement("div");l.style.marginTop="1px",l.style.marginBottom="1px";let g=document.createTextNode("Title: ");l.appendChild(g);let m=document.createElement("input");m.type="text",m.value=s,m.style.fontSize=eW,l.appendChild(m),d.parentNode?.insertBefore(l,d),d.parentNode?.removeChild(d),x(m,0),console.log("inputElement.value="+m.value),m.addEventListener("change",function(){m.value!=s&&(r.value=m.value),x(m,0)});let N=document.getElementById("molecules");if(null==N);else{let t=function(e){let t=document.createElement("div"),i=_(e,eX.tagName),n=new Set;if(i.childNodes.forEach(function(e){n.add(e.nodeName)}),1!=n.size&&!(2==n.size&&n.has("#text")))throw console.error("moleculeListTagNames:"),n.forEach(e=>console.error(e)),Error("Additional tag names in moleculeList:");if(!n.has(en.tagName))throw Error('Expecting tags with "'+en.tagName+'" tagName but there are none!');let a=i.getElementsByTagName(en.tagName);console.log("Number of molecules="+a.length);for(let e=0;e<a.length;e++){let i,n,s=document.createElement("div"),o=R(a[e]),r=new Set,d=a[e].childNodes;for(let e=0;e<d.length;e++){let t=d[e];r.has(t.nodeName)?"#text"!=t.nodeName&&console.warn("Another ChildNode with nodeName="+t.nodeName):r.add(t.nodeName)}let l=a[e].getElementsByTagName(k.tagName);if(l.length>1)throw Error("Expecting 1 or 0 "+k.tagName+" but finding "+l.length+"!");if(1==l.length){let e=l[0],t=e.getElementsByTagName(I.tagName);if(t.length<2)throw Error("Expecting 2 or more atoms in "+k.tagName+", but finding "+t.length+"!");let n=[];for(let e=0;e<t.length;e++)n.push(new I(R(t[e])));i=new k(R(e),n),r.delete(k.tagName)}else{let t=a[e].getElementsByTagName(I.tagName);if(1==t.length)i=new I(R(t[0]));else if(t.length>1)throw Error("Expecting 1 "+I.tagName+" but finding "+t.length+". Should these be in an "+k.tagName+"?")}r.delete(I.tagName);let g=a[e].getElementsByTagName(H.tagName);if(g.length>1)throw Error("Expecting 1 or 0 "+H.tagName+" but finding "+g.length+"!");if(1==g.length){let e=g[0],t=e.getElementsByTagName(D.tagName),i=[];for(let e=0;e<t.length;e++)i.push(new D(R(t[e])));n=new H(R(e),i),r.delete(H.tagName)}else{let t=a[e].getElementsByTagName(D.tagName);if(1==t.length)n=new D(R(t[0]));else if(t.length>1)throw Error("Expecting 1 "+D.tagName+" but finding "+t.length+". Should these be in a "+H.tagName+"?")}r.delete(D.tagName);let m=new en(o,i,n);e5.set(m.id,m);let u=a[e].getElementsByTagName(j.tagName);if(u.length>1)throw Error("Expecting 1 or 0 "+j.tagName+" but finding "+u.length+"!");if(1==u.length){let e=document.createElement("div"),t=m.id+"_"+j.tagName,i=m.id+"_"+j.tagName+"_",n=c(e,j.tagName,t,eK,eZ,"1px","1px",i);s.appendChild(n);let a=new j(R(u[0]));m.setProperties(a);let o=u[0].getElementsByTagName(F.tagName);for(let t=0;t<o.length;t++){let i=new F(R(o[t]));a.setProperty(i),m.setProperties(a),i.dictRef==G.dictRef?e7(i,e1,m,o[t],e,eY):i.dictRef==$.dictRef?e7(i,e2,m,o[t],e,eY):e7(i,void 0,m,o[t],e,eY)}r.delete(j.tagName)}else{let t=a[e].getElementsByTagName(F.tagName);if(1!=t.length)throw Error("Expecting 1 "+F.tagName+" but finding "+t.length+". Should these be in a "+j.tagName+"?");let i=new F(R(t[0]));m.setProperties(i),i.dictRef==G.dictRef?e7(i,e1,m,t[0],s,eY):i.dictRef==$.dictRef?e7(i,e2,m,t[0],s,eY):e7(i,void 0,m,t[0],s,eY),r.delete(F.tagName)}let N=a[e].getElementsByTagName(J.tagName);if(N.length>0){if(N.length>1)throw Error("Expecting 1 or 0 "+J.tagName+" but finding "+N.length+"!");(function(e,t,i,n,a){let s=i.getElementsByTagName(W.tagName);if(s.length>0){let i=document.createElement("div"),o=t.id+"_"+J.tagName,r=t.id+"_"+J.tagName+"_",d=c(i,J.tagName,o,eK,eZ,"1px","1px",r);n.appendChild(d);let l=[];for(let e=0;e<s.length;e++){let n=S(s[e]),o=parseFloat(n),r=new W(R(s[e]),o);l.push(r);let d=W.tagName,g=t.id+"_"+J.tagName+"_"+W.tagName+"_"+e,m=p("number",g,e=>{e.target instanceof HTMLInputElement&&te(r,e.target)},n,d);m.style.marginLeft=a,m.style.marginTop="1px",m.style.marginBottom="1px",i.appendChild(m);let h=m.querySelector("input");h.value=n,x(h),h.addEventListener("change",t=>{n=t.target.value,l[e].setValue(parseFloat(n)),console.log("Set "+g+" to "+n),x(h)});let c=document.createElement("label");c.textContent="cm-1",m.appendChild(c)}e.setDeltaEDowns(l),t.setEnergyTransferModel(e)}})(new J(R(N[0])),m,N[0],s,eY),r.delete(J.tagName)}let y=a[e].getElementsByTagName(K.tagName);if(y.length>0){if(y.length>1)throw Error("Expecting 1 or 0 "+K.tagName+" but finding "+y.length+"!");(function(e,t,i,n){let a=document.createElement("label");a.textContent=K.tagName+": ";let s=document.createElement("div");s.appendChild(a);let o=v(["ClassicalRotors","me:QMRotors","QMRotors"],"DOSCMethod",t.id+"_Select_DOSCMethod");o.value=e.getXsiType(),o.addEventListener("change",t=>{t.target instanceof HTMLSelectElement&&(e.setXsiType(t.target.value),console.log("Set DOSCMethod to "+t.target.value))}),t.setDOSCMethod(e),s.appendChild(o),s.style.marginLeft=i,s.style.marginTop="1px",s.style.marginBottom="1px",n.appendChild(s)})(new K(R(y[0])),m,eZ,s),r.delete(K.tagName)}let C=a[e].getElementsByTagName(et.tagName);if(C.length>0){if(1!=C.length)throw Error("Expecting only 1 extra DOSCMethod, but there are "+C.length);let e=new et(R(y[0])),t=document.createElement("div"),i=m.id+"_"+et.tagName,n=m.id+"_"+et.tagName+"_",a=c(t,et.tagName,i,eK,eZ,"1px","1px",n);s.appendChild(a);let o=C[0].getElementsByTagName(Q.tagName);if(o.length>0){if(1!=o.length)throw Error("Expecting only 1 bondRef, but there are "+o.length);let i=document.createElement("div");i.style.marginLeft=eY,i.style.marginTop="1px",i.style.marginBottom="1px";let n=document.createElement("label");n.textContent=Q.tagName+": ",i.appendChild(n);let a=new Q(R(o[0]),b(T(o[0])));e.setBondRef(a);let s=v(m.getBonds().getBondIds(),a.value,m.id+"_"+Q.tagName);s.addEventListener("change",e=>{e.target instanceof HTMLSelectElement&&(a.value=e.target.value,f(e.target))}),f(s),i.appendChild(s),t.appendChild(i)}let d=C[0].getElementsByTagName(Y.tagName);if(d.length>0){if(1!=d.length)throw Error("Expecting only 1 HinderedRotorPotential, but there are "+d.length);let i=R(d[0]),n=new Y(i),a=document.createElement("div"),s=m.id+"_"+Y.tagName,o=m.id+"_"+K.tagName+"_"+Y.tagName,r=c(a,Y.tagName,s,eK,eY,"1px","1px",o);r.style.marginTop="1px",r.style.marginBottom="1px",t.appendChild(r);let l=document.createElement("label");l.style.marginLeft=e0,l.style.marginTop="1px",l.style.marginBottom="1px",l.textContent="Format: ",a.appendChild(l);let g=v(Y.formats,n.format,m.id+"_"+Y.tagName);g.addEventListener("change",e=>{e.target instanceof HTMLSelectElement&&(n.format=e.target.value,f(e.target))}),f(g),a.appendChild(g);let u=document.createElement("label");u.textContent="Units: ",u.style.marginLeft="2px",u.style.marginTop="1px",u.style.marginBottom="1px",a.appendChild(u),e3(Y.units,i,a,m.id+"_"+K.tagName+"_"+Y.tagName,Y.tagName,"2px","1px","1px");let p=document.createElement("label");p.style.marginLeft="2px",p.style.marginTop="1px",p.style.marginBottom="1px",p.textContent="Expansion size: ",a.appendChild(p);let N=document.createElement("input");N.type="number",N.style.marginLeft="2px",N.style.marginTop="1px",N.style.marginBottom="1px",N.id=m.id+"_"+K.tagName+"_"+Y.tagName+"_expansionSize",N.addEventListener("change",e=>{e.target instanceof HTMLInputElement&&(h(e.target.value)?n.setExpansionSize(parseInt(e.target.value)):(alert("Expansion size input is not a number, resetting..."),N.value=n.getExpansionSize().toString(),console.warn("Expansion size input is not a number.")),x(N))}),N.value=n.getExpansionSize().toString(),x(N),a.appendChild(N);let y=document.createElement("label");y.style.marginLeft="2px",y.style.marginTop="1px",y.style.marginBottom="1px",y.textContent="Use sine terms: ",a.appendChild(y);let T=document.createElement("input");T.type="checkbox",T.style.marginLeft="2px",T.style.marginTop="1px",T.style.marginBottom="1px",T.id=m.id+"_"+K.tagName+"_"+Y.tagName+"_useSineTerms",T.checked=n.getUseSineTerms(),T.addEventListener("change",e=>{e.target instanceof HTMLInputElement&&n.setUseSineTerms(e.target.checked)}),a.appendChild(T);let b=document.createElement("div"),S=m.id+"_"+Y.tagName+"_"+Z.tagName,C=m.id+"_"+K.tagName+"_"+Y.tagName+"_"+Z.tagName,w=c(b,Z.tagName,S,eK,e0,"1px","1px",C);a.appendChild(w);let M=[],P=d[0].getElementsByTagName(Z.tagName);for(let e=0;e<P.length;e++){let t=new Z(R(P[e]));M.push(t);let i=E("125px","1px","1px");w.appendChild(i);let n=document.createElement("label");n.textContent="Angle: ",i.appendChild(n);let a=document.createElement("input");a.type="number",a.style.marginLeft="2px",a.style.marginTop="1px",a.style.marginBottom="1px",a.id=m.id+"_"+Z.tagName+"_angle",a.addEventListener("change",e=>{e.target instanceof HTMLInputElement&&(h(e.target.value)?t.setAngle(parseFloat(e.target.value)):(alert("Angle input is not a number, resetting..."),a.value=t.getAngle().toString(),console.warn("Angle input is not a number.")),x(a))}),a.value=t.getAngle().toString(),x(a),i.appendChild(a);let s=document.createElement("label");s.style.marginLeft="2px",s.style.marginTop="1px",s.style.marginBottom="1px",s.textContent="Potential: ",i.appendChild(s);let o=document.createElement("input");o.style.marginLeft="2px",o.style.marginTop="1px",o.style.marginBottom="1px",o.type="number",o.id=m.id+"_"+Z.tagName+"_potential",o.addEventListener("change",e=>{e.target instanceof HTMLInputElement&&(h(e.target.value)?t.setPotential(parseFloat(e.target.value)):(alert("Potential input is not a number, resetting..."),o.value=t.getPotential().toString(),console.warn("Potential input is not a number.")),x(o))}),o.value=t.getPotential().toString(),x(o),i.appendChild(o),b.appendChild(i)}w.appendChild(b),n.setPotentialPoints(M),e.setHinderedRotorPotential(n)}let l=y[0].getElementsByTagName(ee.tagName);if(l.length>0){if(1!=l.length)throw Error("Expecting only 1 Periodicity, but there are "+l.length);let i=b(T(l[0])),n=new ee(R(l[0]),parseFloat(i));e.setPeriodicity(n);let a=document.createElement("div");a.style.marginLeft=eY,a.style.marginTop="1px",a.style.marginBottom="1px";let s=document.createElement("label");s.textContent=ee.tagName+": ",a.appendChild(s);let o=p("number",m.id+"_"+ee.tagName,e=>{e.target instanceof HTMLInputElement&&(n.value=parseFloat(e.target.value))},i,ee.tagName);a.appendChild(o),t.appendChild(a)}m.setExtraDOSCMethod(e),r.delete(et.tagName)}r.delete(ei.tagName);let w=a[e].getElementsByTagName(ei.tagName);if(w.length>0){if(1!=w.length)throw Error("Expecting only 1 reservoirSize, but there are "+w.length);let e=b(T(w[0])),t=parseFloat(e),i=new ei(R(w[0]),t);m.setReservoirSize(i);let n=document.createElement("div");n.style.marginLeft=eY,n.style.marginTop="1px",n.style.marginBottom="1px";let a=document.createElement("label");a.textContent=ei.tagName+": ",n.appendChild(a);let o=p("number",m.id+"_"+ei.tagName,e=>{e.target instanceof HTMLInputElement&&(i.value=parseFloat(e.target.value),x(e.target))},e,ei.tagName);x(o.querySelector("input")),n.appendChild(o),s.appendChild(n)}r.delete("#text"),r.size>0&&(console.warn("There are additional unexpected moleculeTagNames:"),r.forEach(e=>console.warn(e)));let M=document.createElement("div");M.id=m.id+"_molstar",s.appendChild(M);let P=c(s,m.getLabel(),m.tagName+"_"+m.id+"_button",eJ,eQ,"1px","1px",m.tagName+"_"+m.id);t.appendChild(P)}return t}(a);N.appendChild(c(t,"Molecules","molecules_button",eW,"0px","1px","1px","moleculesList")),e.setMoleculeList(new eX(R(t),Array.from(e5.values())))}let C=document.getElementById("reactions");if(null==C);else{let t=function(e){let t=document.createElement("div");t.style.marginTop="1px",t.style.marginBottom="1px";let i=_(e,eV.tagName),n=new Set;if(i.childNodes.forEach(function(e){n.add(e.nodeName)}),1!=n.size&&!(2==n.size&&n.has("#text")))throw console.error("reactionListTagNames:"),n.forEach(e=>console.error(e)),Error("Additional tag names in reactionList:");if(!n.has(eN.tagName))throw Error('Expecting tags with "'+eN.tagName+'" tagName but there are none!');let a=i.getElementsByTagName(eN.tagName);console.log("Number of reactions="+a.length);for(let e=0;e<a.length;e++){let i=document.createElement("div"),n=R(a[e]),s=new Set,o=a[e].childNodes;for(let e=0;e<o.length;e++){let t=o[e];s.has(t.nodeName)?"#text"!=t.nodeName&&console.warn("Another ChildNode with nodeName="+t.nodeName):s.add(t.nodeName)}let r=new eN(n);e6.set(r.id,r);let d=a[e].getElementsByTagName(es.tagName);if(s.delete(es.tagName),d.length>0){let e=document.createElement("div"),t=[];for(let i=0;i<d.length;i++){let n=new ea(R(y(d[i],en.tagName))),a=new es(R(d[i]),n);t.push(a);let s=document.createElement("div"),o=document.createElement("label");o.textContent=n.ref+" role: ",s.appendChild(o);let r=v(["deficientReactant","excessReactant","modelled"],"Role",n.ref+"_Select_Role");r.value=n.role,r.addEventListener("change",e=>{e.target instanceof HTMLSelectElement&&(n.setRole(e.target.value),console.log("Set Role to "+e.target.value))}),s.appendChild(r),s.style.marginLeft=eY,s.style.marginTop="1px",s.style.marginBottom="1px",e.appendChild(s)}r.setReactants(t);let n=c(e,"Reactants",r.id+"_"+es.tagName,eK,eZ,"1px","1px",r.id+"_"+es.tagName+"_");i.appendChild(n)}let l=a[e].getElementsByTagName(eo.tagName);if(s.delete(eo.tagName),l.length>0){let e=document.createElement("div"),t=[];for(let i=0;i<l.length;i++){let n=new ea(R(y(l[i],en.tagName))),a=new eo(R(l[i]),n);t.push(a);let s=document.createElement("div"),o=document.createElement("label");o.textContent=n.ref+" role: ",s.appendChild(o);let r=v(["modelled","sink"],"Role",n.ref+"_Select_Role");r.value=n.role,r.addEventListener("change",e=>{e.target instanceof HTMLSelectElement&&(n.setRole(e.target.value),console.log("Set Role to "+e.target.value))}),s.appendChild(r),s.style.marginLeft=eY,s.style.marginTop="1px",s.style.marginBottom="1px",e.appendChild(s)}r.setProducts(t);let n=c(e,"Products",r.id+"_"+eo.tagName,eK,eZ,"1px","1px",r.id+"_"+eo.tagName+"_");i.appendChild(n)}let g=a[e].getElementsByTagName(eu.tagName);if(g.length>0){if(g.length>1)throw Error("Expecting 1 "+eu.tagName+" but finding "+g.length+"!");let e=new eu(R(g[0]));r.setTunneling(e);let t=document.createElement("div"),n=document.createElement("label");n.textContent=eu.tagName+": ",t.appendChild(n);let a=v(["Eckart","WKB"],"Tunneling",r.id+"_Select_Tunneling");a.value=e.getName(),a.addEventListener("change",t=>{t.target instanceof HTMLSelectElement&&(e.setName(t.target.value),console.log("Set Tunneling to "+t.target.value))}),t.appendChild(a),t.style.marginLeft=eZ,t.style.marginTop="1px",t.style.marginBottom="1px",i.appendChild(t)}let m=a[e].getElementsByTagName(er.tagName);if(m.length>0){let e=document.createElement("div"),t=[];for(let i=0;i<m.length;i++){let n=new ea(R(y(m[i],en.tagName))),a=new er(R(m[i]),n);t.push(a);let s=document.createElement("label");s.textContent=n.ref+" role: transitionState",s.style.marginLeft=eY,s.style.marginTop="1px",s.style.marginBottom="1px",e.appendChild(s)}r.setTransitionStates(t);let n=c(e,"Transition States",r.id+"_"+er.tagName,eK,eZ,"1px","1px",r.id+"_"+er.tagName+"_");i.appendChild(n)}let h=a[e].getElementsByTagName(eh.tagName);if(h.length>0){if(h.length>1)throw Error("Expecting 1 "+eh.tagName+" but finding "+h.length+"!");{let e,t=document.createElement("div"),n=R(h[0]),a=n.get("name");if(void 0==a||a==ec.xsiType2){let a=n.get("xsi:type");if(e=new ec(n),a==ec.xsiType||a==ec.xsiType2){let n=h[0].getElementsByTagName(ed.tagName);if(null!=n&&null!=n[0]){let i=S(n[0]),a=parseFloat(i),s=R(n[0]),o=new ed(s,a);e.setPreExponential(o);let d=ed.tagName,l=r.id+"_"+ec.tagName+"_"+ed.tagName,g=p("number",l,e=>{e.target instanceof HTMLInputElement&&te(o,e.target)},i,d);g.style.marginLeft=eY,g.style.marginTop="1px",g.style.marginBottom="1px",t.appendChild(g);let m=g.querySelector("input");m.value=i,x(m),m.addEventListener("change",e=>{i=e.target.value,o.value=parseFloat(i),console.log("Set "+l+" to "+i),x(m)}),e3(void 0,s,g,r.id+"_"+ec.xsiType+"_"+ed.tagName,ed.tagName,"2px","1px","1px"),t.appendChild(g)}let a=h[0].getElementsByTagName(el.tagName);if(null!=a&&null!=a[0]){let i=S(a[0]),n=parseFloat(i),s=R(a[0]),o=new el(s,n);e.setActivationEnergy(o);let d=el.tagName,l=r.id+"_"+ec.tagName+"_"+el.tagName,g=p("number",l,e=>{e.target instanceof HTMLInputElement&&te(o,e.target)},i,d);g.style.marginLeft=eY,g.style.marginTop="1px",g.style.marginBottom="1px";let m=g.querySelector("input");m.value=i,x(m),m.addEventListener("change",e=>{i=e.target.value,o.value=parseFloat(i),console.log("Set "+l+" to "+i),x(m)}),e3(void 0,s,g,r.id+"_"+ec.xsiType+"_"+el.tagName,el.tagName,"2px","1px","1px"),t.appendChild(g)}let s=h[0].getElementsByTagName(eg.tagName);if(null!=s&&null!=s[0]){let i=S(s[0]),n=parseFloat(i),a=R(s[0]),o=new eg(a,n);e.setTInfinity(o);let d=eg.tagName,l=r.id+"_"+ec.tagName+"_"+eg.tagName,g=p("number",l,e=>{e.target instanceof HTMLInputElement&&te(o,e.target)},i,d);g.style.marginLeft=eY,g.style.marginTop="1px",g.style.marginBottom="1px";let m=g.querySelector("input");m.value=i,x(m),m.addEventListener("change",e=>{i=e.target.value,o.value=parseFloat(i),console.log("Set "+l+" to "+i),x(m)}),e3(void 0,a,g,r.id+"_"+ec.xsiType+"_"+eg.tagName,eg.tagName,"2px","1px","1px"),t.appendChild(g)}let o=h[0].getElementsByTagName(em.tagName);if(null!=o&&null!=o[0]){let i=S(o[0]),n=parseFloat(i),a=R(o[0]),s=new em(a,n);e.setNInfinity(s);let d=em.tagName,l=r.id+"_"+ec.tagName+"_"+em.tagName,g=p("number",l,e=>{e.target instanceof HTMLInputElement&&te(s,e.target)},i,d);g.style.marginLeft=eY,g.style.marginTop="1px",g.style.marginBottom="1px",t.appendChild(g);let m=g.querySelector("input");m.value=i,x(m),m.addEventListener("change",e=>{i=e.target.value,s.value=parseFloat(i),console.log("Set "+l+" to "+i),x(m)}),e3(void 0,a,g,r.id+"_"+ec.xsiType+"_"+em.tagName,em.tagName,"2px","1px","1px"),t.appendChild(g)}let d=r.id+"_"+eh.tagName,l=r.id+"_"+eh.tagName+"_",g=c(t,eh.tagName,d,eK,eZ,"1px","1px",l);i.appendChild(g)}else throw Error("Unexpected xsi:type="+a)}else{e=new eh(n);let a=document.createElement("label");a.textContent=eh.tagName+": "+n.get("name"),a.style.marginLeft=eZ,a.style.marginTop="1px",a.style.marginBottom="1px",t.appendChild(a),i.appendChild(t)}r.setMCRCMethod(e)}}let u=a[e].getElementsByTagName(ep.tagName);if(u.length>0){let e;if(u.length>1)throw Error("Expecting 1 "+ep.tagName+" but finding "+u.length+"!");let t=parseFloat(b(T(u[0])));e=new ep(R(u[0]),t),r.setExcessReactantConc(e)}let N=c(i,r.id+"("+r.getLabel()+")",r.tagName+"_"+r.id+"_button",eJ,eQ,"1px","1px",r.tagName+"_"+r.id);t.appendChild(N)}return t}(a);C.appendChild(c(t,"Reactions","reactions_button",eW,"0px","1px","1px","reactionsList")),e.setReactionList(new eV(R(t),Array.from(e6.values())))}tt();let w=document.getElementById("conditions");if(null==w);else{let i=function(e){console.log(eC.tagName);let i=document.createElement("div"),n=_(e,eC.tagName);t=new eC(R(n));let a=Array.from(n.children).filter(e=>e.tagName===ey.tagName);if(a.length>0){if(a.length>1)throw Error("Expecting 1 "+ey.tagName+" but finding "+a.length+"!");let e=new ey(R(a[0]),b(T(a[0])));console.log("bathGas"+e.toString()),t.setBathGas(e);let n=document.createElement("div"),s=document.createElement("label");s.textContent=ey.tagName+": ",n.appendChild(s);let o=v(Array.from(new Set(e5.keys())),ey.tagName,eC.tagName+"_"+ey.tagName);o.value=e.value,o.addEventListener("change",t=>{t.target instanceof HTMLSelectElement&&(e.value=t.target.value,console.log("Set "+eb.tagName+"_"+ey.tagName+" to "+t.target.value),f(t.target))}),f(o),n.style.marginLeft=eQ,n.style.marginTop="1px",n.style.marginBottom="1px",n.appendChild(o),i.appendChild(n)}let s=n.getElementsByTagName(eS.tagName);if(s.length>0){if(s.length>1)throw Error("Expecting 1 "+eS.tagName+" but finding "+s.length+"!");let e=document.createElement("div");i.appendChild(e);let n=R(s[0]),a=eS.tagName+"_button",o=eS.tagName+"_",r=c(e,eS.tagName,a,eJ,eQ,"1px","1px",o);i.appendChild(r);let d=s[0].getElementsByTagName(eb.tagName);if(0==d.length)throw Error("Expecting 1 or more "+eb.tagName+" but finding 0!");{let i=new eS(n);for(let t=0;t<d.length;t++){let n=new eb(R(d[t])),a=E(eZ,"1px","1px");e.appendChild(a);let s=d[t].getElementsByTagName(ey.tagName);if(s.length>0){s.length>1&&console.warn("xml_bathGass.length="+s.length);let e=document.createElement("label");e.textContent=ey.tagName+": ",a.appendChild(e);let t=b(T(s[0])),i=new ey(R(s[0]),t);n.setBathGas(i);let o=v(Array.from(new Set(e5.keys())),ey.tagName,eb.tagName+"_"+ey.tagName);o.value=i.value,o.addEventListener("change",e=>{e.target instanceof HTMLSelectElement&&(i.value=e.target.value,console.log("Set "+eb.tagName+"_"+ey.tagName+" to "+e.target.value),f(e.target))}),f(o),a.appendChild(o)}let o=d[t].getElementsByTagName(eT.tagName);if(o.length>0){o.length>1&&console.warn("xml_experimentRates.length="+o.length);let e=b(T(o[0])),t=new eT(R(o[0]),parseFloat(e));n.setExperimentRate(t);let i=p("number",eb.tagName+"_"+eT.tagName,e=>{e.target instanceof HTMLInputElement&&te(t,e.target)},t.value.toString(),eT.tagName);i.style.marginTop="1px",i.style.marginBottom="1px",a.appendChild(i)}let r=n.getP(),l=eb.tagName+"_P",g=n.getT(),m=eb.tagName+"_T",c=p("number",l,e=>{e.target instanceof HTMLInputElement&&(h(e.target.value)?(n.setP(parseFloat(e.target.value)),console.log("Set P to "+e.target.value)):(alert("Value is not numeric, resetting..."),document.getElementById(l).value=n.getP().toString()),x(e.target))},r.toString(),"P"),u=c.querySelector("input");u.value=r.toString(),x(u),c.style.marginLeft="5px",c.style.marginTop="1px",c.style.marginBottom="1px",a.appendChild(c);let N=p("number",m,e=>{e.target instanceof HTMLInputElement&&(h(e.target.value)?(n.setT(parseFloat(e.target.value)),console.log("Set T to "+e.target.value)):(alert("Value is not numeric, resetting..."),document.getElementById(m).value=n.getT().toString()),x(e.target))},g.toString(),"T"),y=N.querySelector("input");y.value=g.toString(),x(y),N.style.marginLeft="5px",N.style.marginTop="1px",N.style.marginBottom="1px",a.appendChild(N),e3(void 0,R(d[t]),a,eb.tagName,eb.tagName,"2px","1px","1px"),i.addPTpair(n),e.appendChild(a)}let a=document.createElement("button");a.textContent="Add",a.style.marginLeft=eZ,a.style.marginTop="1px",a.style.marginBottom="1px",e.appendChild(a),a.addEventListener("click",()=>{let t=new Map;t.set("units","Torr");let n=new eb(t);i.addPTpair(n);let s=document.createElement("div");s.style.marginLeft=eQ,s.style.marginTop="1px",s.style.marginBottom="1px",e.insertBefore(s,a);let o=E(),r=p("number",eb.tagName+"_P",e=>{e.target instanceof HTMLInputElement&&(h(e.target.value)?(n.setP(parseFloat(e.target.value)),console.log("Set P to "+e.target.value)):(alert("Value is not numeric, resetting..."),e.target.value=n.getP().toString()),x(e.target))},n.getP().toString(),"P"),d=r.querySelector("input");d.value=n.getP().toString(),x(d),r.style.marginLeft=eQ,r.style.marginTop="1px",r.style.marginBottom="1px",o.appendChild(r);let l=p("number",eb.tagName+"_T",e=>{e.target instanceof HTMLInputElement&&(h(e.target.value)?(n.setT(parseFloat(e.target.value)),console.log("Set T to "+e.target.value)):(alert("Value is not numeric, resetting..."),e.target.value=n.getT().toString()),x(e.target))},n.getT().toString(),"T"),g=l.querySelector("input");g.value=n.getT().toString(),x(g),l.style.marginLeft="5px",l.style.marginTop="1px",l.style.marginBottom="1px",o.appendChild(l),e3(void 0,t,o,eb.tagName,eb.tagName,"2px","1px","1px"),s.appendChild(o)});let s=document.createElement("button");s.textContent="Add from spreadsheet",s.style.marginLeft=eZ,s.style.marginTop="1px",s.style.marginBottom="1px",e.appendChild(s),s.addEventListener("click",()=>{let t=E(),n=document.createElement("input");n.type="text",n.style.marginLeft=eZ,n.style.marginTop="1px",n.style.marginBottom="1px",t.appendChild(n),e.insertBefore(t,a),n.addEventListener("change",()=>{if(console.log("inputElement.value="+n.value),console.log("inputElement.value.length="+n.value.length),n.value.length>0){let s=n.value.split(" ");console.log("pTPairsArray.length="+s.length);for(let t=0;t<s.length;t++){let n=new Map;n.set("units","Torr");let o=new eb(n),r=s[t].split("	");if(2==r.length){let e=parseFloat(r[0]),t=parseFloat(r[1]);o.setP(e),o.setT(t),console.log("pTPair="+o)}else console.warn("pTPairArray.length="+r.length);let d=E(eZ,"1px","1px"),l=p("number",eb.tagName+"_P",e=>{e.target instanceof HTMLInputElement&&(h(e.target.value)?(o.setP(parseFloat(e.target.value)),console.log("Set P to "+e.target.value)):(alert("Value is not numeric, resetting..."),e.target.value=o.getP().toString()),x(e.target))},o.getP().toString(),"P"),g=l.querySelector("input");g.value=o.getP().toString(),x(g),l.style.marginTop="1px",l.style.marginBottom="1px",d.appendChild(l);let m=p("number",eb.tagName+"_T",e=>{e.target instanceof HTMLInputElement&&(h(e.target.value)?(o.setT(parseFloat(e.target.value)),console.log("Set T to "+e.target.value)):(alert("Value is not numeric, resetting..."),e.target.value=o.getT().toString()),x(e.target))},o.getT().toString(),"T"),c=m.querySelector("input");c.value=o.getT().toString(),x(c),m.style.marginLeft="5px",m.style.marginTop="1px",m.style.marginBottom="1px",d.appendChild(m),e3(void 0,n,d,eb.tagName,eb.tagName,"2px","1px","1px"),console.log(a),console.log(e),e.insertBefore(d,a),i.addPTpair(o)}e.removeChild(t)}})}),t.setPTs(i)}}return i}(a);w.appendChild(c(i,"Conditions","conditions_button",eW,"0px","1px","1px","conditionsList")),e.setConditions(t)}let M=document.getElementById("modelParameters");if(null==M);else{let t=function(e){console.log(eP.tagName);let t=document.createElement("div"),n=_(e,eP.tagName);i=new eP(R(n));let a=n.getElementsByTagName(ew.tagName);if(a.length>0){if(a.length>1)throw Error("Expecting 1 "+ey.tagName+" but finding "+a.length+"!");let e=R(a[0]),n=parseFloat(b(T(a[0]))),s=new ew(e,n);i.setGrainSize(s);let o=E(),r=p("number",eP.tagName+"_"+ew.tagName,e=>{e.target instanceof HTMLInputElement&&(te(s,e.target),x(e.target))},n.toString(),ew.tagName);x(r.querySelector("input")),r.style.marginLeft=eQ,r.style.marginTop="1px",r.style.marginBottom="1px",o.appendChild(r),e3(void 0,e,o,eP.tagName+"_"+ew.tagName,ew.tagName,"2px","1px","1px"),t.appendChild(o)}let s=_(n,eM.tagName),o=new eM(R(s),parseFloat(b(T(s))));i.setEnergyAboveTheTopHill(o);let r=p("number",eP.tagName+"_"+eM.tagName,e=>{e.target instanceof HTMLInputElement&&(te(o,e.target),x(e.target))},o.value.toString(),eM.tagName);return x(r.querySelector("input")),r.style.marginLeft=eQ,r.style.marginTop="1px",r.style.marginBottom="1px",t.appendChild(r),t}(a);M.appendChild(c(t,"Model Parameters","modelParameters_button",eW,"0px","1px","1px","modelParametersList")),e.setModelParameters(i)}let P=document.getElementById("control");if(null==P);else{let t=function(e){console.log(eq.tagName);let t=document.createElement("div"),i=_(e,eq.tagName);n=new eq(R(i));let a=E(eQ,"1px","1px");t.appendChild(a);let s=i.getElementsByTagName(eL.tagName),o=document.createElement("label");a.appendChild(o),o.textContent=eL.tagName;let r=document.createElement("input");a.appendChild(r),r.type="checkbox",r.id=eL.tagName,r.addEventListener("change",e=>{e.target instanceof HTMLInputElement&&(e.target.checked?n.setTestDOS(new eL):n.removeTestDOS())}),1==s.length?(r.checked=!0,n.setTestDOS(new eL)):s.length>1&&console.warn("xml_testDOS.length="+s.length);let d=E(eQ,"1px","1px");t.appendChild(d);let l=i.getElementsByTagName(ez.tagName),g=document.createElement("label");d.appendChild(g),g.textContent=ez.tagName;let m=document.createElement("input");d.appendChild(m),m.type="checkbox",m.id=ez.tagName,m.addEventListener("change",e=>{e.target instanceof HTMLInputElement&&(e.target.checked?n.setPrintSpeciesProfile(new ez):n.removePrintSpeciesProfile())}),1==l.length?(m.checked=!0,n.setTestDOS(new ez)):s.length>1&&console.warn("xml_printSpeciesProfile.length="+l.length);let h=E(eQ,"1px","1px");t.appendChild(h);let c=i.getElementsByTagName(eB.tagName),u=document.createElement("label");h.appendChild(u),u.textContent=eB.tagName;let N=document.createElement("input");h.appendChild(N),N.type="checkbox",N.id=eB.tagName,N.addEventListener("change",e=>{e.target instanceof HTMLInputElement&&(e.target.checked?n.setTestMicroRates(new eB):n.removeTestMicroRates())}),1==c.length?(N.checked=!0,n.setTestMicroRates(new eB)):c.length>1&&console.warn("xml_testMicroRates.length="+c.length);let f=E(eQ,"1px","1px");t.appendChild(f);let v=i.getElementsByTagName(eR.tagName),y=document.createElement("label");f.appendChild(y),y.textContent=eR.tagName;let S=document.createElement("input");f.appendChild(S),S.type="checkbox",S.id=eR.tagName,S.addEventListener("change",e=>{e.target instanceof HTMLInputElement&&(e.target.checked?n.setTestRateConstant(new eR):n.removeTestRateConstant())}),1==v.length?(S.checked=!0,n.setTestRateConstant(new eR)):v.length>1&&console.warn("xml_testRateConstant.length="+v.length);let C=E(eQ,"1px","1px");t.appendChild(C);let w=i.getElementsByTagName(e_.tagName),M=document.createElement("label");C.appendChild(M),M.textContent=e_.tagName;let P=document.createElement("input");C.appendChild(P),P.type="checkbox",P.id=e_.tagName,P.addEventListener("change",e=>{e.target instanceof HTMLInputElement&&(e.target.checked?n.setPrintGrainDOS(new e_):n.removePrintGrainDOS())}),1==w.length?(P.checked=!0,n.setPrintGrainDOS(new e_)):w.length>1&&console.warn("xml_printGrainDOS.length="+w.length);let L=E(eQ,"1px","1px");t.appendChild(L);let z=i.getElementsByTagName(eI.tagName),B=document.createElement("label");L.appendChild(B),B.textContent=eI.tagName;let I=document.createElement("input");L.appendChild(I),I.type="checkbox",I.id=eI.tagName,I.addEventListener("change",e=>{e.target instanceof HTMLInputElement&&(e.target.checked?n.setPrintCellDOS(new eI):n.removePrintCellDOS())}),1==z.length?(I.checked=!0,n.setPrintCellDOS(new eI)):z.length>1&&console.warn("xml_printCellDOS.length="+z.length);let k=E(eQ,"1px","1px");t.appendChild(k);let D=i.getElementsByTagName(ek.tagName),H=document.createElement("label");k.appendChild(H),H.textContent=ek.tagName;let A=document.createElement("input");k.appendChild(A),A.type="checkbox",A.id=ek.tagName,A.addEventListener("change",e=>{e.target instanceof HTMLInputElement&&(e.target.checked?n.setPrintReactionOperatorColumnSums(new ek):n.removePrintReactionOperatorColumnSums())}),1==D.length?(A.checked=!0,n.setPrintReactionOperatorColumnSums(new ek)):D.length>1&&console.warn("xml_printReactionOperatorColumnSums.length="+D.length);let O=E(eQ,"1px","1px");t.appendChild(O);let F=i.getElementsByTagName(eD.tagName),G=document.createElement("label");O.appendChild(G),G.textContent=eD.tagName;let U=document.createElement("input");O.appendChild(U),U.type="checkbox",U.id=eD.tagName,U.addEventListener("change",e=>{e.target instanceof HTMLInputElement&&(e.target.checked?n.setPrintTunnellingCoefficients(new eD):n.removePrintTunnellingCoefficients())}),1==F.length?(U.checked=!0,n.setPrintTunnellingCoefficients(new eD)):F.length>1&&console.warn("xml_printTunnellingCoefficients.length="+F.length);let q=E(eQ,"1px","1px");t.appendChild(q),i.getElementsByTagName(eH.tagName);let $=document.createElement("label");q.appendChild($),$.textContent=eH.tagName;let X=document.createElement("input");q.appendChild(X),X.type="checkbox",X.id=eH.tagName,X.addEventListener("change",e=>{e.target instanceof HTMLInputElement&&(e.target.checked?n.setPrintGrainkfE(new eH):n.removePrintGrainkfE())});let V=E(eQ,"1px","1px");t.appendChild(V),i.getElementsByTagName(eA.tagName);let j=document.createElement("label");V.appendChild(j),j.textContent=eA.tagName;let W=document.createElement("input");V.appendChild(W),W.type="checkbox",W.id=eA.tagName,W.addEventListener("change",e=>{e.target instanceof HTMLInputElement&&(e.target.checked?n.setPrintGrainBoltzmann(new eA):n.removePrintGrainBoltzmann())});let J=E(eQ,"1px","1px");t.appendChild(J),i.getElementsByTagName(eO.tagName);let K=document.createElement("label");J.appendChild(K),K.textContent=eO.tagName;let Q=document.createElement("input");J.appendChild(Q),Q.type="checkbox",Q.id=eO.tagName,Q.addEventListener("change",e=>{e.target instanceof HTMLInputElement&&(e.target.checked?n.setPrintGrainkbE(new eO):n.removePrintGrainkbE())});let Z=i.getElementsByTagName(eF.tagName);if(1==Z.length){let e=new eF(R(Z[0]),parseFloat(b(T(Z[0]))));n.setEigenvalues(e);let i=p("number",eq.tagName+"_"+eF.tagName,t=>{t.target instanceof HTMLInputElement&&(te(e,t.target),x(t.target))},e.value.toString(),eF.tagName);x(i.querySelector("input")),i.style.marginLeft=eQ,i.style.marginTop="1px",i.style.marginBottom="1px",t.appendChild(i)}else console.warn("eigenvalues.length="+Z.length);let Y=i.getElementsByTagName(eU.tagName);if(1==Y.length){let e=parseFloat(b(T(Y[0]))),i=new eU(R(Y[0]),e);n.setDiagramEnergyOffset(i);let a=p("number",eq.tagName+"_"+eU.tagName,e=>{e.target instanceof HTMLInputElement&&(te(i,e.target),x(e.target))},e.toString(),eU.tagName);x(a.querySelector("input")),a.style.marginLeft=eQ,a.style.marginTop="1px",a.style.marginBottom="1px",t.appendChild(a)}else console.warn("diagramEnergyOffset.length="+Y.length);return t}(a);P.appendChild(c(t,"Control","control_button",eW,"0px","1px","1px","controlList")),e.setControl(n)}!function(){for(var e=document.getElementsByClassName("collapsible"),t=0;t<e.length;t++)e[t].removeEventListener("click",u),e[t].addEventListener("click",u)}()}}(new DOMParser().parseFromString(g,"text/xml"))}}};let m=s.slice(l,l+1048576);o.readAsText(m),l+=1048576}}},g.click(),null!=(s=document.getElementById("load_button"))&&s.addEventListener("click",l),null!=(o=document.getElementById("saveButton"))&&(o.style.display="inline")}()}}),window.setNumberArrayNode=e9,window.set=te,window.saveXML=function(){console.log("saveXML");let t=new Blob([ej.header,e.toXML("  ","  ")],{type:"text/plain"}),i=URL.createObjectURL(t),n=document.createElement("a");n.href=i,n.download=a,document.body.appendChild(n),n.click(),document.body.removeChild(n)};
//# sourceMappingURL=index.2df7345b.js.map
